/*! For license information please see main.618faa22.js.LICENSE.txt */
!function(){var e={57135:function(e,t,n){e.exports=n(62946)},36724:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},12481:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},10577:function(e,t,n){var r=n(36724);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},51595:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},19529:function(e){function t(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=e.apply(n,r);function s(e){t(a,i,o,s,u,"next",e)}function u(e){t(a,i,o,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},30437:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},91173:function(e,t,n){var r=n(65697),i=n(50858);function o(t,n,a){return i()?(e.exports=o=Reflect.construct,e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=o=function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o},e.exports.__esModule=!0,e.exports.default=e.exports),o.apply(null,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},47857:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},35724:function(e,t,n){var r=n(57936);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}},e.exports.__esModule=!0,e.exports.default=e.exports},54758:function(e,t,n){var r=n(13609),i=n(50858),o=n(13978);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var a=r(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return o(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},85921:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},65431:function(e,t,n){var r=n(17801);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get,e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},13609:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},41490:function(e,t,n){var r=n(65697);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},89386:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},50858:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},44023:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},84086:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports},85459:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},63410:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},93621:function(e,t,n){var r=n(85921);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},13978:function(e,t,n){var r=n(81449).default,i=n(51595);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},65697:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},12848:function(e,t,n){var r=n(12481),i=n(84086),o=n(57936),a=n(85459);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},17801:function(e,t,n){var r=n(13609);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},61874:function(e){e.exports=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},e.exports.__esModule=!0,e.exports.default=e.exports},88148:function(e,t,n){var r=n(10577),i=n(44023),o=n(57936),a=n(63410);e.exports=function(e){return r(e)||i(e)||o(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},81449:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},57936:function(e,t,n){var r=n(36724);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},70391:function(e,t,n){var r=n(13609),i=n(65697),o=n(89386),a=n(91173);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},96080:function(e,t,n){e.exports=n(62946)},50408:function(e,t,n){e.exports=n(62946)},91226:function(e,t,n){"use strict";n.d(t,{Z:function(){return ie}});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,o=String.fromCharCode,a=Object.assign;function s(e){return e.trim()}function u(e,t,n){return e.replace(t,n)}function l(e,t){return e.indexOf(t)}function c(e,t){return 0|e.charCodeAt(t)}function f(e,t,n){return e.slice(t,n)}function h(e){return e.length}function d(e){return e.length}function p(e,t){return t.push(e),e}var v=1,m=1,g=0,y=0,b=0,x="";function _(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:v,column:m,length:a,return:""}}function w(e,t){return a(_("",null,null,"",null,null,0),e,{length:-e.length},t)}function S(){return b=y>0?c(x,--y):0,m--,10===b&&(m=1,v--),b}function E(){return b=y<g?c(x,y++):0,m++,10===b&&(m=1,v++),b}function k(){return c(x,y)}function O(){return y}function A(e,t){return f(x,e,t)}function C(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function M(e){return v=m=1,g=h(x=e),y=0,[]}function T(e){return x="",e}function P(e){return s(A(y-1,L(91===e?e+2:40===e?e+1:e)))}function R(e){for(;(b=k())&&b<33;)E();return C(e)>2||C(b)>3?"":" "}function I(e,t){for(;--t&&E()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return A(e,O()+(t<6&&32==k()&&32==E()))}function L(e){for(;E();)switch(b){case e:return y;case 34:case 39:34!==e&&39!==e&&L(b);break;case 40:41===e&&L(e);break;case 92:E()}return y}function N(e,t){for(;E()&&e+b!==57&&(e+b!==84||47!==k()););return"/*"+A(t,y-1)+"*"+o(47===e?e:E())}function j(e){for(;!C(k());)E();return A(e,y)}var D="-ms-",B="-moz-",z="-webkit-",F="comm",V="rule",U="decl",Z="@keyframes";function H(e,t){for(var n="",r=d(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function G(e,t,n,r){switch(e.type){case"@import":case U:return e.return=e.return||e.value;case F:return"";case Z:return e.return=e.value+"{"+H(e.children,r)+"}";case V:e.value=e.props.join(",")}return h(n=H(e.children,r))?e.return=e.value+"{"+n+"}":""}function W(e,t){switch(function(e,t){return(((t<<2^c(e,0))<<2^c(e,1))<<2^c(e,2))<<2^c(e,3)}(e,t)){case 5103:return z+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return z+e+B+e+D+e+e;case 6828:case 4268:return z+e+D+e+e;case 6165:return z+e+D+"flex-"+e+e;case 5187:return z+e+u(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return z+e+D+"flex-item-"+u(e,/flex-|-self/,"")+e;case 4675:return z+e+D+"flex-line-pack"+u(e,/align-content|flex-|-self/,"")+e;case 5548:return z+e+D+u(e,"shrink","negative")+e;case 5292:return z+e+D+u(e,"basis","preferred-size")+e;case 6060:return z+"box-"+u(e,"-grow","")+z+e+D+u(e,"grow","positive")+e;case 4554:return z+u(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return u(u(u(e,/(zoom-|grab)/,z+"$1"),/(image-set)/,z+"$1"),e,"")+e;case 5495:case 3959:return u(e,/(image-set\([^]*)/,z+"$1$`$1");case 4968:return u(u(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+z+e+e;case 4095:case 3583:case 4068:case 2532:return u(e,/(.+)-inline(.+)/,z+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(h(e)-1-t>6)switch(c(e,t+1)){case 109:if(45!==c(e,t+4))break;case 102:return u(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+B+(108==c(e,t+3)?"$3":"$2-$3"))+e;case 115:return~l(e,"stretch")?W(u(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==c(e,t+1))break;case 6444:switch(c(e,h(e)-3-(~l(e,"!important")&&10))){case 107:return u(e,":",":"+z)+e;case 101:return u(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+z+(45===c(e,14)?"inline-":"")+"box$3$1"+z+"$2$3$1"+D+"$2box$3")+e}break;case 5936:switch(c(e,t+11)){case 114:return z+e+D+u(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return z+e+D+u(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return z+e+D+u(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return z+e+D+e+e}return e}function q(e){return T(K("",null,null,null,[""],e=M(e),0,[0],e))}function K(e,t,n,r,i,a,s,c,f){for(var d=0,v=0,m=s,g=0,y=0,b=0,x=1,_=1,w=1,A=0,C="",M=i,T=a,L=r,D=C;_;)switch(b=A,A=E()){case 40:if(108!=b&&58==D.charCodeAt(m-1)){-1!=l(D+=u(P(A),"&","&\f"),"&\f")&&(w=-1);break}case 34:case 39:case 91:D+=P(A);break;case 9:case 10:case 13:case 32:D+=R(b);break;case 92:D+=I(O()-1,7);continue;case 47:switch(k()){case 42:case 47:p(X(N(E(),O()),t,n),f);break;default:D+="/"}break;case 123*x:c[d++]=h(D)*w;case 125*x:case 59:case 0:switch(A){case 0:case 125:_=0;case 59+v:y>0&&h(D)-m&&p(y>32?$(D+";",r,n,m-1):$(u(D," ","")+";",r,n,m-2),f);break;case 59:D+=";";default:if(p(L=Y(D,t,n,d,v,i,c,C,M=[],T=[],m),a),123===A)if(0===v)K(D,t,L,L,M,a,m,c,T);else switch(g){case 100:case 109:case 115:K(e,L,L,r&&p(Y(e,L,L,0,0,i,c,C,i,M=[],m),T),i,T,m,c,r?M:T);break;default:K(D,L,L,L,[""],T,0,c,T)}}d=v=y=0,x=w=1,C=D="",m=s;break;case 58:m=1+h(D),y=b;default:if(x<1)if(123==A)--x;else if(125==A&&0==x++&&125==S())continue;switch(D+=o(A),A*x){case 38:w=v>0?1:(D+="\f",-1);break;case 44:c[d++]=(h(D)-1)*w,w=1;break;case 64:45===k()&&(D+=P(E())),g=k(),v=m=h(C=D+=j(O())),A++;break;case 45:45===b&&2==h(D)&&(x=0)}}return a}function Y(e,t,n,r,o,a,l,c,h,p,v){for(var m=o-1,g=0===o?a:[""],y=d(g),b=0,x=0,w=0;b<r;++b)for(var S=0,E=f(e,m+1,m=i(x=l[b])),k=e;S<y;++S)(k=s(x>0?g[S]+" "+E:u(E,/&\f/g,g[S])))&&(h[w++]=k);return _(e,t,n,0===o?V:c,h,p,v)}function X(e,t,n){return _(e,t,n,F,o(b),f(e,2,-2),0)}function $(e,t,n,r){return _(e,t,n,U,f(e,0,r),f(e,r+1,-1),r)}var J=function(e,t,n){for(var r=0,i=0;r=i,i=k(),38===r&&12===i&&(t[n]=1),!C(i);)E();return A(e,y)},Q=function(e,t){return T(function(e,t){var n=-1,r=44;do{switch(C(r)){case 0:38===r&&12===k()&&(t[n]=1),e[n]+=J(y-1,t,n);break;case 2:e[n]+=P(r);break;case 4:if(44===r){e[++n]=58===k()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(r)}}while(r=E());return e}(M(e),t))},ee=new WeakMap,te=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ee.get(n))&&!r){ee.set(e,!0);for(var i=[],o=Q(t,i),a=n.props,s=0,u=0;s<o.length;s++)for(var l=0;l<a.length;l++,u++)e.props[u]=i[s]?o[s].replace(/&\f/g,a[l]):a[l]+" "+o[s]}}},ne=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case U:e.return=W(e.value,e.length);break;case Z:return H([w(e,{value:u(e.value,"@","@"+z)})],r);case V:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return H([w(e,{props:[u(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return H([w(e,{props:[u(t,/:(plac\w+)/,":-webkit-input-$1")]}),w(e,{props:[u(t,/:(plac\w+)/,":-moz-$1")]}),w(e,{props:[u(t,/:(plac\w+)/,D+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||re;var o,a,s={},u=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;u.push(e)}));var l,c,f=[G,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],h=function(e){var t=d(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}([te,ne].concat(i,f));a=function(e,t,n,r){l=n,H(q(e?e+"{"+t.styles+"}":t.styles),h),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new r({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:a};return p.sheet.hydrate(u),p}},87440:function(e,t){"use strict";t.Z=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},60847:function(e,t,n){"use strict";n.d(t,{E:function(){return _},T:function(){return d},a:function(){return p},b:function(){return m},c:function(){return b},h:function(){return c},w:function(){return h}});var r=n(47028),i=n.t(r,2),o=n(91226);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}var s=function(e){var t=new WeakMap;return function(n){if(t.has(n))return t.get(n);var r=e(n);return t.set(n,r),r}},u=n(76708),l=n(2642),c={}.hasOwnProperty,f=(0,r.createContext)("undefined"!==typeof HTMLElement?(0,o.Z)({key:"css"}):null);f.Provider;var h=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(f);return e(t,i,n)}))},d=(0,r.createContext)({});var p=function(){return(0,r.useContext)(d)},v=s((function(e){return s((function(t){return function(e,t){return"function"===typeof t?t(e):a({},e,t)}(e,t)}))})),m=function(e){var t=(0,r.useContext)(d);return e.theme!==t&&(t=v(t)(e.theme)),(0,r.createElement)(d.Provider,{value:t},e.children)};var g=i.useInsertionEffect?i.useInsertionEffect:function(e){e()};var y="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",b=function(e,t){var n={};for(var r in t)c.call(t,r)&&(n[r]=t[r]);return n[y]=e,n},x=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;(0,u.hC)(t,n,r);g((function(){return(0,u.My)(t,n,r)}));return null},_=h((function(e,t,n){var i=e.css;"string"===typeof i&&void 0!==t.registered[i]&&(i=t.registered[i]);var o=e[y],a=[i],s="";"string"===typeof e.className?s=(0,u.fp)(t.registered,a,e.className):null!=e.className&&(s=e.className+" ");var f=(0,l.O)(a,void 0,(0,r.useContext)(d));s+=t.key+"-"+f.name;var h={};for(var p in e)c.call(e,p)&&"css"!==p&&p!==y&&(h[p]=e[p]);return h.ref=n,h.className=s,(0,r.createElement)(r.Fragment,null,(0,r.createElement)(x,{cache:t,serialized:f,isStringTag:"string"===typeof o}),(0,r.createElement)(o,h))}))},31610:function(e,t,n){"use strict";var r;n.d(t,{F4:function(){return f},iv:function(){return c},xB:function(){return l}});var i=n(47028),o=(n(91226),n(60847)),a=(n(79666),n(76708)),s=n(2642),u=(r||(r=n.t(i,2))).useInsertionEffect?(r||(r=n.t(i,2))).useInsertionEffect:i.useLayoutEffect,l=(0,o.w)((function(e,t){var n=e.styles,r=(0,s.O)([n],void 0,(0,i.useContext)(o.T)),l=(0,i.useRef)();return u((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),i=!1,o=document.querySelector('style[data-emotion="'+e+" "+r.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==o&&(i=!0,o.setAttribute("data-emotion",e),n.hydrate([o])),l.current=[n,i],function(){n.flush()}}),[t]),u((function(){var e=l.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==r.next&&(0,a.My)(t,r.next,!0),n.tags.length){var i=n.tags[n.tags.length-1].nextElementSibling;n.before=i,n.flush()}t.insert("",r,n,!1)}}),[t,r.name]),null}));function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.O)(t)}var f=function(){var e=c.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},64179:function(e,t,n){"use strict";n.d(t,{BX:function(){return s},HY:function(){return o},tZ:function(){return a}});n(47028),n(91226);var r=n(60847),i=(n(79666),n(2642),n(47279)),o=i.Fragment;function a(e,t,n){return r.h.call(t,"css")?(0,i.jsx)(r.E,(0,r.c)(e,t),n):(0,i.jsx)(e,t,n)}function s(e,t,n){return r.h.call(t,"css")?(0,i.jsxs)(r.E,(0,r.c)(e,t),n):(0,i.jsxs)(e,t,n)}},2642:function(e,t,n){"use strict";n.d(t,{O:function(){return v}});var r=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},i={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},o=n(87440),a=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,u=function(e){return 45===e.charCodeAt(1)},l=function(e){return null!=e&&"boolean"!==typeof e},c=(0,o.Z)((function(e){return u(e)?e:e.replace(a,"-$&").toLowerCase()})),f=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return d={name:t,styles:n,next:d},t}))}return 1===i[e]||u(e)||"number"!==typeof t||0===t?t:t+"px"};function h(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return d={name:n.name,styles:n.styles,next:d},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)d={name:r.name,styles:r.styles,next:d},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=h(e,t,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a)null!=t&&void 0!==t[a]?r+=o+"{"+t[a]+"}":l(a)&&(r+=c(o)+":"+f(o,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=h(e,t,a);switch(o){case"animation":case"animationName":r+=c(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var u=0;u<a.length;u++)l(a[u])&&(r+=c(o)+":"+f(o,a[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=d,o=n(e);return d=i,h(e,t,o)}}if(null==t)return n;var a=t[n];return void 0!==a?a:n}var d,p=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var v=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,o="";d=void 0;var a=e[0];null==a||void 0===a.raw?(i=!1,o+=h(n,t,a)):o+=a[0];for(var s=1;s<e.length;s++)o+=h(n,t,e[s]),i&&(o+=a[s]);p.lastIndex=0;for(var u,l="";null!==(u=p.exec(o));)l+="-"+u[1];return{name:r(o)+l,styles:o,next:d}}},46398:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return y}});var i=n(47028),o=n.t(i,2),a=n(87440),s=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,u=(0,a.Z)((function(e){return s.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),l=n(60847),c=n(76708),f=n(2642),h=u,d=function(e){return"theme"!==e},p=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?h:d},v=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},m=o.useInsertionEffect?o.useInsertionEffect:function(e){e()};var g=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;(0,c.hC)(t,n,r);m((function(){return(0,c.My)(t,n,r)}));return null},y=function e(t,n){var o,a,s=t.__emotion_real===t,u=s&&t.__emotion_base||t;void 0!==n&&(o=n.label,a=n.target);var h=v(t,n,s),d=h||p(u),m=!d("as");return function(){var y=arguments,b=s&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==o&&b.push("label:"+o+";"),null==y[0]||void 0===y[0].raw)b.push.apply(b,y);else{0,b.push(y[0][0]);for(var x=y.length,_=1;_<x;_++)b.push(y[_],y[0][_])}var w=(0,l.w)((function(e,t,n){var r=m&&e.as||u,o="",s=[],v=e;if(null==e.theme){for(var y in v={},e)v[y]=e[y];v.theme=(0,i.useContext)(l.T)}"string"===typeof e.className?o=(0,c.fp)(t.registered,s,e.className):null!=e.className&&(o=e.className+" ");var x=(0,f.O)(b.concat(s),t.registered,v);o+=t.key+"-"+x.name,void 0!==a&&(o+=" "+a);var _=m&&void 0===h?p(r):d,w={};for(var S in e)m&&"as"===S||_(S)&&(w[S]=e[S]);return w.className=o,w.ref=n,(0,i.createElement)(i.Fragment,null,(0,i.createElement)(g,{cache:t,serialized:x,isStringTag:"string"===typeof r}),(0,i.createElement)(r,w))}));return w.displayName=void 0!==o?o:"Styled("+("string"===typeof u?u:u.displayName||u.name||"Component")+")",w.defaultProps=t.defaultProps,w.__emotion_real=w,w.__emotion_base=u,w.__emotion_styles=b,w.__emotion_forwardProp=h,Object.defineProperty(w,"toString",{value:function(){return"."+a}}),w.withComponent=function(t,i){return e(t,r({},n,i,{shouldForwardProp:v(w,i,!0)})).apply(void 0,b)},w}}},17122:function(e,t,n){"use strict";n(47028);var r=n(46398),i=(n(2642),r.Z.bind());["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){i[e]=i(e)})),t.Z=i},76708:function(e,t,n){"use strict";n.d(t,{My:function(){return o},fp:function(){return r},hC:function(){return i}});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},o=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0);o=o.next}while(void 0!==o)}}},96541:function(e,t,n){"use strict";var r=n(47028),i=n(10703),o=n(66293),a=n(30019),s=n(47279);function u(e){return e.substring(2).toLowerCase()}t.Z=function(e){var t=e.children,n=e.disableReactTree,l=void 0!==n&&n,c=e.mouseEvent,f=void 0===c?"onClick":c,h=e.onClickAway,d=e.touchEvent,p=void 0===d?"onTouchEnd":d,v=r.useRef(!1),m=r.useRef(null),g=r.useRef(!1),y=r.useRef(!1);r.useEffect((function(){return setTimeout((function(){g.current=!0}),0),function(){g.current=!1}}),[]);var b=(0,i.Z)(t.ref,m),x=(0,o.Z)((function(e){var t=y.current;y.current=!1;var n=(0,a.Z)(m.current);!g.current||!m.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,n)||(v.current?v.current=!1:(e.composedPath?e.composedPath().indexOf(m.current)>-1:!n.documentElement.contains(e.target)||m.current.contains(e.target))||!l&&t||h(e))})),_=function(e){return function(n){y.current=!0;var r=t.props[e];r&&r(n)}},w={ref:b};return!1!==p&&(w[p]=_(p)),r.useEffect((function(){if(!1!==p){var e=u(p),t=(0,a.Z)(m.current),n=function(){v.current=!0};return t.addEventListener(e,x),t.addEventListener("touchmove",n),function(){t.removeEventListener(e,x),t.removeEventListener("touchmove",n)}}}),[x,p]),!1!==f&&(w[f]=_(f)),r.useEffect((function(){if(!1!==f){var e=u(f),t=(0,a.Z)(m.current);return t.addEventListener(e,x),function(){t.removeEventListener(e,x)}}}),[x,f]),(0,s.jsx)(r.Fragment,{children:r.cloneElement(t,w)})}},90223:function(e,t){"use strict";var n=function(e){return e},r=function(){var e=n;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=n}}}();t.Z=r},15277:function(e,t,n){"use strict";function r(e,t,n){var r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){return r&&(n&&n[r]&&e.push(n[r]),e.push(t(r))),e}),[]).join(" ")})),r}n.d(t,{Z:function(){return r}})},62364:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(90223),i={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function o(e,t){return i[t]||"".concat(r.Z.generate(e),"-").concat(t)}},62149:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(62364);function i(e,t){var n={};return t.forEach((function(t){n[t]=(0,r.Z)(e,t)})),n}},27354:function(e,t){"use strict";t.Z=function(e){return"string"===typeof e}},48821:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var r=n(14484),i=n(97308),o=n(47028),a=n(27354),s=n(59612),u=n(16320),l=n(61205),c=n(15277),f=n(62149),h=n(62364);function d(e){return(0,h.Z)("MuiBackdrop",e)}(0,f.Z)("MuiBackdrop",["root","invisible"]);var p=n(47279),v=["classes","className","invisible","component","components","componentsProps","theme"],m=o.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.invisible,o=void 0!==i&&i,f=e.component,h=void 0===f?"div":f,m=e.components,g=void 0===m?{}:m,y=e.componentsProps,b=void 0===y?{}:y,x=e.theme,_=(0,u.Z)(e,v),w=(0,s.Z)({},e,{classes:n,invisible:o}),S=function(e){var t=e.classes,n={root:["root",e.invisible&&"invisible"]};return(0,c.Z)(n,d,t)}(w),E=g.Root||h,k=b.root||{};return(0,p.jsx)(E,(0,s.Z)({"aria-hidden":!0},k,!(0,a.Z)(E)&&{as:h,ownerState:(0,s.Z)({},w,k.ownerState),theme:x},{ref:t},_,{className:(0,l.Z)(S.root,k.className,r)}))})),g=n(83297),y=n(90274),b=n(26126),x=["children","components","componentsProps","className","invisible","open","transitionDuration","TransitionComponent"],_=(0,g.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.invisible&&t.invisible]}})((function(e){var t=e.ownerState;return(0,i.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),w=o.forwardRef((function(e,t){var n,o=(0,y.Z)({props:e,name:"MuiBackdrop"}),s=o.children,u=o.components,l=void 0===u?{}:u,c=o.componentsProps,f=void 0===c?{}:c,h=o.className,d=o.invisible,v=void 0!==d&&d,g=o.open,w=o.transitionDuration,S=o.TransitionComponent,E=void 0===S?b.Z:S,k=(0,r.Z)(o,x),O=function(e){return e.classes}((0,i.Z)({},o,{invisible:v}));return(0,p.jsx)(E,(0,i.Z)({in:g,timeout:w},k,{children:(0,p.jsx)(m,{className:h,invisible:v,components:(0,i.Z)({Root:_},l),componentsProps:{root:(0,i.Z)({},f.root,(!l.Root||!(0,a.Z)(l.Root))&&{ownerState:(0,i.Z)({},null==(n=f.root)?void 0:n.ownerState)})},classes:O,ref:t,children:s})}))}))},97616:function(e,t,n){"use strict";n.d(t,{Z:function(){return le}});var r,i=n(96916),o=n(29673),a=n(97308),s=n(14484),u=n(47028),l=n(61205),c=n(15277),f=n(83297),h=n(90274),d=n(89705),p=n(70183),v=!0,m=!1,g={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function y(e){e.metaKey||e.altKey||e.ctrlKey||(v=!0)}function b(){v=!1}function x(){"hidden"===this.visibilityState&&m&&(v=!0)}function _(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return v||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!g[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var w=function(){var e=u.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",y,!0),t.addEventListener("mousedown",b,!0),t.addEventListener("pointerdown",b,!0),t.addEventListener("touchstart",b,!0),t.addEventListener("visibilitychange",x,!0))}),[]),t=u.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!_(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(m=!0,window.clearTimeout(r),r=window.setTimeout((function(){m=!1}),100),t.current=!1,!0)},ref:e}},S=n(35680);function E(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var k=n(69531);function O(){return O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(this,arguments)}var A=n(14189),C=n(916);function M(e,t){var n=Object.create(null);return e&&u.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,u.isValidElement)(e)?t(e):e}(e)})),n}function T(e,t,n){return null!=n[t]?n[t]:e.props[t]}function P(e,t,n){var r=M(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var u in t){if(i[u])for(r=0;r<i[u].length;r++){var l=i[u][r];s[i[u][r]]=n(l)}s[u]=n(u)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(t,r);return Object.keys(i).forEach((function(o){var a=i[o];if((0,u.isValidElement)(a)){var s=o in t,l=o in r,c=t[o],f=(0,u.isValidElement)(c)&&!c.props.in;!l||s&&!f?l||!s||f?l&&s&&(0,u.isValidElement)(c)&&(i[o]=(0,u.cloneElement)(a,{onExited:n.bind(null,a),in:c.props.in,exit:T(a,"exit",e),enter:T(a,"enter",e)})):i[o]=(0,u.cloneElement)(a,{in:!1}):i[o]=(0,u.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:T(a,"exit",e),enter:T(a,"enter",e)})}})),i}var R=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},I=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}(0,A.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,r=o,M(n.children,(function(e){return(0,u.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:T(e,"appear",n),enter:T(e,"enter",n),exit:T(e,"exit",n)})}))):P(e,i,o),firstRender:!1}},n.handleExited=function(e,t){var n=M(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=O({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,k.Z)(e,["component","childFactory"]),i=this.state.contextValue,o=R(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?u.createElement(C.Z.Provider,{value:i},o):u.createElement(C.Z.Provider,{value:i},u.createElement(t,r,o))},t}(u.Component);I.propTypes={},I.defaultProps={component:"div",childFactory:function(e){return e}};var L=I,N=n(31610),j=n(47279);var D=function(e){var t=e.className,n=e.classes,r=e.pulsate,o=void 0!==r&&r,a=e.rippleX,s=e.rippleY,c=e.rippleSize,f=e.in,h=e.onExited,d=e.timeout,p=u.useState(!1),v=(0,i.Z)(p,2),m=v[0],g=v[1],y=(0,l.Z)(t,n.ripple,n.rippleVisible,o&&n.ripplePulsate),b={width:c,height:c,top:-c/2+s,left:-c/2+a},x=(0,l.Z)(n.child,m&&n.childLeaving,o&&n.childPulsate);return f||m||g(!0),u.useEffect((function(){if(!f&&null!=h){var e=setTimeout(h,d);return function(){clearTimeout(e)}}}),[h,f,d]),(0,j.jsx)("span",{className:y,style:b,children:(0,j.jsx)("span",{className:x})})},B=n(62149);var z,F,V,U,Z,H,G,W,q=(0,B.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),K=["center","classes","className"],Y=(0,N.F4)(Z||(Z=z||(z=E(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),X=(0,N.F4)(H||(H=F||(F=E(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),$=(0,N.F4)(G||(G=V||(V=E(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),J=(0,f.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Q=(0,f.ZP)(D,{name:"MuiTouchRipple",slot:"Ripple"})(W||(W=U||(U=E(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),q.rippleVisible,Y,550,(function(e){return e.theme.transitions.easing.easeInOut}),q.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),q.child,q.childLeaving,X,550,(function(e){return e.theme.transitions.easing.easeInOut}),q.childPulsate,$,(function(e){return e.theme.transitions.easing.easeInOut})),ee=u.forwardRef((function(e,t){var n=(0,h.Z)({props:e,name:"MuiTouchRipple"}),r=n.center,o=void 0!==r&&r,c=n.classes,f=void 0===c?{}:c,d=n.className,p=(0,s.Z)(n,K),v=u.useState([]),m=(0,i.Z)(v,2),g=m[0],y=m[1],b=u.useRef(0),x=u.useRef(null);u.useEffect((function(){x.current&&(x.current(),x.current=null)}),[g]);var _=u.useRef(!1),w=u.useRef(null),E=u.useRef(null),k=u.useRef(null);u.useEffect((function(){return function(){clearTimeout(w.current)}}),[]);var O=u.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,o=e.cb;y((function(e){return[].concat((0,S.Z)(e),[(0,j.jsx)(Q,{classes:{ripple:(0,l.Z)(f.ripple,q.ripple),rippleVisible:(0,l.Z)(f.rippleVisible,q.rippleVisible),ripplePulsate:(0,l.Z)(f.ripplePulsate,q.ripplePulsate),child:(0,l.Z)(f.child,q.child),childLeaving:(0,l.Z)(f.childLeaving,q.childLeaving),childPulsate:(0,l.Z)(f.childPulsate,q.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},b.current)])})),b.current+=1,x.current=o}),[f]),A=u.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,i=void 0!==r&&r,a=t.center,s=void 0===a?o||t.pulsate:a,u=t.fakeElement,l=void 0!==u&&u;if("mousedown"===e.type&&_.current)_.current=!1;else{"touchstart"===e.type&&(_.current=!0);var c,f,h,d=l?null:k.current,p=d?d.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(p.width/2),f=Math.round(p.height/2);else{var v=e.touches?e.touches[0]:e,m=v.clientX,g=v.clientY;c=Math.round(m-p.left),f=Math.round(g-p.top)}if(s)(h=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2===0&&(h+=1);else{var y=2*Math.max(Math.abs((d?d.clientWidth:0)-c),c)+2,b=2*Math.max(Math.abs((d?d.clientHeight:0)-f),f)+2;h=Math.sqrt(Math.pow(y,2)+Math.pow(b,2))}e.touches?null===E.current&&(E.current=function(){O({pulsate:i,rippleX:c,rippleY:f,rippleSize:h,cb:n})},w.current=setTimeout((function(){E.current&&(E.current(),E.current=null)}),80)):O({pulsate:i,rippleX:c,rippleY:f,rippleSize:h,cb:n})}}),[o,O]),C=u.useCallback((function(){A({},{pulsate:!0})}),[A]),M=u.useCallback((function(e,t){if(clearTimeout(w.current),"touchend"===e.type&&E.current)return E.current(),E.current=null,void(w.current=setTimeout((function(){M(e,t)})));E.current=null,y((function(e){return e.length>0?e.slice(1):e})),x.current=t}),[]);return u.useImperativeHandle(t,(function(){return{pulsate:C,start:A,stop:M}}),[C,A,M]),(0,j.jsx)(J,(0,a.Z)({className:(0,l.Z)(f.root,q.root,d),ref:k},p,{children:(0,j.jsx)(L,{component:null,exit:!0,children:g})}))})),te=ee,ne=n(62364);function re(e){return(0,ne.Z)("MuiButtonBase",e)}var ie,oe=(0,B.Z)("MuiButtonBase",["root","disabled","focusVisible"]),ae=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],se=(0,f.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((ie={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,o.Z)(ie,"&.".concat(oe.disabled),{pointerEvents:"none",cursor:"default"}),(0,o.Z)(ie,"@media print",{colorAdjust:"exact"}),ie)),ue=u.forwardRef((function(e,t){var n=(0,h.Z)({props:e,name:"MuiButtonBase"}),r=n.action,o=n.centerRipple,f=void 0!==o&&o,v=n.children,m=n.className,g=n.component,y=void 0===g?"button":g,b=n.disabled,x=void 0!==b&&b,_=n.disableRipple,S=void 0!==_&&_,E=n.disableTouchRipple,k=void 0!==E&&E,O=n.focusRipple,A=void 0!==O&&O,C=n.LinkComponent,M=void 0===C?"a":C,T=n.onBlur,P=n.onClick,R=n.onContextMenu,I=n.onDragLeave,L=n.onFocus,N=n.onFocusVisible,D=n.onKeyDown,B=n.onKeyUp,z=n.onMouseDown,F=n.onMouseLeave,V=n.onMouseUp,U=n.onTouchEnd,Z=n.onTouchMove,H=n.onTouchStart,G=n.tabIndex,W=void 0===G?0:G,q=n.TouchRippleProps,K=n.touchRippleRef,Y=n.type,X=(0,s.Z)(n,ae),$=u.useRef(null),J=u.useRef(null),Q=(0,d.Z)(J,K),ee=w(),ne=ee.isFocusVisibleRef,ie=ee.onFocus,oe=ee.onBlur,ue=ee.ref,le=u.useState(!1),ce=(0,i.Z)(le,2),fe=ce[0],he=ce[1];function de(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;return(0,p.Z)((function(r){return t&&t(r),!n&&J.current&&J.current[e](r),!0}))}x&&fe&&he(!1),u.useImperativeHandle(r,(function(){return{focusVisible:function(){he(!0),$.current.focus()}}}),[]),u.useEffect((function(){fe&&A&&!S&&J.current.pulsate()}),[S,A,fe]);var pe=de("start",z),ve=de("stop",R),me=de("stop",I),ge=de("stop",V),ye=de("stop",(function(e){fe&&e.preventDefault(),F&&F(e)})),be=de("start",H),xe=de("stop",U),_e=de("stop",Z),we=de("stop",(function(e){oe(e),!1===ne.current&&he(!1),T&&T(e)}),!1),Se=(0,p.Z)((function(e){$.current||($.current=e.currentTarget),ie(e),!0===ne.current&&(he(!0),N&&N(e)),L&&L(e)})),Ee=function(){var e=$.current;return y&&"button"!==y&&!("A"===e.tagName&&e.href)},ke=u.useRef(!1),Oe=(0,p.Z)((function(e){A&&!ke.current&&fe&&J.current&&" "===e.key&&(ke.current=!0,J.current.stop(e,(function(){J.current.start(e)}))),e.target===e.currentTarget&&Ee()&&" "===e.key&&e.preventDefault(),D&&D(e),e.target===e.currentTarget&&Ee()&&"Enter"===e.key&&!x&&(e.preventDefault(),P&&P(e))})),Ae=(0,p.Z)((function(e){A&&" "===e.key&&J.current&&fe&&!e.defaultPrevented&&(ke.current=!1,J.current.stop(e,(function(){J.current.pulsate(e)}))),B&&B(e),P&&e.target===e.currentTarget&&Ee()&&" "===e.key&&!e.defaultPrevented&&P(e)})),Ce=y;"button"===Ce&&(X.href||X.to)&&(Ce=M);var Me={};"button"===Ce?(Me.type=void 0===Y?"button":Y,Me.disabled=x):(X.href||X.to||(Me.role="button"),x&&(Me["aria-disabled"]=x));var Te=(0,d.Z)(ue,$),Pe=(0,d.Z)(t,Te),Re=u.useState(!1),Ie=(0,i.Z)(Re,2),Le=Ie[0],Ne=Ie[1];u.useEffect((function(){Ne(!0)}),[]);var je=Le&&!S&&!x;var De=(0,a.Z)({},n,{centerRipple:f,component:y,disabled:x,disableRipple:S,disableTouchRipple:k,focusRipple:A,tabIndex:W,focusVisible:fe}),Be=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,i=e.classes,o={root:["root",t&&"disabled",n&&"focusVisible"]},a=(0,c.Z)(o,re,i);return n&&r&&(a.root+=" ".concat(r)),a}(De);return(0,j.jsxs)(se,(0,a.Z)({as:Ce,className:(0,l.Z)(Be.root,m),ownerState:De,onBlur:we,onClick:P,onContextMenu:ve,onFocus:Se,onKeyDown:Oe,onKeyUp:Ae,onMouseDown:pe,onMouseLeave:ye,onMouseUp:ge,onDragLeave:me,onTouchEnd:xe,onTouchMove:_e,onTouchStart:be,ref:Pe,tabIndex:x?-1:W,type:Y},Me,X,{children:[v,je?(0,j.jsx)(te,(0,a.Z)({ref:Q,center:f},q)):null]}))})),le=ue},45378:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r=n(29673),i=n(14484),o=n(97308),a=n(47028),s=n(61205),u=n(9033),l=n(15277),c=n(57948),f=n(83297),h=n(90274),d=n(97616),p=n(31821),v=n(62364);function m(e){return(0,v.Z)("MuiButton",e)}var g=(0,n(62149).Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","contained","containedInherit","containedPrimary","containedSecondary","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var y=a.createContext({}),b=n(47279),x=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],_=function(e){return(0,o.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},w=(0,f.ZP)(d.Z,{shouldForwardProp:function(e){return(0,f.FO)(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["".concat(n.variant).concat((0,p.Z)(n.color))],t["size".concat((0,p.Z)(n.size))],t["".concat(n.variant,"Size").concat((0,p.Z)(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((function(e){var t,n=e.theme,i=e.ownerState;return(0,o.Z)({},n.typography.button,(t={minWidth:64,padding:"6px 16px",borderRadius:n.shape.borderRadius,transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":(0,o.Z)({textDecoration:"none",backgroundColor:(0,c.Fq)(n.palette.text.primary,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===i.variant&&"inherit"!==i.color&&{backgroundColor:(0,c.Fq)(n.palette[i.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===i.variant&&"inherit"!==i.color&&{border:"1px solid ".concat(n.palette[i.color].main),backgroundColor:(0,c.Fq)(n.palette[i.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===i.variant&&{backgroundColor:n.palette.grey.A100,boxShadow:n.shadows[4],"@media (hover: none)":{boxShadow:n.shadows[2],backgroundColor:n.palette.grey[300]}},"contained"===i.variant&&"inherit"!==i.color&&{backgroundColor:n.palette[i.color].dark,"@media (hover: none)":{backgroundColor:n.palette[i.color].main}}),"&:active":(0,o.Z)({},"contained"===i.variant&&{boxShadow:n.shadows[8]})},(0,r.Z)(t,"&.".concat(g.focusVisible),(0,o.Z)({},"contained"===i.variant&&{boxShadow:n.shadows[6]})),(0,r.Z)(t,"&.".concat(g.disabled),(0,o.Z)({color:n.palette.action.disabled},"outlined"===i.variant&&{border:"1px solid ".concat(n.palette.action.disabledBackground)},"outlined"===i.variant&&"secondary"===i.color&&{border:"1px solid ".concat(n.palette.action.disabled)},"contained"===i.variant&&{color:n.palette.action.disabled,boxShadow:n.shadows[0],backgroundColor:n.palette.action.disabledBackground})),t),"text"===i.variant&&{padding:"6px 8px"},"text"===i.variant&&"inherit"!==i.color&&{color:n.palette[i.color].main},"outlined"===i.variant&&{padding:"5px 15px",border:"1px solid ".concat("light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"outlined"===i.variant&&"inherit"!==i.color&&{color:n.palette[i.color].main,border:"1px solid ".concat((0,c.Fq)(n.palette[i.color].main,.5))},"contained"===i.variant&&{color:n.palette.getContrastText(n.palette.grey[300]),backgroundColor:n.palette.grey[300],boxShadow:n.shadows[2]},"contained"===i.variant&&"inherit"!==i.color&&{color:n.palette[i.color].contrastText,backgroundColor:n.palette[i.color].main},"inherit"===i.color&&{color:"inherit",borderColor:"currentColor"},"small"===i.size&&"text"===i.variant&&{padding:"4px 5px",fontSize:n.typography.pxToRem(13)},"large"===i.size&&"text"===i.variant&&{padding:"8px 11px",fontSize:n.typography.pxToRem(15)},"small"===i.size&&"outlined"===i.variant&&{padding:"3px 9px",fontSize:n.typography.pxToRem(13)},"large"===i.size&&"outlined"===i.variant&&{padding:"7px 21px",fontSize:n.typography.pxToRem(15)},"small"===i.size&&"contained"===i.variant&&{padding:"4px 10px",fontSize:n.typography.pxToRem(13)},"large"===i.size&&"contained"===i.variant&&{padding:"8px 22px",fontSize:n.typography.pxToRem(15)},i.fullWidth&&{width:"100%"})}),(function(e){var t;return e.ownerState.disableElevation&&(t={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,r.Z)(t,"&.".concat(g.focusVisible),{boxShadow:"none"}),(0,r.Z)(t,"&:active",{boxShadow:"none"}),(0,r.Z)(t,"&.".concat(g.disabled),{boxShadow:"none"}),t)})),S=(0,f.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.startIcon,t["iconSize".concat((0,p.Z)(n.size))]]}})((function(e){var t=e.ownerState;return(0,o.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},_(t))})),E=(0,f.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.endIcon,t["iconSize".concat((0,p.Z)(n.size))]]}})((function(e){var t=e.ownerState;return(0,o.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},_(t))})),k=a.forwardRef((function(e,t){var n=a.useContext(y),r=(0,u.Z)(n,e),c=(0,h.Z)({props:r,name:"MuiButton"}),f=c.children,d=c.color,v=void 0===d?"primary":d,g=c.component,_=void 0===g?"button":g,k=c.className,O=c.disabled,A=void 0!==O&&O,C=c.disableElevation,M=void 0!==C&&C,T=c.disableFocusRipple,P=void 0!==T&&T,R=c.endIcon,I=c.focusVisibleClassName,L=c.fullWidth,N=void 0!==L&&L,j=c.size,D=void 0===j?"medium":j,B=c.startIcon,z=c.type,F=c.variant,V=void 0===F?"text":F,U=(0,i.Z)(c,x),Z=(0,o.Z)({},c,{color:v,component:_,disabled:A,disableElevation:M,disableFocusRipple:P,fullWidth:N,size:D,type:z,variant:V}),H=function(e){var t=e.color,n=e.disableElevation,r=e.fullWidth,i=e.size,a=e.variant,s=e.classes,u={root:["root",a,"".concat(a).concat((0,p.Z)(t)),"size".concat((0,p.Z)(i)),"".concat(a,"Size").concat((0,p.Z)(i)),"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,p.Z)(i))],endIcon:["endIcon","iconSize".concat((0,p.Z)(i))]},c=(0,l.Z)(u,m,s);return(0,o.Z)({},s,c)}(Z),G=B&&(0,b.jsx)(S,{className:H.startIcon,ownerState:Z,children:B}),W=R&&(0,b.jsx)(E,{className:H.endIcon,ownerState:Z,children:R});return(0,b.jsxs)(w,(0,o.Z)({ownerState:Z,className:(0,s.Z)(k,n.className),component:_,disabled:A,focusRipple:!P,focusVisibleClassName:(0,s.Z)(H.focusVisible,I),ref:t,type:z},U,{classes:H,children:[G,f,W]}))}))},83826:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var r=n(29673),i=n(14484),o=n(97308),a=n(47028),s=n(61205),u=n(60702),l=n(15277),c=n(83297),f=n(90274),h=n(57935),d=n(95722),p=n(58983),v=n(89705),m=n(62364);function g(e){return(0,m.Z)("MuiCollapse",e)}(0,n(62149).Z)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);var y=n(47279),b=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],x=(0,c.ZP)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.orientation],"entered"===n.state&&t.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&t.hidden]}})((function(e){var t=e.theme,n=e.ownerState;return(0,o.Z)({height:0,overflow:"hidden",transition:t.transitions.create("height")},"horizontal"===n.orientation&&{height:"auto",width:0,transition:t.transitions.create("width")},"entered"===n.state&&(0,o.Z)({height:"auto",overflow:"visible"},"horizontal"===n.orientation&&{width:"auto"}),"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&{visibility:"hidden"})})),_=(0,c.ZP)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:function(e,t){return t.wrapper}})((function(e){var t=e.ownerState;return(0,o.Z)({display:"flex",width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),w=(0,c.ZP)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:function(e,t){return t.wrapperInner}})((function(e){var t=e.ownerState;return(0,o.Z)({width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),S=a.forwardRef((function(e,t){var n=(0,f.Z)({props:e,name:"MuiCollapse"}),c=n.addEndListener,m=n.children,S=n.className,E=n.collapsedSize,k=void 0===E?"0px":E,O=n.component,A=n.easing,C=n.in,M=n.onEnter,T=n.onEntered,P=n.onEntering,R=n.onExit,I=n.onExited,L=n.onExiting,N=n.orientation,j=void 0===N?"vertical":N,D=n.style,B=n.timeout,z=void 0===B?h.x9.standard:B,F=n.TransitionComponent,V=void 0===F?u.ZP:F,U=(0,i.Z)(n,b),Z=(0,o.Z)({},n,{orientation:j,collapsedSize:k}),H=function(e){var t=e.orientation,n=e.classes,r={root:["root","".concat(t)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(t)],wrapperInner:["wrapperInner","".concat(t)]};return(0,l.Z)(r,g,n)}(Z),G=(0,p.Z)(),W=a.useRef(),q=a.useRef(null),K=a.useRef(),Y="number"===typeof k?"".concat(k,"px"):k,X="horizontal"===j,$=X?"width":"height";a.useEffect((function(){return function(){clearTimeout(W.current)}}),[]);var J=a.useRef(null),Q=(0,v.Z)(t,J),ee=function(e){return function(t){if(e){var n=J.current;void 0===t?e(n):e(n,t)}}},te=function(){return q.current?q.current[X?"clientWidth":"clientHeight"]:0},ne=ee((function(e,t){q.current&&X&&(q.current.style.position="absolute"),e.style[$]=Y,M&&M(e,t)})),re=ee((function(e,t){var n=te();q.current&&X&&(q.current.style.position="");var r=(0,d.C)({style:D,timeout:z,easing:A},{mode:"enter"}),i=r.duration,o=r.easing;if("auto"===z){var a=G.transitions.getAutoHeightDuration(n);e.style.transitionDuration="".concat(a,"ms"),K.current=a}else e.style.transitionDuration="string"===typeof i?i:"".concat(i,"ms");e.style[$]="".concat(n,"px"),e.style.transitionTimingFunction=o,P&&P(e,t)})),ie=ee((function(e,t){e.style[$]="auto",T&&T(e,t)})),oe=ee((function(e){e.style[$]="".concat(te(),"px"),R&&R(e)})),ae=ee(I),se=ee((function(e){var t=te(),n=(0,d.C)({style:D,timeout:z,easing:A},{mode:"exit"}),r=n.duration,i=n.easing;if("auto"===z){var o=G.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(o,"ms"),K.current=o}else e.style.transitionDuration="string"===typeof r?r:"".concat(r,"ms");e.style[$]=Y,e.style.transitionTimingFunction=i,L&&L(e)}));return(0,y.jsx)(V,(0,o.Z)({in:C,onEnter:ne,onEntered:ie,onEntering:re,onExit:oe,onExited:ae,onExiting:se,addEndListener:function(e){"auto"===z&&(W.current=setTimeout(e,K.current||0)),c&&c(J.current,e)},nodeRef:J,timeout:"auto"===z?null:z},U,{children:function(e,t){return(0,y.jsx)(x,(0,o.Z)({as:O,className:(0,s.Z)(H.root,S,{entered:H.entered,exited:!C&&"0px"===Y&&H.hidden}[e]),style:(0,o.Z)((0,r.Z)({},X?"minWidth":"minHeight",Y),D),ownerState:(0,o.Z)({},Z,{state:e}),ref:Q},t,{children:(0,y.jsx)(_,{ownerState:(0,o.Z)({},Z,{state:e}),className:H.wrapper,ref:q,children:(0,y.jsx)(w,{ownerState:(0,o.Z)({},Z,{state:e}),className:H.wrapperInner,children:m})})}))}}))}));S.muiSupportAuto=!0;var E=S},26126:function(e,t,n){"use strict";var r=n(97308),i=n(14484),o=n(47028),a=n(60702),s=n(58983),u=n(95722),l=n(89705),c=n(47279),f=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],h={entering:{opacity:1},entered:{opacity:1}},d=o.forwardRef((function(e,t){var n=(0,s.Z)(),d={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},p=e.addEndListener,v=e.appear,m=void 0===v||v,g=e.children,y=e.easing,b=e.in,x=e.onEnter,_=e.onEntered,w=e.onEntering,S=e.onExit,E=e.onExited,k=e.onExiting,O=e.style,A=e.timeout,C=void 0===A?d:A,M=e.TransitionComponent,T=void 0===M?a.ZP:M,P=(0,i.Z)(e,f),R=o.useRef(null),I=(0,l.Z)(g.ref,t),L=(0,l.Z)(R,I),N=function(e){return function(t){if(e){var n=R.current;void 0===t?e(n):e(n,t)}}},j=N(w),D=N((function(e,t){(0,u.n)(e);var r=(0,u.C)({style:O,timeout:C,easing:y},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",r),e.style.transition=n.transitions.create("opacity",r),x&&x(e,t)})),B=N(_),z=N(k),F=N((function(e){var t=(0,u.C)({style:O,timeout:C,easing:y},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),S&&S(e)})),V=N(E);return(0,c.jsx)(T,(0,r.Z)({appear:m,in:b,nodeRef:R,onEnter:D,onEntered:B,onEntering:j,onExit:F,onExited:V,onExiting:z,addEndListener:function(e){p&&p(R.current,e)},timeout:C},P,{children:function(e,t){return o.cloneElement(g,(0,r.Z)({style:(0,r.Z)({opacity:0,visibility:"exited"!==e||b?void 0:"hidden"},h[e],O,g.props.style),ref:L},t))}}))}));t.Z=d},38626:function(e,t,n){"use strict";var r=n(47028).createContext();t.Z=r},36896:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(97308),i=(n(47028),n(31610)),o=n(47279);function a(e){var t=e.styles,n=e.defaultTheme,r=void 0===n?{}:n,a="function"===typeof t?function(e){return t(void 0===(n=e)||null===n||0===Object.keys(n).length?r:e);var n}:t;return(0,o.jsx)(i.xB,{styles:a})}var s=n(58196);var u=function(e){return(0,o.jsx)(a,(0,r.Z)({},e,{defaultTheme:s.Z}))}},31435:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var r=n(29673),i=n(14484),o=n(97308),a=n(47028),s=n(61205),u=n(15277),l=n(57948),c=n(83297),f=n(90274),h=n(97616),d=n(31821),p=n(62364);function v(e){return(0,p.Z)("MuiIconButton",e)}var m=(0,n(62149).Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),g=n(47279),y=["edge","children","className","color","disabled","disableFocusRipple","size"],b=(0,c.ZP)(h.Z,{name:"MuiIconButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"default"!==n.color&&t["color".concat((0,d.Z)(n.color))],n.edge&&t["edge".concat((0,d.Z)(n.edge))],t["size".concat((0,d.Z)(n.size))]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,o.Z)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:t.palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:(0,l.Fq)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(function(e){var t=e.theme,n=e.ownerState;return(0,o.Z)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,o.Z)({color:t.palette[n.color].main},!n.disableRipple&&{"&:hover":{backgroundColor:(0,l.Fq)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},(0,r.Z)({},"&.".concat(m.disabled),{backgroundColor:"transparent",color:t.palette.action.disabled}))})),x=a.forwardRef((function(e,t){var n=(0,f.Z)({props:e,name:"MuiIconButton"}),r=n.edge,a=void 0!==r&&r,l=n.children,c=n.className,h=n.color,p=void 0===h?"default":h,m=n.disabled,x=void 0!==m&&m,_=n.disableFocusRipple,w=void 0!==_&&_,S=n.size,E=void 0===S?"medium":S,k=(0,i.Z)(n,y),O=(0,o.Z)({},n,{edge:a,color:p,disabled:x,disableFocusRipple:w,size:E}),A=function(e){var t=e.classes,n=e.disabled,r=e.color,i=e.edge,o=e.size,a={root:["root",n&&"disabled","default"!==r&&"color".concat((0,d.Z)(r)),i&&"edge".concat((0,d.Z)(i)),"size".concat((0,d.Z)(o))]};return(0,u.Z)(a,v,t)}(O);return(0,g.jsx)(b,(0,o.Z)({className:(0,s.Z)(A.root,c),centerRipple:!0,focusRipple:!w,disabled:x,ref:t,ownerState:O},k,{children:l}))}))},43600:function(e,t,n){"use strict";function r(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(r(e.value)&&""!==e.value||t&&r(e.defaultValue)&&""!==e.defaultValue)}function o(e){return e.startAdornment}n.d(t,{B7:function(){return o},vd:function(){return i}})},22238:function(e,t,n){"use strict";n.d(t,{L:function(){return i}});var r=n(62364);function i(e){return(0,r.Z)("MuiListItemText",e)}var o=(0,n(62149).Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);t.Z=o},80217:function(e,t,n){"use strict";var r=n(47028).createContext({});t.Z=r},90036:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var r=n(29673),i=n(14484),o=n(97308),a=n(47028),s=n(61205),u=n(15277),l=n(57948),c=n(83297),f=n(90274),h=n(80217),d=n(97616),p=n(35473),v=n(89705),m=n(62149);var g=(0,m.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);var y=(0,m.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]),b=n(22238),x=n(62364);function _(e){return(0,x.Z)("MuiMenuItem",e)}var w=(0,m.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),S=n(47279),E=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"],k=(0,c.ZP)(d.Z,{shouldForwardProp:function(e){return(0,c.FO)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((function(e){var t,n=e.theme,i=e.ownerState;return(0,o.Z)({},n.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!i.disableGutters&&{paddingLeft:16,paddingRight:16},i.divider&&{borderBottom:"1px solid ".concat(n.palette.divider),backgroundClip:"padding-box"},(t={"&:hover":{textDecoration:"none",backgroundColor:n.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,r.Z)(t,"&.".concat(w.selected),(0,r.Z)({backgroundColor:(0,l.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(w.focusVisible),{backgroundColor:(0,l.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),(0,r.Z)(t,"&.".concat(w.selected,":hover"),{backgroundColor:(0,l.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,l.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}),(0,r.Z)(t,"&.".concat(w.focusVisible),{backgroundColor:n.palette.action.focus}),(0,r.Z)(t,"&.".concat(w.disabled),{opacity:n.palette.action.disabledOpacity}),(0,r.Z)(t,"& + .".concat(g.root),{marginTop:n.spacing(1),marginBottom:n.spacing(1)}),(0,r.Z)(t,"& + .".concat(g.inset),{marginLeft:52}),(0,r.Z)(t,"& .".concat(b.Z.root),{marginTop:0,marginBottom:0}),(0,r.Z)(t,"& .".concat(b.Z.inset),{paddingLeft:36}),(0,r.Z)(t,"& .".concat(y.root),{minWidth:36}),t),!i.dense&&(0,r.Z)({},n.breakpoints.up("sm"),{minHeight:"auto"}),i.dense&&(0,o.Z)({minHeight:32,paddingTop:4,paddingBottom:4},n.typography.body2,(0,r.Z)({},"& .".concat(y.root," svg"),{fontSize:"1.25rem"})))})),O=a.forwardRef((function(e,t){var n=(0,f.Z)({props:e,name:"MuiMenuItem"}),r=n.autoFocus,l=void 0!==r&&r,c=n.component,d=void 0===c?"li":c,m=n.dense,g=void 0!==m&&m,y=n.divider,b=void 0!==y&&y,x=n.disableGutters,w=void 0!==x&&x,O=n.focusVisibleClassName,A=n.role,C=void 0===A?"menuitem":A,M=n.tabIndex,T=(0,i.Z)(n,E),P=a.useContext(h.Z),R={dense:g||P.dense||!1,disableGutters:w},I=a.useRef(null);(0,p.Z)((function(){l&&I.current&&I.current.focus()}),[l]);var L,N=(0,o.Z)({},n,{dense:R.dense,divider:b,disableGutters:w}),j=function(e){var t=e.disabled,n=e.dense,r=e.divider,i=e.disableGutters,a=e.selected,s=e.classes,l={root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",a&&"selected"]},c=(0,u.Z)(l,_,s);return(0,o.Z)({},s,c)}(n),D=(0,v.Z)(I,t);return n.disabled||(L=void 0!==M?M:-1),(0,S.jsx)(h.Z.Provider,{value:R,children:(0,S.jsx)(k,(0,o.Z)({ref:D,role:C,tabIndex:L,component:d,focusVisibleClassName:(0,s.Z)(j.focusVisible,O)},T,{ownerState:N,classes:j}))})}))},66088:function(e,t,n){"use strict";n.d(t,{Z:function(){return K}});var r=n(96916),i=n(14484),o=n(97308),a=n(47028),s=n(27354),u=n(59612),l=n(16320),c=n(61205),f=n(10703),h=n(30019),d=n(66293);function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}var v=n(15277),m=n(69538),g=n(4267),y=n(78954);var b=a.forwardRef((function(e,t){var n=e.children,i=e.container,o=e.disablePortal,s=void 0!==o&&o,u=a.useState(null),l=(0,r.Z)(u,2),c=l[0],h=l[1],d=(0,f.Z)(a.isValidElement(n)?n.ref:null,t);return(0,g.Z)((function(){s||h(function(e){return"function"===typeof e?e():e}(i)||document.body)}),[i,s]),(0,g.Z)((function(){if(c&&!s)return(0,y.Z)(t,c),function(){(0,y.Z)(t,null)}}),[t,c,s]),s?a.isValidElement(n)?a.cloneElement(n,{ref:d}):n:c?m.createPortal(n,c):c})),x=n(75952),_=n(66107),w=n(35680),S=n(77222),E=n(62891);function k(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function O(e){return parseInt((0,S.Z)(e).getComputedStyle(e).paddingRight,10)||0}function A(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,o=[t,n].concat((0,w.Z)(r)),a=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){-1===o.indexOf(e)&&-1===a.indexOf(e.tagName)&&k(e,i)}))}function C(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function M(e,t){var n=[],r=e.container;if(!t.disableScrollLock){if(function(e){var t=(0,h.Z)(e);return t.body===e?(0,S.Z)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){var i=(0,E.Z)((0,h.Z)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(O(r)+i,"px");var o=(0,h.Z)(r).querySelectorAll(".mui-fixed");[].forEach.call(o,(function(e){n.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight="".concat(O(e)+i,"px")}))}var a=r.parentElement,s=(0,S.Z)(r),u="HTML"===(null==a?void 0:a.nodeName)&&"scroll"===s.getComputedStyle(a).overflowY?a:r;n.push({value:u.style.overflow,property:"overflow",el:u},{value:u.style.overflowX,property:"overflow-x",el:u},{value:u.style.overflowY,property:"overflow-y",el:u}),u.style.overflow="hidden"}return function(){n.forEach((function(e){var t=e.value,n=e.el,r=e.property;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var T=function(){function e(){(0,x.Z)(this,e),this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}return(0,_.Z)(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&k(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);A(t,e.mount,e.modalRef,r,!0);var i=C(this.containers,(function(e){return e.container===t}));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}},{key:"mount",value:function(e,t){var n=C(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=M(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=C(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&k(e.modalRef,!0),A(r.container,e.mount,e.modalRef,r.hiddenSiblings,!1),this.containers.splice(n,1);else{var i=r.modals[r.modals.length-1];i.modalRef&&k(i.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}(),P=n(47279),R=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function I(e){var t=[],n=[];return Array.from(e.querySelectorAll(R)).forEach((function(e,r){var i=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;var t=function(t){return e.ownerDocument.querySelector('input[type="radio"]'.concat(t))},n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort((function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex})).map((function(e){return e.node})).concat(t)}function L(){return!0}var N=function(e){var t=e.children,n=e.disableAutoFocus,r=void 0!==n&&n,i=e.disableEnforceFocus,o=void 0!==i&&i,s=e.disableRestoreFocus,u=void 0!==s&&s,l=e.getTabbable,c=void 0===l?I:l,d=e.isEnabled,p=void 0===d?L:d,v=e.open,m=a.useRef(),g=a.useRef(null),y=a.useRef(null),b=a.useRef(null),x=a.useRef(null),_=a.useRef(!1),w=a.useRef(null),S=(0,f.Z)(t.ref,w),E=a.useRef(null);a.useEffect((function(){v&&w.current&&(_.current=!r)}),[r,v]),a.useEffect((function(){if(v&&w.current){var e=(0,h.Z)(w.current);return w.current.contains(e.activeElement)||(w.current.hasAttribute("tabIndex")||w.current.setAttribute("tabIndex",-1),_.current&&w.current.focus()),function(){u||(b.current&&b.current.focus&&(m.current=!0,b.current.focus()),b.current=null)}}}),[v]),a.useEffect((function(){if(v&&w.current){var e=(0,h.Z)(w.current),t=function(t){var n=w.current;if(null!==n)if(e.hasFocus()&&!o&&p()&&!m.current){if(!n.contains(e.activeElement)){if(t&&x.current!==t.target||e.activeElement!==x.current)x.current=null;else if(null!==x.current)return;if(!_.current)return;var r=[];if(e.activeElement!==g.current&&e.activeElement!==y.current||(r=c(w.current)),r.length>0){var i,a,s=Boolean((null==(i=E.current)?void 0:i.shiftKey)&&"Tab"===(null==(a=E.current)?void 0:a.key)),u=r[0],l=r[r.length-1];s?l.focus():u.focus()}else n.focus()}}else m.current=!1},n=function(t){E.current=t,!o&&p()&&"Tab"===t.key&&e.activeElement===w.current&&t.shiftKey&&(m.current=!0,y.current.focus())};e.addEventListener("focusin",t),e.addEventListener("keydown",n,!0);var r=setInterval((function(){"BODY"===e.activeElement.tagName&&t()}),50);return function(){clearInterval(r),e.removeEventListener("focusin",t),e.removeEventListener("keydown",n,!0)}}}),[r,o,u,p,v,c]);var k=function(e){null===b.current&&(b.current=e.relatedTarget),_.current=!0};return(0,P.jsxs)(a.Fragment,{children:[(0,P.jsx)("div",{tabIndex:0,onFocus:k,ref:g,"data-test":"sentinelStart"}),a.cloneElement(t,{ref:S,onFocus:function(e){null===b.current&&(b.current=e.relatedTarget),_.current=!0,x.current=e.target;var n=t.props.onFocus;n&&n(e)}}),(0,P.jsx)("div",{tabIndex:0,onFocus:k,ref:y,"data-test":"sentinelEnd"})]})},j=n(62149),D=n(62364);function B(e){return(0,D.Z)("MuiModal",e)}(0,j.Z)("MuiModal",["root","hidden"]);var z=["BackdropComponent","BackdropProps","children","classes","className","closeAfterTransition","component","components","componentsProps","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","theme","onTransitionEnter","onTransitionExited"];var F=new T,V=a.forwardRef((function(e,t){var n=e.BackdropComponent,i=e.BackdropProps,o=e.children,m=e.classes,g=e.className,y=e.closeAfterTransition,x=void 0!==y&&y,_=e.component,w=void 0===_?"div":_,S=e.components,E=void 0===S?{}:S,O=e.componentsProps,A=void 0===O?{}:O,C=e.container,M=e.disableAutoFocus,T=void 0!==M&&M,R=e.disableEnforceFocus,I=void 0!==R&&R,L=e.disableEscapeKeyDown,j=void 0!==L&&L,D=e.disablePortal,V=void 0!==D&&D,U=e.disableRestoreFocus,Z=void 0!==U&&U,H=e.disableScrollLock,G=void 0!==H&&H,W=e.hideBackdrop,q=void 0!==W&&W,K=e.keepMounted,Y=void 0!==K&&K,X=e.manager,$=void 0===X?F:X,J=e.onBackdropClick,Q=e.onClose,ee=e.onKeyDown,te=e.open,ne=e.theme,re=e.onTransitionEnter,ie=e.onTransitionExited,oe=(0,l.Z)(e,z),ae=a.useState(!0),se=(0,r.Z)(ae,2),ue=se[0],le=se[1],ce=a.useRef({}),fe=a.useRef(null),he=a.useRef(null),de=(0,f.Z)(he,t),pe=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(e),ve=function(){return ce.current.modalRef=he.current,ce.current.mountNode=fe.current,ce.current},me=function(){$.mount(ve(),{disableScrollLock:G}),he.current.scrollTop=0},ge=(0,d.Z)((function(){var e=function(e){return"function"===typeof e?e():e}(C)||(0,h.Z)(fe.current).body;$.add(ve(),e),he.current&&me()})),ye=a.useCallback((function(){return $.isTopModal(ve())}),[$]),be=(0,d.Z)((function(e){fe.current=e,e&&(te&&ye()?me():k(he.current,!0))})),xe=a.useCallback((function(){$.remove(ve())}),[$]);a.useEffect((function(){return function(){xe()}}),[xe]),a.useEffect((function(){te?ge():pe&&x||xe()}),[te,xe,pe,x,ge]);var _e=(0,u.Z)({},e,{classes:m,closeAfterTransition:x,disableAutoFocus:T,disableEnforceFocus:I,disableEscapeKeyDown:j,disablePortal:V,disableRestoreFocus:Z,disableScrollLock:G,exited:ue,hideBackdrop:q,keepMounted:Y}),we=function(e){var t=e.open,n=e.exited,r=e.classes,i={root:["root",!t&&n&&"hidden"]};return(0,v.Z)(i,B,r)}(_e);if(!Y&&!te&&(!pe||ue))return null;var Se={};void 0===o.props.tabIndex&&(Se.tabIndex="-1"),pe&&(Se.onEnter=p((function(){le(!1),re&&re()}),o.props.onEnter),Se.onExited=p((function(){le(!0),ie&&ie(),x&&xe()}),o.props.onExited));var Ee=E.Root||w,ke=A.root||{};return(0,P.jsx)(b,{ref:be,container:C,disablePortal:V,children:(0,P.jsxs)(Ee,(0,u.Z)({role:"presentation"},ke,!(0,s.Z)(Ee)&&{as:w,ownerState:(0,u.Z)({},_e,ke.ownerState),theme:ne},oe,{ref:de,onKeyDown:function(e){ee&&ee(e),"Escape"===e.key&&ye()&&(j||(e.stopPropagation(),Q&&Q(e,"escapeKeyDown")))},className:(0,c.Z)(we.root,ke.className,g),children:[!q&&n?(0,P.jsx)(n,(0,u.Z)({open:te,onClick:function(e){e.target===e.currentTarget&&(J&&J(e),Q&&Q(e,"backdropClick"))}},i)):null,(0,P.jsx)(N,{disableEnforceFocus:I,disableAutoFocus:T,disableRestoreFocus:Z,isEnabled:ye,open:te,children:a.cloneElement(o,Se)})]}))})})),U=n(83297),Z=n(90274),H=n(48821),G=["BackdropComponent","closeAfterTransition","children","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted"],W=(0,U.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.open&&n.exited&&t.hidden]}})((function(e){var t=e.theme,n=e.ownerState;return(0,o.Z)({position:"fixed",zIndex:t.zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),q=(0,U.ZP)(H.Z,{name:"MuiModal",slot:"Backdrop",overridesResolver:function(e,t){return t.backdrop}})({zIndex:-1}),K=a.forwardRef((function(e,t){var n,u=(0,Z.Z)({name:"MuiModal",props:e}),l=u.BackdropComponent,c=void 0===l?q:l,f=u.closeAfterTransition,h=void 0!==f&&f,d=u.children,p=u.components,v=void 0===p?{}:p,m=u.componentsProps,g=void 0===m?{}:m,y=u.disableAutoFocus,b=void 0!==y&&y,x=u.disableEnforceFocus,_=void 0!==x&&x,w=u.disableEscapeKeyDown,S=void 0!==w&&w,E=u.disablePortal,k=void 0!==E&&E,O=u.disableRestoreFocus,A=void 0!==O&&O,C=u.disableScrollLock,M=void 0!==C&&C,T=u.hideBackdrop,R=void 0!==T&&T,I=u.keepMounted,L=void 0!==I&&I,N=(0,i.Z)(u,G),j=a.useState(!0),D=(0,r.Z)(j,2),B=D[0],z=D[1],F={closeAfterTransition:h,disableAutoFocus:b,disableEnforceFocus:_,disableEscapeKeyDown:S,disablePortal:k,disableRestoreFocus:A,disableScrollLock:M,hideBackdrop:R,keepMounted:L},U=function(e){return e.classes}((0,o.Z)({},u,F,{exited:B}));return(0,P.jsx)(V,(0,o.Z)({components:(0,o.Z)({Root:W},v),componentsProps:{root:(0,o.Z)({},g.root,(!v.Root||!(0,s.Z)(v.Root))&&{ownerState:(0,o.Z)({},null==(n=g.root)?void 0:n.ownerState)})},BackdropComponent:c,onTransitionEnter:function(){return z(!1)},onTransitionExited:function(){return z(!0)},ref:t},N,{classes:U},F,{children:d}))}))},81879:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(14484),i=n(97308),o=n(47028),a=n(61205),s=n(15277),u=n(57948),l=n(83297),c=n(90274),f=n(62364);function h(e){return(0,f.Z)("MuiPaper",e)}(0,n(62149).Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var d=n(47279),p=["className","component","elevation","square","variant"],v=function(e){return((e<1?5.11916*Math.pow(e,2):4.5*Math.log(e+1)+2)/100).toFixed(2)},m=(0,l.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,i.Z)({backgroundColor:t.palette.background.paper,color:t.palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat(t.palette.divider)},"elevation"===n.variant&&(0,i.Z)({boxShadow:t.shadows[n.elevation]},"dark"===t.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,u.Fq)("#fff",v(n.elevation)),", ").concat((0,u.Fq)("#fff",v(n.elevation)),")")}))})),g=o.forwardRef((function(e,t){var n=(0,c.Z)({props:e,name:"MuiPaper"}),o=n.className,u=n.component,l=void 0===u?"div":u,f=n.elevation,v=void 0===f?1:f,g=n.square,y=void 0!==g&&g,b=n.variant,x=void 0===b?"elevation":b,_=(0,r.Z)(n,p),w=(0,i.Z)({},n,{component:l,elevation:v,square:y,variant:x}),S=function(e){var t=e.square,n=e.elevation,r=e.variant,i=e.classes,o={root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]};return(0,s.Z)(o,h,i)}(w);return(0,d.jsx)(m,(0,i.Z)({as:l,ownerState:w,className:(0,a.Z)(S.root,o),ref:t},_))}))},79579:function(e,t,n){"use strict";n.d(t,{ZP:function(){return N}});var r=n(97308),i=n(14484),o=n(47028),a=n(61205),s=n(15277),u=n(83297),l=n(90274),c=n(70396),f=n(2138),h=n(64283),d=n(89705),p=n(60702),v=n(58983),m=n(95722),g=n(47279),y=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function b(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var x={entering:{opacity:1,transform:b(1)},entered:{opacity:1,transform:"none"}},_=o.forwardRef((function(e,t){var n=e.addEndListener,a=e.appear,s=void 0===a||a,u=e.children,l=e.easing,c=e.in,f=e.onEnter,h=e.onEntered,_=e.onEntering,w=e.onExit,S=e.onExited,E=e.onExiting,k=e.style,O=e.timeout,A=void 0===O?"auto":O,C=e.TransitionComponent,M=void 0===C?p.ZP:C,T=(0,i.Z)(e,y),P=o.useRef(),R=o.useRef(),I=(0,v.Z)(),L=o.useRef(null),N=(0,d.Z)(u.ref,t),j=(0,d.Z)(L,N),D=function(e){return function(t){if(e){var n=L.current;void 0===t?e(n):e(n,t)}}},B=D(_),z=D((function(e,t){(0,m.n)(e);var n,r=(0,m.C)({style:k,timeout:A,easing:l},{mode:"enter"}),i=r.duration,o=r.delay,a=r.easing;"auto"===A?(n=I.transitions.getAutoHeightDuration(e.clientHeight),R.current=n):n=i,e.style.transition=[I.transitions.create("opacity",{duration:n,delay:o}),I.transitions.create("transform",{duration:.666*n,delay:o,easing:a})].join(","),f&&f(e,t)})),F=D(h),V=D(E),U=D((function(e){var t,n=(0,m.C)({style:k,timeout:A,easing:l},{mode:"exit"}),r=n.duration,i=n.delay,o=n.easing;"auto"===A?(t=I.transitions.getAutoHeightDuration(e.clientHeight),R.current=t):t=r,e.style.transition=[I.transitions.create("opacity",{duration:t,delay:i}),I.transitions.create("transform",{duration:.666*t,delay:i||.333*t,easing:o})].join(","),e.style.opacity="0",e.style.transform=b(.75),w&&w(e)})),Z=D(S);return o.useEffect((function(){return function(){clearTimeout(P.current)}}),[]),(0,g.jsx)(M,(0,r.Z)({appear:s,in:c,nodeRef:L,onEnter:z,onEntered:F,onEntering:B,onExit:U,onExited:Z,onExiting:V,addEndListener:function(e){"auto"===A&&(P.current=setTimeout(e,R.current||0)),n&&n(L.current,e)},timeout:"auto"===A?null:A},T,{children:function(e,t){return o.cloneElement(u,(0,r.Z)({style:(0,r.Z)({opacity:0,transform:b(.75),visibility:"exited"!==e||c?void 0:"hidden"},x[e],k,u.props.style),ref:j},t))}}))}));_.muiSupportAuto=!0;var w=_,S=n(66088),E=n(81879),k=n(62364);function O(e){return(0,k.Z)("MuiPopover",e)}(0,n(62149).Z)("MuiPopover",["root","paper"]);var A=["onEntering"],C=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function M(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function T(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function P(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function R(e){return"function"===typeof e?e():e}var I=(0,u.ZP)(S.Z,{name:"MuiPopover",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),L=(0,u.ZP)(E.Z,{name:"MuiPopover",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),N=o.forwardRef((function(e,t){var n=(0,l.Z)({props:e,name:"MuiPopover"}),u=n.action,p=n.anchorEl,v=n.anchorOrigin,m=void 0===v?{vertical:"top",horizontal:"left"}:v,y=n.anchorPosition,b=n.anchorReference,x=void 0===b?"anchorEl":b,_=n.children,S=n.className,E=n.container,k=n.elevation,N=void 0===k?8:k,j=n.marginThreshold,D=void 0===j?16:j,B=n.open,z=n.PaperProps,F=void 0===z?{}:z,V=n.transformOrigin,U=void 0===V?{vertical:"top",horizontal:"left"}:V,Z=n.TransitionComponent,H=void 0===Z?w:Z,G=n.transitionDuration,W=void 0===G?"auto":G,q=n.TransitionProps,K=(q=void 0===q?{}:q).onEntering,Y=(0,i.Z)(n.TransitionProps,A),X=(0,i.Z)(n,C),$=o.useRef(),J=(0,d.Z)($,F.ref),Q=(0,r.Z)({},n,{anchorOrigin:m,anchorReference:x,elevation:N,marginThreshold:D,PaperProps:F,transformOrigin:U,TransitionComponent:H,transitionDuration:W,TransitionProps:Y}),ee=function(e){var t=e.classes;return(0,s.Z)({root:["root"],paper:["paper"]},O,t)}(Q),te=o.useCallback((function(){if("anchorPosition"===x)return y;var e=R(p),t=(e&&1===e.nodeType?e:(0,f.Z)($.current).body).getBoundingClientRect();return{top:t.top+M(t,m.vertical),left:t.left+T(t,m.horizontal)}}),[p,m.horizontal,m.vertical,y,x]),ne=o.useCallback((function(e){return{vertical:M(e,U.vertical),horizontal:T(e,U.horizontal)}}),[U.horizontal,U.vertical]),re=o.useCallback((function(e){var t={width:e.offsetWidth,height:e.offsetHeight},n=ne(t);if("none"===x)return{top:null,left:null,transformOrigin:P(n)};var r=te(),i=r.top-n.vertical,o=r.left-n.horizontal,a=i+t.height,s=o+t.width,u=(0,h.Z)(R(p)),l=u.innerHeight-D,c=u.innerWidth-D;if(i<D){var f=i-D;i-=f,n.vertical+=f}else if(a>l){var d=a-l;i-=d,n.vertical+=d}if(o<D){var v=o-D;o-=v,n.horizontal+=v}else if(s>c){var m=s-c;o-=m,n.horizontal+=m}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:P(n)}}),[p,x,te,ne,D]),ie=o.useCallback((function(){var e=$.current;if(e){var t=re(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}}),[re]);o.useEffect((function(){B&&ie()})),o.useImperativeHandle(u,(function(){return B?{updatePosition:function(){ie()}}:null}),[B,ie]),o.useEffect((function(){if(B){var e=(0,c.Z)((function(){ie()})),t=(0,h.Z)(p);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}}),[p,B,ie]);var oe=W;"auto"!==W||H.muiSupportAuto||(oe=void 0);var ae=E||(p?(0,f.Z)(R(p)).body:void 0);return(0,g.jsx)(I,(0,r.Z)({BackdropProps:{invisible:!0},className:(0,a.Z)(ee.root,S),container:ae,open:B,ref:t,ownerState:Q},X,{children:(0,g.jsx)(H,(0,r.Z)({appear:!0,in:B,onEntering:function(e,t){K&&K(e,t),ie()},timeout:oe},Y,{children:(0,g.jsx)(L,(0,r.Z)({elevation:N},F,{ref:J,className:(0,a.Z)(ee.paper,F.className),children:_}))}))}))}))},25526:function(e,t,n){"use strict";n.d(t,{Z:function(){return yt}});var r=n(97308),i=n(14484),o=n(47028),a=n(61205),s=n(30305),u=n(96916),l=n(29673),c=n(12807),f=(n(8031),n(15277)),h=n(2138),d=n(31821),p=n(83297),v=n(90274),m=n(80217),g=n(62364),y=n(62149);function b(e){return(0,g.Z)("MuiList",e)}(0,y.Z)("MuiList",["root","padding","dense","subheader"]);var x=n(47279),_=["children","className","component","dense","disablePadding","subheader"],w=(0,p.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((function(e){var t=e.ownerState;return(0,r.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),S=o.forwardRef((function(e,t){var n=(0,v.Z)({props:e,name:"MuiList"}),s=n.children,u=n.className,l=n.component,c=void 0===l?"ul":l,h=n.dense,d=void 0!==h&&h,p=n.disablePadding,g=void 0!==p&&p,y=n.subheader,S=(0,i.Z)(n,_),E=o.useMemo((function(){return{dense:d}}),[d]),k=(0,r.Z)({},n,{component:c,dense:d,disablePadding:g}),O=function(e){var t=e.classes,n={root:["root",!e.disablePadding&&"padding",e.dense&&"dense",e.subheader&&"subheader"]};return(0,f.Z)(n,b,t)}(k);return(0,x.jsx)(m.Z.Provider,{value:E,children:(0,x.jsxs)(w,(0,r.Z)({as:c,className:(0,a.Z)(O.root,u),ref:t,ownerState:k},S,{children:[y,s]}))})})),E=n(62891).Z,k=n(89705),O=n(35473),A=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function C(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function M(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function T(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function P(e,t,n,r,i,o){for(var a=!1,s=i(e,t,!!t&&n);s;){if(s===e.firstChild){if(a)return!1;a=!0}var u=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&T(s,o)&&!u)return s.focus(),!0;s=i(e,s,n)}return!1}var R=o.forwardRef((function(e,t){var n=e.actions,a=e.autoFocus,s=void 0!==a&&a,u=e.autoFocusItem,l=void 0!==u&&u,c=e.children,f=e.className,d=e.disabledItemsFocusable,p=void 0!==d&&d,v=e.disableListWrap,m=void 0!==v&&v,g=e.onKeyDown,y=e.variant,b=void 0===y?"selectedMenu":y,_=(0,i.Z)(e,A),w=o.useRef(null),R=o.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,O.Z)((function(){s&&w.current.focus()}),[s]),o.useImperativeHandle(n,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!w.current.style.width;if(e.clientHeight<w.current.clientHeight&&n){var r="".concat(E((0,h.Z)(e)),"px");w.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=r,w.current.style.width="calc(100% + ".concat(r,")")}return w.current}}}),[]);var I=(0,k.Z)(w,t),L=-1;o.Children.forEach(c,(function(e,t){o.isValidElement(e)&&(e.props.disabled||("selectedMenu"===b&&e.props.selected||-1===L)&&(L=t))}));var N=o.Children.map(c,(function(e,t){if(t===L){var n={};return l&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===b&&(n.tabIndex=0),o.cloneElement(e,n)}return e}));return(0,x.jsx)(S,(0,r.Z)({role:"menu",ref:I,className:f,onKeyDown:function(e){var t=w.current,n=e.key,r=(0,h.Z)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),P(t,r,m,p,C);else if("ArrowUp"===n)e.preventDefault(),P(t,r,m,p,M);else if("Home"===n)e.preventDefault(),P(t,null,m,p,C);else if("End"===n)e.preventDefault(),P(t,null,m,p,M);else if(1===n.length){var i=R.current,o=n.toLowerCase(),a=performance.now();i.keys.length>0&&(a-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=a,i.keys.push(o);var s=r&&!i.repeating&&T(r,i);i.previousKeyMatched&&(s||P(t,r,!1,p,C,i))?e.preventDefault():i.previousKeyMatched=!1}g&&g(e)},tabIndex:s?0:-1},_,{children:N}))})),I=n(81879),L=n(79579),N=n(58983);function j(e){return(0,g.Z)("MuiMenu",e)}(0,y.Z)("MuiMenu",["root","paper","list"]);var D=["onEntering"],B=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],z={vertical:"top",horizontal:"right"},F={vertical:"top",horizontal:"left"},V=(0,p.ZP)(L.ZP,{shouldForwardProp:function(e){return(0,p.FO)(e)||"classes"===e},name:"MuiMenu",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),U=(0,p.ZP)(I.Z,{name:"MuiMenu",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Z=(0,p.ZP)(R,{name:"MuiMenu",slot:"List",overridesResolver:function(e,t){return t.list}})({outline:0}),H=o.forwardRef((function(e,t){var n=(0,v.Z)({props:e,name:"MuiMenu"}),s=n.autoFocus,u=void 0===s||s,l=n.children,c=n.disableAutoFocusItem,h=void 0!==c&&c,d=n.MenuListProps,p=void 0===d?{}:d,m=n.onClose,g=n.open,y=n.PaperProps,b=void 0===y?{}:y,_=n.PopoverClasses,w=n.transitionDuration,S=void 0===w?"auto":w,E=n.TransitionProps,k=(E=void 0===E?{}:E).onEntering,O=n.variant,A=void 0===O?"selectedMenu":O,C=(0,i.Z)(n.TransitionProps,D),M=(0,i.Z)(n,B),T=(0,N.Z)(),P="rtl"===T.direction,R=(0,r.Z)({},n,{autoFocus:u,disableAutoFocusItem:h,MenuListProps:p,onEntering:k,PaperProps:b,transitionDuration:S,TransitionProps:C,variant:A}),I=function(e){var t=e.classes;return(0,f.Z)({root:["root"],paper:["paper"],list:["list"]},j,t)}(R),L=u&&!h&&g,H=o.useRef(null),G=-1;return o.Children.map(l,(function(e,t){o.isValidElement(e)&&(e.props.disabled||("selectedMenu"===A&&e.props.selected||-1===G)&&(G=t))})),(0,x.jsx)(V,(0,r.Z)({classes:_,onClose:m,anchorOrigin:{vertical:"bottom",horizontal:P?"right":"left"},transformOrigin:P?z:F,PaperProps:(0,r.Z)({component:U},b,{classes:(0,r.Z)({},b.classes,{root:I.paper})}),className:I.root,open:g,ref:t,transitionDuration:S,TransitionProps:(0,r.Z)({onEntering:function(e,t){H.current&&H.current.adjustStyleForScrollbar(e,T),k&&k(e,t)}},C),ownerState:R},M,{children:(0,x.jsx)(Z,(0,r.Z)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),m&&m(e,"tabKeyDown"))},actions:H,autoFocus:u&&(-1===G||h),autoFocusItem:L,variant:A},p,{className:(0,a.Z)(I.list,p.className),children:l}))}))}));function G(e){return(0,g.Z)("MuiNativeSelect",e)}var W=(0,y.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),q=["className","disabled","IconComponent","inputRef","variant"],K=function(e){var t,n=e.ownerState,i=e.theme;return(0,r.Z)((t={MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{backgroundColor:"light"===i.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"}},(0,l.Z)(t,"&.".concat(W.disabled),{cursor:"default"}),(0,l.Z)(t,"&[multiple]",{height:"auto"}),(0,l.Z)(t,"&:not([multiple]) option, &:not([multiple]) optgroup",{backgroundColor:i.palette.background.paper}),(0,l.Z)(t,"&&&",{paddingRight:24,minWidth:16}),t),"filled"===n.variant&&{"&&&":{paddingRight:32}},"outlined"===n.variant&&{borderRadius:i.shape.borderRadius,"&:focus":{borderRadius:i.shape.borderRadius},"&&&":{paddingRight:32}})},Y=(0,p.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:p.FO,overridesResolver:function(e,t){var n=e.ownerState;return[t.select,t[n.variant],(0,l.Z)({},"&.".concat(W.multiple),t.multiple)]}})(K),X=function(e){var t=e.ownerState,n=e.theme;return(0,r.Z)((0,l.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:n.palette.action.active},"&.".concat(W.disabled),{color:n.palette.action.disabled}),t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},$=(0,p.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:function(e,t){var n=e.ownerState;return[t.icon,n.variant&&t["icon".concat((0,d.Z)(n.variant))],n.open&&t.iconOpen]}})(X),J=o.forwardRef((function(e,t){var n=e.className,s=e.disabled,u=e.IconComponent,l=e.inputRef,c=e.variant,h=void 0===c?"standard":c,p=(0,i.Z)(e,q),v=(0,r.Z)({},e,{disabled:s,variant:h}),m=function(e){var t=e.classes,n=e.variant,r=e.disabled,i=e.multiple,o=e.open,a={select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon","icon".concat((0,d.Z)(n)),o&&"iconOpen",r&&"disabled"]};return(0,f.Z)(a,G,t)}(v);return(0,x.jsxs)(o.Fragment,{children:[(0,x.jsx)(Y,(0,r.Z)({ownerState:v,className:(0,a.Z)(m.select,n),disabled:s,ref:l||t},p)),e.multiple?null:(0,x.jsx)($,{as:u,ownerState:v,className:m.icon})]})})),Q=n(43600),ee=n(6142);function te(e){return(0,g.Z)("MuiSelect",e)}var ne,re=(0,y.Z)("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),ie=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],oe=(0,p.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:function(e,t){var n=e.ownerState;return[(0,l.Z)({},"&.".concat(re.select),t.select),(0,l.Z)({},"&.".concat(re.select),t[n.variant]),(0,l.Z)({},"&.".concat(re.multiple),t.multiple)]}})(K,(0,l.Z)({},"&.".concat(re.select),{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"})),ae=(0,p.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:function(e,t){var n=e.ownerState;return[t.icon,n.variant&&t["icon".concat((0,d.Z)(n.variant))],n.open&&t.iconOpen]}})(X),se=(0,p.ZP)("input",{shouldForwardProp:function(e){return(0,p.Dz)(e)&&"classes"!==e},name:"MuiSelect",slot:"NativeInput",overridesResolver:function(e,t){return t.nativeInput}})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function ue(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function le(e){return null==e||"string"===typeof e&&!e.trim()}var ce=o.forwardRef((function(e,t){var n=e["aria-describedby"],s=e["aria-label"],l=e.autoFocus,p=e.autoWidth,v=e.children,m=e.className,g=e.defaultOpen,y=e.defaultValue,b=e.disabled,_=e.displayEmpty,w=e.IconComponent,S=e.inputRef,E=e.labelId,O=e.MenuProps,A=void 0===O?{}:O,C=e.multiple,M=e.name,T=e.onBlur,P=e.onChange,R=e.onClose,I=e.onFocus,L=e.onOpen,N=e.open,j=e.readOnly,D=e.renderValue,B=e.SelectDisplayProps,z=void 0===B?{}:B,F=e.tabIndex,V=e.value,U=e.variant,Z=void 0===U?"standard":U,G=(0,i.Z)(e,ie),W=(0,ee.Z)({controlled:V,default:y,name:"Select"}),q=(0,u.Z)(W,2),K=q[0],Y=q[1],X=(0,ee.Z)({controlled:N,default:g,name:"Select"}),$=(0,u.Z)(X,2),J=$[0],re=$[1],ce=o.useRef(null),fe=o.useRef(null),he=o.useState(null),de=(0,u.Z)(he,2),pe=de[0],ve=de[1],me=o.useRef(null!=N).current,ge=o.useState(),ye=(0,u.Z)(ge,2),be=ye[0],xe=ye[1],_e=(0,k.Z)(t,S),we=o.useCallback((function(e){fe.current=e,e&&ve(e)}),[]);o.useImperativeHandle(_e,(function(){return{focus:function(){fe.current.focus()},node:ce.current,value:K}}),[K]),o.useEffect((function(){g&&J&&pe&&!me&&(xe(p?null:pe.clientWidth),fe.current.focus())}),[pe,p]),o.useEffect((function(){l&&fe.current.focus()}),[l]),o.useEffect((function(){if(E){var e=(0,h.Z)(fe.current).getElementById(E);if(e){var t=function(){getSelection().isCollapsed&&fe.current.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[E]);var Se,Ee,ke=function(e,t){e?L&&L(t):R&&R(t),me||(xe(p?null:pe.clientWidth),re(e))},Oe=o.Children.toArray(v),Ae=function(e){return function(t){var n;if(t.currentTarget.hasAttribute("tabindex")){if(C){n=Array.isArray(K)?K.slice():[];var r=K.indexOf(e.props.value);-1===r?n.push(e.props.value):n.splice(r,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),K!==n&&(Y(n),P)){var i=t.nativeEvent||t,o=new i.constructor(i.type,i);Object.defineProperty(o,"target",{writable:!0,value:{value:n,name:M}}),P(o,e)}C||ke(!1,t)}}},Ce=null!==pe&&J;delete G["aria-invalid"];var Me=[],Te=!1;((0,Q.vd)({value:K})||_)&&(D?Se=D(K):Te=!0);var Pe=Oe.map((function(e){if(!o.isValidElement(e))return null;var t;if(C){if(!Array.isArray(K))throw new Error((0,c.Z)(2));(t=K.some((function(t){return ue(t,e.props.value)})))&&Te&&Me.push(e.props.children)}else(t=ue(K,e.props.value))&&Te&&(Ee=e.props.children);return t&&!0,o.cloneElement(e,{"aria-selected":t?"true":"false",onClick:Ae(e),onKeyUp:function(t){" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));Te&&(Se=C?0===Me.length?null:Me.reduce((function(e,t,n){return e.push(t),n<Me.length-1&&e.push(", "),e}),[]):Ee);var Re,Ie=be;!p&&me&&pe&&(Ie=pe.clientWidth),Re="undefined"!==typeof F?F:b?null:0;var Le=z.id||(M?"mui-component-select-".concat(M):void 0),Ne=(0,r.Z)({},e,{variant:Z,value:K,open:Ce}),je=function(e){var t=e.classes,n=e.variant,r=e.disabled,i=e.multiple,o=e.open,a={select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon","icon".concat((0,d.Z)(n)),o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,f.Z)(a,te,t)}(Ne);return(0,x.jsxs)(o.Fragment,{children:[(0,x.jsx)(oe,(0,r.Z)({ref:we,tabIndex:Re,role:"button","aria-disabled":b?"true":void 0,"aria-expanded":Ce?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[E,Le].filter(Boolean).join(" ")||void 0,"aria-describedby":n,onKeyDown:function(e){if(!j){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),ke(!0,e))}},onMouseDown:b||j?null:function(e){0===e.button&&(e.preventDefault(),fe.current.focus(),ke(!0,e))},onBlur:function(e){!Ce&&T&&(Object.defineProperty(e,"target",{writable:!0,value:{value:K,name:M}}),T(e))},onFocus:I},z,{ownerState:Ne,className:(0,a.Z)(je.select,m,z.className),id:Le,children:le(Se)?ne||(ne=(0,x.jsx)("span",{className:"notranslate",children:"\u200b"})):Se})),(0,x.jsx)(se,(0,r.Z)({value:Array.isArray(K)?K.join(","):K,name:M,ref:ce,"aria-hidden":!0,onChange:function(e){var t=Oe.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var n=Oe[t];Y(n.props.value),P&&P(e,n)}},tabIndex:-1,disabled:b,className:je.nativeInput,autoFocus:l,ownerState:Ne},G)),(0,x.jsx)(ae,{as:w,className:je.icon,ownerState:Ne}),(0,x.jsx)(H,(0,r.Z)({id:"menu-".concat(M||""),anchorEl:pe,open:Ce,onClose:function(e){ke(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},A,{MenuListProps:(0,r.Z)({"aria-labelledby":E,role:"listbox",disableListWrap:!0},A.MenuListProps),PaperProps:(0,r.Z)({},A.PaperProps,{style:(0,r.Z)({minWidth:Ie},null!=A.PaperProps?A.PaperProps.style:null)}),children:Pe}))]})}));function fe(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}var he=n(38626);function de(){return o.useContext(he.Z)}var pe=(0,n(17868).Z)((0,x.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),ve=n(35680),me=n(59612),ge=n(16320),ye=n(10703),be=n(77222),xe=n(3316),_e=n(4267),we=["onChange","maxRows","minRows","style","value"];function Se(e,t){return parseInt(e[t],10)||0}var Ee={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},ke=o.forwardRef((function(e,t){var n=e.onChange,r=e.maxRows,i=e.minRows,a=void 0===i?1:i,s=e.style,l=e.value,c=(0,ge.Z)(e,we),f=o.useRef(null!=l).current,h=o.useRef(null),d=(0,ye.Z)(t,h),p=o.useRef(null),v=o.useRef(0),m=o.useState({}),g=(0,u.Z)(m,2),y=g[0],b=g[1],_=o.useCallback((function(){var t=h.current,n=(0,be.Z)(t).getComputedStyle(t);if("0px"!==n.width){var i=p.current;i.style.width=n.width,i.value=t.value||e.placeholder||"x","\n"===i.value.slice(-1)&&(i.value+=" ");var o=n["box-sizing"],s=Se(n,"padding-bottom")+Se(n,"padding-top"),u=Se(n,"border-bottom-width")+Se(n,"border-top-width"),l=i.scrollHeight;i.value="x";var c=i.scrollHeight,f=l;a&&(f=Math.max(Number(a)*c,f)),r&&(f=Math.min(Number(r)*c,f));var d=(f=Math.max(f,c))+("border-box"===o?s+u:0),m=Math.abs(f-l)<=1;b((function(e){return v.current<20&&(d>0&&Math.abs((e.outerHeightStyle||0)-d)>1||e.overflow!==m)?(v.current+=1,{overflow:m,outerHeightStyle:d}):e}))}}),[r,a,e.placeholder]);o.useEffect((function(){var e,t=(0,xe.Z)((function(){v.current=0,_()})),n=(0,be.Z)(h.current);return n.addEventListener("resize",t),"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(t)).observe(h.current),function(){t.clear(),n.removeEventListener("resize",t),e&&e.disconnect()}}),[_]),(0,_e.Z)((function(){_()})),o.useEffect((function(){v.current=0}),[l]);return(0,x.jsxs)(o.Fragment,{children:[(0,x.jsx)("textarea",(0,me.Z)({value:l,onChange:function(e){v.current=0,f||_(),n&&n(e)},ref:d,rows:a,style:(0,me.Z)({height:y.outerHeightStyle,overflow:y.overflow?"hidden":null},s)},c)),(0,x.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:p,tabIndex:-1,style:(0,me.Z)({},Ee,s,{padding:0})})]})})),Oe=n(27354),Ae=n(36896);function Ce(e){return(0,g.Z)("MuiInputBase",e)}var Me=(0,y.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Te=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","startAdornment","type","value"],Pe=function(e,t){var n=e.ownerState;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat((0,d.Z)(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},Re=function(e,t){var n=e.ownerState;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},Ie=(0,p.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Pe})((function(e){var t=e.theme,n=e.ownerState;return(0,r.Z)({},t.typography.body1,(0,l.Z)({color:t.palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center"},"&.".concat(Me.disabled),{color:t.palette.text.disabled,cursor:"default"}),n.multiline&&(0,r.Z)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),Le=(0,p.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Re})((function(e){var t,n=e.theme,i=e.ownerState,o="light"===n.palette.mode,a={color:"currentColor",opacity:o?.42:.5,transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})},s={opacity:"0 !important"},u={opacity:o?.42:.5};return(0,r.Z)((t={font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&:-ms-input-placeholder":a,"&::-ms-input-placeholder":a,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"}},(0,l.Z)(t,"label[data-shrink=false] + .".concat(Me.formControl," &"),{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&:-ms-input-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":u,"&:focus::-moz-placeholder":u,"&:focus:-ms-input-placeholder":u,"&:focus::-ms-input-placeholder":u}),(0,l.Z)(t,"&.".concat(Me.disabled),{opacity:1,WebkitTextFillColor:n.palette.text.disabled}),(0,l.Z)(t,"&:-webkit-autofill",{animationDuration:"5000s",animationName:"mui-auto-fill"}),t),"small"===i.size&&{paddingTop:1},i.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===i.type&&{MozAppearance:"textfield"})})),Ne=(0,x.jsx)(Ae.Z,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),je=o.forwardRef((function(e,t){var n=(0,v.Z)({props:e,name:"MuiInputBase"}),s=n["aria-describedby"],l=n.autoComplete,h=n.autoFocus,p=n.className,m=n.components,g=void 0===m?{}:m,y=n.componentsProps,b=void 0===y?{}:y,_=n.defaultValue,w=n.disabled,S=n.disableInjectingGlobalStyles,E=n.endAdornment,A=n.fullWidth,C=void 0!==A&&A,M=n.id,T=n.inputComponent,P=void 0===T?"input":T,R=n.inputProps,I=void 0===R?{}:R,L=n.inputRef,N=n.maxRows,j=n.minRows,D=n.multiline,B=void 0!==D&&D,z=n.name,F=n.onBlur,V=n.onChange,U=n.onClick,Z=n.onFocus,H=n.onKeyDown,G=n.onKeyUp,W=n.placeholder,q=n.readOnly,K=n.renderSuffix,Y=n.rows,X=n.startAdornment,$=n.type,J=void 0===$?"text":$,ee=n.value,te=(0,i.Z)(n,Te),ne=null!=I.value?I.value:ee,re=o.useRef(null!=ne).current,ie=o.useRef(),oe=o.useCallback((function(e){0}),[]),ae=(0,k.Z)(I.ref,oe),se=(0,k.Z)(L,ae),ue=(0,k.Z)(ie,se),le=o.useState(!1),ce=(0,u.Z)(le,2),pe=ce[0],ve=ce[1],me=de();var ge=fe({props:n,muiFormControl:me,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ge.focused=me?me.focused:pe,o.useEffect((function(){!me&&w&&pe&&(ve(!1),F&&F())}),[me,w,pe,F]);var ye=me&&me.onFilled,be=me&&me.onEmpty,xe=o.useCallback((function(e){(0,Q.vd)(e)?ye&&ye():be&&be()}),[ye,be]);(0,O.Z)((function(){re&&xe({value:ne})}),[ne,xe,re]);o.useEffect((function(){xe(ie.current)}),[]);var _e=P,we=I;B&&"input"===_e&&(we=Y?(0,r.Z)({type:void 0,minRows:Y,maxRows:Y},we):(0,r.Z)({type:void 0,maxRows:N,minRows:j},we),_e=ke);o.useEffect((function(){me&&me.setAdornedStart(Boolean(X))}),[me,X]);var Se=(0,r.Z)({},n,{color:ge.color||"primary",disabled:ge.disabled,endAdornment:E,error:ge.error,focused:ge.focused,formControl:me,fullWidth:C,hiddenLabel:ge.hiddenLabel,multiline:B,size:ge.size,startAdornment:X,type:J}),Ee=function(e){var t=e.classes,n=e.color,r=e.disabled,i=e.error,o=e.endAdornment,a=e.focused,s=e.formControl,u=e.fullWidth,l=e.hiddenLabel,c=e.multiline,h=e.size,p=e.startAdornment,v=e.type,m={root:["root","color".concat((0,d.Z)(n)),r&&"disabled",i&&"error",u&&"fullWidth",a&&"focused",s&&"formControl","small"===h&&"sizeSmall",c&&"multiline",p&&"adornedStart",o&&"adornedEnd",l&&"hiddenLabel"],input:["input",r&&"disabled","search"===v&&"inputTypeSearch",c&&"inputMultiline","small"===h&&"inputSizeSmall",l&&"inputHiddenLabel",p&&"inputAdornedStart",o&&"inputAdornedEnd"]};return(0,f.Z)(m,Ce,t)}(Se),Ae=g.Root||Ie,Me=b.root||{},Pe=g.Input||Le;return we=(0,r.Z)({},we,b.input),(0,x.jsxs)(o.Fragment,{children:[!S&&Ne,(0,x.jsxs)(Ae,(0,r.Z)({},Me,!(0,Oe.Z)(Ae)&&{ownerState:(0,r.Z)({},Se,Me.ownerState)},{ref:t,onClick:function(e){ie.current&&e.currentTarget===e.target&&ie.current.focus(),U&&U(e)}},te,{className:(0,a.Z)(Ee.root,Me.className,p),children:[X,(0,x.jsx)(he.Z.Provider,{value:null,children:(0,x.jsx)(Pe,(0,r.Z)({ownerState:Se,"aria-invalid":ge.error,"aria-describedby":s,autoComplete:l,autoFocus:h,defaultValue:_,disabled:ge.disabled,id:M,onAnimationStart:function(e){xe("mui-auto-fill-cancel"===e.animationName?ie.current:{value:"x"})},name:z,placeholder:W,readOnly:q,required:ge.required,rows:Y,value:ne,onKeyDown:H,onKeyUp:G,type:J},we,!(0,Oe.Z)(Pe)&&{as:_e,ownerState:(0,r.Z)({},Se,we.ownerState)},{ref:ue,className:(0,a.Z)(Ee.input,we.className),onBlur:function(e){F&&F(e),I.onBlur&&I.onBlur(e),me&&me.onBlur?me.onBlur(e):ve(!1)},onChange:function(e){if(!re){var t=e.target||ie.current;if(null==t)throw new Error((0,c.Z)(1));xe({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];I.onChange&&I.onChange.apply(I,[e].concat(r)),V&&V.apply(void 0,[e].concat(r))},onFocus:function(e){ge.disabled?e.stopPropagation():(Z&&Z(e),I.onFocus&&I.onFocus(e),me&&me.onFocus?me.onFocus(e):ve(!0))}}))}),E,K?K((0,r.Z)({},ge,{startAdornment:X})):null]}))]})})),De=je;function Be(e){return(0,g.Z)("MuiInput",e)}var ze=(0,r.Z)({},Me,(0,y.Z)("MuiInput",["root","underline","input"])),Fe=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","type"],Ve=(0,p.ZP)(Ie,{shouldForwardProp:function(e){return(0,p.FO)(e)||"classes"===e},name:"MuiInput",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[].concat((0,ve.Z)(Pe(e,t)),[!n.disableUnderline&&t.underline])}})((function(e){var t,n=e.theme,i=e.ownerState,o="light"===n.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return(0,r.Z)({position:"relative"},i.formControl&&{"label + &":{marginTop:16}},!i.disableUnderline&&(t={"&:after":{borderBottom:"2px solid ".concat(n.palette[i.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"}},(0,l.Z)(t,"&.".concat(ze.focused,":after"),{transform:"scaleX(1)"}),(0,l.Z)(t,"&.".concat(ze.error,":after"),{borderBottomColor:n.palette.error.main,transform:"scaleX(1)"}),(0,l.Z)(t,"&:before",{borderBottom:"1px solid ".concat(o),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"}),(0,l.Z)(t,"&:hover:not(.".concat(ze.disabled,"):before"),{borderBottom:"2px solid ".concat(n.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(o)}}),(0,l.Z)(t,"&.".concat(ze.disabled,":before"),{borderBottomStyle:"dotted"}),t))})),Ue=(0,p.ZP)(Le,{name:"MuiInput",slot:"Input",overridesResolver:Re})({}),Ze=o.forwardRef((function(e,t){var n=(0,v.Z)({props:e,name:"MuiInput"}),o=n.disableUnderline,a=n.components,u=void 0===a?{}:a,l=n.componentsProps,c=n.fullWidth,h=void 0!==c&&c,d=n.inputComponent,p=void 0===d?"input":d,m=n.multiline,g=void 0!==m&&m,y=n.type,b=void 0===y?"text":y,_=(0,i.Z)(n,Fe),w=function(e){var t=e.classes,n={root:["root",!e.disableUnderline&&"underline"],input:["input"]},i=(0,f.Z)(n,Be,t);return(0,r.Z)({},t,i)}(n),S={root:{ownerState:{disableUnderline:o}}},E=l?(0,s.Z)(l,S):S;return(0,x.jsx)(De,(0,r.Z)({components:(0,r.Z)({Root:Ve,Input:Ue},u),componentsProps:E,fullWidth:h,inputComponent:p,multiline:g,ref:t,type:b},_,{classes:w}))}));Ze.muiName="Input";var He=Ze;function Ge(e){return(0,g.Z)("MuiFilledInput",e)}var We=(0,r.Z)({},Me,(0,y.Z)("MuiFilledInput",["root","underline","input"])),qe=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","type"],Ke=(0,p.ZP)(Ie,{shouldForwardProp:function(e){return(0,p.FO)(e)||"classes"===e},name:"MuiFilledInput",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[].concat((0,ve.Z)(Pe(e,t)),[!n.disableUnderline&&t.underline])}})((function(e){var t,n,i=e.theme,o=e.ownerState,a="light"===i.palette.mode,s=a?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",u=a?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)";return(0,r.Z)((t={position:"relative",backgroundColor:u,borderTopLeftRadius:i.shape.borderRadius,borderTopRightRadius:i.shape.borderRadius,transition:i.transitions.create("background-color",{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut}),"&:hover":{backgroundColor:a?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:u}}},(0,l.Z)(t,"&.".concat(We.focused),{backgroundColor:u}),(0,l.Z)(t,"&.".concat(We.disabled),{backgroundColor:a?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}),t),!o.disableUnderline&&(n={"&:after":{borderBottom:"2px solid ".concat(i.palette[o.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:i.transitions.create("transform",{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut}),pointerEvents:"none"}},(0,l.Z)(n,"&.".concat(We.focused,":after"),{transform:"scaleX(1)"}),(0,l.Z)(n,"&.".concat(We.error,":after"),{borderBottomColor:i.palette.error.main,transform:"scaleX(1)"}),(0,l.Z)(n,"&:before",{borderBottom:"1px solid ".concat(s),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:i.transitions.create("border-bottom-color",{duration:i.transitions.duration.shorter}),pointerEvents:"none"}),(0,l.Z)(n,"&:hover:not(.".concat(We.disabled,"):before"),{borderBottom:"1px solid ".concat(i.palette.text.primary)}),(0,l.Z)(n,"&.".concat(We.disabled,":before"),{borderBottomStyle:"dotted"}),n),o.startAdornment&&{paddingLeft:12},o.endAdornment&&{paddingRight:12},o.multiline&&(0,r.Z)({padding:"25px 12px 8px"},"small"===o.size&&{paddingTop:21,paddingBottom:4},o.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),Ye=(0,p.ZP)(Le,{name:"MuiFilledInput",slot:"Input",overridesResolver:Re})((function(e){var t=e.theme,n=e.ownerState;return(0,r.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9})})),Xe=o.forwardRef((function(e,t){var n=(0,v.Z)({props:e,name:"MuiFilledInput"}),o=n.components,a=void 0===o?{}:o,u=n.componentsProps,l=n.fullWidth,c=void 0!==l&&l,h=n.inputComponent,d=void 0===h?"input":h,p=n.multiline,m=void 0!==p&&p,g=n.type,y=void 0===g?"text":g,b=(0,i.Z)(n,qe),_=(0,r.Z)({},n,{fullWidth:c,inputComponent:d,multiline:m,type:y}),w=function(e){var t=e.classes,n={root:["root",!e.disableUnderline&&"underline"],input:["input"]},i=(0,f.Z)(n,Ge,t);return(0,r.Z)({},t,i)}(n),S={root:{ownerState:_},input:{ownerState:_}},E=u?(0,s.Z)(u,S):S;return(0,x.jsx)(De,(0,r.Z)({components:(0,r.Z)({Root:Ke,Input:Ye},a),componentsProps:E,fullWidth:c,inputComponent:d,multiline:m,ref:t,type:y},b,{classes:w}))}));Xe.muiName="Input";var $e,Je=Xe,Qe=["children","classes","className","label","notched"],et=(0,p.ZP)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),tt=(0,p.ZP)("legend")((function(e){var t=e.ownerState,n=e.theme;return(0,r.Z)({float:"unset",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&(0,r.Z)({display:"block",width:"auto",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function nt(e){return(0,g.Z)("MuiOutlinedInput",e)}var rt=(0,r.Z)({},Me,(0,y.Z)("MuiOutlinedInput",["root","notchedOutline","input"])),it=["components","fullWidth","inputComponent","label","multiline","notched","type"],ot=(0,p.ZP)(Ie,{shouldForwardProp:function(e){return(0,p.FO)(e)||"classes"===e},name:"MuiOutlinedInput",slot:"Root",overridesResolver:Pe})((function(e){var t,n=e.theme,i=e.ownerState,o="light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,r.Z)((t={position:"relative",borderRadius:n.shape.borderRadius},(0,l.Z)(t,"&:hover .".concat(rt.notchedOutline),{borderColor:n.palette.text.primary}),(0,l.Z)(t,"@media (hover: none)",(0,l.Z)({},"&:hover .".concat(rt.notchedOutline),{borderColor:o})),(0,l.Z)(t,"&.".concat(rt.focused," .").concat(rt.notchedOutline),{borderColor:n.palette[i.color].main,borderWidth:2}),(0,l.Z)(t,"&.".concat(rt.error," .").concat(rt.notchedOutline),{borderColor:n.palette.error.main}),(0,l.Z)(t,"&.".concat(rt.disabled," .").concat(rt.notchedOutline),{borderColor:n.palette.action.disabled}),t),i.startAdornment&&{paddingLeft:14},i.endAdornment&&{paddingRight:14},i.multiline&&(0,r.Z)({padding:"16.5px 14px"},"small"===i.size&&{padding:"8.5px 14px"}))})),at=(0,p.ZP)((function(e){var t=e.className,n=e.label,o=e.notched,a=(0,i.Z)(e,Qe),s=null!=n&&""!==n,u=(0,r.Z)({},e,{notched:o,withLabel:s});return(0,x.jsx)(et,(0,r.Z)({"aria-hidden":!0,className:t,ownerState:u},a,{children:(0,x.jsx)(tt,{ownerState:u,children:s?(0,x.jsx)("span",{children:n}):$e||($e=(0,x.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:function(e,t){return t.notchedOutline}})((function(e){return{borderColor:"light"===e.theme.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}})),st=(0,p.ZP)(Le,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Re})((function(e){var t=e.theme,n=e.ownerState;return(0,r.Z)({padding:"16.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),ut=o.forwardRef((function(e,t){var n,a=(0,v.Z)({props:e,name:"MuiOutlinedInput"}),s=a.components,u=void 0===s?{}:s,l=a.fullWidth,c=void 0!==l&&l,h=a.inputComponent,d=void 0===h?"input":h,p=a.label,m=a.multiline,g=void 0!==m&&m,y=a.notched,b=a.type,_=void 0===b?"text":b,w=(0,i.Z)(a,it),S=function(e){var t=e.classes,n=(0,f.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},nt,t);return(0,r.Z)({},t,n)}(a),E=fe({props:a,muiFormControl:de(),states:["required"]});return(0,x.jsx)(De,(0,r.Z)({components:(0,r.Z)({Root:ot,Input:st},u),renderSuffix:function(e){return(0,x.jsx)(at,{className:S.notchedOutline,label:null!=p&&""!==p&&E.required?n||(n=(0,x.jsxs)(o.Fragment,{children:[p,"\xa0","*"]})):p,notched:"undefined"!==typeof y?y:Boolean(e.startAdornment||e.filled||e.focused)})},fullWidth:c,inputComponent:d,multiline:g,ref:t,type:_},w,{classes:(0,r.Z)({},S,{notchedOutline:null})}))}));ut.muiName="Input";var lt,ct,ft=ut,ht=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],dt={name:"MuiSelect",overridesResolver:function(e,t){return t.root},shouldForwardProp:function(e){return(0,p.FO)(e)&&"variant"!==e},slot:"Root"},pt=(0,p.ZP)(He,dt)(""),vt=(0,p.ZP)(ft,dt)(""),mt=(0,p.ZP)(Je,dt)(""),gt=o.forwardRef((function(e,t){var n=(0,v.Z)({name:"MuiSelect",props:e}),u=n.autoWidth,l=void 0!==u&&u,c=n.children,f=n.classes,h=void 0===f?{}:f,d=n.className,p=n.defaultOpen,m=void 0!==p&&p,g=n.displayEmpty,y=void 0!==g&&g,b=n.IconComponent,_=void 0===b?pe:b,w=n.id,S=n.input,E=n.inputProps,O=n.label,A=n.labelId,C=n.MenuProps,M=n.multiple,T=void 0!==M&&M,P=n.native,R=void 0!==P&&P,I=n.onClose,L=n.onOpen,N=n.open,j=n.renderValue,D=n.SelectDisplayProps,B=n.variant,z=void 0===B?"outlined":B,F=(0,i.Z)(n,ht),V=R?J:ce,U=fe({props:n,muiFormControl:de(),states:["variant"]}).variant||z,Z=S||{standard:lt||(lt=(0,x.jsx)(pt,{})),outlined:(0,x.jsx)(vt,{label:O}),filled:ct||(ct=(0,x.jsx)(mt,{}))}[U],H=function(e){return e.classes}((0,r.Z)({},n,{variant:U,classes:h})),G=(0,k.Z)(t,Z.ref);return o.cloneElement(Z,(0,r.Z)({inputComponent:V,inputProps:(0,r.Z)({children:c,IconComponent:_,variant:U,type:void 0,multiple:T},R?{id:w}:{autoWidth:l,defaultOpen:m,displayEmpty:y,labelId:A,MenuProps:C,onClose:I,onOpen:L,open:N,renderValue:j,SelectDisplayProps:(0,r.Z)({id:w},D)},E,{classes:E?(0,s.Z)(H,E.classes):H},S?S.props.inputProps:{})},T&&R&&"outlined"===U?{notched:!0}:{},{ref:G,className:(0,a.Z)(Z.props.className,d),variant:U},F))}));gt.muiName="Select";var yt=gt},2502:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(29673),i=n(14484),o=n(97308),a=n(47028),s=n(61205),u=n(15277),l=n(97616),c=n(31821),f=n(90274),h=n(83297),d=n(62364);function p(e){return(0,d.Z)("MuiTab",e)}var v=(0,n(62149).Z)("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),m=n(47279),g=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],y=(0,h.ZP)(l.Z,{name:"MuiTab",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.label&&n.icon&&t.labelIcon,t["textColor".concat((0,c.Z)(n.textColor))],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped]}})((function(e){var t,n,i,a=e.theme,s=e.ownerState;return(0,o.Z)({},a.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},s.label&&{flexDirection:"top"===s.iconPosition||"bottom"===s.iconPosition?"column":"row"},{lineHeight:1.25},s.icon&&s.label&&(0,r.Z)({minHeight:72,paddingTop:9,paddingBottom:9},"& > .".concat(v.iconWrapper),(0,o.Z)({},"top"===s.iconPosition&&{marginBottom:6},"bottom"===s.iconPosition&&{marginTop:6},"start"===s.iconPosition&&{marginRight:a.spacing(1)},"end"===s.iconPosition&&{marginLeft:a.spacing(1)})),"inherit"===s.textColor&&(t={color:"inherit",opacity:.6},(0,r.Z)(t,"&.".concat(v.selected),{opacity:1}),(0,r.Z)(t,"&.".concat(v.disabled),{opacity:a.palette.action.disabledOpacity}),t),"primary"===s.textColor&&(n={color:a.palette.text.secondary},(0,r.Z)(n,"&.".concat(v.selected),{color:a.palette.primary.main}),(0,r.Z)(n,"&.".concat(v.disabled),{color:a.palette.text.disabled}),n),"secondary"===s.textColor&&(i={color:a.palette.text.secondary},(0,r.Z)(i,"&.".concat(v.selected),{color:a.palette.secondary.main}),(0,r.Z)(i,"&.".concat(v.disabled),{color:a.palette.text.disabled}),i),s.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},s.wrapped&&{fontSize:a.typography.pxToRem(12)})})),b=a.forwardRef((function(e,t){var n=(0,f.Z)({props:e,name:"MuiTab"}),r=n.className,l=n.disabled,h=void 0!==l&&l,d=n.disableFocusRipple,v=void 0!==d&&d,b=n.fullWidth,x=n.icon,_=n.iconPosition,w=void 0===_?"top":_,S=n.indicator,E=n.label,k=n.onChange,O=n.onClick,A=n.onFocus,C=n.selected,M=n.selectionFollowsFocus,T=n.textColor,P=void 0===T?"inherit":T,R=n.value,I=n.wrapped,L=void 0!==I&&I,N=(0,i.Z)(n,g),j=(0,o.Z)({},n,{disabled:h,disableFocusRipple:v,selected:C,icon:!!x,iconPosition:w,label:!!E,fullWidth:b,textColor:P,wrapped:L}),D=function(e){var t=e.classes,n=e.textColor,r=e.fullWidth,i=e.wrapped,o=e.icon,a=e.label,s=e.selected,l=e.disabled,f={root:["root",o&&a&&"labelIcon","textColor".concat((0,c.Z)(n)),r&&"fullWidth",i&&"wrapped",s&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return(0,u.Z)(f,p,t)}(j),B=x&&E&&a.isValidElement(x)?a.cloneElement(x,{className:(0,s.Z)(D.iconWrapper,x.props.className)}):x;return(0,m.jsxs)(y,(0,o.Z)({focusRipple:!v,className:(0,s.Z)(D.root,r),ref:t,role:"tab","aria-selected":C,disabled:h,onClick:function(e){!C&&k&&k(e,R),O&&O(e)},onFocus:function(e){M&&!C&&k&&k(e,R),A&&A(e)},ownerState:j,tabIndex:C?0:-1},N,{children:["top"===w||"start"===w?(0,m.jsxs)(a.Fragment,{children:[B,E]}):(0,m.jsxs)(a.Fragment,{children:[E,B]}),S]}))}))},41833:function(e,t,n){"use strict";n.d(t,{Z:function(){return $}});var r,i=n(96916),o=n(29673),a=n(14484),s=n(97308),u=n(47028),l=(n(8031),n(61205)),c=n(15277),f=n(83297),h=n(90274),d=n(58983),p=n(70396);function v(){if(r)return r;var e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),r="reverse",e.scrollLeft>0?r="default":(e.scrollLeft=1,0===e.scrollLeft&&(r="negative")),document.body.removeChild(e),r}function m(e,t){var n=e.scrollLeft;if("rtl"!==t)return n;switch(v()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}function g(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function y(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},o=r.ease,a=void 0===o?g:o,s=r.duration,u=void 0===s?300:s,l=null,c=t[e],f=!1,h=function(){f=!0},d=function r(o){if(f)i(new Error("Animation cancelled"));else{null===l&&(l=o);var s=Math.min(1,(o-l)/u);t[e]=a(s)*(n-c)+c,s>=1?requestAnimationFrame((function(){i(null)})):requestAnimationFrame(r)}};return c===n?(i(new Error("Element already at target position")),h):(requestAnimationFrame(d),h)}var b=n(64283),x=n(47279),_=["onChange"],w={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};var S=n(17868),E=(0,S.Z)((0,x.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),k=(0,S.Z)((0,x.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight"),O=n(97616),A=n(62364),C=n(62149);function M(e){return(0,A.Z)("MuiTabScrollButton",e)}var T,P,R=(0,C.Z)("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),I=["className","direction","orientation","disabled"],L=(0,f.ZP)(O.Z,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.orientation&&t[n.orientation]]}})((function(e){var t=e.ownerState;return(0,s.Z)((0,o.Z)({width:40,flexShrink:0,opacity:.8},"&.".concat(R.disabled),{opacity:0}),"vertical"===t.orientation&&{width:"100%",height:40,"& svg":{transform:"rotate(".concat(t.isRtl?-90:90,"deg)")}})})),N=u.forwardRef((function(e,t){var n=(0,h.Z)({props:e,name:"MuiTabScrollButton"}),r=n.className,i=n.direction,o=(0,a.Z)(n,I),u="rtl"===(0,d.Z)().direction,f=(0,s.Z)({isRtl:u},n),p=function(e){var t=e.classes,n={root:["root",e.orientation,e.disabled&&"disabled"]};return(0,c.Z)(n,M,t)}(f);return(0,x.jsx)(L,(0,s.Z)({component:"div",className:(0,l.Z)(p.root,r),ref:t,role:null,ownerState:f,tabIndex:null},o,{children:"left"===i?T||(T=(0,x.jsx)(E,{fontSize:"small"})):P||(P=(0,x.jsx)(k,{fontSize:"small"}))}))})),j=n(70183);function D(e){return(0,A.Z)("MuiTabs",e)}var B=(0,C.Z)("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),z=n(2138),F=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],V=function(e,t){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild},U=function(e,t){return e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild},Z=function(e,t,n){for(var r=!1,i=n(e,t);i;){if(i===e.firstChild){if(r)return;r=!0}var o=i.disabled||"true"===i.getAttribute("aria-disabled");if(i.hasAttribute("tabindex")&&!o)return void i.focus();i=n(e,i)}},H=(0,f.ZP)("div",{name:"MuiTabs",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[(0,o.Z)({},"& .".concat(B.scrollButtons),t.scrollButtons),(0,o.Z)({},"& .".concat(B.scrollButtons),n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile),t.root,n.vertical&&t.vertical]}})((function(e){var t=e.ownerState,n=e.theme;return(0,s.Z)({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&(0,o.Z)({},"& .".concat(B.scrollButtons),(0,o.Z)({},n.breakpoints.down("sm"),{display:"none"})))})),G=(0,f.ZP)("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:function(e,t){var n=e.ownerState;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})((function(e){var t=e.ownerState;return(0,s.Z)({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})})),W=(0,f.ZP)("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:function(e,t){var n=e.ownerState;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})((function(e){var t=e.ownerState;return(0,s.Z)({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})})),q=(0,f.ZP)("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:function(e,t){return t.indicator}})((function(e){var t=e.ownerState,n=e.theme;return(0,s.Z)({position:"absolute",height:2,bottom:0,width:"100%",transition:n.transitions.create()},"primary"===t.indicatorColor&&{backgroundColor:n.palette.primary.main},"secondary"===t.indicatorColor&&{backgroundColor:n.palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})})),K=(0,f.ZP)((function(e){var t=e.onChange,n=(0,a.Z)(e,_),r=u.useRef(),i=u.useRef(null),o=function(){r.current=i.current.offsetHeight-i.current.clientHeight};return u.useEffect((function(){var e=(0,p.Z)((function(){var e=r.current;o(),e!==r.current&&t(r.current)})),n=(0,b.Z)(i.current);return n.addEventListener("resize",e),function(){e.clear(),n.removeEventListener("resize",e)}}),[t]),u.useEffect((function(){o(),t(r.current)}),[t]),(0,x.jsx)("div",(0,s.Z)({style:w,ref:i},n))}),{name:"MuiTabs",slot:"ScrollbarSize"})({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),Y={},X=u.forwardRef((function(e,t){var n=(0,h.Z)({props:e,name:"MuiTabs"}),r=(0,d.Z)(),f="rtl"===r.direction,g=n["aria-label"],_=n["aria-labelledby"],w=n.action,S=n.centered,E=void 0!==S&&S,k=n.children,O=n.className,A=n.component,C=void 0===A?"div":A,M=n.allowScrollButtonsMobile,T=void 0!==M&&M,P=n.indicatorColor,R=void 0===P?"primary":P,I=n.onChange,L=n.orientation,B=void 0===L?"horizontal":L,X=n.ScrollButtonComponent,$=void 0===X?N:X,J=n.scrollButtons,Q=void 0===J?"auto":J,ee=n.selectionFollowsFocus,te=n.TabIndicatorProps,ne=void 0===te?{}:te,re=n.TabScrollButtonProps,ie=void 0===re?{}:re,oe=n.textColor,ae=void 0===oe?"primary":oe,se=n.value,ue=n.variant,le=void 0===ue?"standard":ue,ce=n.visibleScrollbar,fe=void 0!==ce&&ce,he=(0,a.Z)(n,F),de="scrollable"===le,pe="vertical"===B,ve=pe?"scrollTop":"scrollLeft",me=pe?"top":"left",ge=pe?"bottom":"right",ye=pe?"clientHeight":"clientWidth",be=pe?"height":"width",xe=(0,s.Z)({},n,{component:C,allowScrollButtonsMobile:T,indicatorColor:R,orientation:B,vertical:pe,scrollButtons:Q,textColor:ae,variant:le,visibleScrollbar:fe,fixed:!de,hideScrollbar:de&&!fe,scrollableX:de&&!pe,scrollableY:de&&pe,centered:E&&!de,scrollButtonsHideMobile:!T}),_e=function(e){var t=e.vertical,n=e.fixed,r=e.hideScrollbar,i=e.scrollableX,o=e.scrollableY,a=e.centered,s=e.scrollButtonsHideMobile,u=e.classes,l={root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",o&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",a&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",s&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]};return(0,c.Z)(l,D,u)}(xe);var we=u.useState(!1),Se=(0,i.Z)(we,2),Ee=Se[0],ke=Se[1],Oe=u.useState(Y),Ae=(0,i.Z)(Oe,2),Ce=Ae[0],Me=Ae[1],Te=u.useState({start:!1,end:!1}),Pe=(0,i.Z)(Te,2),Re=Pe[0],Ie=Pe[1],Le=u.useState({overflow:"hidden",scrollbarWidth:0}),Ne=(0,i.Z)(Le,2),je=Ne[0],De=Ne[1],Be=new Map,ze=u.useRef(null),Fe=u.useRef(null),Ve=function(){var e,t,n=ze.current;if(n){var i=n.getBoundingClientRect();e={clientWidth:n.clientWidth,scrollLeft:n.scrollLeft,scrollTop:n.scrollTop,scrollLeftNormalized:m(n,r.direction),scrollWidth:n.scrollWidth,top:i.top,bottom:i.bottom,left:i.left,right:i.right}}if(n&&!1!==se){var o=Fe.current.children;if(o.length>0){var a=o[Be.get(se)];0,t=a?a.getBoundingClientRect():null}}return{tabsMeta:e,tabMeta:t}},Ue=(0,j.Z)((function(){var e,t,n=Ve(),r=n.tabsMeta,i=n.tabMeta,a=0;if(pe)t="top",i&&r&&(a=i.top-r.top+r.scrollTop);else if(t=f?"right":"left",i&&r){var s=f?r.scrollLeftNormalized+r.clientWidth-r.scrollWidth:r.scrollLeft;a=(f?-1:1)*(i[t]-r[t]+s)}var u=(e={},(0,o.Z)(e,t,a),(0,o.Z)(e,be,i?i[be]:0),e);if(isNaN(Ce[t])||isNaN(Ce[be]))Me(u);else{var l=Math.abs(Ce[t]-u[t]),c=Math.abs(Ce[be]-u[be]);(l>=1||c>=1)&&Me(u)}})),Ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.animation,i=void 0===n||n;i?y(ve,ze.current,e,{duration:r.transitions.duration.standard}):ze.current[ve]=e},He=function(e){var t=ze.current[ve];pe?t+=e:(t+=e*(f?-1:1),t*=f&&"reverse"===v()?-1:1),Ze(t)},Ge=function(){for(var e=ze.current[ye],t=0,n=Array.from(Fe.current.children),r=0;r<n.length;r+=1){var i=n[r];if(t+i[ye]>e)break;t+=i[ye]}return t},We=function(){He(-1*Ge())},qe=function(){He(Ge())},Ke=u.useCallback((function(e){De({overflow:null,scrollbarWidth:e})}),[]),Ye=(0,j.Z)((function(e){var t=Ve(),n=t.tabsMeta,r=t.tabMeta;if(r&&n)if(r[me]<n[me]){var i=n[ve]+(r[me]-n[me]);Ze(i,{animation:e})}else if(r[ge]>n[ge]){var o=n[ve]+(r[ge]-n[ge]);Ze(o,{animation:e})}})),Xe=(0,j.Z)((function(){if(de&&!1!==Q){var e,t,n=ze.current,i=n.scrollTop,o=n.scrollHeight,a=n.clientHeight,s=n.scrollWidth,u=n.clientWidth;if(pe)e=i>1,t=i<o-a-1;else{var l=m(ze.current,r.direction);e=f?l<s-u-1:l>1,t=f?l>1:l<s-u-1}e===Re.start&&t===Re.end||Ie({start:e,end:t})}}));u.useEffect((function(){var e,t=(0,p.Z)((function(){Ue(),Xe()})),n=(0,b.Z)(ze.current);return n.addEventListener("resize",t),"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(t),Array.from(Fe.current.children).forEach((function(t){e.observe(t)}))),function(){t.clear(),n.removeEventListener("resize",t),e&&e.disconnect()}}),[Ue,Xe]);var $e=u.useMemo((function(){return(0,p.Z)((function(){Xe()}))}),[Xe]);u.useEffect((function(){return function(){$e.clear()}}),[$e]),u.useEffect((function(){ke(!0)}),[]),u.useEffect((function(){Ue(),Xe()})),u.useEffect((function(){Ye(Y!==Ce)}),[Ye,Ce]),u.useImperativeHandle(w,(function(){return{updateIndicator:Ue,updateScrollButtons:Xe}}),[Ue,Xe]);var Je=(0,x.jsx)(q,(0,s.Z)({},ne,{className:(0,l.Z)(_e.indicator,ne.className),ownerState:xe,style:(0,s.Z)({},Ce,ne.style)})),Qe=0,et=u.Children.map(k,(function(e){if(!u.isValidElement(e))return null;var t=void 0===e.props.value?Qe:e.props.value;Be.set(t,Qe);var n=t===se;return Qe+=1,u.cloneElement(e,(0,s.Z)({fullWidth:"fullWidth"===le,indicator:n&&!Ee&&Je,selected:n,selectionFollowsFocus:ee,onChange:I,textColor:ae,value:t},1!==Qe||!1!==se||e.props.tabIndex?{}:{tabIndex:0}))})),tt=function(){var e={};e.scrollbarSizeListener=de?(0,x.jsx)(K,{onChange:Ke,className:(0,l.Z)(_e.scrollableX,_e.hideScrollbar)}):null;var t=Re.start||Re.end,n=de&&("auto"===Q&&t||!0===Q);return e.scrollButtonStart=n?(0,x.jsx)($,(0,s.Z)({orientation:B,direction:f?"right":"left",onClick:We,disabled:!Re.start},ie,{className:(0,l.Z)(_e.scrollButtons,ie.className)})):null,e.scrollButtonEnd=n?(0,x.jsx)($,(0,s.Z)({orientation:B,direction:f?"left":"right",onClick:qe,disabled:!Re.end},ie,{className:(0,l.Z)(_e.scrollButtons,ie.className)})):null,e}();return(0,x.jsxs)(H,(0,s.Z)({className:(0,l.Z)(_e.root,O),ownerState:xe,ref:t,as:C},he,{children:[tt.scrollButtonStart,tt.scrollbarSizeListener,(0,x.jsxs)(G,{className:_e.scroller,ownerState:xe,style:(0,o.Z)({overflow:je.overflow},pe?"margin".concat(f?"Left":"Right"):"marginBottom",fe?void 0:-je.scrollbarWidth),ref:ze,onScroll:$e,children:[(0,x.jsx)(W,{"aria-label":g,"aria-labelledby":_,"aria-orientation":"vertical"===B?"vertical":null,className:_e.flexContainer,ownerState:xe,onKeyDown:function(e){var t=Fe.current,n=(0,z.Z)(t).activeElement;if("tab"===n.getAttribute("role")){var r="horizontal"===B?"ArrowLeft":"ArrowUp",i="horizontal"===B?"ArrowRight":"ArrowDown";switch("horizontal"===B&&f&&(r="ArrowRight",i="ArrowLeft"),e.key){case r:e.preventDefault(),Z(t,n,U);break;case i:e.preventDefault(),Z(t,n,V);break;case"Home":e.preventDefault(),Z(t,null,V);break;case"End":e.preventDefault(),Z(t,null,U)}}},ref:Fe,role:"tablist",children:et}),Ee&&Je]}),tt.scrollButtonEnd]}))})),$=X},45752:function(e,t,n){"use strict";n.d(t,{Z:function(){return L}});var r=n(97308),i=n(14484),o=n(30305),a=n(91757),s=n(29673);function u(e,t,n){var i;return(0,r.Z)({toolbar:(i={minHeight:56},(0,s.Z)(i,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,s.Z)(i,e.up("sm"),{minHeight:64}),i)},n)}var l=n(12807),c=n(57948),f={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},d={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},p={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},v={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},m={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},g={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},y={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},b=["mode","contrastThreshold","tonalOffset"],x={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:f.white,default:f.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},_={text:{primary:f.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:f.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function w(e,t,n,r){var i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,c.$n)(e.main,i):"dark"===t&&(e.dark=(0,c._j)(e.main,o)))}function S(e){var t=e.mode,n=void 0===t?"light":t,a=e.contrastThreshold,s=void 0===a?3:a,u=e.tonalOffset,S=void 0===u?.2:u,E=(0,i.Z)(e,b),k=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[200],light:m[50],dark:m[400]}:{main:m[700],light:m[400],dark:m[800]}}(n),O=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:d[200],light:d[50],dark:d[400]}:{main:d[500],light:d[300],dark:d[700]}}(n),A=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[500],light:p[300],dark:p[700]}:{main:p[700],light:p[400],dark:p[800]}}(n),C=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[400],light:g[300],dark:g[700]}:{main:g[700],light:g[500],dark:g[900]}}(n),M=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[800],light:y[500],dark:y[900]}}(n),T=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:"#ed6c02",light:v[500],dark:v[900]}}(n);function P(e){return(0,c.mi)(e,_.text.primary)>=s?_.text.primary:x.text.primary}var R=function(e){var t=e.color,n=e.name,i=e.mainShade,o=void 0===i?500:i,a=e.lightShade,s=void 0===a?300:a,u=e.darkShade,c=void 0===u?700:u;if(!(t=(0,r.Z)({},t)).main&&t[o]&&(t.main=t[o]),!t.hasOwnProperty("main"))throw new Error((0,l.Z)(11,n?" (".concat(n,")"):"",o));if("string"!==typeof t.main)throw new Error((0,l.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return w(t,"light",s,S),w(t,"dark",c,S),t.contrastText||(t.contrastText=P(t.main)),t},I={dark:_,light:x};return(0,o.Z)((0,r.Z)({common:f,mode:n,primary:R({color:k,name:"primary"}),secondary:R({color:O,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:R({color:A,name:"error"}),warning:R({color:T,name:"warning"}),info:R({color:C,name:"info"}),success:R({color:M,name:"success"}),grey:h,contrastThreshold:s,getContrastText:P,augmentColor:R,tonalOffset:S},I[n]),E)}var E=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var k={textTransform:"uppercase"},O='"Roboto", "Helvetica", "Arial", sans-serif';function A(e,t){var n="function"===typeof t?t(e):t,a=n.fontFamily,s=void 0===a?O:a,u=n.fontSize,l=void 0===u?14:u,c=n.fontWeightLight,f=void 0===c?300:c,h=n.fontWeightRegular,d=void 0===h?400:h,p=n.fontWeightMedium,v=void 0===p?500:p,m=n.fontWeightBold,g=void 0===m?700:m,y=n.htmlFontSize,b=void 0===y?16:y,x=n.allVariants,_=n.pxToRem,w=(0,i.Z)(n,E);var S=l/14,A=_||function(e){return"".concat(e/b*S,"rem")},C=function(e,t,n,i,o){return(0,r.Z)({fontFamily:s,fontWeight:e,fontSize:A(t),lineHeight:n},s===O?{letterSpacing:"".concat((a=i/t,Math.round(1e5*a)/1e5),"em")}:{},o,x);var a},M={h1:C(f,96,1.167,-1.5),h2:C(f,60,1.2,-.5),h3:C(d,48,1.167,0),h4:C(d,34,1.235,.25),h5:C(d,24,1.334,0),h6:C(v,20,1.6,.15),subtitle1:C(d,16,1.75,.15),subtitle2:C(v,14,1.57,.1),body1:C(d,16,1.5,.15),body2:C(d,14,1.43,.15),button:C(v,14,1.75,.4,k),caption:C(d,12,1.66,.4),overline:C(d,12,2.66,1,k)};return(0,o.Z)((0,r.Z)({htmlFontSize:b,pxToRem:A,fontFamily:s,fontSize:l,fontWeightLight:f,fontWeightRegular:d,fontWeightMedium:v,fontWeightBold:g},M),w,{clone:!1})}function C(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var M=["none",C(0,2,1,-1,0,1,1,0,0,1,3,0),C(0,3,1,-2,0,2,2,0,0,1,5,0),C(0,3,3,-2,0,3,4,0,0,1,8,0),C(0,2,4,-1,0,4,5,0,0,1,10,0),C(0,3,5,-1,0,5,8,0,0,1,14,0),C(0,3,5,-1,0,6,10,0,0,1,18,0),C(0,4,5,-2,0,7,10,1,0,2,16,1),C(0,5,5,-3,0,8,10,1,0,3,14,2),C(0,5,6,-3,0,9,12,1,0,3,16,2),C(0,6,6,-3,0,10,14,1,0,4,18,3),C(0,6,7,-4,0,11,15,1,0,4,20,3),C(0,7,8,-4,0,12,17,2,0,5,22,4),C(0,7,8,-4,0,13,19,2,0,5,24,4),C(0,7,9,-4,0,14,21,2,0,5,26,4),C(0,8,9,-5,0,15,22,2,0,6,28,5),C(0,8,10,-5,0,16,24,2,0,6,30,5),C(0,8,11,-5,0,17,26,2,0,6,32,5),C(0,9,11,-5,0,18,28,2,0,7,34,6),C(0,9,12,-6,0,19,29,2,0,7,36,6),C(0,10,13,-6,0,20,31,3,0,8,38,7),C(0,10,13,-6,0,21,33,3,0,8,40,7),C(0,10,14,-6,0,22,35,3,0,8,42,7),C(0,11,14,-7,0,23,36,3,0,9,44,8),C(0,11,15,-7,0,24,38,3,0,9,46,8)],T=n(57935),P={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},R=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,s=e.palette,l=void 0===s?{}:s,c=e.transitions,f=void 0===c?{}:c,h=e.typography,d=void 0===h?{}:h,p=(0,i.Z)(e,R),v=S(l),m=(0,a.Z)(e),g=(0,o.Z)(m,{mixins:u(m.breakpoints,m.spacing,n),palette:v,shadows:M.slice(),typography:A(v,d),transitions:(0,T.ZP)(f),zIndex:(0,r.Z)({},P)});g=(0,o.Z)(g,p);for(var y=arguments.length,b=new Array(y>1?y-1:0),x=1;x<y;x++)b[x-1]=arguments[x];return g=b.reduce((function(e,t){return(0,o.Z)(e,t)}),g)}var L=I},57935:function(e,t,n){"use strict";n.d(t,{ZP:function(){return c},x9:function(){return s}});var r=n(14484),i=n(97308),o=["duration","easing","delay"],a={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},s={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function u(e){return"".concat(Math.round(e),"ms")}function l(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function c(e){var t=(0,i.Z)({},a,e.easing),n=(0,i.Z)({},s,e.duration);return(0,i.Z)({getAutoHeightDuration:l,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.duration,s=void 0===a?n.standard:a,l=i.easing,c=void 0===l?t.easeInOut:l,f=i.delay,h=void 0===f?0:f;(0,r.Z)(i,o);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof s?s:u(s)," ").concat(c," ").concat("string"===typeof h?h:u(h))})).join(",")}},e,{easing:t,duration:n})}},58196:function(e,t,n){"use strict";var r=(0,n(45752).Z)();t.Z=r},83297:function(e,t,n){"use strict";n.d(t,{ZP:function(){return A},FO:function(){return E},Dz:function(){return k}});var r=n(35680),i=n(96916),o=n(37491),a=n(41795),s=n(92452),u=n(91757),l=n(26047),c=["variant"];function f(e){return 0===e.length}function h(e){var t=e.variant,n=(0,a.Z)(e,c),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?f(r)?e[t]:(0,l.Z)(e[t]):"".concat(f(r)?t:(0,l.Z)(t)).concat((0,l.Z)(e[t].toString()))})),r}var d=n(45485),p=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],v=["theme"],m=["theme"];function g(e){return 0===Object.keys(e).length}var y=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},b=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=h(e.props);r[t]=e.style})),r},x=function(e,t,n,r){var i,o,a=e.ownerState,s=void 0===a?{}:a,u=[],l=null==n||null==(i=n.components)||null==(o=i[r])?void 0:o.variants;return l&&l.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&u.push(t[h(n.props)])})),u};function _(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var w=(0,u.Z)();var S=n(58196),E=function(e){return _(e)&&"classes"!==e},k=_,O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?w:t,u=e.rootShouldForwardProp,l=void 0===u?_:u,c=e.slotShouldForwardProp,f=void 0===c?_:c,h=e.styleFunctionSx,S=void 0===h?d.Z:h;return function(e){var t,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=u.name,h=u.slot,d=u.skipVariantsResolver,w=u.skipSx,E=u.overridesResolver,k=(0,a.Z)(u,p),O=void 0!==d?d:h&&"Root"!==h||!1,A=w||!1;var C=_;"Root"===h?C=l:h&&(C=f);var M=(0,s.ZP)(e,(0,o.Z)({shouldForwardProp:C,label:t},k)),T=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),u=1;u<t;u++)s[u-1]=arguments[u];var l=s?s.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,i=(0,a.Z)(t,v);return e((0,o.Z)({theme:g(r)?n:r},i))}:e})):[],f=e;c&&E&&l.push((function(e){var t=g(e.theme)?n:e.theme,r=y(c,t);if(r){var o={};return Object.entries(r).forEach((function(t){var n=(0,i.Z)(t,2),r=n[0],a=n[1];o[r]="function"===typeof a?a(e):a})),E(e,o)}return null})),c&&!O&&l.push((function(e){var t=g(e.theme)?n:e.theme;return x(e,b(c,t),t,c)})),A||l.push((function(e){var t=g(e.theme)?n:e.theme;return S((0,o.Z)({},e,{theme:t}))}));var h=l.length-s.length;if(Array.isArray(e)&&h>0){var d=new Array(h).fill("");(f=[].concat((0,r.Z)(e),(0,r.Z)(d))).raw=[].concat((0,r.Z)(e.raw),(0,r.Z)(d))}else"function"===typeof e&&e.__emotion_real!==e&&(f=function(t){var r=t.theme,i=(0,a.Z)(t,m);return e((0,o.Z)({theme:g(r)?n:r},i))});var p=M.apply(void 0,[f].concat((0,r.Z)(l)));return p};return M.withConfig&&(T.withConfig=M.withConfig),T}}({defaultTheme:S.Z,rootShouldForwardProp:E}),A=O},58983:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});n(47028);var r=n(25789),i=n(58196);function o(){return(0,r.Z)(i.Z)}},90274:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(9033);var i=n(25789);function o(e){var t=e.props,n=e.name,o=e.defaultTheme,a=function(e){var t=e.theme,n=e.name,i=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,r.Z)(t.components[n].defaultProps,i):i}({theme:(0,i.Z)(o),name:n,props:t});return a}var a=n(58196);function s(e){return o({props:e.props,name:e.name,defaultTheme:a.Z})}},95722:function(e,t,n){"use strict";n.d(t,{C:function(){return i},n:function(){return r}});var r=function(e){return e.scrollTop};function i(e,t){var n,r,i=e.timeout,o=e.easing,a=e.style,s=void 0===a?{}:a;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof i?i:i[t.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof o?o[t.mode]:o,delay:s.transitionDelay}}},31821:function(e,t,n){"use strict";var r=n(26047);t.Z=r.Z},17868:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(97308),i=n(47028),o=n(14484),a=n(61205),s=n(15277),u=n(31821),l=n(90274),c=n(83297),f=n(62364);function h(e){return(0,f.Z)("MuiSvgIcon",e)}(0,n(62149).Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var d=n(47279),p=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],v=(0,c.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat((0,u.Z)(n.color))],t["fontSize".concat((0,u.Z)(n.fontSize))]]}})((function(e){var t,n,r,i,o,a,s,u,l,c,f,h,d,p,v,m,g,y=e.theme,b=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=y.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=y.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(o=y.typography)||null==(a=o.pxToRem)?void 0:a.call(o,20))||"1.25rem",medium:(null==(s=y.typography)||null==(u=s.pxToRem)?void 0:u.call(s,24))||"1.5rem",large:(null==(l=y.typography)||null==(c=l.pxToRem)?void 0:c.call(l,35))||"2.1875"}[b.fontSize],color:null!=(f=null==(h=y.palette)||null==(d=h[b.color])?void 0:d.main)?f:{action:null==(p=y.palette)||null==(v=p.action)?void 0:v.active,disabled:null==(m=y.palette)||null==(g=m.action)?void 0:g.disabled,inherit:void 0}[b.color]}})),m=i.forwardRef((function(e,t){var n=(0,l.Z)({props:e,name:"MuiSvgIcon"}),i=n.children,c=n.className,f=n.color,m=void 0===f?"inherit":f,g=n.component,y=void 0===g?"svg":g,b=n.fontSize,x=void 0===b?"medium":b,_=n.htmlColor,w=n.inheritViewBox,S=void 0!==w&&w,E=n.titleAccess,k=n.viewBox,O=void 0===k?"0 0 24 24":k,A=(0,o.Z)(n,p),C=(0,r.Z)({},n,{color:m,component:y,fontSize:x,instanceFontSize:e.fontSize,inheritViewBox:S,viewBox:O}),M={};S||(M.viewBox=O);var T=function(e){var t=e.color,n=e.fontSize,r=e.classes,i={root:["root","inherit"!==t&&"color".concat((0,u.Z)(t)),"fontSize".concat((0,u.Z)(n))]};return(0,s.Z)(i,h,r)}(C);return(0,d.jsxs)(v,(0,r.Z)({as:y,className:(0,a.Z)(T.root,c),ownerState:C,focusable:"false",color:_,"aria-hidden":!E||void 0,role:E?"img":void 0,ref:t},M,A,{children:[i,E?(0,d.jsx)("title",{children:E}):null]}))}));m.muiName="SvgIcon";var g=m;function y(e,t){var n=function(n,i){return(0,d.jsx)(g,(0,r.Z)({"data-testid":"".concat(t,"Icon"),ref:i},n,{children:e}))};return n.muiName=g.muiName,i.memo(i.forwardRef(n))}},70396:function(e,t,n){"use strict";var r=n(3316);t.Z=r.Z},2138:function(e,t,n){"use strict";var r=n(30019);t.Z=r.Z},64283:function(e,t,n){"use strict";var r=n(77222);t.Z=r.Z},6142:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(96916),i=n(47028);var o=function(e){var t=e.controlled,n=e.default,o=(e.name,e.state,i.useRef(void 0!==t).current),a=i.useState(n),s=(0,r.Z)(a,2),u=s[0],l=s[1];return[o?t:u,i.useCallback((function(e){o||l(e)}),[])]}},35473:function(e,t,n){"use strict";var r=n(4267);t.Z=r.Z},70183:function(e,t,n){"use strict";var r=n(66293);t.Z=r.Z},89705:function(e,t,n){"use strict";var r=n(10703);t.Z=r.Z},56725:function(e,t,n){"use strict";var r=n(47028).createContext(null);t.Z=r},50189:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(47028),i=n(56725);function o(){return r.useContext(i.Z)}},92452:function(e,t,n){"use strict";n.d(t,{ZP:function(){return i}});var r=n(17122);function i(e,t){return(0,r.Z)(e,t)}},43286:function(e,t,n){"use strict";n.d(t,{L7:function(){return s},VO:function(){return r},W8:function(){return a},k9:function(){return o}});var r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(r[e],"px)")}};function o(e,t,n){var o=e.theme||{};if(Array.isArray(t)){var a=o.breakpoints||i;return t.reduce((function(e,r,i){return e[a.up(a.keys[i])]=n(t[i]),e}),{})}if("object"===typeof t){var s=o.breakpoints||i;return Object.keys(t).reduce((function(e,i){if(-1!==Object.keys(s.values||r).indexOf(i)){e[s.up(i)]=n(t[i],i)}else{var o=i;e[o]=t[o]}return e}),{})}return n(t)}function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==t||null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function s(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}},57948:function(e,t,n){"use strict";n.d(t,{$n:function(){return f},Fq:function(){return l},_j:function(){return c},mi:function(){return u}});var r=n(12807);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function o(e){if(e.type)return e;if("#"===e.charAt(0))return o(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,e));var i,a=e.substring(t+1,e.length-1);if("color"===n){if(i=(a=a.split(" ")).shift(),4===a.length&&"/"===a[3].charAt(0)&&(a[3]=a[3].substr(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,r.Z)(10,i))}else a=a.split(",");return{type:n,values:a=a.map((function(e){return parseFloat(e)})),colorSpace:i}}function a(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function s(e){var t="hsl"===(e=o(e)).type?o(function(e){var t=(e=o(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-s*Math.max(Math.min(t-3,9-t,1),-1)},l="rgb",c=[Math.round(255*u(0)),Math.round(255*u(8)),Math.round(255*u(4))];return"hsla"===e.type&&(l+="a",c.push(t[3])),a({type:l,values:c})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function u(e,t){var n=s(e),r=s(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function l(e,t){return e=o(e),t=i(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,a(e)}function c(e,t){if(e=o(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return a(e)}function f(e,t){if(e=o(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return a(e)}},91757:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(37491),i=n(41795),o=n(30305),a=n(29673),s=["values","unit","step"];function u(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,o=e.unit,u=void 0===o?"px":o,l=e.step,c=void 0===l?5:l,f=(0,i.Z)(e,s),h=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return(0,r.Z)({},e,(0,a.Z)({},t.key,t.val))}),{})}(n),d=Object.keys(h);function p(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(u,")")}function v(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-c/100).concat(u,")")}function m(e,t){var r=d.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(u,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[d[r]]?n[d[r]]:t)-c/100).concat(u,")")}return(0,r.Z)({keys:d,values:h,up:p,down:v,between:m,only:function(e){return d.indexOf(e)+1<d.length?m(e,d[d.indexOf(e)+1]):p(e)},not:function(e){var t=d.indexOf(e);return 0===t?p(d[1]):t===d.length-1?v(d[t]):m(e,d[d.indexOf(e)+1]).replace("@media","@media not all and")},unit:u},f)}var l={borderRadius:4},c=n(70644);function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=(0,c.hB)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=0===n.length?[1]:n;return i.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var h=["breakpoints","palette","spacing","shape"];var d=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,a=e.palette,s=void 0===a?{}:a,c=e.spacing,d=e.shape,p=void 0===d?{}:d,v=(0,i.Z)(e,h),m=u(n),g=f(c),y=(0,o.Z)({breakpoints:m,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},s),spacing:g,shape:(0,r.Z)({},l,p)},v),b=arguments.length,x=new Array(b>1?b-1:0),_=1;_<b;_++)x[_-1]=arguments[_];return y=x.reduce((function(e,t){return(0,o.Z)(e,t)}),y)}},11578:function(e,t,n){"use strict";n.d(t,{Gc:function(){return Y},G$:function(){return K}});var r=n(81722),i=n(1088);var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),o=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?(0,i.Z)(t,r[n](e)):t}),{})};return o.propTypes={},o.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),o},a=n(70644),s=n(43286);function u(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var l=(0,r.Z)({prop:"border",themeKey:"borders",transform:u}),c=(0,r.Z)({prop:"borderTop",themeKey:"borders",transform:u}),f=(0,r.Z)({prop:"borderRight",themeKey:"borders",transform:u}),h=(0,r.Z)({prop:"borderBottom",themeKey:"borders",transform:u}),d=(0,r.Z)({prop:"borderLeft",themeKey:"borders",transform:u}),p=(0,r.Z)({prop:"borderColor",themeKey:"palette"}),v=(0,r.Z)({prop:"borderTopColor",themeKey:"palette"}),m=(0,r.Z)({prop:"borderRightColor",themeKey:"palette"}),g=(0,r.Z)({prop:"borderBottomColor",themeKey:"palette"}),y=(0,r.Z)({prop:"borderLeftColor",themeKey:"palette"}),b=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=(0,a.eI)(e.theme,"shape.borderRadius",4,"borderRadius");return(0,s.k9)(e,e.borderRadius,(function(e){return{borderRadius:(0,a.NA)(t,e)}}))}return null};b.propTypes={},b.filterProps=["borderRadius"];var x=o(l,c,f,h,d,p,v,m,g,y,b),_=o((0,r.Z)({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),(0,r.Z)({prop:"display"}),(0,r.Z)({prop:"overflow"}),(0,r.Z)({prop:"textOverflow"}),(0,r.Z)({prop:"visibility"}),(0,r.Z)({prop:"whiteSpace"})),w=o((0,r.Z)({prop:"flexBasis"}),(0,r.Z)({prop:"flexDirection"}),(0,r.Z)({prop:"flexWrap"}),(0,r.Z)({prop:"justifyContent"}),(0,r.Z)({prop:"alignItems"}),(0,r.Z)({prop:"alignContent"}),(0,r.Z)({prop:"order"}),(0,r.Z)({prop:"flex"}),(0,r.Z)({prop:"flexGrow"}),(0,r.Z)({prop:"flexShrink"}),(0,r.Z)({prop:"alignSelf"}),(0,r.Z)({prop:"justifyItems"}),(0,r.Z)({prop:"justifySelf"})),S=function(e){if(void 0!==e.gap&&null!==e.gap){var t=(0,a.eI)(e.theme,"spacing",8,"gap");return(0,s.k9)(e,e.gap,(function(e){return{gap:(0,a.NA)(t,e)}}))}return null};S.propTypes={},S.filterProps=["gap"];var E=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=(0,a.eI)(e.theme,"spacing",8,"columnGap");return(0,s.k9)(e,e.columnGap,(function(e){return{columnGap:(0,a.NA)(t,e)}}))}return null};E.propTypes={},E.filterProps=["columnGap"];var k=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=(0,a.eI)(e.theme,"spacing",8,"rowGap");return(0,s.k9)(e,e.rowGap,(function(e){return{rowGap:(0,a.NA)(t,e)}}))}return null};k.propTypes={},k.filterProps=["rowGap"];var O=o(S,E,k,(0,r.Z)({prop:"gridColumn"}),(0,r.Z)({prop:"gridRow"}),(0,r.Z)({prop:"gridAutoFlow"}),(0,r.Z)({prop:"gridAutoColumns"}),(0,r.Z)({prop:"gridAutoRows"}),(0,r.Z)({prop:"gridTemplateColumns"}),(0,r.Z)({prop:"gridTemplateRows"}),(0,r.Z)({prop:"gridTemplateAreas"}),(0,r.Z)({prop:"gridArea"})),A=o((0,r.Z)({prop:"position"}),(0,r.Z)({prop:"zIndex",themeKey:"zIndex"}),(0,r.Z)({prop:"top"}),(0,r.Z)({prop:"right"}),(0,r.Z)({prop:"bottom"}),(0,r.Z)({prop:"left"})),C=o((0,r.Z)({prop:"color",themeKey:"palette"}),(0,r.Z)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),(0,r.Z)({prop:"backgroundColor",themeKey:"palette"})),M=(0,r.Z)({prop:"boxShadow",themeKey:"shadows"});function T(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var P=(0,r.Z)({prop:"width",transform:T}),R=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return(0,s.k9)(e,e.maxWidth,(function(t){var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||s.VO[t]||T(t)}}))}return null};R.filterProps=["maxWidth"];var I=(0,r.Z)({prop:"minWidth",transform:T}),L=(0,r.Z)({prop:"height",transform:T}),N=(0,r.Z)({prop:"maxHeight",transform:T}),j=(0,r.Z)({prop:"minHeight",transform:T}),D=((0,r.Z)({prop:"size",cssProperty:"width",transform:T}),(0,r.Z)({prop:"size",cssProperty:"height",transform:T}),o(P,R,I,L,N,j,(0,r.Z)({prop:"boxSizing"}))),B=(0,r.Z)({prop:"fontFamily",themeKey:"typography"}),z=(0,r.Z)({prop:"fontSize",themeKey:"typography"}),F=(0,r.Z)({prop:"fontStyle",themeKey:"typography"}),V=(0,r.Z)({prop:"fontWeight",themeKey:"typography"}),U=(0,r.Z)({prop:"letterSpacing"}),Z=(0,r.Z)({prop:"textTransform"}),H=(0,r.Z)({prop:"lineHeight"}),G=(0,r.Z)({prop:"textAlign"}),W=o((0,r.Z)({prop:"typography",cssProperty:!1,themeKey:"typography"}),B,z,F,V,U,H,G,Z),q={borders:x.filterProps,display:_.filterProps,flexbox:w.filterProps,grid:O.filterProps,positions:A.filterProps,palette:C.filterProps,shadows:M.filterProps,sizing:D.filterProps,spacing:a.ZP.filterProps,typography:W.filterProps},K={borders:x,display:_,flexbox:w,grid:O,positions:A,palette:C,shadows:M,sizing:D,spacing:a.ZP,typography:W},Y=Object.keys(q).reduce((function(e,t){return q[t].forEach((function(n){e[n]=K[t]})),e}),{})},1088:function(e,t,n){"use strict";var r=n(30305);t.Z=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},70644:function(e,t,n){"use strict";n.d(t,{hB:function(){return v},eI:function(){return p},ZP:function(){return w},NA:function(){return m}});var r=n(96916),i=n(43286),o=n(81722),a=n(1088);var s={m:"margin",p:"padding"},u={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!l[e])return[e];e=l[e]}var t=e.split(""),n=(0,r.Z)(t,2),i=n[0],o=n[1],a=s[i],c=u[o]||"";return Array.isArray(c)?c.map((function(e){return a+e})):[a+c]})),f=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],h=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],d=[].concat(f,h);function p(e,t,n,r){var i=(0,o.D)(e,t)||n;return"number"===typeof i?function(e){return"string"===typeof e?e:i*e}:Array.isArray(i)?function(e){return"string"===typeof e?e:i[e]}:"function"===typeof i?i:function(){}}function v(e){return p(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(e,t,n,r){if(-1===t.indexOf(n))return null;var o=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=m(t,n),e}),{})}}(c(n),r),a=e[n];return(0,i.k9)(e,a,o)}function y(e,t){var n=v(e.theme);return Object.keys(e).map((function(r){return g(e,t,r,n)})).reduce(a.Z,{})}function b(e){return y(e,f)}function x(e){return y(e,h)}function _(e){return y(e,d)}b.propTypes={},b.filterProps=f,x.propTypes={},x.filterProps=h,_.propTypes={},_.filterProps=d;var w=_},81722:function(e,t,n){"use strict";n.d(t,{D:function(){return a}});var r=n(29673),i=n(26047),o=n(43286);function a(e,t){return t&&"string"===typeof t?t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e):null}function s(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:a(e,n)||i,t&&(r=t(r)),r}t.Z=function(e){var t=e.prop,n=e.cssProperty,u=void 0===n?e.prop:n,l=e.themeKey,c=e.transform,f=function(e){if(null==e[t])return null;var n=e[t],f=a(e.theme,l)||{};return(0,o.k9)(e,n,(function(e){var n=s(f,c,e);return e===n&&"string"===typeof e&&(n=s(f,c,"".concat(t).concat("default"===e?"":(0,i.Z)(e)),e)),!1===u?n:(0,r.Z)({},u,n)}))};return f.propTypes={},f.filterProps=[t],f}},45485:function(e,t,n){"use strict";var r=n(29673),i=n(1088),o=n(11578),a=n(43286);function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}function u(e,t){return"function"===typeof e?e(t):e}var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.G$,t=Object.keys(e).reduce((function(t,n){return e[n].filterProps.forEach((function(r){t[r]=e[n]})),t}),{});function n(e,n,i){var o,a=(o={},(0,r.Z)(o,e,n),(0,r.Z)(o,"theme",i),o),s=t[e];return s?s(a):(0,r.Z)({},e,n)}function l(e){var o=e||{},c=o.sx,f=o.theme,h=void 0===f?{}:f;if(!c)return null;function d(e){var o=e;if("function"===typeof e)o=e(h);else if("object"!==typeof e)return e;if(!o)return null;var c=(0,a.W8)(h.breakpoints),f=Object.keys(c),d=c;return Object.keys(o).forEach((function(e){var c=u(o[e],h);if(null!==c&&void 0!==c)if("object"===typeof c)if(t[e])d=(0,i.Z)(d,n(e,c,h));else{var f=(0,a.k9)({theme:h},c,(function(t){return(0,r.Z)({},e,t)}));s(f,c)?d[e]=l({sx:c,theme:h}):d=(0,i.Z)(d,f)}else d=(0,i.Z)(d,n(e,c,h))})),(0,a.L7)(f,d)}return Array.isArray(c)?c.map(d):d(c)}return l}();l.filterProps=["sx"],t.Z=l},25789:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(91757),i=n(50189);function o(e){return 0===Object.keys(e).length}var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(0,i.Z)();return!t||o(t)?e:t},s=(0,r.Z)();var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return a(e)}},26047:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(12807);function i(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},3316:function(e,t,n){"use strict";function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=function(){e.apply(r,o)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r}n.d(t,{Z:function(){return r}})},30305:function(e,t,n){"use strict";n.d(t,{P:function(){return i},Z:function(){return o}});var r=n(84427);function i(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},a=n.clone?(0,r.Z)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?a[r]=o(e[r],t[r],n):a[r]=t[r])})),a}},12807:function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return r}})},62891:function(e,t,n){"use strict";function r(e){var t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}n.d(t,{Z:function(){return r}})},30019:function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{Z:function(){return r}})},77222:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(30019);function i(e){return(0,r.Z)(e).defaultView||window}},9033:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(84427);function i(e,t){var n=(0,r.Z)({},t);return Object.keys(e).forEach((function(t){void 0===n[t]&&(n[t]=e[t])})),n}},78954:function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},4267:function(e,t,n){"use strict";var r=n(47028),i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;t.Z=i},66293:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(47028),i=n(4267);function o(e){var t=r.useRef(e);return(0,i.Z)((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},10703:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(47028),i=n(78954);function o(e,t){return r.useMemo((function(){return null==e&&null==t?null:function(n){(0,i.Z)(e,n),(0,i.Z)(t,n)}}),[e,t])}},68030:function(e,t,n){"use strict";n.d(t,{A:function(){return T},B:function(){return m},C:function(){return R},D:function(){return b},E:function(){return u},F:function(){return L},G:function(){return V},J:function(){return N},K:function(){return G},L:function(){return Y},N:function(){return K},P:function(){return M},R:function(){return P},S:function(){return D},T:function(){return C},Y:function(){return W},a:function(){return I},a1:function(){return X},b:function(){return j},d:function(){return B},e:function(){return A},f:function(){return z},g:function(){return F},h:function(){return U},i:function(){return g},j:function(){return E},k:function(){return a},l:function(){return S},m:function(){return y},o:function(){return h},p:function(){return l},q:function(){return v},r:function(){return f},s:function(){return w},t:function(){return s},u:function(){return c},v:function(){return k},y:function(){return _},z:function(){return x}});var r=n(26395),i=n(97442),o=n(64674);var a=function(e){return function(){return e}}(!0),s=function(){};var u=function(e){return e};"function"===typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var l=function(e,t){(0,i.Z)(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(n){e[n]=t[n]}))},c=function(e,t){var n;return(n=[]).concat.apply(n,t.map(e))};function f(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function h(e){var t=!1;return function(){t||(t=!0,e())}}var d=function(e){throw e},p=function(e){return{value:e,done:!0}};function v(e,t,n){void 0===t&&(t=d),void 0===n&&(n="iterator");var r={meta:{name:n},next:e,throw:t,return:p,isSagaIterator:!0};return"undefined"!==typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function m(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var g=function(e){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+e+"\n")},y=function(e){return Array.apply(null,new Array(e))},b=function(e){return function(t){return e(Object.defineProperty(t,r.Nm,{value:!0}))}},x=function(e){return e===r.EO},_=function(e){return e===r.Wd},w=function(e){return x(e)||_(e)};function S(e,t){var n=Object.keys(e),r=n.length;var i,a=0,u=(0,o.IX)(e)?y(r):{},l={};return n.forEach((function(e){var n=function(n,o){i||(o||w(n)?(t.cancel(),t(n,o)):(u[e]=n,++a===r&&(i=!0,t(u))))};n.cancel=s,l[e]=n})),t.cancel=function(){i||(i=!0,n.forEach((function(e){return l[e].cancel()})))},l}function E(e){return{name:e.name||"anonymous",location:k(e)}}function k(e){return e[r.b_]}function O(e,t){void 0===e&&(e=10);var n=new Array(e),r=0,i=0,o=0,a=function(t){n[i]=t,i=(i+1)%e,r++},s=function(){if(0!=r){var t=n[o];return n[o]=null,r--,o=(o+1)%e,t}},u=function(){for(var e=[];r;)e.push(s());return e};return{isEmpty:function(){return 0==r},put:function(s){var l;if(r<e)a(s);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:n[i]=s,o=i=(i+1)%e;break;case 4:l=2*e,n=u(),r=n.length,i=n.length,o=0,n.length=l,e=l,a(s)}},take:s,flush:u}}var A=function(e){return O(e,4)},C="TAKE",M="PUT",T="ALL",P="RACE",R="CALL",I="CPS",L="FORK",N="JOIN",j="CANCEL",D="SELECT",B="ACTION_CHANNEL",z="CANCELLED",F="FLUSH",V="GET_CONTEXT",U="SET_CONTEXT",Z=function(e,t){var n;return(n={})[r.IO]=!0,n.combinator=!1,n.type=e,n.payload=t,n},H=function(e){return Z(L,(0,i.Z)({},e.payload,{detached:!0}))};function G(e,t){return void 0===e&&(e="*"),(0,o.uj)(e)?Z(C,{pattern:e}):(0,o.Om)(e)&&(0,o.d5)(t)&&(0,o.uj)(t)?Z(C,{channel:e,pattern:t}):(0,o.CE)(e)?Z(C,{channel:e}):void 0}function W(e,t){return(0,o.sR)(t)&&(t=e,e=void 0),Z(M,{channel:e,action:t})}function q(e,t){var n,r=null;return(0,o.Yl)(e)?n=e:((0,o.IX)(e)?(r=e[0],n=e[1]):(r=e.context,n=e.fn),r&&(0,o.Z_)(n)&&(0,o.Yl)(r[n])&&(n=r[n])),{context:r,fn:n,args:t}}function K(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Z(R,q(e,n))}function Y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Z(L,q(e,n))}function X(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return H(Y.apply(void 0,[e].concat(n)))}},64674:function(e,t,n){"use strict";n.d(t,{CE:function(){return h},IX:function(){return u},MC:function(){return l},NA:function(){return p},Om:function(){return v},Yl:function(){return a},Z_:function(){return s},d5:function(){return o},eR:function(){return d},hZ:function(){return c},sR:function(){return i},uj:function(){return f}});var r=n(26395),i=function(e){return null===e||void 0===e},o=function(e){return null!==e&&void 0!==e},a=function(e){return"function"===typeof e},s=function(e){return"string"===typeof e},u=Array.isArray,l=function(e){return e&&a(e.then)},c=function(e){return e&&a(e.next)&&a(e.throw)},f=function e(t){return t&&(s(t)||p(t)||a(t)||u(t)&&t.every(e))},h=function(e){return e&&a(e.take)&&a(e.close)},d=function(e){return a(e)&&e.hasOwnProperty("toString")},p=function(e){return Boolean(e)&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype},v=function(e){return h(e)&&e[r.AS]}},26395:function(e,t,n){"use strict";n.d(t,{AS:function(){return u},Cs:function(){return f},EO:function(){return d},IO:function(){return a},Nm:function(){return l},Wd:function(){return h},b_:function(){return p},n1:function(){return i},sC:function(){return c},sZ:function(){return o},uq:function(){return s}});var r=function(e){return"@@redux-saga/"+e},i=r("CANCEL_PROMISE"),o=r("CHANNEL_END"),a=r("IO"),s=r("MATCH"),u=r("MULTICAST"),l=r("SAGA_ACTION"),c=r("SELF_CANCELLATION"),f=r("TASK"),h=r("TASK_CANCEL"),d=r("TERMINATE"),p=r("LOCATION")},99724:function(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function i(e){return!!e&&!!e[q]}function o(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===K}(e)||Array.isArray(e)||!!e[W]||!!e.constructor[W]||h(e)||d(e))}function a(e,t,n){void 0===n&&(n=!1),0===s(e)?(n?Object.keys:Y)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function s(e){var t=e[q];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:h(e)?2:d(e)?3:0}function u(e,t){return 2===s(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function l(e,t){return 2===s(e)?e.get(t):e[t]}function c(e,t,n){var r=s(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function f(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function h(e){return U&&e instanceof Map}function d(e){return Z&&e instanceof Set}function p(e){return e.o||e.t}function v(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=X(e);delete t[q];for(var n=Y(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function m(e,t){return void 0===t&&(t=!1),y(e)||i(e)||!o(e)||(s(e)>1&&(e.set=e.add=e.clear=e.delete=g),Object.freeze(e),t&&a(e,(function(e,t){return m(t,!0)}),!0)),e}function g(){r(2)}function y(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function b(e){var t=$[e];return t||r(18,e),t}function x(e,t){$[e]||($[e]=t)}function _(){return F}function w(e,t){t&&(b("Patches"),e.u=[],e.s=[],e.v=t)}function S(e){E(e),e.p.forEach(O),e.p=null}function E(e){e===F&&(F=e.l)}function k(e){return F={p:[],l:F,h:e,m:!0,_:0}}function O(e){var t=e[q];0===t.i||1===t.i?t.j():t.O=!0}function A(e,t){t._=t.p.length;var n=t.p[0],i=void 0!==e&&e!==n;return t.h.g||b("ES5").S(t,e,i),i?(n[q].P&&(S(t),r(4)),o(e)&&(e=C(t,e),t.l||T(t,e)),t.u&&b("Patches").M(n[q].t,e,t.u,t.s)):e=C(t,n,[]),S(t),t.u&&t.v(t.u,t.s),e!==G?e:void 0}function C(e,t,n){if(y(t))return t;var r=t[q];if(!r)return a(t,(function(i,o){return M(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return T(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=v(r.k):r.o;a(3===r.i?new Set(i):i,(function(t,o){return M(e,r,i,t,o,n)})),T(e,i,!1),n&&e.u&&b("Patches").R(r,n,e.u,e.s)}return r.o}function M(e,t,n,r,a,s){if(i(a)){var l=C(e,a,s&&t&&3!==t.i&&!u(t.D,r)?s.concat(r):void 0);if(c(n,r,l),!i(l))return;e.m=!1}if(o(a)&&!y(a)){if(!e.h.F&&e._<1)return;C(e,a),t&&t.A.l||T(e,a)}}function T(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&m(t,n)}function P(e,t){var n=e[q];return(n?p(n):e)[t]}function R(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function I(e){e.P||(e.P=!0,e.l&&I(e.l))}function L(e){e.o||(e.o=v(e.t))}function N(e,t,n){var r=h(t)?b("MapSet").N(t,n):d(t)?b("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:_(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=J;n&&(i=[r],o=Q);var a=Proxy.revocable(i,o),s=a.revoke,u=a.proxy;return r.k=u,r.j=s,u}(t,n):b("ES5").J(t,n);return(n?n.A:_()).p.push(r),r}function j(e){return i(e)||r(22,e),function e(t){if(!o(t))return t;var n,r=t[q],i=s(t);if(r){if(!r.P&&(r.i<4||!b("ES5").K(r)))return r.t;r.I=!0,n=D(t,i),r.I=!1}else n=D(t,i);return a(n,(function(t,i){r&&l(r.t,t)===i||c(n,t,e(i))})),3===i?new Set(n):n}(e)}function D(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return v(e)}function B(){function e(e,t){var n=o[e];return n?n.enumerable=t:o[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[q];return J.get(t,e)},set:function(t){var n=this[q];J.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][q];if(!i.P)switch(i.i){case 5:r(i)&&I(i);break;case 4:n(i)&&I(i)}}}function n(e){for(var t=e.t,n=e.k,r=Y(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==q){var a=t[o];if(void 0===a&&!u(t,o))return!0;var s=n[o],l=s&&s[q];if(l?l.t!==a:!f(s,a))return!0}}var c=!!t[q];return r.length!==Y(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var o={};x("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=X(n);delete o[q];for(var a=Y(o),s=0;s<a.length;s++){var u=a[s];o[u]=e(u,t||!!o[u].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={i:r?5:4,A:n?n.A:_(),P:!1,I:!1,D:{},l:n,t:t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,q,{value:o,writable:!0}),i},S:function(e,n,o){o?i(n)&&n[q].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[q];if(n){var i=n.t,o=n.k,s=n.D,l=n.i;if(4===l)a(o,(function(t){t!==q&&(void 0!==i[t]||u(i,t)?s[t]||e(o[t]):(s[t]=!0,I(n)))})),a(i,(function(e){void 0!==o[e]||u(o,e)||(s[e]=!1,I(n))}));else if(5===l){if(r(n)&&(I(n),s.length=!0),o.length<i.length)for(var c=o.length;c<i.length;c++)s[c]=!1;else for(var f=i.length;f<o.length;f++)s[f]=!0;for(var h=Math.min(o.length,i.length),d=0;d<h;d++)o.hasOwnProperty(d)||(s[d]=!0),void 0===s[d]&&e(o[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}n.d(t,{xC:function(){return ye},oM:function(){return _e}});var z,F,V="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),U="undefined"!=typeof Map,Z="undefined"!=typeof Set,H="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,G=V?Symbol.for("immer-nothing"):((z={})["immer-nothing"]=!0,z),W=V?Symbol.for("immer-draftable"):"__$immer_draftable",q=V?Symbol.for("immer-state"):"__$immer_state",K=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Y="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,X=Object.getOwnPropertyDescriptors||function(e){var t={};return Y(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},$={},J={get:function(e,t){if(t===q)return e;var n=p(e);if(!u(n,t))return function(e,t,n){var r,i=R(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!o(r)?r:r===P(e.t,t)?(L(e),e.o[t]=N(e.A.h,r,e)):r},has:function(e,t){return t in p(e)},ownKeys:function(e){return Reflect.ownKeys(p(e))},set:function(e,t,n){var r=R(p(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=P(p(e),t),o=null==i?void 0:i[q];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(f(n,i)&&(void 0!==n||u(e.t,t)))return!0;L(e),I(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==P(e.t,t)||t in e.t?(e.D[t]=!1,L(e),I(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=p(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){r(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){r(12)}},Q={};a(J,(function(e,t){Q[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Q.deleteProperty=function(e,t){return Q.set.call(this,e,t,void 0)},Q.set=function(e,t,n){return J.set.call(this,e[0],t,n,e[0])};var ee=function(){function e(e){var t=this;this.g=H,this.F=!0,this.produce=function(e,n,i){if("function"==typeof e&&"function"!=typeof n){var a=n;n=e;var s=t;return function(e){var t=this;void 0===e&&(e=a);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return s.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(i))}))}}var u;if("function"!=typeof n&&r(6),void 0!==i&&"function"!=typeof i&&r(7),o(e)){var l=k(t),c=N(t,e,void 0),f=!0;try{u=n(c),f=!1}finally{f?S(l):E(l)}return"undefined"!=typeof Promise&&u instanceof Promise?u.then((function(e){return w(l,i),A(e,l)}),(function(e){throw S(l),e})):(w(l,i),A(u,l))}if(!e||"object"!=typeof e){if(void 0===(u=n(e))&&(u=e),u===G&&(u=void 0),t.F&&m(u,!0),i){var h=[],d=[];b("Patches").M(e,u,h,d),i(h,d)}return u}r(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,o=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,r,i]})):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){o(e)||r(8),i(e)&&(e=j(e));var t=k(this),n=N(this,e,void 0);return n[q].C=!0,E(t),n},t.finishDraft=function(e,t){var n=(e&&e[q]).A;return w(n,t),A(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!H&&r(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var o=b("Patches").$;return i(e)?o(e,t):this.produce(e,(function(e){return o(e,t)}))},e}(),te=new ee,ne=te.produce,re=(te.produceWithPatches.bind(te),te.setAutoFreeze.bind(te),te.setUseProxies.bind(te),te.applyPatches.bind(te),te.createDraft.bind(te),te.finishDraft.bind(te),ne),ie=n(37936),oe=n(61640),ae=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),se=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},ue=Object.defineProperty,le=(Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols),ce=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,he=function(e,t,n){return t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},de=function(e,t){for(var n in t||(t={}))ce.call(t,n)&&he(e,n,t[n]);if(le)for(var r=0,i=le(t);r<i.length;r++){n=i[r];fe.call(t,n)&&he(e,n,t[n])}return e},pe="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?ie.qC:ie.qC.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function ve(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var me=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return ae(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,se([void 0],e[0].concat(this)))):new(t.bind.apply(t,se([void 0],e.concat(this))))},t}(Array);function ge(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new me);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(oe.Z.withExtraArgument(n.extraArgument)):r.push(oe.Z));0;return r}(e)}}function ye(e){var t,n=ge(),r=e||{},i=r.reducer,o=void 0===i?void 0:i,a=r.middleware,s=void 0===a?n():a,u=r.devTools,l=void 0===u||u,c=r.preloadedState,f=void 0===c?void 0:c,h=r.enhancers,d=void 0===h?void 0:h;if("function"===typeof o)t=o;else{if(!ve(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=(0,ie.UY)(o)}var p=s;"function"===typeof p&&(p=p(n));var v=ie.md.apply(void 0,p),m=ie.qC;l&&(m=pe(de({trace:!1},"object"===typeof l&&l)));var g=[v];Array.isArray(d)?g=se([v],d):"function"===typeof d&&(g=d(g));var y=m.apply(void 0,g);return(0,ie.MT)(t,f,y)}function be(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return de(de({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function xe(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function _e(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:re(e.initialState,(function(){})),a=e.reducers||{},s=Object.keys(a),u={},l={},c={};function f(){var t="function"===typeof e.extraReducers?xe(e.extraReducers):[e.extraReducers],n=t[0],a=void 0===n?{}:n,s=t[1],u=void 0===s?[]:s,c=t[2],f=void 0===c?void 0:c,h=de(de({},a),l);return function(e,t,n,r){void 0===n&&(n=[]);var a,s="function"===typeof t?xe(t):[t,n,r],u=s[0],l=s[1],c=s[2];if(function(e){return"function"===typeof e}(e))a=function(){return re(e(),(function(){}))};else{var f=re(e,(function(){}));a=function(){return f}}function h(e,t){void 0===e&&(e=a());var n=se([u[t.type]],l.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[c]),n.reduce((function(e,n){if(n){var r;if(i(e))return"undefined"===typeof(r=n(e,t))?e:r;if(o(e))return re(e,(function(e){return n(e,t)}));if("undefined"===typeof(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return h.getInitialState=a,h}(r,h,u,f)}return s.forEach((function(e){var n,r,i=a[e],o=t+"/"+e;"reducer"in i?(n=i.reducer,r=i.prepare):n=i,u[e]=n,l[o]=n,c[e]=r?be(o,r):be(o)})),{name:t,reducer:function(e,t){return n||(n=f()),n(e,t)},actions:c,caseReducers:u,getInitialState:function(){return n||(n=f()),n.getInitialState()}}}Object.assign;var we="listenerMiddleware";be(we+"/add"),be(we+"/removeAll"),be(we+"/remove");B()},35471:function(e,t,n){"use strict";var r=n(30437).default,i=n(47857).default,o=n(65431).default,a=n(13609).default,s=n(41490).default,u=n(54758).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var l=n(60602),c=n(11256),f=n(97717),h=n(31512),d=["/properties"],p="http://json-schema.org/draft-07/schema",v=function(e){s(n,e);var t=u(n);function n(){return r(this,n),t.apply(this,arguments)}return i(n,[{key:"_addVocabularies",value:function(){var e=this;o(a(n.prototype),"_addVocabularies",this).call(this),c.default.forEach((function(t){return e.addVocabulary(t)})),this.opts.discriminator&&this.addKeyword(f.default)}},{key:"_addDefaultMetaSchema",value:function(){if(o(a(n.prototype),"_addDefaultMetaSchema",this).call(this),this.opts.meta){var e=this.opts.$data?this.$dataMetaSchema(h,d):h;this.addMetaSchema(e,p,!1),this.refs["http://json-schema.org/schema"]=p}}},{key:"defaultMeta",value:function(){return this.opts.defaultMeta=o(a(n.prototype),"defaultMeta",this).call(this)||(this.getSchema(p)?p:void 0)}}]),n}(l.default);e.exports=t=v,Object.defineProperty(t,"__esModule",{value:!0}),t.default=v;var m=n(99723);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return m.KeywordCxt}});var g=n(17641);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return g._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return g.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return g.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return g.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return g.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return g.CodeGen}})},77598:function(e,t,n){"use strict";var r,i,o=n(61874).default,a=n(88148).default,s=n(85921).default,u=n(41490).default,l=n(54758).default,c=n(47857).default,f=n(30437).default;Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;var h=c((function e(){f(this,e)}));t._CodeOrName=h,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var d=function(e){u(r,e);var n=l(r);function r(e){var i;if(f(this,r),i=n.call(this),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");return i.str=e,i}return c(r,[{key:"toString",value:function(){return this.str}},{key:"emptyStr",value:function(){return!1}},{key:"names",get:function(){return s({},this.str,1)}}]),r}(h);t.Name=d;var p=function(e){u(n,e);var t=l(n);function n(e){var r;return f(this,n),(r=t.call(this))._items="string"===typeof e?[e]:e,r}return c(n,[{key:"toString",value:function(){return this.str}},{key:"emptyStr",value:function(){if(this._items.length>1)return!1;var e=this._items[0];return""===e||'""'===e}},{key:"str",get:function(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((function(e,t){return"".concat(e).concat(t)}),"")}},{key:"names",get:function(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((function(e,t){return t instanceof d&&(e[t.str]=(e[t.str]||0)+1),e}),{})}}]),n}(h);function v(e){for(var t=[e[0]],n=0,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];for(;n<i.length;)y(t,i[n]),t.push(e[++n]);return new p(t)}t._Code=p,t.nil=new p(""),t._=v;var m=new p("+");function g(e){for(var t=[_(e[0])],n=0,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];for(;n<i.length;)t.push(m),y(t,i[n]),t.push(m,_(e[++n]));return b(t),new p(t)}function y(e,t){var n;t instanceof p?e.push.apply(e,a(t._items)):t instanceof d?e.push(t):e.push("number"==typeof(n=t)||"boolean"==typeof n||null===n?n:_(Array.isArray(n)?n.join(","):n))}function b(e){for(var t=1;t<e.length-1;){if(e[t]===m){var n=x(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}function x(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof d||'"'!==e[e.length-1])return;return"string"!=typeof t?"".concat(e.slice(0,-1)).concat(t,'"'):'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof d?void 0:'"'.concat(e).concat(t.slice(1))}function _(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=g,t.addCodeArg=y,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:g(r||(r=o(["","",""])),e,t)},t.stringify=function(e){return new p(_(e))},t.safeStringify=_,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new p(".".concat(e)):v(i||(i=o(["[","]"])),e)},t.getEsmExportName=function(e){if("string"==typeof e&&t.IDENTIFIER.test(e))return new p("".concat(e));throw new Error("CodeGen: invalid export name: ".concat(e,", use explicit $id name mapping"))},t.regexpCode=function(e){return new p(e.toString())}},17641:function(e,t,n){"use strict";var r,i,o,a,s,u,l=n(61874).default,c=n(12848).default,f=n(65431).default,h=n(13609).default,d=n(88148).default,p=n(93621).default,v=n(41490).default,m=n(54758).default,g=n(30437).default,y=n(47857).default;Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;var b=n(77598),x=n(20875),_=n(77598);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return _._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return _.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return _.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return _.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return _.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return _.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return _.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return _.Name}});var w=n(20875);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return w.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return w.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return w.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return w.varKinds}}),t.operators={GT:new b._Code(">"),GTE:new b._Code(">="),LT:new b._Code("<"),LTE:new b._Code("<="),EQ:new b._Code("==="),NEQ:new b._Code("!=="),NOT:new b._Code("!"),OR:new b._Code("||"),AND:new b._Code("&&"),ADD:new b._Code("+")};var S=function(){function e(){g(this,e)}return y(e,[{key:"optimizeNodes",value:function(){return this}},{key:"optimizeNames",value:function(e,t){return this}}]),e}(),E=function(e){v(n,e);var t=m(n);function n(e,r,i){var o;return g(this,n),(o=t.call(this)).varKind=e,o.name=r,o.rhs=i,o}return y(n,[{key:"render",value:function(e){var t=e.es5,n=e._n,r=t?x.varKinds.var:this.varKind,i=void 0===this.rhs?"":" = ".concat(this.rhs);return"".concat(r," ").concat(this.name).concat(i,";")+n}},{key:"optimizeNames",value:function(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=K(this.rhs,e,t)),this}},{key:"names",get:function(){return this.rhs instanceof b._CodeOrName?this.rhs.names:{}}}]),n}(S),k=function(e){v(n,e);var t=m(n);function n(e,r,i){var o;return g(this,n),(o=t.call(this)).lhs=e,o.rhs=r,o.sideEffects=i,o}return y(n,[{key:"render",value:function(e){var t=e._n;return"".concat(this.lhs," = ").concat(this.rhs,";")+t}},{key:"optimizeNames",value:function(e,t){if(!(this.lhs instanceof b.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=K(this.rhs,e,t),this}},{key:"names",get:function(){return q(this.lhs instanceof b.Name?{}:p({},this.lhs.names),this.rhs)}}]),n}(S),O=function(e){v(n,e);var t=m(n);function n(e,r,i,o){var a;return g(this,n),(a=t.call(this,e,i,o)).op=r,a}return y(n,[{key:"render",value:function(e){var t=e._n;return"".concat(this.lhs," ").concat(this.op,"= ").concat(this.rhs,";")+t}}]),n}(k),A=function(e){v(n,e);var t=m(n);function n(e){var r;return g(this,n),(r=t.call(this)).label=e,r.names={},r}return y(n,[{key:"render",value:function(e){var t=e._n;return"".concat(this.label,":")+t}}]),n}(S),C=function(e){v(n,e);var t=m(n);function n(e){var r;return g(this,n),(r=t.call(this)).label=e,r.names={},r}return y(n,[{key:"render",value:function(e){var t=e._n,n=this.label?" ".concat(this.label):"";return"break".concat(n,";")+t}}]),n}(S),M=function(e){v(n,e);var t=m(n);function n(e){var r;return g(this,n),(r=t.call(this)).error=e,r}return y(n,[{key:"render",value:function(e){var t=e._n;return"throw ".concat(this.error,";")+t}},{key:"names",get:function(){return this.error.names}}]),n}(S),T=function(e){v(n,e);var t=m(n);function n(e){var r;return g(this,n),(r=t.call(this)).code=e,r}return y(n,[{key:"render",value:function(e){var t=e._n;return"".concat(this.code,";")+t}},{key:"optimizeNodes",value:function(){return"".concat(this.code)?this:void 0}},{key:"optimizeNames",value:function(e,t){return this.code=K(this.code,e,t),this}},{key:"names",get:function(){return this.code instanceof b._CodeOrName?this.code.names:{}}}]),n}(S),P=function(e){v(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return g(this,n),(e=t.call(this)).nodes=r,e}return y(n,[{key:"render",value:function(e){return this.nodes.reduce((function(t,n){return t+n.render(e)}),"")}},{key:"optimizeNodes",value:function(){for(var e=this.nodes,t=e.length;t--;){var n=e[t].optimizeNodes();Array.isArray(n)?e.splice.apply(e,[t,1].concat(d(n))):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}},{key:"optimizeNames",value:function(e,t){for(var n=this.nodes,r=n.length;r--;){var i=n[r];i.optimizeNames(e,t)||(Y(e,i.names),n.splice(r,1))}return n.length>0?this:void 0}},{key:"names",get:function(){return this.nodes.reduce((function(e,t){return W(e,t.names)}),{})}}]),n}(S),R=function(e){v(n,e);var t=m(n);function n(){return g(this,n),t.apply(this,arguments)}return y(n,[{key:"render",value:function(e){return"{"+e._n+f(h(n.prototype),"render",this).call(this,e)+"}"+e._n}}]),n}(P),I=function(e){v(n,e);var t=m(n);function n(){return g(this,n),t.apply(this,arguments)}return y(n)}(P),L=function(e){v(n,e);var t=m(n);function n(){return g(this,n),t.apply(this,arguments)}return y(n)}(R);L.kind="else";var N=function(e){v(n,e);var t=m(n);function n(e,r){var i;return g(this,n),(i=t.call(this,r)).condition=e,i}return y(n,[{key:"render",value:function(e){var t="if(".concat(this.condition,")")+f(h(n.prototype),"render",this).call(this,e);return this.else&&(t+="else "+this.else.render(e)),t}},{key:"optimizeNodes",value:function(){f(h(n.prototype),"optimizeNodes",this).call(this);var e=this.condition;if(!0===e)return this.nodes;var t=this.else;if(t){var r=t.optimizeNodes();t=this.else=Array.isArray(r)?new L(r):r}return t?!1===e?t instanceof n?t:t.nodes:this.nodes.length?this:new n(X(e),t instanceof n?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}},{key:"optimizeNames",value:function(e,t){var r;if(this.else=null===(r=this.else)||void 0===r?void 0:r.optimizeNames(e,t),f(h(n.prototype),"optimizeNames",this).call(this,e,t)||this.else)return this.condition=K(this.condition,e,t),this}},{key:"names",get:function(){var e=f(h(n.prototype),"names",this);return q(e,this.condition),this.else&&W(e,this.else.names),e}}]),n}(R);N.kind="if";var j=function(e){v(n,e);var t=m(n);function n(){return g(this,n),t.apply(this,arguments)}return y(n)}(R);j.kind="for";var D=function(e){v(n,e);var t=m(n);function n(e){var r;return g(this,n),(r=t.call(this)).iteration=e,r}return y(n,[{key:"render",value:function(e){return"for(".concat(this.iteration,")")+f(h(n.prototype),"render",this).call(this,e)}},{key:"optimizeNames",value:function(e,t){if(f(h(n.prototype),"optimizeNames",this).call(this,e,t))return this.iteration=K(this.iteration,e,t),this}},{key:"names",get:function(){return W(f(h(n.prototype),"names",this),this.iteration.names)}}]),n}(j),B=function(e){v(n,e);var t=m(n);function n(e,r,i,o){var a;return g(this,n),(a=t.call(this)).varKind=e,a.name=r,a.from=i,a.to=o,a}return y(n,[{key:"render",value:function(e){var t=e.es5?x.varKinds.var:this.varKind,r=this.name,i=this.from,o=this.to;return"for(".concat(t," ").concat(r,"=").concat(i,"; ").concat(r,"<").concat(o,"; ").concat(r,"++)")+f(h(n.prototype),"render",this).call(this,e)}},{key:"names",get:function(){var e=q(f(h(n.prototype),"names",this),this.from);return q(e,this.to)}}]),n}(j),z=function(e){v(n,e);var t=m(n);function n(e,r,i,o){var a;return g(this,n),(a=t.call(this)).loop=e,a.varKind=r,a.name=i,a.iterable=o,a}return y(n,[{key:"render",value:function(e){return"for(".concat(this.varKind," ").concat(this.name," ").concat(this.loop," ").concat(this.iterable,")")+f(h(n.prototype),"render",this).call(this,e)}},{key:"optimizeNames",value:function(e,t){if(f(h(n.prototype),"optimizeNames",this).call(this,e,t))return this.iterable=K(this.iterable,e,t),this}},{key:"names",get:function(){return W(f(h(n.prototype),"names",this),this.iterable.names)}}]),n}(j),F=function(e){v(n,e);var t=m(n);function n(e,r,i){var o;return g(this,n),(o=t.call(this)).name=e,o.args=r,o.async=i,o}return y(n,[{key:"render",value:function(e){var t=this.async?"async ":"";return"".concat(t,"function ").concat(this.name,"(").concat(this.args,")")+f(h(n.prototype),"render",this).call(this,e)}}]),n}(R);F.kind="func";var V=function(e){v(n,e);var t=m(n);function n(){return g(this,n),t.apply(this,arguments)}return y(n,[{key:"render",value:function(e){return"return "+f(h(n.prototype),"render",this).call(this,e)}}]),n}(P);V.kind="return";var U=function(e){v(n,e);var t=m(n);function n(){return g(this,n),t.apply(this,arguments)}return y(n,[{key:"render",value:function(e){var t="try"+f(h(n.prototype),"render",this).call(this,e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}},{key:"optimizeNodes",value:function(){var e,t;return f(h(n.prototype),"optimizeNodes",this).call(this),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}},{key:"optimizeNames",value:function(e,t){var r,i;return f(h(n.prototype),"optimizeNames",this).call(this,e,t),null===(r=this.catch)||void 0===r||r.optimizeNames(e,t),null===(i=this.finally)||void 0===i||i.optimizeNames(e,t),this}},{key:"names",get:function(){var e=f(h(n.prototype),"names",this);return this.catch&&W(e,this.catch.names),this.finally&&W(e,this.finally.names),e}}]),n}(R),Z=function(e){v(n,e);var t=m(n);function n(e){var r;return g(this,n),(r=t.call(this)).error=e,r}return y(n,[{key:"render",value:function(e){return"catch(".concat(this.error,")")+f(h(n.prototype),"render",this).call(this,e)}}]),n}(R);Z.kind="catch";var H=function(e){v(n,e);var t=m(n);function n(){return g(this,n),t.apply(this,arguments)}return y(n,[{key:"render",value:function(e){return"finally"+f(h(n.prototype),"render",this).call(this,e)}}]),n}(R);H.kind="finally";var G=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(this,e),this._values={},this._blockStarts=[],this._constants={},this.opts=p(p({},n),{},{_n:n.lines?"\n":""}),this._extScope=t,this._scope=new x.Scope({parent:t}),this._nodes=[new I]}return y(e,[{key:"toString",value:function(){return this._root.render(this.opts)}},{key:"name",value:function(e){return this._scope.name(e)}},{key:"scopeName",value:function(e){return this._extScope.name(e)}},{key:"scopeValue",value:function(e,t){var n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}},{key:"getScopeValue",value:function(e,t){return this._extScope.getValue(e,t)}},{key:"scopeRefs",value:function(e){return this._extScope.scopeRefs(e,this._values)}},{key:"scopeCode",value:function(){return this._extScope.scopeCode(this._values)}},{key:"_def",value:function(e,t,n,r){var i=this._scope.toName(t);return void 0!==n&&r&&(this._constants[i.str]=n),this._leafNode(new E(e,i,n)),i}},{key:"const",value:function(e,t,n){return this._def(x.varKinds.const,e,t,n)}},{key:"let",value:function(e,t,n){return this._def(x.varKinds.let,e,t,n)}},{key:"var",value:function(e,t,n){return this._def(x.varKinds.var,e,t,n)}},{key:"assign",value:function(e,t,n){return this._leafNode(new k(e,t,n))}},{key:"add",value:function(e,n){return this._leafNode(new O(e,t.operators.ADD,n))}},{key:"code",value:function(e){return"function"==typeof e?e():e!==b.nil&&this._leafNode(new T(e)),this}},{key:"object",value:function(){for(var e=["{"],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=c(o[i],2),s=a[0],u=a[1];e.length>1&&e.push(","),e.push(s),(s!==u||this.opts.es5)&&(e.push(":"),(0,b.addCodeArg)(e,u))}return e.push("}"),new b._Code(e)}},{key:"if",value:function(e,t,n){if(this._blockNode(new N(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}},{key:"elseIf",value:function(e){return this._elseNode(new N(e))}},{key:"else",value:function(){return this._elseNode(new L)}},{key:"endIf",value:function(){return this._endBlockNode(N,L)}},{key:"_for",value:function(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}},{key:"for",value:function(e,t){return this._for(new D(e),t)}},{key:"forRange",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.opts.es5?x.varKinds.var:x.varKinds.let,o=this._scope.toName(e);return this._for(new B(i,o,t,n),(function(){return r(o)}))}},{key:"forOf",value:function(e,t,n){var o=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x.varKinds.const,s=this._scope.toName(e);if(this.opts.es5){var u=t instanceof b.Name?t:this.var("_arr",t);return this.forRange("_i",0,(0,b._)(r||(r=l(["",".length"])),u),(function(e){o.var(s,(0,b._)(i||(i=l(["","[","]"])),u,e)),n(s)}))}return this._for(new z("of",a,s,t),(function(){return n(s)}))}},{key:"forIn",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.es5?x.varKinds.var:x.varKinds.const;if(this.opts.ownProperties)return this.forOf(e,(0,b._)(o||(o=l(["Object.keys(",")"])),t),n);var i=this._scope.toName(e);return this._for(new z("in",r,i,t),(function(){return n(i)}))}},{key:"endFor",value:function(){return this._endBlockNode(j)}},{key:"label",value:function(e){return this._leafNode(new A(e))}},{key:"break",value:function(e){return this._leafNode(new C(e))}},{key:"return",value:function(e){var t=new V;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(V)}},{key:"try",value:function(e,t,n){if(!t&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');var r=new U;if(this._blockNode(r),this.code(e),t){var i=this.name("e");this._currNode=r.catch=new Z(i),t(i)}return n&&(this._currNode=r.finally=new H,this.code(n)),this._endBlockNode(Z,H)}},{key:"throw",value:function(e){return this._leafNode(new M(e))}},{key:"block",value:function(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}},{key:"endBlock",value:function(e){var t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");var n=this._nodes.length-t;if(n<0||void 0!==e&&n!==e)throw new Error("CodeGen: wrong number of nodes: ".concat(n," vs ").concat(e," expected"));return this._nodes.length=t,this}},{key:"func",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.nil,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return this._blockNode(new F(e,t,n)),r&&this.code(r).endFunc(),this}},{key:"endFunc",value:function(){return this._endBlockNode(F)}},{key:"optimize",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}},{key:"_leafNode",value:function(e){return this._currNode.nodes.push(e),this}},{key:"_blockNode",value:function(e){this._currNode.nodes.push(e),this._nodes.push(e)}},{key:"_endBlockNode",value:function(e,t){var n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw new Error('CodeGen: not in block "'.concat(t?"".concat(e.kind,"/").concat(t.kind):e.kind,'"'))}},{key:"_elseNode",value:function(e){var t=this._currNode;if(!(t instanceof N))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}},{key:"_root",get:function(){return this._nodes[0]}},{key:"_currNode",get:function(){var e=this._nodes;return e[e.length-1]},set:function(e){var t=this._nodes;t[t.length-1]=e}}]),e}();function W(e,t){for(var n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function q(e,t){return t instanceof b._CodeOrName?W(e,t.names):e}function K(e,t,n){return e instanceof b.Name?r(e):function(e){return e instanceof b._Code&&e._items.some((function(e){return e instanceof b.Name&&1===t[e.str]&&void 0!==n[e.str]}))}(e)?new b._Code(e._items.reduce((function(e,t){return t instanceof b.Name&&(t=r(t)),t instanceof b._Code?e.push.apply(e,d(t._items)):e.push(t),e}),[])):e;function r(e){var r=n[e.str];return void 0===r||1!==t[e.str]?e:(delete t[e.str],r)}}function Y(e,t){for(var n in t)e[n]=(e[n]||0)-(t[n]||0)}function X(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:(0,b._)(a||(a=l(["!",""])),ee(e))}t.CodeGen=G,t.not=X;var $=Q(t.operators.AND);t.and=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce($)};var J=Q(t.operators.OR);function Q(e){return function(t,n){return t===b.nil?n:n===b.nil?t:(0,b._)(s||(s=l([""," "," ",""])),ee(t),e,ee(n))}}function ee(e){return e instanceof b.Name?e:(0,b._)(u||(u=l(["(",")"])),e)}t.or=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(J)}},20875:function(e,t,n){"use strict";var r,i,o,a,s,u=n(93621).default,l=n(61874).default,c=n(47857).default,f=n(30437).default,h=n(41490).default,d=n(54758).default,p=n(70391).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;var v,m=n(77598),g=function(e){h(n,e);var t=d(n);function n(e){var r;return f(this,n),(r=t.call(this,'CodeGen: "code" for '.concat(e," not defined"))).value=e.value,r}return c(n)}(p(Error));!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(v=t.UsedValueState||(t.UsedValueState={})),t.varKinds={const:new m.Name("const"),let:new m.Name("let"),var:new m.Name("var")};var y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.prefixes,r=t.parent;f(this,e),this._names={},this._prefixes=n,this._parent=r}return c(e,[{key:"toName",value:function(e){return e instanceof m.Name?e:this.name(e)}},{key:"name",value:function(e){return new m.Name(this._newName(e))}},{key:"_newName",value:function(e){var t=this._names[e]||this._nameGroup(e);return"".concat(e).concat(t.index++)}},{key:"_nameGroup",value:function(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error('CodeGen: prefix "'.concat(e,'" is not allowed in this scope'));return this._names[e]={prefix:e,index:0}}}]),e}();t.Scope=y;var b=function(e){h(n,e);var t=d(n);function n(e,r){var i;return f(this,n),(i=t.call(this,r)).prefix=e,i}return c(n,[{key:"setValue",value:function(e,t){var n=t.property,i=t.itemIndex;this.value=e,this.scopePath=(0,m._)(r||(r=l([".","[","]"])),new m.Name(n),i)}}]),n}(m.Name);t.ValueScopeName=b;var x=(0,m._)(i||(i=l(["\n"],["\\n"]))),_=function(e){h(r,e);var n=d(r);function r(e){var t;return f(this,r),(t=n.call(this,e))._values={},t._scope=e.scope,t.opts=u(u({},e),{},{_n:e.lines?x:m.nil}),t}return c(r,[{key:"get",value:function(){return this._scope}},{key:"name",value:function(e){return new b(e,this._newName(e))}},{key:"value",value:function(e,t){var n;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");var r=this.toName(e),i=r.prefix,o=null!==(n=t.key)&&void 0!==n?n:t.ref,a=this._values[i];if(a){var s=a.get(o);if(s)return s}else a=this._values[i]=new Map;a.set(o,r);var u=this._scope[i]||(this._scope[i]=[]),l=u.length;return u[l]=t.ref,r.setValue(t,{property:i,itemIndex:l}),r}},{key:"getValue",value:function(e,t){var n=this._values[e];if(n)return n.get(t)}},{key:"scopeRefs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._values;return this._reduceValues(t,(function(t){if(void 0===t.scopePath)throw new Error('CodeGen: name "'.concat(t,'" has no value'));return(0,m._)(o||(o=l(["","",""])),e,t.scopePath)}))}},{key:"scopeCode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._values,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this._reduceValues(e,(function(e){if(void 0===e.value)throw new Error('CodeGen: name "'.concat(e,'" has no value'));return e.value.code}),t,n)}},{key:"_reduceValues",value:function(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,u=m.nil,c=function(c){var f=e[c];if(!f)return"continue";var h=i[c]=i[c]||new Map;f.forEach((function(e){if(!h.has(e)){h.set(e,v.Started);var i=n(e);if(i){var c=r.opts.es5?t.varKinds.var:t.varKinds.const;u=(0,m._)(a||(a=l(["",""," "," = ",";",""])),u,c,e,i,r.opts._n)}else{if(!(i=null===o||void 0===o?void 0:o(e)))throw new g(e);u=(0,m._)(s||(s=l(["","","",""])),u,i,r.opts._n)}h.set(e,v.Completed)}}))};for(var f in e)c(f);return u}}]),r}(y);t.ValueScope=_},79601:function(e,t,n){"use strict";var r,i,o,a,s,u,l,c,f,h,d,p,v,m,g,y,b,x,_,w,S,E,k,O,A,C=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;var M=n(17641),T=n(73697),P=n(43948);function R(e,t){var n=e.const("err",t);e.if((0,M._)(m||(m=C([""," === null"])),P.default.vErrors),(function(){return e.assign(P.default.vErrors,(0,M._)(g||(g=C(["[","]"])),n))}),(0,M._)(y||(y=C(["",".push(",")"])),P.default.vErrors,n)),e.code((0,M._)(b||(b=C(["","++"])),P.default.errors))}function I(e,t){var n=e.gen,r=e.validateName;e.schemaEnv.$async?n.throw((0,M._)(x||(x=C(["new ","(",")"])),e.ValidationError,t)):(n.assign((0,M._)(_||(_=C(["",".errors"])),r),t),n.return(!1))}t.keywordError={message:function(e){var t=e.keyword;return(0,M.str)(r||(r=C(['must pass "','" keyword validation'])),t)}},t.keyword$DataError={message:function(e){var t=e.keyword,n=e.schemaType;return n?(0,M.str)(i||(i=C(['"','" keyword must be '," ($data)"])),t,n):(0,M.str)(o||(o=C(['"','" keyword is invalid ($data)'])),t)}},t.reportError=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.keywordError,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=e.it,s=o.gen,u=o.compositeRule,l=o.allErrors,c=N(e,n,r);(null!==i&&void 0!==i?i:u||l)?R(s,c):I(o,(0,M._)(a||(a=C(["[","]"])),c))},t.reportExtraError=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.keywordError,r=arguments.length>2?arguments[2]:void 0,i=e.it,o=i.gen,a=i.compositeRule,s=i.allErrors,u=N(e,n,r);R(o,u),a||s||I(i,P.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(P.default.errors,t),e.if((0,M._)(s||(s=C([""," !== null"])),P.default.vErrors),(function(){return e.if(t,(function(){return e.assign((0,M._)(u||(u=C(["",".length"])),P.default.vErrors),t)}),(function(){return e.assign(P.default.vErrors,null)}))}))},t.extendErrors=function(e){var t=e.gen,n=e.keyword,r=e.schemaValue,i=e.data,o=e.errsCount,a=e.it;if(void 0===o)throw new Error("ajv implementation error");var s=t.name("err");t.forRange("i",o,P.default.errors,(function(e){t.const(s,(0,M._)(l||(l=C(["","[","]"])),P.default.vErrors,e)),t.if((0,M._)(c||(c=C(["",".instancePath === undefined"])),s),(function(){return t.assign((0,M._)(f||(f=C(["",".instancePath"])),s),(0,M.strConcat)(P.default.instancePath,a.errorPath))})),t.assign((0,M._)(h||(h=C(["",".schemaPath"])),s),(0,M.str)(d||(d=C(["","/",""])),a.errSchemaPath,n)),a.opts.verbose&&(t.assign((0,M._)(p||(p=C(["",".schema"])),s),r),t.assign((0,M._)(v||(v=C(["",".data"])),s),i))}))};var L={keyword:new M.Name("keyword"),schemaPath:new M.Name("schemaPath"),params:new M.Name("params"),propertyName:new M.Name("propertyName"),message:new M.Name("message"),schema:new M.Name("schema"),parentSchema:new M.Name("parentSchema")};function N(e,t,n){return!1===e.it.createErrors?(0,M._)(w||(w=C(["{}"]))):function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.gen,i=[j(e.it,n),D(e,n)];return B(e,t,i),r.object.apply(r,i)}(e,t,n)}function j(e,t){var n=e.errorPath,r=t.instancePath,i=r?(0,M.str)(S||(S=C(["","",""])),n,(0,T.getErrorPath)(r,T.Type.Str)):n;return[P.default.instancePath,(0,M.strConcat)(P.default.instancePath,i)]}function D(e,t){var n=e.keyword,r=e.it.errSchemaPath,i=t.schemaPath,o=t.parentSchema?r:(0,M.str)(E||(E=C(["","/",""])),r,n);return i&&(o=(0,M.str)(k||(k=C(["","",""])),o,(0,T.getErrorPath)(i,T.Type.Str))),[L.schemaPath,o]}function B(e,t,n){var r=t.params,i=t.message,o=e.keyword,a=e.data,s=e.schemaValue,u=e.it,l=u.opts,c=u.propertyName,f=u.topSchemaRef,h=u.schemaPath;n.push([L.keyword,o],[L.params,"function"==typeof r?r(e):r||(0,M._)(O||(O=C(["{}"])))]),l.messages&&n.push([L.message,"function"==typeof i?i(e):i]),l.verbose&&n.push([L.schema,s],[L.parentSchema,(0,M._)(A||(A=C(["","",""])),f,h)],[P.default.data,a]),c&&n.push([L.propertyName,c])}},8993:function(e,t,n){"use strict";var r,i,o=n(35724).default,a=n(61874).default,s=n(47857).default,u=n(30437).default;Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;var l=n(17641),c=n(81894),f=n(43948),h=n(58009),d=n(73697),p=n(99723),v=s((function e(t){var n,r;u(this,e),this.refs={},this.dynamicAnchors={},"object"==typeof t.schema&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=null!==(n=t.baseId)&&void 0!==n?n:(0,h.normalizeId)(null===r||void 0===r?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=null===r||void 0===r?void 0:r.$async,this.refs={}}));function m(e){var t=y.call(this,e);if(t)return t;var n,o=(0,h.getFullPath)(this.opts.uriResolver,e.root.baseId),s=this.opts.code,u=s.es5,d=s.lines,v=this.opts.ownProperties,m=new l.CodeGen(this.scope,{es5:u,lines:d,ownProperties:v});e.$async&&(n=m.scopeValue("Error",{ref:c.default,code:(0,l._)(r||(r=a(['require("ajv/dist/runtime/validation_error").default'])))}));var g=m.scopeName("validate");e.validateName=g;var b,x={gen:m,allErrors:this.opts.allErrors,data:f.default.data,parentData:f.default.parentData,parentDataProperty:f.default.parentDataProperty,dataNames:[f.default.data],dataPathArr:[l.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:m.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,l.stringify)(e.schema)}:{ref:e.schema}),validateName:g,ValidationError:n,schema:e.schema,schemaEnv:e,rootId:o,baseId:e.baseId||o,schemaPath:l.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,l._)(i||(i=a(['""']))),opts:this.opts,self:this};try{this._compilations.add(e),(0,p.validateFunctionCode)(x),m.optimize(this.opts.code.optimize);var _=m.toString();b="".concat(m.scopeRefs(f.default.scope),"return ").concat(_),this.opts.code.process&&(b=this.opts.code.process(b,e));var w=new Function("".concat(f.default.self),"".concat(f.default.scope),b)(this,this.scope.get());if(this.scope.value(g,{ref:w}),w.errors=null,w.schema=e.schema,w.schemaEnv=e,e.$async&&(w.$async=!0),!0===this.opts.code.source&&(w.source={validateName:g,validateCode:_,scopeValues:m._values}),this.opts.unevaluated){var S=x.props,E=x.items;w.evaluated={props:S instanceof l.Name?void 0:S,items:E instanceof l.Name?void 0:E,dynamicProps:S instanceof l.Name,dynamicItems:E instanceof l.Name},w.source&&(w.source.evaluated=(0,l.stringify)(w.evaluated))}return e.validate=w,e}catch(k){throw delete e.validate,delete e.validateName,b&&this.logger.error("Error compiling schema, function code:",b),k}finally{this._compilations.delete(e)}}function g(e){return(0,h.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:m.call(this,e)}function y(e){var t,n,r,i=o(this._compilations);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(r=e,(n=a).schema===r.schema&&n.root===r.root&&n.baseId===r.baseId)return a}}catch(s){i.e(s)}finally{i.f()}}function b(e,t){for(var n;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||x.call(this,e,t)}function x(e,t){var n=this.opts.uriResolver.parse(t),r=(0,h._getFullPath)(this.opts.uriResolver,n),i=(0,h.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return w.call(this,n,e);var o=(0,h.normalizeId)(r),a=this.refs[o]||this.schemas[o];if("string"==typeof a){var s=x.call(this,e,a);if("object"!==typeof(null===s||void 0===s?void 0:s.schema))return;return w.call(this,n,s)}if("object"===typeof(null===a||void 0===a?void 0:a.schema)){if(a.validate||m.call(this,a),o===(0,h.normalizeId)(t)){var u=a.schema,l=this.opts.schemaId,c=u[l];return c&&(i=(0,h.resolveUrl)(this.opts.uriResolver,i,c)),new v({schema:u,schemaId:l,root:e,baseId:i})}return w.call(this,n,a)}}t.SchemaEnv=v,t.compileSchema=m,t.resolveRef=function(e,t,n){var r;n=(0,h.resolveUrl)(this.opts.uriResolver,t,n);var i=e.refs[n];if(i)return i;var o=b.call(this,e,n);if(void 0===o){var a=null===(r=e.localRefs)||void 0===r?void 0:r[n],s=this.opts.schemaId;a&&(o=new v({schema:a,schemaId:s,root:e,baseId:t}))}return void 0!==o?e.refs[n]=g.call(this,o):void 0},t.getCompilingSchema=y,t.resolveSchema=x;var _=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function w(e,t){var n,r=t.baseId,i=t.schema,a=t.root;if("/"===(null===(n=e.fragment)||void 0===n?void 0:n[0])){var s,u,l=o(e.fragment.slice(1).split("/"));try{for(l.s();!(s=l.n()).done;){var c=s.value;if("boolean"===typeof i)return;var f=i[(0,d.unescapeFragment)(c)];if(void 0===f)return;var p="object"===typeof(i=f)&&i[this.opts.schemaId];!_.has(c)&&p&&(r=(0,h.resolveUrl)(this.opts.uriResolver,r,p))}}catch(y){l.e(y)}finally{l.f()}if("boolean"!=typeof i&&i.$ref&&!(0,d.schemaHasRulesButRef)(i,this.RULES)){var m=(0,h.resolveUrl)(this.opts.uriResolver,r,i.$ref);u=x.call(this,a,m)}var g=this.opts.schemaId;return(u=u||new v({schema:i,schemaId:g,root:a,baseId:r})).schema!==u.root.schema?u:void 0}}},43948:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17641),i={data:new r.Name("data"),valCxt:new r.Name("valCxt"),instancePath:new r.Name("instancePath"),parentData:new r.Name("parentData"),parentDataProperty:new r.Name("parentDataProperty"),rootData:new r.Name("rootData"),dynamicAnchors:new r.Name("dynamicAnchors"),vErrors:new r.Name("vErrors"),errors:new r.Name("errors"),this:new r.Name("this"),self:new r.Name("self"),scope:new r.Name("scope"),json:new r.Name("json"),jsonPos:new r.Name("jsonPos"),jsonLen:new r.Name("jsonLen"),jsonPart:new r.Name("jsonPart")};t.default=i},55559:function(e,t,n){"use strict";var r=n(47857).default,i=n(30437).default,o=n(41490).default,a=n(54758).default,s=n(70391).default;Object.defineProperty(t,"__esModule",{value:!0});var u=n(58009),l=function(e){o(n,e);var t=a(n);function n(e,r,o,a){var s;return i(this,n),(s=t.call(this,a||"can't resolve reference ".concat(o," from id ").concat(r))).missingRef=(0,u.resolveUrl)(e,r,o),s.missingSchema=(0,u.normalizeId)((0,u.getFullPath)(e,s.missingRef)),s}return r(n)}(s(Error));t.default=l},58009:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;var r=n(73697),i=n(54229),o=n(86357),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return"boolean"==typeof e||(!0===t?!u(e):!!t&&l(e)<=t)};var s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function u(e){for(var t in e){if(s.has(t))return!0;var n=e[t];if(Array.isArray(n)&&n.some(u))return!0;if("object"==typeof n&&u(n))return!0}return!1}function l(e){var t=0;for(var n in e){if("$ref"===n)return 1/0;if(t++,!a.has(n)&&("object"==typeof e[n]&&(0,r.eachItem)(e[n],(function(e){return t+=l(e)})),t===1/0))return 1/0}return t}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;!1!==n&&(t=d(t));var r=e.parse(t);return f(e,r)}function f(e,t){return e.serialize(t).split("#")[0]+"#"}t.getFullPath=c,t._getFullPath=f;var h=/#\/?$/;function d(e){return e?e.replace(h,""):""}t.normalizeId=d,t.resolveUrl=function(e,t,n){return n=d(n),e.resolve(t,n)};var p=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e,t){var n=this;if("boolean"==typeof e)return{};var r=this.opts,a=r.schemaId,s=r.uriResolver,u=d(e[a]||t),l={"":u},f=c(s,u,!1),h={},v=new Set;return o(e,{allKeys:!0},(function(e,t,r,i){if(void 0!==i){var o=f+t,s=l[i];"string"==typeof e[a]&&(s=u.call(n,e[a])),c.call(n,e.$anchor),c.call(n,e.$dynamicAnchor),l[t]=s}function u(t){var n=this.opts.uriResolver.resolve;if(t=d(s?n(s,t):t),v.has(t))throw g(t);v.add(t);var r=this.refs[t];return"string"==typeof r&&(r=this.refs[r]),"object"==typeof r?m(e,r.schema,t):t!==d(o)&&("#"===t[0]?(m(e,h[t],t),h[t]=e):this.refs[t]=o),t}function c(e){if("string"==typeof e){if(!p.test(e))throw new Error('invalid anchor "'.concat(e,'"'));u.call(this,"#".concat(e))}}})),h;function m(e,t,n){if(void 0!==t&&!i(e,t))throw g(n)}function g(e){return new Error('reference "'.concat(e,'" resolves to more than one schema'))}}},18920:function(e,t,n){"use strict";var r=n(93621).default;Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;var i=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&i.has(e)},t.getRules=function(){var e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:r(r({},e),{},{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},73697:function(e,t,n){"use strict";var r,i,o,a,s,u,l,c,f,h,d,p,v,m,g,y,b,x,_=n(93621).default,w=n(61874).default,S=n(35724).default;Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;var E=n(17641),k=n(77598);function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema,n=e.opts,r=e.self;if(n.strictSchema&&"boolean"!==typeof t){var i=r.RULES.keywords;for(var o in t)i[o]||N(e,'unknown keyword: "'.concat(o,'"'))}}function A(e,t){if("boolean"==typeof e)return!e;for(var n in e)if(t[n])return!0;return!1}function C(e){return"number"==typeof e?"".concat(e):e.replace(/~/g,"~0").replace(/\//g,"~1")}function M(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function T(e){var t=e.mergeNames,n=e.mergeToName,r=e.mergeValues,i=e.resultToName;return function(e,o,a,s){var u=void 0===a?o:a instanceof E.Name?(o instanceof E.Name?t(e,o,a):n(e,o,a),a):o instanceof E.Name?(n(e,a,o),o):r(o,a);return s!==E.Name||u instanceof E.Name?u:i(e,u)}}function P(e,t){if(!0===t)return e.var("props",!0);var n=e.var("props",(0,E._)(v||(v=w(["{}"]))));return void 0!==t&&R(e,n,t),n}function R(e,t,n){Object.keys(n).forEach((function(n){return e.assign((0,E._)(m||(m=w(["","",""])),t,(0,E.getProperty)(n)),!0)}))}t.toHash=function(e){var t,n={},r=S(e);try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(O(e,t),!A(t,e.self.RULES.all))},t.checkUnknownRules=O,t.schemaHasRules=A,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(var n in e)if("$ref"!==n&&t.all[n])return!0;return!1},t.schemaRefOrVal=function(e,t,n,o){var a=e.topSchemaRef,s=e.schemaPath;if(!o){if("number"==typeof t||"boolean"==typeof t)return t;if("string"==typeof t)return(0,E._)(r||(r=w(["",""])),t)}return(0,E._)(i||(i=w(["","","",""])),a,s,(0,E.getProperty)(n))},t.unescapeFragment=function(e){return M(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(C(e))},t.escapeJsonPointer=C,t.unescapeJsonPointer=M,t.eachItem=function(e,t){if(Array.isArray(e)){var n,r=S(e);try{for(r.s();!(n=r.n()).done;){t(n.value)}}catch(i){r.e(i)}finally{r.f()}}else t(e)},t.mergeEvaluated={props:T({mergeNames:function(e,t,n){return e.if((0,E._)(o||(o=w([""," !== true && "," !== undefined"])),n,t),(function(){e.if((0,E._)(a||(a=w([""," === true"])),t),(function(){return e.assign(n,!0)}),(function(){return e.assign(n,(0,E._)(s||(s=w([""," || {}"])),n)).code((0,E._)(u||(u=w(["Object.assign(",", ",")"])),n,t))}))}))},mergeToName:function(e,t,n){return e.if((0,E._)(l||(l=w([""," !== true"])),n),(function(){!0===t?e.assign(n,!0):(e.assign(n,(0,E._)(c||(c=w([""," || {}"])),n)),R(e,n,t))}))},mergeValues:function(e,t){return!0===e||_(_({},e),t)},resultToName:P}),items:T({mergeNames:function(e,t,n){return e.if((0,E._)(f||(f=w([""," !== true && "," !== undefined"])),n,t),(function(){return e.assign(n,(0,E._)(h||(h=w([""," === true ? true : "," > "," ? "," : ",""])),t,n,t,n,t))}))},mergeToName:function(e,t,n){return e.if((0,E._)(d||(d=w([""," !== true"])),n),(function(){return e.assign(n,!0===t||(0,E._)(p||(p=w([""," > "," ? "," : ",""])),n,t,n,t))}))},mergeValues:function(e,t){return!0===e||Math.max(e,t)},resultToName:function(e,t){return e.var("items",t)}})},t.evaluatedPropsToName=P,t.setEvaluated=R;var I,L={};function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.opts.strictSchema;if(n){if(t="strict mode: ".concat(t),!0===n)throw new Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:L[t.code]||(L[t.code]=new k._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(I=t.Type||(t.Type={})),t.getErrorPath=function(e,t,n){if(e instanceof E.Name){var r=t===I.Num;return n?r?(0,E._)(g||(g=w(['"[" + ',' + "]"'])),e):(0,E._)(y||(y=w(['"[\'" + ',' + "\']"'])),e):r?(0,E._)(b||(b=w(['"/" + ',""])),e):(0,E._)(x||(x=w(['"/" + ','.replace(/~/g, "~0").replace(/\\//g, "~1")'],['"/" + ','.replace(/~/g, "~0").replace(/\\\\//g, "~1")'])),e)}return n?(0,E.getProperty)(e).toString():"/"+C(e)},t.checkStrictMode=N},89597:function(e,t){"use strict";function n(e,t){return t.rules.some((function(t){return r(e,t)}))}function r(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some((function(t){return void 0!==e[t]})))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function(e,t){var r=e.schema,i=e.self.RULES.types[t];return i&&!0!==i&&n(r,i)},t.shouldUseGroup=n,t.shouldUseRule=r},3994:function(e,t,n){"use strict";var r,i=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;var o=n(79601),a=n(17641),s=n(43948),u={message:"boolean schema is false"};function l(e,t){var n={gen:e.gen,keyword:"false schema",data:e.data,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,o.reportError)(n,u,void 0,t)}t.topBoolOrEmptySchema=function(e){var t=e.gen,n=e.schema,o=e.validateName;!1===n?l(e,!1):"object"==typeof n&&!0===n.$async?t.return(s.default.data):(t.assign((0,a._)(r||(r=i(["",".errors"])),o),null),t.return(!0))},t.boolOrEmptySchema=function(e,t){var n=e.gen;!1===e.schema?(n.var(t,!1),l(e)):n.var(t,!0)}},5286:function(e,t,n){"use strict";var r,i,o,a,s,u,l,c,f,h,d,p,v,m,g,y,b,x,_,w,S,E,k,O,A,C,M,T,P,R,I,L,N,j=n(35724).default,D=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;var B,z=n(18920),F=n(89597),V=n(79601),U=n(17641),Z=n(73697);function H(e){var t=Array.isArray(e)?e:e?[e]:[];if(t.every(z.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(B=t.DataType||(t.DataType={})),t.getSchemaTypes=function(e){var t=H(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=H,t.coerceAndCheckDataType=function(e,t){var n=e.gen,k=e.data,O=e.opts,A=function(e,t){return t?e.filter((function(e){return G.has(e)||"array"===t&&"array"===e})):[]}(t,O.coerceTypes),C=t.length>0&&!(0===A.length&&1===t.length&&(0,F.schemaHasRulesForType)(e,t[0]));if(C){var M=q(t,k,O.strictNumbers,B.Wrong);n.if(M,(function(){A.length?function(e,t,n){var k=e.gen,O=e.data,A=e.opts,C=k.let("dataType",(0,U._)(r||(r=D(["typeof ",""])),O)),M=k.let("coerced",(0,U._)(i||(i=D(["undefined"]))));"array"===A.coerceTypes&&k.if((0,U._)(o||(o=D([""," == 'object' && Array.isArray(",") && ",".length == 1"])),C,O,O),(function(){return k.assign(O,(0,U._)(a||(a=D(["","[0]"])),O)).assign(C,(0,U._)(s||(s=D(["typeof ",""])),O)).if(q(t,O,A.strictNumbers),(function(){return k.assign(M,O)}))}));k.if((0,U._)(u||(u=D([""," !== undefined"])),M));var T,P=j(n);try{for(P.s();!(T=P.n()).done;){var R=T.value;(G.has(R)||"array"===R&&"array"===A.coerceTypes)&&I(R)}}catch(L){P.e(L)}finally{P.f()}function I(e){switch(e){case"string":return void k.elseIf((0,U._)(c||(c=D(["",' == "number" || ',' == "boolean"'])),C,C)).assign(M,(0,U._)(f||(f=D(['"" + ',""])),O)).elseIf((0,U._)(h||(h=D([""," === null"])),O)).assign(M,(0,U._)(d||(d=D(['""']))));case"number":return void k.elseIf((0,U._)(p||(p=D(["",' == "boolean" || '," === null\n              || (",' == "string" && '," && "," == +",")"])),C,O,C,O,O,O)).assign(M,(0,U._)(v||(v=D(["+",""])),O));case"integer":return void k.elseIf((0,U._)(m||(m=D(["",' === "boolean" || '," === null\n              || (",' === "string" && '," && "," == +"," && !("," % 1))"])),C,O,C,O,O,O,O)).assign(M,(0,U._)(g||(g=D(["+",""])),O));case"boolean":return void k.elseIf((0,U._)(y||(y=D(["",' === "false" || '," === 0 || "," === null"])),O,O,O)).assign(M,!1).elseIf((0,U._)(b||(b=D(["",' === "true" || '," === 1"])),O,O)).assign(M,!0);case"null":return k.elseIf((0,U._)(x||(x=D(["",' === "" || '," === 0 || "," === false"])),O,O,O)),void k.assign(M,null);case"array":k.elseIf((0,U._)(_||(_=D(["",' === "string" || ',' === "number"\n              || ',' === "boolean" || '," === null"])),C,C,C,O)).assign(M,(0,U._)(w||(w=D(["[","]"])),O))}}k.else(),Y(e),k.endIf(),k.if((0,U._)(l||(l=D([""," !== undefined"])),M),(function(){k.assign(O,M),function(e,t){var n=e.gen,r=e.parentData,i=e.parentDataProperty;n.if((0,U._)(S||(S=D([""," !== undefined"])),r),(function(){return n.assign((0,U._)(E||(E=D(["","[","]"])),r,i),t)}))}(e,M)}))}(e,t,A):Y(e)}))}return C};var G=new Set(["string","number","integer","boolean","null"]);function W(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B.Correct,o=i===B.Correct?U.operators.EQ:U.operators.NEQ;switch(e){case"null":return(0,U._)(k||(k=D([""," "," null"])),t,o);case"array":r=(0,U._)(O||(O=D(["Array.isArray(",")"])),t);break;case"object":r=(0,U._)(A||(A=D([""," && typeof ",' == "object" && !Array.isArray(',")"])),t,t,t);break;case"integer":r=a((0,U._)(C||(C=D(["!("," % 1) && !isNaN(",")"])),t,t));break;case"number":r=a();break;default:return(0,U._)(M||(M=D(["typeof "," "," ",""])),t,o,e)}return i===B.Correct?r:(0,U.not)(r);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U.nil;return(0,U.and)((0,U._)(T||(T=D(["typeof ",' == "number"'])),t),e,n?(0,U._)(P||(P=D(["isFinite(",")"])),t):U.nil)}}function q(e,t,n,r){if(1===e.length)return W(e[0],t,n,r);var i,o=(0,Z.toHash)(e);if(o.array&&o.object){var a=(0,U._)(R||(R=D(["typeof ",' != "object"'])),t);i=o.null?a:(0,U._)(I||(I=D(["!"," || ",""])),t,a),delete o.null,delete o.array,delete o.object}else i=U.nil;for(var s in o.number&&delete o.integer,o)i=(0,U.and)(i,W(s,t,n,r));return i}t.checkDataType=W,t.checkDataTypes=q;var K={message:function(e){var t=e.schema;return"must be ".concat(t)},params:function(e){var t=e.schema,n=e.schemaValue;return"string"==typeof t?(0,U._)(L||(L=D(["{type: ","}"])),t):(0,U._)(N||(N=D(["{type: ","}"])),n)}};function Y(e){var t=function(e){var t=e.gen,n=e.data,r=e.schema,i=(0,Z.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}(e);(0,V.reportError)(t,K)}t.reportTypeError=Y},65228:function(e,t,n){"use strict";var r,i,o,a,s=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;var u=n(17641),l=n(73697);function c(e,t,n){var c=e.gen,f=e.compositeRule,h=e.data,d=e.opts;if(void 0!==n){var p=(0,u._)(r||(r=s(["","",""])),h,(0,u.getProperty)(t));if(f)(0,l.checkStrictMode)(e,"default is ignored for: ".concat(p));else{var v=(0,u._)(i||(i=s([""," === undefined"])),p);"empty"===d.useDefaults&&(v=(0,u._)(o||(o=s([""," || "," === null || ",' === ""'])),v,p,p)),c.if(v,(0,u._)(a||(a=s([""," = ",""])),p,(0,u.stringify)(n)))}}}t.assignDefaults=function(e,t){var n=e.schema,r=n.properties,i=n.items;if("object"===t&&r)for(var o in r)c(e,o,r[o].default);else"array"===t&&Array.isArray(i)&&i.forEach((function(t,n){return c(e,n,t.default)}))}},99723:function(e,t,n){"use strict";var r,i,o,a,s,u,l,c,f,h,d,p,v,m,g,y,b,x,_,w,S,E,k,O,A,C,M,T,P,R,I,L,N,j,D,B,z,F,V,U=n(93621).default,Z=n(30437).default,H=n(47857).default,G=n(35724).default,W=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;var q=n(3994),K=n(5286),Y=n(89597),X=n(5286),$=n(65228),J=n(57971),Q=n(69206),ee=n(17641),te=n(43948),ne=n(58009),re=n(73697),ie=n(79601);function oe(e,t){var n=e.gen,g=e.validateName,y=e.schema,b=e.schemaEnv,x=e.opts;x.code.es5?n.func(g,(0,ee._)(r||(r=W(["",", ",""])),te.default.data,te.default.valCxt),b.$async,(function(){n.code((0,ee._)(i||(i=W(['"use strict"; ',""])),ae(y,x))),function(e,t){e.if(te.default.valCxt,(function(){e.var(te.default.instancePath,(0,ee._)(u||(u=W(["",".",""])),te.default.valCxt,te.default.instancePath)),e.var(te.default.parentData,(0,ee._)(l||(l=W(["",".",""])),te.default.valCxt,te.default.parentData)),e.var(te.default.parentDataProperty,(0,ee._)(c||(c=W(["",".",""])),te.default.valCxt,te.default.parentDataProperty)),e.var(te.default.rootData,(0,ee._)(f||(f=W(["",".",""])),te.default.valCxt,te.default.rootData)),t.dynamicRef&&e.var(te.default.dynamicAnchors,(0,ee._)(h||(h=W(["",".",""])),te.default.valCxt,te.default.dynamicAnchors))}),(function(){e.var(te.default.instancePath,(0,ee._)(d||(d=W(['""'])))),e.var(te.default.parentData,(0,ee._)(p||(p=W(["undefined"])))),e.var(te.default.parentDataProperty,(0,ee._)(v||(v=W(["undefined"])))),e.var(te.default.rootData,te.default.data),t.dynamicRef&&e.var(te.default.dynamicAnchors,(0,ee._)(m||(m=W(["{}"]))))}))}(n,x),n.code(t)})):n.func(g,(0,ee._)(o||(o=W(["",", ",""])),te.default.data,function(e){return(0,ee._)(a||(a=W(["{",'="", ',", ",", ","=","","}={}"])),te.default.instancePath,te.default.parentData,te.default.parentDataProperty,te.default.rootData,te.default.data,e.dynamicRef?(0,ee._)(s||(s=W([", ","={}"])),te.default.dynamicAnchors):ee.nil)}(x)),b.$async,(function(){return n.code(ae(y,x)).code(t)}))}function ae(e,t){var n="object"==typeof e&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,ee._)(E||(E=W(["/*# sourceURL="," */"])),n):ee.nil}function se(e,t){le(e)&&(ce(e),ue(e))?function(e,t){var n=e.schema,r=e.gen;e.opts.$comment&&n.$comment&&he(e);(function(e){var t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,ne.resolveUrl)(e.opts.uriResolver,e.baseId,t))})(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);var i=r.const("_errs",te.default.errors);fe(e,i),r.var(t,(0,ee._)(k||(k=W([""," === ",""])),i,te.default.errors))}(e,t):(0,q.boolOrEmptySchema)(e,t)}function ue(e){var t=e.schema,n=e.self;if("boolean"==typeof t)return!t;for(var r in t)if(n.RULES.all[r])return!0;return!1}function le(e){return"boolean"!=typeof e.schema}function ce(e){(0,re.checkUnknownRules)(e),function(e){var t=e.schema,n=e.errSchemaPath,r=e.opts,i=e.self;t.$ref&&r.ignoreKeywordsWithRef&&(0,re.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn('$ref: keywords ignored in schema at path "'.concat(n,'"'))}(e)}function fe(e,t){if(e.opts.jtd)return de(e,[],!1,t);var n=(0,K.getSchemaTypes)(e.schema);de(e,n,!(0,K.coerceAndCheckDataType)(e,n),t)}function he(e){var t=e.gen,n=e.schemaEnv,r=e.schema,i=e.errSchemaPath,o=e.opts,a=r.$comment;if(!0===o.$comment)t.code((0,ee._)(O||(O=W(["",".logger.log(",")"])),te.default.self,a));else if("function"==typeof o.$comment){var s=(0,ee.str)(A||(A=W(["","/$comment"])),i),u=t.scopeValue("root",{ref:n.root});t.code((0,ee._)(C||(C=W(["",".opts.$comment(",", ",", ",".schema)"])),te.default.self,a,s,u))}}function de(e,t,n,r){var i=e.gen,o=e.schema,a=e.data,s=e.allErrors,u=e.opts,l=e.self.RULES;function c(l){(0,Y.shouldUseGroup)(o,l)&&(l.type?(i.if((0,X.checkDataType)(l.type,a,u.strictNumbers)),pe(e,l),1===t.length&&t[0]===l.type&&n&&(i.else(),(0,X.reportTypeError)(e)),i.endIf()):pe(e,l),s||i.if((0,ee._)(N||(N=W([""," === ",""])),te.default.errors,r||0)))}!o.$ref||!u.ignoreKeywordsWithRef&&(0,re.schemaHasRulesButRef)(o,l)?(u.jtd||function(e,t){if(e.schemaEnv.meta||!e.opts.strictTypes)return;(function(e,t){if(!t.length)return;if(!e.dataTypes.length)return void(e.dataTypes=t);t.forEach((function(t){me(e.dataTypes,t)||ge(e,'type "'.concat(t,'" not allowed by context "').concat(e.dataTypes.join(","),'"'))})),e.dataTypes=e.dataTypes.filter((function(e){return me(t,e)}))})(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&ge(e,"use allowUnionTypes to allow union type keyword")}(e,t);!function(e,t){var n=e.self.RULES.all;for(var r in n){var i=n[r];if("object"==typeof i&&(0,Y.shouldUseRule)(e.schema,i)){var o=i.definition.type;o.length&&!o.some((function(e){return ve(t,e)}))&&ge(e,'missing type "'.concat(o.join(","),'" for keyword "').concat(r,'"'))}}}(e,e.dataTypes)}(e,t),i.block((function(){var e,t=G(l.rules);try{for(t.s();!(e=t.n()).done;){c(e.value)}}catch(n){t.e(n)}finally{t.f()}c(l.post)}))):i.block((function(){return be(e,"$ref",l.all.$ref.definition)}))}function pe(e,t){var n=e.gen,r=e.schema;e.opts.useDefaults&&(0,$.assignDefaults)(e,t.type),n.block((function(){var n,i=G(t.rules);try{for(i.s();!(n=i.n()).done;){var o=n.value;(0,Y.shouldUseRule)(r,o)&&be(e,o.keyword,o.definition,t.type)}}catch(a){i.e(a)}finally{i.f()}}))}function ve(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function me(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function ge(e,t){var n=e.schemaEnv.baseId+e.errSchemaPath;t+=' at "'.concat(n,'" (strictTypes)'),(0,re.checkStrictMode)(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){le(e)&&(ce(e),ue(e))?function(e){var t=e.schema,n=e.opts,r=e.gen;oe(e,(function(){n.$comment&&t.$comment&&he(e),function(e){var t=e.schema,n=e.opts;void 0!==t.default&&n.useDefaults&&n.strictSchema&&(0,re.checkStrictMode)(e,"default is ignored in the schema root")}(e),r.let(te.default.vErrors,null),r.let(te.default.errors,0),n.unevaluated&&function(e){var t=e.gen,n=e.validateName;e.evaluated=t.const("evaluated",(0,ee._)(g||(g=W(["",".evaluated"])),n)),t.if((0,ee._)(y||(y=W(["",".dynamicProps"])),e.evaluated),(function(){return t.assign((0,ee._)(b||(b=W(["",".props"])),e.evaluated),(0,ee._)(x||(x=W(["undefined"]))))})),t.if((0,ee._)(_||(_=W(["",".dynamicItems"])),e.evaluated),(function(){return t.assign((0,ee._)(w||(w=W(["",".items"])),e.evaluated),(0,ee._)(S||(S=W(["undefined"]))))}))}(e),fe(e),function(e){var t=e.gen,n=e.schemaEnv,r=e.validateName,i=e.ValidationError,o=e.opts;n.$async?t.if((0,ee._)(M||(M=W([""," === 0"])),te.default.errors),(function(){return t.return(te.default.data)}),(function(){return t.throw((0,ee._)(T||(T=W(["new ","(",")"])),i,te.default.vErrors))})):(t.assign((0,ee._)(P||(P=W(["",".errors"])),r),te.default.vErrors),o.unevaluated&&function(e){var t=e.gen,n=e.evaluated,r=e.props,i=e.items;r instanceof ee.Name&&t.assign((0,ee._)(I||(I=W(["",".props"])),n),r);i instanceof ee.Name&&t.assign((0,ee._)(L||(L=W(["",".items"])),n),i)}(e),t.return((0,ee._)(R||(R=W([""," === 0"])),te.default.errors)))}(e)}))}(e):oe(e,(function(){return(0,q.topBoolOrEmptySchema)(e)}))};var ye=function(){function e(t,n,r){if(Z(this,e),(0,J.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,re.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",we(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,J.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error("".concat(r," value must be ").concat(JSON.stringify(n.schemaType)));("code"in n?n.trackErrors:!1!==n.errors)&&(this.errsCount=t.gen.const("_errs",te.default.errors))}return H(e,[{key:"result",value:function(e,t,n){this.failResult((0,ee.not)(e),t,n)}},{key:"failResult",value:function(e,t,n){this.gen.if(e),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}},{key:"pass",value:function(e,t){this.failResult((0,ee.not)(e),void 0,t)}},{key:"fail",value:function(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}},{key:"fail$data",value:function(e){if(!this.$data)return this.fail(e);var t=this.schemaCode;this.fail((0,ee._)(j||(j=W([""," !== undefined && (",")"])),t,(0,ee.or)(this.invalid$data(),e)))}},{key:"error",value:function(e,t,n){if(t)return this.setParams(t),this._error(e,n),void this.setParams({});this._error(e,n)}},{key:"_error",value:function(e,t){(e?ie.reportExtraError:ie.reportError)(this,this.def.error,t)}},{key:"$dataError",value:function(){(0,ie.reportError)(this,this.def.$dataError||ie.keyword$DataError)}},{key:"reset",value:function(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,ie.resetErrorsCount)(this.gen,this.errsCount)}},{key:"ok",value:function(e){this.allErrors||this.gen.if(e)}},{key:"setParams",value:function(e,t){t?Object.assign(this.params,e):this.params=e}},{key:"block$data",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ee.nil;this.gen.block((function(){n.check$data(e,r),t()}))}},{key:"check$data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee.nil,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ee.nil;if(this.$data){var n=this.gen,r=this.schemaCode,i=this.schemaType,o=this.def;n.if((0,ee.or)((0,ee._)(D||(D=W([""," === undefined"])),r),t)),e!==ee.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==ee.nil&&n.assign(e,!1)),n.else()}}},{key:"invalid$data",value:function(){var e=this.gen,t=this.schemaCode,n=this.schemaType,r=this.def,i=this.it;return(0,ee.or)(function(){if(n.length){if(!(t instanceof ee.Name))throw new Error("ajv implementation error");var e=Array.isArray(n)?n:[n];return(0,ee._)(B||(B=W(["",""])),(0,X.checkDataTypes)(e,t,i.opts.strictNumbers,X.DataType.Wrong))}return ee.nil}(),function(){if(r.validateSchema){var n=e.scopeValue("validate$data",{ref:r.validateSchema});return(0,ee._)(z||(z=W(["!","(",")"])),n,t)}return ee.nil}())}},{key:"subschema",value:function(e,t){var n=(0,Q.getSubschema)(this.it,e);(0,Q.extendSubschemaData)(n,this.it,e),(0,Q.extendSubschemaMode)(n,e);var r=U(U(U({},this.it),n),{},{items:void 0,props:void 0});return se(r,t),r}},{key:"mergeEvaluated",value:function(e,t){var n=this.it,r=this.gen;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=re.mergeEvaluated.props(r,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=re.mergeEvaluated.items(r,e.items,n.items,t)))}},{key:"mergeValidEvaluated",value:function(e,t){var n=this,r=this.it,i=this.gen;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return i.if(t,(function(){return n.mergeEvaluated(e,ee.Name)})),!0}}]),e}();function be(e,t,n,r){var i=new ye(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,J.funcKeywordCode)(i,n):"macro"in n?(0,J.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,J.funcKeywordCode)(i,n)}t.KeywordCxt=ye;var xe=/^\/(?:[^~]|~0|~1)*$/,_e=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function we(e,t){var n,r,i=t.dataLevel,o=t.dataNames,a=t.dataPathArr;if(""===e)return te.default.rootData;if("/"===e[0]){if(!xe.test(e))throw new Error("Invalid JSON-pointer: ".concat(e));n=e,r=te.default.rootData}else{var s=_e.exec(e);if(!s)throw new Error("Invalid JSON-pointer: ".concat(e));var u=+s[1];if("#"===(n=s[2])){if(u>=i)throw new Error(p("property/index",u));return a[i-u]}if(u>i)throw new Error(p("data",u));if(r=o[i-u],!n)return r}var l,c=r,f=n.split("/"),h=G(f);try{for(h.s();!(l=h.n()).done;){var d=l.value;d&&(r=(0,ee._)(F||(F=W(["","",""])),r,(0,ee.getProperty)((0,re.unescapeJsonPointer)(d))),c=(0,ee._)(V||(V=W([""," && ",""])),c,r))}}catch(v){h.e(v)}finally{h.f()}return c;function p(e,t){return"Cannot access ".concat(e," ").concat(t," levels up, current level is ").concat(i)}}t.getData=we},57971:function(e,t,n){"use strict";var r,i,o,a,s,u,l,c,f,h,d=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;var p=n(17641),v=n(43948),m=n(54965),g=n(79601);function y(e){var t=e.gen,n=e.data,r=e.it;t.if(r.parentData,(function(){return t.assign(n,(0,p._)(l||(l=d(["","[","]"])),r.parentData,r.parentDataProperty))}))}function b(e,t,n){if(void 0===n)throw new Error('keyword "'.concat(t,'" failed to compile'));return e.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:(0,p.stringify)(n)})}t.macroKeywordCode=function(e,t){var n=e.gen,r=e.keyword,i=e.schema,o=e.parentSchema,a=e.it,s=t.macro.call(a.self,i,o,a),u=b(n,r,s);!1!==a.opts.validateSchema&&a.self.validateSchema(s,!0);var l=n.name("valid");e.subschema({schema:s,schemaPath:p.nil,errSchemaPath:"".concat(a.errSchemaPath,"/").concat(r),topSchemaRef:u,compositeRule:!0},l),e.pass(l,(function(){return e.error(!0)}))},t.funcKeywordCode=function(e,t){var n,l=e.gen,x=e.keyword,_=e.schema,w=e.parentSchema,S=e.$data,E=e.it;!function(e,t){var n=e.schemaEnv;if(t.async&&!n.$async)throw new Error("async keyword in sync schema")}(E,t);var k=!S&&t.compile?t.compile.call(E.self,_,w,E):t.validate,O=b(l,x,k),A=l.let("valid");function C(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.async?(0,p._)(s||(s=d(["await "]))):p.nil,r=E.opts.passContext?v.default.this:v.default.self,i=!("compile"in t&&!S||!1===t.schema);l.assign(A,(0,p._)(u||(u=d(["","",""])),n,(0,m.callValidateCode)(e,O,r,i)),t.modifying)}function M(e){var n;l.if((0,p.not)(null!==(n=t.valid)&&void 0!==n?n:A),e)}e.block$data(A,(function(){if(!1===t.errors)C(),t.modifying&&y(e),M((function(){return e.error()}));else{var n=t.async?function(){var e=l.let("ruleErrs",null);return l.try((function(){return C((0,p._)(r||(r=d(["await "]))))}),(function(t){return l.assign(A,!1).if((0,p._)(i||(i=d([""," instanceof ",""])),t,E.ValidationError),(function(){return l.assign(e,(0,p._)(o||(o=d(["",".errors"])),t))}),(function(){return l.throw(t)}))})),e}():function(){var e=(0,p._)(a||(a=d(["",".errors"])),O);return l.assign(e,null),C(p.nil),e}();t.modifying&&y(e),M((function(){return function(e,t){var n=e.gen;n.if((0,p._)(c||(c=d(["Array.isArray(",")"])),t),(function(){n.assign(v.default.vErrors,(0,p._)(f||(f=d([""," === null ? "," : ",".concat(",")"])),v.default.vErrors,t,v.default.vErrors,t)).assign(v.default.errors,(0,p._)(h||(h=d(["",".length"])),v.default.vErrors)),(0,g.extendErrors)(e)}),(function(){return e.error()}))}(e,n)}))}})),e.ok(null!==(n=t.valid)&&void 0!==n?n:A)},t.validSchemaType=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!t.length||t.some((function(t){return"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||n&&"undefined"==typeof e}))},t.validateKeywordUsage=function(e,t,n){var r=e.schema,i=e.opts,o=e.self,a=e.errSchemaPath;if(Array.isArray(t.keyword)?!t.keyword.includes(n):t.keyword!==n)throw new Error("ajv implementation error");var s=t.dependencies;if(null===s||void 0===s?void 0:s.some((function(e){return!Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have dependencies of ".concat(n,": ").concat(s.join(",")));if(t.validateSchema&&!t.validateSchema(r[n])){var u='keyword "'.concat(n,'" value is invalid at path "').concat(a,'": ')+o.errorsText(t.validateSchema.errors);if("log"!==i.validateSchema)throw new Error(u);o.logger.error(u)}}},69206:function(e,t,n){"use strict";var r,i,o,a,s,u=n(88148).default,l=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;var c=n(17641),f=n(73697);t.getSubschema=function(e,t){var n=t.keyword,o=t.schemaProp,a=t.schema,s=t.schemaPath,u=t.errSchemaPath,h=t.topSchemaRef;if(void 0!==n&&void 0!==a)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==n){var d=e.schema[n];return void 0===o?{schema:d,schemaPath:(0,c._)(r||(r=l(["","",""])),e.schemaPath,(0,c.getProperty)(n)),errSchemaPath:"".concat(e.errSchemaPath,"/").concat(n)}:{schema:d[o],schemaPath:(0,c._)(i||(i=l(["","","",""])),e.schemaPath,(0,c.getProperty)(n),(0,c.getProperty)(o)),errSchemaPath:"".concat(e.errSchemaPath,"/").concat(n,"/").concat((0,f.escapeFragment)(o))}}if(void 0!==a){if(void 0===s||void 0===u||void 0===h)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:a,schemaPath:s,topSchemaRef:h,errSchemaPath:u}}throw new Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,n){var r=n.dataProp,i=n.dataPropType,h=n.data,d=n.dataTypes,p=n.propertyName;if(void 0!==h&&void 0!==r)throw new Error('both "data" and "dataProp" passed, only one allowed');var v=t.gen;if(void 0!==r){var m=t.errorPath,g=t.dataPathArr,y=t.opts;b(v.let("data",(0,c._)(o||(o=l(["","",""])),t.data,(0,c.getProperty)(r)),!0)),e.errorPath=(0,c.str)(a||(a=l(["","",""])),m,(0,f.getErrorPath)(r,i,y.jsPropertySyntax)),e.parentDataProperty=(0,c._)(s||(s=l(["",""])),r),e.dataPathArr=[].concat(u(g),[e.parentDataProperty])}function b(n){e.data=n,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[].concat(u(t.dataNames),[n])}void 0!==h&&(b(h instanceof c.Name?h:v.let("data",h,!0)),void 0!==p&&(e.propertyName=p)),d&&(e.dataTypes=d)},t.extendSubschemaMode=function(e,t){var n=t.jtdDiscriminator,r=t.jtdMetadata,i=t.compositeRule,o=t.createErrors,a=t.allErrors;void 0!==i&&(e.compositeRule=i),void 0!==o&&(e.createErrors=o),void 0!==a&&(e.allErrors=a),e.jtdDiscriminator=n,e.jtdMetadata=r}},60602:function(e,t,n){"use strict";var r=n(35724).default,i=n(96080),o=n(19529).default,a=n(30437).default,s=n(47857).default,u=n(93621).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var l=n(99723);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=n(17641);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=n(81894),h=n(55559),d=n(18920),p=n(8993),v=n(17641),m=n(58009),g=n(5286),y=n(73697),b=n(71143),x=n(83142),_=function(e,t){return new RegExp(e,t)};_.code="new RegExp";var w=["removeAdditional","useDefaults","coerceTypes"],S=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),E={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},k={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function O(e){var t,n,r,i,o,a,s,l,c,f,h,d,p,v,m,g,y,b,w,S,E,k,O,A,C,M=e.strict,T=null===(t=e.code)||void 0===t?void 0:t.optimize,P=!0===T||void 0===T?1:T||0,R=null!==(r=null===(n=e.code)||void 0===n?void 0:n.regExp)&&void 0!==r?r:_,I=null!==(i=e.uriResolver)&&void 0!==i?i:x.default;return{strictSchema:null===(a=null!==(o=e.strictSchema)&&void 0!==o?o:M)||void 0===a||a,strictNumbers:null===(l=null!==(s=e.strictNumbers)&&void 0!==s?s:M)||void 0===l||l,strictTypes:null!==(f=null!==(c=e.strictTypes)&&void 0!==c?c:M)&&void 0!==f?f:"log",strictTuples:null!==(d=null!==(h=e.strictTuples)&&void 0!==h?h:M)&&void 0!==d?d:"log",strictRequired:null!==(v=null!==(p=e.strictRequired)&&void 0!==p?p:M)&&void 0!==v&&v,code:e.code?u(u({},e.code),{},{optimize:P,regExp:R}):{optimize:P,regExp:R},loopRequired:null!==(m=e.loopRequired)&&void 0!==m?m:200,loopEnum:null!==(g=e.loopEnum)&&void 0!==g?g:200,meta:null===(y=e.meta)||void 0===y||y,messages:null===(b=e.messages)||void 0===b||b,inlineRefs:null===(w=e.inlineRefs)||void 0===w||w,schemaId:null!==(S=e.schemaId)&&void 0!==S?S:"$id",addUsedSchema:null===(E=e.addUsedSchema)||void 0===E||E,validateSchema:null===(k=e.validateSchema)||void 0===k||k,validateFormats:null===(O=e.validateFormats)||void 0===O||O,unicodeRegExp:null===(A=e.unicodeRegExp)||void 0===A||A,int32range:null===(C=e.int32range)||void 0===C||C,uriResolver:I}}var A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts=u(u({},t),O(t));var n=this.opts.code,r=n.es5,i=n.lines;this.scope=new v.ValueScope({scope:{},prefixes:S,es5:r,lines:i}),this.logger=N(t.logger);var o=t.validateFormats;t.validateFormats=!1,this.RULES=(0,d.getRules)(),C.call(this,E,t,"NOT SUPPORTED"),C.call(this,k,t,"DEPRECATED","warn"),this._metaOpts=I.call(this),t.formats&&P.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&R.call(this,t.keywords),"object"==typeof t.meta&&this.addMetaSchema(t.meta),T.call(this),t.validateFormats=o}return s(e,[{key:"_addVocabularies",value:function(){this.addKeyword("$async")}},{key:"_addDefaultMetaSchema",value:function(){var e=this.opts,t=e.$data,n=e.meta,r=e.schemaId,i=b;"id"===r&&((i=u({},b)).id=i.$id,delete i.$id),n&&t&&this.addMetaSchema(i,i[r],!1)}},{key:"defaultMeta",value:function(){var e=this.opts,t=e.meta,n=e.schemaId;return this.opts.defaultMeta="object"==typeof t?t[n]||t:void 0}},{key:"validate",value:function(e,t){var n;if("string"==typeof e){if(!(n=this.getSchema(e)))throw new Error('no schema with key or ref "'.concat(e,'"'))}else n=this.compile(e);var r=n(t);return"$async"in n||(this.errors=n.errors),r}},{key:"compile",value:function(e,t){var n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}},{key:"compileAsync",value:function(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");var n=this.opts.loadSchema;return r.call(this,e,t);function r(e,t){return a.apply(this,arguments)}function a(){return(a=o(i.mark((function e(t,n){var r;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.call(this,t.$schema);case 2:return r=this._addSchema(t,n),e.abrupt("return",r.validate||l.call(this,r));case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function s(e){return u.apply(this,arguments)}function u(){return(u=o(i.mark((function e(t){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||this.getSchema(t)){e.next=3;break}return e.next=3,r.call(this,{$ref:t},!0);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function l(e){return c.apply(this,arguments)}function c(){return(c=o(i.mark((function e(t){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this._compileSchemaEnv(t));case 4:if(e.prev=4,e.t0=e.catch(0),e.t0 instanceof h.default){e.next=8;break}throw e.t0;case 8:return f.call(this,e.t0),e.next=11,d.call(this,e.t0.missingSchema);case 11:return e.abrupt("return",l.call(this,t));case 12:case"end":return e.stop()}}),e,this,[[0,4]])})))).apply(this,arguments)}function f(e){var t=e.missingSchema,n=e.missingRef;if(this.refs[t])throw new Error("AnySchema ".concat(t," is loaded but ").concat(n," cannot be resolved"))}function d(e){return p.apply(this,arguments)}function p(){return(p=o(i.mark((function e(n){var r;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.call(this,n);case 2:if(r=e.sent,this.refs[n]){e.next=6;break}return e.next=6,s.call(this,r.$schema);case 6:this.refs[n]||this.addSchema(r,n,t);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function v(e){return m.apply(this,arguments)}function m(){return(m=o(i.mark((function e(t){var r;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this._loading[t])){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,e.next=6,this._loading[t]=n(t);case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,delete this._loading[t],e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[3,,7,10]])})))).apply(this,arguments)}}},{key:"addSchema",value:function(e,t,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.validateSchema;if(Array.isArray(e)){var a,s=r(e);try{for(s.s();!(a=s.n()).done;){var u=a.value;this.addSchema(u,void 0,n,o)}}catch(c){s.e(c)}finally{s.f()}return this}if("object"===typeof e){var l=this.opts.schemaId;if(void 0!==(i=e[l])&&"string"!=typeof i)throw new Error("schema ".concat(l," must be string"))}return t=(0,m.normalizeId)(t||i),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,t,o,!0),this}},{key:"addMetaSchema",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.opts.validateSchema;return this.addSchema(e,t,!0,n),this}},{key:"validateSchema",value:function(e,t){if("boolean"==typeof e)return!0;var n;if(void 0!==(n=e.$schema)&&"string"!=typeof n)throw new Error("$schema must be a string");if(!(n=n||this.opts.defaultMeta||this.defaultMeta()))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var r=this.validate(n,e);if(!r&&t){var i="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(i);this.logger.error(i)}return r}},{key:"getSchema",value:function(e){for(var t;"string"==typeof(t=M.call(this,e));)e=t;if(void 0===t){var n=this.opts.schemaId,r=new p.SchemaEnv({schema:{},schemaId:n});if(!(t=p.resolveSchema.call(this,r,e)))return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}},{key:"removeSchema",value:function(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":var t=M.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this;case"object":var n=e;this._cache.delete(n);var r=e[this.opts.schemaId];return r&&(r=(0,m.normalizeId)(r),delete this.schemas[r],delete this.refs[r]),this;default:throw new Error("ajv.removeSchema: invalid parameter")}}},{key:"addVocabulary",value:function(e){var t,n=r(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.addKeyword(i)}}catch(o){n.e(o)}finally{n.f()}return this}},{key:"addKeyword",value:function(e,t){var n,r=this;if("string"==typeof e)n=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(D.call(this,n,t),!t)return(0,y.eachItem)(n,(function(e){return B.call(r,e)})),this;F.call(this,t);var i=u(u({},t),{},{type:(0,g.getJSONTypes)(t.type),schemaType:(0,g.getJSONTypes)(t.schemaType)});return(0,y.eachItem)(n,0===i.type.length?function(e){return B.call(r,e,i)}:function(e){return i.type.forEach((function(t){return B.call(r,e,i,t)}))}),this}},{key:"getKeyword",value:function(e){var t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}},{key:"removeKeyword",value:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e];var n,i=r(t.rules);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.rules.findIndex((function(t){return t.keyword===e}));a>=0&&o.rules.splice(a,1)}}catch(s){i.e(s)}finally{i.f()}return this}},{key:"addFormat",value:function(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}},{key:"errorsText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.errors,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.separator,r=void 0===n?", ":n,i=t.dataVar,o=void 0===i?"data":i;return e&&0!==e.length?e.map((function(e){return"".concat(o).concat(e.instancePath," ").concat(e.message)})).reduce((function(e,t){return e+r+t})):"No errors"}},{key:"$dataMetaSchema",value:function(e,t){var n=this.RULES.all;e=JSON.parse(JSON.stringify(e));var i,o=r(t);try{for(o.s();!(i=o.n()).done;){var a,s=i.value.split("/").slice(1),u=e,l=r(s);try{for(l.s();!(a=l.n()).done;){u=u[a.value]}}catch(p){l.e(p)}finally{l.f()}for(var c in n){var f=n[c];if("object"==typeof f){var h=f.definition.$data,d=u[c];h&&d&&(u[c]=U(d))}}}}catch(p){o.e(p)}finally{o.f()}return e}},{key:"_removeAllSchemas",value:function(e,t){for(var n in e){var r=e[n];t&&!t.test(n)||("string"==typeof r?delete e[n]:r&&!r.meta&&(this._cache.delete(r.schema),delete e[n]))}}},{key:"_addSchema",value:function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.validateSchema,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.opts.addUsedSchema,a=this.opts.schemaId;if("object"==typeof e)r=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}var s=this._cache.get(e);if(void 0!==s)return s;n=(0,m.normalizeId)(r||n);var u=m.getSchemaRefs.call(this,e,n);return s=new p.SchemaEnv({schema:e,schemaId:a,meta:t,baseId:n,localRefs:u}),this._cache.set(s.schema,s),o&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=s),i&&this.validateSchema(e,!0),s}},{key:"_checkUnique",value:function(e){if(this.schemas[e]||this.refs[e])throw new Error('schema with key or id "'.concat(e,'" already exists'))}},{key:"_compileSchemaEnv",value:function(e){if(e.meta?this._compileMetaSchema(e):p.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}},{key:"_compileMetaSchema",value:function(e){var t=this.opts;this.opts=this._metaOpts;try{p.compileSchema.call(this,e)}finally{this.opts=t}}}]),e}();function C(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"error";for(var i in e){var o=i;o in t&&this.logger[r]("".concat(n,": option ").concat(i,". ").concat(e[o]))}}function M(e){return e=(0,m.normalizeId)(e),this.schemas[e]||this.refs[e]}function T(){var e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(var t in e)this.addSchema(e[t],t)}function P(){for(var e in this.opts.formats){var t=this.opts.formats[e];t&&this.addFormat(e,t)}}function R(e){if(Array.isArray(e))this.addVocabulary(e);else for(var t in this.logger.warn("keywords option as map is deprecated, pass array"),e){var n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}function I(){var e,t=u({},this.opts),n=r(w);try{for(n.s();!(e=n.n()).done;){delete t[e.value]}}catch(i){n.e(i)}finally{n.f()}return t}t.default=A,A.ValidationError=f.default,A.MissingRefError=h.default;var L={log:function(){},warn:function(){},error:function(){}};function N(e){if(!1===e)return L;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var j=/^[a-z_$][a-z0-9_$:-]*$/i;function D(e,t){var n=this.RULES;if((0,y.eachItem)(e,(function(e){if(n.keywords[e])throw new Error("Keyword ".concat(e," is already defined"));if(!j.test(e))throw new Error("Keyword ".concat(e," has invalid name"))})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function B(e,t,n){var r,i=this,o=null===t||void 0===t?void 0:t.post;if(n&&o)throw new Error('keyword with "post" flag cannot have "type"');var a=this.RULES,s=o?a.post:a.rules.find((function(e){return e.type===n}));if(s||(s={type:n,rules:[]},a.rules.push(s)),a.keywords[e]=!0,t){var l={keyword:e,definition:u(u({},t),{},{type:(0,g.getJSONTypes)(t.type),schemaType:(0,g.getJSONTypes)(t.schemaType)})};t.before?z.call(this,s,l,t.before):s.rules.push(l),a.all[e]=l,null===(r=t.implements)||void 0===r||r.forEach((function(e){return i.addKeyword(e)}))}}function z(e,t,n){var r=e.rules.findIndex((function(e){return e.keyword===n}));r>=0?e.rules.splice(r,0,t):(e.rules.push(t),this.logger.warn("rule ".concat(n," is not defined")))}function F(e){var t=e.metaSchema;void 0!==t&&(e.$data&&this.opts.$data&&(t=U(t)),e.validateSchema=this.compile(t,!0))}var V={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function U(e){return{anyOf:[e,V]}}},45272:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(54229);r.code='require("ajv/dist/runtime/equal").default',t.default=r},79942:function(e,t){"use strict";function n(e){for(var t,n=e.length,r=0,i=0;i<n;)r++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<n&&56320===(64512&(t=e.charCodeAt(i)))&&i++;return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.code='require("ajv/dist/runtime/ucs2length").default'},83142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19776);r.code='require("ajv/dist/runtime/uri").default',t.default=r},81894:function(e,t,n){"use strict";var r=n(47857).default,i=n(30437).default,o=n(41490).default,a=n(54758).default,s=n(70391).default;Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){o(n,e);var t=a(n);function n(e){var r;return i(this,n),(r=t.call(this,"validation failed")).errors=e,r.ajv=r.validation=!0,r}return r(n)}(s(Error));t.default=u},14488:function(e,t,n){"use strict";var r,i,o,a,s,u=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;var l=n(17641),c=n(73697),f={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:function(e){var t=e.params.len;return(0,l.str)(r||(r=u(["must NOT have more than "," items"])),t)},params:function(e){var t=e.params.len;return(0,l._)(i||(i=u(["{limit: ","}"])),t)}},code:function(e){var t=e.parentSchema,n=e.it,r=t.items;Array.isArray(r)?h(e,r):(0,c.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas')}};function h(e,t){var n=e.gen,r=e.schema,i=e.data,f=e.keyword,h=e.it;h.items=!0;var d=n.const("len",(0,l._)(o||(o=u(["",".length"])),i));if(!1===r)e.setParams({len:t.length}),e.pass((0,l._)(a||(a=u([""," <= ",""])),d,t.length));else if("object"==typeof r&&!(0,c.alwaysValidSchema)(h,r)){var p=n.var("valid",(0,l._)(s||(s=u([""," <= ",""])),d,t.length));n.if((0,l.not)(p),(function(){return function(r){n.forRange("i",t.length,d,(function(t){e.subschema({keyword:f,dataProp:t,dataPropType:c.Type.Num},r),h.allErrors||n.if((0,l.not)(r),(function(){return n.break()}))}))}(p)})),e.ok(p)}}t.validateAdditionalItems=h,t.default=f},69620:function(e,t,n){"use strict";var r,i,o,a,s,u=n(88148).default,l=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0});var c=n(54965),f=n(17641),h=n(43948),d=n(73697),p={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:function(e){var t=e.params;return(0,f._)(r||(r=l(["{additionalProperty: ","}"])),t.additionalProperty)}},code:function(e){var t=e.gen,n=e.schema,r=e.parentSchema,p=e.data,v=e.errsCount,m=e.it;if(!v)throw new Error("ajv implementation error");var g=m.allErrors,y=m.opts;if(m.props=!0,"all"===y.removeAdditional||!(0,d.alwaysValidSchema)(m,n)){var b=(0,c.allSchemaProperties)(r.properties),x=(0,c.allSchemaProperties)(r.patternProperties);t.forIn("key",p,(function(n){b.length||x.length?t.if(function(n){var i;if(b.length>8){var s=(0,d.schemaRefOrVal)(m,r.properties,"properties");i=(0,c.isOwnProperty)(t,s,n)}else i=b.length?f.or.apply(void 0,u(b.map((function(e){return(0,f._)(o||(o=l([""," === ",""])),n,e)})))):f.nil;return x.length&&(i=f.or.apply(void 0,[i].concat(u(x.map((function(t){return(0,f._)(a||(a=l(["",".test(",")"])),(0,c.usePattern)(e,t),n)})))))),(0,f.not)(i)}(n),(function(){return w(n)})):w(n)})),e.ok((0,f._)(i||(i=l([""," === ",""])),v,h.default.errors))}function _(e){t.code((0,f._)(s||(s=l(["delete ","[","]"])),p,e))}function w(r){if("all"===y.removeAdditional||y.removeAdditional&&!1===n)_(r);else{if(!1===n)return e.setParams({additionalProperty:r}),e.error(),void(g||t.break());if("object"==typeof n&&!(0,d.alwaysValidSchema)(m,n)){var i=t.name("valid");"failing"===y.removeAdditional?(S(r,i,!1),t.if((0,f.not)(i),(function(){e.reset(),_(r)}))):(S(r,i),g||t.if((0,f.not)(i),(function(){return t.break()})))}}}function S(t,n,r){var i={keyword:"additionalProperties",dataProp:t,dataPropType:d.Type.Str};!1===r&&Object.assign(i,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(i,n)}}};t.default=p},64967:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(73697),i={keyword:"allOf",schemaType:"array",code:function(e){var t=e.gen,n=e.schema,i=e.it;if(!Array.isArray(n))throw new Error("ajv implementation error");var o=t.name("valid");n.forEach((function(t,n){if(!(0,r.alwaysValidSchema)(i,t)){var a=e.subschema({keyword:"allOf",schemaProp:n},o);e.ok(o),e.mergeEvaluated(a)}}))}};t.default=i},15392:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:n(54965).validateUnion,error:{message:"must match a schema in anyOf"}};t.default=r},17757:function(e,t,n){"use strict";var r,i,o,a,s,u,l,c,f,h,d,p,v=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0});var m=n(17641),g=n(73697),y={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:function(e){var t=e.params,n=t.min,o=t.max;return void 0===o?(0,m.str)(r||(r=v(["must contain at least "," valid item(s)"])),n):(0,m.str)(i||(i=v(["must contain at least "," and no more than "," valid item(s)"])),n,o)},params:function(e){var t=e.params,n=t.min,r=t.max;return void 0===r?(0,m._)(o||(o=v(["{minContains: ","}"])),n):(0,m._)(a||(a=v(["{minContains: ",", maxContains: ","}"])),n,r)}},code:function(e){var t,n,r=e.gen,i=e.schema,o=e.parentSchema,a=e.data,y=e.it,b=o.minContains,x=o.maxContains;y.opts.next?(t=void 0===b?1:b,n=x):t=1;var _=r.const("len",(0,m._)(s||(s=v(["",".length"])),a));if(e.setParams({min:t,max:n}),void 0!==n||0!==t){if(void 0!==n&&t>n)return(0,g.checkStrictMode)(y,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,g.alwaysValidSchema)(y,i)){var w=(0,m._)(u||(u=v([""," >= ",""])),_,t);return void 0!==n&&(w=(0,m._)(l||(l=v([""," && "," <= ",""])),w,_,n)),void e.pass(w)}y.items=!0;var S=r.name("valid");void 0===n&&1===t?k(S,(function(){return r.if(S,(function(){return r.break()}))})):0===t?(r.let(S,!0),void 0!==n&&r.if((0,m._)(c||(c=v(["",".length > 0"])),a),E)):(r.let(S,!1),E()),e.result(S,(function(){return e.reset()}))}else(0,g.checkStrictMode)(y,'"minContains" == 0 without "maxContains": "contains" keyword ignored');function E(){var e=r.name("_valid"),i=r.let("count",0);k(e,(function(){return r.if(e,(function(){return function(e){r.code((0,m._)(f||(f=v(["","++"])),e)),void 0===n?r.if((0,m._)(h||(h=v([""," >= ",""])),e,t),(function(){return r.assign(S,!0).break()})):(r.if((0,m._)(d||(d=v([""," > ",""])),e,n),(function(){return r.assign(S,!1).break()})),1===t?r.assign(S,!0):r.if((0,m._)(p||(p=v([""," >= ",""])),e,t),(function(){return r.assign(S,!0)})))}(i)}))}))}function k(t,n){r.forRange("i",0,_,(function(r){e.subschema({keyword:"contains",dataProp:r,dataPropType:g.Type.Num,compositeRule:!0},t),n()}))}}};t.default=y},61840:function(e,t,n){"use strict";var r,i,o,a=n(35724).default,s=n(12848).default,u=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;var l=n(17641),c=n(73697),f=n(54965);t.error={message:function(e){var t=e.params,n=t.property,i=t.depsCount,o=t.deps,a=1===i?"property":"properties";return(0,l.str)(r||(r=u(["must have "," "," when property "," is present"])),a,o,n)},params:function(e){var t=e.params,n=t.property,r=t.depsCount,o=t.deps,a=t.missingProperty;return(0,l._)(i||(i=u(["{property: ",",\n    missingProperty: ",",\n    depsCount: ",",\n    deps: ","}"])),n,a,r,o)}};var h={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code:function(e){var t=function(e){var t=e.schema,n={},r={};for(var i in t){if("__proto__"!==i)(Array.isArray(t[i])?n:r)[i]=t[i]}return[n,r]}(e),n=s(t,2),r=n[0],i=n[1];d(e,r),p(e,i)}};function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema,n=e.gen,r=e.data,i=e.it;if(0!==Object.keys(t).length){var s=n.let("missing"),c=function(c){var h=t[c];if(0===h.length)return"continue";var d=(0,f.propertyInData)(n,r,c,i.opts.ownProperties);e.setParams({property:c,depsCount:h.length,deps:h.join(", ")}),i.allErrors?n.if(d,(function(){var t,n=a(h);try{for(n.s();!(t=n.n()).done;){var r=t.value;(0,f.checkReportMissingProp)(e,r)}}catch(i){n.e(i)}finally{n.f()}})):(n.if((0,l._)(o||(o=u([""," && (",")"])),d,(0,f.checkMissingProp)(e,h,s))),(0,f.reportMissingProp)(e,s),n.else())};for(var h in t)c(h)}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema,n=e.gen,r=e.data,i=e.keyword,o=e.it,a=n.name("valid"),s=function(s){if((0,c.alwaysValidSchema)(o,t[s]))return"continue";n.if((0,f.propertyInData)(n,r,s,o.opts.ownProperties),(function(){var t=e.subschema({keyword:i,schemaProp:s},a);e.mergeValidEvaluated(t,a)}),(function(){return n.var(a,!0)})),e.ok(a)};for(var u in t)s(u)}t.validatePropertyDeps=d,t.validateSchemaDeps=p,t.default=h},35002:function(e,t,n){"use strict";var r,i,o,a=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0});var s=n(17641),u=n(73697),l={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:function(e){var t=e.params;return(0,s.str)(r||(r=a(['must match "','" schema'])),t.ifClause)},params:function(e){var t=e.params;return(0,s._)(i||(i=a(["{failingKeyword: ","}"])),t.ifClause)}},code:function(e){var t=e.gen,n=e.parentSchema,r=e.it;void 0===n.then&&void 0===n.else&&(0,u.checkStrictMode)(r,'"if" without "then" and "else" is ignored');var i=c(r,"then"),l=c(r,"else");if(i||l){var f=t.let("valid",!0),h=t.name("_valid");if(function(){var t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},h);e.mergeEvaluated(t)}(),e.reset(),i&&l){var d=t.let("ifClause");e.setParams({ifClause:d}),t.if(h,p("then",d),p("else",d))}else i?t.if(h,p("then")):t.if((0,s.not)(h),p("else"));e.pass(f,(function(){return e.error(!0)}))}function p(n,r){return function(){var i=e.subschema({keyword:n},h);t.assign(f,h),e.mergeValidEvaluated(i,f),r?t.assign(r,(0,s._)(o||(o=a(["",""])),n)):e.setParams({ifClause:n})}}}};function c(e,t){var n=e.schema[t];return void 0!==n&&!(0,u.alwaysValidSchema)(e,n)}t.default=l},71439:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(14488),i=n(88484),o=n(1689),a=n(66612),s=n(17757),u=n(61840),l=n(91677),c=n(69620),f=n(15717),h=n(90789),d=n(54821),p=n(15392),v=n(95336),m=n(64967),g=n(35002),y=n(54018);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[d.default,p.default,v.default,m.default,g.default,y.default,l.default,c.default,u.default,f.default,h.default];return e?t.push(i.default,a.default):t.push(r.default,o.default),t.push(s.default),t}},1689:function(e,t,n){"use strict";var r,i,o=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;var a=n(17641),s=n(73697),u=n(54965),l={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code:function(e){var t=e.schema,n=e.it;if(Array.isArray(t))return c(e,"additionalItems",t);n.items=!0,(0,s.alwaysValidSchema)(n,t)||e.ok((0,u.validateArray)(e))}};function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.schema,u=e.gen,l=e.parentSchema,c=e.data,f=e.keyword,h=e.it;v(l),h.opts.unevaluated&&n.length&&!0!==h.items&&(h.items=s.mergeEvaluated.items(u,n.length,h.items));var d=u.name("valid"),p=u.const("len",(0,a._)(r||(r=o(["",".length"])),c));function v(e){var r=h.opts,i=h.errSchemaPath,o=n.length,a=o===e.minItems&&(o===e.maxItems||!1===e[t]);if(r.strictTuples&&!a){var u='"'.concat(f,'" is ').concat(o,"-tuple, but minItems or maxItems/").concat(t,' are not specified or different at path "').concat(i,'"');(0,s.checkStrictMode)(h,u,r.strictTuples)}}n.forEach((function(t,n){(0,s.alwaysValidSchema)(h,t)||(u.if((0,a._)(i||(i=o([""," > ",""])),p,n),(function(){return e.subschema({keyword:f,schemaProp:n,dataProp:n},d)})),e.ok(d))}))}t.validateTuple=c,t.default=l},66612:function(e,t,n){"use strict";var r,i,o=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(17641),s=n(73697),u=n(54965),l=n(14488),c={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:function(e){var t=e.params.len;return(0,a.str)(r||(r=o(["must NOT have more than "," items"])),t)},params:function(e){var t=e.params.len;return(0,a._)(i||(i=o(["{limit: ","}"])),t)}},code:function(e){var t=e.schema,n=e.parentSchema,r=e.it,i=n.prefixItems;r.items=!0,(0,s.alwaysValidSchema)(r,t)||(i?(0,l.validateAdditionalItems)(e,i):e.ok((0,u.validateArray)(e)))}};t.default=c},54821:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(73697),i={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code:function(e){var t=e.gen,n=e.schema,i=e.it;if((0,r.alwaysValidSchema)(i,n))e.fail();else{var o=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),e.failResult(o,(function(){return e.reset()}),(function(){return e.error()}))}},error:{message:"must NOT be valid"}};t.default=i},95336:function(e,t,n){"use strict";var r,i,o,a=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0});var s=n(17641),u=n(73697),l={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:function(e){var t=e.params;return(0,s._)(r||(r=a(["{passingSchemas: ","}"])),t.passing)}},code:function(e){var t=e.gen,n=e.schema,r=e.parentSchema,l=e.it;if(!Array.isArray(n))throw new Error("ajv implementation error");if(!l.opts.discriminator||!r.discriminator){var c=n,f=t.let("valid",!1),h=t.let("passing",null),d=t.name("_valid");e.setParams({passing:h}),t.block((function(){c.forEach((function(n,r){var c;(0,u.alwaysValidSchema)(l,n)?t.var(d,!0):c=e.subschema({keyword:"oneOf",schemaProp:r,compositeRule:!0},d),r>0&&t.if((0,s._)(i||(i=a([""," && ",""])),d,f)).assign(f,!1).assign(h,(0,s._)(o||(o=a(["[",", ","]"])),h,r)).else(),t.if(d,(function(){t.assign(f,!0),t.assign(h,r),c&&e.mergeEvaluated(c,s.Name)}))}))})),e.result(f,(function(){return e.reset()}),(function(){return e.error(!0)}))}}};t.default=l},90789:function(e,t,n){"use strict";var r,i,o=n(61874).default,a=n(35724).default;Object.defineProperty(t,"__esModule",{value:!0});var s=n(54965),u=n(17641),l=n(73697),c=n(73697),f={keyword:"patternProperties",type:"object",schemaType:"object",code:function(e){var t=e.gen,n=e.schema,f=e.data,h=e.parentSchema,d=e.it,p=d.opts,v=(0,s.allSchemaProperties)(n),m=v.filter((function(e){return(0,l.alwaysValidSchema)(d,n[e])}));if(0!==v.length&&(m.length!==v.length||d.opts.unevaluated&&!0!==d.props)){var g=p.strictSchema&&!p.allowMatchingProperties&&h.properties,y=t.name("valid");!0===d.props||d.props instanceof u.Name||(d.props=(0,c.evaluatedPropsToName)(t,d.props));var b=d.props;!function(){var e,n=a(v);try{for(n.s();!(e=n.n()).done;){var r=e.value;g&&x(r),d.allErrors?_(r):(t.var(y,!0),_(r),t.if(y))}}catch(i){n.e(i)}finally{n.f()}}()}function x(e){for(var t in g)new RegExp(e).test(t)&&(0,l.checkStrictMode)(d,"property ".concat(t," matches pattern ").concat(e," (use allowMatchingProperties)"))}function _(n){t.forIn("key",f,(function(a){t.if((0,u._)(r||(r=o(["",".test(",")"])),(0,s.usePattern)(e,n),a),(function(){var r=m.includes(n);r||e.subschema({keyword:"patternProperties",schemaProp:n,dataProp:a,dataPropType:c.Type.Str},y),d.opts.unevaluated&&!0!==b?t.assign((0,u._)(i||(i=o(["","[","]"])),b,a),!0):r||d.allErrors||t.if((0,u.not)(y),(function(){return t.break()}))}))}))}}};t.default=f},88484:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1689),i={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:function(e){return(0,r.validateTuple)(e,"items")}};t.default=i},15717:function(e,t,n){"use strict";var r=n(35724).default;Object.defineProperty(t,"__esModule",{value:!0});var i=n(99723),o=n(54965),a=n(73697),s=n(69620),u={keyword:"properties",type:"object",schemaType:"object",code:function(e){var t=e.gen,n=e.schema,u=e.parentSchema,l=e.data,c=e.it;"all"===c.opts.removeAdditional&&void 0===u.additionalProperties&&s.default.code(new i.KeywordCxt(c,s.default,"additionalProperties"));var f,h=(0,o.allSchemaProperties)(n),d=r(h);try{for(d.s();!(f=d.n()).done;){var p=f.value;c.definedProperties.add(p)}}catch(w){d.e(w)}finally{d.f()}c.opts.unevaluated&&h.length&&!0!==c.props&&(c.props=a.mergeEvaluated.props(t,(0,a.toHash)(h),c.props));var v=h.filter((function(e){return!(0,a.alwaysValidSchema)(c,n[e])}));if(0!==v.length){var m,g=t.name("valid"),y=r(v);try{for(y.s();!(m=y.n()).done;){var b=m.value;x(b)?_(b):(t.if((0,o.propertyInData)(t,l,b,c.opts.ownProperties)),_(b),c.allErrors||t.else().var(g,!0),t.endIf()),e.it.definedProperties.add(b),e.ok(g)}}catch(w){y.e(w)}finally{y.f()}}function x(e){return c.opts.useDefaults&&!c.compositeRule&&void 0!==n[e].default}function _(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},g)}}};t.default=u},91677:function(e,t,n){"use strict";var r,i=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0});var o=n(17641),a=n(73697),s={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:function(e){var t=e.params;return(0,o._)(r||(r=i(["{propertyName: ","}"])),t.propertyName)}},code:function(e){var t=e.gen,n=e.schema,r=e.data,i=e.it;if(!(0,a.alwaysValidSchema)(i,n)){var s=t.name("valid");t.forIn("key",r,(function(n){e.setParams({propertyName:n}),e.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},s),t.if((0,o.not)(s),(function(){e.error(!0),i.allErrors||t.break()}))})),e.ok(s)}}};t.default=s},54018:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(73697),i={keyword:["then","else"],schemaType:["object","boolean"],code:function(e){var t=e.keyword,n=e.parentSchema,i=e.it;void 0===n.if&&(0,r.checkStrictMode)(i,'"'.concat(t,'" without "if" is ignored'))}};t.default=i},54965:function(e,t,n){"use strict";var r,i,o,a,s,u,l,c,f,h,d,p,v,m,g,y=n(88148).default,b=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;var x=n(17641),_=n(73697),w=n(43948),S=n(73697);function E(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,x._)(o||(o=b(["Object.prototype.hasOwnProperty"])))})}function k(e,t,n){return(0,x._)(a||(a=b(["",".call(",", ",")"])),E(e),t,n)}function O(e,t,n,r){var i=(0,x._)(l||(l=b(["",""," === undefined"])),t,(0,x.getProperty)(n));return r?(0,x.or)(i,(0,x.not)(k(e,t,n))):i}function A(e){return e?Object.keys(e).filter((function(e){return"__proto__"!==e})):[]}t.checkReportMissingProp=function(e,t){var n=e.gen,i=e.data,o=e.it;n.if(O(n,i,t,o.opts.ownProperties),(function(){e.setParams({missingProperty:(0,x._)(r||(r=b(["",""])),t)},!0),e.error()}))},t.checkMissingProp=function(e,t,n){var r=e.gen,o=e.data,a=e.it.opts;return x.or.apply(void 0,y(t.map((function(e){return(0,x.and)(O(r,o,e,a.ownProperties),(0,x._)(i||(i=b([""," = ",""])),n,e))}))))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=E,t.isOwnProperty=k,t.propertyInData=function(e,t,n,r){var i=(0,x._)(s||(s=b(["",""," !== undefined"])),t,(0,x.getProperty)(n));return r?(0,x._)(u||(u=b([""," && ",""])),i,k(e,t,n)):i},t.noPropertyInData=O,t.allSchemaProperties=A,t.schemaProperties=function(e,t){return A(t).filter((function(n){return!(0,_.alwaysValidSchema)(e,t[n])}))},t.callValidateCode=function(e,t,n,r){var i=e.schemaCode,o=e.data,a=e.it,s=a.gen,u=a.topSchemaRef,l=a.schemaPath,p=a.errorPath,v=e.it,m=r?(0,x._)(c||(c=b(["",", ",", ","",""])),i,o,u,l):o,g=[[w.default.instancePath,(0,x.strConcat)(w.default.instancePath,p)],[w.default.parentData,v.parentData],[w.default.parentDataProperty,v.parentDataProperty],[w.default.rootData,w.default.rootData]];v.opts.dynamicRef&&g.push([w.default.dynamicAnchors,w.default.dynamicAnchors]);var y=(0,x._)(f||(f=b(["",", ",""])),m,s.object.apply(s,g));return n!==x.nil?(0,x._)(h||(h=b(["",".call(",", ",")"])),t,n,y):(0,x._)(d||(d=b(["","(",")"])),t,y)};var C=(0,x._)(p||(p=b(["new RegExp"])));t.usePattern=function(e,t){var n=e.gen,r=e.it.opts,i=r.unicodeRegExp?"u":"",o=r.code.regExp,a=o(t,i);return n.scopeValue("pattern",{key:a.toString(),ref:a,code:(0,x._)(v||(v=b(["","(",", ",")"])),"new RegExp"===o.code?C:(0,S.useFunc)(n,o),t,i)})},t.validateArray=function(e){var t=e.gen,n=e.data,r=e.keyword,i=e.it,o=t.name("valid");if(i.allErrors){var a=t.let("valid",!0);return s((function(){return t.assign(a,!1)})),a}return t.var(o,!0),s((function(){return t.break()})),o;function s(i){var a=t.const("len",(0,x._)(m||(m=b(["",".length"])),n));t.forRange("i",0,a,(function(n){e.subschema({keyword:r,dataProp:n,dataPropType:_.Type.Num},o),t.if((0,x.not)(o),i)}))}},t.validateUnion=function(e){var t=e.gen,n=e.schema,r=e.keyword,i=e.it;if(!Array.isArray(n))throw new Error("ajv implementation error");if(!n.some((function(e){return(0,_.alwaysValidSchema)(i,e)}))||i.opts.unevaluated){var o=t.let("valid",!1),a=t.name("_valid");t.block((function(){return n.forEach((function(n,i){var s=e.subschema({keyword:r,schemaProp:i,compositeRule:!0},a);t.assign(o,(0,x._)(g||(g=b([""," || ",""])),o,a)),e.mergeValidEvaluated(s,a)||t.if((0,x.not)(o))}))})),e.result(o,(function(){return e.reset()}),(function(){return e.error(!0)}))}}},47806:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={keyword:"id",code:function(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=n},63390:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(47806),i=n(53384),o=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",r.default,i.default];t.default=o},53384:function(e,t,n){"use strict";var r,i,o,a,s,u,l,c,f,h=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;var d=n(55559),p=n(54965),v=n(17641),m=n(43948),g=n(8993),y=n(73697),b={keyword:"$ref",schemaType:"string",code:function(e){var t=e.gen,n=e.schema,i=e.it,o=i.baseId,a=i.schemaEnv,s=i.validateName,u=i.opts,l=i.self,c=a.root;if(("#"===n||"#/"===n)&&o===c.baseId)return function(){if(a===c)return _(e,s,a,a.$async);var n=t.scopeValue("root",{ref:c});return _(e,(0,v._)(r||(r=h(["",".validate"])),n),c,c.$async)}();var f=g.resolveRef.call(l,c,o,n);if(void 0===f)throw new d.default(i.opts.uriResolver,o,n);return f instanceof g.SchemaEnv?function(t){var n=x(e,t);_(e,n,t,t.$async)}(f):function(r){var i=t.scopeValue("schema",!0===u.code.source?{ref:r,code:(0,v.stringify)(r)}:{ref:r}),o=t.name("valid"),a=e.subschema({schema:r,dataTypes:[],schemaPath:v.nil,topSchemaRef:i,errSchemaPath:n},o);e.mergeEvaluated(a),e.ok(o)}(f)}};function x(e,t){var n=e.gen;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,v._)(i||(i=h(["",".validate"])),n.scopeValue("wrapper",{ref:t}))}function _(e,t,n,r){var i=e.gen,d=e.it,g=d.allErrors,b=d.schemaEnv,x=d.opts.passContext?m.default.this:v.nil;function _(e){var t=(0,v._)(s||(s=h(["",".errors"])),e);i.assign(m.default.vErrors,(0,v._)(u||(u=h([""," === null ? "," : ",".concat(",")"])),m.default.vErrors,t,m.default.vErrors,t)),i.assign(m.default.errors,(0,v._)(l||(l=h(["",".length"])),m.default.vErrors))}function w(e){var t;if(d.opts.unevaluated){var r=null===(t=null===n||void 0===n?void 0:n.validate)||void 0===t?void 0:t.evaluated;if(!0!==d.props)if(r&&!r.dynamicProps)void 0!==r.props&&(d.props=y.mergeEvaluated.props(i,r.props,d.props));else{var o=i.var("props",(0,v._)(c||(c=h(["",".evaluated.props"])),e));d.props=y.mergeEvaluated.props(i,o,d.props,v.Name)}if(!0!==d.items)if(r&&!r.dynamicItems)void 0!==r.items&&(d.items=y.mergeEvaluated.items(i,r.items,d.items));else{var a=i.var("items",(0,v._)(f||(f=h(["",".evaluated.items"])),e));d.items=y.mergeEvaluated.items(i,a,d.items,v.Name)}}}r?function(){if(!b.$async)throw new Error("async schema referenced by sync schema");var n=i.let("valid");i.try((function(){i.code((0,v._)(o||(o=h(["await ",""])),(0,p.callValidateCode)(e,t,x))),w(t),g||i.assign(n,!0)}),(function(e){i.if((0,v._)(a||(a=h(["!("," instanceof ",")"])),e,d.ValidationError),(function(){return i.throw(e)})),_(e),g||i.assign(n,!1)})),e.ok(n)}():e.result((0,p.callValidateCode)(e,t,x),(function(){return w(t)}),(function(){return _(t)}))}t.getValidate=x,t.callRef=_,t.default=b},97717:function(e,t,n){"use strict";var r,i,o,a,s=n(35724).default,u=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0});var l=n(17641),c=n(36263),f=n(8993),h=n(73697),d={keyword:"discriminator",type:"object",schemaType:"object",error:{message:function(e){var t=e.params,n=t.discrError,r=t.tagName;return n===c.DiscrError.Tag?'tag "'.concat(r,'" must be string'):'value of tag "'.concat(r,'" must be in oneOf')},params:function(e){var t=e.params,n=t.discrError,i=t.tag,o=t.tagName;return(0,l._)(r||(r=u(["{error: ",", tag: ",", tagValue: ","}"])),n,o,i)}},code:function(e){var t=e.gen,n=e.data,r=e.schema,d=e.parentSchema,p=e.it,v=d.oneOf;if(!p.opts.discriminator)throw new Error("discriminator: requires discriminator option");var m=r.propertyName;if("string"!=typeof m)throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!v)throw new Error("discriminator: requires oneOf keyword");var g=t.let("valid",!1),y=t.const("tag",(0,l._)(i||(i=u(["","",""])),n,(0,l.getProperty)(m)));function b(n){var r=t.name("valid"),i=e.subschema({keyword:"oneOf",schemaProp:n},r);return e.mergeEvaluated(i,l.Name),r}t.if((0,l._)(o||(o=u(["typeof ",' == "string"'])),y),(function(){return function(){var n=function(){for(var e,t={},n=u(d),r=!0,i=0;i<v.length;i++){var o=v[i];(null===o||void 0===o?void 0:o.$ref)&&!(0,h.schemaHasRulesButRef)(o,p.self.RULES)&&(o=f.resolveRef.call(p.self,p.schemaEnv,p.baseId,null===o||void 0===o?void 0:o.$ref))instanceof f.SchemaEnv&&(o=o.schema);var a=null===(e=null===o||void 0===o?void 0:o.properties)||void 0===e?void 0:e[m];if("object"!=typeof a)throw new Error('discriminator: oneOf subschemas (or referenced schemas) must have "properties/'.concat(m,'"'));r=r&&(n||u(o)),l(a,i)}if(!r)throw new Error('discriminator: "'.concat(m,'" must be required'));return t;function u(e){var t=e.required;return Array.isArray(t)&&t.includes(m)}function l(e,t){if(e.const)c(e.const,t);else{if(!e.enum)throw new Error('discriminator: "properties/'.concat(m,'" must have "const" or "enum"'));var n,r=s(e.enum);try{for(r.s();!(n=r.n()).done;){c(n.value,t)}}catch(i){r.e(i)}finally{r.f()}}}function c(e,n){if("string"!=typeof e||e in t)throw new Error('discriminator: "'.concat(m,'" values must be unique strings'));t[e]=n}}();for(var r in t.if(!1),n)t.elseIf((0,l._)(a||(a=u([""," === ",""])),y,r)),t.assign(g,b(n[r]));t.else(),e.error(!1,{discrError:c.DiscrError.Mapping,tag:y,tagName:m}),t.endIf()}()}),(function(){return e.error(!1,{discrError:c.DiscrError.Tag,tag:y,tagName:m})})),e.ok(g)}};t.default=d},36263:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(t.DiscrError||(t.DiscrError={}))},11256:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(63390),i=n(47285),o=n(71439),a=n(22075),s=n(16371),u=[r.default,i.default,(0,o.default)(),a.default,s.metadataVocabulary,s.contentVocabulary];t.default=u},35138:function(e,t,n){"use strict";var r,i,o,a,s,u,l,c,f,h,d,p,v,m,g,y,b,x=n(12848).default,_=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0});var w=n(17641),S={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:function(e){var t=e.schemaCode;return(0,w.str)(r||(r=_(['must match format "','"'])),t)},params:function(e){var t=e.schemaCode;return(0,w._)(i||(i=_(["{format: ","}"])),t)}},code:function(e,t){var n=e.gen,r=e.data,i=e.$data,S=e.schema,E=e.schemaCode,k=e.it,O=k.opts,A=k.errSchemaPath,C=k.schemaEnv,M=k.self;O.validateFormats&&(i?function(){var i=n.scopeValue("formats",{ref:M.formats,code:O.code.formats}),v=n.const("fDef",(0,w._)(o||(o=_(["","[","]"])),i,E)),m=n.let("fType"),g=n.let("format");n.if((0,w._)(a||(a=_(["typeof ",' == "object" && !('," instanceof RegExp)"])),v,v),(function(){return n.assign(m,(0,w._)(s||(s=_(["",'.type || "string"'])),v)).assign(g,(0,w._)(u||(u=_(["",".validate"])),v))}),(function(){return n.assign(m,(0,w._)(l||(l=_(['"string"'])))).assign(g,v)})),e.fail$data((0,w.or)(!1===O.strictSchema?w.nil:(0,w._)(c||(c=_([""," && !",""])),E,g),function(){var e=C.$async?(0,w._)(f||(f=_(["(",".async ? await ","(",") : ","(","))"])),v,g,r,g,r):(0,w._)(h||(h=_(["","(",")"])),g,r),n=(0,w._)(d||(d=_(["(typeof ",' == "function" ? '," : ",".test(","))"])),g,e,g,r);return(0,w._)(p||(p=_([""," && "," !== true && "," === "," && !",""])),g,g,m,t,n)}()))}():function(){var i=M.formats[S];if(!i)return void function(){if(!1===O.strictSchema)return void M.logger.warn(e());throw new Error(e());function e(){return'unknown format "'.concat(S,'" ignored in schema at path "').concat(A,'"')}}();if(!0===i)return;var o=function(e){var t=e instanceof RegExp?(0,w.regexpCode)(e):O.code.formats?(0,w._)(v||(v=_(["","",""])),O.code.formats,(0,w.getProperty)(S)):void 0,r=n.scopeValue("formats",{key:S,ref:e,code:t});if("object"==typeof e&&!(e instanceof RegExp))return[e.type||"string",e.validate,(0,w._)(m||(m=_(["",".validate"])),r)];return["string",e,r]}(i),a=x(o,3),s=a[0],u=a[1],l=a[2];s===t&&e.pass(function(){if("object"==typeof i&&!(i instanceof RegExp)&&i.async){if(!C.$async)throw new Error("async format in sync schema");return(0,w._)(g||(g=_(["await ","(",")"])),l,r)}return"function"==typeof u?(0,w._)(y||(y=_(["","(",")"])),l,r):(0,w._)(b||(b=_(["",".test(",")"])),l,r)}())}())}};t.default=S},22075:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[n(35138).default];t.default=r},16371:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},50992:function(e,t,n){"use strict";var r,i,o,a=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0});var s=n(17641),u=n(73697),l=n(45272),c={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:function(e){var t=e.schemaCode;return(0,s._)(r||(r=a(["{allowedValue: ","}"])),t)}},code:function(e){var t=e.gen,n=e.data,r=e.$data,c=e.schemaCode,f=e.schema;r||f&&"object"==typeof f?e.fail$data((0,s._)(i||(i=a(["!","(",", ",")"])),(0,u.useFunc)(t,l.default),n,c)):e.fail((0,s._)(o||(o=a([""," !== ",""])),f,n))}};t.default=c},68028:function(e,t,n){"use strict";var r,i,o,a,s=n(88148).default,u=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0});var l=n(17641),c=n(73697),f=n(45272),h={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:function(e){var t=e.schemaCode;return(0,l._)(r||(r=u(["{allowedValues: ","}"])),t)}},code:function(e){var t=e.gen,n=e.data,r=e.$data,h=e.schema,d=e.schemaCode,p=e.it;if(!r&&0===h.length)throw new Error("enum must have non-empty array");var v,m=h.length>=p.opts.loopEnum,g=(0,c.useFunc)(t,f.default);if(m||r)v=t.let("valid"),e.block$data(v,(function(){t.assign(v,!1),t.forOf("v",d,(function(e){return t.if((0,l._)(i||(i=u(["","(",", ",")"])),g,n,e),(function(){return t.assign(v,!0).break()}))}))}));else{if(!Array.isArray(h))throw new Error("ajv implementation error");var y=t.const("vSchema",d);v=l.or.apply(void 0,s(h.map((function(e,t){return function(e,t){var r=h[t];return"object"===typeof r&&null!==r?(0,l._)(o||(o=u(["","(",", ","[","])"])),g,n,e,t):(0,l._)(a||(a=u([""," === ",""])),n,r)}(y,t)}))))}e.pass(v)}};t.default=h},47285:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(54428),i=n(78245),o=n(18773),a=n(86610),s=n(71346),u=n(43599),l=n(18046),c=n(10485),f=n(50992),h=n(68028),d=[r.default,i.default,o.default,a.default,s.default,u.default,l.default,c.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},f.default,h.default];t.default=d},18046:function(e,t,n){"use strict";var r,i,o,a=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0});var s=n(17641),u={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message:function(e){var t=e.keyword,n=e.schemaCode,i="maxItems"===t?"more":"fewer";return(0,s.str)(r||(r=a(["must NOT have "," than "," items"])),i,n)},params:function(e){var t=e.schemaCode;return(0,s._)(i||(i=a(["{limit: ","}"])),t)}},code:function(e){var t=e.keyword,n=e.data,r=e.schemaCode,i="maxItems"===t?s.operators.GT:s.operators.LT;e.fail$data((0,s._)(o||(o=a(["",".length "," ",""])),n,i,r))}};t.default=u},18773:function(e,t,n){"use strict";var r,i,o,a,s,u=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0});var l=n(17641),c=n(73697),f=n(79942),h={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message:function(e){var t=e.keyword,n=e.schemaCode,i="maxLength"===t?"more":"fewer";return(0,l.str)(r||(r=u(["must NOT have "," than "," characters"])),i,n)},params:function(e){var t=e.schemaCode;return(0,l._)(i||(i=u(["{limit: ","}"])),t)}},code:function(e){var t=e.keyword,n=e.data,r=e.schemaCode,i=e.it,h="maxLength"===t?l.operators.GT:l.operators.LT,d=!1===i.opts.unicode?(0,l._)(o||(o=u(["",".length"])),n):(0,l._)(a||(a=u(["","(",")"])),(0,c.useFunc)(e.gen,f.default),n);e.fail$data((0,l._)(s||(s=u([""," "," ",""])),d,h,r))}};t.default=h},54428:function(e,t,n){"use strict";var r,i,o,a=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0});var s=n(17641),u=s.operators,l={maximum:{okStr:"<=",ok:u.LTE,fail:u.GT},minimum:{okStr:">=",ok:u.GTE,fail:u.LT},exclusiveMaximum:{okStr:"<",ok:u.LT,fail:u.GTE},exclusiveMinimum:{okStr:">",ok:u.GT,fail:u.LTE}},c={message:function(e){var t=e.keyword,n=e.schemaCode;return(0,s.str)(r||(r=a(["must be "," ",""])),l[t].okStr,n)},params:function(e){var t=e.keyword,n=e.schemaCode;return(0,s._)(i||(i=a(["{comparison: ",", limit: ","}"])),l[t].okStr,n)}},f={keyword:Object.keys(l),type:"number",schemaType:"number",$data:!0,error:c,code:function(e){var t=e.keyword,n=e.data,r=e.schemaCode;e.fail$data((0,s._)(o||(o=a([""," "," "," || isNaN(",")"])),n,l[t].fail,r,n))}};t.default=f},71346:function(e,t,n){"use strict";var r,i,o,a=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0});var s=n(17641),u={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message:function(e){var t=e.keyword,n=e.schemaCode,i="maxProperties"===t?"more":"fewer";return(0,s.str)(r||(r=a(["must NOT have "," than "," items"])),i,n)},params:function(e){var t=e.schemaCode;return(0,s._)(i||(i=a(["{limit: ","}"])),t)}},code:function(e){var t=e.keyword,n=e.data,r=e.schemaCode,i="maxProperties"===t?s.operators.GT:s.operators.LT;e.fail$data((0,s._)(o||(o=a(["Object.keys(",").length "," ",""])),n,i,r))}};t.default=u},78245:function(e,t,n){"use strict";var r,i,o,a,s,u=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0});var l=n(17641),c={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:function(e){var t=e.schemaCode;return(0,l.str)(r||(r=u(["must be multiple of ",""])),t)},params:function(e){var t=e.schemaCode;return(0,l._)(i||(i=u(["{multipleOf: ","}"])),t)}},code:function(e){var t=e.gen,n=e.data,r=e.schemaCode,i=e.it.opts.multipleOfPrecision,c=t.let("res"),f=i?(0,l._)(o||(o=u(["Math.abs(Math.round(",") - ",") > 1e-",""])),c,c,i):(0,l._)(a||(a=u([""," !== parseInt(",")"])),c,c);e.fail$data((0,l._)(s||(s=u(["("," === 0 || ("," = ","/",", ","))"])),r,c,n,r,f))}};t.default=c},86610:function(e,t,n){"use strict";var r,i,o,a,s=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0});var u=n(54965),l=n(17641),c={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:function(e){var t=e.schemaCode;return(0,l.str)(r||(r=s(['must match pattern "','"'])),t)},params:function(e){var t=e.schemaCode;return(0,l._)(i||(i=s(["{pattern: ","}"])),t)}},code:function(e){var t=e.data,n=e.$data,r=e.schema,i=e.schemaCode,c=e.it.opts.unicodeRegExp?"u":"",f=n?(0,l._)(o||(o=s(["(new RegExp(",", ","))"])),i,c):(0,u.usePattern)(e,r);e.fail$data((0,l._)(a||(a=s(["!",".test(",")"])),f,t))}};t.default=c},43599:function(e,t,n){"use strict";var r,i,o=n(35724).default,a=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0});var s=n(54965),u=n(17641),l=n(73697),c={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:function(e){var t=e.params.missingProperty;return(0,u.str)(r||(r=a(["must have required property '","'"])),t)},params:function(e){var t=e.params.missingProperty;return(0,u._)(i||(i=a(["{missingProperty: ","}"])),t)}},code:function(e){var t=e.gen,n=e.schema,r=e.schemaCode,i=e.data,a=e.$data,c=e.it,f=c.opts;if(a||0!==n.length){var h=n.length>=f.loopRequired;if(c.allErrors?function(){if(h||a)e.block$data(u.nil,x);else{var t,r=o(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;(0,s.checkReportMissingProp)(e,i)}}catch(l){r.e(l)}finally{r.f()}}}():function(){var o=t.let("missing");if(h||a){var l=t.let("valid",!0);e.block$data(l,(function(){return function(n,o){e.setParams({missingProperty:n}),t.forOf(n,r,(function(){t.assign(o,(0,s.propertyInData)(t,i,n,f.ownProperties)),t.if((0,u.not)(o),(function(){e.error(),t.break()}))}),u.nil)}(o,l)})),e.ok(l)}else t.if((0,s.checkMissingProp)(e,n,o)),(0,s.reportMissingProp)(e,o),t.else()}(),f.strictRequired){var d,p=e.parentSchema.properties,v=e.it.definedProperties,m=o(n);try{for(m.s();!(d=m.n()).done;){var g=d.value;if(void 0===(null===p||void 0===p?void 0:p[g])&&!v.has(g)){var y=c.schemaEnv.baseId+c.errSchemaPath,b='required property "'.concat(g,'" is not defined at "').concat(y,'" (strictRequired)');(0,l.checkStrictMode)(c,b,c.opts.strictRequired)}}}catch(_){m.e(_)}finally{m.f()}}}function x(){t.forOf("prop",r,(function(n){e.setParams({missingProperty:n}),t.if((0,s.noPropertyInData)(t,i,n,f.ownProperties),(function(){return e.error()}))}))}}};t.default=c},10485:function(e,t,n){"use strict";var r,i,o,a,s,u,l,c,f,h,d,p,v,m,g,y,b,x=n(61874).default;Object.defineProperty(t,"__esModule",{value:!0});var _=n(5286),w=n(17641),S=n(73697),E=n(45272),k={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:function(e){var t=e.params,n=t.i,i=t.j;return(0,w.str)(r||(r=x(["must NOT have duplicate items (items ## "," and "," are identical)"])),i,n)},params:function(e){var t=e.params,n=t.i,r=t.j;return(0,w._)(i||(i=x(["{i: ",", j: ","}"])),n,r)}},code:function(e){var t=e.gen,n=e.data,r=e.$data,i=e.schema,k=e.parentSchema,O=e.schemaCode,A=e.it;if(r||i){var C=t.let("valid"),M=k.items?(0,_.getSchemaTypes)(k.items):[];e.block$data(C,(function(){var r=t.let("i",(0,w._)(a||(a=x(["",".length"])),n)),i=t.let("j");e.setParams({i:r,j:i}),t.assign(C,!0),t.if((0,w._)(s||(s=x([""," > 1"])),r),(function(){return(M.length>0&&!M.some((function(e){return"object"===e||"array"===e}))?T:P)(r,i)}))}),(0,w._)(o||(o=x([""," === false"])),O)),e.ok(C)}function T(r,i){var o=t.name("item"),a=(0,_.checkDataTypes)(M,o,A.opts.strictNumbers,_.DataType.Wrong),s=t.const("indices",(0,w._)(u||(u=x(["{}"]))));t.for((0,w._)(l||(l=x([";","--;"])),r),(function(){t.let(o,(0,w._)(c||(c=x(["","[","]"])),n,r)),t.if(a,(0,w._)(f||(f=x(["continue"])))),M.length>1&&t.if((0,w._)(h||(h=x(["typeof ",' == "string"'])),o),(0,w._)(d||(d=x(["",' += "_"'])),o)),t.if((0,w._)(p||(p=x(["typeof ","[",'] == "number"'])),s,o),(function(){t.assign(i,(0,w._)(v||(v=x(["","[","]"])),s,o)),e.error(),t.assign(C,!1).break()})).code((0,w._)(m||(m=x(["","[","] = ",""])),s,o,r))}))}function P(r,i){var o=(0,S.useFunc)(t,E.default),a=t.name("outer");t.label(a).for((0,w._)(g||(g=x([";","--;"])),r),(function(){return t.for((0,w._)(y||(y=x([""," = ","; ","--;"])),i,r,i),(function(){return t.if((0,w._)(b||(b=x(["","(","[","], ","[","])"])),o,n,r,n,i),(function(){e.error(),t.assign(C,!1).break(a)}))}))}))}}};t.default=k},82517:function(e,t,n){"use strict";function r(e){o.length||(i(),!0),o[o.length]=e}e.exports=r;var i,o=[],a=0;function s(){for(;a<o.length;){var e=a;if(a+=1,o[e].call(),a>1024){for(var t=0,n=o.length-a;t<n;t++)o[t]=o[t+a];o.length-=a,a=0}}o.length=0,a=0,!1}var u="undefined"!==typeof n.g?n.g:self,l=u.MutationObserver||u.WebKitMutationObserver;function c(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}i="function"===typeof l?function(e){var t=1,n=new l(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(s):c(s),r.requestFlush=i,r.makeRequestCallFromTimer=c},87737:function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var i,o,a=n(26077).codes,s=a.ERR_AMBIGUOUS_ARGUMENT,u=a.ERR_INVALID_ARG_TYPE,l=a.ERR_INVALID_ARG_VALUE,c=a.ERR_INVALID_RETURN_VALUE,f=a.ERR_MISSING_ARGS,h=n(29124),d=n(40570).inspect,p=n(40570).types,v=p.isPromise,m=p.isRegExp,g=Object.assign?Object.assign:n(22086).assign,y=Object.is?Object.is:n(12370);new Map;function b(){var e=n(53675);i=e.isDeepEqual,o=e.isDeepStrictEqual}var x=!1,_=e.exports=k,w={};function S(e){if(e.message instanceof Error)throw e.message;throw new h(e)}function E(e,t,n,r){if(!n){var i=!1;if(0===t)i=!0,r="No value argument passed to `assert.ok()`";else if(r instanceof Error)throw r;var o=new h({actual:n,expected:!0,message:r,operator:"==",stackStartFn:e});throw o.generatedMessage=i,o}}function k(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E.apply(void 0,[k,t.length].concat(t))}_.fail=function e(t,n,r,i,o){var a,s=arguments.length;if(0===s)a="Failed";else if(1===s)r=t,t=void 0;else{if(!1===x){x=!0;var u=process.emitWarning?process.emitWarning:console.warn.bind(console);u("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}2===s&&(i="!=")}if(r instanceof Error)throw r;var l={actual:t,expected:n,operator:void 0===i?"fail":i,stackStartFn:o||e};void 0!==r&&(l.message=r);var c=new h(l);throw a&&(c.message=a,c.generatedMessage=!0),c},_.AssertionError=h,_.ok=k,_.equal=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");t!=n&&S({actual:t,expected:n,message:r,operator:"==",stackStartFn:e})},_.notEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");t==n&&S({actual:t,expected:n,message:r,operator:"!=",stackStartFn:e})},_.deepEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");void 0===i&&b(),i(t,n)||S({actual:t,expected:n,message:r,operator:"deepEqual",stackStartFn:e})},_.notDeepEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");void 0===i&&b(),i(t,n)&&S({actual:t,expected:n,message:r,operator:"notDeepEqual",stackStartFn:e})},_.deepStrictEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");void 0===i&&b(),o(t,n)||S({actual:t,expected:n,message:r,operator:"deepStrictEqual",stackStartFn:e})},_.notDeepStrictEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");void 0===i&&b();o(t,n)&&S({actual:t,expected:n,message:r,operator:"notDeepStrictEqual",stackStartFn:e})},_.strictEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");y(t,n)||S({actual:t,expected:n,message:r,operator:"strictEqual",stackStartFn:e})},_.notStrictEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");y(t,n)&&S({actual:t,expected:n,message:r,operator:"notStrictEqual",stackStartFn:e})};var O=function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n.forEach((function(e){e in t&&(void 0!==r&&"string"===typeof r[e]&&m(t[e])&&t[e].test(r[e])?i[e]=r[e]:i[e]=t[e])}))};function A(e,t,n,r,i,a){if(!(n in e)||!o(e[n],t[n])){if(!r){var s=new O(e,i),u=new O(t,i,e),l=new h({actual:s,expected:u,operator:"deepStrictEqual",stackStartFn:a});throw l.actual=e,l.expected=t,l.operator=a.name,l}S({actual:e,expected:t,message:r,operator:a.name,stackStartFn:a})}}function C(e,t,n,o){if("function"!==typeof t){if(m(t))return t.test(e);if(2===arguments.length)throw new u("expected",["Function","RegExp"],t);if("object"!==r(e)||null===e){var a=new h({actual:e,expected:t,message:n,operator:"deepStrictEqual",stackStartFn:o});throw a.operator=o.name,a}var s=Object.keys(t);if(t instanceof Error)s.push("name","message");else if(0===s.length)throw new l("error",t,"may not be an empty object");return void 0===i&&b(),s.forEach((function(r){"string"===typeof e[r]&&m(t[r])&&t[r].test(e[r])||A(e,t,r,n,s,o)})),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function M(e){if("function"!==typeof e)throw new u("fn","Function",e);try{e()}catch(t){return t}return w}function T(e){return v(e)||null!==e&&"object"===r(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function P(e){return Promise.resolve().then((function(){var t;if("function"===typeof e){if(!T(t=e()))throw new c("instance of Promise","promiseFn",t)}else{if(!T(e))throw new u("promiseFn",["Function","Promise"],e);t=e}return Promise.resolve().then((function(){return t})).then((function(){return w})).catch((function(e){return e}))}))}function R(e,t,n,i){if("string"===typeof n){if(4===arguments.length)throw new u("error",["Object","Error","Function","RegExp"],n);if("object"===r(t)&&null!==t){if(t.message===n)throw new s("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===n)throw new s("error/message",'The error "'.concat(t,'" is identical to the message.'));i=n,n=void 0}else if(null!=n&&"object"!==r(n)&&"function"!==typeof n)throw new u("error",["Object","Error","Function","RegExp"],n);if(t===w){var o="";n&&n.name&&(o+=" (".concat(n.name,")")),o+=i?": ".concat(i):".";var a="rejects"===e.name?"rejection":"exception";S({actual:void 0,expected:n,operator:e.name,message:"Missing expected ".concat(a).concat(o),stackStartFn:e})}if(n&&!C(t,n,i,e))throw t}function I(e,t,n,r){if(t!==w){if("string"===typeof n&&(r=n,n=void 0),!n||C(t,n)){var i=r?": ".concat(r):".",o="doesNotReject"===e.name?"rejection":"exception";S({actual:t,expected:n,operator:e.name,message:"Got unwanted ".concat(o).concat(i,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}function L(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E.apply(void 0,[L,t.length].concat(t))}_.throws=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];R.apply(void 0,[e,M(t)].concat(r))},_.rejects=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return P(t).then((function(t){return R.apply(void 0,[e,t].concat(r))}))},_.doesNotThrow=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];I.apply(void 0,[e,M(t)].concat(r))},_.doesNotReject=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return P(t).then((function(t){return I.apply(void 0,[e,t].concat(r))}))},_.ifError=function e(t){if(null!==t&&void 0!==t){var n="ifError got unwanted exception: ";"object"===r(t)&&"string"===typeof t.message?0===t.message.length&&t.constructor?n+=t.constructor.name:n+=t.message:n+=d(t);var i=new h({actual:t,expected:null,operator:"ifError",message:n,stackStartFn:e}),o=t.stack;if("string"===typeof o){var a=o.split("\n");a.shift();for(var s=i.stack.split("\n"),u=0;u<a.length;u++){var l=s.indexOf(a[u]);if(-1!==l){s=s.slice(0,l);break}}i.stack="".concat(s.join("\n"),"\n").concat(a.join("\n"))}throw i}},_.strict=g(L,_,{equal:_.strictEqual,deepEqual:_.deepStrictEqual,notEqual:_.notStrictEqual,notDeepEqual:_.notDeepStrictEqual}),_.strict.strict=_.strict},29124:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){var t="function"===typeof Map?new Map:void 0;return s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return l(e,arguments,f(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,e)},s(e)}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e,t,n){return l=u()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i},l.apply(null,arguments)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function h(e){return h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}var d=n(40570).inspect,p=n(26077).codes.ERR_INVALID_ARG_TYPE;function v(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}var m="",g="",y="",b="",x={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function _(e){var t=Object.keys(e),n=Object.create(Object.getPrototypeOf(e));return t.forEach((function(t){n[t]=e[t]})),Object.defineProperty(n,"message",{value:e.message}),n}function w(e){return d(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function S(e,t,n){var r="",i="",o=0,a="",s=!1,u=w(e),l=u.split("\n"),c=w(t).split("\n"),f=0,d="";if("strictEqual"===n&&"object"===h(e)&&"object"===h(t)&&null!==e&&null!==t&&(n="strictEqualObject"),1===l.length&&1===c.length&&l[0]!==c[0]){var p=l[0].length+c[0].length;if(p<=10){if(("object"!==h(e)||null===e)&&("object"!==h(t)||null===t)&&(0!==e||0!==t))return"".concat(x[n],"\n\n")+"".concat(l[0]," !== ").concat(c[0],"\n")}else if("strictEqualObject"!==n){if(p<(process.stderr&&process.stderr.isTTY?process.stderr.columns:80)){for(;l[0][f]===c[0][f];)f++;f>2&&(d="\n  ".concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var n=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,n-e.length)}(" ",f),"^"),f=0)}}}for(var _=l[l.length-1],S=c[c.length-1];_===S&&(f++<2?a="\n  ".concat(_).concat(a):r=_,l.pop(),c.pop(),0!==l.length&&0!==c.length);)_=l[l.length-1],S=c[c.length-1];var E=Math.max(l.length,c.length);if(0===E){var k=u.split("\n");if(k.length>30)for(k[26]="".concat(m,"...").concat(b);k.length>27;)k.pop();return"".concat(x.notIdentical,"\n\n").concat(k.join("\n"),"\n")}f>3&&(a="\n".concat(m,"...").concat(b).concat(a),s=!0),""!==r&&(a="\n  ".concat(r).concat(a),r="");var O=0,A=x[n]+"\n".concat(g,"+ actual").concat(b," ").concat(y,"- expected").concat(b),C=" ".concat(m,"...").concat(b," Lines skipped");for(f=0;f<E;f++){var M=f-o;if(l.length<f+1)M>1&&f>2&&(M>4?(i+="\n".concat(m,"...").concat(b),s=!0):M>3&&(i+="\n  ".concat(c[f-2]),O++),i+="\n  ".concat(c[f-1]),O++),o=f,r+="\n".concat(y,"-").concat(b," ").concat(c[f]),O++;else if(c.length<f+1)M>1&&f>2&&(M>4?(i+="\n".concat(m,"...").concat(b),s=!0):M>3&&(i+="\n  ".concat(l[f-2]),O++),i+="\n  ".concat(l[f-1]),O++),o=f,i+="\n".concat(g,"+").concat(b," ").concat(l[f]),O++;else{var T=c[f],P=l[f],R=P!==T&&(!v(P,",")||P.slice(0,-1)!==T);R&&v(T,",")&&T.slice(0,-1)===P&&(R=!1,P+=","),R?(M>1&&f>2&&(M>4?(i+="\n".concat(m,"...").concat(b),s=!0):M>3&&(i+="\n  ".concat(l[f-2]),O++),i+="\n  ".concat(l[f-1]),O++),o=f,i+="\n".concat(g,"+").concat(b," ").concat(P),r+="\n".concat(y,"-").concat(b," ").concat(T),O+=2):(i+=r,r="",1!==M&&0!==f||(i+="\n  ".concat(P),O++))}if(O>20&&f<E-2)return"".concat(A).concat(C,"\n").concat(i,"\n").concat(m,"...").concat(b).concat(r,"\n")+"".concat(m,"...").concat(b)}return"".concat(A).concat(s?C:"","\n").concat(i).concat(r).concat(a).concat(d)}var E=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"object"!==h(e)||null===e)throw new p("options","Object",e);var r=e.message,i=e.operator,s=e.stackStartFn,u=e.actual,l=e.expected,c=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=r)n=o(this,f(t).call(this,String(r)));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&1!==process.stderr.getColorDepth()?(m="\x1b[34m",g="\x1b[32m",b="\x1b[39m",y="\x1b[31m"):(m="",g="",b="",y="")),"object"===h(u)&&null!==u&&"object"===h(l)&&null!==l&&"stack"in u&&u instanceof Error&&"stack"in l&&l instanceof Error&&(u=_(u),l=_(l)),"deepStrictEqual"===i||"strictEqual"===i)n=o(this,f(t).call(this,S(u,l,i)));else if("notDeepStrictEqual"===i||"notStrictEqual"===i){var d=x[i],v=w(u).split("\n");if("notStrictEqual"===i&&"object"===h(u)&&null!==u&&(d=x.notStrictEqualObject),v.length>30)for(v[26]="".concat(m,"...").concat(b);v.length>27;)v.pop();n=1===v.length?o(this,f(t).call(this,"".concat(d," ").concat(v[0]))):o(this,f(t).call(this,"".concat(d,"\n\n").concat(v.join("\n"),"\n")))}else{var E=w(u),k="",O=x[i];"notDeepEqual"===i||"notEqual"===i?(E="".concat(x[i],"\n\n").concat(E)).length>1024&&(E="".concat(E.slice(0,1021),"...")):(k="".concat(w(l)),E.length>512&&(E="".concat(E.slice(0,509),"...")),k.length>512&&(k="".concat(k.slice(0,509),"...")),"deepEqual"===i||"equal"===i?E="".concat(O,"\n\n").concat(E,"\n\nshould equal\n\n"):k=" ".concat(i," ").concat(k)),n=o(this,f(t).call(this,"".concat(E).concat(k)))}return Error.stackTraceLimit=c,n.generatedMessage=!r,Object.defineProperty(a(n),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),n.code="ERR_ASSERTION",n.actual=u,n.expected=l,n.operator=i,Error.captureStackTrace&&Error.captureStackTrace(a(n),s),n.stack,n.name="AssertionError",o(n)}var n,s,u;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,s=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:d.custom,value:function(e,t){return d(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}({},t,{customInspect:!1,depth:0}))}}],s&&i(n.prototype,s),u&&i(n,u),t}(s(Error));e.exports=E},26077:function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s,u,l={};function c(e,t,n){n||(n=Error);var r=function(n){function r(n,a,s){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),u=i(this,o(r).call(this,function(e,n,r){return"string"===typeof t?t:t(e,n,r)}(n,a,s))),u.code=e,u}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(r,n),r}(n);l[e]=r}function f(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}c("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),c("ERR_INVALID_ARG_TYPE",(function(e,t,i){var o,a,u,l;if(void 0===s&&(s=n(87737)),s("string"===typeof e,"'name' must be a string"),"string"===typeof t&&(a="not ",t.substr(!u||u<0?0:+u,a.length)===a)?(o="must not be",t=t.replace(/^not /,"")):o="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))l="The ".concat(e," ").concat(o," ").concat(f(t,"type"));else{var c=function(e,t,n){return"number"!==typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";l='The "'.concat(e,'" ').concat(c," ").concat(o," ").concat(f(t,"type"))}return l+=". Received type ".concat(r(i))}),TypeError),c("ERR_INVALID_ARG_VALUE",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===u&&(u=n(40570));var i=u.inspect(t);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(r,". Received ").concat(i)}),TypeError,RangeError),c("ERR_INVALID_RETURN_VALUE",(function(e,t,n){var i;return i=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(r(n)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(i,".")}),TypeError),c("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];void 0===s&&(s=n(87737)),s(t.length>0,"At least one arg needs to be specified");var i="The ",o=t.length;switch(t=t.map((function(e){return'"'.concat(e,'"')})),o){case 1:i+="".concat(t[0]," argument");break;case 2:i+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:i+=t.slice(0,o-1).join(", "),i+=", and ".concat(t[o-1]," arguments")}return"".concat(i," must be specified")}),TypeError),e.exports.codes=l},53675:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o=void 0!==/a/g.flags,a=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},s=function(e){var t=[];return e.forEach((function(e,n){return t.push([n,e])})),t},u=Object.is?Object.is:n(12370),l=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},c=Number.isNaN?Number.isNaN:n(63861);function f(e){return e.call.bind(e)}var h=f(Object.prototype.hasOwnProperty),d=f(Object.prototype.propertyIsEnumerable),p=f(Object.prototype.toString),v=n(40570).types,m=v.isAnyArrayBuffer,g=v.isArrayBufferView,y=v.isDate,b=v.isMap,x=v.isRegExp,_=v.isSet,w=v.isNativeError,S=v.isBoxedPrimitive,E=v.isNumberObject,k=v.isStringObject,O=v.isBooleanObject,A=v.isBigIntObject,C=v.isSymbolObject,M=v.isFloat32Array,T=v.isFloat64Array;function P(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<48||n>57)return!0}return 10===e.length&&e>=Math.pow(2,32)}function R(e){return Object.keys(e).filter(P).concat(l(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function I(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function L(e,t,n,r){if(e===t)return 0!==e||(!n||u(e,t));if(n){if("object"!==i(e))return"number"===typeof e&&c(e)&&c(t);if("object"!==i(t)||null===e||null===t)return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==i(e))return(null===t||"object"!==i(t))&&e==t;if(null===t||"object"!==i(t))return!1}var a,s,l,f,h=p(e);if(h!==p(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var d=R(e),v=R(t);return d.length===v.length&&j(e,t,n,r,1,d)}if("[object Object]"===h&&(!b(e)&&b(t)||!_(e)&&_(t)))return!1;if(y(e)){if(!y(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(x(e)){if(!x(t)||(l=e,f=t,!(o?l.source===f.source&&l.flags===f.flags:RegExp.prototype.toString.call(l)===RegExp.prototype.toString.call(f))))return!1}else if(w(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(g(e)){if(n||!M(e)&&!T(e)){if(!function(e,t){return e.byteLength===t.byteLength&&0===I(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}(e,t))return!1}else if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}(e,t))return!1;var P=R(e),L=R(t);return P.length===L.length&&j(e,t,n,r,0,P)}if(_(e))return!(!_(t)||e.size!==t.size)&&j(e,t,n,r,2);if(b(e))return!(!b(t)||e.size!==t.size)&&j(e,t,n,r,3);if(m(e)){if(s=t,(a=e).byteLength!==s.byteLength||0!==I(new Uint8Array(a),new Uint8Array(s)))return!1}else if(S(e)&&!function(e,t){return E(e)?E(t)&&u(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):k(e)?k(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):O(e)?O(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):A(e)?A(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):C(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}(e,t))return!1}return j(e,t,n,r,0)}function N(e,t){return t.filter((function(t){return d(e,t)}))}function j(e,t,n,r,i,o){if(5===arguments.length){o=Object.keys(e);var a=Object.keys(t);if(o.length!==a.length)return!1}for(var s=0;s<o.length;s++)if(!h(t,o[s]))return!1;if(n&&5===arguments.length){var u=l(e);if(0!==u.length){var c=0;for(s=0;s<u.length;s++){var f=u[s];if(d(e,f)){if(!d(t,f))return!1;o.push(f),c++}else if(d(t,f))return!1}var p=l(t);if(u.length!==p.length&&N(t,p).length!==c)return!1}else{var v=l(t);if(0!==v.length&&0!==N(t,v).length)return!1}}if(0===o.length&&(0===i||1===i&&0===e.length||0===e.size))return!0;if(void 0===r)r={val1:new Map,val2:new Map,position:0};else{var m=r.val1.get(e);if(void 0!==m){var g=r.val2.get(t);if(void 0!==g)return m===g}r.position++}r.val1.set(e,r.position),r.val2.set(t,r.position);var y=U(e,t,n,o,r,i);return r.val1.delete(e),r.val2.delete(t),y}function D(e,t,n,r){for(var i=a(e),o=0;o<i.length;o++){var s=i[o];if(L(t,s,n,r))return e.delete(s),!0}return!1}function B(e){switch(i(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(c(e))return!1}return!0}function z(e,t,n){var r=B(n);return null!=r?r:t.has(r)&&!e.has(r)}function F(e,t,n,r,i){var o=B(n);if(null!=o)return o;var a=t.get(o);return!(void 0===a&&!t.has(o)||!L(r,a,!1,i))&&(!e.has(o)&&L(r,a,!1,i))}function V(e,t,n,r,i,o){for(var s=a(e),u=0;u<s.length;u++){var l=s[u];if(L(n,l,i,o)&&L(r,t.get(l),i,o))return e.delete(l),!0}return!1}function U(e,t,n,o,u,l){var c=0;if(2===l){if(!function(e,t,n,r){for(var o=null,s=a(e),u=0;u<s.length;u++){var l=s[u];if("object"===i(l)&&null!==l)null===o&&(o=new Set),o.add(l);else if(!t.has(l)){if(n)return!1;if(!z(e,t,l))return!1;null===o&&(o=new Set),o.add(l)}}if(null!==o){for(var c=a(t),f=0;f<c.length;f++){var h=c[f];if("object"===i(h)&&null!==h){if(!D(o,h,n,r))return!1}else if(!n&&!e.has(h)&&!D(o,h,n,r))return!1}return 0===o.size}return!0}(e,t,n,u))return!1}else if(3===l){if(!function(e,t,n,o){for(var a=null,u=s(e),l=0;l<u.length;l++){var c=r(u[l],2),f=c[0],h=c[1];if("object"===i(f)&&null!==f)null===a&&(a=new Set),a.add(f);else{var d=t.get(f);if(void 0===d&&!t.has(f)||!L(h,d,n,o)){if(n)return!1;if(!F(e,t,f,h,o))return!1;null===a&&(a=new Set),a.add(f)}}}if(null!==a){for(var p=s(t),v=0;v<p.length;v++){var m=r(p[v],2),g=(f=m[0],m[1]);if("object"===i(f)&&null!==f){if(!V(a,e,f,g,n,o))return!1}else if(!n&&(!e.has(f)||!L(e.get(f),g,!1,o))&&!V(a,e,f,g,!1,o))return!1}return 0===a.size}return!0}(e,t,n,u))return!1}else if(1===l)for(;c<e.length;c++){if(!h(e,c)){if(h(t,c))return!1;for(var f=Object.keys(e);c<f.length;c++){var d=f[c];if(!h(t,d)||!L(e[d],t[d],n,u))return!1}return f.length===Object.keys(t).length}if(!h(t,c)||!L(e[c],t[c],n,u))return!1}for(c=0;c<o.length;c++){var p=o[c];if(!L(e[p],t[p],n,u))return!1}return!0}e.exports={isDeepEqual:function(e,t){return L(e,t,false)},isDeepStrictEqual:function(e,t){return L(e,t,true)}}},94946:function(e,t){"use strict";t.Z=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",i=(e.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?o===t.replace(/\/.*$/,""):i===t}))}return!0}},86045:function(e,t,n){"use strict";var r=n(75223),i=n(23942),o=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"===typeof n&&o(e,".prototype.")>-1?i(n):n}},23942:function(e,t,n){"use strict";var r=n(8572),i=n(75223),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(a,o),u=i("%Object.getOwnPropertyDescriptor%",!0),l=i("%Object.defineProperty%",!0),c=i("%Math.max%");if(l)try{l({},"a",{value:1})}catch(h){l=null}e.exports=function(e){var t=s(r,a,arguments);if(u&&l){var n=u(t,"length");n.configurable&&l(t,"length",{value:1+c(0,e.length-(arguments.length-1))})}return t};var f=function(){return s(r,o,arguments)};l?l(e.exports,"apply",{value:f}):e.exports.apply=f},34516:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},61205:function(e,t,n){"use strict";function r(e){var t,n,i="";if("string"===typeof e||"number"===typeof e)i+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}n.d(t,{Z:function(){return i}})},13792:function(e,t,n){var r=n(94766),i=n(80125),o=n(66307),a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not a function")}},30759:function(e,t,n){var r=n(94766),i=n(84079),o=n(66307),a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not a constructor")}},43024:function(e,t,n){var r=n(94766),i=n(80125),o=r.String,a=r.TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw a("Can't set "+o(e)+" as a prototype")}},1128:function(e,t,n){var r=n(51704),i=n(93522),o=n(25047),a=r("unscopables"),s=Array.prototype;void 0==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},51127:function(e,t,n){"use strict";var r=n(7851).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},6432:function(e,t,n){var r=n(94766),i=n(73982),o=r.TypeError;e.exports=function(e,t){if(i(t,e))return e;throw o("Incorrect invocation")}},51971:function(e,t,n){var r=n(94766),i=n(36372),o=r.String,a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not an object")}},84440:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},44067:function(e,t,n){var r=n(84747);e.exports=r((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},6437:function(e,t,n){"use strict";var r,i,o,a=n(84440),s=n(43404),u=n(94766),l=n(80125),c=n(36372),f=n(30746),h=n(79694),d=n(66307),p=n(1068),v=n(87691),m=n(25047).f,g=n(73982),y=n(9628),b=n(60801),x=n(51704),_=n(97701),w=u.Int8Array,S=w&&w.prototype,E=u.Uint8ClampedArray,k=E&&E.prototype,O=w&&y(w),A=S&&y(S),C=Object.prototype,M=u.TypeError,T=x("toStringTag"),P=_("TYPED_ARRAY_TAG"),R=_("TYPED_ARRAY_CONSTRUCTOR"),I=a&&!!b&&"Opera"!==h(u.opera),L=!1,N={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},j={BigInt64Array:8,BigUint64Array:8},D=function(e){if(!c(e))return!1;var t=h(e);return f(N,t)||f(j,t)};for(r in N)(o=(i=u[r])&&i.prototype)?p(o,R,i):I=!1;for(r in j)(o=(i=u[r])&&i.prototype)&&p(o,R,i);if((!I||!l(O)||O===Function.prototype)&&(O=function(){throw M("Incorrect invocation")},I))for(r in N)u[r]&&b(u[r],O);if((!I||!A||A===C)&&(A=O.prototype,I))for(r in N)u[r]&&b(u[r].prototype,A);if(I&&y(k)!==A&&b(k,A),s&&!f(A,T))for(r in L=!0,m(A,T,{get:function(){return c(this)?this[P]:void 0}}),N)u[r]&&p(u[r],P,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_CONSTRUCTOR:R,TYPED_ARRAY_TAG:L&&P,aTypedArray:function(e){if(D(e))return e;throw M("Target is not a typed array")},aTypedArrayConstructor:function(e){if(l(e)&&(!b||g(O,e)))return e;throw M(d(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(s){if(n)for(var i in N){var o=u[i];if(o&&f(o.prototype,e))try{delete o.prototype[e]}catch(a){try{o.prototype[e]=t}catch(l){}}}A[e]&&!n||v(A,e,n?t:I&&S[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(s){if(b){if(n)for(r in N)if((i=u[r])&&f(i,e))try{delete i[e]}catch(o){}if(O[e]&&!n)return;try{return v(O,e,n?t:I&&O[e]||t)}catch(o){}}for(r in N)!(i=u[r])||i[e]&&!n||v(i,e,t)}},isView:function(e){if(!c(e))return!1;var t=h(e);return"DataView"===t||f(N,t)||f(j,t)},isTypedArray:D,TypedArray:O,TypedArrayPrototype:A}},30558:function(e,t,n){"use strict";var r=n(94766),i=n(97765),o=n(43404),a=n(84440),s=n(3583),u=n(1068),l=n(35454),c=n(84747),f=n(6432),h=n(32397),d=n(87452),p=n(89494),v=n(84712),m=n(9628),g=n(60801),y=n(47233).f,b=n(25047).f,x=n(4551),_=n(64277),w=n(59859),S=n(18417),E=s.PROPER,k=s.CONFIGURABLE,O=S.get,A=S.set,C="ArrayBuffer",M="DataView",T="Wrong index",P=r.ArrayBuffer,R=P,I=R&&R.prototype,L=r.DataView,N=L&&L.prototype,j=Object.prototype,D=r.Array,B=r.RangeError,z=i(x),F=i([].reverse),V=v.pack,U=v.unpack,Z=function(e){return[255&e]},H=function(e){return[255&e,e>>8&255]},G=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},W=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},q=function(e){return V(e,23,4)},K=function(e){return V(e,52,8)},Y=function(e,t){b(e.prototype,t,{get:function(){return O(this)[t]}})},X=function(e,t,n,r){var i=p(n),o=O(e);if(i+t>o.byteLength)throw B(T);var a=O(o.buffer).bytes,s=i+o.byteOffset,u=_(a,s,s+t);return r?u:F(u)},$=function(e,t,n,r,i,o){var a=p(n),s=O(e);if(a+t>s.byteLength)throw B(T);for(var u=O(s.buffer).bytes,l=a+s.byteOffset,c=r(+i),f=0;f<t;f++)u[l+f]=c[o?f:t-f-1]};if(a){var J=E&&P.name!==C;if(c((function(){P(1)}))&&c((function(){new P(-1)}))&&!c((function(){return new P,new P(1.5),new P(NaN),J&&!k})))J&&k&&u(P,"name",C);else{(R=function(e){return f(this,I),new P(p(e))}).prototype=I;for(var Q,ee=y(P),te=0;ee.length>te;)(Q=ee[te++])in R||u(R,Q,P[Q]);I.constructor=R}g&&m(N)!==j&&g(N,j);var ne=new L(new R(2)),re=i(N.setInt8);ne.setInt8(0,2147483648),ne.setInt8(1,2147483649),!ne.getInt8(0)&&ne.getInt8(1)||l(N,{setInt8:function(e,t){re(this,e,t<<24>>24)},setUint8:function(e,t){re(this,e,t<<24>>24)}},{unsafe:!0})}else I=(R=function(e){f(this,I);var t=p(e);A(this,{bytes:z(D(t),0),byteLength:t}),o||(this.byteLength=t)}).prototype,N=(L=function(e,t,n){f(this,N),f(e,I);var r=O(e).byteLength,i=h(t);if(i<0||i>r)throw B("Wrong offset");if(i+(n=void 0===n?r-i:d(n))>r)throw B("Wrong length");A(this,{buffer:e,byteLength:n,byteOffset:i}),o||(this.buffer=e,this.byteLength=n,this.byteOffset=i)}).prototype,o&&(Y(R,"byteLength"),Y(L,"buffer"),Y(L,"byteLength"),Y(L,"byteOffset")),l(N,{getInt8:function(e){return X(this,1,e)[0]<<24>>24},getUint8:function(e){return X(this,1,e)[0]},getInt16:function(e){var t=X(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=X(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return W(X(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return W(X(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return U(X(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return U(X(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){$(this,1,e,Z,t)},setUint8:function(e,t){$(this,1,e,Z,t)},setInt16:function(e,t){$(this,2,e,H,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){$(this,2,e,H,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){$(this,4,e,G,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){$(this,4,e,G,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){$(this,4,e,q,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){$(this,8,e,K,t,arguments.length>2?arguments[2]:void 0)}});w(R,C),w(L,M),e.exports={ArrayBuffer:R,DataView:L}},58945:function(e,t,n){"use strict";var r=n(64311),i=n(64620),o=n(64770),a=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),s=o(n),u=i(e,s),l=i(t,s),c=arguments.length>2?arguments[2]:void 0,f=a((void 0===c?s:i(c,s))-l,s-u),h=1;for(l<u&&u<l+f&&(h=-1,l+=f-1,u+=f-1);f-- >0;)l in n?n[u]=n[l]:delete n[u],u+=h,l+=h;return n}},4551:function(e,t,n){"use strict";var r=n(64311),i=n(64620),o=n(64770);e.exports=function(e){for(var t=r(this),n=o(t),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,l=void 0===u?n:i(u,n);l>s;)t[s++]=e;return t}},85792:function(e,t,n){"use strict";var r=n(7397).forEach,i=n(71703)("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},9363:function(e,t,n){var r=n(64770);e.exports=function(e,t){for(var n=0,i=r(t),o=new e(i);i>n;)o[n]=t[n++];return o}},34183:function(e,t,n){"use strict";var r=n(94766),i=n(46630),o=n(2012),a=n(64311),s=n(64510),u=n(1719),l=n(84079),c=n(64770),f=n(36063),h=n(78556),d=n(90525),p=r.Array;e.exports=function(e){var t=a(e),n=l(this),r=arguments.length,v=r>1?arguments[1]:void 0,m=void 0!==v;m&&(v=i(v,r>2?arguments[2]:void 0));var g,y,b,x,_,w,S=d(t),E=0;if(!S||this==p&&u(S))for(g=c(t),y=n?new this(g):p(g);g>E;E++)w=m?v(t[E],E):t[E],f(y,E,w);else for(_=(x=h(t,S)).next,y=n?new this:[];!(b=o(_,x)).done;E++)w=m?s(x,v,[b.value,E],!0):b.value,f(y,E,w);return y.length=E,y}},68445:function(e,t,n){var r=n(67382),i=n(64620),o=n(64770),a=function(e){return function(t,n,a){var s,u=r(t),l=o(u),c=i(a,l);if(e&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},7397:function(e,t,n){var r=n(46630),i=n(97765),o=n(32652),a=n(64311),s=n(64770),u=n(49358),l=i([].push),c=function(e){var t=1==e,n=2==e,i=3==e,c=4==e,f=6==e,h=7==e,d=5==e||f;return function(p,v,m,g){for(var y,b,x=a(p),_=o(x),w=r(v,m),S=s(_),E=0,k=g||u,O=t?k(p,S):n||h?k(p,0):void 0;S>E;E++)if((d||E in _)&&(b=w(y=_[E],E,x),e))if(t)O[E]=b;else if(b)switch(e){case 3:return!0;case 5:return y;case 6:return E;case 2:l(O,y)}else switch(e){case 4:return!1;case 7:l(O,y)}return f?-1:i||c?c:O}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},84025:function(e,t,n){"use strict";var r=n(11465),i=n(67382),o=n(32397),a=n(64770),s=n(71703),u=Math.min,l=[].lastIndexOf,c=!!l&&1/[1].lastIndexOf(1,-0)<0,f=s("lastIndexOf"),h=c||!f;e.exports=h?function(e){if(c)return r(l,this,arguments)||0;var t=i(this),n=a(t),s=n-1;for(arguments.length>1&&(s=u(s,o(arguments[1]))),s<0&&(s=n+s);s>=0;s--)if(s in t&&t[s]===e)return s||0;return-1}:l},20364:function(e,t,n){var r=n(84747),i=n(51704),o=n(41110),a=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},71703:function(e,t,n){"use strict";var r=n(84747);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){return 1},1)}))}},15467:function(e,t,n){var r=n(94766),i=n(13792),o=n(64311),a=n(32652),s=n(64770),u=r.TypeError,l=function(e){return function(t,n,r,l){i(n);var c=o(t),f=a(c),h=s(c),d=e?h-1:0,p=e?-1:1;if(r<2)for(;;){if(d in f){l=f[d],d+=p;break}if(d+=p,e?d<0:h<=d)throw u("Reduce of empty array with no initial value")}for(;e?d>=0:h>d;d+=p)d in f&&(l=n(l,f[d],d,c));return l}};e.exports={left:l(!1),right:l(!0)}},64277:function(e,t,n){var r=n(94766),i=n(64620),o=n(64770),a=n(36063),s=r.Array,u=Math.max;e.exports=function(e,t,n){for(var r=o(e),l=i(t,r),c=i(void 0===n?r:n,r),f=s(u(c-l,0)),h=0;l<c;l++,h++)a(f,h,e[l]);return f.length=h,f}},66017:function(e,t,n){var r=n(97765);e.exports=r([].slice)},75078:function(e,t,n){var r=n(64277),i=Math.floor,o=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},a=function(e,t,n,r){for(var i=t.length,o=n.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?r(t[a],n[s])<=0?t[a++]:n[s++]:a<i?t[a++]:n[s++];return e};e.exports=function e(t,n){var s=t.length,u=i(s/2);return s<8?o(t,n):a(t,e(r(t,0,u),n),e(r(t,u),n),n)}},88306:function(e,t,n){var r=n(94766),i=n(20397),o=n(84079),a=n(36372),s=n(51704)("species"),u=r.Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,(o(t)&&(t===u||i(t.prototype))||a(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?u:t}},49358:function(e,t,n){var r=n(88306);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},64510:function(e,t,n){var r=n(51971),i=n(40771);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(a){i(e,"throw",a)}}},54580:function(e,t,n){var r=n(51704)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(s){}return n}},79641:function(e,t,n){var r=n(97765),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},79694:function(e,t,n){var r=n(94766),i=n(32827),o=n(80125),a=n(79641),s=n(51704)("toStringTag"),u=r.Object,l="Arguments"==a(function(){return arguments}());e.exports=i?a:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=u(e),s))?n:l?a(t):"Object"==(r=a(t))&&o(t.callee)?"Arguments":r}},22005:function(e,t,n){"use strict";var r=n(25047).f,i=n(93522),o=n(35454),a=n(46630),s=n(6432),u=n(57723),l=n(42974),c=n(7418),f=n(43404),h=n(95202).fastKey,d=n(18417),p=d.set,v=d.getterFor;e.exports={getConstructor:function(e,t,n,l){var c=e((function(e,r){s(e,d),p(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),f||(e.size=0),void 0!=r&&u(r,e[l],{that:e,AS_ENTRIES:n})})),d=c.prototype,m=v(t),g=function(e,t,n){var r,i,o=m(e),a=y(e,t);return a?a.value=n:(o.last=a={index:i=h(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),f?o.size++:e.size++,"F"!==i&&(o.index[i]=a)),e},y=function(e,t){var n,r=m(e),i=h(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return o(d,{clear:function(){for(var e=m(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,f?e.size=0:this.size=0},delete:function(e){var t=this,n=m(t),r=y(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),f?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=m(this),r=a(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!y(this,e)}}),o(d,n?{get:function(e){var t=y(this,e);return t&&t.value},set:function(e,t){return g(this,0===e?0:e,t)}}:{add:function(e){return g(this,e=0===e?0:e,e)}}),f&&r(d,"size",{get:function(){return m(this).size}}),c},setStrong:function(e,t,n){var r=t+" Iterator",i=v(t),o=v(r);l(e,t,(function(e,t){p(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),c(t)}}},42380:function(e,t,n){"use strict";var r=n(97765),i=n(35454),o=n(95202).getWeakData,a=n(51971),s=n(36372),u=n(6432),l=n(57723),c=n(7397),f=n(30746),h=n(18417),d=h.set,p=h.getterFor,v=c.find,m=c.findIndex,g=r([].splice),y=0,b=function(e){return e.frozen||(e.frozen=new x)},x=function(){this.entries=[]},_=function(e,t){return v(e.entries,(function(e){return e[0]===t}))};x.prototype={get:function(e){var t=_(this,e);if(t)return t[1]},has:function(e){return!!_(this,e)},set:function(e,t){var n=_(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=m(this.entries,(function(t){return t[0]===e}));return~t&&g(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,n,r){var c=e((function(e,i){u(e,h),d(e,{type:t,id:y++,frozen:void 0}),void 0!=i&&l(i,e[r],{that:e,AS_ENTRIES:n})})),h=c.prototype,v=p(t),m=function(e,t,n){var r=v(e),i=o(a(t),!0);return!0===i?b(r).set(t,n):i[r.id]=n,e};return i(h,{delete:function(e){var t=v(this);if(!s(e))return!1;var n=o(e);return!0===n?b(t).delete(e):n&&f(n,t.id)&&delete n[t.id]},has:function(e){var t=v(this);if(!s(e))return!1;var n=o(e);return!0===n?b(t).has(e):n&&f(n,t.id)}}),i(h,n?{get:function(e){var t=v(this);if(s(e)){var n=o(e);return!0===n?b(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return m(this,e,t)}}:{add:function(e){return m(this,e,!0)}}),c}}},6886:function(e,t,n){"use strict";var r=n(95745),i=n(94766),o=n(97765),a=n(37218),s=n(87691),u=n(95202),l=n(57723),c=n(6432),f=n(80125),h=n(36372),d=n(84747),p=n(54580),v=n(59859),m=n(65758);e.exports=function(e,t,n){var g=-1!==e.indexOf("Map"),y=-1!==e.indexOf("Weak"),b=g?"set":"add",x=i[e],_=x&&x.prototype,w=x,S={},E=function(e){var t=o(_[e]);s(_,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(y&&!h(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return y&&!h(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(y&&!h(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(a(e,!f(x)||!(y||_.forEach&&!d((function(){(new x).entries().next()})))))w=n.getConstructor(t,e,g,b),u.enable();else if(a(e,!0)){var k=new w,O=k[b](y?{}:-0,1)!=k,A=d((function(){k.has(1)})),C=p((function(e){new x(e)})),M=!y&&d((function(){for(var e=new x,t=5;t--;)e[b](t,t);return!e.has(-0)}));C||((w=t((function(e,t){c(e,_);var n=m(new x,e,w);return void 0!=t&&l(t,n[b],{that:n,AS_ENTRIES:g}),n}))).prototype=_,_.constructor=w),(A||M)&&(E("delete"),E("has"),g&&E("get")),(M||O)&&E(b),y&&_.clear&&delete _.clear}return S[e]=w,r({global:!0,forced:w!=x},S),v(w,e),y||n.setStrong(w,e,g),w}},98591:function(e,t,n){var r=n(30746),i=n(7127),o=n(8113),a=n(25047);e.exports=function(e,t,n){for(var s=i(t),u=a.f,l=o.f,c=0;c<s.length;c++){var f=s[c];r(e,f)||n&&r(n,f)||u(e,f,l(t,f))}}},92911:function(e,t,n){var r=n(51704)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(i){}}return!1}},62504:function(e,t,n){var r=n(84747);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},65951:function(e,t,n){var r=n(97765),i=n(1660),o=n(84990),a=/"/g,s=r("".replace);e.exports=function(e,t,n,r){var u=o(i(e)),l="<"+t;return""!==n&&(l+=" "+n+'="'+s(o(r),a,"&quot;")+'"'),l+">"+u+"</"+t+">"}},32021:function(e,t,n){"use strict";var r=n(48293).IteratorPrototype,i=n(93522),o=n(61410),a=n(59859),s=n(78715),u=function(){return this};e.exports=function(e,t,n,l){var c=t+" Iterator";return e.prototype=i(r,{next:o(+!l,n)}),a(e,c,!1,!0),s[c]=u,e}},1068:function(e,t,n){var r=n(43404),i=n(25047),o=n(61410);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},61410:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},36063:function(e,t,n){"use strict";var r=n(83281),i=n(25047),o=n(61410);e.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,o(0,n)):e[a]=n}},63850:function(e,t,n){"use strict";var r=n(94766),i=n(51971),o=n(51386),a=r.TypeError;e.exports=function(e){if(i(this),"string"===e||"default"===e)e="string";else if("number"!==e)throw a("Incorrect hint");return o(this,e)}},42974:function(e,t,n){"use strict";var r=n(95745),i=n(2012),o=n(2744),a=n(3583),s=n(80125),u=n(32021),l=n(9628),c=n(60801),f=n(59859),h=n(1068),d=n(87691),p=n(51704),v=n(78715),m=n(48293),g=a.PROPER,y=a.CONFIGURABLE,b=m.IteratorPrototype,x=m.BUGGY_SAFARI_ITERATORS,_=p("iterator"),w="keys",S="values",E="entries",k=function(){return this};e.exports=function(e,t,n,a,p,m,O){u(n,t,a);var A,C,M,T=function(e){if(e===p&&N)return N;if(!x&&e in I)return I[e];switch(e){case w:case S:case E:return function(){return new n(this,e)}}return function(){return new n(this)}},P=t+" Iterator",R=!1,I=e.prototype,L=I[_]||I["@@iterator"]||p&&I[p],N=!x&&L||T(p),j="Array"==t&&I.entries||L;if(j&&(A=l(j.call(new e)))!==Object.prototype&&A.next&&(o||l(A)===b||(c?c(A,b):s(A[_])||d(A,_,k)),f(A,P,!0,!0),o&&(v[P]=k)),g&&p==S&&L&&L.name!==S&&(!o&&y?h(I,"name",S):(R=!0,N=function(){return i(L,this)})),p)if(C={values:T(S),keys:m?N:T(w),entries:T(E)},O)for(M in C)(x||R||!(M in I))&&d(I,M,C[M]);else r({target:t,proto:!0,forced:x||R},C);return o&&!O||I[_]===N||d(I,_,N,{name:p}),v[t]=N,C}},26008:function(e,t,n){var r=n(9712),i=n(30746),o=n(30432),a=n(25047).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},43404:function(e,t,n){var r=n(84747);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},84922:function(e,t,n){var r=n(94766),i=n(36372),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},61497:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},88705:function(e,t,n){var r=n(84922)("span").classList,i=r&&r.constructor&&r.constructor.prototype;e.exports=i===Object.prototype?void 0:i},30820:function(e,t,n){var r=n(12637).match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},43430:function(e){e.exports="object"==typeof window},59049:function(e,t,n){var r=n(12637);e.exports=/MSIE|Trident/.test(r)},47683:function(e,t,n){var r=n(12637),i=n(94766);e.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==i.Pebble},45859:function(e,t,n){var r=n(12637);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},85002:function(e,t,n){var r=n(79641),i=n(94766);e.exports="process"==r(i.process)},90672:function(e,t,n){var r=n(12637);e.exports=/web0s(?!.*chrome)/i.test(r)},12637:function(e,t,n){var r=n(60783);e.exports=r("navigator","userAgent")||""},41110:function(e,t,n){var r,i,o=n(94766),a=n(12637),s=o.process,u=o.Deno,l=s&&s.versions||u&&u.version,c=l&&l.v8;c&&(i=(r=c.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},90242:function(e,t,n){var r=n(12637).match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},67480:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},95745:function(e,t,n){var r=n(94766),i=n(8113).f,o=n(1068),a=n(87691),s=n(8928),u=n(98591),l=n(37218);e.exports=function(e,t){var n,c,f,h,d,p=e.target,v=e.global,m=e.stat;if(n=v?r:m?r[p]||s(p,{}):(r[p]||{}).prototype)for(c in t){if(h=t[c],f=e.noTargetGet?(d=i(n,c))&&d.value:n[c],!l(v?c:p+(m?".":"#")+c,e.forced)&&void 0!==f){if(typeof h==typeof f)continue;u(h,f)}(e.sham||f&&f.sham)&&o(h,"sham",!0),a(n,c,h,e)}}},84747:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},82578:function(e,t,n){"use strict";n(67249);var r=n(97765),i=n(87691),o=n(33142),a=n(84747),s=n(51704),u=n(1068),l=s("species"),c=RegExp.prototype;e.exports=function(e,t,n,f){var h=s(e),d=!a((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),p=d&&!a((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[l]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return t=!0,null},n[h](""),!t}));if(!d||!p||n){var v=r(/./[h]),m=t(h,""[e],(function(e,t,n,i,a){var s=r(e),u=t.exec;return u===o||u===c.exec?d&&!a?{done:!0,value:v(t,n,i)}:{done:!0,value:s(n,t,i)}:{done:!1}}));i(String.prototype,e,m[0]),i(c,h,m[1])}f&&u(c[h],"sham",!0)}},38245:function(e,t,n){"use strict";var r=n(94766),i=n(20397),o=n(64770),a=n(46630),s=r.TypeError;e.exports=function e(t,n,r,u,l,c,f,h){for(var d,p=l,v=0,m=!!f&&a(f,h);v<u;){if(v in r){if(d=m?m(r[v],v,n):r[v],c>0&&i(d))p=e(t,n,d,o(d),p,c-1)-1;else{if(p>=9007199254740991)throw s("Exceed the acceptable array length");t[p]=d}p++}v++}return p}},45315:function(e,t,n){var r=n(84747);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},11465:function(e,t,n){var r=n(4335),i=Function.prototype,o=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(o):function(){return a.apply(o,arguments)})},46630:function(e,t,n){var r=n(97765),i=n(13792),o=n(4335),a=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},4335:function(e,t,n){var r=n(84747);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},46070:function(e,t,n){"use strict";var r=n(94766),i=n(97765),o=n(13792),a=n(36372),s=n(30746),u=n(66017),l=n(4335),c=r.Function,f=i([].concat),h=i([].join),d={},p=function(e,t,n){if(!s(d,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";d[t]=c("C,a","return new C("+h(r,",")+")")}return d[t](e,n)};e.exports=l?c.bind:function(e){var t=o(this),n=t.prototype,r=u(arguments,1),i=function(){var n=f(r,u(arguments));return this instanceof i?p(t,n.length,n):t.apply(e,n)};return a(n)&&(i.prototype=n),i}},2012:function(e,t,n){var r=n(4335),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},3583:function(e,t,n){var r=n(43404),i=n(30746),o=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=i(o,"name"),u=s&&"something"===function(){}.name,l=s&&(!r||r&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:u,CONFIGURABLE:l}},97765:function(e,t,n){var r=n(4335),i=Function.prototype,o=i.bind,a=i.call,s=r&&o.bind(a,a);e.exports=r?function(e){return e&&s(e)}:function(e){return e&&function(){return a.apply(e,arguments)}}},60783:function(e,t,n){var r=n(94766),i=n(80125),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e]):r[e]&&r[e][t]}},90525:function(e,t,n){var r=n(79694),i=n(37405),o=n(78715),a=n(51704)("iterator");e.exports=function(e){if(void 0!=e)return i(e,a)||i(e,"@@iterator")||o[r(e)]}},78556:function(e,t,n){var r=n(94766),i=n(2012),o=n(13792),a=n(51971),s=n(66307),u=n(90525),l=r.TypeError;e.exports=function(e,t){var n=arguments.length<2?u(e):t;if(o(n))return a(i(n,e));throw l(s(e)+" is not iterable")}},37405:function(e,t,n){var r=n(13792);e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},19193:function(e,t,n){var r=n(97765),i=n(64311),o=Math.floor,a=r("".charAt),s=r("".replace),u=r("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,f,h){var d=n+e.length,p=r.length,v=c;return void 0!==f&&(f=i(f),v=l),s(h,v,(function(i,s){var l;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return u(t,0,n);case"'":return u(t,d);case"<":l=f[u(s,1,-1)];break;default:var c=+s;if(0===c)return i;if(c>p){var h=o(c/10);return 0===h?i:h<=p?void 0===r[h-1]?a(s,1):r[h-1]+a(s,1):i}l=r[c-1]}return void 0===l?"":l}))}},94766:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},30746:function(e,t,n){var r=n(97765),i=n(64311),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},46851:function(e){e.exports={}},46893:function(e,t,n){var r=n(94766);e.exports=function(e,t){var n=r.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}},35230:function(e,t,n){var r=n(60783);e.exports=r("document","documentElement")},55899:function(e,t,n){var r=n(43404),i=n(84747),o=n(84922);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},84712:function(e,t,n){var r=n(94766).Array,i=Math.abs,o=Math.pow,a=Math.floor,s=Math.log,u=Math.LN2;e.exports={pack:function(e,t,n){var l,c,f,h=r(n),d=8*n-t-1,p=(1<<d)-1,v=p>>1,m=23===t?o(2,-24)-o(2,-77):0,g=e<0||0===e&&1/e<0?1:0,y=0;for((e=i(e))!=e||e===1/0?(c=e!=e?1:0,l=p):(l=a(s(e)/u),e*(f=o(2,-l))<1&&(l--,f*=2),(e+=l+v>=1?m/f:m*o(2,1-v))*f>=2&&(l++,f/=2),l+v>=p?(c=0,l=p):l+v>=1?(c=(e*f-1)*o(2,t),l+=v):(c=e*o(2,v-1)*o(2,t),l=0));t>=8;)h[y++]=255&c,c/=256,t-=8;for(l=l<<t|c,d+=t;d>0;)h[y++]=255&l,l/=256,d-=8;return h[--y]|=128*g,h},unpack:function(e,t){var n,r=e.length,i=8*r-t-1,a=(1<<i)-1,s=a>>1,u=i-7,l=r-1,c=e[l--],f=127&c;for(c>>=7;u>0;)f=256*f+e[l--],u-=8;for(n=f&(1<<-u)-1,f>>=-u,u+=t;u>0;)n=256*n+e[l--],u-=8;if(0===f)f=1-s;else{if(f===a)return n?NaN:c?-1/0:1/0;n+=o(2,t),f-=s}return(c?-1:1)*n*o(2,f-t)}}},32652:function(e,t,n){var r=n(94766),i=n(97765),o=n(84747),a=n(79641),s=r.Object,u=i("".split);e.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?u(e,""):s(e)}:s},65758:function(e,t,n){var r=n(80125),i=n(36372),o=n(60801);e.exports=function(e,t,n){var a,s;return o&&r(a=t.constructor)&&a!==n&&i(s=a.prototype)&&s!==n.prototype&&o(e,s),e}},67271:function(e,t,n){var r=n(97765),i=n(80125),o=n(44404),a=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},95202:function(e,t,n){var r=n(95745),i=n(97765),o=n(46851),a=n(36372),s=n(30746),u=n(25047).f,l=n(47233),c=n(19307),f=n(50215),h=n(97701),d=n(45315),p=!1,v=h("meta"),m=0,g=function(e){u(e,v,{value:{objectID:"O"+m++,weakData:{}}})},y=e.exports={enable:function(){y.enable=function(){},p=!0;var e=l.f,t=i([].splice),n={};n[v]=1,e(n).length&&(l.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===v){t(r,i,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:c.f}))},fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,v)){if(!f(e))return"F";if(!t)return"E";g(e)}return e[v].objectID},getWeakData:function(e,t){if(!s(e,v)){if(!f(e))return!0;if(!t)return!1;g(e)}return e[v].weakData},onFreeze:function(e){return d&&p&&f(e)&&!s(e,v)&&g(e),e}};o[v]=!0},18417:function(e,t,n){var r,i,o,a=n(55941),s=n(94766),u=n(97765),l=n(36372),c=n(1068),f=n(30746),h=n(44404),d=n(19797),p=n(46851),v="Object already initialized",m=s.TypeError,g=s.WeakMap;if(a||h.state){var y=h.state||(h.state=new g),b=u(y.get),x=u(y.has),_=u(y.set);r=function(e,t){if(x(y,e))throw new m(v);return t.facade=e,_(y,e,t),t},i=function(e){return b(y,e)||{}},o=function(e){return x(y,e)}}else{var w=d("state");p[w]=!0,r=function(e,t){if(f(e,w))throw new m(v);return t.facade=e,c(e,w,t),t},i=function(e){return f(e,w)?e[w]:{}},o=function(e){return f(e,w)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=i(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return n}}}},1719:function(e,t,n){var r=n(51704),i=n(78715),o=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},20397:function(e,t,n){var r=n(79641);e.exports=Array.isArray||function(e){return"Array"==r(e)}},80125:function(e){e.exports=function(e){return"function"==typeof e}},84079:function(e,t,n){var r=n(97765),i=n(84747),o=n(80125),a=n(79694),s=n(60783),u=n(67271),l=function(){},c=[],f=s("Reflect","construct"),h=/^\s*(?:class|function)\b/,d=r(h.exec),p=!h.exec(l),v=function(e){if(!o(e))return!1;try{return f(l,c,e),!0}catch(t){return!1}},m=function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!d(h,u(e))}catch(t){return!0}};m.sham=!0,e.exports=!f||i((function(){var e;return v(v.call)||!v(Object)||!v((function(){e=!0}))||e}))?m:v},36270:function(e,t,n){var r=n(30746);e.exports=function(e){return void 0!==e&&(r(e,"value")||r(e,"writable"))}},37218:function(e,t,n){var r=n(84747),i=n(80125),o=/#|\.prototype\./,a=function(e,t){var n=u[s(e)];return n==c||n!=l&&(i(t)?r(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},u=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},78059:function(e,t,n){var r=n(36372),i=Math.floor;e.exports=Number.isInteger||function(e){return!r(e)&&isFinite(e)&&i(e)===e}},36372:function(e,t,n){var r=n(80125);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},2744:function(e){e.exports=!1},11091:function(e,t,n){var r=n(36372),i=n(79641),o=n(51704)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},45013:function(e,t,n){var r=n(94766),i=n(60783),o=n(80125),a=n(73982),s=n(11872),u=r.Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return o(t)&&a(t.prototype,u(e))}},57723:function(e,t,n){var r=n(94766),i=n(46630),o=n(2012),a=n(51971),s=n(66307),u=n(1719),l=n(64770),c=n(73982),f=n(78556),h=n(90525),d=n(40771),p=r.TypeError,v=function(e,t){this.stopped=e,this.result=t},m=v.prototype;e.exports=function(e,t,n){var r,g,y,b,x,_,w,S=n&&n.that,E=!(!n||!n.AS_ENTRIES),k=!(!n||!n.IS_ITERATOR),O=!(!n||!n.INTERRUPTED),A=i(t,S),C=function(e){return r&&d(r,"normal",e),new v(!0,e)},M=function(e){return E?(a(e),O?A(e[0],e[1],C):A(e[0],e[1])):O?A(e,C):A(e)};if(k)r=e;else{if(!(g=h(e)))throw p(s(e)+" is not iterable");if(u(g)){for(y=0,b=l(e);b>y;y++)if((x=M(e[y]))&&c(m,x))return x;return new v(!1)}r=f(e,g)}for(_=r.next;!(w=o(_,r)).done;){try{x=M(w.value)}catch(T){d(r,"throw",T)}if("object"==typeof x&&x&&c(m,x))return x}return new v(!1)}},40771:function(e,t,n){var r=n(2012),i=n(51971),o=n(37405);e.exports=function(e,t,n){var a,s;i(e);try{if(!(a=o(e,"return"))){if("throw"===t)throw n;return n}a=r(a,e)}catch(u){s=!0,a=u}if("throw"===t)throw n;if(s)throw a;return i(a),n}},48293:function(e,t,n){"use strict";var r,i,o,a=n(84747),s=n(80125),u=n(93522),l=n(9628),c=n(87691),f=n(51704),h=n(2744),d=f("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(i=l(l(o)))!==Object.prototype&&(r=i):p=!0),void 0==r||a((function(){var e={};return r[d].call(e)!==e}))?r={}:h&&(r=u(r)),s(r[d])||c(r,d,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},78715:function(e){e.exports={}},64770:function(e,t,n){var r=n(87452);e.exports=function(e){return r(e.length)}},76075:function(e){var t=Math.expm1,n=Math.exp;e.exports=!t||t(10)>22025.465794806718||t(10)<22025.465794806718||-2e-17!=t(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:n(e)-1}:t},85279:function(e,t,n){var r=n(47297),i=Math.abs,o=Math.pow,a=o(2,-52),s=o(2,-23),u=o(2,127)*(2-s),l=o(2,-126);e.exports=Math.fround||function(e){var t,n,o=i(e),c=r(e);return o<l?c*(o/l/s+1/a-1/a)*l*s:(n=(t=(1+s/a)*o)-(t-o))>u||n!=n?c*(1/0):c*n}},2317:function(e){var t=Math.log,n=Math.LOG10E;e.exports=Math.log10||function(e){return t(e)*n}},82579:function(e){var t=Math.log;e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:t(1+e)}},47297:function(e){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},92574:function(e,t,n){var r,i,o,a,s,u,l,c,f=n(94766),h=n(46630),d=n(8113).f,p=n(3097).set,v=n(45859),m=n(47683),g=n(90672),y=n(85002),b=f.MutationObserver||f.WebKitMutationObserver,x=f.document,_=f.process,w=f.Promise,S=d(f,"queueMicrotask"),E=S&&S.value;E||(r=function(){var e,t;for(y&&(e=_.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(n){throw i?a():o=void 0,n}}o=void 0,e&&e.enter()},v||y||g||!b||!x?!m&&w&&w.resolve?((l=w.resolve(void 0)).constructor=w,c=h(l.then,l),a=function(){c(r)}):y?a=function(){_.nextTick(r)}:(p=h(p,f),a=function(){p(r)}):(s=!0,u=x.createTextNode(""),new b(r).observe(u,{characterData:!0}),a=function(){u.data=s=!s})),e.exports=E||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,a()),o=t}},4279:function(e,t,n){var r=n(94766);e.exports=r.Promise},41354:function(e,t,n){var r=n(41110),i=n(84747);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},66893:function(e,t,n){var r=n(84747),i=n(51704),o=n(2744),a=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},55941:function(e,t,n){var r=n(94766),i=n(80125),o=n(67271),a=r.WeakMap;e.exports=i(a)&&/native code/.test(o(a))},86394:function(e,t,n){"use strict";var r=n(13792),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},12312:function(e,t,n){var r=n(94766),i=n(11091),o=r.TypeError;e.exports=function(e){if(i(e))throw o("The method doesn't accept regular expressions");return e}},78482:function(e,t,n){var r=n(94766).isFinite;e.exports=Number.isFinite||function(e){return"number"==typeof e&&r(e)}},66579:function(e,t,n){var r=n(94766),i=n(84747),o=n(97765),a=n(84990),s=n(63226).trim,u=n(79101),l=o("".charAt),c=r.parseFloat,f=r.Symbol,h=f&&f.iterator,d=1/c(u+"-0")!==-1/0||h&&!i((function(){c(Object(h))}));e.exports=d?function(e){var t=s(a(e)),n=c(t);return 0===n&&"-"==l(t,0)?-0:n}:c},87131:function(e,t,n){var r=n(94766),i=n(84747),o=n(97765),a=n(84990),s=n(63226).trim,u=n(79101),l=r.parseInt,c=r.Symbol,f=c&&c.iterator,h=/^[+-]?0x/i,d=o(h.exec),p=8!==l(u+"08")||22!==l(u+"0x16")||f&&!i((function(){l(Object(f))}));e.exports=p?function(e,t){var n=s(a(e));return l(n,t>>>0||(d(h,n)?16:10))}:l},7517:function(e,t,n){"use strict";var r=n(43404),i=n(97765),o=n(2012),a=n(84747),s=n(45888),u=n(83657),l=n(80936),c=n(64311),f=n(32652),h=Object.assign,d=Object.defineProperty,p=i([].concat);e.exports=!h||a((function(){if(r&&1!==h({b:1},h(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=h({},e)[n]||s(h({},t)).join("")!=i}))?function(e,t){for(var n=c(e),i=arguments.length,a=1,h=u.f,d=l.f;i>a;)for(var v,m=f(arguments[a++]),g=h?p(s(m),h(m)):s(m),y=g.length,b=0;y>b;)v=g[b++],r&&!o(d,m,v)||(n[v]=m[v]);return n}:h},93522:function(e,t,n){var r,i=n(51971),o=n(7819),a=n(67480),s=n(46851),u=n(35230),l=n(84922),c=n(19797),f=c("IE_PROTO"),h=function(){},d=function(e){return"<script>"+e+"</"+"script>"},p=function(e){e.write(d("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}v="undefined"!=typeof document?document.domain&&r?p(r):function(){var e,t=l("iframe");return t.style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(d("document.F=Object")),e.close(),e.F}():p(r);for(var e=a.length;e--;)delete v.prototype[a[e]];return v()};s[f]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=i(e),n=new h,h.prototype=null,n[f]=e):n=v(),void 0===t?n:o.f(n,t)}},7819:function(e,t,n){var r=n(43404),i=n(20427),o=n(25047),a=n(51971),s=n(67382),u=n(45888);t.f=r&&!i?Object.defineProperties:function(e,t){a(e);for(var n,r=s(t),i=u(t),l=i.length,c=0;l>c;)o.f(e,n=i[c++],r[n]);return e}},25047:function(e,t,n){var r=n(94766),i=n(43404),o=n(55899),a=n(20427),s=n(51971),u=n(83281),l=r.TypeError,c=Object.defineProperty,f=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",p="writable";t.f=i?a?function(e,t,n){if(s(e),t=u(t),s(n),"function"===typeof e&&"prototype"===t&&"value"in n&&p in n&&!n.writable){var r=f(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:d in n?n.configurable:r.configurable,enumerable:h in n?n.enumerable:r.enumerable,writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(s(e),t=u(t),s(n),o)try{return c(e,t,n)}catch(r){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},8113:function(e,t,n){var r=n(43404),i=n(2012),o=n(80936),a=n(61410),s=n(67382),u=n(83281),l=n(30746),c=n(55899),f=Object.getOwnPropertyDescriptor;t.f=r?f:function(e,t){if(e=s(e),t=u(t),c)try{return f(e,t)}catch(n){}if(l(e,t))return a(!i(o.f,e,t),e[t])}},19307:function(e,t,n){var r=n(79641),i=n(67382),o=n(47233).f,a=n(64277),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"Window"==r(e)?function(e){try{return o(e)}catch(t){return a(s)}}(e):o(i(e))}},47233:function(e,t,n){var r=n(74539),i=n(67480).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},83657:function(e,t){t.f=Object.getOwnPropertySymbols},9628:function(e,t,n){var r=n(94766),i=n(30746),o=n(80125),a=n(64311),s=n(19797),u=n(62504),l=s("IE_PROTO"),c=r.Object,f=c.prototype;e.exports=u?c.getPrototypeOf:function(e){var t=a(e);if(i(t,l))return t[l];var n=t.constructor;return o(n)&&t instanceof n?n.prototype:t instanceof c?f:null}},50215:function(e,t,n){var r=n(84747),i=n(36372),o=n(79641),a=n(44067),s=Object.isExtensible,u=r((function(){s(1)}));e.exports=u||a?function(e){return!!i(e)&&((!a||"ArrayBuffer"!=o(e))&&(!s||s(e)))}:s},73982:function(e,t,n){var r=n(97765);e.exports=r({}.isPrototypeOf)},74539:function(e,t,n){var r=n(97765),i=n(30746),o=n(67382),a=n(68445).indexOf,s=n(46851),u=r([].push);e.exports=function(e,t){var n,r=o(e),l=0,c=[];for(n in r)!i(s,n)&&i(r,n)&&u(c,n);for(;t.length>l;)i(r,n=t[l++])&&(~a(c,n)||u(c,n));return c}},45888:function(e,t,n){var r=n(74539),i=n(67480);e.exports=Object.keys||function(e){return r(e,i)}},80936:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},58712:function(e,t,n){"use strict";var r=n(2744),i=n(94766),o=n(84747),a=n(90242);e.exports=r||!o((function(){if(!(a&&a<535)){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete i[e]}}))},60801:function(e,t,n){var r=n(97765),i=n(51971),o=n(43024);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(a){}return function(n,r){return i(n),o(r),t?e(n,r):n.__proto__=r,n}}():void 0)},41585:function(e,t,n){var r=n(43404),i=n(97765),o=n(45888),a=n(67382),s=i(n(80936).f),u=i([].push),l=function(e){return function(t){for(var n,i=a(t),l=o(i),c=l.length,f=0,h=[];c>f;)n=l[f++],r&&!s(i,n)||u(h,e?[n,i[n]]:i[n]);return h}};e.exports={entries:l(!0),values:l(!1)}},97756:function(e,t,n){"use strict";var r=n(32827),i=n(79694);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},51386:function(e,t,n){var r=n(94766),i=n(2012),o=n(80125),a=n(36372),s=r.TypeError;e.exports=function(e,t){var n,r;if("string"===t&&o(n=e.toString)&&!a(r=i(n,e)))return r;if(o(n=e.valueOf)&&!a(r=i(n,e)))return r;if("string"!==t&&o(n=e.toString)&&!a(r=i(n,e)))return r;throw s("Can't convert object to primitive value")}},7127:function(e,t,n){var r=n(60783),i=n(97765),o=n(47233),a=n(83657),s=n(51971),u=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=a.f;return n?u(t,n(e)):t}},9712:function(e,t,n){var r=n(94766);e.exports=r},20714:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},12474:function(e,t,n){var r=n(51971),i=n(36372),o=n(86394);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},59435:function(e){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=t},35454:function(e,t,n){var r=n(87691);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},87691:function(e,t,n){var r=n(94766),i=n(80125),o=n(30746),a=n(1068),s=n(8928),u=n(67271),l=n(18417),c=n(3583).CONFIGURABLE,f=l.get,h=l.enforce,d=String(String).split("String");(e.exports=function(e,t,n,u){var l,f=!!u&&!!u.unsafe,p=!!u&&!!u.enumerable,v=!!u&&!!u.noTargetGet,m=u&&void 0!==u.name?u.name:t;i(n)&&("Symbol("===String(m).slice(0,7)&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(n,"name")||c&&n.name!==m)&&a(n,"name",m),(l=h(n)).source||(l.source=d.join("string"==typeof m?m:""))),e!==r?(f?!v&&e[t]&&(p=!0):delete e[t],p?e[t]=n:a(e,t,n)):p?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return i(this)&&f(this).source||u(this)}))},8892:function(e,t,n){var r=n(94766),i=n(2012),o=n(51971),a=n(80125),s=n(79641),u=n(33142),l=r.TypeError;e.exports=function(e,t){var n=e.exec;if(a(n)){var r=i(n,e,t);return null!==r&&o(r),r}if("RegExp"===s(e))return i(u,e,t);throw l("RegExp#exec called on incompatible receiver")}},33142:function(e,t,n){"use strict";var r=n(2012),i=n(97765),o=n(84990),a=n(55388),s=n(27374),u=n(97998),l=n(93522),c=n(18417).get,f=n(9756),h=n(34139),d=u("native-string-replace",String.prototype.replace),p=RegExp.prototype.exec,v=p,m=i("".charAt),g=i("".indexOf),y=i("".replace),b=i("".slice),x=function(){var e=/a/,t=/b*/g;return r(p,e,"a"),r(p,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),_=s.BROKEN_CARET,w=void 0!==/()??/.exec("")[1];(x||w||_||f||h)&&(v=function(e){var t,n,i,s,u,f,h,S=this,E=c(S),k=o(e),O=E.raw;if(O)return O.lastIndex=S.lastIndex,t=r(v,O,k),S.lastIndex=O.lastIndex,t;var A=E.groups,C=_&&S.sticky,M=r(a,S),T=S.source,P=0,R=k;if(C&&(M=y(M,"y",""),-1===g(M,"g")&&(M+="g"),R=b(k,S.lastIndex),S.lastIndex>0&&(!S.multiline||S.multiline&&"\n"!==m(k,S.lastIndex-1))&&(T="(?: "+T+")",R=" "+R,P++),n=new RegExp("^(?:"+T+")",M)),w&&(n=new RegExp("^"+T+"$(?!\\s)",M)),x&&(i=S.lastIndex),s=r(p,C?n:S,R),C?s?(s.input=b(s.input,P),s[0]=b(s[0],P),s.index=S.lastIndex,S.lastIndex+=s[0].length):S.lastIndex=0:x&&s&&(S.lastIndex=S.global?s.index+s[0].length:i),w&&s&&s.length>1&&r(d,s[0],n,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)})),s&&A)for(s.groups=f=l(null),u=0;u<A.length;u++)f[(h=A[u])[0]]=s[h[1]];return s}),e.exports=v},55388:function(e,t,n){"use strict";var r=n(51971);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},27374:function(e,t,n){var r=n(84747),i=n(94766).RegExp,o=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),a=o||r((function(){return!i("a","y").sticky})),s=o||r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:o}},9756:function(e,t,n){var r=n(84747),i=n(94766).RegExp;e.exports=r((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},34139:function(e,t,n){var r=n(84747),i=n(94766).RegExp;e.exports=r((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},1660:function(e,t,n){var r=n(94766).TypeError;e.exports=function(e){if(void 0==e)throw r("Can't call method on "+e);return e}},25392:function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},8928:function(e,t,n){var r=n(94766),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},7418:function(e,t,n){"use strict";var r=n(60783),i=n(25047),o=n(51704),a=n(43404),s=o("species");e.exports=function(e){var t=r(e),n=i.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},59859:function(e,t,n){var r=n(25047).f,i=n(30746),o=n(51704)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,o)&&r(e,o,{configurable:!0,value:t})}},19797:function(e,t,n){var r=n(97998),i=n(97701),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},44404:function(e,t,n){var r=n(94766),i=n(8928),o="__core-js_shared__",a=r[o]||i(o,{});e.exports=a},97998:function(e,t,n){var r=n(2744),i=n(44404);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:r?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},82201:function(e,t,n){var r=n(51971),i=n(30759),o=n(51704)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},64261:function(e,t,n){var r=n(84747);e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},7851:function(e,t,n){var r=n(97765),i=n(32397),o=n(84990),a=n(1660),s=r("".charAt),u=r("".charCodeAt),l=r("".slice),c=function(e){return function(t,n){var r,c,f=o(a(t)),h=i(n),d=f.length;return h<0||h>=d?e?"":void 0:(r=u(f,h))<55296||r>56319||h+1===d||(c=u(f,h+1))<56320||c>57343?e?s(f,h):r:e?l(f,h,h+2):c-56320+(r-55296<<10)+65536}};e.exports={codeAt:c(!1),charAt:c(!0)}},18708:function(e,t,n){var r=n(12637);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},19570:function(e,t,n){var r=n(97765),i=n(87452),o=n(84990),a=n(95779),s=n(1660),u=r(a),l=r("".slice),c=Math.ceil,f=function(e){return function(t,n,r){var a,f,h=o(s(t)),d=i(n),p=h.length,v=void 0===r?" ":o(r);return d<=p||""==v?h:((f=u(v,c((a=d-p)/v.length))).length>a&&(f=l(f,0,a)),e?h+f:f+h)}};e.exports={start:f(!1),end:f(!0)}},40784:function(e,t,n){"use strict";var r=n(94766),i=n(97765),o=2147483647,a=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,u="Overflow: input needs wider integers to process",l=r.RangeError,c=i(s.exec),f=Math.floor,h=String.fromCharCode,d=i("".charCodeAt),p=i([].join),v=i([].push),m=i("".replace),g=i("".split),y=i("".toLowerCase),b=function(e){return e+22+75*(e<26)},x=function(e,t,n){var r=0;for(e=n?f(e/700):e>>1,e+=f(e/t);e>455;)e=f(e/35),r+=36;return f(r+36*e/(e+38))},_=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=d(e,n++);if(i>=55296&&i<=56319&&n<r){var o=d(e,n++);56320==(64512&o)?v(t,((1023&i)<<10)+(1023&o)+65536):(v(t,i),n--)}else v(t,i)}return t}(e);var n,r,i=e.length,a=128,s=0,c=72;for(n=0;n<e.length;n++)(r=e[n])<128&&v(t,h(r));var m=t.length,g=m;for(m&&v(t,"-");g<i;){var y=o;for(n=0;n<e.length;n++)(r=e[n])>=a&&r<y&&(y=r);var _=g+1;if(y-a>f((o-s)/_))throw l(u);for(s+=(y-a)*_,a=y,n=0;n<e.length;n++){if((r=e[n])<a&&++s>o)throw l(u);if(r==a){for(var w=s,S=36;;){var E=S<=c?1:S>=c+26?26:S-c;if(w<E)break;var k=w-E,O=36-E;v(t,h(b(E+k%O))),w=f(k/O),S+=36}v(t,h(b(w))),c=x(s,_,g==m),s=0,g++}}s++,a++}return p(t,"")};e.exports=function(e){var t,n,r=[],i=g(m(y(e),s,"."),".");for(t=0;t<i.length;t++)n=i[t],v(r,c(a,n)?"xn--"+_(n):n);return p(r,".")}},95779:function(e,t,n){"use strict";var r=n(94766),i=n(32397),o=n(84990),a=n(1660),s=r.RangeError;e.exports=function(e){var t=o(a(this)),n="",r=i(e);if(r<0||r==1/0)throw s("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}},61963:function(e,t,n){var r=n(3583).PROPER,i=n(84747),o=n(79101);e.exports=function(e){return i((function(){return!!o[e]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[e]()||r&&o[e].name!==e}))}},63226:function(e,t,n){var r=n(97765),i=n(1660),o=n(84990),a=n(79101),s=r("".replace),u="["+a+"]",l=RegExp("^"+u+u+"*"),c=RegExp(u+u+"*$"),f=function(e){return function(t){var n=o(i(t));return 1&e&&(n=s(n,l,"")),2&e&&(n=s(n,c,"")),n}};e.exports={start:f(1),end:f(2),trim:f(3)}},3097:function(e,t,n){var r,i,o,a,s=n(94766),u=n(11465),l=n(46630),c=n(80125),f=n(30746),h=n(84747),d=n(35230),p=n(66017),v=n(84922),m=n(69526),g=n(45859),y=n(85002),b=s.setImmediate,x=s.clearImmediate,_=s.process,w=s.Dispatch,S=s.Function,E=s.MessageChannel,k=s.String,O=0,A={},C="onreadystatechange";try{r=s.location}catch(I){}var M=function(e){if(f(A,e)){var t=A[e];delete A[e],t()}},T=function(e){return function(){M(e)}},P=function(e){M(e.data)},R=function(e){s.postMessage(k(e),r.protocol+"//"+r.host)};b&&x||(b=function(e){m(arguments.length,1);var t=c(e)?e:S(e),n=p(arguments,1);return A[++O]=function(){u(t,void 0,n)},i(O),O},x=function(e){delete A[e]},y?i=function(e){_.nextTick(T(e))}:w&&w.now?i=function(e){w.now(T(e))}:E&&!g?(a=(o=new E).port2,o.port1.onmessage=P,i=l(a.postMessage,a)):s.addEventListener&&c(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!h(R)?(i=R,s.addEventListener("message",P,!1)):i=C in v("script")?function(e){d.appendChild(v("script")).onreadystatechange=function(){d.removeChild(this),M(e)}}:function(e){setTimeout(T(e),0)}),e.exports={set:b,clear:x}},57161:function(e,t,n){var r=n(97765);e.exports=r(1..valueOf)},64620:function(e,t,n){var r=n(32397),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},89494:function(e,t,n){var r=n(94766),i=n(32397),o=n(87452),a=r.RangeError;e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=o(t);if(t!==n)throw a("Wrong length or index");return n}},67382:function(e,t,n){var r=n(32652),i=n(1660);e.exports=function(e){return r(i(e))}},32397:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){var r=+e;return r!==r||0===r?0:(r>0?n:t)(r)}},87452:function(e,t,n){var r=n(32397),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},64311:function(e,t,n){var r=n(94766),i=n(1660),o=r.Object;e.exports=function(e){return o(i(e))}},16501:function(e,t,n){var r=n(94766),i=n(15061),o=r.RangeError;e.exports=function(e,t){var n=i(e);if(n%t)throw o("Wrong offset");return n}},15061:function(e,t,n){var r=n(94766),i=n(32397),o=r.RangeError;e.exports=function(e){var t=i(e);if(t<0)throw o("The argument can't be less than 0");return t}},86395:function(e,t,n){var r=n(94766),i=n(2012),o=n(36372),a=n(45013),s=n(37405),u=n(51386),l=n(51704),c=r.TypeError,f=l("toPrimitive");e.exports=function(e,t){if(!o(e)||a(e))return e;var n,r=s(e,f);if(r){if(void 0===t&&(t="default"),n=i(r,e,t),!o(n)||a(n))return n;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),u(e,t)}},83281:function(e,t,n){var r=n(86395),i=n(45013);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},32827:function(e,t,n){var r={};r[n(51704)("toStringTag")]="z",e.exports="[object z]"===String(r)},84990:function(e,t,n){var r=n(94766),i=n(79694),o=r.String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},66307:function(e,t,n){var r=n(94766).String;e.exports=function(e){try{return r(e)}catch(t){return"Object"}}},28103:function(e,t,n){"use strict";var r=n(95745),i=n(94766),o=n(2012),a=n(43404),s=n(4073),u=n(6437),l=n(30558),c=n(6432),f=n(61410),h=n(1068),d=n(78059),p=n(87452),v=n(89494),m=n(16501),g=n(83281),y=n(30746),b=n(79694),x=n(36372),_=n(45013),w=n(93522),S=n(73982),E=n(60801),k=n(47233).f,O=n(507),A=n(7397).forEach,C=n(7418),M=n(25047),T=n(8113),P=n(18417),R=n(65758),I=P.get,L=P.set,N=M.f,j=T.f,D=Math.round,B=i.RangeError,z=l.ArrayBuffer,F=z.prototype,V=l.DataView,U=u.NATIVE_ARRAY_BUFFER_VIEWS,Z=u.TYPED_ARRAY_CONSTRUCTOR,H=u.TYPED_ARRAY_TAG,G=u.TypedArray,W=u.TypedArrayPrototype,q=u.aTypedArrayConstructor,K=u.isTypedArray,Y="BYTES_PER_ELEMENT",X="Wrong length",$=function(e,t){q(e);for(var n=0,r=t.length,i=new e(r);r>n;)i[n]=t[n++];return i},J=function(e,t){N(e,t,{get:function(){return I(this)[t]}})},Q=function(e){var t;return S(F,e)||"ArrayBuffer"==(t=b(e))||"SharedArrayBuffer"==t},ee=function(e,t){return K(e)&&!_(t)&&t in e&&d(+t)&&t>=0},te=function(e,t){return t=g(t),ee(e,t)?f(2,e[t]):j(e,t)},ne=function(e,t,n){return t=g(t),!(ee(e,t)&&x(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?N(e,t,n):(e[t]=n.value,e)};a?(U||(T.f=te,M.f=ne,J(W,"buffer"),J(W,"byteOffset"),J(W,"byteLength"),J(W,"length")),r({target:"Object",stat:!0,forced:!U},{getOwnPropertyDescriptor:te,defineProperty:ne}),e.exports=function(e,t,n){var a=e.match(/\d+$/)[0]/8,u=e+(n?"Clamped":"")+"Array",l="get"+e,f="set"+e,d=i[u],g=d,y=g&&g.prototype,b={},_=function(e,t){N(e,t,{get:function(){return function(e,t){var n=I(e);return n.view[l](t*a+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var i=I(e);n&&(r=(r=D(r))<0?0:r>255?255:255&r),i.view[f](t*a+i.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};U?s&&(g=t((function(e,t,n,r){return c(e,y),R(x(t)?Q(t)?void 0!==r?new d(t,m(n,a),r):void 0!==n?new d(t,m(n,a)):new d(t):K(t)?$(g,t):o(O,g,t):new d(v(t)),e,g)})),E&&E(g,G),A(k(d),(function(e){e in g||h(g,e,d[e])})),g.prototype=y):(g=t((function(e,t,n,r){c(e,y);var i,s,u,l=0,f=0;if(x(t)){if(!Q(t))return K(t)?$(g,t):o(O,g,t);i=t,f=m(n,a);var h=t.byteLength;if(void 0===r){if(h%a)throw B(X);if((s=h-f)<0)throw B(X)}else if((s=p(r)*a)+f>h)throw B(X);u=s/a}else u=v(t),i=new z(s=u*a);for(L(e,{buffer:i,byteOffset:f,byteLength:s,length:u,view:new V(i)});l<u;)_(e,l++)})),E&&E(g,G),y=g.prototype=w(W)),y.constructor!==g&&h(y,"constructor",g),h(y,Z,g),H&&h(y,H,u),b[u]=g,r({global:!0,forced:g!=d,sham:!U},b),Y in g||h(g,Y,a),Y in y||h(y,Y,a),C(u)}):e.exports=function(){}},4073:function(e,t,n){var r=n(94766),i=n(84747),o=n(54580),a=n(6437).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,u=r.Int8Array;e.exports=!a||!i((function(){u(1)}))||!i((function(){new u(-1)}))||!o((function(e){new u,new u(null),new u(1.5),new u(e)}),!0)||i((function(){return 1!==new u(new s(2),1,void 0).length}))},22119:function(e,t,n){var r=n(9363),i=n(80675);e.exports=function(e,t){return r(i(e),t)}},507:function(e,t,n){var r=n(46630),i=n(2012),o=n(30759),a=n(64311),s=n(64770),u=n(78556),l=n(90525),c=n(1719),f=n(6437).aTypedArrayConstructor;e.exports=function(e){var t,n,h,d,p,v,m=o(this),g=a(e),y=arguments.length,b=y>1?arguments[1]:void 0,x=void 0!==b,_=l(g);if(_&&!c(_))for(v=(p=u(g,_)).next,g=[];!(d=i(v,p)).done;)g.push(d.value);for(x&&y>2&&(b=r(b,arguments[2])),n=s(g),h=new(f(m))(n),t=0;n>t;t++)h[t]=x?b(g[t],t):g[t];return h}},80675:function(e,t,n){var r=n(6437),i=n(82201),o=r.TYPED_ARRAY_CONSTRUCTOR,a=r.aTypedArrayConstructor;e.exports=function(e){return a(i(e,e[o]))}},97701:function(e,t,n){var r=n(97765),i=0,o=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},11872:function(e,t,n){var r=n(41354);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},20427:function(e,t,n){var r=n(43404),i=n(84747);e.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},69526:function(e,t,n){var r=n(94766).TypeError;e.exports=function(e,t){if(e<t)throw r("Not enough arguments");return e}},30432:function(e,t,n){var r=n(51704);t.f=r},51704:function(e,t,n){var r=n(94766),i=n(97998),o=n(30746),a=n(97701),s=n(41354),u=n(11872),l=i("wks"),c=r.Symbol,f=c&&c.for,h=u?c:c&&c.withoutSetter||a;e.exports=function(e){if(!o(l,e)||!s&&"string"!=typeof l[e]){var t="Symbol."+e;s&&o(c,e)?l[e]=c[e]:l[e]=u&&f?f(t):h(t)}return l[e]}},79101:function(e){e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},58921:function(e,t,n){"use strict";var r=n(95745),i=n(94766),o=n(30558),a=n(7418),s="ArrayBuffer",u=o.ArrayBuffer;r({global:!0,forced:i.ArrayBuffer!==u},{ArrayBuffer:u}),a(s)},83950:function(e,t,n){"use strict";var r=n(95745),i=n(94766),o=n(84747),a=n(20397),s=n(36372),u=n(64311),l=n(64770),c=n(36063),f=n(49358),h=n(20364),d=n(51704),p=n(41110),v=d("isConcatSpreadable"),m=9007199254740991,g="Maximum allowed index exceeded",y=i.TypeError,b=p>=51||!o((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),x=h("concat"),_=function(e){if(!s(e))return!1;var t=e[v];return void 0!==t?!!t:a(e)};r({target:"Array",proto:!0,forced:!b||!x},{concat:function(e){var t,n,r,i,o,a=u(this),s=f(a,0),h=0;for(t=-1,r=arguments.length;t<r;t++)if(_(o=-1===t?a:arguments[t])){if(h+(i=l(o))>m)throw y(g);for(n=0;n<i;n++,h++)n in o&&c(s,h,o[n])}else{if(h>=m)throw y(g);c(s,h++,o)}return s.length=h,s}})},89028:function(e,t,n){var r=n(95745),i=n(58945),o=n(1128);r({target:"Array",proto:!0},{copyWithin:i}),o("copyWithin")},90047:function(e,t,n){var r=n(95745),i=n(4551),o=n(1128);r({target:"Array",proto:!0},{fill:i}),o("fill")},28500:function(e,t,n){"use strict";var r=n(95745),i=n(7397).filter;r({target:"Array",proto:!0,forced:!n(20364)("filter")},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},68317:function(e,t,n){"use strict";var r=n(95745),i=n(7397).findIndex,o=n(1128),a="findIndex",s=!0;a in[]&&Array(1).findIndex((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(a)},47752:function(e,t,n){"use strict";var r=n(95745),i=n(7397).find,o=n(1128),a="find",s=!0;a in[]&&Array(1).find((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(a)},51075:function(e,t,n){"use strict";var r=n(95745),i=n(38245),o=n(13792),a=n(64311),s=n(64770),u=n(49358);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=a(this),r=s(n);return o(e),(t=u(n,0)).length=i(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},66026:function(e,t,n){"use strict";var r=n(95745),i=n(38245),o=n(64311),a=n(64770),s=n(32397),u=n(49358);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),n=a(t),r=u(t,0);return r.length=i(r,t,t,n,0,void 0===e?1:s(e)),r}})},59552:function(e,t,n){var r=n(95745),i=n(34183);r({target:"Array",stat:!0,forced:!n(54580)((function(e){Array.from(e)}))},{from:i})},82587:function(e,t,n){"use strict";var r=n(95745),i=n(68445).includes,o=n(1128);r({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},72:function(e,t,n){"use strict";var r=n(95745),i=n(97765),o=n(68445).indexOf,a=n(71703),s=i([].indexOf),u=!!s&&1/s([1],1,-0)<0,l=a("indexOf");r({target:"Array",proto:!0,forced:u||!l},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return u?s(this,e,t)||0:o(this,e,t)}})},7744:function(e,t,n){"use strict";var r=n(67382),i=n(1128),o=n(78715),a=n(18417),s=n(25047).f,u=n(42974),l=n(2744),c=n(43404),f="Array Iterator",h=a.set,d=a.getterFor(f);e.exports=u(Array,"Array",(function(e,t){h(this,{type:f,target:r(e),index:0,kind:t})}),(function(){var e=d(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");var p=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!l&&c&&"values"!==p.name)try{s(p,"name",{value:"values"})}catch(v){}},17294:function(e,t,n){"use strict";var r=n(95745),i=n(97765),o=n(32652),a=n(67382),s=n(71703),u=i([].join),l=o!=Object,c=s("join",",");r({target:"Array",proto:!0,forced:l||!c},{join:function(e){return u(a(this),void 0===e?",":e)}})},88677:function(e,t,n){var r=n(95745),i=n(84025);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},64607:function(e,t,n){"use strict";var r=n(95745),i=n(7397).map;r({target:"Array",proto:!0,forced:!n(20364)("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},26320:function(e,t,n){"use strict";var r=n(95745),i=n(94766),o=n(84747),a=n(84079),s=n(36063),u=i.Array;r({target:"Array",stat:!0,forced:o((function(){function e(){}return!(u.of.call(e)instanceof e)}))},{of:function(){for(var e=0,t=arguments.length,n=new(a(this)?this:u)(t);t>e;)s(n,e,arguments[e++]);return n.length=t,n}})},69777:function(e,t,n){"use strict";var r=n(95745),i=n(15467).right,o=n(71703),a=n(41110),s=n(85002);r({target:"Array",proto:!0,forced:!o("reduceRight")||!s&&a>79&&a<83},{reduceRight:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},79913:function(e,t,n){"use strict";var r=n(95745),i=n(15467).left,o=n(71703),a=n(41110),s=n(85002);r({target:"Array",proto:!0,forced:!o("reduce")||!s&&a>79&&a<83},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},64018:function(e,t,n){"use strict";var r=n(95745),i=n(94766),o=n(20397),a=n(84079),s=n(36372),u=n(64620),l=n(64770),c=n(67382),f=n(36063),h=n(51704),d=n(20364),p=n(66017),v=d("slice"),m=h("species"),g=i.Array,y=Math.max;r({target:"Array",proto:!0,forced:!v},{slice:function(e,t){var n,r,i,h=c(this),d=l(h),v=u(e,d),b=u(void 0===t?d:t,d);if(o(h)&&(n=h.constructor,(a(n)&&(n===g||o(n.prototype))||s(n)&&null===(n=n[m]))&&(n=void 0),n===g||void 0===n))return p(h,v,b);for(r=new(void 0===n?g:n)(y(b-v,0)),i=0;v<b;v++,i++)v in h&&f(r,i,h[v]);return r.length=i,r}})},53448:function(e,t,n){"use strict";var r=n(95745),i=n(97765),o=n(13792),a=n(64311),s=n(64770),u=n(84990),l=n(84747),c=n(75078),f=n(71703),h=n(30820),d=n(59049),p=n(41110),v=n(90242),m=[],g=i(m.sort),y=i(m.push),b=l((function(){m.sort(void 0)})),x=l((function(){m.sort(null)})),_=f("sort"),w=!l((function(){if(p)return p<70;if(!(h&&h>3)){if(d)return!0;if(v)return v<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)m.push({k:t+r,v:n})}for(m.sort((function(e,t){return t.v-e.v})),r=0;r<m.length;r++)t=m[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));r({target:"Array",proto:!0,forced:b||!x||!_||!w},{sort:function(e){void 0!==e&&o(e);var t=a(this);if(w)return void 0===e?g(t):g(t,e);var n,r,i=[],l=s(t);for(r=0;r<l;r++)r in t&&y(i,t[r]);for(c(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:u(t)>u(n)?1:-1}}(e)),n=i.length,r=0;r<n;)t[r]=i[r++];for(;r<l;)delete t[r++];return t}})},59324:function(e,t,n){n(7418)("Array")},73437:function(e,t,n){"use strict";var r=n(95745),i=n(94766),o=n(64620),a=n(32397),s=n(64770),u=n(64311),l=n(49358),c=n(36063),f=n(20364)("splice"),h=i.TypeError,d=Math.max,p=Math.min,v=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var n,r,i,f,g,y,b=u(this),x=s(b),_=o(e,x),w=arguments.length;if(0===w?n=r=0:1===w?(n=0,r=x-_):(n=w-2,r=p(d(a(t),0),x-_)),x+n-r>v)throw h(m);for(i=l(b,r),f=0;f<r;f++)(g=_+f)in b&&c(i,f,b[g]);if(i.length=r,n<r){for(f=_;f<x-r;f++)y=f+n,(g=f+r)in b?b[y]=b[g]:delete b[y];for(f=x;f>x-r+n;f--)delete b[f-1]}else if(n>r)for(f=x-r;f>_;f--)y=f+n-1,(g=f+r-1)in b?b[y]=b[g]:delete b[y];for(f=0;f<n;f++)b[f+_]=arguments[f+2];return b.length=x-r+n,i}})},33424:function(e,t,n){n(1128)("flatMap")},99157:function(e,t,n){n(1128)("flat")},34173:function(e,t,n){var r=n(30746),i=n(87691),o=n(63850),a=n(51704)("toPrimitive"),s=Date.prototype;r(s,a)||i(s,a,o)},19618:function(e,t,n){"use strict";var r=n(80125),i=n(36372),o=n(25047),a=n(9628),s=n(51704)("hasInstance"),u=Function.prototype;s in u||o.f(u,s,{value:function(e){if(!r(this)||!i(e))return!1;var t=this.prototype;if(!i(t))return e instanceof this;for(;e=a(e);)if(t===e)return!0;return!1}})},80520:function(e,t,n){var r=n(43404),i=n(3583).EXISTS,o=n(97765),a=n(25047).f,s=Function.prototype,u=o(s.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,c=o(l.exec);r&&!i&&a(s,"name",{configurable:!0,get:function(){try{return c(l,u(this))[1]}catch(e){return""}}})},60356:function(e,t,n){var r=n(94766);n(59859)(r.JSON,"JSON",!0)},81040:function(e,t,n){"use strict";n(6886)("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(22005))},20940:function(e,t,n){var r=n(95745),i=n(82579),o=Math.acosh,a=Math.log,s=Math.sqrt,u=Math.LN2;r({target:"Math",stat:!0,forced:!o||710!=Math.floor(o(Number.MAX_VALUE))||o(1/0)!=1/0},{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?a(e)+u:i(e-1+s(e-1)*s(e+1))}})},68862:function(e,t,n){var r=n(95745),i=Math.asinh,o=Math.log,a=Math.sqrt;r({target:"Math",stat:!0,forced:!(i&&1/i(0)>0)},{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):o(t+a(t*t+1)):t}})},11742:function(e,t,n){var r=n(95745),i=Math.atanh,o=Math.log;r({target:"Math",stat:!0,forced:!(i&&1/i(-0)<0)},{atanh:function(e){return 0==(e=+e)?e:o((1+e)/(1-e))/2}})},99307:function(e,t,n){var r=n(95745),i=n(47297),o=Math.abs,a=Math.pow;r({target:"Math",stat:!0},{cbrt:function(e){return i(e=+e)*a(o(e),1/3)}})},90618:function(e,t,n){var r=n(95745),i=Math.floor,o=Math.log,a=Math.LOG2E;r({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-i(o(e+.5)*a):32}})},30728:function(e,t,n){var r=n(95745),i=n(76075),o=Math.cosh,a=Math.abs,s=Math.E;r({target:"Math",stat:!0,forced:!o||o(710)===1/0},{cosh:function(e){var t=i(a(e)-1)+1;return(t+1/(t*s*s))*(s/2)}})},68229:function(e,t,n){var r=n(95745),i=n(76075);r({target:"Math",stat:!0,forced:i!=Math.expm1},{expm1:i})},62169:function(e,t,n){n(95745)({target:"Math",stat:!0},{fround:n(85279)})},69100:function(e,t,n){var r=n(95745),i=Math.hypot,o=Math.abs,a=Math.sqrt;r({target:"Math",stat:!0,forced:!!i&&i(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,i=0,s=0,u=arguments.length,l=0;s<u;)l<(n=o(arguments[s++]))?(i=i*(r=l/n)*r+1,l=n):i+=n>0?(r=n/l)*r:n;return l===1/0?1/0:l*a(i)}})},30482:function(e,t,n){var r=n(95745),i=n(84747),o=Math.imul;r({target:"Math",stat:!0,forced:i((function(){return-5!=o(4294967295,5)||2!=o.length}))},{imul:function(e,t){var n=65535,r=+e,i=+t,o=n&r,a=n&i;return 0|o*a+((n&r>>>16)*a+o*(n&i>>>16)<<16>>>0)}})},79304:function(e,t,n){n(95745)({target:"Math",stat:!0},{log10:n(2317)})},60731:function(e,t,n){n(95745)({target:"Math",stat:!0},{log1p:n(82579)})},31167:function(e,t,n){var r=n(95745),i=Math.log,o=Math.LN2;r({target:"Math",stat:!0},{log2:function(e){return i(e)/o}})},64840:function(e,t,n){n(95745)({target:"Math",stat:!0},{sign:n(47297)})},11697:function(e,t,n){var r=n(95745),i=n(84747),o=n(76075),a=Math.abs,s=Math.exp,u=Math.E;r({target:"Math",stat:!0,forced:i((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(e){return a(e=+e)<1?(o(e)-o(-e))/2:(s(e-1)-s(-e-1))*(u/2)}})},6105:function(e,t,n){var r=n(95745),i=n(76075),o=Math.exp;r({target:"Math",stat:!0},{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},74072:function(e,t,n){n(59859)(Math,"Math",!0)},87249:function(e,t,n){var r=n(95745),i=Math.ceil,o=Math.floor;r({target:"Math",stat:!0},{trunc:function(e){return(e>0?o:i)(e)}})},83546:function(e,t,n){"use strict";var r=n(43404),i=n(94766),o=n(97765),a=n(37218),s=n(87691),u=n(30746),l=n(65758),c=n(73982),f=n(45013),h=n(86395),d=n(84747),p=n(47233).f,v=n(8113).f,m=n(25047).f,g=n(57161),y=n(63226).trim,b="Number",x=i.Number,_=x.prototype,w=i.TypeError,S=o("".slice),E=o("".charCodeAt),k=function(e){var t=h(e,"number");return"bigint"==typeof t?t:O(t)},O=function(e){var t,n,r,i,o,a,s,u,l=h(e,"number");if(f(l))throw w("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=y(l),43===(t=E(l,0))||45===t){if(88===(n=E(l,2))||120===n)return NaN}else if(48===t){switch(E(l,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(a=(o=S(l,2)).length,s=0;s<a;s++)if((u=E(o,s))<48||u>i)return NaN;return parseInt(o,r)}return+l};if(a(b,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var A,C=function(e){var t=arguments.length<1?0:x(k(e)),n=this;return c(_,n)&&d((function(){g(n)}))?l(Object(t),n,C):t},M=r?p(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),T=0;M.length>T;T++)u(x,A=M[T])&&!u(C,A)&&m(C,A,v(x,A));C.prototype=_,_.constructor=C,s(i,b,C)}},75120:function(e,t,n){n(95745)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},74099:function(e,t,n){n(95745)({target:"Number",stat:!0},{isFinite:n(78482)})},72205:function(e,t,n){n(95745)({target:"Number",stat:!0},{isInteger:n(78059)})},570:function(e,t,n){n(95745)({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},99176:function(e,t,n){var r=n(95745),i=n(78059),o=Math.abs;r({target:"Number",stat:!0},{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},11839:function(e,t,n){n(95745)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},45459:function(e,t,n){n(95745)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},11207:function(e,t,n){var r=n(95745),i=n(66579);r({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},97376:function(e,t,n){var r=n(95745),i=n(87131);r({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},39504:function(e,t,n){"use strict";var r=n(95745),i=n(94766),o=n(97765),a=n(32397),s=n(57161),u=n(95779),l=n(84747),c=i.RangeError,f=i.String,h=Math.floor,d=o(u),p=o("".slice),v=o(1..toFixed),m=function e(t,n,r){return 0===n?r:n%2===1?e(t,n-1,r*t):e(t*t,n/2,r)},g=function(e,t,n){for(var r=-1,i=n;++r<6;)i+=t*e[r],e[r]=i%1e7,i=h(i/1e7)},y=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=h(r/t),r=r%t*1e7},b=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=f(e[t]);n=""===n?r:n+d("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:l((function(){return"0.000"!==v(8e-5,3)||"1"!==v(.9,0)||"1.25"!==v(1.255,2)||"1000000000000000128"!==v(0xde0b6b3a7640080,0)}))||!l((function(){v({})}))},{toFixed:function(e){var t,n,r,i,o=s(this),u=a(e),l=[0,0,0,0,0,0],h="",v="0";if(u<0||u>20)throw c("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return f(o);if(o<0&&(h="-",o=-o),o>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(o*m(2,69,1))-69)<0?o*m(2,-t,1):o/m(2,t,1),n*=4503599627370496,(t=52-t)>0){for(g(l,0,n),r=u;r>=7;)g(l,1e7,0),r-=7;for(g(l,m(10,r,1),0),r=t-1;r>=23;)y(l,1<<23),r-=23;y(l,1<<r),g(l,1,1),y(l,2),v=b(l)}else g(l,0,n),g(l,1<<-t,0),v=b(l)+d("0",u);return v=u>0?h+((i=v.length)<=u?"0."+d("0",u-i)+v:p(v,0,i-u)+"."+p(v,i-u)):h+v}})},24783:function(e,t,n){var r=n(95745),i=n(7517);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},2036:function(e,t,n){"use strict";var r=n(95745),i=n(43404),o=n(58712),a=n(13792),s=n(64311),u=n(25047);i&&r({target:"Object",proto:!0,forced:o},{__defineGetter__:function(e,t){u.f(s(this),e,{get:a(t),enumerable:!0,configurable:!0})}})},93938:function(e,t,n){var r=n(95745),i=n(43404),o=n(7819).f;r({target:"Object",stat:!0,forced:Object.defineProperties!==o,sham:!i},{defineProperties:o})},86510:function(e,t,n){var r=n(95745),i=n(43404),o=n(25047).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==o,sham:!i},{defineProperty:o})},68072:function(e,t,n){"use strict";var r=n(95745),i=n(43404),o=n(58712),a=n(13792),s=n(64311),u=n(25047);i&&r({target:"Object",proto:!0,forced:o},{__defineSetter__:function(e,t){u.f(s(this),e,{set:a(t),enumerable:!0,configurable:!0})}})},61991:function(e,t,n){var r=n(95745),i=n(41585).entries;r({target:"Object",stat:!0},{entries:function(e){return i(e)}})},1701:function(e,t,n){var r=n(95745),i=n(45315),o=n(84747),a=n(36372),s=n(95202).onFreeze,u=Object.freeze;r({target:"Object",stat:!0,forced:o((function(){u(1)})),sham:!i},{freeze:function(e){return u&&a(e)?u(s(e)):e}})},26410:function(e,t,n){var r=n(95745),i=n(57723),o=n(36063);r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,n){o(t,e,n)}),{AS_ENTRIES:!0}),t}})},50322:function(e,t,n){var r=n(95745),i=n(84747),o=n(67382),a=n(8113).f,s=n(43404),u=i((function(){a(1)}));r({target:"Object",stat:!0,forced:!s||u,sham:!s},{getOwnPropertyDescriptor:function(e,t){return a(o(e),t)}})},30794:function(e,t,n){var r=n(95745),i=n(43404),o=n(7127),a=n(67382),s=n(8113),u=n(36063);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){for(var t,n,r=a(e),i=s.f,l=o(r),c={},f=0;l.length>f;)void 0!==(n=i(r,t=l[f++]))&&u(c,t,n);return c}})},1020:function(e,t,n){var r=n(95745),i=n(84747),o=n(19307).f;r({target:"Object",stat:!0,forced:i((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:o})},10848:function(e,t,n){var r=n(95745),i=n(84747),o=n(64311),a=n(9628),s=n(62504);r({target:"Object",stat:!0,forced:i((function(){a(1)})),sham:!s},{getPrototypeOf:function(e){return a(o(e))}})},28497:function(e,t,n){var r=n(95745),i=n(50215);r({target:"Object",stat:!0,forced:Object.isExtensible!==i},{isExtensible:i})},33347:function(e,t,n){var r=n(95745),i=n(84747),o=n(36372),a=n(79641),s=n(44067),u=Object.isFrozen;r({target:"Object",stat:!0,forced:i((function(){u(1)}))||s},{isFrozen:function(e){return!o(e)||(!(!s||"ArrayBuffer"!=a(e))||!!u&&u(e))}})},92958:function(e,t,n){var r=n(95745),i=n(84747),o=n(36372),a=n(79641),s=n(44067),u=Object.isSealed;r({target:"Object",stat:!0,forced:i((function(){u(1)}))||s},{isSealed:function(e){return!o(e)||(!(!s||"ArrayBuffer"!=a(e))||!!u&&u(e))}})},79133:function(e,t,n){n(95745)({target:"Object",stat:!0},{is:n(25392)})},16406:function(e,t,n){var r=n(95745),i=n(64311),o=n(45888);r({target:"Object",stat:!0,forced:n(84747)((function(){o(1)}))},{keys:function(e){return o(i(e))}})},17756:function(e,t,n){"use strict";var r=n(95745),i=n(43404),o=n(58712),a=n(64311),s=n(83281),u=n(9628),l=n(8113).f;i&&r({target:"Object",proto:!0,forced:o},{__lookupGetter__:function(e){var t,n=a(this),r=s(e);do{if(t=l(n,r))return t.get}while(n=u(n))}})},17930:function(e,t,n){"use strict";var r=n(95745),i=n(43404),o=n(58712),a=n(64311),s=n(83281),u=n(9628),l=n(8113).f;i&&r({target:"Object",proto:!0,forced:o},{__lookupSetter__:function(e){var t,n=a(this),r=s(e);do{if(t=l(n,r))return t.set}while(n=u(n))}})},36584:function(e,t,n){var r=n(95745),i=n(36372),o=n(95202).onFreeze,a=n(45315),s=n(84747),u=Object.preventExtensions;r({target:"Object",stat:!0,forced:s((function(){u(1)})),sham:!a},{preventExtensions:function(e){return u&&i(e)?u(o(e)):e}})},29599:function(e,t,n){var r=n(95745),i=n(36372),o=n(95202).onFreeze,a=n(45315),s=n(84747),u=Object.seal;r({target:"Object",stat:!0,forced:s((function(){u(1)})),sham:!a},{seal:function(e){return u&&i(e)?u(o(e)):e}})},98097:function(e,t,n){n(95745)({target:"Object",stat:!0},{setPrototypeOf:n(60801)})},65898:function(e,t,n){var r=n(32827),i=n(87691),o=n(97756);r||i(Object.prototype,"toString",o,{unsafe:!0})},47735:function(e,t,n){var r=n(95745),i=n(41585).values;r({target:"Object",stat:!0},{values:function(e){return i(e)}})},46403:function(e,t,n){var r=n(95745),i=n(66579);r({global:!0,forced:parseFloat!=i},{parseFloat:i})},76494:function(e,t,n){var r=n(95745),i=n(87131);r({global:!0,forced:parseInt!=i},{parseInt:i})},22266:function(e,t,n){"use strict";var r=n(95745),i=n(2744),o=n(4279),a=n(84747),s=n(60783),u=n(80125),l=n(82201),c=n(12474),f=n(87691);if(r({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=l(this,s("Promise")),n=u(e);return this.then(n?function(n){return c(t,e()).then((function(){return n}))}:e,n?function(n){return c(t,e()).then((function(){throw n}))}:e)}}),!i&&u(o)){var h=s("Promise").prototype.finally;o.prototype.finally!==h&&f(o.prototype,"finally",h,{unsafe:!0})}},45325:function(e,t,n){"use strict";var r,i,o,a,s=n(95745),u=n(2744),l=n(94766),c=n(60783),f=n(2012),h=n(4279),d=n(87691),p=n(35454),v=n(60801),m=n(59859),g=n(7418),y=n(13792),b=n(80125),x=n(36372),_=n(6432),w=n(67271),S=n(57723),E=n(54580),k=n(82201),O=n(3097).set,A=n(92574),C=n(12474),M=n(46893),T=n(86394),P=n(20714),R=n(59435),I=n(18417),L=n(37218),N=n(51704),j=n(43430),D=n(85002),B=n(41110),z=N("species"),F="Promise",V=I.getterFor(F),U=I.set,Z=I.getterFor(F),H=h&&h.prototype,G=h,W=H,q=l.TypeError,K=l.document,Y=l.process,X=T.f,$=X,J=!!(K&&K.createEvent&&l.dispatchEvent),Q=b(l.PromiseRejectionEvent),ee="unhandledrejection",te=!1,ne=L(F,(function(){var e=w(G),t=e!==String(G);if(!t&&66===B)return!0;if(u&&!W.finally)return!0;if(B>=51&&/native code/.test(e))return!1;var n=new G((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[z]=r,!(te=n.then((function(){}))instanceof r)||!t&&j&&!Q})),re=ne||!E((function(e){G.all(e).catch((function(){}))})),ie=function(e){var t;return!(!x(e)||!b(t=e.then))&&t},oe=function(e,t){var n,r,i,o=t.value,a=1==t.state,s=a?e.ok:e.fail,u=e.resolve,l=e.reject,c=e.domain;try{s?(a||(2===t.rejection&&ce(t),t.rejection=1),!0===s?n=o:(c&&c.enter(),n=s(o),c&&(c.exit(),i=!0)),n===e.promise?l(q("Promise-chain cycle")):(r=ie(n))?f(r,n,u,l):u(n)):l(o)}catch(h){c&&!i&&c.exit(),l(h)}},ae=function(e,t){e.notified||(e.notified=!0,A((function(){for(var n,r=e.reactions;n=r.get();)oe(n,e);e.notified=!1,t&&!e.rejection&&ue(e)})))},se=function(e,t,n){var r,i;J?((r=K.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),l.dispatchEvent(r)):r={promise:t,reason:n},!Q&&(i=l["on"+e])?i(r):e===ee&&M("Unhandled promise rejection",n)},ue=function(e){f(O,l,(function(){var t,n=e.facade,r=e.value;if(le(e)&&(t=P((function(){D?Y.emit("unhandledRejection",r,n):se(ee,n,r)})),e.rejection=D||le(e)?2:1,t.error))throw t.value}))},le=function(e){return 1!==e.rejection&&!e.parent},ce=function(e){f(O,l,(function(){var t=e.facade;D?Y.emit("rejectionHandled",t):se("rejectionhandled",t,e.value)}))},fe=function(e,t,n){return function(r){e(t,r,n)}},he=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,ae(e,!0))},de=function e(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw q("Promise can't be resolved itself");var i=ie(n);i?A((function(){var r={done:!1};try{f(i,n,fe(e,r,t),fe(he,r,t))}catch(o){he(r,o,t)}})):(t.value=n,t.state=1,ae(t,!1))}catch(o){he({done:!1},o,t)}}};if(ne&&(W=(G=function(e){_(this,W),y(e),f(r,this);var t=V(this);try{e(fe(de,t),fe(he,t))}catch(n){he(t,n)}}).prototype,(r=function(e){U(this,{type:F,done:!1,notified:!1,parent:!1,reactions:new R,rejection:!1,state:0,value:void 0})}).prototype=p(W,{then:function(e,t){var n=Z(this),r=X(k(this,G));return n.parent=!0,r.ok=!b(e)||e,r.fail=b(t)&&t,r.domain=D?Y.domain:void 0,0==n.state?n.reactions.add(r):A((function(){oe(r,n)})),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=V(e);this.promise=e,this.resolve=fe(de,t),this.reject=fe(he,t)},T.f=X=function(e){return e===G||e===o?new i(e):$(e)},!u&&b(h)&&H!==Object.prototype)){a=H.then,te||(d(H,"then",(function(e,t){var n=this;return new G((function(e,t){f(a,n,e,t)})).then(e,t)}),{unsafe:!0}),d(H,"catch",W.catch,{unsafe:!0}));try{delete H.constructor}catch(pe){}v&&v(H,W)}s({global:!0,wrap:!0,forced:ne},{Promise:G}),m(G,F,!1,!0),g(F),o=c(F),s({target:F,stat:!0,forced:ne},{reject:function(e){var t=X(this);return f(t.reject,void 0,e),t.promise}}),s({target:F,stat:!0,forced:u||ne},{resolve:function(e){return C(u&&this===o?G:this,e)}}),s({target:F,stat:!0,forced:re},{all:function(e){var t=this,n=X(t),r=n.resolve,i=n.reject,o=P((function(){var n=y(t.resolve),o=[],a=0,s=1;S(e,(function(e){var u=a++,l=!1;s++,f(n,t,e).then((function(e){l||(l=!0,o[u]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=X(t),r=n.reject,i=P((function(){var i=y(t.resolve);S(e,(function(e){f(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},52498:function(e,t,n){var r=n(95745),i=n(11465),o=n(13792),a=n(51971);r({target:"Reflect",stat:!0,forced:!n(84747)((function(){Reflect.apply((function(){}))}))},{apply:function(e,t,n){return i(o(e),t,a(n))}})},90826:function(e,t,n){var r=n(95745),i=n(60783),o=n(11465),a=n(46070),s=n(30759),u=n(51971),l=n(36372),c=n(93522),f=n(84747),h=i("Reflect","construct"),d=Object.prototype,p=[].push,v=f((function(){function e(){}return!(h((function(){}),[],e)instanceof e)})),m=!f((function(){h((function(){}))})),g=v||m;r({target:"Reflect",stat:!0,forced:g,sham:g},{construct:function(e,t){s(e),u(t);var n=arguments.length<3?e:s(arguments[2]);if(m&&!v)return h(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return o(p,r,t),new(o(a,e,r))}var i=n.prototype,f=c(l(i)?i:d),g=o(e,f,t);return l(g)?g:f}})},61644:function(e,t,n){var r=n(95745),i=n(43404),o=n(51971),a=n(83281),s=n(25047);r({target:"Reflect",stat:!0,forced:n(84747)((function(){Reflect.defineProperty(s.f({},1,{value:1}),1,{value:2})})),sham:!i},{defineProperty:function(e,t,n){o(e);var r=a(t);o(n);try{return s.f(e,r,n),!0}catch(i){return!1}}})},98520:function(e,t,n){var r=n(95745),i=n(51971),o=n(8113).f;r({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=o(i(e),t);return!(n&&!n.configurable)&&delete e[t]}})},23822:function(e,t,n){var r=n(95745),i=n(43404),o=n(51971),a=n(8113);r({target:"Reflect",stat:!0,sham:!i},{getOwnPropertyDescriptor:function(e,t){return a.f(o(e),t)}})},2303:function(e,t,n){var r=n(95745),i=n(51971),o=n(9628);r({target:"Reflect",stat:!0,sham:!n(62504)},{getPrototypeOf:function(e){return o(i(e))}})},73755:function(e,t,n){var r=n(95745),i=n(2012),o=n(36372),a=n(51971),s=n(36270),u=n(8113),l=n(9628);r({target:"Reflect",stat:!0},{get:function e(t,n){var r,c,f=arguments.length<3?t:arguments[2];return a(t)===f?t[n]:(r=u.f(t,n))?s(r)?r.value:void 0===r.get?void 0:i(r.get,f):o(c=l(t))?e(c,n,f):void 0}})},43362:function(e,t,n){n(95745)({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},8781:function(e,t,n){var r=n(95745),i=n(51971),o=n(50215);r({target:"Reflect",stat:!0},{isExtensible:function(e){return i(e),o(e)}})},44726:function(e,t,n){n(95745)({target:"Reflect",stat:!0},{ownKeys:n(7127)})},77231:function(e,t,n){var r=n(95745),i=n(60783),o=n(51971);r({target:"Reflect",stat:!0,sham:!n(45315)},{preventExtensions:function(e){o(e);try{var t=i("Object","preventExtensions");return t&&t(e),!0}catch(n){return!1}}})},74022:function(e,t,n){var r=n(95745),i=n(51971),o=n(43024),a=n(60801);a&&r({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){i(e),o(t);try{return a(e,t),!0}catch(n){return!1}}})},47623:function(e,t,n){var r=n(95745),i=n(2012),o=n(51971),a=n(36372),s=n(36270),u=n(84747),l=n(25047),c=n(8113),f=n(9628),h=n(61410);r({target:"Reflect",stat:!0,forced:u((function(){var e=function(){},t=l.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}))},{set:function e(t,n,r){var u,d,p,v=arguments.length<4?t:arguments[3],m=c.f(o(t),n);if(!m){if(a(d=f(t)))return e(d,n,r,v);m=h(0)}if(s(m)){if(!1===m.writable||!a(v))return!1;if(u=c.f(v,n)){if(u.get||u.set||!1===u.writable)return!1;u.value=r,l.f(v,n,u)}else l.f(v,n,h(0,r))}else{if(void 0===(p=m.set))return!1;i(p,v,r)}return!0}})},75642:function(e,t,n){var r=n(43404),i=n(94766),o=n(97765),a=n(37218),s=n(65758),u=n(1068),l=n(25047).f,c=n(47233).f,f=n(73982),h=n(11091),d=n(84990),p=n(55388),v=n(27374),m=n(87691),g=n(84747),y=n(30746),b=n(18417).enforce,x=n(7418),_=n(51704),w=n(9756),S=n(34139),E=_("match"),k=i.RegExp,O=k.prototype,A=i.SyntaxError,C=o(p),M=o(O.exec),T=o("".charAt),P=o("".replace),R=o("".indexOf),I=o("".slice),L=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,N=/a/g,j=/a/g,D=new k(N)!==N,B=v.MISSED_STICKY,z=v.UNSUPPORTED_Y,F=r&&(!D||B||w||S||g((function(){return j[E]=!1,k(N)!=N||k(j)==j||"/a/i"!=k(N,"i")})));if(a("RegExp",F)){for(var V=function(e,t){var n,r,i,o,a,l,c=f(O,this),p=h(e),v=void 0===t,m=[],g=e;if(!c&&p&&v&&e.constructor===V)return e;if((p||f(O,e))&&(e=e.source,v&&(t="flags"in g?g.flags:C(g))),e=void 0===e?"":d(e),t=void 0===t?"":d(t),g=e,w&&"dotAll"in N&&(r=!!t&&R(t,"s")>-1)&&(t=P(t,/s/g,"")),n=t,B&&"sticky"in N&&(i=!!t&&R(t,"y")>-1)&&z&&(t=P(t,/y/g,"")),S&&(o=function(e){for(var t,n=e.length,r=0,i="",o=[],a={},s=!1,u=!1,l=0,c="";r<=n;r++){if("\\"===(t=T(e,r)))t+=T(e,++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:M(L,I(e,r+1))&&(r+=2,u=!0),i+=t,l++;continue;case">"===t&&u:if(""===c||y(a,c))throw new A("Invalid capture group name");a[c]=!0,o[o.length]=[c,l],u=!1,c="";continue}u?c+=t:i+=t}return[i,o]}(e),e=o[0],m=o[1]),a=s(k(e,t),c?this:O,V),(r||i||m.length)&&(l=b(a),r&&(l.dotAll=!0,l.raw=V(function(e){for(var t,n=e.length,r=0,i="",o=!1;r<=n;r++)"\\"!==(t=T(e,r))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+T(e,++r);return i}(e),n)),i&&(l.sticky=!0),m.length&&(l.groups=m)),e!==g)try{u(a,"source",""===g?"(?:)":g)}catch(x){}return a},U=function(e){e in V||l(V,e,{configurable:!0,get:function(){return k[e]},set:function(t){k[e]=t}})},Z=c(k),H=0;Z.length>H;)U(Z[H++]);O.constructor=V,V.prototype=O,m(i,"RegExp",V)}x("RegExp")},67249:function(e,t,n){"use strict";var r=n(95745),i=n(33142);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},97851:function(e,t,n){var r=n(43404),i=n(25047),o=n(55388),a=n(84747),s=RegExp.prototype;r&&a((function(){return"sy"!==Object.getOwnPropertyDescriptor(s,"flags").get.call({dotAll:!0,sticky:!0})}))&&i.f(s,"flags",{configurable:!0,get:o})},27285:function(e,t,n){"use strict";var r=n(97765),i=n(3583).PROPER,o=n(87691),a=n(51971),s=n(73982),u=n(84990),l=n(84747),c=n(55388),f="toString",h=RegExp.prototype,d=h.toString,p=r(c),v=l((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),m=i&&d.name!=f;(v||m)&&o(RegExp.prototype,f,(function(){var e=a(this),t=u(e.source),n=e.flags;return"/"+t+"/"+u(void 0===n&&s(h,e)&&!("flags"in h)?p(e):n)}),{unsafe:!0})},33141:function(e,t,n){"use strict";n(6886)("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(22005))},72610:function(e,t,n){"use strict";var r=n(95745),i=n(65951);r({target:"String",proto:!0,forced:n(64261)("anchor")},{anchor:function(e){return i(this,"a","name",e)}})},878:function(e,t,n){"use strict";var r=n(95745),i=n(65951);r({target:"String",proto:!0,forced:n(64261)("big")},{big:function(){return i(this,"big","","")}})},79298:function(e,t,n){"use strict";var r=n(95745),i=n(65951);r({target:"String",proto:!0,forced:n(64261)("blink")},{blink:function(){return i(this,"blink","","")}})},21285:function(e,t,n){"use strict";var r=n(95745),i=n(65951);r({target:"String",proto:!0,forced:n(64261)("bold")},{bold:function(){return i(this,"b","","")}})},31363:function(e,t,n){"use strict";var r=n(95745),i=n(7851).codeAt;r({target:"String",proto:!0},{codePointAt:function(e){return i(this,e)}})},38941:function(e,t,n){"use strict";var r=n(95745),i=n(97765),o=n(8113).f,a=n(87452),s=n(84990),u=n(12312),l=n(1660),c=n(92911),f=n(2744),h=i("".endsWith),d=i("".slice),p=Math.min,v=c("endsWith");r({target:"String",proto:!0,forced:!(!f&&!v&&!!function(){var e=o(String.prototype,"endsWith");return e&&!e.writable}())&&!v},{endsWith:function(e){var t=s(l(this));u(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,i=void 0===n?r:p(a(n),r),o=s(e);return h?h(t,o,i):d(t,i-o.length,i)===o}})},90176:function(e,t,n){"use strict";var r=n(95745),i=n(65951);r({target:"String",proto:!0,forced:n(64261)("fixed")},{fixed:function(){return i(this,"tt","","")}})},55700:function(e,t,n){"use strict";var r=n(95745),i=n(65951);r({target:"String",proto:!0,forced:n(64261)("fontcolor")},{fontcolor:function(e){return i(this,"font","color",e)}})},68886:function(e,t,n){"use strict";var r=n(95745),i=n(65951);r({target:"String",proto:!0,forced:n(64261)("fontsize")},{fontsize:function(e){return i(this,"font","size",e)}})},22584:function(e,t,n){var r=n(95745),i=n(94766),o=n(97765),a=n(64620),s=i.RangeError,u=String.fromCharCode,l=String.fromCodePoint,c=o([].join);r({target:"String",stat:!0,forced:!!l&&1!=l.length},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,i=0;r>i;){if(t=+arguments[i++],a(t,1114111)!==t)throw s(t+" is not a valid code point");n[i]=t<65536?u(t):u(55296+((t-=65536)>>10),t%1024+56320)}return c(n,"")}})},68944:function(e,t,n){"use strict";var r=n(95745),i=n(97765),o=n(12312),a=n(1660),s=n(84990),u=n(92911),l=i("".indexOf);r({target:"String",proto:!0,forced:!u("includes")},{includes:function(e){return!!~l(s(a(this)),s(o(e)),arguments.length>1?arguments[1]:void 0)}})},66092:function(e,t,n){"use strict";var r=n(95745),i=n(65951);r({target:"String",proto:!0,forced:n(64261)("italics")},{italics:function(){return i(this,"i","","")}})},13244:function(e,t,n){"use strict";var r=n(7851).charAt,i=n(84990),o=n(18417),a=n(42974),s="String Iterator",u=o.set,l=o.getterFor(s);a(String,"String",(function(e){u(this,{type:s,string:i(e),index:0})}),(function(){var e,t=l(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},58018:function(e,t,n){"use strict";var r=n(95745),i=n(65951);r({target:"String",proto:!0,forced:n(64261)("link")},{link:function(e){return i(this,"a","href",e)}})},724:function(e,t,n){"use strict";var r=n(2012),i=n(82578),o=n(51971),a=n(87452),s=n(84990),u=n(1660),l=n(37405),c=n(51127),f=n(8892);i("match",(function(e,t,n){return[function(t){var n=u(this),i=void 0==t?void 0:l(t,e);return i?r(i,t,n):new RegExp(t)[e](s(n))},function(e){var r=o(this),i=s(e),u=n(t,r,i);if(u.done)return u.value;if(!r.global)return f(r,i);var l=r.unicode;r.lastIndex=0;for(var h,d=[],p=0;null!==(h=f(r,i));){var v=s(h[0]);d[p]=v,""===v&&(r.lastIndex=c(i,a(r.lastIndex),l)),p++}return 0===p?null:d}]}))},78875:function(e,t,n){"use strict";var r=n(95745),i=n(19570).end;r({target:"String",proto:!0,forced:n(18708)},{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},72346:function(e,t,n){"use strict";var r=n(95745),i=n(19570).start;r({target:"String",proto:!0,forced:n(18708)},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},93766:function(e,t,n){var r=n(95745),i=n(97765),o=n(67382),a=n(64311),s=n(84990),u=n(64770),l=i([].push),c=i([].join);r({target:"String",stat:!0},{raw:function(e){for(var t=o(a(e).raw),n=u(t),r=arguments.length,i=[],f=0;n>f;){if(l(i,s(t[f++])),f===n)return c(i,"");f<r&&l(i,s(arguments[f]))}}})},51963:function(e,t,n){n(95745)({target:"String",proto:!0},{repeat:n(95779)})},60417:function(e,t,n){"use strict";var r=n(11465),i=n(2012),o=n(97765),a=n(82578),s=n(84747),u=n(51971),l=n(80125),c=n(32397),f=n(87452),h=n(84990),d=n(1660),p=n(51127),v=n(37405),m=n(19193),g=n(8892),y=n(51704)("replace"),b=Math.max,x=Math.min,_=o([].concat),w=o([].push),S=o("".indexOf),E=o("".slice),k="$0"==="a".replace(/./,"$0"),O=!!/./[y]&&""===/./[y]("a","$0");a("replace",(function(e,t,n){var o=O?"$":"$0";return[function(e,n){var r=d(this),o=void 0==e?void 0:v(e,y);return o?i(o,e,r,n):i(t,h(r),e,n)},function(e,i){var a=u(this),s=h(e);if("string"==typeof i&&-1===S(i,o)&&-1===S(i,"$<")){var d=n(t,a,s,i);if(d.done)return d.value}var v=l(i);v||(i=h(i));var y=a.global;if(y){var k=a.unicode;a.lastIndex=0}for(var O=[];;){var A=g(a,s);if(null===A)break;if(w(O,A),!y)break;""===h(A[0])&&(a.lastIndex=p(s,f(a.lastIndex),k))}for(var C,M="",T=0,P=0;P<O.length;P++){for(var R=h((A=O[P])[0]),I=b(x(c(A.index),s.length),0),L=[],N=1;N<A.length;N++)w(L,void 0===(C=A[N])?C:String(C));var j=A.groups;if(v){var D=_([R],L,I,s);void 0!==j&&w(D,j);var B=h(r(i,void 0,D))}else B=m(R,s,I,L,j,i);I>=T&&(M+=E(s,T,I)+B,T=I+R.length)}return M+E(s,T)}]}),!!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!k||O)},63098:function(e,t,n){"use strict";var r=n(2012),i=n(82578),o=n(51971),a=n(1660),s=n(25392),u=n(84990),l=n(37405),c=n(8892);i("search",(function(e,t,n){return[function(t){var n=a(this),i=void 0==t?void 0:l(t,e);return i?r(i,t,n):new RegExp(t)[e](u(n))},function(e){var r=o(this),i=u(e),a=n(t,r,i);if(a.done)return a.value;var l=r.lastIndex;s(l,0)||(r.lastIndex=0);var f=c(r,i);return s(r.lastIndex,l)||(r.lastIndex=l),null===f?-1:f.index}]}))},7897:function(e,t,n){"use strict";var r=n(95745),i=n(65951);r({target:"String",proto:!0,forced:n(64261)("small")},{small:function(){return i(this,"small","","")}})},31844:function(e,t,n){"use strict";var r=n(11465),i=n(2012),o=n(97765),a=n(82578),s=n(11091),u=n(51971),l=n(1660),c=n(82201),f=n(51127),h=n(87452),d=n(84990),p=n(37405),v=n(64277),m=n(8892),g=n(33142),y=n(27374),b=n(84747),x=y.UNSUPPORTED_Y,_=4294967295,w=Math.min,S=[].push,E=o(/./.exec),k=o(S),O=o("".slice),A=!b((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));a("split",(function(e,t,n){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var o=d(l(this)),a=void 0===n?_:n>>>0;if(0===a)return[];if(void 0===e)return[o];if(!s(e))return i(t,o,e,a);for(var u,c,f,h=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,y=new RegExp(e.source,p+"g");(u=i(g,y,o))&&!((c=y.lastIndex)>m&&(k(h,O(o,m,u.index)),u.length>1&&u.index<o.length&&r(S,h,v(u,1)),f=u[0].length,m=c,h.length>=a));)y.lastIndex===u.index&&y.lastIndex++;return m===o.length?!f&&E(y,"")||k(h,""):k(h,O(o,m)),h.length>a?v(h,0,a):h}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:i(t,this,e,n)}:t,[function(t,n){var r=l(this),a=void 0==t?void 0:p(t,e);return a?i(a,t,r,n):i(o,d(r),t,n)},function(e,r){var i=u(this),a=d(e),s=n(o,i,a,r,o!==t);if(s.done)return s.value;var l=c(i,RegExp),p=i.unicode,v=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(x?"g":"y"),g=new l(x?"^(?:"+i.source+")":i,v),y=void 0===r?_:r>>>0;if(0===y)return[];if(0===a.length)return null===m(g,a)?[a]:[];for(var b=0,S=0,E=[];S<a.length;){g.lastIndex=x?0:S;var A,C=m(g,x?O(a,S):a);if(null===C||(A=w(h(g.lastIndex+(x?S:0)),a.length))===b)S=f(a,S,p);else{if(k(E,O(a,b,S)),E.length===y)return E;for(var M=1;M<=C.length-1;M++)if(k(E,C[M]),E.length===y)return E;S=b=A}}return k(E,O(a,b)),E}]}),!A,x)},11279:function(e,t,n){"use strict";var r=n(95745),i=n(97765),o=n(8113).f,a=n(87452),s=n(84990),u=n(12312),l=n(1660),c=n(92911),f=n(2744),h=i("".startsWith),d=i("".slice),p=Math.min,v=c("startsWith");r({target:"String",proto:!0,forced:!(!f&&!v&&!!function(){var e=o(String.prototype,"startsWith");return e&&!e.writable}())&&!v},{startsWith:function(e){var t=s(l(this));u(e);var n=a(p(arguments.length>1?arguments[1]:void 0,t.length)),r=s(e);return h?h(t,r,n):d(t,n,n+r.length)===r}})},56405:function(e,t,n){"use strict";var r=n(95745),i=n(65951);r({target:"String",proto:!0,forced:n(64261)("strike")},{strike:function(){return i(this,"strike","","")}})},43569:function(e,t,n){"use strict";var r=n(95745),i=n(65951);r({target:"String",proto:!0,forced:n(64261)("sub")},{sub:function(){return i(this,"sub","","")}})},17670:function(e,t,n){"use strict";var r=n(95745),i=n(65951);r({target:"String",proto:!0,forced:n(64261)("sup")},{sup:function(){return i(this,"sup","","")}})},95073:function(e,t,n){"use strict";var r=n(95745),i=n(63226).end,o=n(61963)("trimEnd"),a=o?function(){return i(this)}:"".trimEnd;r({target:"String",proto:!0,name:"trimEnd",forced:o},{trimEnd:a,trimRight:a})},99773:function(e,t,n){"use strict";var r=n(95745),i=n(63226).start,o=n(61963)("trimStart"),a=o?function(){return i(this)}:"".trimStart;r({target:"String",proto:!0,name:"trimStart",forced:o},{trimStart:a,trimLeft:a})},88846:function(e,t,n){"use strict";var r=n(95745),i=n(63226).trim;r({target:"String",proto:!0,forced:n(61963)("trim")},{trim:function(){return i(this)}})},67133:function(e,t,n){n(26008)("asyncIterator")},38917:function(e,t,n){"use strict";var r=n(95745),i=n(43404),o=n(94766),a=n(97765),s=n(30746),u=n(80125),l=n(73982),c=n(84990),f=n(25047).f,h=n(98591),d=o.Symbol,p=d&&d.prototype;if(i&&u(d)&&(!("description"in p)||void 0!==d().description)){var v={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:c(arguments[0]),t=l(p,this)?new d(e):void 0===e?d():d(e);return""===e&&(v[t]=!0),t};h(m,d),m.prototype=p,p.constructor=m;var g="Symbol(test)"==String(d("test")),y=a(p.toString),b=a(p.valueOf),x=/^Symbol\((.*)\)[^)]+$/,_=a("".replace),w=a("".slice);f(p,"description",{configurable:!0,get:function(){var e=b(this),t=y(e);if(s(v,e))return"";var n=g?w(t,7,-1):_(t,x,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:m})}},28980:function(e,t,n){n(26008)("hasInstance")},17157:function(e,t,n){n(26008)("isConcatSpreadable")},66851:function(e,t,n){n(26008)("iterator")},35655:function(e,t,n){"use strict";var r=n(95745),i=n(94766),o=n(60783),a=n(11465),s=n(2012),u=n(97765),l=n(2744),c=n(43404),f=n(41354),h=n(84747),d=n(30746),p=n(20397),v=n(80125),m=n(36372),g=n(73982),y=n(45013),b=n(51971),x=n(64311),_=n(67382),w=n(83281),S=n(84990),E=n(61410),k=n(93522),O=n(45888),A=n(47233),C=n(19307),M=n(83657),T=n(8113),P=n(25047),R=n(7819),I=n(80936),L=n(66017),N=n(87691),j=n(97998),D=n(19797),B=n(46851),z=n(97701),F=n(51704),V=n(30432),U=n(26008),Z=n(59859),H=n(18417),G=n(7397).forEach,W=D("hidden"),q="Symbol",K=F("toPrimitive"),Y=H.set,X=H.getterFor(q),$=Object.prototype,J=i.Symbol,Q=J&&J.prototype,ee=i.TypeError,te=i.QObject,ne=o("JSON","stringify"),re=T.f,ie=P.f,oe=C.f,ae=I.f,se=u([].push),ue=j("symbols"),le=j("op-symbols"),ce=j("string-to-symbol-registry"),fe=j("symbol-to-string-registry"),he=j("wks"),de=!te||!te.prototype||!te.prototype.findChild,pe=c&&h((function(){return 7!=k(ie({},"a",{get:function(){return ie(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=re($,t);r&&delete $[t],ie(e,t,n),r&&e!==$&&ie($,t,r)}:ie,ve=function(e,t){var n=ue[e]=k(Q);return Y(n,{type:q,tag:e,description:t}),c||(n.description=t),n},me=function(e,t,n){e===$&&me(le,t,n),b(e);var r=w(t);return b(n),d(ue,r)?(n.enumerable?(d(e,W)&&e[W][r]&&(e[W][r]=!1),n=k(n,{enumerable:E(0,!1)})):(d(e,W)||ie(e,W,E(1,{})),e[W][r]=!0),pe(e,r,n)):ie(e,r,n)},ge=function(e,t){b(e);var n=_(t),r=O(n).concat(_e(n));return G(r,(function(t){c&&!s(ye,n,t)||me(e,t,n[t])})),e},ye=function(e){var t=w(e),n=s(ae,this,t);return!(this===$&&d(ue,t)&&!d(le,t))&&(!(n||!d(this,t)||!d(ue,t)||d(this,W)&&this[W][t])||n)},be=function(e,t){var n=_(e),r=w(t);if(n!==$||!d(ue,r)||d(le,r)){var i=re(n,r);return!i||!d(ue,r)||d(n,W)&&n[W][r]||(i.enumerable=!0),i}},xe=function(e){var t=oe(_(e)),n=[];return G(t,(function(e){d(ue,e)||d(B,e)||se(n,e)})),n},_e=function(e){var t=e===$,n=oe(t?le:_(e)),r=[];return G(n,(function(e){!d(ue,e)||t&&!d($,e)||se(r,ue[e])})),r};(f||(J=function(){if(g(Q,this))throw ee("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?S(arguments[0]):void 0,t=z(e),n=function e(n){this===$&&s(e,le,n),d(this,W)&&d(this[W],t)&&(this[W][t]=!1),pe(this,t,E(1,n))};return c&&de&&pe($,t,{configurable:!0,set:n}),ve(t,e)},N(Q=J.prototype,"toString",(function(){return X(this).tag})),N(J,"withoutSetter",(function(e){return ve(z(e),e)})),I.f=ye,P.f=me,R.f=ge,T.f=be,A.f=C.f=xe,M.f=_e,V.f=function(e){return ve(F(e),e)},c&&(ie(Q,"description",{configurable:!0,get:function(){return X(this).description}}),l||N($,"propertyIsEnumerable",ye,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:J}),G(O(he),(function(e){U(e)})),r({target:q,stat:!0,forced:!f},{for:function(e){var t=S(e);if(d(ce,t))return ce[t];var n=J(t);return ce[t]=n,fe[n]=t,n},keyFor:function(e){if(!y(e))throw ee(e+" is not a symbol");if(d(fe,e))return fe[e]},useSetter:function(){de=!0},useSimple:function(){de=!1}}),r({target:"Object",stat:!0,forced:!f,sham:!c},{create:function(e,t){return void 0===t?k(e):ge(k(e),t)},defineProperty:me,defineProperties:ge,getOwnPropertyDescriptor:be}),r({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:xe,getOwnPropertySymbols:_e}),r({target:"Object",stat:!0,forced:h((function(){M.f(1)}))},{getOwnPropertySymbols:function(e){return M.f(x(e))}}),ne)&&r({target:"JSON",stat:!0,forced:!f||h((function(){var e=J();return"[null]"!=ne([e])||"{}"!=ne({a:e})||"{}"!=ne(Object(e))}))},{stringify:function(e,t,n){var r=L(arguments),i=t;if((m(t)||void 0!==e)&&!y(e))return p(t)||(t=function(e,t){if(v(i)&&(t=s(i,this,e,t)),!y(t))return t}),r[1]=t,a(ne,null,r)}});if(!Q[K]){var we=Q.valueOf;N(Q,K,(function(e){return s(we,this)}))}Z(J,q),B[W]=!0},35161:function(e,t,n){n(26008)("match")},77171:function(e,t,n){n(26008)("replace")},11621:function(e,t,n){n(26008)("search")},77275:function(e,t,n){n(26008)("species")},81006:function(e,t,n){n(26008)("split")},53954:function(e,t,n){n(26008)("toPrimitive")},31877:function(e,t,n){n(26008)("toStringTag")},70752:function(e,t,n){n(26008)("unscopables")},41861:function(e,t,n){"use strict";var r=n(97765),i=n(6437),o=r(n(58945)),a=i.aTypedArray;(0,i.exportTypedArrayMethod)("copyWithin",(function(e,t){return o(a(this),e,t,arguments.length>2?arguments[2]:void 0)}))},65598:function(e,t,n){"use strict";var r=n(6437),i=n(7397).every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},54841:function(e,t,n){"use strict";var r=n(6437),i=n(2012),o=n(4551),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){var t=arguments.length;return i(o,a(this),e,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}))},40858:function(e,t,n){"use strict";var r=n(6437),i=n(7397).filter,o=n(22119),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(e){var t=i(a(this),e,arguments.length>1?arguments[1]:void 0);return o(this,t)}))},23654:function(e,t,n){"use strict";var r=n(6437),i=n(7397).findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},76803:function(e,t,n){"use strict";var r=n(6437),i=n(7397).find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},99262:function(e,t,n){n(28103)("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},76598:function(e,t,n){n(28103)("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},85831:function(e,t,n){"use strict";var r=n(6437),i=n(7397).forEach,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},69094:function(e,t,n){"use strict";var r=n(4073);(0,n(6437).exportTypedArrayStaticMethod)("from",n(507),r)},32991:function(e,t,n){"use strict";var r=n(6437),i=n(68445).includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},4657:function(e,t,n){"use strict";var r=n(6437),i=n(68445).indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},49350:function(e,t,n){n(28103)("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},248:function(e,t,n){n(28103)("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},6725:function(e,t,n){n(28103)("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},41813:function(e,t,n){"use strict";var r=n(94766),i=n(84747),o=n(97765),a=n(6437),s=n(7744),u=n(51704)("iterator"),l=r.Uint8Array,c=o(s.values),f=o(s.keys),h=o(s.entries),d=a.aTypedArray,p=a.exportTypedArrayMethod,v=l&&l.prototype,m=!i((function(){v[u].call([1])})),g=!!v&&v.values&&v[u]===v.values&&"values"===v.values.name,y=function(){return c(d(this))};p("entries",(function(){return h(d(this))}),m),p("keys",(function(){return f(d(this))}),m),p("values",y,m||!g,{name:"values"}),p(u,y,m||!g,{name:"values"})},13154:function(e,t,n){"use strict";var r=n(6437),i=n(97765),o=r.aTypedArray,a=r.exportTypedArrayMethod,s=i([].join);a("join",(function(e){return s(o(this),e)}))},4773:function(e,t,n){"use strict";var r=n(6437),i=n(11465),o=n(84025),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return i(o,a(this),t>1?[e,arguments[1]]:[e])}))},8904:function(e,t,n){"use strict";var r=n(6437),i=n(7397).map,o=n(80675),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("map",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(o(e))(t)}))}))},25565:function(e,t,n){"use strict";var r=n(6437),i=n(4073),o=r.aTypedArrayConstructor;(0,r.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,n=new(o(this))(t);t>e;)n[e]=arguments[e++];return n}),i)},94424:function(e,t,n){"use strict";var r=n(6437),i=n(15467).right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return i(o(this),e,t,t>1?arguments[1]:void 0)}))},88474:function(e,t,n){"use strict";var r=n(6437),i=n(15467).left,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return i(o(this),e,t,t>1?arguments[1]:void 0)}))},43901:function(e,t,n){"use strict";var r=n(6437),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=Math.floor;o("reverse",(function(){for(var e,t=this,n=i(t).length,r=a(n/2),o=0;o<r;)e=t[o],t[o++]=t[--n],t[n]=e;return t}))},47923:function(e,t,n){"use strict";var r=n(94766),i=n(2012),o=n(6437),a=n(64770),s=n(16501),u=n(64311),l=n(84747),c=r.RangeError,f=r.Int8Array,h=f&&f.prototype,d=h&&h.set,p=o.aTypedArray,v=o.exportTypedArrayMethod,m=!l((function(){var e=new Uint8ClampedArray(2);return i(d,e,{length:1,0:3},1),3!==e[1]})),g=m&&o.NATIVE_ARRAY_BUFFER_VIEWS&&l((function(){var e=new f(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));v("set",(function(e){p(this);var t=s(arguments.length>1?arguments[1]:void 0,1),n=u(e);if(m)return i(d,this,n,t);var r=this.length,o=a(n),l=0;if(o+t>r)throw c("Wrong length");for(;l<o;)this[t+l]=n[l++]}),!m||g)},47523:function(e,t,n){"use strict";var r=n(6437),i=n(80675),o=n(84747),a=n(66017),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("slice",(function(e,t){for(var n=a(s(this),e,t),r=i(this),o=0,u=n.length,l=new r(u);u>o;)l[o]=n[o++];return l}),o((function(){new Int8Array(1).slice()})))},93325:function(e,t,n){"use strict";var r=n(6437),i=n(7397).some,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},17334:function(e,t,n){"use strict";var r=n(94766),i=n(97765),o=n(84747),a=n(13792),s=n(75078),u=n(6437),l=n(30820),c=n(59049),f=n(41110),h=n(90242),d=r.Array,p=u.aTypedArray,v=u.exportTypedArrayMethod,m=r.Uint16Array,g=m&&i(m.prototype.sort),y=!!g&&!(o((function(){g(new m(2),null)}))&&o((function(){g(new m(2),{})}))),b=!!g&&!o((function(){if(f)return f<74;if(l)return l<67;if(c)return!0;if(h)return h<602;var e,t,n=new m(516),r=d(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(g(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));v("sort",(function(e){return void 0!==e&&a(e),b?g(this,e):s(p(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!==n?-1:t!==t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!b||y)},15649:function(e,t,n){"use strict";var r=n(6437),i=n(87452),o=n(64620),a=n(80675),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=s(this),r=n.length,u=o(e,r);return new(a(n))(n.buffer,n.byteOffset+u*n.BYTES_PER_ELEMENT,i((void 0===t?r:o(t,r))-u))}))},45599:function(e,t,n){"use strict";var r=n(94766),i=n(11465),o=n(6437),a=n(84747),s=n(66017),u=r.Int8Array,l=o.aTypedArray,c=o.exportTypedArrayMethod,f=[].toLocaleString,h=!!u&&a((function(){f.call(new u(1))}));c("toLocaleString",(function(){return i(f,h?s(l(this)):l(this),s(arguments))}),a((function(){return[1,2].toLocaleString()!=new u([1,2]).toLocaleString()}))||!a((function(){u.prototype.toLocaleString.call([1,2])})))},51156:function(e,t,n){"use strict";var r=n(6437).exportTypedArrayMethod,i=n(84747),o=n(94766),a=n(97765),s=o.Uint8Array,u=s&&s.prototype||{},l=[].toString,c=a([].join);i((function(){l.call({})}))&&(l=function(){return c(this)});var f=u.toString!=l;r("toString",l,f)},74126:function(e,t,n){n(28103)("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},33144:function(e,t,n){n(28103)("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},86058:function(e,t,n){n(28103)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},69868:function(e,t,n){n(28103)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},8164:function(e,t,n){"use strict";var r,i=n(94766),o=n(97765),a=n(35454),s=n(95202),u=n(6886),l=n(42380),c=n(36372),f=n(50215),h=n(18417).enforce,d=n(55941),p=!i.ActiveXObject&&"ActiveXObject"in i,v=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},m=u("WeakMap",v,l);if(d&&p){r=l.getConstructor(v,"WeakMap",!0),s.enable();var g=m.prototype,y=o(g.delete),b=o(g.has),x=o(g.get),_=o(g.set);a(g,{delete:function(e){if(c(e)&&!f(e)){var t=h(this);return t.frozen||(t.frozen=new r),y(this,e)||t.frozen.delete(e)}return y(this,e)},has:function(e){if(c(e)&&!f(e)){var t=h(this);return t.frozen||(t.frozen=new r),b(this,e)||t.frozen.has(e)}return b(this,e)},get:function(e){if(c(e)&&!f(e)){var t=h(this);return t.frozen||(t.frozen=new r),b(this,e)?x(this,e):t.frozen.get(e)}return x(this,e)},set:function(e,t){if(c(e)&&!f(e)){var n=h(this);n.frozen||(n.frozen=new r),b(this,e)?_(this,e,t):n.frozen.set(e,t)}else _(this,e,t);return this}})}},71574:function(e,t,n){"use strict";n(6886)("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(42380))},94022:function(e,t,n){n(26008)("dispose")},66515:function(e,t,n){n(26008)("observable")},10350:function(e,t,n){n(26008)("patternMatch")},25999:function(e,t,n){var r=n(94766),i=n(61497),o=n(88705),a=n(85792),s=n(1068),u=function(e){if(e&&e.forEach!==a)try{s(e,"forEach",a)}catch(t){e.forEach=a}};for(var l in i)i[l]&&u(r[l]&&r[l].prototype);u(o)},85633:function(e,t,n){var r=n(94766),i=n(61497),o=n(88705),a=n(7744),s=n(1068),u=n(51704),l=u("iterator"),c=u("toStringTag"),f=a.values,h=function(e,t){if(e){if(e[l]!==f)try{s(e,l,f)}catch(r){e[l]=f}if(e[c]||s(e,c,t),i[t])for(var n in a)if(e[n]!==a[n])try{s(e,n,a[n])}catch(r){e[n]=a[n]}}};for(var d in i)h(r[d]&&r[d].prototype,d);h(o,"DOMTokenList")},48638:function(e,t,n){var r=n(95745),i=n(94766),o=n(3097);r({global:!0,bind:!0,enumerable:!0,forced:!i.setImmediate||!i.clearImmediate},{setImmediate:o.set,clearImmediate:o.clear})},68334:function(e,t,n){var r=n(95745),i=n(94766),o=n(92574),a=n(13792),s=n(69526),u=n(85002),l=i.process;r({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){s(arguments.length,1),a(e);var t=u&&l.domain;o(t?t.bind(e):e)}})},13465:function(e,t,n){"use strict";n(7744);var r=n(95745),i=n(94766),o=n(60783),a=n(2012),s=n(97765),u=n(66893),l=n(87691),c=n(35454),f=n(59859),h=n(32021),d=n(18417),p=n(6432),v=n(80125),m=n(30746),g=n(46630),y=n(79694),b=n(51971),x=n(36372),_=n(84990),w=n(93522),S=n(61410),E=n(78556),k=n(90525),O=n(69526),A=n(51704),C=n(75078),M=A("iterator"),T="URLSearchParams",P="URLSearchParamsIterator",R=d.set,I=d.getterFor(T),L=d.getterFor(P),N=o("fetch"),j=o("Request"),D=o("Headers"),B=j&&j.prototype,z=D&&D.prototype,F=i.RegExp,V=i.TypeError,U=i.decodeURIComponent,Z=i.encodeURIComponent,H=s("".charAt),G=s([].join),W=s([].push),q=s("".replace),K=s([].shift),Y=s([].splice),X=s("".split),$=s("".slice),J=/\+/g,Q=Array(4),ee=function(e){return Q[e-1]||(Q[e-1]=F("((?:%[\\da-f]{2}){"+e+"})","gi"))},te=function(e){try{return U(e)}catch(t){return e}},ne=function(e){var t=q(e,J," "),n=4;try{return U(t)}catch(r){for(;n;)t=q(t,ee(n--),te);return t}},re=/[!'()~]|%20/g,ie={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},oe=function(e){return ie[e]},ae=function(e){return q(Z(e),re,oe)},se=h((function(e,t){R(this,{type:P,iterator:E(I(e).entries),kind:t})}),"Iterator",(function(){var e=L(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),ue=function(e){this.entries=[],this.url=null,void 0!==e&&(x(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===H(e,0)?$(e,1):e:_(e)))};ue.prototype={type:T,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,o,s,u,l=k(e);if(l)for(n=(t=E(e,l)).next;!(r=a(n,t)).done;){if(o=(i=E(b(r.value))).next,(s=a(o,i)).done||(u=a(o,i)).done||!a(o,i).done)throw V("Expected sequence with length 2");W(this.entries,{key:_(s.value),value:_(u.value)})}else for(var c in e)m(e,c)&&W(this.entries,{key:c,value:_(e[c])})},parseQuery:function(e){if(e)for(var t,n,r=X(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=X(t,"="),W(this.entries,{key:ne(K(n)),value:ne(G(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],W(n,ae(e.key)+"="+ae(e.value));return G(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var le=function(){p(this,ce);var e=arguments.length>0?arguments[0]:void 0;R(this,new ue(e))},ce=le.prototype;if(c(ce,{append:function(e,t){O(arguments.length,2);var n=I(this);W(n.entries,{key:_(e),value:_(t)}),n.updateURL()},delete:function(e){O(arguments.length,1);for(var t=I(this),n=t.entries,r=_(e),i=0;i<n.length;)n[i].key===r?Y(n,i,1):i++;t.updateURL()},get:function(e){O(arguments.length,1);for(var t=I(this).entries,n=_(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){O(arguments.length,1);for(var t=I(this).entries,n=_(e),r=[],i=0;i<t.length;i++)t[i].key===n&&W(r,t[i].value);return r},has:function(e){O(arguments.length,1);for(var t=I(this).entries,n=_(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){O(arguments.length,1);for(var n,r=I(this),i=r.entries,o=!1,a=_(e),s=_(t),u=0;u<i.length;u++)(n=i[u]).key===a&&(o?Y(i,u--,1):(o=!0,n.value=s));o||W(i,{key:a,value:s}),r.updateURL()},sort:function(){var e=I(this);C(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=I(this).entries,r=g(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new se(this,"keys")},values:function(){return new se(this,"values")},entries:function(){return new se(this,"entries")}},{enumerable:!0}),l(ce,M,ce.entries,{name:"entries"}),l(ce,"toString",(function(){return I(this).serialize()}),{enumerable:!0}),f(le,T),r({global:!0,forced:!u},{URLSearchParams:le}),!u&&v(D)){var fe=s(z.has),he=s(z.set),de=function(e){if(x(e)){var t,n=e.body;if(y(n)===T)return t=e.headers?new D(e.headers):new D,fe(t,"content-type")||he(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),w(e,{body:S(0,_(n)),headers:S(0,t)})}return e};if(v(N)&&r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return N(e,arguments.length>1?de(arguments[1]):{})}}),v(j)){var pe=function(e){return p(this,B),new j(e,arguments.length>1?de(arguments[1]):{})};B.constructor=pe,pe.prototype=B,r({global:!0,forced:!0},{Request:pe})}}e.exports={URLSearchParams:le,getState:I}},93123:function(e,t,n){"use strict";n(13244);var r,i=n(95745),o=n(43404),a=n(66893),s=n(94766),u=n(46630),l=n(97765),c=n(7819).f,f=n(87691),h=n(6432),d=n(30746),p=n(7517),v=n(34183),m=n(64277),g=n(7851).codeAt,y=n(40784),b=n(84990),x=n(59859),_=n(69526),w=n(13465),S=n(18417),E=S.set,k=S.getterFor("URL"),O=w.URLSearchParams,A=w.getState,C=s.URL,M=s.TypeError,T=s.parseInt,P=Math.floor,R=Math.pow,I=l("".charAt),L=l(/./.exec),N=l([].join),j=l(1..toString),D=l([].pop),B=l([].push),z=l("".replace),F=l([].shift),V=l("".split),U=l("".slice),Z=l("".toLowerCase),H=l([].unshift),G="Invalid scheme",W="Invalid host",q="Invalid port",K=/[a-z]/i,Y=/[\d+-.a-z]/i,X=/\d/,$=/^0x/i,J=/^[0-7]+$/,Q=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ne=/[\0\t\n\r #/:<>?@[\\\]^|]/,re=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,ie=/[\t\n\r]/g,oe=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)H(t,e%256),e=P(e/256);return N(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=j(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},ae={},se=p({},ae,{" ":1,'"':1,"<":1,">":1,"`":1}),ue=p({},se,{"#":1,"?":1,"{":1,"}":1}),le=p({},ue,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ce=function(e,t){var n=g(e,0);return n>32&&n<127&&!d(t,e)?e:encodeURIComponent(e)},fe={ftp:21,file:null,http:80,https:443,ws:80,wss:443},he=function(e,t){var n;return 2==e.length&&L(K,I(e,0))&&(":"==(n=I(e,1))||!t&&"|"==n)},de=function(e){var t;return e.length>1&&he(U(e,0,2))&&(2==e.length||"/"===(t=I(e,2))||"\\"===t||"?"===t||"#"===t)},pe=function(e){return"."===e||"%2e"===Z(e)},ve={},me={},ge={},ye={},be={},xe={},_e={},we={},Se={},Ee={},ke={},Oe={},Ae={},Ce={},Me={},Te={},Pe={},Re={},Ie={},Le={},Ne={},je=function e(t,n,r){var i,o,a,s=b(t);if(n){if(o=this.parse(s))throw M(o);this.searchParams=null}else{if(void 0!==r&&(i=new e(r,!0)),o=this.parse(s,null,i))throw M(o);(a=A(new O)).bindURL(this),this.searchParams=a}};je.prototype={type:"URL",parse:function(e,t,n){var i,o,a,s,u,l=this,c=t||ve,f=0,h="",p=!1,g=!1,y=!1;for(e=b(e),t||(l.scheme="",l.username="",l.password="",l.host=null,l.port=null,l.path=[],l.query=null,l.fragment=null,l.cannotBeABaseURL=!1,e=z(e,re,"")),e=z(e,ie,""),i=v(e);f<=i.length;){switch(o=i[f],c){case ve:if(!o||!L(K,o)){if(t)return G;c=ge;continue}h+=Z(o),c=me;break;case me:if(o&&(L(Y,o)||"+"==o||"-"==o||"."==o))h+=Z(o);else{if(":"!=o){if(t)return G;h="",c=ge,f=0;continue}if(t&&(l.isSpecial()!=d(fe,h)||"file"==h&&(l.includesCredentials()||null!==l.port)||"file"==l.scheme&&!l.host))return;if(l.scheme=h,t)return void(l.isSpecial()&&fe[l.scheme]==l.port&&(l.port=null));h="","file"==l.scheme?c=Ce:l.isSpecial()&&n&&n.scheme==l.scheme?c=ye:l.isSpecial()?c=we:"/"==i[f+1]?(c=be,f++):(l.cannotBeABaseURL=!0,B(l.path,""),c=Ie)}break;case ge:if(!n||n.cannotBeABaseURL&&"#"!=o)return G;if(n.cannotBeABaseURL&&"#"==o){l.scheme=n.scheme,l.path=m(n.path),l.query=n.query,l.fragment="",l.cannotBeABaseURL=!0,c=Ne;break}c="file"==n.scheme?Ce:xe;continue;case ye:if("/"!=o||"/"!=i[f+1]){c=xe;continue}c=Se,f++;break;case be:if("/"==o){c=Ee;break}c=Re;continue;case xe:if(l.scheme=n.scheme,o==r)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=m(n.path),l.query=n.query;else if("/"==o||"\\"==o&&l.isSpecial())c=_e;else if("?"==o)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=m(n.path),l.query="",c=Le;else{if("#"!=o){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=m(n.path),l.path.length--,c=Re;continue}l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=m(n.path),l.query=n.query,l.fragment="",c=Ne}break;case _e:if(!l.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,c=Re;continue}c=Ee}else c=Se;break;case we:if(c=Se,"/"!=o||"/"!=I(h,f+1))continue;f++;break;case Se:if("/"!=o&&"\\"!=o){c=Ee;continue}break;case Ee:if("@"==o){p&&(h="%40"+h),p=!0,a=v(h);for(var x=0;x<a.length;x++){var _=a[x];if(":"!=_||y){var w=ce(_,le);y?l.password+=w:l.username+=w}else y=!0}h=""}else if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&l.isSpecial()){if(p&&""==h)return"Invalid authority";f-=v(h).length+1,h="",c=ke}else h+=o;break;case ke:case Oe:if(t&&"file"==l.scheme){c=Te;continue}if(":"!=o||g){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&l.isSpecial()){if(l.isSpecial()&&""==h)return W;if(t&&""==h&&(l.includesCredentials()||null!==l.port))return;if(s=l.parseHost(h))return s;if(h="",c=Pe,t)return;continue}"["==o?g=!0:"]"==o&&(g=!1),h+=o}else{if(""==h)return W;if(s=l.parseHost(h))return s;if(h="",c=Ae,t==Oe)return}break;case Ae:if(!L(X,o)){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&l.isSpecial()||t){if(""!=h){var S=T(h,10);if(S>65535)return q;l.port=l.isSpecial()&&S===fe[l.scheme]?null:S,h=""}if(t)return;c=Pe;continue}return q}h+=o;break;case Ce:if(l.scheme="file","/"==o||"\\"==o)c=Me;else{if(!n||"file"!=n.scheme){c=Re;continue}if(o==r)l.host=n.host,l.path=m(n.path),l.query=n.query;else if("?"==o)l.host=n.host,l.path=m(n.path),l.query="",c=Le;else{if("#"!=o){de(N(m(i,f),""))||(l.host=n.host,l.path=m(n.path),l.shortenPath()),c=Re;continue}l.host=n.host,l.path=m(n.path),l.query=n.query,l.fragment="",c=Ne}}break;case Me:if("/"==o||"\\"==o){c=Te;break}n&&"file"==n.scheme&&!de(N(m(i,f),""))&&(he(n.path[0],!0)?B(l.path,n.path[0]):l.host=n.host),c=Re;continue;case Te:if(o==r||"/"==o||"\\"==o||"?"==o||"#"==o){if(!t&&he(h))c=Re;else if(""==h){if(l.host="",t)return;c=Pe}else{if(s=l.parseHost(h))return s;if("localhost"==l.host&&(l.host=""),t)return;h="",c=Pe}continue}h+=o;break;case Pe:if(l.isSpecial()){if(c=Re,"/"!=o&&"\\"!=o)continue}else if(t||"?"!=o)if(t||"#"!=o){if(o!=r&&(c=Re,"/"!=o))continue}else l.fragment="",c=Ne;else l.query="",c=Le;break;case Re:if(o==r||"/"==o||"\\"==o&&l.isSpecial()||!t&&("?"==o||"#"==o)){if(".."===(u=Z(u=h))||"%2e."===u||".%2e"===u||"%2e%2e"===u?(l.shortenPath(),"/"==o||"\\"==o&&l.isSpecial()||B(l.path,"")):pe(h)?"/"==o||"\\"==o&&l.isSpecial()||B(l.path,""):("file"==l.scheme&&!l.path.length&&he(h)&&(l.host&&(l.host=""),h=I(h,0)+":"),B(l.path,h)),h="","file"==l.scheme&&(o==r||"?"==o||"#"==o))for(;l.path.length>1&&""===l.path[0];)F(l.path);"?"==o?(l.query="",c=Le):"#"==o&&(l.fragment="",c=Ne)}else h+=ce(o,ue);break;case Ie:"?"==o?(l.query="",c=Le):"#"==o?(l.fragment="",c=Ne):o!=r&&(l.path[0]+=ce(o,ae));break;case Le:t||"#"!=o?o!=r&&("'"==o&&l.isSpecial()?l.query+="%27":l.query+="#"==o?"%23":ce(o,ae)):(l.fragment="",c=Ne);break;case Ne:o!=r&&(l.fragment+=ce(o,se))}f++}},parseHost:function(e){var t,n,r;if("["==I(e,0)){if("]"!=I(e,e.length-1))return W;if(t=function(e){var t,n,r,i,o,a,s,u=[0,0,0,0,0,0,0,0],l=0,c=null,f=0,h=function(){return I(e,f)};if(":"==h()){if(":"!=I(e,1))return;f+=2,c=++l}for(;h();){if(8==l)return;if(":"!=h()){for(t=n=0;n<4&&L(ee,h());)t=16*t+T(h(),16),f++,n++;if("."==h()){if(0==n)return;if(f-=n,l>6)return;for(r=0;h();){if(i=null,r>0){if(!("."==h()&&r<4))return;f++}if(!L(X,h()))return;for(;L(X,h());){if(o=T(h(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;f++}u[l]=256*u[l]+i,2!=++r&&4!=r||l++}if(4!=r)return;break}if(":"==h()){if(f++,!h())return}else if(h())return;u[l++]=t}else{if(null!==c)return;f++,c=++l}}if(null!==c)for(a=l-c,l=7;0!=l&&a>0;)s=u[l],u[l--]=u[c+a-1],u[c+--a]=s;else if(8!=l)return;return u}(U(e,1,-1)),!t)return W;this.host=t}else if(this.isSpecial()){if(e=y(e),L(te,e))return W;if(t=function(e){var t,n,r,i,o,a,s,u=V(e,".");if(u.length&&""==u[u.length-1]&&u.length--,(t=u.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=u[r]))return e;if(o=10,i.length>1&&"0"==I(i,0)&&(o=L($,i)?16:8,i=U(i,8==o?1:2)),""===i)a=0;else{if(!L(10==o?Q:8==o?J:ee,i))return e;a=T(i,o)}B(n,a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=R(256,5-t))return null}else if(a>255)return null;for(s=D(n),r=0;r<n.length;r++)s+=n[r]*R(256,3-r);return s}(e),null===t)return W;this.host=t}else{if(L(ne,e))return W;for(t="",n=v(e),r=0;r<n.length;r++)t+=ce(n[r],ae);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return d(fe,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&he(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,a=e.path,s=e.query,u=e.fragment,l=t+":";return null!==i?(l+="//",e.includesCredentials()&&(l+=n+(r?":"+r:"")+"@"),l+=oe(i),null!==o&&(l+=":"+o)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?a[0]:a.length?"/"+N(a,"/"):"",null!==s&&(l+="?"+s),null!==u&&(l+="#"+u),l},setHref:function(e){var t=this.parse(e);if(t)throw M(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new De(e.path[0]).origin}catch(n){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+oe(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(b(e)+":",ve)},getUsername:function(){return this.username},setUsername:function(e){var t=v(b(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=ce(t[n],le)}},getPassword:function(){return this.password},setPassword:function(e){var t=v(b(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=ce(t[n],le)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?oe(e):oe(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,ke)},getHostname:function(){var e=this.host;return null===e?"":oe(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Oe)},getPort:function(){var e=this.port;return null===e?"":b(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=b(e))?this.port=null:this.parse(e,Ae))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+N(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Pe))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=b(e))?this.query=null:("?"==I(e,0)&&(e=U(e,1)),this.query="",this.parse(e,Le)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=b(e))?("#"==I(e,0)&&(e=U(e,1)),this.fragment="",this.parse(e,Ne)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var De=function(e){var t=h(this,Be),n=_(arguments.length,1)>1?arguments[1]:void 0,r=E(t,new je(e,!1,n));o||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},Be=De.prototype,ze=function(e,t){return{get:function(){return k(this)[e]()},set:t&&function(e){return k(this)[t](e)},configurable:!0,enumerable:!0}};if(o&&c(Be,{href:ze("serialize","setHref"),origin:ze("getOrigin"),protocol:ze("getProtocol","setProtocol"),username:ze("getUsername","setUsername"),password:ze("getPassword","setPassword"),host:ze("getHost","setHost"),hostname:ze("getHostname","setHostname"),port:ze("getPort","setPort"),pathname:ze("getPathname","setPathname"),search:ze("getSearch","setSearch"),searchParams:ze("getSearchParams"),hash:ze("getHash","setHash")}),f(Be,"toJSON",(function(){return k(this).serialize()}),{enumerable:!0}),f(Be,"toString",(function(){return k(this).serialize()}),{enumerable:!0}),C){var Fe=C.createObjectURL,Ve=C.revokeObjectURL;Fe&&f(De,"createObjectURL",u(Fe,C)),Ve&&f(De,"revokeObjectURL",u(Ve,C))}x(De,"URL"),i({global:!0,forced:!a,sham:!o},{URL:De})},6659:function(e,t,n){"use strict";var r=n(95745),i=n(2012);r({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return i(URL.prototype.toString,this)}})},91002:function(e,t,n){"use strict";var r=n(10480),i="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),o=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,u=s&&function(){var e={};try{for(var t in s(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(n){return!1}}(),l=function(e,t,n,r){var i;(!(t in e)||"function"===typeof(i=r)&&"[object Function]"===o.call(i)&&r())&&(u?s(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},c=function(e,t){var n=arguments.length>2?arguments[2]:{},o=r(t);i&&(o=a.call(o,Object.getOwnPropertySymbols(t)));for(var s=0;s<o.length;s+=1)l(e,o[s],t[o[s]],n[o[s]])};c.supportsDescriptors=!!u,e.exports=c},22557:function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(60832),o=n(76240),a=u(n(73511)),s=u(n(55553));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c="CUSTOM_",f=function(e){return function(t){var n=t.getCurrentContent(),r=t.getSelection(),i=n.getBlockMap(),a=r.getStartKey(),s=r.getStartOffset(),u=r.getEndKey(),l=r.getEndOffset(),c=i.skipUntil((function(e,t){return t===a})).takeUntil((function(e,t){return t===u})).concat((0,o.Map)([[u,i.get(u)]])).map((function(t,n){var r=void 0,i=void 0;a===u?(r=s,i=l):(r=n===a?s:0,i=n===u?l:t.getLength());for(var o=t.getCharacterList(),c=void 0;r<i;){c=o.get(r);var f=e(c);o=o.set(r,f),r++}return t.set("characterList",o)}));return n.merge({blockMap:i.merge(c),selectionBefore:r,selectionAfter:r})}},h=function(e,t){return f(d(e))(t)},d=function(e){return function(t){var n=t.get("style").filter((function(t){return!t.startsWith(e)}));return t.set("style",n)}},p=function(e){return function(t,n){var r=e+n,o=i.Modifier.applyInlineStyle(h(e,t),t.getSelection(),r);return t.getSelection().isCollapsed()?g(e,r,t):i.EditorState.push(t,o,"change-inline-style")}},v=function(e){return function(t){return i.EditorState.push(t,h(e,t),"change-inline-style")}},m=function(e,t){return t.filter((function(t){return!t.startsWith(e)}))},g=function(e,t,n){var r=n.getCurrentInlineStyle(),o=m(e,r);return i.EditorState.setInlineStyleOverride(n,o.add(t))},y=function(e){return function(t,n){var r=e+n,o=t.getCurrentInlineStyle();if(t.getSelection().isCollapsed())return function(e,t,n){var r=n.getCurrentInlineStyle(),o=m(e,r),a=r.has(t)?o.remove(t):o.add(t);return i.EditorState.setInlineStyleOverride(n,a)}(e,r,t);if(!o.has(r))return p(e)(t,n);var a=i.EditorState.push(t,h(e,t),"change-inline-style");return i.EditorState.forceSelection(a,t.getSelection())}},b=function(e,t){return function(n){if(!n.size)return{};var r=n.filter((function(t){return t.startsWith(e)})).first();if(r){var i=r.replace(e,"");return l({},(0,a.default)(t),i)}return{}}},x=function(e){return function(t){var n=t.getCurrentInlineStyle();if(!n.size)return"";var r=n.filter((function(t){return t.startsWith(e)})).first();return r?r.replace(e,""):r}},_=function(e,t){return t.reduce((function(t,n){var i=(0,a.default)(n),o=""+e+(0,s.default)(n).toUpperCase()+"_",u=r({},t);return u[i]={add:p(o),remove:v(o),toggle:y(o),current:x(o),styleFn:b(o,n)},u}),{})},w=function(e){return function(t){return e.reduce((function(e,n){return r({},e,n(t))}),{})}},S=function(e,t){var n=t.inlineStyleRanges;if(n&&n.length){var r=n.map((function(e){return e.style}));return e.concat(r)}return e},E=function(e,t){return function(n,r){if(i.DefaultDraftInlineStyle[r])return Object.assign({},n,l({},r,{style:i.DefaultDraftInlineStyle[r]}));if(t[r])return Object.assign({},n,l({},r,{style:t[r]}));var o=new RegExp(e+"(.+)_(.+)"),s=r.match(o);if(!s||!s[1]||!s[2])return n;var u=s[1].toLowerCase(),c=s[2],f=l({},r,{style:l({},(0,a.default)(u),c)});return Object.assign({},n,f)}},k=function(e,t){return function(n){var r=(0,i.convertToRaw)(n.getCurrentContent()).blocks.reduce(S,[]);return r.length?r.reduce(E(e,t),{}):{}}},O=function(e){return"string"===typeof e&&e.length?e.match(/.+_$/)?e:e+"_":c};t.ZP=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return console.log("Expecting an array with css properties"),{styles:{}};if(!Array.isArray(e)||!e.length)return console.log("createStyles expects first parameter to be an array with css properties"),{styles:{}};var r=O(t),i=_(r,e),o=Object.keys(i).map((function(e){return i[e].styleFn})),a=w(o),s=k(r,n);return{styles:i,customStyleFn:a,exporter:s}}},78926:function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(47498),a=n(36148),s=n(18638),u=n(33878),l=n(82362),c=n(94705),f=n(8385),h=n(36872),d=n(76240),p=n(2845),v=h("draft_tree_data_support"),m=v?u:s,g=d.List,y=d.Repeat,b={insertAtomicBlock:function(e,t,n){var i=e.getCurrentContent(),s=e.getSelection(),u=l.removeRange(i,s,"backward"),h=u.getSelectionAfter(),d=l.splitBlock(u,h),p=d.getSelectionAfter(),b=l.setBlockType(d,p,"atomic"),x=a.create({entity:t}),_={key:f(),type:"atomic",text:n,characterList:g(y(x,n.length))},w={key:f(),type:"unstyled"};v&&(_=r({},_,{nextSibling:w.key}),w=r({},w,{prevSibling:_.key}));var S=[new m(_),new m(w)],E=o.createFromArray(S),k=l.replaceWithFragment(b,p,E),O=k.merge({selectionBefore:s,selectionAfter:k.getSelectionAfter().set("hasFocus",!0)});return c.push(e,O,"insert-fragment")},moveAtomicBlock:function(e,t,n,r){var i,o=e.getCurrentContent(),a=e.getSelection();if("before"===r||"after"===r){var s=o.getBlockForKey("before"===r?n.getStartKey():n.getEndKey());i=p(o,t,s,r)}else{var u=l.removeRange(o,n,"backward"),f=u.getSelectionAfter(),h=u.getBlockForKey(f.getFocusKey());if(0===f.getStartOffset())i=p(u,t,h,"before");else if(f.getEndOffset()===h.getLength())i=p(u,t,h,"after");else{var d=l.splitBlock(u,f),v=d.getSelectionAfter(),m=d.getBlockForKey(v.getFocusKey());i=p(d,t,m,"before")}}var g=i.merge({selectionBefore:a,selectionAfter:i.getSelectionAfter().set("hasFocus",!0)});return c.push(e,g,"move-block")}};e.exports=b},47498:function(e,t,n){"use strict";var r=n(76240).OrderedMap,i={createFromArray:function(e){return r(e.map((function(e){return[e.getKey(),e]})))}};e.exports=i},34362:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(89528),o=n(61122),a=n(76240),s=a.List,u=a.Repeat,l=a.Record,c=function(){return!0},f=l({start:null,end:null}),h=l({start:null,end:null,decoratorKey:null,leaves:null}),d={generate:function(e,t,n){var r=t.getLength();if(!r)return s.of(new h({start:0,end:0,decoratorKey:null,leaves:s.of(new f({start:0,end:0}))}));var o=[],a=n?n.getDecorations(t,e):s(u(null,r)),l=t.getCharacterList();return i(a,v,c,(function(e,t){o.push(new h({start:e,end:t,decoratorKey:a.get(e),leaves:p(l.slice(e,t).toList(),e)}))})),s(o)},fromJS:function(e){var t=e.leaves,n=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["leaves"]);return new h(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}({},n,{leaves:null!=t?s(Array.isArray(t)?t:o(t)).map((function(e){return f(e)})):null}))}};function p(e,t){var n=[],r=e.map((function(e){return e.getStyle()})).toList();return i(r,v,c,(function(e,r){n.push(new f({start:e+t,end:r+t}))})),s(n)}function v(e,t){return e===t}e.exports=d},36148:function(e,t,n){"use strict";var r=n(76240),i=r.Map,o=r.OrderedSet,a=r.Record,s=o(),u={style:s,entity:null},l=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getStyle=function(){return this.get("style")},a.getEntity=function(){return this.get("entity")},a.hasStyle=function(e){return this.getStyle().includes(e)},r.applyStyle=function(e,t){var n=e.set("style",e.getStyle().add(t));return r.create(n)},r.removeStyle=function(e,t){var n=e.set("style",e.getStyle().remove(t));return r.create(n)},r.applyEntity=function(e,t){var n=e.getEntity()===t?e:e.set("entity",t);return r.create(n)},r.create=function(e){if(!e)return c;var t=i({style:s,entity:null}).merge(e),n=f.get(t);if(n)return n;var o=new r(t);return f=f.set(t,o),o},r.fromJS=function(e){var t=e.style,n=e.entity;return new r({style:Array.isArray(t)?o(t):t,entity:Array.isArray(n)?o(n):n})},r}(a(u)),c=new l,f=i([[i(u),c]]);l.EMPTY=c,e.exports=l},91047:function(e,t,n){"use strict";var r=n(76240).List,i=function(){function e(e){var t,n,r;r=void 0,(n="_decorators")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this._decorators=e.slice()}var t=e.prototype;return t.getDecorations=function(e,t){var n=Array(e.getText().length).fill(null);return this._decorators.forEach((function(r,i){var o=0;(0,r.strategy)(e,(function(e,t){(function(e,t,n){for(var r=t;r<n;r++)if(null!=e[r])return!1;return!0})(n,e,t)&&(!function(e,t,n,r){for(var i=t;i<n;i++)e[i]=r}(n,e,t,i+"."+o),o++)}),t)})),r(n)},t.getComponentForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].component},t.getPropsForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].props},e}();e.exports=i},18638:function(e,t,n){"use strict";var r=n(36148),i=n(89528),o=n(76240),a=o.List,s=o.Map,u=o.OrderedSet,l=o.Record,c=o.Repeat,f=u(),h=l({key:"",type:"unstyled",text:"",characterList:a(),depth:0,data:s()}),d=function(e){var t,n;function o(t){return e.call(this,function(e){if(!e)return e;var t=e.characterList,n=e.text;return n&&!t&&(e.characterList=a(c(r.EMPTY,n.length))),e}(t))||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=o.prototype;return s.getKey=function(){return this.get("key")},s.getType=function(){return this.get("type")},s.getText=function(){return this.get("text")},s.getCharacterList=function(){return this.get("characterList")},s.getLength=function(){return this.getText().length},s.getDepth=function(){return this.get("depth")},s.getData=function(){return this.get("data")},s.getInlineStyleAt=function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():f},s.getEntityAt=function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null},s.findStyleRanges=function(e,t){i(this.getCharacterList(),p,e,t)},s.findEntityRanges=function(e,t){i(this.getCharacterList(),v,e,t)},o}(h);function p(e,t){return e.getStyle()===t.getStyle()}function v(e,t){return e.getEntity()===t.getEntity()}e.exports=d},33878:function(e,t,n){"use strict";var r=n(36148),i=n(89528),o=n(76240),a=o.List,s=o.Map,u=o.OrderedSet,l=o.Record,c=o.Repeat,f=u(),h={parent:null,characterList:a(),data:s(),depth:0,key:"",text:"",type:"unstyled",children:a(),prevSibling:null,nextSibling:null},d=function(e,t){return e.getStyle()===t.getStyle()},p=function(e,t){return e.getEntity()===t.getEntity()},v=function(e){if(!e)return e;var t=e.characterList,n=e.text;return n&&!t&&(e.characterList=a(c(r.EMPTY,n.length))),e},m=function(e){var t,n;function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return e.call(this,v(t))||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.getKey=function(){return this.get("key")},o.getType=function(){return this.get("type")},o.getText=function(){return this.get("text")},o.getCharacterList=function(){return this.get("characterList")},o.getLength=function(){return this.getText().length},o.getDepth=function(){return this.get("depth")},o.getData=function(){return this.get("data")},o.getInlineStyleAt=function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():f},o.getEntityAt=function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null},o.getChildKeys=function(){return this.get("children")},o.getParentKey=function(){return this.get("parent")},o.getPrevSiblingKey=function(){return this.get("prevSibling")},o.getNextSiblingKey=function(){return this.get("nextSibling")},o.findStyleRanges=function(e,t){i(this.getCharacterList(),d,e,t)},o.findEntityRanges=function(e,t){i(this.getCharacterList(),p,e,t)},r}(l(h));e.exports=m},98522:function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(47498),a=n(36148),s=n(18638),u=n(33878),l=n(5693),c=n(25232),f=n(8385),h=n(61122),d=n(36872),p=n(76240),v=n(76182),m=p.List,g=p.Record,y=p.Repeat,b=p.Map,x=p.OrderedMap,_=g({entityMap:null,blockMap:null,selectionBefore:null,selectionAfter:null}),w=d("draft_tree_data_support")?u:s,S=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=i.prototype;return s.getEntityMap=function(){return l},s.getBlockMap=function(){return this.get("blockMap")},s.getSelectionBefore=function(){return this.get("selectionBefore")},s.getSelectionAfter=function(){return this.get("selectionAfter")},s.getBlockForKey=function(e){return this.getBlockMap().get(e)},s.getKeyBefore=function(e){return this.getBlockMap().reverse().keySeq().skipUntil((function(t){return t===e})).skip(1).first()},s.getKeyAfter=function(e){return this.getBlockMap().keySeq().skipUntil((function(t){return t===e})).skip(1).first()},s.getBlockAfter=function(e){return this.getBlockMap().skipUntil((function(t,n){return n===e})).skip(1).first()},s.getBlockBefore=function(e){return this.getBlockMap().reverse().skipUntil((function(t,n){return n===e})).skip(1).first()},s.getBlocksAsArray=function(){return this.getBlockMap().toArray()},s.getFirstBlock=function(){return this.getBlockMap().first()},s.getLastBlock=function(){return this.getBlockMap().last()},s.getPlainText=function(e){return this.getBlockMap().map((function(e){return e?e.getText():""})).join(e||"\n")},s.getLastCreatedEntityKey=function(){return l.__getLastCreatedEntityKey()},s.hasText=function(){var e=this.getBlockMap();return e.size>1||escape(e.first().getText()).replace(/%u200B/g,"").length>0},s.createEntity=function(e,t,n){return l.__create(e,t,n),this},s.mergeEntityData=function(e,t){return l.__mergeData(e,t),this},s.replaceEntityData=function(e,t){return l.__replaceData(e,t),this},s.addEntity=function(e){return l.__add(e),this},s.getEntity=function(e){return l.__get(e)},s.getAllEntities=function(){return l.__getAll()},s.loadWithEntities=function(e){return l.__loadWithEntities(e)},i.createFromBlockArray=function(e,t){var n=Array.isArray(e)?e:e.contentBlocks,r=o.createFromArray(n),a=r.isEmpty()?new c:c.createEmpty(r.first().getKey());return new i({blockMap:r,entityMap:t||l,selectionBefore:a,selectionAfter:a})},i.createFromText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/\r\n?|\n/g,n=e.split(t),r=n.map((function(e){return e=v(e),new w({key:f(),text:e,type:"unstyled",characterList:m(y(a.EMPTY,e.length))})}));return i.createFromBlockArray(r)},i.fromJS=function(e){return new i(r({},e,{blockMap:x(e.blockMap).map(i.createContentBlockFromJS),selectionBefore:new c(e.selectionBefore),selectionAfter:new c(e.selectionAfter)}))},i.createContentBlockFromJS=function(e){var t=e.characterList;return new w(r({},e,{data:b(e.data),characterList:null!=t?m((Array.isArray(t)?t:h(t)).map((function(e){return a.fromJS(e)}))):void 0}))},i}(_);e.exports=S},2920:function(e,t,n){"use strict";var r=n(36148),i=n(76240).Map,o={add:function(e,t,n){return a(e,t,n,!0)},remove:function(e,t,n){return a(e,t,n,!1)}};function a(e,t,n,o){var a=e.getBlockMap(),s=t.getStartKey(),u=t.getStartOffset(),l=t.getEndKey(),c=t.getEndOffset(),f=a.skipUntil((function(e,t){return t===s})).takeUntil((function(e,t){return t===l})).concat(i([[l,a.get(l)]])).map((function(e,t){var i,a;s===l?(i=u,a=c):(i=t===s?u:0,a=t===l?c:e.getLength());for(var f,h=e.getCharacterList();i<a;)f=h.get(i),h=h.set(i,o?r.applyStyle(f,n):r.removeStyle(f,n)),i++;return e.set("characterList",h)}));return e.merge({blockMap:a.merge(f),selectionBefore:t,selectionAfter:t})}e.exports=o},28198:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(15963),o=n(52593),a=n(40719),s=n(76240),u=n(9001),l=n(59224),c=s.Map,f={subtree:!0,characterData:!0,childList:!0,characterDataOldValue:!1,attributes:!1},h=i.isBrowser("IE <= 11"),d=function(){function e(e){var t=this;r(this,"observer",void 0),r(this,"container",void 0),r(this,"mutations",void 0),r(this,"onCharData",void 0),this.container=e,this.mutations=c();var n=a(e);n.MutationObserver&&!h?this.observer=new n.MutationObserver((function(e){return t.registerMutations(e)})):this.onCharData=function(e){e.target instanceof Node||u(!1),t.registerMutation({type:"characterData",target:e.target})}}var t=e.prototype;return t.start=function(){this.observer?this.observer.observe(this.container,f):this.container.addEventListener("DOMCharacterDataModified",this.onCharData)},t.stopAndFlushMutations=function(){var e=this.observer;e?(this.registerMutations(e.takeRecords()),e.disconnect()):this.container.removeEventListener("DOMCharacterDataModified",this.onCharData);var t=this.mutations;return this.mutations=c(),t},t.registerMutations=function(e){for(var t=0;t<e.length;t++)this.registerMutation(e[t])},t.getMutationTextContent=function(e){var t=e.type,n=e.target,r=e.removedNodes;if("characterData"===t){if(""!==n.textContent)return h?n.textContent.replace("\n",""):n.textContent}else if("childList"===t){if(r&&r.length)return"";if(""!==n.textContent)return n.textContent}return null},t.registerMutation=function(e){var t=this.getMutationTextContent(e);if(null!=t){var n=l(o(e.target));this.mutations=this.mutations.set(n,t)}},e}();e.exports=d},11792:function(e,t,n){"use strict";var r=n(47028),i=n(24227),o=(0,n(76240).Map)({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},section:{element:"section"},article:{element:"article"},"unordered-list-item":{element:"li",wrapper:r.createElement("ul",{className:i("public/DraftStyleDefault/ul")})},"ordered-list-item":{element:"li",wrapper:r.createElement("ol",{className:i("public/DraftStyleDefault/ol")})},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:r.createElement("pre",{className:i("public/DraftStyleDefault/pre")})},unstyled:{element:"div",aliasedElements:["p"]}});e.exports=o},77872:function(e){"use strict";e.exports={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}}},60832:function(e,t,n){"use strict";var r=n(78926),i=n(47498),o=n(36148),a=n(91047),s=n(18638),u=n(98522),l=n(11792),c=n(77872),f=n(28309),h=n(92239),d=n(5693),p=n(82362),v=n(69299),m=n(94705),g=n(16056),y=n(57495),b=n(44360),x=n(25232),_=n(999),w=n(19603),S=n(8385),E=n(59405),k=n(43568),O={Editor:f,EditorBlock:h,EditorState:m,CompositeDecorator:a,Entity:d,EntityInstance:v,BlockMapBuilder:i,CharacterMetadata:o,ContentBlock:s,ContentState:u,RawDraftContentState:y,SelectionState:x,AtomicBlockUtils:r,KeyBindingUtil:g,Modifier:p,RichUtils:b,DefaultDraftBlockRenderMap:l,DefaultDraftInlineStyle:c,convertFromHTML:n(39479),convertFromRaw:w,convertToRaw:_,genKey:S,getDefaultKeyBinding:E,getVisibleSelectionRect:k};e.exports=O},28309:function(e,t,n){"use strict";var r=n(46221);function i(){return i=r||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var l=n(11792),c=n(77872),f=n(75743),h=n(27828),d=n(33753),p=n(92270),v=n(3791),m=n(68161),g=n(32903),y=n(94705),b=n(47028),x=n(18061),_=n(40380),w=n(15963),S=n(24227),E=n(8385),k=n(59405),O=n(16818),A=n(36872),C=n(9001),M=n(41923),T=n(59224),P=w.isBrowser("IE"),R=!P,I={edit:p,composite:f,drag:d,cut:null,render:null},L=!1,N=function(e){function t(){return e.apply(this,arguments)||this}u(t,e);var n=t.prototype;return n.render=function(){return null},n.componentDidMount=function(){this._update()},n.componentDidUpdate=function(){this._update()},n._update=function(){var e=this.props.editor;e._latestEditorState=this.props.editorState,e._blockSelectEvents=!0},t}(b.Component),j=function(e){function t(t){var n;return s(a(n=e.call(this,t)||this),"_blockSelectEvents",void 0),s(a(n),"_clipboard",void 0),s(a(n),"_handler",void 0),s(a(n),"_dragCount",void 0),s(a(n),"_internalDrag",void 0),s(a(n),"_editorKey",void 0),s(a(n),"_placeholderAccessibilityID",void 0),s(a(n),"_latestEditorState",void 0),s(a(n),"_latestCommittedEditorState",void 0),s(a(n),"_pendingStateFromBeforeInput",void 0),s(a(n),"_onBeforeInput",void 0),s(a(n),"_onBlur",void 0),s(a(n),"_onCharacterData",void 0),s(a(n),"_onCompositionEnd",void 0),s(a(n),"_onCompositionStart",void 0),s(a(n),"_onCopy",void 0),s(a(n),"_onCut",void 0),s(a(n),"_onDragEnd",void 0),s(a(n),"_onDragOver",void 0),s(a(n),"_onDragStart",void 0),s(a(n),"_onDrop",void 0),s(a(n),"_onInput",void 0),s(a(n),"_onFocus",void 0),s(a(n),"_onKeyDown",void 0),s(a(n),"_onKeyPress",void 0),s(a(n),"_onKeyUp",void 0),s(a(n),"_onMouseDown",void 0),s(a(n),"_onMouseUp",void 0),s(a(n),"_onPaste",void 0),s(a(n),"_onSelect",void 0),s(a(n),"editor",void 0),s(a(n),"editorContainer",void 0),s(a(n),"focus",void 0),s(a(n),"blur",void 0),s(a(n),"setMode",void 0),s(a(n),"exitCurrentMode",void 0),s(a(n),"restoreEditorDOM",void 0),s(a(n),"setClipboard",void 0),s(a(n),"getClipboard",void 0),s(a(n),"getEditorKey",void 0),s(a(n),"update",void 0),s(a(n),"onDragEnter",void 0),s(a(n),"onDragLeave",void 0),s(a(n),"_handleEditorContainerRef",(function(e){n.editorContainer=e,n.editor=null!==e?e.firstChild:null})),s(a(n),"focus",(function(e){var t=n.props.editorState,r=t.getSelection().getHasFocus(),i=n.editor;if(i){var o=_.getScrollParent(i),a=e||O(o),s=a.x,u=a.y;M(i)||C(!1),i.focus(),o===window?window.scrollTo(s,u):x.setTop(o,u),r||n.update(y.forceSelection(t,t.getSelection()))}})),s(a(n),"blur",(function(){var e=n.editor;e&&(M(e)||C(!1),e.blur())})),s(a(n),"setMode",(function(e){var t=n.props,r=t.onPaste,i=t.onCut,a=t.onCopy,s=o({},I.edit);r&&(s.onPaste=r),i&&(s.onCut=i),a&&(s.onCopy=a);var u=o({},I,{edit:s});n._handler=u[e]})),s(a(n),"exitCurrentMode",(function(){n.setMode("edit")})),s(a(n),"restoreEditorDOM",(function(e){n.setState({contentsKey:n.state.contentsKey+1},(function(){n.focus(e)}))})),s(a(n),"setClipboard",(function(e){n._clipboard=e})),s(a(n),"getClipboard",(function(){return n._clipboard})),s(a(n),"update",(function(e){n._latestEditorState=e,n.props.onChange(e)})),s(a(n),"onDragEnter",(function(){n._dragCount++})),s(a(n),"onDragLeave",(function(){n._dragCount--,0===n._dragCount&&n.exitCurrentMode()})),n._blockSelectEvents=!1,n._clipboard=null,n._handler=null,n._dragCount=0,n._editorKey=t.editorKey||E(),n._placeholderAccessibilityID="placeholder-"+n._editorKey,n._latestEditorState=t.editorState,n._latestCommittedEditorState=t.editorState,n._onBeforeInput=n._buildHandler("onBeforeInput"),n._onBlur=n._buildHandler("onBlur"),n._onCharacterData=n._buildHandler("onCharacterData"),n._onCompositionEnd=n._buildHandler("onCompositionEnd"),n._onCompositionStart=n._buildHandler("onCompositionStart"),n._onCopy=n._buildHandler("onCopy"),n._onCut=n._buildHandler("onCut"),n._onDragEnd=n._buildHandler("onDragEnd"),n._onDragOver=n._buildHandler("onDragOver"),n._onDragStart=n._buildHandler("onDragStart"),n._onDrop=n._buildHandler("onDrop"),n._onInput=n._buildHandler("onInput"),n._onFocus=n._buildHandler("onFocus"),n._onKeyDown=n._buildHandler("onKeyDown"),n._onKeyPress=n._buildHandler("onKeyPress"),n._onKeyUp=n._buildHandler("onKeyUp"),n._onMouseDown=n._buildHandler("onMouseDown"),n._onMouseUp=n._buildHandler("onMouseUp"),n._onPaste=n._buildHandler("onPaste"),n._onSelect=n._buildHandler("onSelect"),n.getEditorKey=function(){return n._editorKey},n.state={contentsKey:0},n}u(t,e);var r=t.prototype;return r._buildHandler=function(e){var t=this;return function(n){if(!t.props.readOnly){var r=t._handler&&t._handler[e];r&&(v?v((function(){return r(t,n)})):r(t,n))}}},r._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()},r._renderPlaceholder=function(){if(this._showPlaceholder()){var e={text:T(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID};return b.createElement(m,e)}return null},r._renderARIADescribedBy=function(){var e=this.props.ariaDescribedBy||"",t=this._showPlaceholder()?this._placeholderAccessibilityID:"";return e.replace("{{editor_id_placeholder}}",t)||void 0},r.render=function(){var e=this.props,t=e.blockRenderMap,n=e.blockRendererFn,r=e.blockStyleFn,a=e.customStyleFn,s=e.customStyleMap,u=e.editorState,l=e.preventScroll,f=e.readOnly,d=e.textAlignment,p=e.textDirectionality,v=S({"DraftEditor/root":!0,"DraftEditor/alignLeft":"left"===d,"DraftEditor/alignRight":"right"===d,"DraftEditor/alignCenter":"center"===d}),m=this.props.role||"textbox",g="combobox"===m?!!this.props.ariaExpanded:null,y={blockRenderMap:t,blockRendererFn:n,blockStyleFn:r,customStyleMap:o({},c,s),customStyleFn:a,editorKey:this._editorKey,editorState:u,preventScroll:l,textDirectionality:p};return b.createElement("div",{className:v},this._renderPlaceholder(),b.createElement("div",{className:S("DraftEditor/editorContainer"),ref:this._handleEditorContainerRef},b.createElement("div",{"aria-activedescendant":f?null:this.props.ariaActiveDescendantID,"aria-autocomplete":f?null:this.props.ariaAutoComplete,"aria-controls":f?null:this.props.ariaControls,"aria-describedby":this._renderARIADescribedBy(),"aria-expanded":f?null:g,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabelledBy,"aria-multiline":this.props.ariaMultiline,"aria-owns":f?null:this.props.ariaOwneeID,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:S({notranslate:!f,"public/DraftEditor/content":!0}),contentEditable:!f,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:this.props.editorRef,role:f?null:m,spellCheck:R&&this.props.spellCheck,style:{outline:"none",userSelect:"text",WebkitUserSelect:"text",whiteSpace:"pre-wrap",wordWrap:"break-word"},suppressContentEditableWarning:!0,tabIndex:this.props.tabIndex},b.createElement(N,{editor:this,editorState:u}),b.createElement(h,i({},y,{key:"contents"+this.state.contentsKey})))))},r.componentDidMount=function(){this._blockSelectEvents=!1,!L&&A("draft_ods_enabled")&&(L=!0,g.initODS()),this.setMode("edit"),P&&(this.editor?this.editor.ownerDocument.execCommand("AutoUrlDetect",!1,!1):n.g.execCommand("AutoUrlDetect",!1,!1))},r.componentDidUpdate=function(){this._blockSelectEvents=!1,this._latestEditorState=this.props.editorState,this._latestCommittedEditorState=this.props.editorState},t}(b.Component);s(j,"defaultProps",{ariaDescribedBy:"{{editor_id_placeholder}}",blockRenderMap:l,blockRendererFn:function(){return null},blockStyleFn:function(){return""},keyBindingFn:k,readOnly:!1,spellCheck:!1,stripPastedStyles:!1}),e.exports=j},92239:function(e,t,n){"use strict";var r=n(46221);function i(){return i=r||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(50276),u=n(15614),l=n(47028),c=n(18061),f=n(40380),h=n(49552),d=n(73661),p=n(24227),v=n(78068),m=n(16818),g=n(81488),y=n(9001),b=n(41923),x=n(59224),_=function(e,t){return e.getAnchorKey()===t||e.getFocusKey()===t},w=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a(o(t=e.call.apply(e,[this].concat(r))||this),"_node",void 0),t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var w=r.prototype;return w.shouldComponentUpdate=function(e){return this.props.block!==e.block||this.props.tree!==e.tree||this.props.direction!==e.direction||_(e.selection,e.block.getKey())&&e.forceSelection},w.componentDidMount=function(){if(!this.props.preventScroll){var e=this.props.selection,t=e.getEndKey();if(e.getHasFocus()&&t===this.props.block.getKey()){var n=this._node;if(null!=n){var r,i=f.getScrollParent(n),o=m(i);if(i===window){var a=v(n);(r=a.y+a.height-g().height)>0&&window.scrollTo(o.x,o.y+r+10)}else{b(n)||y(!1),(r=n.offsetHeight+n.offsetTop-(i.offsetTop+i.offsetHeight+o.y))>0&&c.setTop(i,c.getTop(i)+r+10)}}}}},w._renderChildren=function(){var e=this,t=this.props.block,n=t.getKey(),r=t.getText(),o=this.props.tree.size-1,a=_(this.props.selection,n);return this.props.tree.map((function(c,f){var p=c.get("leaves");if(0===p.size)return null;var v=p.size-1,m=p.map((function(i,c){var h=u.encode(n,f,c),d=i.get("start"),p=i.get("end");return l.createElement(s,{key:h,offsetKey:h,block:t,start:d,selection:a?e.props.selection:null,forceSelection:e.props.forceSelection,text:r.slice(d,p),styleSet:t.getInlineStyleAt(d),customStyleMap:e.props.customStyleMap,customStyleFn:e.props.customStyleFn,isLast:f===o&&c===v})})).toArray(),g=c.get("decoratorKey");if(null==g)return m;if(!e.props.decorator)return m;var y=x(e.props.decorator),b=y.getComponentForKey(g);if(!b)return m;var _=y.getPropsForKey(g),w=u.encode(n,f,0),S=p.first().get("start"),E=p.last().get("end"),k=r.slice(S,E),O=t.getEntityAt(c.get("start")),A=d.getHTMLDirIfDifferent(h.getDirection(k),e.props.direction),C={contentState:e.props.contentState,decoratedText:k,dir:A,start:S,end:E,blockKey:n,entityKey:O,offsetKey:w};return l.createElement(b,i({},_,C,{key:w}),m)})).toArray()},w.render=function(){var e=this,t=this.props,n=t.direction,r=t.offsetKey,i=p({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":"LTR"===n,"public/DraftStyleDefault/rtl":"RTL"===n});return l.createElement("div",{"data-offset-key":r,className:i,ref:function(t){return e._node=t}},this._renderChildren())},r}(l.Component);e.exports=w},93195:function(e,t,n){"use strict";var r=n(46221);function i(){return i=r||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(82957),l=n(15614),c=n(47028),f=n(18061),h=n(40380),d=n(78068),p=n(16818),v=n(81488),m=n(76240),g=n(9001),y=n(41923),b=(m.List,function(e,t){return e.getAnchorKey()===t||e.getFocusKey()===t}),x=function(e,t){var n=t.get(e.getType())||t.get("unstyled"),r=n.wrapper;return{Element:n.element||t.get("unstyled").element,wrapperTemplate:r}},_=function(e,t){var n=t(e);return n?{CustomComponent:n.component,customProps:n.props,customEditable:n.editable}:{}},w=function(e,t,n,r,i,o){var s={"data-block":!0,"data-editor":t,"data-offset-key":n,key:e.getKey(),ref:o},u=r(e);return u&&(s.className=u),void 0!==i.customEditable&&(s=a({},s,{contentEditable:i.customEditable,suppressContentEditableWarning:!0})),s},S=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return s(o(t=e.call.apply(e,[this].concat(r))||this),"wrapperRef",c.createRef()),t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var m=r.prototype;return m.shouldComponentUpdate=function(e){var t=this.props,n=t.block,r=t.direction,i=t.tree,o=!n.getChildKeys().isEmpty(),a=n!==e.block||i!==e.tree||r!==e.direction||b(e.selection,e.block.getKey())&&e.forceSelection;return o||a},m.componentDidMount=function(){var e=this.props.selection,t=e.getEndKey();if(e.getHasFocus()&&t===this.props.block.getKey()){var n=this.wrapperRef.current;if(n){var r,i=h.getScrollParent(n),o=p(i);if(i===window){var a=d(n);(r=a.y+a.height-v().height)>0&&window.scrollTo(o.x,o.y+r+10)}else{y(n)||g(!1);var s=n;(r=s.offsetHeight+s.offsetTop-(i.offsetHeight+o.y))>0&&f.setTop(i,f.getTop(i)+r+10)}}}},m.render=function(){var e=this,t=this.props,n=t.block,o=t.blockRenderMap,s=t.blockRendererFn,f=t.blockStyleFn,h=t.contentState,d=t.decorator,p=t.editorKey,v=t.editorState,m=t.customStyleFn,g=t.customStyleMap,y=t.direction,S=t.forceSelection,E=t.selection,k=t.tree,O=null;n.children.size&&(O=n.children.reduce((function(t,n){var i=l.encode(n,0,0),u=h.getBlockForKey(n),d=_(u,s),m=d.CustomComponent||r,g=x(u,o),y=g.Element,b=g.wrapperTemplate,S=w(u,p,i,f,d,null),E=a({},e.props,{tree:v.getBlockTree(n),blockProps:d.customProps,offsetKey:i,block:u});return t.push(c.createElement(y,S,c.createElement(m,E))),!b||function(e,t){var n=e.getNextSiblingKey();return!!n&&t.getBlockForKey(n).getType()===e.getType()}(u,h)||function(e,t,n){var r=[],i=!0,o=!1,a=void 0;try{for(var s,u=n.reverse()[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var f=s.value;if(f.type!==t)break;r.push(f)}}catch(p){o=!0,a=p}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}n.splice(n.indexOf(r[0]),r.length+1);var h=r.reverse(),d=h[0].key;n.push(c.cloneElement(e,{key:"".concat(d,"-wrap"),"data-offset-key":l.encode(d,0,0)},h))}(b,y,t),t}),[]));var A=n.getKey(),C=l.encode(A,0,0),M=_(n,s),T=M.CustomComponent,P=null!=T?c.createElement(T,i({},this.props,{tree:v.getBlockTree(A),blockProps:M.customProps,offsetKey:C,block:n})):c.createElement(u,{block:n,children:O,contentState:h,customStyleFn:m,customStyleMap:g,decorator:d,direction:y,forceSelection:S,hasSelection:b(E,A),selection:E,tree:k});if(n.getParentKey())return P;var R=x(n,o).Element,I=w(n,p,C,f,M,this.wrapperRef);return c.createElement(R,I,P)},r}(c.Component);e.exports=S},75743:function(e,t,n){"use strict";var r=n(28198),i=n(82362),o=n(15614),a=n(94705),s=n(78691),u=n(15963),l=n(35715),c=n(64112),f=n(30030),h=n(26192),d=n(59224),p=u.isBrowser("IE"),v=!1,m=!1,g=null;var y={onCompositionStart:function(e){m=!0,function(e){g||(g=new r(c(e))).start()}(e)},onCompositionEnd:function(e){v=!1,m=!1,setTimeout((function(){v||y.resolveComposition(e)}),20)},onSelect:l,onKeyDown:function(e,t){if(!m)return y.resolveComposition(e),void e._onKeyDown(t);t.which!==s.RIGHT&&t.which!==s.LEFT||t.preventDefault()},onKeyPress:function(e,t){t.which===s.RETURN&&t.preventDefault()},resolveComposition:function(e){if(!m){var t=d(g).stopAndFlushMutations();g=null,v=!0;var n=a.set(e._latestEditorState,{inCompositionMode:!1});if(e.exitCurrentMode(),t.size){var r=n.getCurrentContent();t.forEach((function(e,t){var s=o.decode(t),u=s.blockKey,l=s.decoratorKey,c=s.leafKey,f=n.getBlockTree(u).getIn([l,"leaves",c]),d=f.start,p=f.end,v=n.getSelection().merge({anchorKey:u,focusKey:u,anchorOffset:d,focusOffset:p,isBackward:!1}),m=h(r,v),g=r.getBlockForKey(u).getInlineStyleAt(d);r=i.replaceText(r,v,e,g,m),n=a.set(n,{currentContent:r})}));var s=f(n,c(e)).selectionState;e.restoreEditorDOM();var u=p?a.forceSelection(n,s):a.acceptSelection(n,s);e.update(a.push(u,r,"insert-characters"))}else e.update(n)}}};e.exports=y},23182:function(e,t,n){"use strict";var r=n(46221);function i(){return i=r||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(92239),u=n(15614),l=n(47028),c=n(24227),f=n(14179),h=n(59224),d=function(e,t,n,r){return c({"public/DraftStyleDefault/unorderedListItem":"unordered-list-item"===e,"public/DraftStyleDefault/orderedListItem":"ordered-list-item"===e,"public/DraftStyleDefault/reset":n,"public/DraftStyleDefault/depth0":0===t,"public/DraftStyleDefault/depth1":1===t,"public/DraftStyleDefault/depth2":2===t,"public/DraftStyleDefault/depth3":3===t,"public/DraftStyleDefault/depth4":t>=4,"public/DraftStyleDefault/listLTR":"LTR"===r,"public/DraftStyleDefault/listRTL":"RTL"===r})},p=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.shouldComponentUpdate=function(e){var t=this.props.editorState,n=e.editorState;if(t.getDirectionMap()!==n.getDirectionMap())return!0;if(t.getSelection().getHasFocus()!==n.getSelection().getHasFocus())return!0;var r=n.getNativelyRenderedContent(),i=t.isInCompositionMode(),o=n.isInCompositionMode();if(t===n||null!==r&&n.getCurrentContent()===r||i&&o)return!1;var a=t.getCurrentContent(),s=n.getCurrentContent(),u=t.getDecorator(),l=n.getDecorator();return i!==o||a!==s||u!==l||n.mustForceSelection()},a.render=function(){for(var e=this.props,t=e.blockRenderMap,n=e.blockRendererFn,r=e.blockStyleFn,a=e.customStyleMap,c=e.customStyleFn,p=e.editorState,v=e.editorKey,m=e.preventScroll,g=e.textDirectionality,y=p.getCurrentContent(),b=p.getSelection(),x=p.mustForceSelection(),_=p.getDecorator(),w=h(p.getDirectionMap()),S=y.getBlocksAsArray(),E=[],k=null,O=null,A=0;A<S.length;A++){var C=S[A],M=C.getKey(),T=C.getType(),P=n(C),R=void 0,I=void 0,L=void 0;P&&(R=P.component,I=P.props,L=P.editable);var N=g||w.get(M),j=u.encode(M,0,0),D={contentState:y,block:C,blockProps:I,blockStyleFn:r,customStyleMap:a,customStyleFn:c,decorator:_,direction:N,forceSelection:x,offsetKey:j,preventScroll:m,selection:b,tree:p.getBlockTree(M)},B=t.get(T)||t.get("unstyled"),z=B.wrapper,F=B.element||t.get("unstyled").element,V=C.getDepth(),U="";if(r&&(U=r(C)),"li"===F)U=f(U,d(T,V,O!==z||null===k||V>k,N));var Z=R||s,H={className:U,"data-block":!0,"data-editor":v,"data-offset-key":j,key:M};void 0!==L&&(H=o({},H,{contentEditable:L,suppressContentEditableWarning:!0}));var G=l.createElement(F,H,l.createElement(Z,i({},D,{key:M})));E.push({block:G,wrapperTemplate:z,key:M,offsetKey:j}),k=z?C.getDepth():null,O=z}for(var W=[],q=0;q<E.length;){var K=E[q];if(K.wrapperTemplate){var Y=[];do{Y.push(E[q].block),q++}while(q<E.length&&E[q].wrapperTemplate===K.wrapperTemplate);var X=l.cloneElement(K.wrapperTemplate,{key:K.key+"-wrap","data-offset-key":K.offsetKey},Y);W.push(X)}else W.push(K.block),q++}return l.createElement("div",{"data-contents":"true"},W)},r}(l.Component);e.exports=p},27828:function(e,t,n){"use strict";var r=n(36872)("draft_tree_data_support");e.exports=n(r?10446:23182)},10446:function(e,t,n){"use strict";var r=n(46221);function i(){return i=r||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}var o=n(93195),a=n(15614),s=n(47028),u=n(59224),l=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=r.prototype;return l.shouldComponentUpdate=function(e){var t=this.props.editorState,n=e.editorState;if(t.getDirectionMap()!==n.getDirectionMap())return!0;if(t.getSelection().getHasFocus()!==n.getSelection().getHasFocus())return!0;var r=n.getNativelyRenderedContent(),i=t.isInCompositionMode(),o=n.isInCompositionMode();if(t===n||null!==r&&n.getCurrentContent()===r||i&&o)return!1;var a=t.getCurrentContent(),s=n.getCurrentContent(),u=t.getDecorator(),l=n.getDecorator();return i!==o||a!==s||u!==l||n.mustForceSelection()},l.render=function(){for(var e=this.props,t=e.blockRenderMap,n=e.blockRendererFn,r=e.blockStyleFn,l=e.customStyleMap,c=e.customStyleFn,f=e.editorState,h=e.editorKey,d=e.textDirectionality,p=f.getCurrentContent(),v=f.getSelection(),m=f.mustForceSelection(),g=f.getDecorator(),y=u(f.getDirectionMap()),b=[],x=p.getBlocksAsArray()[0];x;){var _=x.getKey(),w={blockRenderMap:t,blockRendererFn:n,blockStyleFn:r,contentState:p,customStyleFn:c,customStyleMap:l,decorator:g,editorKey:h,editorState:f,forceSelection:m,selection:v,block:x,direction:d||y.get(_),tree:f.getBlockTree(_)},S=(t.get(x.getType())||t.get("unstyled")).wrapper;b.push({block:s.createElement(o,i({key:_},w)),wrapperTemplate:S,key:_,offsetKey:a.encode(_,0,0)});var E=x.getNextSiblingKey();x=E?p.getBlockForKey(E):null}for(var k=[],O=0;O<b.length;){var A=b[O];if(A.wrapperTemplate){var C=[];do{C.push(b[O].block),O++}while(O<b.length&&b[O].wrapperTemplate===A.wrapperTemplate);var M=s.cloneElement(A.wrapperTemplate,{key:A.key+"-wrap","data-offset-key":A.offsetKey},C);k.push(M)}else k.push(A.block),O++}return s.createElement("div",{"data-contents":"true"},k)},r}(s.Component);e.exports=l},26174:function(e,t,n){"use strict";var r=n(46221);function i(){return i=r||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}var o=n(15614),a=n(47028),s=n(49552),u=n(73661),l=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.block,n=e.children,r=e.contentState,l=e.decorator,c=e.decoratorKey,f=e.direction,h=e.leafSet,d=e.text,p=t.getKey(),v=h.get("leaves"),m=l.getComponentForKey(c),g=l.getPropsForKey(c),y=o.encode(p,parseInt(c,10),0),b=d.slice(v.first().get("start"),v.last().get("end")),x=u.getHTMLDirIfDifferent(s.getDirection(b),f);return a.createElement(m,i({},g,{contentState:r,decoratedText:b,dir:x,key:y,entityKey:t.getEntityAt(h.get("start")),offsetKey:y}),n)},r}(a.Component);e.exports=l},33753:function(e,t,n){"use strict";var r=n(22955),i=n(82362),o=n(94705),a=n(52593),s=n(8921),u=n(57566),l=n(29272),c=n(40719),f=n(93489),h=n(59224);var d={onDragEnd:function(e){e.exitCurrentMode(),p(e)},onDrop:function(e,t){var n=new r(t.nativeEvent.dataTransfer),c=e._latestEditorState,d=function(e,t){var n=null,r=null,i=s(e.currentTarget);if("function"===typeof i.caretRangeFromPoint){var o=i.caretRangeFromPoint(e.x,e.y);n=o.startContainer,r=o.startOffset}else{if(!e.rangeParent)return null;n=e.rangeParent,r=e.rangeOffset}n=h(n),r=h(r);var u=h(a(n));return l(t,u,r,u,r)}(t.nativeEvent,c);if(t.preventDefault(),e._dragCount=0,e.exitCurrentMode(),null!=d){var m=n.getFiles();if(m.length>0){if(e.props.handleDroppedFiles&&f(e.props.handleDroppedFiles(d,m)))return;u(m,(function(t){t&&e.update(v(c,d,t))}))}else{var g=e._internalDrag?"internal":"external";e.props.handleDrop&&f(e.props.handleDrop(d,n,g))||(e._internalDrag?e.update(function(e,t){var n=i.moveText(e.getCurrentContent(),e.getSelection(),t);return o.push(e,n,"insert-fragment")}(c,d)):e.update(v(c,d,n.getText()))),p(e)}}}};function p(e){e._internalDrag=!1;var t=e.editorContainer;if(t){var n=new MouseEvent("mouseup",{view:c(t),bubbles:!0,cancelable:!0});t.dispatchEvent(n)}}function v(e,t,n){var r=i.insertText(e.getCurrentContent(),t,n,e.getCurrentInlineStyle());return o.push(e,r,"insert-fragment")}e.exports=d},92270:function(e,t,n){"use strict";var r=n(15963),i=n(56009),o=n(22486),a=n(50634),s=n(44791),u=n(21064),l=n(77470),c=n(74263),f=n(95914),h=n(45891),d=n(81354),p=n(89072),v=n(35715),m=r.isBrowser("Chrome"),g=r.isBrowser("Firefox"),y=m||g?v:function(e){},b={onBeforeInput:i,onBlur:o,onCompositionStart:a,onCopy:s,onCut:u,onDragOver:l,onDragStart:c,onFocus:f,onInput:h,onKeyDown:d,onPaste:p,onSelect:v,onMouseUp:y,onKeyUp:y};e.exports=b},3791:function(e,t,n){"use strict";var r=n(69538).unstable_flushControlled;e.exports=r},50276:function(e,t,n){"use strict";var r=n(46221);function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(70903),s=n(47028),u=n(9001),l=n(38603),c=n(54922).setDraftEditorSelection,f=function(e){var t,n;function f(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return o(i(t=e.call.apply(e,[this].concat(r))||this),"leaf",void 0),t}n=e,(t=f).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var h=f.prototype;return h._setSelection=function(){var e=this.props.selection;if(null!=e&&e.getHasFocus()){var t=this.props,n=t.block,r=t.start,i=t.text,o=n.getKey(),a=r+i.length;if(e.hasEdgeWithin(o,r,a)){var s=this.leaf;s||u(!1);var f,h=s.firstChild;h||u(!1),h.nodeType===Node.TEXT_NODE?f=h:l(h)?f=s:(f=h.firstChild)||u(!1),c(e,f,o,r,a)}}},h.shouldComponentUpdate=function(e){var t=this.leaf;return t||u(!1),t.textContent!==e.text||e.styleSet!==this.props.styleSet||e.forceSelection},h.componentDidUpdate=function(){this._setSelection()},h.componentDidMount=function(){this._setSelection()},h.render=function(){var e=this,t=this.props.block,n=this.props.text;n.endsWith("\n")&&this.props.isLast&&(n+="\n");var i=this.props,o=i.customStyleMap,u=i.customStyleFn,l=i.offsetKey,c=i.styleSet,f=c.reduce((function(e,t){var n={},i=o[t];return void 0!==i&&e.textDecoration!==i.textDecoration&&(n.textDecoration=[e.textDecoration,i.textDecoration].join(" ").trim()),r(e,i,n)}),{});if(u){var h=u(c,t);f=r(f,h)}return s.createElement("span",{"data-offset-key":l,ref:function(t){return e.leaf=t},style:f},s.createElement(a,null,n))},f}(s.Component);e.exports=f},82957:function(e,t,n){"use strict";var r=n(26174),i=n(50276),o=n(15614),a=n(76240),s=n(47028),u=n(24227),l=(a.List,function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.prototype.render=function(){var e=this.props,t=e.block,n=e.contentState,a=e.customStyleFn,l=e.customStyleMap,c=e.decorator,f=e.direction,h=e.forceSelection,d=e.hasSelection,p=e.selection,v=e.tree,m=t.getKey(),g=t.getText(),y=v.size-1,b=this.props.children||v.map((function(e,u){var v=e.get("decoratorKey"),b=e.get("leaves"),x=b.size-1,_=b.map((function(e,n){var r=o.encode(m,u,n),c=e.get("start"),f=e.get("end");return s.createElement(i,{key:r,offsetKey:r,block:t,start:c,selection:d?p:null,forceSelection:h,text:g.slice(c,f),styleSet:t.getInlineStyleAt(c),customStyleMap:l,customStyleFn:a,isLast:v===y&&n===x})})).toArray();return v&&c?s.createElement(r,{block:t,children:_,contentState:n,decorator:c,decoratorKey:v,direction:f,leafSet:e,text:g,key:u}):_})).toArray();return s.createElement("div",{"data-offset-key":o.encode(m,0,0),className:u({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":"LTR"===f,"public/DraftStyleDefault/rtl":"RTL"===f})},b)},a}(s.Component));e.exports=l},68161:function(e,t,n){"use strict";var r=n(47028),i=n(24227),o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=o.prototype;return a.shouldComponentUpdate=function(e){return this.props.text!==e.text||this.props.editorState.getSelection().getHasFocus()!==e.editorState.getSelection().getHasFocus()},a.render=function(){var e=this.props.editorState.getSelection().getHasFocus(),t=i({"public/DraftEditorPlaceholder/root":!0,"public/DraftEditorPlaceholder/hasFocus":e});return r.createElement("div",{className:t},r.createElement("div",{className:i("public/DraftEditorPlaceholder/inner"),id:this.props.accessibilityID,style:{whiteSpace:"pre-wrap"}},this.props.text))},o}(r.Component);e.exports=o},70903:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(47028),a=n(15963),s=n(9001),u=n(15891),l=a.isBrowser("IE <= 11");var c=function(e){var t,n;function a(t){var n;return i(r(n=e.call(this,t)||this),"_forceFlag",void 0),i(r(n),"_node",void 0),n._forceFlag=!1,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var c=a.prototype;return c.shouldComponentUpdate=function(e){var t=this._node,n=""===e.children;u(t)||s(!1);var r=t;return n?!function(e){return l?"\n"===e.textContent:"BR"===e.tagName}(r):r.textContent!==e.children},c.componentDidMount=function(){this._forceFlag=!this._forceFlag},c.componentDidUpdate=function(){this._forceFlag=!this._forceFlag},c.render=function(){var e,t=this;return""===this.props.children?this._forceFlag?(e=function(e){return t._node=e},l?o.createElement("span",{key:"A","data-text":"true",ref:e},"\n"):o.createElement("br",{key:"A","data-text":"true",ref:e})):function(e){return l?o.createElement("span",{key:"B","data-text":"true",ref:e},"\n"):o.createElement("br",{key:"B","data-text":"true",ref:e})}((function(e){return t._node=e})):o.createElement("span",{key:this._forceFlag?"A":"B","data-text":"true",ref:function(e){return t._node=e}},this.props.children)},a}(o.Component);e.exports=c},32903:function(e){"use strict";e.exports={initODS:function(){},handleExtensionCausedError:function(){}}},5693:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(69299),o=n(76240),a=n(9001),s=n(63558),u=(0,o.Map)(),l=s();function c(e,t){console.warn("WARNING: "+e+' will be deprecated soon!\nPlease use "'+t+'" instead.')}var f={getLastCreatedEntityKey:function(){return c("DraftEntity.getLastCreatedEntityKey","contentState.getLastCreatedEntityKey"),f.__getLastCreatedEntityKey()},create:function(e,t,n){return c("DraftEntity.create","contentState.createEntity"),f.__create(e,t,n)},add:function(e){return c("DraftEntity.add","contentState.addEntity"),f.__add(e)},get:function(e){return c("DraftEntity.get","contentState.getEntity"),f.__get(e)},__getAll:function(){return u},__loadWithEntities:function(e){u=e,l=s()},mergeData:function(e,t){return c("DraftEntity.mergeData","contentState.mergeEntityData"),f.__mergeData(e,t)},replaceData:function(e,t){return c("DraftEntity.replaceData","contentState.replaceEntityData"),f.__replaceData(e,t)},__getLastCreatedEntityKey:function(){return l},__create:function(e,t,n){return f.__add(new i({type:e,mutability:t,data:n||{}}))},__add:function(e){return l=s(),u=u.set(l,e),l},__get:function(e){var t=u.get(e);return t||a(!1),t},__mergeData:function(e,t){var n=f.__get(e),i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}({},n.getData(),t),o=n.set("data",i);return u=u.set(e,o),o},__replaceData:function(e,t){var n=f.__get(e).set("data",t);return u=u.set(e,n),n}};e.exports=f},69299:function(e,t,n){"use strict";var r=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.getType=function(){return this.get("type")},i.getMutability=function(){return this.get("mutability")},i.getData=function(){return this.get("data")},r}((0,n(76240).Record)({type:"TOKEN",mutability:"IMMUTABLE",data:Object}));e.exports=r},47601:function(e){"use strict";e.exports={getRemovalRange:function(e,t,n,r,i){var o=n.split(" ");o=o.map((function(e,t){if("forward"===i){if(t>0)return" "+e}else if(t<o.length-1)return e+" ";return e}));for(var a,s=r,u=null,l=null,c=0;c<o.length;c++){if(e<(a=s+o[c].length)&&s<t)null!==u||(u=s),l=a;else if(null!==u)break;s=a}var f=r+n.length,h=u===r,d=l===f;return(!h&&d||h&&!d)&&("forward"===i?l!==f&&l++:u!==r&&u--),{start:u,end:l}}}},67946:function(e){"use strict";e.exports={logBlockedSelectionEvent:function(){return null},logSelectionStateFailure:function(){return null}}},82362:function(e,t,n){"use strict";var r=n(36148),i=n(2920),o=n(92209),a=n(86103),s=n(60551),u=n(76240),l=n(92845),c=n(34955),f=n(9001),h=n(28325),d=n(45885),p=n(1194),v=n(94397),m=u.OrderedSet,g={replaceText:function(e,t,n,i,o){var a=d(e,t),s=p(a,t),u=r.create({style:i||m(),entity:o||null});return c(s,s.getSelectionAfter(),n,u)},insertText:function(e,t,n,r,i){return t.isCollapsed()||f(!1),g.replaceText(e,t,n,r,i)},moveText:function(e,t,n){var r=s(e,t),i=g.removeRange(e,t,"backward");return g.replaceWithFragment(i,n,r)},replaceWithFragment:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"REPLACE_WITH_NEW_DATA",i=d(e,t),o=p(i,t);return l(o,o.getSelectionAfter(),n,r)},removeRange:function(e,t,n){var r,i,o,s;t.getIsBackward()&&(t=t.merge({anchorKey:t.getFocusKey(),anchorOffset:t.getFocusOffset(),focusKey:t.getAnchorKey(),focusOffset:t.getAnchorOffset(),isBackward:!1})),r=t.getAnchorKey(),i=t.getFocusKey(),o=e.getBlockForKey(r),s=e.getBlockForKey(i);var u=t.getStartOffset(),l=t.getEndOffset(),c=o.getEntityAt(u),f=s.getEntityAt(l-1);if(r===i&&c&&c===f){var h=a(e.getEntityMap(),o,s,t,n);return p(e,h)}var v=d(e,t);return p(v,t)},splitBlock:function(e,t){var n=d(e,t),r=p(n,t);return v(r,r.getSelectionAfter())},applyInlineStyle:function(e,t,n){return i.add(e,t,n)},removeInlineStyle:function(e,t,n){return i.remove(e,t,n)},setBlockType:function(e,t,n){return h(e,t,(function(e){return e.merge({type:n,depth:0})}))},setBlockData:function(e,t,n){return h(e,t,(function(e){return e.merge({data:n})}))},mergeBlockData:function(e,t,n){return h(e,t,(function(e){return e.merge({data:e.getData().merge(n)})}))},applyEntity:function(e,t,n){var r=d(e,t);return o(r,t,n)}};e.exports=g},15614:function(e){"use strict";var t="-",n={encode:function(e,n,r){return e+t+n+t+r},decode:function(e){var n=e.split(t).reverse(),r=n[0],i=n[1];return{blockKey:n.slice(2).reverse().join(t),decoratorKey:parseInt(i,10),leafKey:parseInt(r,10)}}};e.exports=n},80747:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(18638),o=n(33878),a=n(39479),s=n(8385),u=n(33865),l=n(36872),c=n(76240),f=n(76182),h=c.List,d=c.Repeat,p=l("draft_tree_data_support"),v=p?o:i,m={processHTML:function(e,t){return a(e,u,t)},processText:function(e,t,n){return e.reduce((function(e,i,o){i=f(i);var a=s(),u={key:a,type:n,text:i,characterList:h(d(t,i.length))};if(p&&0!==o){var l=o-1;u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}({},u,{prevSibling:(e[l]=e[l].merge({nextSibling:a})).getKey()})}return e.push(new v(u)),e}),[])}};e.exports=m},82198:function(e,t,n){"use strict";var r="\\s|(?![_])"+n(50488).getPunctuation(),i=new RegExp("^(?:"+r+")*(?:"+"['\u2018\u2019]|(?!"+r+").)*(?:(?!"+r+").)"),o=new RegExp("(?:(?!"+r+").)(?:"+"['\u2018\u2019]|(?!"+r+").)*(?:"+r+")*$");function a(e,t){var n=t?o.exec(e):i.exec(e);return n?n[0]:e}var s={getBackward:function(e){return a(e,!0)},getForward:function(e){return a(e,!1)}};e.exports=s},67529:function(e){"use strict";var t={stringify:function(e){return"_"+String(e)},unstringify:function(e){return e.slice(1)}};e.exports=t},91075:function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(8385),a=n(9001),s=function(e){if(!e||!e.type)return!1;var t=e.type;return"unordered-list-item"===t||"ordered-list-item"===t},u={fromRawTreeStateToRawState:function(e){var t=e.blocks,n=[];return Array.isArray(t)||a(!1),Array.isArray(t)&&t.length?(function(e,t){for(var n=[].concat(e).reverse();n.length;){var r=n.pop();t(r);var i=r.children;Array.isArray(i)||a(!1),n=n.concat([].concat(i.reverse()))}}(t,(function(e){var t=r({},e);s(e)&&(t.depth=t.depth||0,function(e){Array.isArray(e.children)&&(e.children=e.children.map((function(t){return t.type===e.type?r({},t,{depth:(e.depth||0)+1}):t})))}(e),null!=e.children&&e.children.length>0)||(delete t.children,n.push(t))})),e.blocks=n,r({},e,{blocks:n})):e},fromRawStateToRawTreeState:function(e){var t=[],n=[];return e.blocks.forEach((function(e){var i=s(e),a=e.depth||0,u=r({},e,{children:[]});if(i){var l=n[0];if(null==l&&0===a)t.push(u);else if(null==l||l.depth<a-1){var c={key:o(),text:"",depth:a-1,type:e.type,children:[],entityRanges:[],inlineStyleRanges:[]};n.unshift(c),1===a?t.push(c):null!=l&&l.children.push(c),c.children.push(u)}else if(l.depth===a-1)l.children.push(u);else{for(;null!=l&&l.depth>=a;)n.shift(),l=n[0];a>0?l.children.push(u):t.push(u)}}else t.push(u)})),r({},e,{blocks:t})}};e.exports=u},31841:function(e,t,n){"use strict";n(96068);e.exports={isValidBlock:function(e,t){var n=e.getKey(),r=e.getParentKey();if(null!=r&&!t.get(r).getChildKeys().includes(n))return!1;if(!e.getChildKeys().map((function(e){return t.get(e)})).every((function(e){return e.getParentKey()===n})))return!1;var i=e.getPrevSiblingKey();if(null!=i&&t.get(i).getNextSiblingKey()!==n)return!1;var o=e.getNextSiblingKey();if(null!=o&&t.get(o).getPrevSiblingKey()!==n)return!1;return(null===o||null===i||i!==o)&&!(""!=e.text&&e.getChildKeys().size>0)},isConnectedTree:function(e){var t=e.toArray().filter((function(e){return null==e.getParentKey()&&null==e.getPrevSiblingKey()}));if(1!==t.length)return!1;for(var n=0,r=t.shift().getKey(),i=[];null!=r;){var o=e.get(r),a=o.getChildKeys(),s=o.getNextSiblingKey();if(a.size>0){null!=s&&i.unshift(s);var u=a.map((function(t){return e.get(t)})).find((function(e){return null==e.getPrevSiblingKey()}));if(null==u)return!1;r=u.getKey()}else r=null!=o.getNextSiblingKey()?o.getNextSiblingKey():i.shift();n++}return n===e.size},isValidTree:function(e){var t=this;return!!e.toArray().every((function(n){return t.isValidBlock(n,e)}))&&this.isConnectedTree(e)}}},75347:function(e,t,n){"use strict";var r,i=n(56530),o=n(76240),a=n(59224),s=o.OrderedMap,u={getDirectionMap:function(e,t){r?r.reset():r=new i;var n=e.getBlockMap(),u=n.valueSeq().map((function(e){return a(r).getDirection(e.getText())})),l=s(n.keySeq().zip(u));return null!=t&&o.is(t,l)?t:l}};e.exports=u},94705:function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(34362),a=n(98522),s=n(75347),u=n(25232),l=n(76240),c=l.OrderedSet,f=l.Record,h=l.Stack,d=l.OrderedMap,p=l.List,v=f({allowUndo:!0,currentContent:null,decorator:null,directionMap:null,forceSelection:!1,inCompositionMode:!1,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:h(),selection:null,treeMap:null,undoStack:h()}),m=function(){t.createEmpty=function(e){return this.createWithText("",e)},t.createWithText=function(e,n){return t.createWithContent(a.createFromText(e),n)},t.createWithContent=function(e,n){if(0===e.getBlockMap().count())return t.createEmpty(n);var r=e.getBlockMap().first().getKey();return t.create({currentContent:e,undoStack:h(),redoStack:h(),decorator:n||null,selection:u.createEmpty(r)})},t.create=function(e){var n=e.currentContent,i=r({},e,{treeMap:y(n,e.decorator),directionMap:s.getDirectionMap(n)});return new t(new v(i))},t.fromJS=function(e){return new t(new v(r({},e,{directionMap:null!=e.directionMap?d(e.directionMap):e.directionMap,inlineStyleOverride:null!=e.inlineStyleOverride?c(e.inlineStyleOverride):e.inlineStyleOverride,nativelyRenderedContent:null!=e.nativelyRenderedContent?a.fromJS(e.nativelyRenderedContent):e.nativelyRenderedContent,redoStack:null!=e.redoStack?h(e.redoStack.map((function(e){return a.fromJS(e)}))):e.redoStack,selection:null!=e.selection?new u(e.selection):e.selection,treeMap:null!=e.treeMap?d(e.treeMap).map((function(e){return p(e).map((function(e){return o.fromJS(e)}))})):e.treeMap,undoStack:null!=e.undoStack?h(e.undoStack.map((function(e){return a.fromJS(e)}))):e.undoStack,currentContent:a.fromJS(e.currentContent)})))},t.set=function(e,n){return new t(e.getImmutable().withMutations((function(t){var r=t.get("decorator"),i=r;null===n.decorator?i=null:n.decorator&&(i=n.decorator);var a=n.currentContent||e.getCurrentContent();if(i!==r){var s,u=t.get("treeMap");return s=i&&r?function(e,t,n,r,i){return n.merge(t.toSeq().filter((function(t){return r.getDecorations(t,e)!==i.getDecorations(t,e)})).map((function(t){return o.generate(e,t,r)})))}(a,a.getBlockMap(),u,i,r):y(a,i),void t.merge({decorator:i,treeMap:s,nativelyRenderedContent:null})}a!==e.getCurrentContent()&&t.set("treeMap",function(e,t,n,r){var i=e.getCurrentContent().set("entityMap",n),a=i.getBlockMap();return e.getImmutable().get("treeMap").merge(t.toSeq().filter((function(e,t){return e!==a.get(t)})).map((function(e){return o.generate(i,e,r)})))}(e,a.getBlockMap(),a.getEntityMap(),i)),t.merge(n)})))};var e=t.prototype;function t(e){i(this,"_immutable",void 0),this._immutable=e}return e.toJS=function(){return this.getImmutable().toJS()},e.getAllowUndo=function(){return this.getImmutable().get("allowUndo")},e.getCurrentContent=function(){return this.getImmutable().get("currentContent")},e.getUndoStack=function(){return this.getImmutable().get("undoStack")},e.getRedoStack=function(){return this.getImmutable().get("redoStack")},e.getSelection=function(){return this.getImmutable().get("selection")},e.getDecorator=function(){return this.getImmutable().get("decorator")},e.isInCompositionMode=function(){return this.getImmutable().get("inCompositionMode")},e.mustForceSelection=function(){return this.getImmutable().get("forceSelection")},e.getNativelyRenderedContent=function(){return this.getImmutable().get("nativelyRenderedContent")},e.getLastChangeType=function(){return this.getImmutable().get("lastChangeType")},e.getInlineStyleOverride=function(){return this.getImmutable().get("inlineStyleOverride")},t.setInlineStyleOverride=function(e,n){return t.set(e,{inlineStyleOverride:n})},e.getCurrentInlineStyle=function(){var e=this.getInlineStyleOverride();if(null!=e)return e;var t=this.getCurrentContent(),n=this.getSelection();return n.isCollapsed()?function(e,t){var n=t.getStartKey(),r=t.getStartOffset(),i=e.getBlockForKey(n);if(r>0)return i.getInlineStyleAt(r-1);if(i.getLength())return i.getInlineStyleAt(0);return x(e,n)}(t,n):function(e,t){var n=t.getStartKey(),r=t.getStartOffset(),i=e.getBlockForKey(n);if(r<i.getLength())return i.getInlineStyleAt(r);if(r>0)return i.getInlineStyleAt(r-1);return x(e,n)}(t,n)},e.getBlockTree=function(e){return this.getImmutable().getIn(["treeMap",e])},e.isSelectionAtStartOfContent=function(){var e=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(e,0,0)},e.isSelectionAtEndOfContent=function(){var e=this.getCurrentContent().getBlockMap().last(),t=e.getLength();return this.getSelection().hasEdgeWithin(e.getKey(),t,t)},e.getDirectionMap=function(){return this.getImmutable().get("directionMap")},t.acceptSelection=function(e,t){return g(e,t,!1)},t.forceSelection=function(e,t){return t.getHasFocus()||(t=t.set("hasFocus",!0)),g(e,t,!0)},t.moveSelectionToEnd=function(e){var n=e.getCurrentContent().getLastBlock(),r=n.getKey(),i=n.getLength();return t.acceptSelection(e,new u({anchorKey:r,anchorOffset:i,focusKey:r,focusOffset:i,isBackward:!1}))},t.moveFocusToEnd=function(e){var n=t.moveSelectionToEnd(e);return t.forceSelection(n,n.getSelection())},t.push=function(e,n,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.getCurrentContent()===n)return e;var o=s.getDirectionMap(n,e.getDirectionMap());if(!e.getAllowUndo())return t.set(e,{currentContent:n,directionMap:o,lastChangeType:r,selection:n.getSelectionAfter(),forceSelection:i,inlineStyleOverride:null});var a=e.getSelection(),u=e.getCurrentContent(),l=e.getUndoStack(),c=n;a!==u.getSelectionAfter()||b(e,r)?(l=l.push(u),c=c.set("selectionBefore",a)):"insert-characters"!==r&&"backspace-character"!==r&&"delete-character"!==r||(c=c.set("selectionBefore",u.getSelectionBefore()));var f=e.getInlineStyleOverride(),d=["adjust-depth","change-block-type","split-block"];-1===d.indexOf(r)&&(f=null);var p={currentContent:c,directionMap:o,undoStack:l,redoStack:h(),lastChangeType:r,selection:n.getSelectionAfter(),forceSelection:i,inlineStyleOverride:f};return t.set(e,p)},t.undo=function(e){if(!e.getAllowUndo())return e;var n=e.getUndoStack(),r=n.peek();if(!r)return e;var i=e.getCurrentContent(),o=s.getDirectionMap(r,e.getDirectionMap());return t.set(e,{currentContent:r,directionMap:o,undoStack:n.shift(),redoStack:e.getRedoStack().push(i),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"undo",nativelyRenderedContent:null,selection:i.getSelectionBefore()})},t.redo=function(e){if(!e.getAllowUndo())return e;var n=e.getRedoStack(),r=n.peek();if(!r)return e;var i=e.getCurrentContent(),o=s.getDirectionMap(r,e.getDirectionMap());return t.set(e,{currentContent:r,directionMap:o,undoStack:e.getUndoStack().push(i),redoStack:n.shift(),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"redo",nativelyRenderedContent:null,selection:r.getSelectionAfter()})},e.getImmutable=function(){return this._immutable},t}();function g(e,t,n){return m.set(e,{selection:t,forceSelection:n,nativelyRenderedContent:null,inlineStyleOverride:null})}function y(e,t){return e.getBlockMap().map((function(n){return o.generate(e,n,t)})).toOrderedMap()}function b(e,t){return t!==e.getLastChangeType()||"insert-characters"!==t&&"backspace-character"!==t&&"delete-character"!==t}function x(e,t){var n=e.getBlockMap().reverse().skipUntil((function(e,n){return n===t})).skip(1).skipUntil((function(e,t){return e.getLength()})).first();return n?n.getInlineStyleAt(n.getLength()-1):c()}e.exports=m},16056:function(e,t,n){"use strict";var r=n(15963),i=n(23305),o=r.isPlatform("Mac OS X"),a={isCtrlKeyCommand:function(e){return!!e.ctrlKey&&!e.altKey},isOptionKeyCommand:function(e){return o&&e.altKey},usesMacOSHeuristics:function(){return o},hasCommandModifier:function(e){return o?!!e.metaKey&&!e.altKey:a.isCtrlKeyCommand(e)},isSoftNewlineEvent:i};e.exports=a},57495:function(){},44360:function(e,t,n){"use strict";var r=n(82362),i=n(94705),o=n(17614),a=n(59224),s={currentBlockContainsLink:function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=n.getEntityMap();return n.getBlockForKey(t.getAnchorKey()).getCharacterList().slice(t.getStartOffset(),t.getEndOffset()).some((function(e){var t=e.getEntity();return!!t&&"LINK"===r.__get(t).getType()}))},getCurrentBlockType:function(e){var t=e.getSelection();return e.getCurrentContent().getBlockForKey(t.getStartKey()).getType()},getDataObjectForLinkURL:function(e){return{url:e.toString()}},handleKeyCommand:function(e,t,n){switch(t){case"bold":return s.toggleInlineStyle(e,"BOLD");case"italic":return s.toggleInlineStyle(e,"ITALIC");case"underline":return s.toggleInlineStyle(e,"UNDERLINE");case"code":return s.toggleCode(e);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return s.onBackspace(e);case"delete":case"delete-word":case"delete-to-end-of-block":return s.onDelete(e);default:return null}},insertSoftNewline:function(e){var t=r.insertText(e.getCurrentContent(),e.getSelection(),"\n",e.getCurrentInlineStyle(),null),n=i.push(e,t,"insert-characters");return i.forceSelection(n,t.getSelectionAfter())},onBackspace:function(e){var t=e.getSelection();if(!t.isCollapsed()||t.getAnchorOffset()||t.getFocusOffset())return null;var n=e.getCurrentContent(),r=t.getStartKey(),o=n.getBlockBefore(r);if(o&&"atomic"===o.getType()){var a=n.getBlockMap().delete(o.getKey()),u=n.merge({blockMap:a,selectionAfter:t});if(u!==n)return i.push(e,u,"remove-range")}var l=s.tryToRemoveBlockStyle(e);return l?i.push(e,l,"change-block-type"):null},onDelete:function(e){var t=e.getSelection();if(!t.isCollapsed())return null;var n=e.getCurrentContent(),o=t.getStartKey(),a=n.getBlockForKey(o).getLength();if(t.getStartOffset()<a)return null;var s=n.getBlockAfter(o);if(!s||"atomic"!==s.getType())return null;var u=t.merge({focusKey:s.getKey(),focusOffset:s.getLength()}),l=r.removeRange(n,u,"forward");return l!==n?i.push(e,l,"remove-range"):null},onTab:function(e,t,n){var r=t.getSelection(),a=r.getAnchorKey();if(a!==r.getFocusKey())return t;var s=t.getCurrentContent(),u=s.getBlockForKey(a),l=u.getType();if("unordered-list-item"!==l&&"ordered-list-item"!==l)return t;e.preventDefault();var c=u.getDepth();if(!e.shiftKey&&c===n)return t;var f=o(s,r,e.shiftKey?-1:1,n);return i.push(t,f,"adjust-depth")},toggleBlockType:function(e,t){var n=e.getSelection(),o=n.getStartKey(),s=n.getEndKey(),u=e.getCurrentContent(),l=n;if(o!==s&&0===n.getEndOffset()){var c=a(u.getBlockBefore(s));s=c.getKey(),l=l.merge({anchorKey:o,anchorOffset:n.getStartOffset(),focusKey:s,focusOffset:c.getLength(),isBackward:!1})}if(u.getBlockMap().skipWhile((function(e,t){return t!==o})).reverse().skipWhile((function(e,t){return t!==s})).some((function(e){return"atomic"===e.getType()})))return e;var f=u.getBlockForKey(o).getType()===t?"unstyled":t;return i.push(e,r.setBlockType(u,l,f),"change-block-type")},toggleCode:function(e){var t=e.getSelection(),n=t.getAnchorKey(),r=t.getFocusKey();return t.isCollapsed()||n!==r?s.toggleBlockType(e,"code-block"):s.toggleInlineStyle(e,"CODE")},toggleInlineStyle:function(e,t){var n=e.getSelection(),o=e.getCurrentInlineStyle();if(n.isCollapsed())return i.setInlineStyleOverride(e,o.has(t)?o.remove(t):o.add(t));var a,s=e.getCurrentContent();return a=o.has(t)?r.removeInlineStyle(s,n,t):r.applyInlineStyle(s,n,t),i.push(e,a,"change-inline-style")},toggleLink:function(e,t,n){var o=r.applyEntity(e.getCurrentContent(),t,n);return i.push(e,o,"apply-entity")},tryToRemoveBlockStyle:function(e){var t=e.getSelection(),n=t.getAnchorOffset();if(t.isCollapsed()&&0===n){var i=t.getAnchorKey(),o=e.getCurrentContent(),a=o.getBlockForKey(i).getType(),s=o.getBlockBefore(i);if("code-block"===a&&s&&"code-block"===s.getType()&&0!==s.getLength())return null;if("unstyled"!==a)return r.setBlockType(o,t,"unstyled")}return null}};e.exports=s},87088:function(e,t,n){"use strict";var r=n(82362),i=n(94705),o=n(60551),a=n(59224),s=null,u={cut:function(e){var t=e.getCurrentContent(),n=e.getSelection(),u=null;if(n.isCollapsed()){var l=n.getAnchorKey(),c=t.getBlockForKey(l).getLength();if(c===n.getAnchorOffset()){var f=t.getKeyAfter(l);if(null==f)return e;u=n.set("focusKey",f).set("focusOffset",0)}else u=n.set("focusOffset",c)}else u=n;u=a(u),s=o(t,u);var h=r.removeRange(t,u,"forward");return h===t?e:i.push(e,h,"remove-range")},paste:function(e){if(!s)return e;var t=r.replaceWithFragment(e.getCurrentContent(),e.getSelection(),s);return i.push(e,t,"insert-fragment")}};e.exports=u},25232:function(e,t,n){"use strict";var r=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.serialize=function(){return"Anchor: "+this.getAnchorKey()+":"+this.getAnchorOffset()+", Focus: "+this.getFocusKey()+":"+this.getFocusOffset()+", Is Backward: "+String(this.getIsBackward())+", Has Focus: "+String(this.getHasFocus())},i.getAnchorKey=function(){return this.get("anchorKey")},i.getAnchorOffset=function(){return this.get("anchorOffset")},i.getFocusKey=function(){return this.get("focusKey")},i.getFocusOffset=function(){return this.get("focusOffset")},i.getIsBackward=function(){return this.get("isBackward")},i.getHasFocus=function(){return this.get("hasFocus")},i.hasEdgeWithin=function(e,t,n){var r=this.getAnchorKey(),i=this.getFocusKey();if(r===i&&r===e){var o=this.getStartOffset(),a=this.getEndOffset();return t<=o&&o<=n||t<=a&&a<=n}if(e!==r&&e!==i)return!1;var s=e===r?this.getAnchorOffset():this.getFocusOffset();return t<=s&&n>=s},i.isCollapsed=function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset()},i.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey()},i.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset()},i.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey()},i.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset()},r.createEmpty=function(e){return new r({anchorKey:e,anchorOffset:0,focusKey:e,focusOffset:0,isBackward:!1,hasFocus:!1})},r}((0,n(76240).Record)({anchorKey:"",anchorOffset:0,focusKey:"",focusOffset:0,isBackward:!1,hasFocus:!1}));e.exports=r},17614:function(e){"use strict";e.exports=function(e,t,n,r){var i=t.getStartKey(),o=t.getEndKey(),a=e.getBlockMap(),s=a.toSeq().skipUntil((function(e,t){return t===i})).takeUntil((function(e,t){return t===o})).concat([[o,a.get(o)]]).map((function(e){var t=e.getDepth()+n;return t=Math.max(0,Math.min(t,r)),e.set("depth",t)}));return a=a.merge(s),e.merge({blockMap:a,selectionBefore:t,selectionAfter:t})}},2388:function(e,t,n){"use strict";var r=n(36148);e.exports=function(e,t,n,i){for(var o=t,a=e.getCharacterList();o<n;)a=a.set(o,r.applyEntity(a.get(o),i)),o++;return e.set("characterList",a)}},92209:function(e,t,n){"use strict";var r=n(2388),i=n(76240);e.exports=function(e,t,n){var o=e.getBlockMap(),a=t.getStartKey(),s=t.getStartOffset(),u=t.getEndKey(),l=t.getEndOffset(),c=o.skipUntil((function(e,t){return t===a})).takeUntil((function(e,t){return t===u})).toOrderedMap().merge(i.OrderedMap([[u,o.get(u)]])).map((function(e,t){var i=t===a?s:0,o=t===u?l:e.getLength();return r(e,i,o,n)}));return e.merge({blockMap:o.merge(c),selectionBefore:t,selectionAfter:t})}},999:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(18638),o=n(33878),a=n(67529),s=n(82763),u=n(55845),l=n(9001),c=function(e,t){return{key:e.getKey(),text:e.getText(),type:e.getType(),depth:e.getDepth(),inlineStyleRanges:u(e),entityRanges:s(e,t),data:e.getData().toObject()}},f=function(e,t,n,a){if(e instanceof i)n.push(c(e,t));else{e instanceof o||l(!1);var s=e.getParentKey(),u=a[e.getKey()]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}({},c(e,t),{children:[]});s?a[s].children.push(u):n.push(u)}};e.exports=function(e){var t={entityMap:{},blocks:[]};return t=function(e,t){var n=t.entityMap,r=[],i={},o={},s=0;return e.getBlockMap().forEach((function(e){e.findEntityRanges((function(e){return null!==e.getEntity()}),(function(t){var r=e.getEntityAt(t),i=a.stringify(r);o[i]||(o[i]=r,n[i]="".concat(s),s++)})),f(e,n,r,i)})),{blocks:r,entityMap:n}}(e,t),t=function(e,t){var n=t.blocks,r=t.entityMap,i={};return Object.keys(r).forEach((function(t,n){var r=e.getEntity(a.unstringify(t));i[n]={type:r.getType(),mutability:r.getMutability(),data:r.getData()}})),{blocks:n,entityMap:i}}(e,t),t}},39479:function(e,t,n){"use strict";var r;function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(36148),s=n(18638),u=n(33878),l=n(11792),c=n(5693),f=n(2680),h=n(24227),d=n(8385),p=n(33865),v=n(36872),m=n(76240),g=m.List,y=m.Map,b=m.OrderedSet,x=n(87810),_=n(38603),w=n(41923),S=n(44893),E=v("draft_tree_data_support"),k=new RegExp("\r","g"),O=new RegExp("\n","g"),A=new RegExp("^\n","g"),C=new RegExp("&nbsp;","g"),M=new RegExp("&#13;?","g"),T=new RegExp("&#8203;?","g"),P=["bold","bolder","500","600","700","800","900"],R=["light","lighter","normal","100","200","300","400"],I=["className","href","rel","target","title"],L=["alt","className","height","src","width"],N=(o(r={},h("public/DraftStyleDefault/depth0"),0),o(r,h("public/DraftStyleDefault/depth1"),1),o(r,h("public/DraftStyleDefault/depth2"),2),o(r,h("public/DraftStyleDefault/depth3"),3),o(r,h("public/DraftStyleDefault/depth4"),4),r),j=y({b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE",mark:"HIGHLIGHT"}),D=function(e){var t={};return e.mapKeys((function(e,n){var r=[n.element];void 0!==n.aliasedElements&&r.push.apply(r,n.aliasedElements),r.forEach((function(n){void 0===t[n]?t[n]=e:"string"===typeof t[n]?t[n]=[t[n],e]:t[n].push(e)}))})),y(t)},B=function(e){if(w(e)&&e.style.fontFamily.includes("monospace"))return"CODE";return null},z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object.keys(N).some((function(n){e.classList.contains(n)&&(t=N[n])})),t},F=function(e){if(!x(e))return!1;var t=e;if(!t.href||"http:"!==t.protocol&&"https:"!==t.protocol&&"mailto:"!==t.protocol&&"tel:"!==t.protocol)return!1;try{new f(t.href);return!0}catch(n){return!1}},V=function(e){if(!S(e))return!1;var t=e;return!(!t.attributes.getNamedItem("src")||!t.attributes.getNamedItem("src").value)},U=function(e,t){if(!w(e))return t;var n=e,r=n.style.fontWeight,i=n.style.fontStyle,o=n.style.textDecoration;return t.withMutations((function(e){P.indexOf(r)>=0?e.add("BOLD"):R.indexOf(r)>=0&&e.remove("BOLD"),"italic"===i?e.add("ITALIC"):"normal"===i&&e.remove("ITALIC"),"underline"===o&&e.add("UNDERLINE"),"line-through"===o&&e.add("STRIKETHROUGH"),"none"===o&&(e.remove("UNDERLINE"),e.remove("STRIKETHROUGH"))}))},Z=function(e){return"ul"===e||"ol"===e},H=function(){function e(e,t){o(this,"characterList",g()),o(this,"currentBlockType","unstyled"),o(this,"currentDepth",0),o(this,"currentEntity",null),o(this,"currentText",""),o(this,"wrapper",null),o(this,"blockConfigs",[]),o(this,"contentBlocks",[]),o(this,"entityMap",c),o(this,"blockTypeMap",void 0),o(this,"disambiguate",void 0),this.clear(),this.blockTypeMap=e,this.disambiguate=t}var t=e.prototype;return t.clear=function(){this.characterList=g(),this.blockConfigs=[],this.currentBlockType="unstyled",this.currentDepth=0,this.currentEntity=null,this.currentText="",this.entityMap=c,this.wrapper=null,this.contentBlocks=[]},t.addDOMNode=function(e){var t;return this.contentBlocks=[],this.currentDepth=0,(t=this.blockConfigs).push.apply(t,this._toBlockConfigs([e],b())),this._trimCurrentText(),""!==this.currentText&&this.blockConfigs.push(this._makeBlockConfig()),this},t.getContentBlocks=function(){return 0===this.contentBlocks.length&&(E?this._toContentBlocks(this.blockConfigs):this._toFlatContentBlocks(this.blockConfigs)),{contentBlocks:this.contentBlocks,entityMap:this.entityMap}},t._makeBlockConfig=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key||d(),n=i({key:t,type:this.currentBlockType,text:this.currentText,characterList:this.characterList,depth:this.currentDepth,parent:null,children:g(),prevSibling:null,nextSibling:null,childConfigs:[]},e);return this.characterList=g(),this.currentBlockType="unstyled",this.currentText="",n},t._toBlockConfigs=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=i.nodeName.toLowerCase();if("body"===o||Z(o)){this._trimCurrentText(),""!==this.currentText&&n.push(this._makeBlockConfig());var a=this.currentDepth,s=this.wrapper;Z(o)&&(this.wrapper=o,Z(s)&&this.currentDepth++),n.push.apply(n,this._toBlockConfigs(Array.from(i.childNodes),t)),this.currentDepth=a,this.wrapper=s}else{var u=this.blockTypeMap.get(o);if(void 0===u)if("#text"!==o)if("br"!==o)if(V(i))this._addImgNode(i,t);else if(F(i))this._addAnchorNode(i,n,t);else{var l=t;j.has(o)&&(l=l.add(j.get(o))),l=U(i,l);var c=B(i);null!=c&&(l=l.add(c)),n.push.apply(n,this._toBlockConfigs(Array.from(i.childNodes),l))}else this._addBreakNode(i,t);else this._addTextNode(i,t);else{this._trimCurrentText(),""!==this.currentText&&n.push(this._makeBlockConfig());var f=this.currentDepth,h=this.wrapper;if(this.wrapper="pre"===o?"pre":this.wrapper,"string"!==typeof u&&(u=this.disambiguate(o,this.wrapper)||u[0]||"unstyled"),!E&&w(i)&&("unordered-list-item"===u||"ordered-list-item"===u)){var p=i;this.currentDepth=z(p,this.currentDepth)}var v=d(),m=this._toBlockConfigs(Array.from(i.childNodes),t);this._trimCurrentText(),n.push(this._makeBlockConfig({key:v,childConfigs:m,type:u})),this.currentDepth=f,this.wrapper=h}}}return n},t._appendText=function(e,t){var n;this.currentText+=e;var r=a.create({style:t,entity:this.currentEntity});this.characterList=(n=this.characterList).push.apply(n,Array(e.length).fill(r))},t._trimCurrentText=function(){var e=this.currentText.length,t=e-this.currentText.trimLeft().length,n=this.currentText.trimRight().length,r=this.characterList.findEntry((function(e){return null!==e.getEntity()}));(t=void 0!==r?Math.min(t,r[0]):t)>(n=void 0!==(r=this.characterList.reverse().findEntry((function(e){return null!==e.getEntity()})))?Math.max(n,e-r[0]):n)?(this.currentText="",this.characterList=g()):(this.currentText=this.currentText.slice(t,n),this.characterList=this.characterList.slice(t,n))},t._addTextNode=function(e,t){var n=e.textContent;""===n.trim()&&"pre"!==this.wrapper&&(n=" "),"pre"!==this.wrapper&&(n=(n=n.replace(A,"")).replace(O," ")),this._appendText(n,t)},t._addBreakNode=function(e,t){_(e)&&this._appendText("\n",t)},t._addImgNode=function(e,t){if(S(e)){var n=e,r={};L.forEach((function(e){var t=n.getAttribute(e);t&&(r[e]=t)})),this.currentEntity=this.entityMap.__create("IMAGE","IMMUTABLE",r),v("draftjs_fix_paste_for_img")?"presentation"!==n.getAttribute("role")&&this._appendText("\ud83d\udcf7",t):this._appendText("\ud83d\udcf7",t),this.currentEntity=null}},t._addAnchorNode=function(e,t,n){if(x(e)){var r=e,i={};I.forEach((function(e){var t=r.getAttribute(e);t&&(i[e]=t)})),i.url=new f(r.href).toString(),this.currentEntity=this.entityMap.__create("LINK","MUTABLE",i||{}),t.push.apply(t,this._toBlockConfigs(Array.from(e.childNodes),n)),this.currentEntity=null}},t._toContentBlocks=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.length-1,r=0;r<=n;r++){var o=e[r];o.parent=t,o.prevSibling=r>0?e[r-1].key:null,o.nextSibling=r<n?e[r+1].key:null,o.children=g(o.childConfigs.map((function(e){return e.key}))),this.contentBlocks.push(new u(i({},o))),this._toContentBlocks(o.childConfigs,o.key)}},t._hoistContainersInBlockConfigs=function(e){var t=this;return g(e).flatMap((function(e){return"unstyled"!==e.type||""!==e.text?[e]:t._hoistContainersInBlockConfigs(e.childConfigs)}))},t._toFlatContentBlocks=function(e){var t=this;this._hoistContainersInBlockConfigs(e).forEach((function(e){var n=t._extractTextFromBlockConfigs(e.childConfigs),r=n.text,o=n.characterList;t.contentBlocks.push(new s(i({},e,{text:e.text+r,characterList:e.characterList.concat(o)})))}))},t._extractTextFromBlockConfigs=function(e){for(var t=e.length-1,n="",r=g(),i=0;i<=t;i++){var o=e[i];n+=o.text,r=r.concat(o.characterList),""!==n&&"unstyled"!==o.type&&(n+="\n",r=r.push(r.last()));var a=this._extractTextFromBlockConfigs(o.childConfigs);n+=a.text,r=r.concat(a.characterList)}return{text:n,characterList:r}},e}();e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,r=t(e=e.trim().replace(k,"").replace(C," ").replace(M,"").replace(T,""));if(!r)return null;var i=D(n),o=function(e,t){return"li"===e?"ol"===t?"ordered-list-item":"unordered-list-item":null};return new H(i,o).addDOMNode(r).getContentBlocks()}},19603:function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(18638),a=n(33878),s=n(98522),u=n(5693),l=n(91075),c=(n(31841),n(25232)),f=n(51870),h=n(8733),d=n(51091),p=n(8385),v=n(36872),m=n(76240),g=n(9001),y=v("draft_tree_data_support"),b=m.List,x=m.Map,_=m.OrderedMap,w=function(e,t){var n=e.key,r=e.type,i=e.data;return{text:e.text,depth:e.depth||0,type:r||"unstyled",key:n||p(),data:x(i),characterList:S(e,t)}},S=function(e,t){var n=e.text,i=e.entityRanges,o=e.inlineStyleRanges,a=i||[];return f(d(n,o||[]),h(n,a.filter((function(e){return t.hasOwnProperty(e.key)})).map((function(e){return r({},e,{key:t[e.key]})}))))},E=function(e){return r({},e,{key:e.key||p()})},k=function(e,t,n){var i=t.map((function(e){return r({},e,{parentRef:n})}));return e.concat(i.reverse())},O=function(e,t){var n=e.blocks.find((function(e){return Array.isArray(e.children)&&e.children.length>0})),i=y&&!n?l.fromRawStateToRawTreeState(e).blocks:e.blocks;if(!y)return function(e,t){return _(e.map((function(e){var n=new o(w(e,t));return[n.getKey(),n]})))}(n?l.fromRawTreeStateToRawState(e).blocks:i,t);var s=function(e,t){return e.map(E).reduce((function(n,i,o){Array.isArray(i.children)||g(!1);var s=i.children.map(E),u=new a(r({},w(i,t),{prevSibling:0===o?null:e[o-1].key,nextSibling:o===e.length-1?null:e[o+1].key,children:b(s.map((function(e){return e.key})))}));n=n.set(u.getKey(),u);for(var l=k([],s,u);l.length>0;){var c=l.pop(),f=c.parentRef,h=f.getChildKeys(),d=h.indexOf(c.key),p=Array.isArray(c.children);if(!p){p||g(!1);break}var v=c.children.map(E),m=new a(r({},w(c,t),{parent:f.getKey(),children:b(v.map((function(e){return e.key}))),prevSibling:0===d?null:h.get(d-1),nextSibling:d===h.size-1?null:h.get(d+1)}));n=n.set(m.getKey(),m),l=k(l,v,m)}return n}),_())}(i,t);return s};e.exports=function(e){Array.isArray(e.blocks)||g(!1);var t=function(e){var t=e.entityMap,n={};return Object.keys(t).forEach((function(e){var r=t[e],i=r.type,o=r.mutability,a=r.data;n[e]=u.__create(i,o,a||{})})),n}(e),n=O(e,t),r=n.isEmpty()?new c:c.createEmpty(n.first().getKey());return new s({blockMap:n,entityMap:t,selectionBefore:r,selectionAfter:r})}},51870:function(e,t,n){"use strict";var r=n(36148),i=n(76240).List;e.exports=function(e,t){var n=e.map((function(e,n){var i=t[n];return r.create({style:e,entity:i})}));return i(n)}},8733:function(e,t,n){"use strict";var r=n(88755).substr;e.exports=function(e,t){var n=Array(e.length).fill(null);return t&&t.forEach((function(t){for(var i=r(e,0,t.offset).length,o=i+r(e,t.offset,t.length).length,a=i;a<o;a++)n[a]=t.key})),n}},51091:function(e,t,n){"use strict";var r=n(88755),i=n(76240).OrderedSet,o=r.substr,a=i();e.exports=function(e,t){var n=Array(e.length).fill(a);return t&&t.forEach((function(t){for(var r=o(e,0,t.offset).length,i=r+o(e,t.offset,t.length).length;r<i;)n[r]=n[r].add(t.style),r++})),n}},50726:function(e){"use strict";e.exports={notEmptyKey:function(e){return null!=e&&""!=e}}},56009:function(e,t,n){"use strict";var r=n(82362),i=n(94705),o=n(15963),a=n(26192),s=n(93489),u=n(56645),l=n(59224),c=n(67579),f=o.isBrowser("Firefox");function h(e,t,n,o,a){var s=r.replaceText(e.getCurrentContent(),e.getSelection(),t,n,o);return i.push(e,s,"insert-characters",a)}e.exports=function(e,t){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var n=e._latestEditorState,r=t.data;if(r)if(e.props.handleBeforeInput&&s(e.props.handleBeforeInput(r,n,t.timeStamp)))t.preventDefault();else{var o=n.getSelection(),d=o.getStartOffset(),p=o.getAnchorKey();if(!o.isCollapsed())return t.preventDefault(),void e.update(h(n,r,n.getCurrentInlineStyle(),a(n.getCurrentContent(),n.getSelection()),!0));var v,m=h(n,r,n.getCurrentInlineStyle(),a(n.getCurrentContent(),n.getSelection()),!1),g=!1;if(g||(g=u(e._latestCommittedEditorState)),!g){var y=n.getBlockTree(p),b=m.getBlockTree(p);g=y.size!==b.size||y.zip(b).some((function(e){var t=e[0],n=e[1],i=t.get("start"),o=i+(i>=d?r.length:0),a=t.get("end"),s=a+(a>=d?r.length:0),u=n.get("start"),l=n.get("end"),c=n.get("decoratorKey");return t.get("decoratorKey")!==c||t.get("leaves").size!==n.get("leaves").size||o!==u||s!==l||null!=c&&l-u!==a-i}))}if(g||(v=r,g=f&&("'"==v||"/"==v)),g||(g=l(m.getDirectionMap()).get(p)!==l(n.getDirectionMap()).get(p)),g)return t.preventDefault(),m=i.set(m,{forceSelection:!0}),void e.update(m);m=i.set(m,{nativelyRenderedContent:m.getCurrentContent()}),e._pendingStateFromBeforeInput=m,c((function(){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0)}))}}},22486:function(e,t,n){"use strict";var r=n(94705),i=n(35173),o=n(33178);e.exports=function(e,t){var n=t.currentTarget.ownerDocument;if(!Boolean(e.props.preserveSelectionOnBlur)&&o(n)===n.body){var a=n.defaultView.getSelection(),s=e.editor;1===a.rangeCount&&i(s,a.anchorNode)&&i(s,a.focusNode)&&a.removeAllRanges()}var u=e._latestEditorState,l=u.getSelection();if(l.getHasFocus()){var c=l.set("hasFocus",!1);e.props.onBlur&&e.props.onBlur(t),e.update(r.acceptSelection(u,c))}}},50634:function(e,t,n){"use strict";var r=n(94705);e.exports=function(e,t){e.setMode("composite"),e.update(r.set(e._latestEditorState,{inCompositionMode:!0})),e._onCompositionStart(t)}},44791:function(e,t,n){"use strict";var r=n(1201);e.exports=function(e,t){e._latestEditorState.getSelection().isCollapsed()?t.preventDefault():e.setClipboard(r(e._latestEditorState))}},21064:function(e,t,n){"use strict";var r=n(82362),i=n(94705),o=n(40380),a=n(1201),s=n(16818),u=n(90458);e.exports=function(e,t){var n,l=e._latestEditorState,c=l.getSelection(),f=t.target;if(c.isCollapsed())t.preventDefault();else{if(u(f)){var h=f;n=s(o.getScrollParent(h))}var d=a(l);e.setClipboard(d),e.setMode("cut"),setTimeout((function(){e.restoreEditorDOM(n),e.exitCurrentMode(),e.update(function(e){var t=r.removeRange(e.getCurrentContent(),e.getSelection(),"forward");return i.push(e,t,"remove-range")}(l))}),0)}}},77470:function(e){"use strict";e.exports=function(e,t){e.setMode("drag"),t.preventDefault()}},74263:function(e){"use strict";e.exports=function(e){e._internalDrag=!0,e.setMode("drag")}},95914:function(e,t,n){"use strict";var r=n(94705),i=n(15963);e.exports=function(e,t){var n=e._latestEditorState,o=n.getSelection();if(!o.getHasFocus()){var a=o.set("hasFocus",!0);e.props.onFocus&&e.props.onFocus(t),i.isBrowser("Chrome < 60.0.3081.0")?e.update(r.forceSelection(n,a)):e.update(r.acceptSelection(n,a))}}},45891:function(e,t,n){"use strict";var r=n(82362),i=n(15614),o=n(94705),a=n(15963),s=n(50726).notEmptyKey,u=n(52593),l=n(82411),c=n(59224),f=a.isEngine("Gecko");e.exports=function(e,t){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var n=e.editor.ownerDocument.defaultView.getSelection(),a=n.anchorNode,h=n.isCollapsed,d=(null===a||void 0===a?void 0:a.nodeType)!==Node.TEXT_NODE&&(null===a||void 0===a?void 0:a.nodeType)!==Node.ELEMENT_NODE;if(null!=a&&!d){if(a.nodeType===Node.TEXT_NODE&&(null!==a.previousSibling||null!==a.nextSibling)){var p=a.parentNode;if(null==p)return;a.nodeValue=p.textContent;for(var v=p.firstChild;null!=v;v=v.nextSibling)v!==a&&p.removeChild(v)}var m=a.textContent,g=e._latestEditorState,y=c(u(a)),b=i.decode(y),x=b.blockKey,_=b.decoratorKey,w=b.leafKey,S=g.getBlockTree(x).getIn([_,"leaves",w]),E=S.start,k=S.end,O=g.getCurrentContent(),A=O.getBlockForKey(x),C=A.getText().slice(E,k);if(m.endsWith("\n\n")&&(m=m.slice(0,-1)),m!==C){var M,T,P,R,I=g.getSelection(),L=I.merge({anchorOffset:E,focusOffset:k,isBackward:!1}),N=A.getEntityAt(E),j=s(N)?O.getEntity(N):null,D="MUTABLE"===(null!=j?j.getMutability():null),B=D?"spellcheck-change":"apply-entity",z=r.replaceText(O,L,m,A.getInlineStyleAt(E),D?A.getEntityAt(E):null);if(f)M=n.anchorOffset,T=n.focusOffset,R=(P=E+Math.min(M,T))+Math.abs(M-T),M=P,T=R;else{var F=m.length-C.length;P=I.getStartOffset(),R=I.getEndOffset(),M=h?R+F:P,T=R+F}var V=z.merge({selectionBefore:O.getSelectionAfter(),selectionAfter:I.merge({anchorOffset:M,focusOffset:T})});e.update(o.push(g,V,B))}else{var U=t.nativeEvent.inputType;if(U){var Z=function(e,t){return"deleteContentBackward"===e?l(t):t}(U,g);if(Z!==g)return e.restoreEditorDOM(),void e.update(Z)}}}}},81354:function(e,t,n){"use strict";var r=n(82362),i=n(94705),o=n(16056),a=n(78691),s=n(87088),u=n(15963),l=n(93489),c=n(85678),f=n(27294),h=n(75074),d=n(29707),p=n(66021),v=n(7114),m=n(82411),g=n(8907),y=n(11099),b=n(25702),x=o.isOptionKeyCommand,_=u.isBrowser("Chrome");e.exports=function(e,t){var n=t.which,o=e._latestEditorState;function u(n){var r=e.props[n];return!!r&&(r(t),!0)}switch(n){case a.RETURN:if(t.preventDefault(),e.props.handleReturn&&l(e.props.handleReturn(t,o)))return;break;case a.ESC:if(t.preventDefault(),u("onEscape"))return;break;case a.TAB:if(u("onTab"))return;break;case a.UP:if(u("onUpArrow"))return;break;case a.RIGHT:if(u("onRightArrow"))return;break;case a.DOWN:if(u("onDownArrow"))return;break;case a.LEFT:if(u("onLeftArrow"))return;break;case a.SPACE:_&&x(t)&&t.preventDefault()}var w=e.props.keyBindingFn(t);if(null!=w&&""!==w)if("undo"!==w){if(t.preventDefault(),!e.props.handleKeyCommand||!l(e.props.handleKeyCommand(w,o,t.timeStamp))){var S=function(e,t,n){switch(e){case"redo":return i.redo(t);case"delete":return g(t);case"delete-word":return h(t);case"backspace":return m(t);case"backspace-word":return f(t);case"backspace-to-start-of-line":return c(t,n);case"split-block":return d(t);case"transpose-characters":return y(t);case"move-selection-to-start-of-block":return v(t);case"move-selection-to-end-of-block":return p(t);case"secondary-cut":return s.cut(t);case"secondary-paste":return s.paste(t);default:return t}}(w,o,t);S!==o&&e.update(S)}}else b(t,o,e.update);else if(n===a.SPACE&&_&&x(t)){var E=r.replaceText(o.getCurrentContent(),o.getSelection(),"\xa0");e.update(i.push(o,E,"insert-characters"))}}},89072:function(e,t,n){"use strict";var r=n(47498),i=n(36148),o=n(22955),a=n(82362),s=n(80747),u=n(94705),l=n(44360),c=n(26192),f=n(57566),h=n(93489),d=n(27326);function p(e,t,n){var r=a.replaceWithFragment(e.getCurrentContent(),e.getSelection(),t);return u.push(e,r.set("entityMap",n),"insert-fragment")}e.exports=function(e,t){t.preventDefault();var n=new o(t.clipboardData);if(!n.isRichText()){var v=n.getFiles(),m=n.getText();if(v.length>0){if(e.props.handlePastedFiles&&h(e.props.handlePastedFiles(v)))return;return void f(v,(function(t){if(t=t||m){var n=e._latestEditorState,o=d(t),f=i.create({style:n.getCurrentInlineStyle(),entity:c(n.getCurrentContent(),n.getSelection())}),h=l.getCurrentBlockType(n),p=s.processText(o,f,h),v=r.createFromArray(p),g=a.replaceWithFragment(n.getCurrentContent(),n.getSelection(),v);e.update(u.push(n,g,"insert-fragment"))}}))}}var g=[],y=n.getText(),b=n.getHTML(),x=e._latestEditorState;if(e.props.formatPastedText){var _=e.props.formatPastedText(y,b);y=_.text,b=_.html}if(!e.props.handlePastedText||!h(e.props.handlePastedText(y,b,x))){if(y&&(g=d(y)),!e.props.stripPastedStyles){var w,S=e.getClipboard();if(!e.props.formatPastedText&&n.isRichText()&&S){if(-1!==(null===(w=b)||void 0===w?void 0:w.indexOf(e.getEditorKey()))||1===g.length&&1===S.size&&S.first().getText()===y)return void e.update(p(e._latestEditorState,S))}else if(S&&n.types.includes("com.apple.webarchive")&&!n.types.includes("text/html")&&function(e,t){return e.length===t.size&&t.valueSeq().every((function(t,n){return t.getText()===e[n]}))}(g,S))return void e.update(p(e._latestEditorState,S));if(b){var E=s.processHTML(b,e.props.blockRenderMap);if(E){var k=E.contentBlocks,O=E.entityMap;if(k){var A=r.createFromArray(k);return void e.update(p(e._latestEditorState,A,O))}}}e.setClipboard(null)}if(g.length){var C=i.create({style:x.getCurrentInlineStyle(),entity:c(x.getCurrentContent(),x.getSelection())}),M=l.getCurrentBlockType(x),T=s.processText(g,C,M),P=r.createFromArray(T);e.update(p(e._latestEditorState,P))}}}},35715:function(e,t,n){"use strict";var r=n(67946),i=n(94705),o=n(64112),a=n(30030);e.exports=function(e){if(e._blockSelectEvents||e._latestEditorState!==e.props.editorState){if(e._blockSelectEvents){var t=e.props.editorState.getSelection();r.logBlockedSelectionEvent({anonymizedDom:"N/A",extraParams:JSON.stringify({stacktrace:(new Error).stack}),selectionState:JSON.stringify(t.toJS())})}}else{var n=e.props.editorState,s=a(n,o(e)),u=s.selectionState;u!==n.getSelection()&&(n=s.needsRecovery?i.forceSelection(n,u):i.acceptSelection(n,u),e.update(n))}}},82763:function(e,t,n){"use strict";var r=n(67529),i=n(88755).strlen;e.exports=function(e,t){var n=[];return e.findEntityRanges((function(e){return!!e.getEntity()}),(function(o,a){var s=e.getText(),u=e.getEntityAt(o);n.push({offset:i(s.slice(0,o)),length:i(s.slice(o,a)),key:Number(t[r.stringify(u)])})})),n}},55845:function(e,t,n){"use strict";var r=n(88755),i=n(89528),o=function(e,t){return e===t},a=function(e){return!!e},s=[];e.exports=function(e){var t=e.getCharacterList().map((function(e){return e.getStyle()})).toList(),n=t.flatten().toSet().map((function(n){return function(e,t,n){var s=[],u=t.map((function(e){return e.has(n)})).toList();return i(u,o,a,(function(t,i){var o=e.getText();s.push({offset:r.strlen(o.slice(0,t)),length:r.strlen(o.slice(t,i)),style:n})})),s}(e,t,n)}));return Array.prototype.concat.apply(s,n.toJS())}},85713:function(e,t,n){"use strict";var r=n(88755),i=n(8921),o=n(579),a=n(9001);function s(e,t){for(var n=1/0,r=1/0,i=-1/0,o=-1/0,a=0;a<e.length;a++){var s=e[a];0!==s.width&&1!==s.width&&(n=Math.min(n,s.top),r=Math.min(r,s.bottom),i=Math.max(i,s.top),o=Math.max(o,s.bottom))}return i<=r&&i-n<t&&o-r<t}function u(e){switch(e.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return e.length;default:return e.childNodes.length}}e.exports=function(e){e.collapsed||a(!1);var t=(e=e.cloneRange()).startContainer;1!==t.nodeType&&(t=t.parentNode);var n=function(e){var t=getComputedStyle(e),n=i(e),r=n.createElement("div");r.style.fontFamily=t.fontFamily,r.style.fontSize=t.fontSize,r.style.fontStyle=t.fontStyle,r.style.fontWeight=t.fontWeight,r.style.lineHeight=t.lineHeight,r.style.position="absolute",r.textContent="M";var o=n.body;o||a(!1),o.appendChild(r);var s=r.getBoundingClientRect();return o.removeChild(r),s.height}(t),l=e.endContainer,c=e.endOffset;for(e.setStart(e.startContainer,0);s(o(e),n)&&(l=e.startContainer,c=e.startOffset,l.parentNode||a(!1),e.setStartBefore(l),1!==l.nodeType||"inline"===getComputedStyle(l).display););for(var f=l,h=c-1;;){for(var d=f.nodeValue,p=h;p>=0;p--)if(!(null!=d&&p>0&&r.isSurrogatePair(d,p-1))){if(e.setStart(f,p),!s(o(e),n))break;l=f,c=p}if(-1===p||0===f.childNodes.length)break;h=u(f=f.childNodes[p])}return e.setStart(l,c),e}},52593:function(e,t,n){"use strict";var r=n(8921),i=n(93787);e.exports=function(e){for(var t=e;t&&t!==r(e).documentElement;){var n=i(t);if(null!=n)return n;t=t.parentNode}return null}},89528:function(e){"use strict";e.exports=function(e,t,n,r){if(e.size){var i=0;e.reduce((function(e,o,a){return t(e,o)||(n(e)&&r(i,a),i=a),o})),n(e.last())&&r(i,e.count())}}},8385:function(e){"use strict";var t={},n=Math.pow(2,24);e.exports=function(){for(var e;void 0===e||t.hasOwnProperty(e)||!isNaN(+e);)e=Math.floor(Math.random()*n).toString(32);return t[e]=!0,e}},86103:function(e,t,n){"use strict";var r=n(47601),i=n(2628),o=n(9001);function a(e,t,n,a,s,u,l){var c=n.getStartOffset(),f=n.getEndOffset(),h=e.__get(s).getMutability(),d=l?c:f;if("MUTABLE"===h)return n;var p=i(t,s).filter((function(e){return d<=e.end&&d>=e.start}));1!=p.length&&o(!1);var v=p[0];if("IMMUTABLE"===h)return n.merge({anchorOffset:v.start,focusOffset:v.end,isBackward:!1});u||(l?f=v.end:c=v.start);var m=r.getRemovalRange(c,f,t.getText().slice(v.start,v.end),v.start,a);return n.merge({anchorOffset:m.start,focusOffset:m.end,isBackward:!1})}e.exports=function(e,t,n,r,i){var o=r.getStartOffset(),s=r.getEndOffset(),u=t.getEntityAt(o),l=n.getEntityAt(s-1);if(!u&&!l)return r;var c=r;if(u&&u===l)c=a(e,t,c,i,u,!0,!0);else if(u&&l){var f=a(e,t,c,i,u,!1,!0),h=a(e,n,c,i,l,!1,!1);c=c.merge({anchorOffset:f.getAnchorOffset(),focusOffset:h.getFocusOffset(),isBackward:!1})}else if(u){var d=a(e,t,c,i,u,!1,!0);c=c.merge({anchorOffset:d.getStartOffset(),isBackward:!1})}else if(l){var p=a(e,n,c,i,l,!1,!1);c=c.merge({focusOffset:p.getEndOffset(),isBackward:!1})}return c}},64112:function(e,t,n){"use strict";var r=n(9001),i=n(41923);e.exports=function(e){var t=e.editorContainer;return t||r(!1),i(t.firstChild)||r(!1),t.firstChild}},60551:function(e,t,n){"use strict";var r=n(39995),i=n(45885);e.exports=function(e,t){var n=t.getStartKey(),o=t.getStartOffset(),a=t.getEndKey(),s=t.getEndOffset(),u=i(e,t).getBlockMap(),l=u.keySeq(),c=l.indexOf(n),f=l.indexOf(a)+1;return r(u.slice(c,f).map((function(e,t){var r=e.getText(),i=e.getCharacterList();return n===a?e.merge({text:r.slice(o,s),characterList:i.slice(o,s)}):t===n?e.merge({text:r.slice(o),characterList:i.slice(o)}):t===a?e.merge({text:r.slice(0,s),characterList:i.slice(0,s)}):e})))}},8921:function(e){"use strict";e.exports=function(e){return e&&e.ownerDocument?e.ownerDocument:document}},59405:function(e,t,n){"use strict";var r=n(16056),i=n(78691),o=n(15963),a=o.isPlatform("Mac OS X"),s=a&&o.isBrowser("Firefox < 29"),u=r.hasCommandModifier,l=r.isCtrlKeyCommand;function c(e){return a&&e.altKey||l(e)}e.exports=function(e){switch(e.keyCode){case 66:return u(e)?"bold":null;case 68:return l(e)?"delete":null;case 72:return l(e)?"backspace":null;case 73:return u(e)?"italic":null;case 74:return u(e)?"code":null;case 75:return a&&l(e)?"secondary-cut":null;case 77:case 79:return l(e)?"split-block":null;case 84:return a&&l(e)?"transpose-characters":null;case 85:return u(e)?"underline":null;case 87:return a&&l(e)?"backspace-word":null;case 89:return l(e)?a?"secondary-paste":"redo":null;case 90:return function(e){return u(e)?e.shiftKey?"redo":"undo":null}(e)||null;case i.RETURN:return"split-block";case i.DELETE:return function(e){return!a&&e.shiftKey?null:c(e)?"delete-word":"delete"}(e);case i.BACKSPACE:return function(e){return u(e)&&a?"backspace-to-start-of-line":c(e)?"backspace-word":"backspace"}(e);case i.LEFT:return s&&u(e)?"move-selection-to-start-of-block":null;case i.RIGHT:return s&&u(e)?"move-selection-to-end-of-block":null;default:return null}}},30030:function(e,t,n){"use strict";var r=n(77443);e.exports=function(e,t){var n=t.ownerDocument.defaultView.getSelection(),i=n.anchorNode,o=n.anchorOffset,a=n.focusNode,s=n.focusOffset;return 0===n.rangeCount||null==i||null==a?{selectionState:e.getSelection().set("hasFocus",!1),needsRecovery:!1}:r(e,t,i,o,a,s)}},77443:function(e,t,n){"use strict";var r=n(52593),i=n(93787),o=n(29272),a=n(9001),s=n(15891),u=n(59224);function l(e,t,n){var o=t,l=r(o);(null!=l||e&&(e===o||e.firstChild===o)||a(!1),e===o)&&(o=o.firstChild,s(o)||a(!1),"true"!==(o=o).getAttribute("data-contents")&&a(!1),n>0&&(n=o.childNodes.length));if(0===n){var f=null;if(null!=l)f=l;else{var h=function(e){for(;e.firstChild&&(s(e.firstChild)&&"true"===e.firstChild.getAttribute("data-blocks")||i(e.firstChild));)e=e.firstChild;return e}(o);f=u(i(h))}return{key:f,offset:0}}var d=o.childNodes[n-1],p=null,v=null;if(i(d)){var m=function(e){for(;e.lastChild&&(s(e.lastChild)&&"true"===e.lastChild.getAttribute("data-blocks")||i(e.lastChild));)e=e.lastChild;return e}(d);p=u(i(m)),v=c(m)}else p=u(l),v=c(d);return{key:p,offset:v}}function c(e){var t=e.textContent;return"\n"===t?0:t.length}e.exports=function(e,t,n,i,a,s){var c=n.nodeType===Node.TEXT_NODE,f=a.nodeType===Node.TEXT_NODE;if(c&&f)return{selectionState:o(e,u(r(n)),i,u(r(a)),s),needsRecovery:!1};var h=null,d=null,p=!0;return c?(h={key:u(r(n)),offset:i},d=l(t,a,s)):f?(d={key:u(r(a)),offset:s},h=l(t,n,i)):(h=l(t,n,i),d=l(t,a,s),n===a&&i===s&&(p=!!n.firstChild&&"BR"!==n.firstChild.nodeName)),{selectionState:o(e,h.key,h.offset,d.key,d.offset),needsRecovery:p}}},26192:function(e,t,n){"use strict";var r=n(50726).notEmptyKey;function i(e,t){return r(t)&&"MUTABLE"===e.__get(t).getMutability()?t:null}e.exports=function(e,t){var n;if(t.isCollapsed()){var r=t.getAnchorKey(),o=t.getAnchorOffset();return o>0?(n=e.getBlockForKey(r).getEntityAt(o-1))!==e.getBlockForKey(r).getEntityAt(o)?null:i(e.getEntityMap(),n):null}var a=t.getStartKey(),s=t.getStartOffset(),u=e.getBlockForKey(a);return n=s===u.getLength()?null:u.getEntityAt(s),i(e.getEntityMap(),n)}},1201:function(e,t,n){"use strict";var r=n(60551);e.exports=function(e){var t=e.getSelection();return t.isCollapsed()?null:r(e.getCurrentContent(),t)}},68869:function(e,t,n){"use strict";var r=n(33878);e.exports=function(e,t){if(!(e instanceof r))return null;var n=e.getNextSiblingKey();if(n)return n;var i=e.getParentKey();if(!i)return null;for(var o=t.get(i);o&&!o.getNextSiblingKey();){var a=o.getParentKey();o=a?t.get(a):null}return o?o.getNextSiblingKey():null}},61122:function(e){"use strict";e.exports=function(e){return Object.keys(e).map((function(t){return e[t]}))}},79949:function(e,t,n){"use strict";var r=n(579);e.exports=function(e){var t=r(e),n=0,i=0,o=0,a=0;if(t.length){if(t.length>1&&0===t[0].width){var s=t[1];n=s.top,i=s.right,o=s.bottom,a=s.left}else{var u=t[0];n=u.top,i=u.right,o=u.bottom,a=u.left}for(var l=1;l<t.length;l++){var c=t[l];0!==c.height&&0!==c.width&&(n=Math.min(n,c.top),i=Math.max(i,c.right),o=Math.max(o,c.bottom),a=Math.min(a,c.left))}}return{top:n,right:i,bottom:o,left:a,width:i-a,height:o-n}}},579:function(e,t,n){"use strict";var r=n(15963),i=n(9001);var o=r.isBrowser("Chrome")?function(e){for(var t=e.cloneRange(),n=[],r=e.endContainer;null!=r;r=r.parentNode){var o=r===e.commonAncestorContainer;o?t.setStart(e.startContainer,e.startOffset):t.setStart(t.endContainer,0);var a,s=Array.from(t.getClientRects());if(n.push(s),o)return n.reverse(),(a=[]).concat.apply(a,n);t.setEndBefore(r)}i(!1)}:function(e){return Array.from(e.getClientRects())};e.exports=o},2628:function(e,t,n){"use strict";var r=n(9001);e.exports=function(e,t){var n=[];return e.findEntityRanges((function(e){return e.getEntity()===t}),(function(e,t){n.push({start:e,end:t})})),n.length||r(!1),n}},33865:function(e,t,n){"use strict";var r=n(15963),i=n(9001),o=r.isBrowser("IE <= 9");e.exports=function(e){var t,n=null;return!o&&document.implementation&&document.implementation.createHTMLDocument&&((t=document.implementation.createHTMLDocument("foo")).documentElement||i(!1),t.documentElement.innerHTML=e,n=t.getElementsByTagName("body")[0]),n}},93787:function(e,t,n){"use strict";var r=n(15891);e.exports=function e(t){if(r(t)){var n=t,i=n.getAttribute("data-offset-key");if(i)return i;for(var o=0;o<n.childNodes.length;o++){var a=e(n.childNodes[o]);if(a)return a}}return null}},57566:function(e,t,n){"use strict";var r=n(9001),i=/\.textClipping$/,o={"text/plain":!0,"text/html":!0,"text/rtf":!0};e.exports=function(e,t){var a=0,s=[];e.forEach((function(u){!function(e,t){if(!n.g.FileReader||e.type&&!(e.type in o))return void t("");if(""===e.type){var a="";return i.test(e.name)&&(a=e.name.replace(i,"")),void t(a)}var s=new FileReader;s.onload=function(){var e=s.result;"string"!==typeof e&&r(!1),t(e)},s.onerror=function(){t("")},s.readAsText(e)}(u,(function(n){a++,n&&s.push(n.slice(0,5e3)),a==e.length&&t(s.join("\r"))}))}))}},29272:function(e,t,n){"use strict";var r=n(15614),i=n(59224);e.exports=function(e,t,n,o,a){var s=i(e.getSelection());if(!t||!o)return s;var u=r.decode(t),l=u.blockKey,c=e.getBlockTree(l),f=c&&c.getIn([u.decoratorKey,"leaves",u.leafKey]),h=r.decode(o),d=h.blockKey,p=e.getBlockTree(d),v=p&&p.getIn([h.decoratorKey,"leaves",h.leafKey]);if(!f||!v)return s;var m=f.get("start"),g=v.get("start"),y=f?m+n:null,b=v?g+a:null;if(s.getAnchorKey()===l&&s.getAnchorOffset()===y&&s.getFocusKey()===d&&s.getFocusOffset()===b)return s;var x=!1;if(l===d){var _=f.get("end"),w=v.get("end");x=g===m&&w===_?a<n:g<m}else{x=e.getCurrentContent().getBlockMap().keySeq().skipUntil((function(e){return e===l||e===d})).first()===d}return s.merge({anchorKey:l,anchorOffset:y,focusKey:d,focusOffset:b,isBackward:x})}},43568:function(e,t,n){"use strict";var r=n(79949);e.exports=function(e){var t=e.getSelection();if(!t.rangeCount)return null;var n=t.getRangeAt(0),i=r(n),o=i.top,a=i.right,s=i.bottom,u=i.left;return 0===o&&0===a&&0===s&&0===u?null:i}},40719:function(e){"use strict";e.exports=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window}},36872:function(e){"use strict";e.exports=function(e){return!("undefined"===typeof window||!window.__DRAFT_GKX)&&!!window.__DRAFT_GKX[e]}},92845:function(e,t,n){"use strict";var r=n(47498),i=n(33878),o=n(76240),a=n(46310),s=n(9001),u=n(39995),l=o.List,c=function(e,t,n,r,i,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"REPLACE_WITH_NEW_DATA",u=n.get(i),l=u.getText(),c=u.getCharacterList(),f=i,h=o+r.getText().length,d=null;switch(s){case"MERGE_OLD_DATA_TO_NEW_DATA":d=r.getData().merge(u.getData());break;case"REPLACE_WITH_NEW_DATA":d=r.getData()}var p=u.getType();l&&"unstyled"===p&&(p=r.getType());var v=u.merge({text:l.slice(0,o)+r.getText()+l.slice(o),characterList:a(c,r.getCharacterList(),o),type:p,data:d});return e.merge({blockMap:n.set(i,v),selectionBefore:t,selectionAfter:t.merge({anchorKey:f,anchorOffset:h,focusKey:f,focusOffset:h,isBackward:!1})})},f=function(e,t,n,o,a,s){var u=n.first()instanceof i,c=[],f=o.size,h=n.get(a),d=o.first(),p=o.last(),v=p.getLength(),m=p.getKey(),g=u&&(!h.getChildKeys().isEmpty()||!d.getChildKeys().isEmpty());n.forEach((function(e,t){t===a?(g?c.push(e):c.push(function(e,t,n){var r=e.getText(),i=e.getCharacterList(),o=r.slice(0,t),a=i.slice(0,t),s=n.first();return e.merge({text:o+s.getText(),characterList:a.concat(s.getCharacterList()),type:o?e.getType():s.getType(),data:s.getData()})}(e,s,o)),o.slice(g?0:1,f-1).forEach((function(e){return c.push(e)})),c.push(function(e,t,n){var r=e.getText(),i=e.getCharacterList(),o=r.length,a=r.slice(t,o),s=i.slice(t,o),u=n.last();return u.merge({text:u.getText()+a,characterList:u.getCharacterList().concat(s),data:u.getData()})}(e,s,o))):c.push(e)}));var y=r.createFromArray(c);return u&&(y=function(e,t,n,r){return e.withMutations((function(t){var i=n.getKey(),o=r.getKey(),a=n.getNextSiblingKey(),s=n.getParentKey(),u=function(e,t){var n=e.getKey(),r=e,i=[];for(t.get(n)&&i.push(n);r&&r.getNextSiblingKey();){var o=r.getNextSiblingKey();if(!o)break;i.push(o),r=t.get(o)}return i}(r,e),c=u[u.length-1];if(t.get(o)?(t.setIn([i,"nextSibling"],o),t.setIn([o,"prevSibling"],i)):(t.setIn([i,"nextSibling"],r.getNextSiblingKey()),t.setIn([r.getNextSiblingKey(),"prevSibling"],i)),t.setIn([c,"nextSibling"],a),a&&t.setIn([a,"prevSibling"],c),u.forEach((function(e){return t.setIn([e,"parent"],s)})),s){var f=e.get(s).getChildKeys(),h=f.indexOf(i)+1,d=f.toArray();d.splice.apply(d,[h,0].concat(u)),t.setIn([s,"children"],l(d))}}))}(y,0,h,d)),e.merge({blockMap:y,selectionBefore:t,selectionAfter:t.merge({anchorKey:m,anchorOffset:v,focusKey:m,focusOffset:v,isBackward:!1})})};e.exports=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"REPLACE_WITH_NEW_DATA";t.isCollapsed()||s(!1);var o=e.getBlockMap(),a=u(n),l=t.getStartKey(),h=t.getStartOffset(),d=o.get(l);return d instanceof i&&(d.getChildKeys().isEmpty()||s(!1)),1===a.size?c(e,t,o,a.first(),l,h,r):f(e,t,o,a,l,h)}},46310:function(e){"use strict";e.exports=function(e,t,n){var r=e;if(n===r.count())t.forEach((function(e){r=r.push(e)}));else if(0===n)t.reverse().forEach((function(e){r=r.unshift(e)}));else{var i=r.slice(0,n),o=r.slice(n);r=i.concat(t,o).toList()}return r}},34955:function(e,t,n){"use strict";var r=n(76240),i=n(46310),o=n(9001),a=r.Repeat;e.exports=function(e,t,n,r){t.isCollapsed()||o(!1);var s=null;if(null!=n&&(s=n.length),null==s||0===s)return e;var u=e.getBlockMap(),l=t.getStartKey(),c=t.getStartOffset(),f=u.get(l),h=f.getText(),d=f.merge({text:h.slice(0,c)+n+h.slice(c,f.getLength()),characterList:i(f.getCharacterList(),a(r,s).toList(),c)}),p=c+s;return e.merge({blockMap:u.set(l,d),selectionAfter:t.merge({anchorOffset:p,focusOffset:p})})}},15891:function(e){"use strict";e.exports=function(e){return!(!e||!e.ownerDocument)&&e.nodeType===Node.ELEMENT_NODE}},93489:function(e){"use strict";e.exports=function(e){return"handled"===e||!0===e}},87810:function(e,t,n){"use strict";var r=n(15891);e.exports=function(e){return!(!e||!e.ownerDocument)&&(r(e)&&"A"===e.nodeName)}},38603:function(e,t,n){"use strict";var r=n(15891);e.exports=function(e){return!(!e||!e.ownerDocument)&&(r(e)&&"BR"===e.nodeName)}},41923:function(e){"use strict";e.exports=function(e){return!(!e||!e.ownerDocument)&&(e.ownerDocument.defaultView?e instanceof e.ownerDocument.defaultView.HTMLElement:e instanceof HTMLElement)}},44893:function(e,t,n){"use strict";var r=n(15891);e.exports=function(e){return!(!e||!e.ownerDocument)&&(r(e)&&"IMG"===e.nodeName)}},90458:function(e){"use strict";e.exports=function(e){if(!e||!("ownerDocument"in e))return!1;if("ownerDocument"in e){var t=e;if(!t.ownerDocument.defaultView)return t instanceof Node;if(t instanceof t.ownerDocument.defaultView.Node)return!0}return!1}},56645:function(e){"use strict";e.exports=function(e){var t=e.getSelection(),n=t.getAnchorKey(),r=e.getBlockTree(n),i=t.getStartOffset(),o=!1;return r.some((function(e){return i===e.get("start")?(o=!0,!0):i<e.get("end")&&e.get("leaves").some((function(e){var t=e.get("start");return i===t&&(o=!0,!0)}))})),o}},23305:function(e,t,n){"use strict";var r=n(78691);e.exports=function(e){return e.which===r.RETURN&&(e.getModifierState("Shift")||e.getModifierState("Alt")||e.getModifierState("Control"))}},85678:function(e,t,n){"use strict";var r=n(94705),i=n(85713),o=n(77443),a=n(81325),s=n(84566);e.exports=function(e,t){var n=s(e,(function(e){var n=e.getSelection();if(n.isCollapsed()&&0===n.getAnchorOffset())return a(e,1);var r=t.currentTarget.ownerDocument.defaultView.getSelection().getRangeAt(0);return r=i(r),o(e,null,r.endContainer,r.endOffset,r.startContainer,r.startOffset).selectionState}),"backward");return n===e.getCurrentContent()?e:r.push(e,n,"remove-range")}},27294:function(e,t,n){"use strict";var r=n(82198),i=n(94705),o=n(81325),a=n(84566);e.exports=function(e){var t=a(e,(function(e){var t=e.getSelection(),n=t.getStartOffset();if(0===n)return o(e,1);var i=t.getStartKey(),a=e.getCurrentContent().getBlockForKey(i).getText().slice(0,n),s=r.getBackward(a);return o(e,s.length||1)}),"backward");return t===e.getCurrentContent()?e:i.push(e,t,"remove-range")}},75074:function(e,t,n){"use strict";var r=n(82198),i=n(94705),o=n(9886),a=n(84566);e.exports=function(e){var t=a(e,(function(e){var t=e.getSelection(),n=t.getStartOffset(),i=t.getStartKey(),a=e.getCurrentContent().getBlockForKey(i).getText().slice(n),s=r.getForward(a);return o(e,s.length||1)}),"forward");return t===e.getCurrentContent()?e:i.push(e,t,"remove-range")}},29707:function(e,t,n){"use strict";var r=n(82362),i=n(94705);e.exports=function(e){var t=r.splitBlock(e.getCurrentContent(),e.getSelection());return i.push(e,t,"split-block")}},66021:function(e,t,n){"use strict";var r=n(94705);e.exports=function(e){var t=e.getSelection(),n=t.getEndKey(),i=e.getCurrentContent().getBlockForKey(n).getLength();return r.set(e,{selection:t.merge({anchorKey:n,anchorOffset:i,focusKey:n,focusOffset:i,isBackward:!1}),forceSelection:!0})}},7114:function(e,t,n){"use strict";var r=n(94705);e.exports=function(e){var t=e.getSelection(),n=t.getStartKey();return r.set(e,{selection:t.merge({anchorKey:n,anchorOffset:0,focusKey:n,focusOffset:0,isBackward:!1}),forceSelection:!0})}},82411:function(e,t,n){"use strict";var r=n(94705),i=n(88755),o=n(81325),a=n(84566);e.exports=function(e){var t=a(e,(function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=t.getAnchorKey(),a=t.getAnchorOffset(),s=n.getBlockForKey(r).getText()[a-1];return o(e,s?i.getUTF16Length(s,0):1)}),"backward");if(t===e.getCurrentContent())return e;var n=e.getSelection();return r.push(e,t.set("selectionBefore",n),n.isCollapsed()?"backspace-character":"remove-range")}},8907:function(e,t,n){"use strict";var r=n(94705),i=n(88755),o=n(9886),a=n(84566);e.exports=function(e){var t=a(e,(function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=t.getAnchorKey(),a=t.getAnchorOffset(),s=n.getBlockForKey(r).getText()[a];return o(e,s?i.getUTF16Length(s,0):1)}),"forward");if(t===e.getCurrentContent())return e;var n=e.getSelection();return r.push(e,t.set("selectionBefore",n),n.isCollapsed()?"delete-character":"remove-range")}},11099:function(e,t,n){"use strict";var r=n(82362),i=n(94705),o=n(60551);e.exports=function(e){var t=e.getSelection();if(!t.isCollapsed())return e;var n=t.getAnchorOffset();if(0===n)return e;var a,s,u=t.getAnchorKey(),l=e.getCurrentContent(),c=l.getBlockForKey(u).getLength();if(c<=1)return e;n===c?(a=t.set("anchorOffset",n-1),s=t):s=(a=t.set("focusOffset",n+1)).set("anchorOffset",n+1);var f=o(l,a),h=r.removeRange(l,a,"backward"),d=h.getSelectionAfter(),p=d.getAnchorOffset()-1,v=d.merge({anchorOffset:p,focusOffset:p}),m=r.replaceWithFragment(h,v,f),g=i.push(e,m,"insert-fragment");return i.acceptSelection(g,s)}},25702:function(e,t,n){"use strict";var r=n(94705);e.exports=function(e,t,n){var i=r.undo(t);if("spellcheck-change"!==t.getLastChangeType())e.preventDefault(),t.getNativelyRenderedContent()?(n(r.set(t,{nativelyRenderedContent:null})),setTimeout((function(){n(i)}),0)):n(i);else{var o=i.getCurrentContent();n(r.set(i,{nativelyRenderedContent:o}))}}},28325:function(e,t,n){"use strict";var r=n(76240).Map;e.exports=function(e,t,n){var i=t.getStartKey(),o=t.getEndKey(),a=e.getBlockMap(),s=a.toSeq().skipUntil((function(e,t){return t===i})).takeUntil((function(e,t){return t===o})).concat(r([[o,a.get(o)]])).map(n);return e.merge({blockMap:a.merge(s),selectionBefore:t,selectionAfter:t})}},2845:function(e,t,n){"use strict";var r=n(33878),i=n(68869),o=n(76240),a=n(9001),s=o.OrderedMap,u=o.List,l=function(e,t,n){if(e){var r=t.get(e);r&&t.set(e,n(r))}},c=function(e,t,n,r,i){if(!i)return e;var o="after"===r,a=t.getKey(),s=n.getKey(),c=t.getParentKey(),f=t.getNextSiblingKey(),h=t.getPrevSiblingKey(),d=n.getParentKey(),p=o?n.getNextSiblingKey():s,v=o?s:n.getPrevSiblingKey();return e.withMutations((function(e){l(c,e,(function(e){var t=e.getChildKeys();return e.merge({children:t.delete(t.indexOf(a))})})),l(h,e,(function(e){return e.merge({nextSibling:f})})),l(f,e,(function(e){return e.merge({prevSibling:h})})),l(p,e,(function(e){return e.merge({prevSibling:a})})),l(v,e,(function(e){return e.merge({nextSibling:a})})),l(d,e,(function(e){var t=e.getChildKeys(),n=t.indexOf(s),r=o?n+1:0!==n?n-1:0,i=t.toArray();return i.splice(r,0,a),e.merge({children:u(i)})})),l(a,e,(function(e){return e.merge({nextSibling:p,prevSibling:v,parent:d})}))}))};e.exports=function(e,t,n,o){"replace"===o&&a(!1);var u=n.getKey(),l=t.getKey();l===u&&a(!1);var f=e.getBlockMap(),h=t instanceof r,d=[t],p=f.delete(l);h&&(d=[],p=f.withMutations((function(e){var n=t.getNextSiblingKey(),r=i(t,e);e.toSeq().skipUntil((function(e){return e.getKey()===l})).takeWhile((function(e){var t=e.getKey(),i=t===l,o=n&&t!==n,a=!n&&e.getParentKey()&&(!r||t!==r);return!!(i||o||a)})).forEach((function(t){d.push(t),e.delete(t.getKey())}))})));var v=p.toSeq().takeUntil((function(e){return e===n})),m=p.toSeq().skipUntil((function(e){return e===n})).skip(1),g=d.map((function(e){return[e.getKey(),e]})),y=s();if("before"===o){var b=e.getBlockBefore(u);b&&b.getKey()===t.getKey()&&a(!1),y=v.concat([].concat(g,[[u,n]]),m).toOrderedMap()}else if("after"===o){var x=e.getBlockAfter(u);x&&x.getKey()===l&&a(!1),y=v.concat([[u,n]].concat(g),m).toOrderedMap()}return e.merge({blockMap:c(y,t,n,o,h),selectionBefore:e.getSelectionAfter(),selectionAfter:e.getSelectionAfter().merge({anchorKey:l,focusKey:l})})}},81325:function(e,t,n){"use strict";n(96068);e.exports=function(e,t){var n=e.getSelection(),r=e.getCurrentContent(),i=n.getStartKey(),o=n.getStartOffset(),a=i,s=0;if(t>o){var u=r.getKeyBefore(i);if(null==u)a=i;else a=u,s=r.getBlockForKey(u).getText().length}else s=o-t;return n.merge({focusKey:a,focusOffset:s,isBackward:!0})}},9886:function(e,t,n){"use strict";n(96068);e.exports=function(e,t){var n,r=e.getSelection(),i=r.getStartKey(),o=r.getStartOffset(),a=e.getCurrentContent(),s=i;return t>a.getBlockForKey(i).getText().length-o?(s=a.getKeyAfter(i),n=0):n=o+t,r.merge({focusKey:s,focusOffset:n})}},39995:function(e,t,n){"use strict";var r=n(33878),i=n(8385),o=n(76240).OrderedMap;e.exports=function(e){return e.first()instanceof r?function(e){var t,n={};return o(e.withMutations((function(e){e.forEach((function(r,o){var a=r.getKey(),s=r.getNextSiblingKey(),u=r.getPrevSiblingKey(),l=r.getChildKeys(),c=r.getParentKey(),f=i();if(n[a]=f,s&&(e.get(s)?e.setIn([s,"prevSibling"],f):e.setIn([a,"nextSibling"],null)),u&&(e.get(u)?e.setIn([u,"nextSibling"],f):e.setIn([a,"prevSibling"],null)),c&&e.get(c)){var h=e.get(c).getChildKeys();e.setIn([c,"children"],h.set(h.indexOf(r.getKey()),f))}else e.setIn([a,"parent"],null),t&&(e.setIn([t.getKey(),"nextSibling"],f),e.setIn([a,"prevSibling"],n[t.getKey()])),t=e.get(a);l.forEach((function(t){e.get(t)?e.setIn([t,"parent"],f):e.setIn([a,"children"],r.getChildKeys().filter((function(e){return e!==t})))}))}))})).toArray().map((function(e){return[n[e.getKey()],e.set("key",n[e.getKey()])]})))}(e):function(e){return o(e.toArray().map((function(e){var t=i();return[t,e.set("key",t)]})))}(e)}},45885:function(e,t,n){"use strict";var r=n(36148),i=n(89528),o=n(9001);function a(e,t,n){var a=t.getCharacterList(),s=n>0?a.get(n-1):void 0,u=n<a.count()?a.get(n):void 0,l=s?s.getEntity():void 0,c=u?u.getEntity():void 0;if(c&&c===l&&"MUTABLE"!==e.__get(c).getMutability()){for(var f,h=function(e,t,n){var r;return i(e,(function(e,t){return e.getEntity()===t.getEntity()}),(function(e){return e.getEntity()===t}),(function(e,t){e<=n&&t>=n&&(r={start:e,end:t})})),"object"!==typeof r&&o(!1),r}(a,c,n),d=h.start,p=h.end;d<p;)f=a.get(d),a=a.set(d,r.applyEntity(f,null)),d++;return t.set("characterList",a)}return t}e.exports=function(e,t){var n=e.getBlockMap(),r=e.getEntityMap(),i={},o=t.getStartKey(),s=t.getStartOffset(),u=n.get(o),l=a(r,u,s);l!==u&&(i[o]=l);var c=t.getEndKey(),f=t.getEndOffset(),h=n.get(c);o===c&&(h=l);var d=a(r,h,f);return d!==h&&(i[c]=d),Object.keys(i).length?e.merge({blockMap:n.merge(i),selectionAfter:t}):e.set("selectionAfter",t)}},1194:function(e,t,n){"use strict";var r=n(33878),i=n(68869),o=n(76240),a=(o.List,o.Map),s=function(e,t,n){if(e){var r=t.get(e);r&&t.set(e,n(r))}},u=function(e,t){var n=[];if(!e)return n;for(var r=t.get(e);r&&r.getParentKey();){var i=r.getParentKey();i&&n.push(i),r=i?t.get(i):null}return n},l=function(e,t,n){if(!e)return null;for(var r=n.get(e.getKey()).getNextSiblingKey();r&&!t.get(r);)r=n.get(r).getNextSiblingKey()||null;return r},c=function(e,t,n){if(!e)return null;for(var r=n.get(e.getKey()).getPrevSiblingKey();r&&!t.get(r);)r=n.get(r).getPrevSiblingKey()||null;return r},f=function(e,t,n,r){return e.withMutations((function(o){if(s(t.getKey(),o,(function(e){return e.merge({nextSibling:l(e,o,r),prevSibling:c(e,o,r)})})),s(n.getKey(),o,(function(e){return e.merge({nextSibling:l(e,o,r),prevSibling:c(e,o,r)})})),u(t.getKey(),r).forEach((function(e){return s(e,o,(function(e){return e.merge({children:e.getChildKeys().filter((function(e){return o.get(e)})),nextSibling:l(e,o,r),prevSibling:c(e,o,r)})}))})),s(t.getNextSiblingKey(),o,(function(e){return e.merge({prevSibling:t.getPrevSiblingKey()})})),s(t.getPrevSiblingKey(),o,(function(e){return e.merge({nextSibling:l(e,o,r)})})),s(n.getNextSiblingKey(),o,(function(e){return e.merge({prevSibling:c(e,o,r)})})),s(n.getPrevSiblingKey(),o,(function(e){return e.merge({nextSibling:n.getNextSiblingKey()})})),u(n.getKey(),r).forEach((function(e){s(e,o,(function(e){return e.merge({children:e.getChildKeys().filter((function(e){return o.get(e)})),nextSibling:l(e,o,r),prevSibling:c(e,o,r)})}))})),function(e,t){var n=[];if(!e)return n;for(var r=i(e,t);r&&t.get(r);){var o=t.get(r);n.push(r),r=o.getParentKey()?i(o,t):null}return n}(n,r).forEach((function(e){return s(e,o,(function(e){return e.merge({nextSibling:l(e,o,r),prevSibling:c(e,o,r)})}))})),null==e.get(t.getKey())&&null!=e.get(n.getKey())&&n.getParentKey()===t.getKey()&&null==n.getPrevSiblingKey()){var a=t.getPrevSiblingKey();s(n.getKey(),o,(function(e){return e.merge({prevSibling:a})})),s(a,o,(function(e){return e.merge({nextSibling:n.getKey()})}));var f=a?e.get(a):null,h=f?f.getParentKey():null;if(t.getChildKeys().forEach((function(e){s(e,o,(function(e){return e.merge({parent:h})}))})),null!=h){var d=e.get(h);s(h,o,(function(e){return e.merge({children:d.getChildKeys().concat(t.getChildKeys())})}))}s(t.getChildKeys().find((function(t){return null===e.get(t).getNextSiblingKey()})),o,(function(e){return e.merge({nextSibling:t.getNextSiblingKey()})}))}}))},h=function(e,t,n){if(0===t)for(;t<n;)e=e.shift(),t++;else if(n===e.count())for(;n>t;)e=e.pop(),n--;else{var r=e.slice(0,t),i=e.slice(n);e=r.concat(i).toList()}return e};e.exports=function(e,t){if(t.isCollapsed())return e;var n,o=e.getBlockMap(),s=t.getStartKey(),l=t.getStartOffset(),c=t.getEndKey(),d=t.getEndOffset(),p=o.get(s),v=o.get(c),m=p instanceof r,g=[];if(m){var y=v.getChildKeys(),b=u(c,o);v.getNextSiblingKey()&&(g=g.concat(b)),y.isEmpty()||(g=g.concat(b.concat([c]))),g=g.concat(u(i(v,o),o))}n=p===v?h(p.getCharacterList(),l,d):p.getCharacterList().slice(0,l).concat(v.getCharacterList().slice(d));var x=p.merge({text:p.getText().slice(0,l)+v.getText().slice(d),characterList:n}),_=m&&0===l&&0===d&&v.getParentKey()===s&&null==v.getPrevSiblingKey()?a([[s,null]]):o.toSeq().skipUntil((function(e,t){return t===s})).takeUntil((function(e,t){return t===c})).filter((function(e,t){return-1===g.indexOf(t)})).concat(a([[c,null]])).map((function(e,t){return t===s?x:null})),w=o.merge(_).filter((function(e){return!!e}));return m&&p!==v&&(w=f(w,p,v,o)),e.merge({blockMap:w,selectionBefore:t,selectionAfter:t.merge({anchorKey:s,anchorOffset:l,focusKey:s,focusOffset:l,isBackward:!1})})}},84566:function(e,t,n){"use strict";var r=n(82362),i=n(36872)("draft_tree_data_support");e.exports=function(e,t,n){var o=e.getSelection(),a=e.getCurrentContent(),s=o,u=o.getAnchorKey(),l=o.getFocusKey(),c=a.getBlockForKey(u);if(i&&"forward"===n&&u!==l)return a;if(o.isCollapsed()){if("forward"===n){if(e.isSelectionAtEndOfContent())return a;if(i)if(o.getAnchorOffset()===a.getBlockForKey(u).getLength()){var f=a.getBlockForKey(c.nextSibling);if(!f||0===f.getLength())return a}}else if(e.isSelectionAtStartOfContent())return a;if((s=t(e))===o)return a}return r.removeRange(a,s,n)}},76182:function(e){"use strict";var t=new RegExp("\r","g");e.exports=function(e){return e.replace(t,"")}},54922:function(e,t,n){"use strict";var r=n(32903),i=n(67946),o=n(15963),a=n(35173),s=n(33178),u=n(8921),l=n(9001),c=n(15891),f=o.isBrowser("IE");function h(e,t){if(!e)return"[empty]";var n=d(e,t);return n.nodeType===Node.TEXT_NODE?n.textContent:(c(n)||l(!1),n.outerHTML)}function d(e,t){var n=void 0!==t?t(e):[];if(e.nodeType===Node.TEXT_NODE){var r=e.textContent.length;return u(e).createTextNode("[text "+r+(n.length?" | "+n.join(", "):"")+"]")}var i=e.cloneNode();1===i.nodeType&&n.length&&i.setAttribute("data-labels",n.join(", "));for(var o=e.childNodes,a=0;a<o.length;a++)i.appendChild(d(o[a],t));return i}function p(e,t){for(var n=e,r=n;n;){if(c(n)&&r.hasAttribute("contenteditable"))return h(n,t);r=n=n.parentNode}return"Could not find contentEditable parent of node"}function v(e){return null===e.nodeValue?e.childNodes.length:e.nodeValue.length}function m(e,t,n,r){var o=s();if(e.extend&&null!=t&&a(o,t)){n>v(t)&&i.logSelectionStateFailure({anonymizedDom:p(t),extraParams:JSON.stringify({offset:n}),selectionState:JSON.stringify(r.toJS())});var u=t===e.focusNode;try{e.rangeCount>0&&e.extend&&e.extend(t,n)}catch(c){throw i.logSelectionStateFailure({anonymizedDom:p(t,(function(t){var n=[];return t===o&&n.push("active element"),t===e.anchorNode&&n.push("selection anchor node"),t===e.focusNode&&n.push("selection focus node"),n})),extraParams:JSON.stringify({activeElementName:o?o.nodeName:null,nodeIsFocus:t===e.focusNode,nodeWasFocus:u,selectionRangeCount:e.rangeCount,selectionAnchorNodeName:e.anchorNode?e.anchorNode.nodeName:null,selectionAnchorOffset:e.anchorOffset,selectionFocusNodeName:e.focusNode?e.focusNode.nodeName:null,selectionFocusOffset:e.focusOffset,message:c?""+c:null,offset:n},null,2),selectionState:JSON.stringify(r.toJS(),null,2)}),c}}else if(t&&e.rangeCount>0){var l=e.getRangeAt(0);l.setEnd(t,n),e.addRange(l.cloneRange())}}function g(e,t,n,o){var a=u(t).createRange();if(n>v(t)&&(i.logSelectionStateFailure({anonymizedDom:p(t),extraParams:JSON.stringify({offset:n}),selectionState:JSON.stringify(o.toJS())}),r.handleExtensionCausedError()),a.setStart(t,n),f)try{e.addRange(a)}catch(s){0}else e.addRange(a)}e.exports={setDraftEditorSelection:function(e,t,n,r,i){var o=u(t);if(a(o.documentElement,t)){var s=o.defaultView.getSelection(),l=e.getAnchorKey(),c=e.getAnchorOffset(),f=e.getFocusKey(),h=e.getFocusOffset(),d=e.getIsBackward();if(!s.extend&&d){var p=l,v=c;l=f,c=h,f=p,h=v,d=!1}var y=l===n&&r<=c&&i>=c,b=f===n&&r<=h&&i>=h;if(y&&b)return s.removeAllRanges(),g(s,t,c-r,e),void m(s,t,h-r,e);if(d){if(b&&(s.removeAllRanges(),g(s,t,h-r,e)),y){var x=s.focusNode,_=s.focusOffset;s.removeAllRanges(),g(s,t,c-r,e),m(s,x,_,e)}}else y&&(s.removeAllRanges(),g(s,t,c-r,e)),b&&m(s,t,h-r,e)}},addFocusToSelection:m}},94397:function(e,t,n){"use strict";var r=n(33878),i=n(8385),o=n(76240),a=n(9001),s=n(28325),u=o.List,l=o.Map,c=function(e,t,n){if(e){var r=t.get(e);r&&t.set(e,n(r))}};e.exports=function(e,t){t.isCollapsed()||a(!1);var n=t.getAnchorKey(),o=e.getBlockMap(),f=o.get(n),h=f.getText();if(!h){var d=f.getType();if("unordered-list-item"===d||"ordered-list-item"===d)return s(e,t,(function(e){return e.merge({type:"unstyled",depth:0})}))}var p=t.getAnchorOffset(),v=f.getCharacterList(),m=i(),g=f instanceof r,y=f.merge({text:h.slice(0,p),characterList:v.slice(0,p)}),b=y.merge({key:m,text:h.slice(p),characterList:v.slice(p),data:l()}),x=o.toSeq().takeUntil((function(e){return e===f})),_=o.toSeq().skipUntil((function(e){return e===f})).rest(),w=x.concat([[n,y],[m,b]],_).toOrderedMap();return g&&(f.getChildKeys().isEmpty()||a(!1),w=function(e,t,n){return e.withMutations((function(e){var r=t.getKey(),i=n.getKey();c(t.getParentKey(),e,(function(e){var t=e.getChildKeys(),n=t.indexOf(r)+1,o=t.toArray();return o.splice(n,0,i),e.merge({children:u(o)})})),c(t.getNextSiblingKey(),e,(function(e){return e.merge({prevSibling:i})})),c(r,e,(function(e){return e.merge({nextSibling:i})})),c(i,e,(function(e){return e.merge({prevSibling:r})}))}))}(w,y,b)),e.merge({blockMap:w,selectionBefore:t,selectionAfter:t.merge({anchorKey:m,anchorOffset:0,focusKey:m,focusOffset:0,isBackward:!1})})}},27326:function(e){"use strict";var t=/\r\n?|\n/g;e.exports=function(e){return e.split(t)}},63558:function(e){"use strict";e.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}},14115:function(){"undefined"!==typeof Element&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}))},22086:function(e){"use strict";function t(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(void 0!==i&&null!==i)for(var o=Object.keys(Object(i)),a=0,s=o.length;a<s;a++){var u=o[a],l=Object.getOwnPropertyDescriptor(i,u);void 0!==l&&l.enumerable&&(n[u]=i[u])}}return n}e.exports={assign:t,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})}}},54229:function(e){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!==i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}},22955:function(e,t,n){"use strict";var r=n(49391),i=n(86412),o=n(10100),a=new RegExp("\r\n","g"),s={"text/rtf":1,"text/html":1};function u(e){if("file"==e.kind)return e.getAsFile()}var l=function(){function e(e){this.data=e,this.types=e.types?i(e.types):[]}var t=e.prototype;return t.isRichText=function(){return!(!this.getHTML()||!this.getText())||!this.isImage()&&this.types.some((function(e){return s[e]}))},t.getText=function(){var e;return this.data.getData&&(this.types.length?-1!=this.types.indexOf("text/plain")&&(e=this.data.getData("text/plain")):e=this.data.getData("Text")),e?e.replace(a,"\n"):null},t.getHTML=function(){if(this.data.getData){if(!this.types.length)return this.data.getData("Text");if(-1!=this.types.indexOf("text/html"))return this.data.getData("text/html")}},t.isLink=function(){return this.types.some((function(e){return-1!=e.indexOf("Url")||-1!=e.indexOf("text/uri-list")||e.indexOf("text/x-moz-url")}))},t.getLink=function(){return this.data.getData?-1!=this.types.indexOf("text/x-moz-url")?this.data.getData("text/x-moz-url").split("\n")[0]:-1!=this.types.indexOf("text/uri-list")?this.data.getData("text/uri-list"):this.data.getData("url"):null},t.isImage=function(){var e=this.types.some((function(e){return-1!=e.indexOf("application/x-moz-file")}));if(e)return!0;for(var t=this.getFiles(),n=0;n<t.length;n++){var i=t[n].type;if(!r.isImage(i))return!1}return!0},t.getCount=function(){return this.data.hasOwnProperty("items")?this.data.items.length:this.data.hasOwnProperty("mozItemCount")?this.data.mozItemCount:this.data.files?this.data.files.length:null},t.getFiles=function(){return this.data.items?Array.prototype.slice.call(this.data.items).map(u).filter(o.thatReturnsArgument):this.data.files?Array.prototype.slice.call(this.data.files):[]},t.hasFiles=function(){return this.getFiles().length>0},e}();e.exports=l},78691:function(e){"use strict";e.exports={BACKSPACE:8,TAB:9,RETURN:13,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188,PERIOD:190,A:65,Z:90,ZERO:48,NUMPAD_0:96,NUMPAD_9:105}},49391:function(e){"use strict";var t={isImage:function(e){return"image"===n(e)[0]},isJpeg:function(e){var r=n(e);return t.isImage(e)&&("jpeg"===r[1]||"pjpeg"===r[1])}};function n(e){return e.split("/")}e.exports=t},18061:function(e){"use strict";function t(e,t){return!!t&&(e===t.documentElement||e===t.body)}var n={getTop:function(e){var n=e.ownerDocument;return t(e,n)?n.body.scrollTop||n.documentElement.scrollTop:e.scrollTop},setTop:function(e,n){var r=e.ownerDocument;t(e,r)?r.body.scrollTop=r.documentElement.scrollTop=n:e.scrollTop=n},getLeft:function(e){var n=e.ownerDocument;return t(e,n)?n.body.scrollLeft||n.documentElement.scrollLeft:e.scrollLeft},setLeft:function(e,n){var r=e.ownerDocument;t(e,r)?r.body.scrollLeft=r.documentElement.scrollLeft=n:e.scrollLeft=n}};e.exports=n},40380:function(e,t,n){"use strict";function r(e,t){var n=i.get(e,t);return"auto"===n||"scroll"===n}var i={get:n(70376),getScrollParent:function(e){if(!e)return null;for(var t=e.ownerDocument;e&&e!==t.body;){if(r(e,"overflow")||r(e,"overflowY")||r(e,"overflowX"))return e;e=e.parentNode}return t.defaultView||t.parentWindow}};e.exports=i},50488:function(e){"use strict";e.exports={getPunctuation:function(){return"[.,+*?$|#{}()'\\^\\-\\[\\]\\\\\\/!@%\"~=<>_:;\u30fb\u3001\u3002\u3008-\u3011\u3014-\u301f\uff1a-\uff1f\uff01-\uff0f\uff3b-\uff40\uff5b-\uff65\u2e2e\u061f\u066a-\u066c\u061b\u060c\u060d\ufd3e\ufd3f\u1801\u0964\u104a\u104b\u2010-\u2027\u2030-\u205e\xa1-\xb1\xb4-\xb8\xba\xbb\xbf]"}}},2680:function(e){"use strict";var t=function(){function e(e){var t,n,r;r=void 0,(n="_uri")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this._uri=e}return e.prototype.toString=function(){return this._uri},e}();e.exports=t},49552:function(e,t,n){"use strict";var r=n(73661),i=n(9001),o="\u0590\u05be\u05c0\u05c3\u05c6\u05c8-\u05cf\u05d0-\u05ea\u05eb-\u05ef\u05f0-\u05f2\u05f3-\u05f4\u05f5-\u05ff\u07c0-\u07c9\u07ca-\u07ea\u07f4-\u07f5\u07fa\u07fb-\u07ff\u0800-\u0815\u081a\u0824\u0828\u082e-\u082f\u0830-\u083e\u083f\u0840-\u0858\u085c-\u085d\u085e\u085f-\u089f\u200f\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb37\ufb38-\ufb3c\ufb3d\ufb3e\ufb3f\ufb40-\ufb41\ufb42\ufb43-\ufb44\ufb45\ufb46-\ufb4f",a="\u0608\u060b\u060d\u061b\u061c\u061d\u061e-\u061f\u0620-\u063f\u0640\u0641-\u064a\u066d\u066e-\u066f\u0671-\u06d3\u06d4\u06d5\u06e5-\u06e6\u06ee-\u06ef\u06fa-\u06fc\u06fd-\u06fe\u06ff\u0700-\u070d\u070e\u070f\u0710\u0712-\u072f\u074b-\u074c\u074d-\u07a5\u07b1\u07b2-\u07bf\u08a0-\u08b2\u08b3-\u08e3\ufb50-\ufbb1\ufbb2-\ufbc1\ufbc2-\ufbd2\ufbd3-\ufd3d\ufd40-\ufd4f\ufd50-\ufd8f\ufd90-\ufd91\ufd92-\ufdc7\ufdc8-\ufdcf\ufdf0-\ufdfb\ufdfc\ufdfe-\ufdff\ufe70-\ufe74\ufe75\ufe76-\ufefc\ufefd-\ufefe",s=new RegExp("["+"A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u01ba\u01bb\u01bc-\u01bf\u01c0-\u01c3\u01c4-\u0293\u0294\u0295-\u02af\u02b0-\u02b8\u02bb-\u02c1\u02d0-\u02d1\u02e0-\u02e4\u02ee\u0370-\u0373\u0376-\u0377\u037a\u037b-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0482\u048a-\u052f\u0531-\u0556\u0559\u055a-\u055f\u0561-\u0587\u0589\u0903\u0904-\u0939\u093b\u093d\u093e-\u0940\u0949-\u094c\u094e-\u094f\u0950\u0958-\u0961\u0964-\u0965\u0966-\u096f\u0970\u0971\u0972-\u0980\u0982-\u0983\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09be-\u09c0\u09c7-\u09c8\u09cb-\u09cc\u09ce\u09d7\u09dc-\u09dd\u09df-\u09e1\u09e6-\u09ef\u09f0-\u09f1\u09f4-\u09f9\u09fa\u0a03\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a3e-\u0a40\u0a59-\u0a5c\u0a5e\u0a66-\u0a6f\u0a72-\u0a74\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0abe-\u0ac0\u0ac9\u0acb-\u0acc\u0ad0\u0ae0-\u0ae1\u0ae6-\u0aef\u0af0\u0b02-\u0b03\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b3e\u0b40\u0b47-\u0b48\u0b4b-\u0b4c\u0b57\u0b5c-\u0b5d\u0b5f-\u0b61\u0b66-\u0b6f\u0b70\u0b71\u0b72-\u0b77\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bbf\u0bc1-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcc\u0bd0\u0bd7\u0be6-\u0bef\u0bf0-\u0bf2\u0c01-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c41-\u0c44\u0c58-\u0c59\u0c60-\u0c61\u0c66-\u0c6f\u0c7f\u0c82-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cbe\u0cbf\u0cc0-\u0cc4\u0cc6\u0cc7-\u0cc8\u0cca-\u0ccb\u0cd5-\u0cd6\u0cde\u0ce0-\u0ce1\u0ce6-\u0cef\u0cf1-\u0cf2\u0d02-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d3e-\u0d40\u0d46-\u0d48\u0d4a-\u0d4c\u0d4e\u0d57\u0d60-\u0d61\u0d66-\u0d6f\u0d70-\u0d75\u0d79\u0d7a-\u0d7f\u0d82-\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dcf-\u0dd1\u0dd8-\u0ddf\u0de6-\u0def\u0df2-\u0df3\u0df4\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e45\u0e46\u0e4f\u0e50-\u0e59\u0e5a-\u0e5b\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f01-\u0f03\u0f04-\u0f12\u0f13\u0f14\u0f15-\u0f17\u0f1a-\u0f1f\u0f20-\u0f29\u0f2a-\u0f33\u0f34\u0f36\u0f38\u0f3e-\u0f3f\u0f40-\u0f47\u0f49-\u0f6c\u0f7f\u0f85\u0f88-\u0f8c\u0fbe-\u0fc5\u0fc7-\u0fcc\u0fce-\u0fcf\u0fd0-\u0fd4\u0fd5-\u0fd8\u0fd9-\u0fda\u1000-\u102a\u102b-\u102c\u1031\u1038\u103b-\u103c\u103f\u1040-\u1049\u104a-\u104f\u1050-\u1055\u1056-\u1057\u105a-\u105d\u1061\u1062-\u1064\u1065-\u1066\u1067-\u106d\u106e-\u1070\u1075-\u1081\u1083-\u1084\u1087-\u108c\u108e\u108f\u1090-\u1099\u109a-\u109c\u109e-\u109f\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fb\u10fc\u10fd-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1360-\u1368\u1369-\u137c\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166d-\u166e\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16eb-\u16ed\u16ee-\u16f0\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1735-\u1736\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17b6\u17be-\u17c5\u17c7-\u17c8\u17d4-\u17d6\u17d7\u17d8-\u17da\u17dc\u17e0-\u17e9\u1810-\u1819\u1820-\u1842\u1843\u1844-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1923-\u1926\u1929-\u192b\u1930-\u1931\u1933-\u1938\u1946-\u194f\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c0\u19c1-\u19c7\u19c8-\u19c9\u19d0-\u19d9\u19da\u1a00-\u1a16\u1a19-\u1a1a\u1a1e-\u1a1f\u1a20-\u1a54\u1a55\u1a57\u1a61\u1a63-\u1a64\u1a6d-\u1a72\u1a80-\u1a89\u1a90-\u1a99\u1aa0-\u1aa6\u1aa7\u1aa8-\u1aad\u1b04\u1b05-\u1b33\u1b35\u1b3b\u1b3d-\u1b41\u1b43-\u1b44\u1b45-\u1b4b\u1b50-\u1b59\u1b5a-\u1b60\u1b61-\u1b6a\u1b74-\u1b7c\u1b82\u1b83-\u1ba0\u1ba1\u1ba6-\u1ba7\u1baa\u1bae-\u1baf\u1bb0-\u1bb9\u1bba-\u1be5\u1be7\u1bea-\u1bec\u1bee\u1bf2-\u1bf3\u1bfc-\u1bff\u1c00-\u1c23\u1c24-\u1c2b\u1c34-\u1c35\u1c3b-\u1c3f\u1c40-\u1c49\u1c4d-\u1c4f\u1c50-\u1c59\u1c5a-\u1c77\u1c78-\u1c7d\u1c7e-\u1c7f\u1cc0-\u1cc7\u1cd3\u1ce1\u1ce9-\u1cec\u1cee-\u1cf1\u1cf2-\u1cf3\u1cf5-\u1cf6\u1d00-\u1d2b\u1d2c-\u1d6a\u1d6b-\u1d77\u1d78\u1d79-\u1d9a\u1d9b-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200e\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2134\u2135-\u2138\u2139\u213c-\u213f\u2145-\u2149\u214e\u214f\u2160-\u2182\u2183-\u2184\u2185-\u2188\u2336-\u237a\u2395\u249c-\u24e9\u26ac\u2800-\u28ff\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2c7b\u2c7c-\u2c7d\u2c7e-\u2ce4\u2ceb-\u2cee\u2cf2-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d70\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005\u3006\u3007\u3021-\u3029\u302e-\u302f\u3031-\u3035\u3038-\u303a\u303b\u303c\u3041-\u3096\u309d-\u309e\u309f\u30a1-\u30fa\u30fc-\u30fe\u30ff\u3105-\u312d\u3131-\u318e\u3190-\u3191\u3192-\u3195\u3196-\u319f\u31a0-\u31ba\u31f0-\u31ff\u3200-\u321c\u3220-\u3229\u322a-\u3247\u3248-\u324f\u3260-\u327b\u327f\u3280-\u3289\u328a-\u32b0\u32c0-\u32cb\u32d0-\u32fe\u3300-\u3376\u337b-\u33dd\u33e0-\u33fe\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua014\ua015\ua016-\ua48c\ua4d0-\ua4f7\ua4f8-\ua4fd\ua4fe-\ua4ff\ua500-\ua60b\ua60c\ua610-\ua61f\ua620-\ua629\ua62a-\ua62b\ua640-\ua66d\ua66e\ua680-\ua69b\ua69c-\ua69d\ua6a0-\ua6e5\ua6e6-\ua6ef\ua6f2-\ua6f7\ua722-\ua76f\ua770\ua771-\ua787\ua789-\ua78a\ua78b-\ua78e\ua790-\ua7ad\ua7b0-\ua7b1\ua7f7\ua7f8-\ua7f9\ua7fa\ua7fb-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua823-\ua824\ua827\ua830-\ua835\ua836-\ua837\ua840-\ua873\ua880-\ua881\ua882-\ua8b3\ua8b4-\ua8c3\ua8ce-\ua8cf\ua8d0-\ua8d9\ua8f2-\ua8f7\ua8f8-\ua8fa\ua8fb\ua900-\ua909\ua90a-\ua925\ua92e-\ua92f\ua930-\ua946\ua952-\ua953\ua95f\ua960-\ua97c\ua983\ua984-\ua9b2\ua9b4-\ua9b5\ua9ba-\ua9bb\ua9bd-\ua9c0\ua9c1-\ua9cd\ua9cf\ua9d0-\ua9d9\ua9de-\ua9df\ua9e0-\ua9e4\ua9e6\ua9e7-\ua9ef\ua9f0-\ua9f9\ua9fa-\ua9fe\uaa00-\uaa28\uaa2f-\uaa30\uaa33-\uaa34\uaa40-\uaa42\uaa44-\uaa4b\uaa4d\uaa50-\uaa59\uaa5c-\uaa5f\uaa60-\uaa6f\uaa70\uaa71-\uaa76\uaa77-\uaa79\uaa7a\uaa7b\uaa7d\uaa7e-\uaaaf\uaab1\uaab5-\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadc\uaadd\uaade-\uaadf\uaae0-\uaaea\uaaeb\uaaee-\uaaef\uaaf0-\uaaf1\uaaf2\uaaf3-\uaaf4\uaaf5\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5b\uab5c-\uab5f\uab64-\uab65\uabc0-\uabe2\uabe3-\uabe4\uabe6-\uabe7\uabe9-\uabea\uabeb\uabec\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\ue000-\uf8ff\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\uff21-\uff3a\uff41-\uff5a\uff66-\uff6f\uff70\uff71-\uff9d\uff9e-\uff9f\uffa0-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc"+o+a+"]"),u=new RegExp("["+o+a+"]");function l(e){var t=s.exec(e);return null==t?null:t[0]}function c(e){var t=l(e);return null==t?r.NEUTRAL:u.exec(t)?r.RTL:r.LTR}function f(e,t){if(t=t||r.NEUTRAL,!e.length)return t;var n=c(e);return n===r.NEUTRAL?t:n}function h(e,t){return t||(t=r.getGlobalDir()),r.isStrong(t)||i(!1),f(e,t)}var d={firstStrongChar:l,firstStrongCharDir:c,resolveBlockDir:f,getDirection:h,isDirectionLTR:function(e,t){return h(e,t)===r.LTR},isDirectionRTL:function(e,t){return h(e,t)===r.RTL}};e.exports=d},73661:function(e,t,n){"use strict";var r=n(9001),i="LTR",o=null;function a(e){return e===i||"RTL"===e}function s(e){return a(e)||r(!1),e===i?"ltr":"rtl"}function u(e){o=e}var l={NEUTRAL:"NEUTRAL",LTR:i,RTL:"RTL",isStrong:a,getHTMLDir:s,getHTMLDirIfDifferent:function(e,t){return a(e)||r(!1),a(t)||r(!1),e===t?null:s(e)},setGlobalDir:u,initGlobalDir:function(){u(i)},getGlobalDir:function(){return o||this.initGlobalDir(),o||r(!1),o}};e.exports=l},56530:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(49552),o=n(73661),a=n(9001),s=function(){function e(e){r(this,"_defaultDir",void 0),r(this,"_lastDir",void 0),e?o.isStrong(e)||a(!1):e=o.getGlobalDir(),this._defaultDir=e,this.reset()}var t=e.prototype;return t.reset=function(){this._lastDir=this._defaultDir},t.getDirection=function(e){return this._lastDir=i.getDirection(e,this._lastDir),this._lastDir},e}();e.exports=s},88755:function(e,t,n){"use strict";var r=n(9001),i=/[\uD800-\uDFFF]/;function o(e){return 55296<=e&&e<=57343}function a(e){return i.test(e)}function s(e,t){return 1+o(e.charCodeAt(t))}function u(e,t,n){if(t=t||0,n=void 0===n?1/0:n||0,!a(e))return e.substr(t,n);var r=e.length;if(r<=0||t>r||n<=0)return"";var i=0;if(t>0){for(;t>0&&i<r;t--)i+=s(e,i);if(i>=r)return""}else if(t<0){for(i=r;t<0&&0<i;t++)i-=s(e,i-1);i<0&&(i=0)}var o=r;if(n<r)for(o=i;n>0&&o<r;n--)o+=s(e,o);return e.substring(i,o)}var l={getCodePoints:function(e){for(var t=[],n=0;n<e.length;n+=s(e,n))t.push(e.codePointAt(n));return t},getUTF16Length:s,hasSurrogateUnit:a,isCodeUnitInSurrogateRange:o,isSurrogatePair:function(e,t){if(0<=t&&t<e.length||r(!1),t+1===e.length)return!1;var n=e.charCodeAt(t),i=e.charCodeAt(t+1);return 55296<=n&&n<=56319&&56320<=i&&i<=57343},strlen:function(e){if(!a(e))return e.length;for(var t=0,n=0;n<e.length;n+=s(e,n))t++;return t},substring:function(e,t,n){(t=t||0)<0&&(t=0),(n=void 0===n?1/0:n||0)<0&&(n=0);var r=Math.abs(n-t);return u(e,t=t<n?t:n,r)},substr:u};e.exports=l},15963:function(e,t,n){"use strict";var r=n(74917),i=n(38113),o=n(31264),a=n(1322);function s(e,t,n,r){if(e===n)return!0;if(!n.startsWith(e))return!1;var o=n.slice(e.length);return!!t&&(o=r?r(o):o,i.contains(o,t))}function u(e){return"Windows"===r.platformName?e.replace(/^\s*NT/,""):e}var l={isBrowser:function(e){return s(r.browserName,r.browserFullVersion,e)},isBrowserArchitecture:function(e){return s(r.browserArchitecture,null,e)},isDevice:function(e){return s(r.deviceName,null,e)},isEngine:function(e){return s(r.engineName,r.engineVersion,e)},isPlatform:function(e){return s(r.platformName,r.platformFullVersion,e,u)},isPlatformArchitecture:function(e){return s(r.platformArchitecture,null,e)}};e.exports=o(l,a)},74917:function(e,t,n){"use strict";var r=n(58913),i="Unknown",o={"Mac OS":"Mac OS X"};var a,s=(new r).getResult(),u=function(e){if(!e)return{major:"",minor:""};var t=e.split(".");return{major:t[0],minor:t[1]}}(s.browser.version),l={browserArchitecture:s.cpu.architecture||i,browserFullVersion:s.browser.version||i,browserMinorVersion:u.minor||i,browserName:s.browser.name||i,browserVersion:s.browser.major||i,deviceName:s.device.model||i,engineName:s.engine.name||i,engineVersion:s.engine.version||i,platformArchitecture:s.cpu.architecture||i,platformName:(a=s.os.name,o[a]||a||i),platformVersion:s.os.version||i,platformFullVersion:s.os.version||i};e.exports=l},38113:function(e,t,n){"use strict";var r=n(9001),i=/\./,o=/\|\|/,a=/\s+\-\s+/,s=/^(<=|<|=|>=|~>|~|>|)?\s*(.+)/,u=/^(\d*)(.*)/;function l(e,t){var n=e.split(o);return n.length>1?n.some((function(e){return x.contains(e,t)})):function(e,t){var n=e.split(a);if(n.length>0&&n.length<=2||r(!1),1===n.length)return c(n[0],t);var i=n[0],o=n[1];return v(i)&&v(o)||r(!1),c(">="+i,t)&&c("<="+o,t)}(e=n[0].trim(),t)}function c(e,t){if(""===(e=e.trim()))return!0;var n=t.split(i),r=d(e),o=r.modifier,a=r.rangeComponents;switch(o){case"<":return f(n,a);case"<=":return function(e,t){var n=b(e,t);return-1===n||0===n}(n,a);case">=":return h(n,a);case">":return 1===b(n,a);case"~":case"~>":return function(e,t){var n=t.slice(),r=t.slice();r.length>1&&r.pop();var i=r.length-1,o=parseInt(r[i],10);p(o)&&(r[i]=o+1+"");return h(e,n)&&f(e,r)}(n,a);default:return function(e,t){return 0===b(e,t)}(n,a)}}function f(e,t){return-1===b(e,t)}function h(e,t){var n=b(e,t);return 1===n||0===n}function d(e){var t=e.split(i),n=t[0].match(s);return n||r(!1),{modifier:n[1],rangeComponents:[n[2]].concat(t.slice(1))}}function p(e){return!isNaN(e)&&isFinite(e)}function v(e){return!d(e).modifier}function m(e,t){for(var n=e.length;n<t;n++)e[n]="0"}function g(e,t){var n=e.match(u)[1],r=t.match(u)[1],i=parseInt(n,10),o=parseInt(r,10);return p(i)&&p(o)&&i!==o?y(i,o):y(e,t)}function y(e,t){return typeof e!==typeof t&&r(!1),e>t?1:e<t?-1:0}function b(e,t){for(var n=function(e,t){m(e=e.slice(),(t=t.slice()).length);for(var n=0;n<t.length;n++){var r=t[n].match(/^[x*]$/i);if(r&&(t[n]=e[n]="0","*"===r[0]&&n===t.length-1))for(var i=n;i<e.length;i++)e[i]="0"}return m(t,e.length),[e,t]}(e,t),r=n[0],i=n[1],o=0;o<i.length;o++){var a=g(r[o],i[o]);if(a)return a}return 0}var x={contains:function(e,t){return l(e.trim(),t.trim())}};e.exports=x},96290:function(e){"use strict";var t=/-(.)/g;e.exports=function(e){return e.replace(t,(function(e,t){return t.toUpperCase()}))}},35173:function(e,t,n){"use strict";var r=n(61714);e.exports=function e(t,n){return!(!t||!n)&&(t===n||!r(t)&&(r(n)?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}},86412:function(e,t,n){"use strict";var r=n(9001);e.exports=function(e){return function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}(e)?Array.isArray(e)?e.slice():function(e){var t=e.length;if((Array.isArray(e)||"object"!==typeof e&&"function"!==typeof e)&&r(!1),"number"!==typeof t&&r(!1),0===t||t-1 in e||r(!1),"function"===typeof e.callee&&r(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(o){}for(var n=Array(t),i=0;i<t;i++)n[i]=e[i];return n}(e):[e]}},24227:function(e){"use strict";function t(e){return e.replace(/\//g,"-")}e.exports=function(e){return"object"==typeof e?Object.keys(e).filter((function(t){return e[t]})).map(t).join(" "):Array.prototype.map.call(arguments,t).join(" ")}},10100:function(e){"use strict";function t(e){return function(){return e}}var n=function(){};n.thatReturns=t,n.thatReturnsFalse=t(!1),n.thatReturnsTrue=t(!0),n.thatReturnsNull=t(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(e){return e},e.exports=n},33178:function(e){"use strict";e.exports=function(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}},69695:function(e){"use strict";var t="undefined"!==typeof navigator&&navigator.userAgent.indexOf("AppleWebKit")>-1;e.exports=function(e){return(e=e||document).scrollingElement?e.scrollingElement:t||"CSS1Compat"!==e.compatMode?e.body:e.documentElement}},78068:function(e,t,n){"use strict";var r=n(56175);e.exports=function(e){var t=r(e);return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}}},56175:function(e,t,n){"use strict";var r=n(35173);e.exports=function(e){var t=e.ownerDocument.documentElement;if(!("getBoundingClientRect"in e)||!r(t,e))return{left:0,right:0,top:0,bottom:0};var n=e.getBoundingClientRect();return{left:Math.round(n.left)-t.clientLeft,right:Math.round(n.right)-t.clientLeft,top:Math.round(n.top)-t.clientTop,bottom:Math.round(n.bottom)-t.clientTop}}},16818:function(e,t,n){"use strict";var r=n(69695),i=n(57602);e.exports=function(e){var t=r(e.ownerDocument||e.document);e.Window&&e instanceof e.Window&&(e=t);var n=i(e),o=e===t?e.ownerDocument.documentElement:e,a=e.scrollWidth-o.clientWidth,s=e.scrollHeight-o.clientHeight;return n.x=Math.max(0,Math.min(n.x,a)),n.y=Math.max(0,Math.min(n.y,s)),n}},70376:function(e,t,n){"use strict";var r=n(96290),i=n(40924);function o(e){return null==e?e:String(e)}e.exports=function(e,t){var n;if(window.getComputedStyle&&(n=window.getComputedStyle(e,null)))return o(n.getPropertyValue(i(t)));if(document.defaultView&&document.defaultView.getComputedStyle){if(n=document.defaultView.getComputedStyle(e,null))return o(n.getPropertyValue(i(t)));if("display"===t)return"none"}return e.currentStyle?o("float"===t?e.currentStyle.cssFloat||e.currentStyle.styleFloat:e.currentStyle[r(t)]):o(e.style&&e.style[r(t)])}},57602:function(e){"use strict";e.exports=function(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}},81488:function(e){"use strict";function t(){var e;return document.documentElement&&(e=document.documentElement.clientWidth),!e&&document.body&&(e=document.body.clientWidth),e||0}function n(){var e;return document.documentElement&&(e=document.documentElement.clientHeight),!e&&document.body&&(e=document.body.clientHeight),e||0}function r(){return{width:window.innerWidth||t(),height:window.innerHeight||n()}}r.withoutScrollbars=function(){return{width:t(),height:n()}},e.exports=r},40924:function(e){"use strict";var t=/([A-Z])/g;e.exports=function(e){return e.replace(t,"-$1").toLowerCase()}},9001:function(e){"use strict";var t=function(e){};e.exports=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if(t(n),!e){var a;if(void 0===n)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;(a=new Error(n.replace(/%s/g,(function(){return String(i[s++])})))).name="Invariant Violation"}throw a.framesToPop=1,a}}},64068:function(e){"use strict";e.exports=function(e){var t=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"===typeof t.Node?e instanceof t.Node:"object"===typeof e&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName))}},61714:function(e,t,n){"use strict";var r=n(64068);e.exports=function(e){return r(e)&&3==e.nodeType}},14179:function(e){"use strict";e.exports=function(e){var t=e||"",n=arguments.length;if(n>1)for(var r=1;r<n;r++){var i=arguments[r];i&&(t=(t?t+" ":"")+i)}return t}},31264:function(e){"use strict";var t=Object.prototype.hasOwnProperty;e.exports=function(e,n,r){if(!e)return null;var i={};for(var o in e)t.call(e,o)&&(i[o]=n.call(r,e[o],o,e));return i}},1322:function(e){"use strict";e.exports=function(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}},59224:function(e){"use strict";e.exports=function(e){if(null!=e)return e;throw new Error("Got unexpected null or undefined")}},67579:function(e,t,n){"use strict";n(41174),e.exports=n.g.setImmediate},96068:function(e,t,n){"use strict";var r=n(10100);e.exports=r},70387:function(e,t,n){var r,i,o;i=[],r=function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){u(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function i(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,s=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,t,n){var s=a.URL||a.webkitURL,u=document.createElement("a");t=t||e.name||"download",u.download=t,u.rel="noopener","string"==typeof e?(u.href=e,u.origin===location.origin?o(u):i(u.href)?r(e,t,n):o(u,u.target="_blank")):(u.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(u.href)}),4e4),setTimeout((function(){o(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,a){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,a),n);else if(i(e))r(e,n,a);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){o(s)}))}}:function(e,t,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,n);var o="application/octet-stream"===e.type,u=/constructor/i.test(a.HTMLElement)||a.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&u||s)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},c.readAsDataURL(e)}else{var f=a.URL||a.webkitURL,h=f.createObjectURL(e);i?i.location=h:location.href=h,i=null,setTimeout((function(){f.revokeObjectURL(h)}),4e4)}});a.saveAs=u.saveAs=u,e.exports=u},void 0===(o="function"===typeof r?r.apply(t,i):r)||(e.exports=o)},47321:function(e){var t={task:void 0,next:null},n=t,r=!1,i=void 0,o=!1;function a(){for(;t.next;){var e=(t=t.next).task;t.task=void 0;var n=t.domain;n&&(t.domain=void 0,n.enter());try{e()}catch(i){if(o)throw n&&n.exit(),setTimeout(a,0),n&&n.enter(),i;setTimeout((function(){throw i}),0)}n&&n.exit()}r=!1}if("undefined"!==typeof process&&process.nextTick)o=!0,i=function(){process.nextTick(a)};else if("function"===typeof setImmediate)i="undefined"!==typeof window?setImmediate.bind(window,a):function(){setImmediate(a)};else if("undefined"!==typeof MessageChannel){var s=new MessageChannel;s.port1.onmessage=a,i=function(){s.port2.postMessage(0)}}else i=function(){setTimeout(a,0)};e.exports=function(e){n=n.next={task:e,domain:o&&process.domain,next:null},r||(r=!0,i())}},85483:function(e,t,n){"use strict";e.exports=n(13882),n(12294),n(19873),n(4083)},13882:function(e,t,n){"use strict";var r=n(47321);function i(e,t,n,r){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.resolve=n,this.reject=r}function o(e,t,n){var r=!1;try{e((function(e){r||(r=!0,t(e))}),(function(e){r||(r=!0,n(e))}))}catch(i){if(r)return;r=!0,n(i)}}e.exports=function(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("not a function");var t=null,n=null,a=[],s=this;function u(e){null!==t?r((function(){var r=t?e.onFulfilled:e.onRejected;if(null!==r){var i;try{i=r(n)}catch(o){return void e.reject(o)}e.resolve(i)}else(t?e.resolve:e.reject)(n)})):a.push(e)}function l(e){t=!1,n=e,c()}function c(){for(var e=0,t=a.length;e<t;e++)u(a[e]);a=null}this.then=function(e,t){return new s.constructor((function(n,r){u(new i(e,t,n,r))}))},o(e,(function e(r){try{if(r===s)throw new TypeError("A promise cannot be resolved with itself.");if(r&&("object"===typeof r||"function"===typeof r)){var i=r.then;if("function"===typeof i)return void o(i.bind(r),e,l)}t=!0,n=r,c()}catch(a){l(a)}}),l)}},12294:function(e,t,n){"use strict";var r=n(13882),i=n(47321);e.exports=r,r.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,(function(e){i((function(){throw e}))}))}},19873:function(e,t,n){"use strict";var r=n(13882),i=n(47321);function o(e){this.then=function(t){return"function"!==typeof t?this:new r((function(n,r){i((function(){try{n(t(e))}catch(i){r(i)}}))}))}}e.exports=r,o.prototype=r.prototype;var a=new o(!0),s=new o(!1),u=new o(null),l=new o(void 0),c=new o(0),f=new o("");r.resolve=function(e){if(e instanceof r)return e;if(null===e)return u;if(void 0===e)return l;if(!0===e)return a;if(!1===e)return s;if(0===e)return c;if(""===e)return f;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new r(t.bind(e))}catch(n){return new r((function(e,t){t(n)}))}return new o(e)},r.all=function(e){var t=Array.prototype.slice.call(e);return new r((function(e,n){if(0===t.length)return e([]);var r=t.length;function i(o,a){try{if(a&&("object"===typeof a||"function"===typeof a)){var s=a.then;if("function"===typeof s)return void s.call(a,(function(e){i(o,e)}),n)}t[o]=a,0===--r&&e(t)}catch(u){n(u)}}for(var o=0;o<t.length;o++)i(o,t[o])}))},r.reject=function(e){return new r((function(t,n){n(e)}))},r.race=function(e){return new r((function(t,n){e.forEach((function(e){r.resolve(e).then(t,n)}))}))},r.prototype.catch=function(e){return this.then(null,e)}},4083:function(e,t,n){"use strict";var r=n(13882),i=n(47321);e.exports=r,r.denodeify=function(e,t){return t=t||1/0,function(){var n=this,i=Array.prototype.slice.call(arguments);return new r((function(r,o){for(;i.length&&i.length>t;)i.pop();i.push((function(e,t){e?o(e):r(t)}));var a=e.apply(n,i);!a||"object"!==typeof a&&"function"!==typeof a||"function"!==typeof a.then||r(a)}))}},r.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"===typeof t[t.length-1]?t.pop():null,o=this;try{return e.apply(this,arguments).nodeify(n,o)}catch(a){if(null===n||"undefined"==typeof n)return new r((function(e,t){t(a)}));i((function(){n.call(o,a)}))}}},r.prototype.nodeify=function(e,t){if("function"!=typeof e)return this;this.then((function(n){i((function(){e.call(t,null,n)}))}),(function(n){i((function(){e.call(t,n)}))}))}},93742:function(e){var t={};e.exports=t,t.createElement=function(e){return document.createElement(e)},t.createText=function(e){return document.createTextNode(e)},t.style=function(e,t){e.style.cssText=t},t.append=function(e,t){e.appendChild(t)},t.remove=function(e,t){e.removeChild(t)}},27822:function(e,t,n){var r=n(85483),i=n(93742),o=n(24561),a=function(e,t){t=t||{weight:"normal"},this.family=e,this.style=t.style||"normal",this.variant=t.variant||"normal",this.weight=t.weight||"normal",this.stretch=t.stretch||"stretch",this.featureSettings=t.featureSettings||"normal"};e.exports=a,a.HAS_WEBKIT_FALLBACK_BUG=null,a.DEFAULT_TIMEOUT=3e3,a.getUserAgent=function(){return window.navigator.userAgent},a.hasWebKitFallbackBug=function(){if(null===a.HAS_WEBKIT_FALLBACK_BUG){var e=/AppleWeb[kK]it\/([0-9]+)(?:\.([0-9]+))/.exec(a.getUserAgent());a.HAS_WEBKIT_FALLBACK_BUG=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)}return a.HAS_WEBKIT_FALLBACK_BUG},a.prototype.getStyle=function(){return"font-style:"+this.style+";font-variant:"+this.variant+";font-weight:"+this.weight+";font-stretch:"+this.stretch+";font-feature-settings:"+this.featureSettings+";-moz-font-feature-settings:"+this.featureSettings+";-webkit-font-feature-settings:"+this.featureSettings+";"},a.prototype.check=function(e,t){var n,s,u,l=e||"BESbswy",c=t||a.DEFAULT_TIMEOUT,f=this.getStyle(),h=i.createElement("div"),d=new o(l),p=new o(l),v=new o(l),m=-1,g=-1,y=-1,b=this;return d.setFont('"Times New Roman", sans-serif',f),p.setFont("serif",f),v.setFont("monospace",f),i.append(h,d.getElement()),i.append(h,p.getElement()),i.append(h,v.getElement()),i.append(document.body,h),n=d.getWidth(),s=p.getWidth(),u=v.getWidth(),new r((function(e,t){function r(){null!==h.parentNode&&i.remove(document.body,h)}function o(){-1!==m&&-1!==g&&-1!==y&&m===g&&g===y&&(a.hasWebKitFallbackBug()&&(m===n&&g===n&&y===n||m===s&&g===s&&y===s||m===u&&g===u&&y===u)||(r(),e(b)))}setTimeout((function(){r(),t(b)}),c),d.onResize((function(e){m=e,o()})),d.setFont(b.family+",sans-serif",f),p.onResize((function(e){g=e,o()})),p.setFont(b.family+",serif",f),v.onResize((function(e){y=e,o()})),v.setFont(b.family+",monospace",f)}))}},24561:function(e,t,n){var r=n(93742),i=function(e){var t="display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;";this.element=r.createElement("div"),this.element.setAttribute("aria-hidden","true"),r.append(this.element,r.createText(e)),this.collapsible=r.createElement("span"),this.expandable=r.createElement("span"),this.collapsibleInner=r.createElement("span"),this.expandableInner=r.createElement("span"),this.lastOffsetWidth=-1,r.style(this.collapsible,t),r.style(this.expandable,t),r.style(this.expandableInner,t),r.style(this.collapsibleInner,"display:inline-block;width:200%;height:200%;"),r.append(this.collapsible,this.collapsibleInner),r.append(this.expandable,this.expandableInner),r.append(this.element,this.collapsible),r.append(this.element,this.expandable)};e.exports=i,i.prototype.getElement=function(){return this.element},i.prototype.setFont=function(e,t){r.style(this.element,"min-width:20px;min-height:20px;display:inline-block;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font-size:100px;font-family:"+e+";"+t)},i.prototype.getWidth=function(){return this.element.offsetWidth},i.prototype.setWidth=function(e){this.element.style.width=e+"px"},i.prototype.reset=function(){var e=this.getWidth(),t=e+100;return this.expandableInner.style.width=t+"px",this.expandable.scrollLeft=t,this.collapsible.scrollLeft=this.collapsible.scrollWidth+100,this.lastOffsetWidth!==e&&(this.lastOffsetWidth=e,!0)},i.prototype.onScroll=function(e){this.reset()&&null!==this.element.parentNode&&e(this.lastOffsetWidth)},i.prototype.onResize=function(e){var t=this;this.collapsible.addEventListener("scroll",(function(){t.onScroll(e)}),!1),this.expandable.addEventListener("scroll",(function(){t.onScroll(e)}),!1),this.reset()}},22458:function(e){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString;e.exports=function(e,r,i){if("[object Function]"!==n.call(r))throw new TypeError("iterator must be a function");var o=e.length;if(o===+o)for(var a=0;a<o;a++)r.call(i,e[a],a,e);else for(var s in e)t.call(e,s)&&r.call(i,e[s],s,e)}},9588:function(e){"use strict";var t="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,r=Object.prototype.toString,i="[object Function]";e.exports=function(e){var o=this;if("function"!==typeof o||r.call(o)!==i)throw new TypeError(t+o);for(var a,s=n.call(arguments,1),u=function(){if(this instanceof a){var t=o.apply(this,s.concat(n.call(arguments)));return Object(t)===t?t:this}return o.apply(e,s.concat(n.call(arguments)))},l=Math.max(0,o.length-s.length),c=[],f=0;f<l;f++)c.push("$"+f);if(a=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(u),o.prototype){var h=function(){};h.prototype=o.prototype,a.prototype=new h,h.prototype=null}return a}},8572:function(e,t,n){"use strict";var r=n(9588);e.exports=Function.prototype.bind||r},75223:function(e,t,n){"use strict";var r,i=SyntaxError,o=Function,a=TypeError,s=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(t){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(C){u=null}var l=function(){throw new a},c=u?function(){try{return l}catch(e){try{return u(arguments,"callee").get}catch(t){return l}}}():l,f=n(56585)(),h=Object.getPrototypeOf||function(e){return e.__proto__},d={},p="undefined"===typeof Uint8Array?r:h(Uint8Array),v={"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":f?h([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":d,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f?h(h([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&f?h((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&f?h((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f?h(""[Symbol.iterator]()):r,"%Symbol%":f?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":c,"%TypedArray%":p,"%TypeError%":a,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet},m=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(n=h(i.prototype))}return v[t]=n,n},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=n(8572),b=n(14732),x=y.call(Function.call,Array.prototype.concat),_=y.call(Function.apply,Array.prototype.splice),w=y.call(Function.call,String.prototype.replace),S=y.call(Function.call,String.prototype.slice),E=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,k=/\\(\\)?/g,O=function(e){var t=S(e,0,1),n=S(e,-1);if("%"===t&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return w(e,E,(function(e,t,n,i){r[r.length]=n?w(i,k,"$1"):t||e})),r},A=function(e,t){var n,r=e;if(b(g,r)&&(r="%"+(n=g[r])[0]+"%"),b(v,r)){var o=v[r];if(o===d&&(o=m(r)),"undefined"===typeof o&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new a('"allowMissing" argument must be a boolean');var n=O(e),r=n.length>0?n[0]:"",o=A("%"+r+"%",t),s=o.name,l=o.value,c=!1,f=o.alias;f&&(r=f[0],_(n,x([0,1],f)));for(var h=1,d=!0;h<n.length;h+=1){var p=n[h],m=S(p,0,1),g=S(p,-1);if(('"'===m||"'"===m||"`"===m||'"'===g||"'"===g||"`"===g)&&m!==g)throw new i("property names with quotes must have matching quotes");if("constructor"!==p&&d||(c=!0),b(v,s="%"+(r+="."+p)+"%"))l=v[s];else if(null!=l){if(!(p in l)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(u&&h+1>=n.length){var y=u(l,p);l=(d=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:l[p]}else d=b(l,p),l=l[p];d&&!c&&(v[s]=l)}}return l}},56585:function(e,t,n){"use strict";var r="undefined"!==typeof Symbol&&Symbol,i=n(83504);e.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},83504:function(e){"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},18679:function(e,t,n){"use strict";var r=n(83504);e.exports=function(){return r()&&!!Symbol.toStringTag}},14732:function(e,t,n){"use strict";var r=n(8572);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},79666:function(e,t,n){"use strict";var r=n(45893),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var l=Object.defineProperty,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var a=c(n);f&&(a=a.concat(f(n)));for(var s=u(t),v=u(n),m=0;m<a.length;++m){var g=a[m];if(!o[g]&&(!r||!r[g])&&(!v||!v[g])&&(!s||!s[g])){var y=h(n,g);try{l(t,g,y)}catch(b){}}}}return t}},43472:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case f:case o:case s:case a:case d:return e;default:switch(e=e&&e.$$typeof){case l:case h:case m:case v:case u:return e;default:return t}}case i:return t}}}function w(e){return _(e)===f}t.AsyncMode=c,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=d,t.isAsyncMode=function(e){return w(e)||_(e)===c},t.isConcurrentMode=w,t.isContextConsumer=function(e){return _(e)===l},t.isContextProvider=function(e){return _(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===h},t.isFragment=function(e){return _(e)===o},t.isLazy=function(e){return _(e)===m},t.isMemo=function(e){return _(e)===v},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===s},t.isStrictMode=function(e){return _(e)===a},t.isSuspense=function(e){return _(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===f||e===s||e===a||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===l||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===g)},t.typeOf=_},45893:function(e,t,n){"use strict";e.exports=n(43472)},76240:function(e){e.exports=function(){"use strict";var e=Array.prototype.slice;function t(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function n(e){return a(e)?e:q(e)}function r(e){return s(e)?e:K(e)}function i(e){return u(e)?e:Y(e)}function o(e){return a(e)&&!l(e)?e:X(e)}function a(e){return!(!e||!e[f])}function s(e){return!(!e||!e[h])}function u(e){return!(!e||!e[d])}function l(e){return s(e)||u(e)}function c(e){return!(!e||!e[p])}t(r,n),t(i,n),t(o,n),n.isIterable=a,n.isKeyed=s,n.isIndexed=u,n.isAssociative=l,n.isOrdered=c,n.Keyed=r,n.Indexed=i,n.Set=o;var f="@@__IMMUTABLE_ITERABLE__@@",h="@@__IMMUTABLE_KEYED__@@",d="@@__IMMUTABLE_INDEXED__@@",p="@@__IMMUTABLE_ORDERED__@@",v="delete",m=5,g=1<<m,y=g-1,b={},x={value:!1},_={value:!1};function w(e){return e.value=!1,e}function S(e){e&&(e.value=!0)}function E(){}function k(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),i=0;i<n;i++)r[i]=e[i+t];return r}function O(e){return void 0===e.size&&(e.size=e.__iterate(C)),e.size}function A(e,t){if("number"!==typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?O(e)+t:t}function C(){return!0}function M(e,t,n){return(0===e||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function T(e,t){return R(e,t,0)}function P(e,t){return R(e,t,t)}function R(e,t,n){return void 0===e?n:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}var I=0,L=1,N=2,j="function"===typeof Symbol&&Symbol.iterator,D="@@iterator",B=j||D;function z(e){this.next=e}function F(e,t,n,r){var i=0===e?t:1===e?n:[t,n];return r?r.value=i:r={value:i,done:!1},r}function V(){return{value:void 0,done:!0}}function U(e){return!!G(e)}function Z(e){return e&&"function"===typeof e.next}function H(e){var t=G(e);return t&&t.call(e)}function G(e){var t=e&&(j&&e[j]||e[D]);if("function"===typeof t)return t}function W(e){return e&&"number"===typeof e.length}function q(e){return null===e||void 0===e?ae():a(e)?e.toSeq():le(e)}function K(e){return null===e||void 0===e?ae().toKeyedSeq():a(e)?s(e)?e.toSeq():e.fromEntrySeq():se(e)}function Y(e){return null===e||void 0===e?ae():a(e)?s(e)?e.entrySeq():e.toIndexedSeq():ue(e)}function X(e){return(null===e||void 0===e?ae():a(e)?s(e)?e.entrySeq():e:ue(e)).toSetSeq()}z.prototype.toString=function(){return"[Iterator]"},z.KEYS=I,z.VALUES=L,z.ENTRIES=N,z.prototype.inspect=z.prototype.toSource=function(){return this.toString()},z.prototype[B]=function(){return this},t(q,n),q.of=function(){return q(arguments)},q.prototype.toSeq=function(){return this},q.prototype.toString=function(){return this.__toString("Seq {","}")},q.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},q.prototype.__iterate=function(e,t){return fe(this,e,t,!0)},q.prototype.__iterator=function(e,t){return he(this,e,t,!0)},t(K,q),K.prototype.toKeyedSeq=function(){return this},t(Y,q),Y.of=function(){return Y(arguments)},Y.prototype.toIndexedSeq=function(){return this},Y.prototype.toString=function(){return this.__toString("Seq [","]")},Y.prototype.__iterate=function(e,t){return fe(this,e,t,!1)},Y.prototype.__iterator=function(e,t){return he(this,e,t,!1)},t(X,q),X.of=function(){return X(arguments)},X.prototype.toSetSeq=function(){return this},q.isSeq=oe,q.Keyed=K,q.Set=X,q.Indexed=Y;var $,J,Q,ee="@@__IMMUTABLE_SEQ__@@";function te(e){this._array=e,this.size=e.length}function ne(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function re(e){this._iterable=e,this.size=e.length||e.size}function ie(e){this._iterator=e,this._iteratorCache=[]}function oe(e){return!(!e||!e[ee])}function ae(){return $||($=new te([]))}function se(e){var t=Array.isArray(e)?new te(e).fromEntrySeq():Z(e)?new ie(e).fromEntrySeq():U(e)?new re(e).fromEntrySeq():"object"===typeof e?new ne(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function ue(e){var t=ce(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function le(e){var t=ce(e)||"object"===typeof e&&new ne(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}function ce(e){return W(e)?new te(e):Z(e)?new ie(e):U(e)?new re(e):void 0}function fe(e,t,n,r){var i=e._cache;if(i){for(var o=i.length-1,a=0;a<=o;a++){var s=i[n?o-a:a];if(!1===t(s[1],r?s[0]:a,e))return a+1}return a}return e.__iterateUncached(t,n)}function he(e,t,n,r){var i=e._cache;if(i){var o=i.length-1,a=0;return new z((function(){var e=i[n?o-a:a];return a++>o?V():F(t,r?e[0]:a-1,e[1])}))}return e.__iteratorUncached(t,n)}function de(e,t){return t?pe(t,e,"",{"":e}):ve(e)}function pe(e,t,n,r){return Array.isArray(t)?e.call(r,n,Y(t).map((function(n,r){return pe(e,n,r,t)}))):me(t)?e.call(r,n,K(t).map((function(n,r){return pe(e,n,r,t)}))):t}function ve(e){return Array.isArray(e)?Y(e).map(ve).toList():me(e)?K(e).map(ve).toMap():e}function me(e){return e&&(e.constructor===Object||void 0===e.constructor)}function ge(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if("function"===typeof e.valueOf&&"function"===typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!==e&&t!==t)return!0;if(!e||!t)return!1}return!("function"!==typeof e.equals||"function"!==typeof t.equals||!e.equals(t))}function ye(e,t){if(e===t)return!0;if(!a(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||s(e)!==s(t)||u(e)!==u(t)||c(e)!==c(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!l(e);if(c(e)){var r=e.entries();return t.every((function(e,t){var i=r.next().value;return i&&ge(i[1],e)&&(n||ge(i[0],t))}))&&r.next().done}var i=!1;if(void 0===e.size)if(void 0===t.size)"function"===typeof e.cacheResult&&e.cacheResult();else{i=!0;var o=e;e=t,t=o}var f=!0,h=t.__iterate((function(t,r){if(n?!e.has(t):i?!ge(t,e.get(r,b)):!ge(e.get(r,b),t))return f=!1,!1}));return f&&e.size===h}function be(e,t){if(!(this instanceof be))return new be(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(J)return J;J=this}}function xe(e,t){if(!e)throw new Error(t)}function _e(e,t,n){if(!(this instanceof _e))return new _e(e,t,n);if(xe(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),n=void 0===n?1:Math.abs(n),t<e&&(n=-n),this._start=e,this._end=t,this._step=n,this.size=Math.max(0,Math.ceil((t-e)/n-1)+1),0===this.size){if(Q)return Q;Q=this}}function we(){throw TypeError("Abstract")}function Se(){}function Ee(){}function ke(){}q.prototype[ee]=!0,t(te,Y),te.prototype.get=function(e,t){return this.has(e)?this._array[A(this,e)]:t},te.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length-1,i=0;i<=r;i++)if(!1===e(n[t?r-i:i],i,this))return i+1;return i},te.prototype.__iterator=function(e,t){var n=this._array,r=n.length-1,i=0;return new z((function(){return i>r?V():F(e,i,n[t?r-i++:i++])}))},t(ne,K),ne.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},ne.prototype.has=function(e){return this._object.hasOwnProperty(e)},ne.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,i=r.length-1,o=0;o<=i;o++){var a=r[t?i-o:o];if(!1===e(n[a],a,this))return o+1}return o},ne.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,i=r.length-1,o=0;return new z((function(){var a=r[t?i-o:o];return o++>i?V():F(e,a,n[a])}))},ne.prototype[p]=!0,t(re,Y),re.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=H(this._iterable),r=0;if(Z(n))for(var i;!(i=n.next()).done&&!1!==e(i.value,r++,this););return r},re.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=H(this._iterable);if(!Z(n))return new z(V);var r=0;return new z((function(){var t=n.next();return t.done?t:F(e,r++,t.value)}))},t(ie,Y),ie.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var n,r=this._iterator,i=this._iteratorCache,o=0;o<i.length;)if(!1===e(i[o],o++,this))return o;for(;!(n=r.next()).done;){var a=n.value;if(i[o]=a,!1===e(a,o++,this))break}return o},ie.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,r=this._iteratorCache,i=0;return new z((function(){if(i>=r.length){var t=n.next();if(t.done)return t;r[i]=t.value}return F(e,i,r[i++])}))},t(be,Y),be.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},be.prototype.get=function(e,t){return this.has(e)?this._value:t},be.prototype.includes=function(e){return ge(this._value,e)},be.prototype.slice=function(e,t){var n=this.size;return M(e,t,n)?this:new be(this._value,P(t,n)-T(e,n))},be.prototype.reverse=function(){return this},be.prototype.indexOf=function(e){return ge(this._value,e)?0:-1},be.prototype.lastIndexOf=function(e){return ge(this._value,e)?this.size:-1},be.prototype.__iterate=function(e,t){for(var n=0;n<this.size;n++)if(!1===e(this._value,n,this))return n+1;return n},be.prototype.__iterator=function(e,t){var n=this,r=0;return new z((function(){return r<n.size?F(e,r++,n._value):V()}))},be.prototype.equals=function(e){return e instanceof be?ge(this._value,e._value):ye(e)},t(_e,Y),_e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},_e.prototype.get=function(e,t){return this.has(e)?this._start+A(this,e)*this._step:t},_e.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},_e.prototype.slice=function(e,t){return M(e,t,this.size)?this:(e=T(e,this.size),(t=P(t,this.size))<=e?new _e(0,0):new _e(this.get(e,this._end),this.get(t,this._end),this._step))},_e.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step===0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},_e.prototype.lastIndexOf=function(e){return this.indexOf(e)},_e.prototype.__iterate=function(e,t){for(var n=this.size-1,r=this._step,i=t?this._start+n*r:this._start,o=0;o<=n;o++){if(!1===e(i,o,this))return o+1;i+=t?-r:r}return o},_e.prototype.__iterator=function(e,t){var n=this.size-1,r=this._step,i=t?this._start+n*r:this._start,o=0;return new z((function(){var a=i;return i+=t?-r:r,o>n?V():F(e,o++,a)}))},_e.prototype.equals=function(e){return e instanceof _e?this._start===e._start&&this._end===e._end&&this._step===e._step:ye(this,e)},t(we,n),t(Se,we),t(Ee,we),t(ke,we),we.Keyed=Se,we.Indexed=Ee,we.Set=ke;var Oe="function"===typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var n=65535&(e|=0),r=65535&(t|=0);return n*r+((e>>>16)*r+n*(t>>>16)<<16>>>0)|0};function Ae(e){return e>>>1&1073741824|3221225471&e}function Ce(e){if(!1===e||null===e||void 0===e)return 0;if("function"===typeof e.valueOf&&(!1===(e=e.valueOf())||null===e||void 0===e))return 0;if(!0===e)return 1;var t=typeof e;if("number"===t){var n=0|e;for(n!==e&&(n^=4294967295*e);e>4294967295;)n^=e/=4294967295;return Ae(n)}if("string"===t)return e.length>ze?Me(e):Te(e);if("function"===typeof e.hashCode)return e.hashCode();if("object"===t)return Pe(e);if("function"===typeof e.toString)return Te(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function Me(e){var t=Ue[e];return void 0===t&&(t=Te(e),Ve===Fe&&(Ve=0,Ue={}),Ve++,Ue[e]=t),t}function Te(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return Ae(t)}function Pe(e){var t;if(je&&void 0!==(t=Ne.get(e)))return t;if(void 0!==(t=e[Be]))return t;if(!Ie){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Be]))return t;if(void 0!==(t=Le(e)))return t}if(t=++De,1073741824&De&&(De=0),je)Ne.set(e,t);else{if(void 0!==Re&&!1===Re(e))throw new Error("Non-extensible objects are not allowed as keys.");if(Ie)Object.defineProperty(e,Be,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Be]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Be]=t}}return t}var Re=Object.isExtensible,Ie=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}();function Le(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}var Ne,je="function"===typeof WeakMap;je&&(Ne=new WeakMap);var De=0,Be="__immutablehash__";"function"===typeof Symbol&&(Be=Symbol(Be));var ze=16,Fe=255,Ve=0,Ue={};function Ze(e){xe(e!==1/0,"Cannot perform this action with an infinite size.")}function He(e){return null===e||void 0===e?it():Ge(e)&&!c(e)?e:it().withMutations((function(t){var n=r(e);Ze(n.size),n.forEach((function(e,n){return t.set(n,e)}))}))}function Ge(e){return!(!e||!e[qe])}t(He,Se),He.prototype.toString=function(){return this.__toString("Map {","}")},He.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},He.prototype.set=function(e,t){return ot(this,e,t)},He.prototype.setIn=function(e,t){return this.updateIn(e,b,(function(){return t}))},He.prototype.remove=function(e){return ot(this,e,b)},He.prototype.deleteIn=function(e){return this.updateIn(e,(function(){return b}))},He.prototype.update=function(e,t,n){return 1===arguments.length?e(this):this.updateIn([e],t,n)},He.prototype.updateIn=function(e,t,n){n||(n=t,t=void 0);var r=mt(this,wn(e),t,n);return r===b?void 0:r},He.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):it()},He.prototype.merge=function(){return ht(this,void 0,arguments)},He.prototype.mergeWith=function(t){return ht(this,t,e.call(arguments,1))},He.prototype.mergeIn=function(t){var n=e.call(arguments,1);return this.updateIn(t,it(),(function(e){return"function"===typeof e.merge?e.merge.apply(e,n):n[n.length-1]}))},He.prototype.mergeDeep=function(){return ht(this,dt,arguments)},He.prototype.mergeDeepWith=function(t){var n=e.call(arguments,1);return ht(this,pt(t),n)},He.prototype.mergeDeepIn=function(t){var n=e.call(arguments,1);return this.updateIn(t,it(),(function(e){return"function"===typeof e.mergeDeep?e.mergeDeep.apply(e,n):n[n.length-1]}))},He.prototype.sort=function(e){return Ut(fn(this,e))},He.prototype.sortBy=function(e,t){return Ut(fn(this,t,e))},He.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},He.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new E)},He.prototype.asImmutable=function(){return this.__ensureOwner()},He.prototype.wasAltered=function(){return this.__altered},He.prototype.__iterator=function(e,t){return new et(this,e,t)},He.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate((function(t){return r++,e(t[1],t[0],n)}),t),r},He.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?rt(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},He.isMap=Ge;var We,qe="@@__IMMUTABLE_MAP__@@",Ke=He.prototype;function Ye(e,t){this.ownerID=e,this.entries=t}function Xe(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n}function $e(e,t,n){this.ownerID=e,this.count=t,this.nodes=n}function Je(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n}function Qe(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n}function et(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&nt(e._root)}function tt(e,t){return F(e,t[0],t[1])}function nt(e,t){return{node:e,index:0,__prev:t}}function rt(e,t,n,r){var i=Object.create(Ke);return i.size=e,i._root=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function it(){return We||(We=rt(0))}function ot(e,t,n){var r,i;if(e._root){var o=w(x),a=w(_);if(r=at(e._root,e.__ownerID,0,void 0,t,n,o,a),!a.value)return e;i=e.size+(o.value?n===b?-1:1:0)}else{if(n===b)return e;i=1,r=new Ye(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=i,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?rt(i,r):it()}function at(e,t,n,r,i,o,a,s){return e?e.update(t,n,r,i,o,a,s):o===b?e:(S(s),S(a),new Qe(t,r,[i,o]))}function st(e){return e.constructor===Qe||e.constructor===Je}function ut(e,t,n,r,i){if(e.keyHash===r)return new Je(t,r,[e.entry,i]);var o,a=(0===n?e.keyHash:e.keyHash>>>n)&y,s=(0===n?r:r>>>n)&y;return new Xe(t,1<<a|1<<s,a===s?[ut(e,t,n+m,r,i)]:(o=new Qe(t,r,i),a<s?[e,o]:[o,e]))}function lt(e,t,n,r){e||(e=new E);for(var i=new Qe(e,Ce(n),[n,r]),o=0;o<t.length;o++){var a=t[o];i=i.update(e,0,void 0,a[0],a[1])}return i}function ct(e,t,n,r){for(var i=0,o=0,a=new Array(n),s=0,u=1,l=t.length;s<l;s++,u<<=1){var c=t[s];void 0!==c&&s!==r&&(i|=u,a[o++]=c)}return new Xe(e,i,a)}function ft(e,t,n,r,i){for(var o=0,a=new Array(g),s=0;0!==n;s++,n>>>=1)a[s]=1&n?t[o++]:void 0;return a[r]=i,new $e(e,o+1,a)}function ht(e,t,n){for(var i=[],o=0;o<n.length;o++){var s=n[o],u=r(s);a(s)||(u=u.map((function(e){return de(e)}))),i.push(u)}return vt(e,t,i)}function dt(e,t,n){return e&&e.mergeDeep&&a(t)?e.mergeDeep(t):ge(e,t)?e:t}function pt(e){return function(t,n,r){if(t&&t.mergeDeepWith&&a(n))return t.mergeDeepWith(e,n);var i=e(t,n,r);return ge(t,i)?t:i}}function vt(e,t,n){return 0===(n=n.filter((function(e){return 0!==e.size}))).length?e:0!==e.size||e.__ownerID||1!==n.length?e.withMutations((function(e){for(var r=t?function(n,r){e.update(r,b,(function(e){return e===b?n:t(e,n,r)}))}:function(t,n){e.set(n,t)},i=0;i<n.length;i++)n[i].forEach(r)})):e.constructor(n[0])}function mt(e,t,n,r){var i=e===b,o=t.next();if(o.done){var a=i?n:e,s=r(a);return s===a?e:s}xe(i||e&&e.set,"invalid keyPath");var u=o.value,l=i?b:e.get(u,b),c=mt(l,t,n,r);return c===l?e:c===b?e.remove(u):(i?it():e).set(u,c)}function gt(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function yt(e,t,n,r){var i=r?e:k(e);return i[t]=n,i}function bt(e,t,n,r){var i=e.length+1;if(r&&t+1===i)return e[t]=n,e;for(var o=new Array(i),a=0,s=0;s<i;s++)s===t?(o[s]=n,a=-1):o[s]=e[s+a];return o}function xt(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var i=new Array(r),o=0,a=0;a<r;a++)a===t&&(o=1),i[a]=e[a+o];return i}Ke[qe]=!0,Ke[v]=Ke.remove,Ke.removeIn=Ke.deleteIn,Ye.prototype.get=function(e,t,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(ge(n,i[o][0]))return i[o][1];return r},Ye.prototype.update=function(e,t,n,r,i,o,a){for(var s=i===b,u=this.entries,l=0,c=u.length;l<c&&!ge(r,u[l][0]);l++);var f=l<c;if(f?u[l][1]===i:s)return this;if(S(a),(s||!f)&&S(o),!s||1!==u.length){if(!f&&!s&&u.length>=_t)return lt(e,u,r,i);var h=e&&e===this.ownerID,d=h?u:k(u);return f?s?l===c-1?d.pop():d[l]=d.pop():d[l]=[r,i]:d.push([r,i]),h?(this.entries=d,this):new Ye(e,d)}},Xe.prototype.get=function(e,t,n,r){void 0===t&&(t=Ce(n));var i=1<<((0===e?t:t>>>e)&y),o=this.bitmap;return 0===(o&i)?r:this.nodes[gt(o&i-1)].get(e+m,t,n,r)},Xe.prototype.update=function(e,t,n,r,i,o,a){void 0===n&&(n=Ce(r));var s=(0===t?n:n>>>t)&y,u=1<<s,l=this.bitmap,c=0!==(l&u);if(!c&&i===b)return this;var f=gt(l&u-1),h=this.nodes,d=c?h[f]:void 0,p=at(d,e,t+m,n,r,i,o,a);if(p===d)return this;if(!c&&p&&h.length>=wt)return ft(e,h,l,s,p);if(c&&!p&&2===h.length&&st(h[1^f]))return h[1^f];if(c&&p&&1===h.length&&st(p))return p;var v=e&&e===this.ownerID,g=c?p?l:l^u:l|u,x=c?p?yt(h,f,p,v):xt(h,f,v):bt(h,f,p,v);return v?(this.bitmap=g,this.nodes=x,this):new Xe(e,g,x)},$e.prototype.get=function(e,t,n,r){void 0===t&&(t=Ce(n));var i=(0===e?t:t>>>e)&y,o=this.nodes[i];return o?o.get(e+m,t,n,r):r},$e.prototype.update=function(e,t,n,r,i,o,a){void 0===n&&(n=Ce(r));var s=(0===t?n:n>>>t)&y,u=i===b,l=this.nodes,c=l[s];if(u&&!c)return this;var f=at(c,e,t+m,n,r,i,o,a);if(f===c)return this;var h=this.count;if(c){if(!f&&--h<St)return ct(e,l,h,s)}else h++;var d=e&&e===this.ownerID,p=yt(l,s,f,d);return d?(this.count=h,this.nodes=p,this):new $e(e,h,p)},Je.prototype.get=function(e,t,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(ge(n,i[o][0]))return i[o][1];return r},Je.prototype.update=function(e,t,n,r,i,o,a){void 0===n&&(n=Ce(r));var s=i===b;if(n!==this.keyHash)return s?this:(S(a),S(o),ut(this,e,t,n,[r,i]));for(var u=this.entries,l=0,c=u.length;l<c&&!ge(r,u[l][0]);l++);var f=l<c;if(f?u[l][1]===i:s)return this;if(S(a),(s||!f)&&S(o),s&&2===c)return new Qe(e,this.keyHash,u[1^l]);var h=e&&e===this.ownerID,d=h?u:k(u);return f?s?l===c-1?d.pop():d[l]=d.pop():d[l]=[r,i]:d.push([r,i]),h?(this.entries=d,this):new Je(e,this.keyHash,d)},Qe.prototype.get=function(e,t,n,r){return ge(n,this.entry[0])?this.entry[1]:r},Qe.prototype.update=function(e,t,n,r,i,o,a){var s=i===b,u=ge(r,this.entry[0]);return(u?i===this.entry[1]:s)?this:(S(a),s?void S(o):u?e&&e===this.ownerID?(this.entry[1]=i,this):new Qe(e,this.keyHash,[r,i]):(S(o),ut(this,e,t,Ce(r),[r,i])))},Ye.prototype.iterate=Je.prototype.iterate=function(e,t){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===e(n[t?i-r:r]))return!1},Xe.prototype.iterate=$e.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[t?i-r:r];if(o&&!1===o.iterate(e,t))return!1}},Qe.prototype.iterate=function(e,t){return e(this.entry)},t(et,z),et.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n,r=t.node,i=t.index++;if(r.entry){if(0===i)return tt(e,r.entry)}else if(r.entries){if(i<=(n=r.entries.length-1))return tt(e,r.entries[this._reverse?n-i:i])}else if(i<=(n=r.nodes.length-1)){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return tt(e,o.entry);t=this._stack=nt(o,t)}continue}t=this._stack=this._stack.__prev}return V()};var _t=g/4,wt=g/2,St=g/4;function Et(e){var t=Lt();if(null===e||void 0===e)return t;if(kt(e))return e;var n=i(e),r=n.size;return 0===r?t:(Ze(r),r>0&&r<g?It(0,r,m,null,new Ct(n.toArray())):t.withMutations((function(e){e.setSize(r),n.forEach((function(t,n){return e.set(n,t)}))})))}function kt(e){return!(!e||!e[Ot])}t(Et,Ee),Et.of=function(){return this(arguments)},Et.prototype.toString=function(){return this.__toString("List [","]")},Et.prototype.get=function(e,t){if((e=A(this,e))>=0&&e<this.size){var n=Bt(this,e+=this._origin);return n&&n.array[e&y]}return t},Et.prototype.set=function(e,t){return Nt(this,e,t)},Et.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},Et.prototype.insert=function(e,t){return this.splice(e,0,t)},Et.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=m,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Lt()},Et.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations((function(n){zt(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])}))},Et.prototype.pop=function(){return zt(this,0,-1)},Et.prototype.unshift=function(){var e=arguments;return this.withMutations((function(t){zt(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])}))},Et.prototype.shift=function(){return zt(this,1)},Et.prototype.merge=function(){return Ft(this,void 0,arguments)},Et.prototype.mergeWith=function(t){return Ft(this,t,e.call(arguments,1))},Et.prototype.mergeDeep=function(){return Ft(this,dt,arguments)},Et.prototype.mergeDeepWith=function(t){var n=e.call(arguments,1);return Ft(this,pt(t),n)},Et.prototype.setSize=function(e){return zt(this,0,e)},Et.prototype.slice=function(e,t){var n=this.size;return M(e,t,n)?this:zt(this,T(e,n),P(t,n))},Et.prototype.__iterator=function(e,t){var n=0,r=Rt(this,t);return new z((function(){var t=r();return t===Pt?V():F(e,n++,t)}))},Et.prototype.__iterate=function(e,t){for(var n,r=0,i=Rt(this,t);(n=i())!==Pt&&!1!==e(n,r++,this););return r},Et.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?It(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},Et.isList=kt;var Ot="@@__IMMUTABLE_LIST__@@",At=Et.prototype;function Ct(e,t){this.array=e,this.ownerID=t}At[Ot]=!0,At[v]=At.remove,At.setIn=Ke.setIn,At.deleteIn=At.removeIn=Ke.removeIn,At.update=Ke.update,At.updateIn=Ke.updateIn,At.mergeIn=Ke.mergeIn,At.mergeDeepIn=Ke.mergeDeepIn,At.withMutations=Ke.withMutations,At.asMutable=Ke.asMutable,At.asImmutable=Ke.asImmutable,At.wasAltered=Ke.wasAltered,Ct.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var r=n>>>t&y;if(r>=this.array.length)return new Ct([],e);var i,o=0===r;if(t>0){var a=this.array[r];if((i=a&&a.removeBefore(e,t-m,n))===a&&o)return this}if(o&&!i)return this;var s=Dt(this,e);if(!o)for(var u=0;u<r;u++)s.array[u]=void 0;return i&&(s.array[r]=i),s},Ct.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var r,i=n-1>>>t&y;if(i>=this.array.length)return this;if(t>0){var o=this.array[i];if((r=o&&o.removeAfter(e,t-m,n))===o&&i===this.array.length-1)return this}var a=Dt(this,e);return a.array.splice(i+1),r&&(a.array[i]=r),a};var Mt,Tt,Pt={};function Rt(e,t){var n=e._origin,r=e._capacity,i=Vt(r),o=e._tail;return a(e._root,e._level,0);function a(e,t,n){return 0===t?s(e,n):u(e,t,n)}function s(e,a){var s=a===i?o&&o.array:e&&e.array,u=a>n?0:n-a,l=r-a;return l>g&&(l=g),function(){if(u===l)return Pt;var e=t?--l:u++;return s&&s[e]}}function u(e,i,o){var s,u=e&&e.array,l=o>n?0:n-o>>i,c=1+(r-o>>i);return c>g&&(c=g),function(){for(;;){if(s){var e=s();if(e!==Pt)return e;s=null}if(l===c)return Pt;var n=t?--c:l++;s=a(u&&u[n],i-m,o+(n<<i))}}}}function It(e,t,n,r,i,o,a){var s=Object.create(At);return s.size=t-e,s._origin=e,s._capacity=t,s._level=n,s._root=r,s._tail=i,s.__ownerID=o,s.__hash=a,s.__altered=!1,s}function Lt(){return Mt||(Mt=It(0,0,m))}function Nt(e,t,n){if((t=A(e,t))!==t)return e;if(t>=e.size||t<0)return e.withMutations((function(e){t<0?zt(e,t).set(0,n):zt(e,0,t+1).set(t,n)}));t+=e._origin;var r=e._tail,i=e._root,o=w(_);return t>=Vt(e._capacity)?r=jt(r,e.__ownerID,0,t,n,o):i=jt(i,e.__ownerID,e._level,t,n,o),o.value?e.__ownerID?(e._root=i,e._tail=r,e.__hash=void 0,e.__altered=!0,e):It(e._origin,e._capacity,e._level,i,r):e}function jt(e,t,n,r,i,o){var a,s=r>>>n&y,u=e&&s<e.array.length;if(!u&&void 0===i)return e;if(n>0){var l=e&&e.array[s],c=jt(l,t,n-m,r,i,o);return c===l?e:((a=Dt(e,t)).array[s]=c,a)}return u&&e.array[s]===i?e:(S(o),a=Dt(e,t),void 0===i&&s===a.array.length-1?a.array.pop():a.array[s]=i,a)}function Dt(e,t){return t&&e&&t===e.ownerID?e:new Ct(e?e.array.slice():[],t)}function Bt(e,t){if(t>=Vt(e._capacity))return e._tail;if(t<1<<e._level+m){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&y],r-=m;return n}}function zt(e,t,n){void 0!==t&&(t|=0),void 0!==n&&(n|=0);var r=e.__ownerID||new E,i=e._origin,o=e._capacity,a=i+t,s=void 0===n?o:n<0?o+n:i+n;if(a===i&&s===o)return e;if(a>=s)return e.clear();for(var u=e._level,l=e._root,c=0;a+c<0;)l=new Ct(l&&l.array.length?[void 0,l]:[],r),c+=1<<(u+=m);c&&(a+=c,i+=c,s+=c,o+=c);for(var f=Vt(o),h=Vt(s);h>=1<<u+m;)l=new Ct(l&&l.array.length?[l]:[],r),u+=m;var d=e._tail,p=h<f?Bt(e,s-1):h>f?new Ct([],r):d;if(d&&h>f&&a<o&&d.array.length){for(var v=l=Dt(l,r),g=u;g>m;g-=m){var b=f>>>g&y;v=v.array[b]=Dt(v.array[b],r)}v.array[f>>>m&y]=d}if(s<o&&(p=p&&p.removeAfter(r,0,s)),a>=h)a-=h,s-=h,u=m,l=null,p=p&&p.removeBefore(r,0,a);else if(a>i||h<f){for(c=0;l;){var x=a>>>u&y;if(x!==h>>>u&y)break;x&&(c+=(1<<u)*x),u-=m,l=l.array[x]}l&&a>i&&(l=l.removeBefore(r,u,a-c)),l&&h<f&&(l=l.removeAfter(r,u,h-c)),c&&(a-=c,s-=c)}return e.__ownerID?(e.size=s-a,e._origin=a,e._capacity=s,e._level=u,e._root=l,e._tail=p,e.__hash=void 0,e.__altered=!0,e):It(a,s,u,l,p)}function Ft(e,t,n){for(var r=[],o=0,s=0;s<n.length;s++){var u=n[s],l=i(u);l.size>o&&(o=l.size),a(u)||(l=l.map((function(e){return de(e)}))),r.push(l)}return o>e.size&&(e=e.setSize(o)),vt(e,t,r)}function Vt(e){return e<g?0:e-1>>>m<<m}function Ut(e){return null===e||void 0===e?Gt():Zt(e)?e:Gt().withMutations((function(t){var n=r(e);Ze(n.size),n.forEach((function(e,n){return t.set(n,e)}))}))}function Zt(e){return Ge(e)&&c(e)}function Ht(e,t,n,r){var i=Object.create(Ut.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=n,i.__hash=r,i}function Gt(){return Tt||(Tt=Ht(it(),Lt()))}function Wt(e,t,n){var r,i,o=e._map,a=e._list,s=o.get(t),u=void 0!==s;if(n===b){if(!u)return e;a.size>=g&&a.size>=2*o.size?(r=(i=a.filter((function(e,t){return void 0!==e&&s!==t}))).toKeyedSeq().map((function(e){return e[0]})).flip().toMap(),e.__ownerID&&(r.__ownerID=i.__ownerID=e.__ownerID)):(r=o.remove(t),i=s===a.size-1?a.pop():a.set(s,void 0))}else if(u){if(n===a.get(s)[1])return e;r=o,i=a.set(s,[t,n])}else r=o.set(t,a.size),i=a.set(a.size,[t,n]);return e.__ownerID?(e.size=r.size,e._map=r,e._list=i,e.__hash=void 0,e):Ht(r,i)}function qt(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function Kt(e){this._iter=e,this.size=e.size}function Yt(e){this._iter=e,this.size=e.size}function Xt(e){this._iter=e,this.size=e.size}function $t(e){var t=bn(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=xn,t.__iterateUncached=function(t,n){var r=this;return e.__iterate((function(e,n){return!1!==t(n,e,r)}),n)},t.__iteratorUncached=function(t,n){if(t===N){var r=e.__iterator(t,n);return new z((function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e}))}return e.__iterator(t===L?I:L,n)},t}function Jt(e,t,n){var r=bn(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,i){var o=e.get(r,b);return o===b?i:t.call(n,o,r,e)},r.__iterateUncached=function(r,i){var o=this;return e.__iterate((function(e,i,a){return!1!==r(t.call(n,e,i,a),i,o)}),i)},r.__iteratorUncached=function(r,i){var o=e.__iterator(N,i);return new z((function(){var i=o.next();if(i.done)return i;var a=i.value,s=a[0];return F(r,s,t.call(n,a[1],s,e),i)}))},r}function Qt(e,t){var n=bn(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=$t(e);return t.reverse=function(){return e.flip()},t}),n.get=function(n,r){return e.get(t?n:-1-n,r)},n.has=function(n){return e.has(t?n:-1-n)},n.includes=function(t){return e.includes(t)},n.cacheResult=xn,n.__iterate=function(t,n){var r=this;return e.__iterate((function(e,n){return t(e,n,r)}),!n)},n.__iterator=function(t,n){return e.__iterator(t,!n)},n}function en(e,t,n,r){var i=bn(e);return r&&(i.has=function(r){var i=e.get(r,b);return i!==b&&!!t.call(n,i,r,e)},i.get=function(r,i){var o=e.get(r,b);return o!==b&&t.call(n,o,r,e)?o:i}),i.__iterateUncached=function(i,o){var a=this,s=0;return e.__iterate((function(e,o,u){if(t.call(n,e,o,u))return s++,i(e,r?o:s-1,a)}),o),s},i.__iteratorUncached=function(i,o){var a=e.__iterator(N,o),s=0;return new z((function(){for(;;){var o=a.next();if(o.done)return o;var u=o.value,l=u[0],c=u[1];if(t.call(n,c,l,e))return F(i,r?l:s++,c,o)}}))},i}function tn(e,t,n){var r=He().asMutable();return e.__iterate((function(i,o){r.update(t.call(n,i,o,e),0,(function(e){return e+1}))})),r.asImmutable()}function nn(e,t,n){var r=s(e),i=(c(e)?Ut():He()).asMutable();e.__iterate((function(o,a){i.update(t.call(n,o,a,e),(function(e){return(e=e||[]).push(r?[a,o]:o),e}))}));var o=yn(e);return i.map((function(t){return vn(e,o(t))}))}function rn(e,t,n,r){var i=e.size;if(void 0!==t&&(t|=0),void 0!==n&&(n|=0),M(t,n,i))return e;var o=T(t,i),a=P(n,i);if(o!==o||a!==a)return rn(e.toSeq().cacheResult(),t,n,r);var s,u=a-o;u===u&&(s=u<0?0:u);var l=bn(e);return l.size=0===s?s:e.size&&s||void 0,!r&&oe(e)&&s>=0&&(l.get=function(t,n){return(t=A(this,t))>=0&&t<s?e.get(t+o,n):n}),l.__iterateUncached=function(t,n){var i=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(t,n);var a=0,u=!0,l=0;return e.__iterate((function(e,n){if(!u||!(u=a++<o))return l++,!1!==t(e,r?n:l-1,i)&&l!==s})),l},l.__iteratorUncached=function(t,n){if(0!==s&&n)return this.cacheResult().__iterator(t,n);var i=0!==s&&e.__iterator(t,n),a=0,u=0;return new z((function(){for(;a++<o;)i.next();if(++u>s)return V();var e=i.next();return r||t===L?e:F(t,u-1,t===I?void 0:e.value[1],e)}))},l}function on(e,t,n){var r=bn(e);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var a=0;return e.__iterate((function(e,i,s){return t.call(n,e,i,s)&&++a&&r(e,i,o)})),a},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var a=e.__iterator(N,i),s=!0;return new z((function(){if(!s)return V();var e=a.next();if(e.done)return e;var i=e.value,u=i[0],l=i[1];return t.call(n,l,u,o)?r===N?e:F(r,u,l,e):(s=!1,V())}))},r}function an(e,t,n,r){var i=bn(e);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var s=!0,u=0;return e.__iterate((function(e,o,l){if(!s||!(s=t.call(n,e,o,l)))return u++,i(e,r?o:u-1,a)})),u},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var s=e.__iterator(N,o),u=!0,l=0;return new z((function(){var e,o,c;do{if((e=s.next()).done)return r||i===L?e:F(i,l++,i===I?void 0:e.value[1],e);var f=e.value;o=f[0],c=f[1],u&&(u=t.call(n,c,o,a))}while(u);return i===N?e:F(i,o,c,e)}))},i}function sn(e,t){var n=s(e),i=[e].concat(t).map((function(e){return a(e)?n&&(e=r(e)):e=n?se(e):ue(Array.isArray(e)?e:[e]),e})).filter((function(e){return 0!==e.size}));if(0===i.length)return e;if(1===i.length){var o=i[0];if(o===e||n&&s(o)||u(e)&&u(o))return o}var l=new te(i);return n?l=l.toKeyedSeq():u(e)||(l=l.toSetSeq()),(l=l.flatten(!0)).size=i.reduce((function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}}),0),l}function un(e,t,n){var r=bn(e);return r.__iterateUncached=function(r,i){var o=0,s=!1;function u(e,l){var c=this;e.__iterate((function(e,i){return(!t||l<t)&&a(e)?u(e,l+1):!1===r(e,n?i:o++,c)&&(s=!0),!s}),i)}return u(e,0),o},r.__iteratorUncached=function(r,i){var o=e.__iterator(r,i),s=[],u=0;return new z((function(){for(;o;){var e=o.next();if(!1===e.done){var l=e.value;if(r===N&&(l=l[1]),t&&!(s.length<t)||!a(l))return n?e:F(r,u++,l,e);s.push(o),o=l.__iterator(r,i)}else o=s.pop()}return V()}))},r}function ln(e,t,n){var r=yn(e);return e.toSeq().map((function(i,o){return r(t.call(n,i,o,e))})).flatten(!0)}function cn(e,t){var n=bn(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return e.__iterate((function(e,r){return(!o||!1!==n(t,o++,i))&&!1!==n(e,o++,i)}),r),o},n.__iteratorUncached=function(n,r){var i,o=e.__iterator(L,r),a=0;return new z((function(){return(!i||a%2)&&(i=o.next()).done?i:a%2?F(n,a++,t):F(n,a++,i.value,i)}))},n}function fn(e,t,n){t||(t=_n);var r=s(e),i=0,o=e.toSeq().map((function(t,r){return[r,t,i++,n?n(t,r,e):t]})).toArray();return o.sort((function(e,n){return t(e[3],n[3])||e[2]-n[2]})).forEach(r?function(e,t){o[t].length=2}:function(e,t){o[t]=e[1]}),r?K(o):u(e)?Y(o):X(o)}function hn(e,t,n){if(t||(t=_n),n){var r=e.toSeq().map((function(t,r){return[t,n(t,r,e)]})).reduce((function(e,n){return dn(t,e[1],n[1])?n:e}));return r&&r[0]}return e.reduce((function(e,n){return dn(t,e,n)?n:e}))}function dn(e,t,n){var r=e(n,t);return 0===r&&n!==t&&(void 0===n||null===n||n!==n)||r>0}function pn(e,t,r){var i=bn(e);return i.size=new te(r).map((function(e){return e.size})).min(),i.__iterate=function(e,t){for(var n,r=this.__iterator(L,t),i=0;!(n=r.next()).done&&!1!==e(n.value,i++,this););return i},i.__iteratorUncached=function(e,i){var o=r.map((function(e){return e=n(e),H(i?e.reverse():e)})),a=0,s=!1;return new z((function(){var n;return s||(n=o.map((function(e){return e.next()})),s=n.some((function(e){return e.done}))),s?V():F(e,a++,t.apply(null,n.map((function(e){return e.value}))))}))},i}function vn(e,t){return oe(e)?t:e.constructor(t)}function mn(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function gn(e){return Ze(e.size),O(e)}function yn(e){return s(e)?r:u(e)?i:o}function bn(e){return Object.create((s(e)?K:u(e)?Y:X).prototype)}function xn(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):q.prototype.cacheResult.call(this)}function _n(e,t){return e>t?1:e<t?-1:0}function wn(e){var t=H(e);if(!t){if(!W(e))throw new TypeError("Expected iterable or array-like: "+e);t=H(n(e))}return t}function Sn(e,t){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var a=Object.keys(e);An(i,a),i.size=a.length,i._name=t,i._keys=a,i._defaultValues=e}this._map=He(o)},i=r.prototype=Object.create(En);return i.constructor=r,r}t(Ut,He),Ut.of=function(){return this(arguments)},Ut.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Ut.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},Ut.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Gt()},Ut.prototype.set=function(e,t){return Wt(this,e,t)},Ut.prototype.remove=function(e){return Wt(this,e,b)},Ut.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Ut.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate((function(t){return t&&e(t[1],t[0],n)}),t)},Ut.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},Ut.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?Ht(t,n,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=n,this)},Ut.isOrderedMap=Zt,Ut.prototype[p]=!0,Ut.prototype[v]=Ut.prototype.remove,t(qt,K),qt.prototype.get=function(e,t){return this._iter.get(e,t)},qt.prototype.has=function(e){return this._iter.has(e)},qt.prototype.valueSeq=function(){return this._iter.valueSeq()},qt.prototype.reverse=function(){var e=this,t=Qt(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},qt.prototype.map=function(e,t){var n=this,r=Jt(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},qt.prototype.__iterate=function(e,t){var n,r=this;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,r)}:(n=t?gn(this):0,function(i){return e(i,t?--n:n++,r)}),t)},qt.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var n=this._iter.__iterator(L,t),r=t?gn(this):0;return new z((function(){var i=n.next();return i.done?i:F(e,t?--r:r++,i.value,i)}))},qt.prototype[p]=!0,t(Kt,Y),Kt.prototype.includes=function(e){return this._iter.includes(e)},Kt.prototype.__iterate=function(e,t){var n=this,r=0;return this._iter.__iterate((function(t){return e(t,r++,n)}),t)},Kt.prototype.__iterator=function(e,t){var n=this._iter.__iterator(L,t),r=0;return new z((function(){var t=n.next();return t.done?t:F(e,r++,t.value,t)}))},t(Yt,X),Yt.prototype.has=function(e){return this._iter.includes(e)},Yt.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t){return e(t,t,n)}),t)},Yt.prototype.__iterator=function(e,t){var n=this._iter.__iterator(L,t);return new z((function(){var t=n.next();return t.done?t:F(e,t.value,t.value,t)}))},t(Xt,K),Xt.prototype.entrySeq=function(){return this._iter.toSeq()},Xt.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t){if(t){mn(t);var r=a(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}}),t)},Xt.prototype.__iterator=function(e,t){var n=this._iter.__iterator(L,t);return new z((function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){mn(r);var i=a(r);return F(e,i?r.get(0):r[0],i?r.get(1):r[1],t)}}}))},Kt.prototype.cacheResult=qt.prototype.cacheResult=Yt.prototype.cacheResult=Xt.prototype.cacheResult=xn,t(Sn,Se),Sn.prototype.toString=function(){return this.__toString(On(this)+" {","}")},Sn.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},Sn.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._defaultValues[e];return this._map?this._map.get(e,n):n},Sn.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=kn(this,it()))},Sn.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+On(this));var n=this._map&&this._map.set(e,t);return this.__ownerID||n===this._map?this:kn(this,n)},Sn.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:kn(this,t)},Sn.prototype.wasAltered=function(){return this._map.wasAltered()},Sn.prototype.__iterator=function(e,t){var n=this;return r(this._defaultValues).map((function(e,t){return n.get(t)})).__iterator(e,t)},Sn.prototype.__iterate=function(e,t){var n=this;return r(this._defaultValues).map((function(e,t){return n.get(t)})).__iterate(e,t)},Sn.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?kn(this,t,e):(this.__ownerID=e,this._map=t,this)};var En=Sn.prototype;function kn(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._map=t,r.__ownerID=n,r}function On(e){return e._name||e.constructor.name||"Record"}function An(e,t){try{t.forEach(Cn.bind(void 0,e))}catch(n){}}function Cn(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){xe(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}function Mn(e){return null===e||void 0===e?jn():Tn(e)&&!c(e)?e:jn().withMutations((function(t){var n=o(e);Ze(n.size),n.forEach((function(e){return t.add(e)}))}))}function Tn(e){return!(!e||!e[Rn])}En[v]=En.remove,En.deleteIn=En.removeIn=Ke.removeIn,En.merge=Ke.merge,En.mergeWith=Ke.mergeWith,En.mergeIn=Ke.mergeIn,En.mergeDeep=Ke.mergeDeep,En.mergeDeepWith=Ke.mergeDeepWith,En.mergeDeepIn=Ke.mergeDeepIn,En.setIn=Ke.setIn,En.update=Ke.update,En.updateIn=Ke.updateIn,En.withMutations=Ke.withMutations,En.asMutable=Ke.asMutable,En.asImmutable=Ke.asImmutable,t(Mn,ke),Mn.of=function(){return this(arguments)},Mn.fromKeys=function(e){return this(r(e).keySeq())},Mn.prototype.toString=function(){return this.__toString("Set {","}")},Mn.prototype.has=function(e){return this._map.has(e)},Mn.prototype.add=function(e){return Ln(this,this._map.set(e,!0))},Mn.prototype.remove=function(e){return Ln(this,this._map.remove(e))},Mn.prototype.clear=function(){return Ln(this,this._map.clear())},Mn.prototype.union=function(){var t=e.call(arguments,0);return 0===(t=t.filter((function(e){return 0!==e.size}))).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(e){for(var n=0;n<t.length;n++)o(t[n]).forEach((function(t){return e.add(t)}))})):this.constructor(t[0])},Mn.prototype.intersect=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map((function(e){return o(e)}));var n=this;return this.withMutations((function(e){n.forEach((function(n){t.every((function(e){return e.includes(n)}))||e.remove(n)}))}))},Mn.prototype.subtract=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map((function(e){return o(e)}));var n=this;return this.withMutations((function(e){n.forEach((function(n){t.some((function(e){return e.includes(n)}))&&e.remove(n)}))}))},Mn.prototype.merge=function(){return this.union.apply(this,arguments)},Mn.prototype.mergeWith=function(t){var n=e.call(arguments,1);return this.union.apply(this,n)},Mn.prototype.sort=function(e){return Dn(fn(this,e))},Mn.prototype.sortBy=function(e,t){return Dn(fn(this,t,e))},Mn.prototype.wasAltered=function(){return this._map.wasAltered()},Mn.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate((function(t,r){return e(r,r,n)}),t)},Mn.prototype.__iterator=function(e,t){return this._map.map((function(e,t){return t})).__iterator(e,t)},Mn.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},Mn.isSet=Tn;var Pn,Rn="@@__IMMUTABLE_SET__@@",In=Mn.prototype;function Ln(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function Nn(e,t){var n=Object.create(In);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function jn(){return Pn||(Pn=Nn(it()))}function Dn(e){return null===e||void 0===e?Un():Bn(e)?e:Un().withMutations((function(t){var n=o(e);Ze(n.size),n.forEach((function(e){return t.add(e)}))}))}function Bn(e){return Tn(e)&&c(e)}In[Rn]=!0,In[v]=In.remove,In.mergeDeep=In.merge,In.mergeDeepWith=In.mergeWith,In.withMutations=Ke.withMutations,In.asMutable=Ke.asMutable,In.asImmutable=Ke.asImmutable,In.__empty=jn,In.__make=Nn,t(Dn,Mn),Dn.of=function(){return this(arguments)},Dn.fromKeys=function(e){return this(r(e).keySeq())},Dn.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Dn.isOrderedSet=Bn;var zn,Fn=Dn.prototype;function Vn(e,t){var n=Object.create(Fn);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Un(){return zn||(zn=Vn(Gt()))}function Zn(e){return null===e||void 0===e?Yn():Hn(e)?e:Yn().unshiftAll(e)}function Hn(e){return!(!e||!e[Wn])}Fn[p]=!0,Fn.__empty=Un,Fn.__make=Vn,t(Zn,Ee),Zn.of=function(){return this(arguments)},Zn.prototype.toString=function(){return this.__toString("Stack [","]")},Zn.prototype.get=function(e,t){var n=this._head;for(e=A(this,e);n&&e--;)n=n.next;return n?n.value:t},Zn.prototype.peek=function(){return this._head&&this._head.value},Zn.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,n=arguments.length-1;n>=0;n--)t={value:arguments[n],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):Kn(e,t)},Zn.prototype.pushAll=function(e){if(0===(e=i(e)).size)return this;Ze(e.size);var t=this.size,n=this._head;return e.reverse().forEach((function(e){t++,n={value:e,next:n}})),this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):Kn(t,n)},Zn.prototype.pop=function(){return this.slice(1)},Zn.prototype.unshift=function(){return this.push.apply(this,arguments)},Zn.prototype.unshiftAll=function(e){return this.pushAll(e)},Zn.prototype.shift=function(){return this.pop.apply(this,arguments)},Zn.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Yn()},Zn.prototype.slice=function(e,t){if(M(e,t,this.size))return this;var n=T(e,this.size);if(P(t,this.size)!==this.size)return Ee.prototype.slice.call(this,e,t);for(var r=this.size-n,i=this._head;n--;)i=i.next;return this.__ownerID?(this.size=r,this._head=i,this.__hash=void 0,this.__altered=!0,this):Kn(r,i)},Zn.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Kn(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Zn.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var n=0,r=this._head;r&&!1!==e(r.value,n++,this);)r=r.next;return n},Zn.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,r=this._head;return new z((function(){if(r){var t=r.value;return r=r.next,F(e,n++,t)}return V()}))},Zn.isStack=Hn;var Gn,Wn="@@__IMMUTABLE_STACK__@@",qn=Zn.prototype;function Kn(e,t,n,r){var i=Object.create(qn);return i.size=e,i._head=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Yn(){return Gn||(Gn=Kn(0))}function Xn(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}qn[Wn]=!0,qn.withMutations=Ke.withMutations,qn.asMutable=Ke.asMutable,qn.asImmutable=Ke.asImmutable,qn.wasAltered=Ke.wasAltered,n.Iterator=z,Xn(n,{toArray:function(){Ze(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate((function(t,n){e[n]=t})),e},toIndexedSeq:function(){return new Kt(this)},toJS:function(){return this.toSeq().map((function(e){return e&&"function"===typeof e.toJS?e.toJS():e})).__toJS()},toJSON:function(){return this.toSeq().map((function(e){return e&&"function"===typeof e.toJSON?e.toJSON():e})).__toJS()},toKeyedSeq:function(){return new qt(this,!0)},toMap:function(){return He(this.toKeyedSeq())},toObject:function(){Ze(this.size);var e={};return this.__iterate((function(t,n){e[n]=t})),e},toOrderedMap:function(){return Ut(this.toKeyedSeq())},toOrderedSet:function(){return Dn(s(this)?this.valueSeq():this)},toSet:function(){return Mn(s(this)?this.valueSeq():this)},toSetSeq:function(){return new Yt(this)},toSeq:function(){return u(this)?this.toIndexedSeq():s(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Zn(s(this)?this.valueSeq():this)},toList:function(){return Et(s(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){return vn(this,sn(this,e.call(arguments,0)))},includes:function(e){return this.some((function(t){return ge(t,e)}))},entries:function(){return this.__iterator(N)},every:function(e,t){Ze(this.size);var n=!0;return this.__iterate((function(r,i,o){if(!e.call(t,r,i,o))return n=!1,!1})),n},filter:function(e,t){return vn(this,en(this,e,t,!0))},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},findEntry:function(e,t){var n;return this.__iterate((function(r,i,o){if(e.call(t,r,i,o))return n=[i,r],!1})),n},findLastEntry:function(e,t){return this.toSeq().reverse().findEntry(e,t)},forEach:function(e,t){return Ze(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){Ze(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate((function(r){n?n=!1:t+=e,t+=null!==r&&void 0!==r?r.toString():""})),t},keys:function(){return this.__iterator(I)},map:function(e,t){return vn(this,Jt(this,e,t))},reduce:function(e,t,n){var r,i;return Ze(this.size),arguments.length<2?i=!0:r=t,this.__iterate((function(t,o,a){i?(i=!1,r=t):r=e.call(n,r,t,o,a)})),r},reduceRight:function(e,t,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return vn(this,Qt(this,!0))},slice:function(e,t){return vn(this,rn(this,e,t,!0))},some:function(e,t){return!this.every(tr(e),t)},sort:function(e){return vn(this,fn(this,e))},values:function(){return this.__iterator(L)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(e,t){return O(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return tn(this,e,t)},equals:function(e){return ye(this,e)},entrySeq:function(){var e=this;if(e._cache)return new te(e._cache);var t=e.toSeq().map(er).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(tr(e),t)},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},first:function(){return this.find(C)},flatMap:function(e,t){return vn(this,ln(this,e,t))},flatten:function(e){return vn(this,un(this,e,!0))},fromEntrySeq:function(){return new Xt(this)},get:function(e,t){return this.find((function(t,n){return ge(n,e)}),void 0,t)},getIn:function(e,t){for(var n,r=this,i=wn(e);!(n=i.next()).done;){var o=n.value;if((r=r&&r.get?r.get(o,b):b)===b)return t}return r},groupBy:function(e,t){return nn(this,e,t)},has:function(e){return this.get(e,b)!==b},hasIn:function(e){return this.getIn(e,b)!==b},isSubset:function(e){return e="function"===typeof e.includes?e:n(e),this.every((function(t){return e.includes(t)}))},isSuperset:function(e){return(e="function"===typeof e.isSubset?e:n(e)).isSubset(this)},keySeq:function(){return this.toSeq().map(Qn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(e){return hn(this,e)},maxBy:function(e,t){return hn(this,t,e)},min:function(e){return hn(this,e?nr(e):or)},minBy:function(e,t){return hn(this,t?nr(t):or,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return vn(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return vn(this,an(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(tr(e),t)},sortBy:function(e,t){return vn(this,fn(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return vn(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return vn(this,on(this,e,t))},takeUntil:function(e,t){return this.takeWhile(tr(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=ar(this))}});var $n=n.prototype;$n[f]=!0,$n[B]=$n.values,$n.__toJS=$n.toArray,$n.__toStringMapper=rr,$n.inspect=$n.toSource=function(){return this.toString()},$n.chain=$n.flatMap,$n.contains=$n.includes,function(){try{Object.defineProperty($n,"length",{get:function(){if(!n.noLengthWarning){var e;try{throw new Error}catch(t){e=t.stack}if(-1===e.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+e),this.size}}})}catch(e){}}(),Xn(r,{flip:function(){return vn(this,$t(this))},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLastKey:function(e,t){return this.toSeq().reverse().findKey(e,t)},keyOf:function(e){return this.findKey((function(t){return ge(t,e)}))},lastKeyOf:function(e){return this.findLastKey((function(t){return ge(t,e)}))},mapEntries:function(e,t){var n=this,r=0;return vn(this,this.toSeq().map((function(i,o){return e.call(t,[o,i],r++,n)})).fromEntrySeq())},mapKeys:function(e,t){var n=this;return vn(this,this.toSeq().flip().map((function(r,i){return e.call(t,r,i,n)})).flip())}});var Jn=r.prototype;function Qn(e,t){return t}function er(e,t){return[t,e]}function tr(e){return function(){return!e.apply(this,arguments)}}function nr(e){return function(){return-e.apply(this,arguments)}}function rr(e){return"string"===typeof e?JSON.stringify(e):e}function ir(){return k(arguments)}function or(e,t){return e<t?1:e>t?-1:0}function ar(e){if(e.size===1/0)return 0;var t=c(e),n=s(e),r=t?1:0;return sr(e.__iterate(n?t?function(e,t){r=31*r+ur(Ce(e),Ce(t))|0}:function(e,t){r=r+ur(Ce(e),Ce(t))|0}:t?function(e){r=31*r+Ce(e)|0}:function(e){r=r+Ce(e)|0}),r)}function sr(e,t){return t=Oe(t,3432918353),t=Oe(t<<15|t>>>-15,461845907),t=Oe(t<<13|t>>>-13,5),t=Oe((t=(t+3864292196|0)^e)^t>>>16,2246822507),t=Ae((t=Oe(t^t>>>13,3266489909))^t>>>16)}function ur(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}return Jn[h]=!0,Jn[B]=$n.entries,Jn.__toJS=$n.toObject,Jn.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+rr(e)},Xn(i,{toKeyedSeq:function(){return new qt(this,!1)},filter:function(e,t){return vn(this,en(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.toKeyedSeq().keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.toKeyedSeq().reverse().keyOf(e);return void 0===t?-1:t},reverse:function(){return vn(this,Qt(this,!1))},slice:function(e,t){return vn(this,rn(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(0|t,0),0===n||2===n&&!t)return this;e=T(e,e<0?this.count():this.size);var r=this.slice(0,e);return vn(this,1===n?r:r.concat(k(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.toKeyedSeq().findLastKey(e,t);return void 0===n?-1:n},first:function(){return this.get(0)},flatten:function(e){return vn(this,un(this,e,!1))},get:function(e,t){return(e=A(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find((function(t,n){return n===e}),void 0,t)},has:function(e){return(e=A(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return vn(this,cn(this,e))},interleave:function(){var e=[this].concat(k(arguments)),t=pn(this.toSeq(),Y.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),vn(this,n)},last:function(){return this.get(-1)},skipWhile:function(e,t){return vn(this,an(this,e,t,!1))},zip:function(){return vn(this,pn(this,ir,[this].concat(k(arguments))))},zipWith:function(e){var t=k(arguments);return t[0]=this,vn(this,pn(this,e,t))}}),i.prototype[d]=!0,i.prototype[p]=!0,Xn(o,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),o.prototype.has=$n.includes,Xn(K,r.prototype),Xn(Y,i.prototype),Xn(X,o.prototype),Xn(Se,r.prototype),Xn(Ee,i.prototype),Xn(ke,o.prototype),{Iterable:n,Seq:q,Collection:we,Map:He,OrderedMap:Ut,List:Et,Stack:Zn,Set:Mn,OrderedSet:Dn,Record:Sn,Range:_e,Repeat:be,is:ge,fromJS:de}}()},44144:function(e){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},62868:function(){!function(){"use strict";if("object"===typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=function(e){for(var t=window.document,n=i(t);n;)n=i(t=n.ownerDocument);return t}(),t=[],n=null,r=null;a.prototype.THROTTLE_TIMEOUT=100,a.prototype.POLL_INTERVAL=null,a.prototype.USE_MUTATION_OBSERVER=!0,a._setupCrossOriginUpdater=function(){return n||(n=function(e,n){r=e&&n?h(e,n):{top:0,bottom:0,left:0,right:0,width:0,height:0},t.forEach((function(e){e._checkForIntersections()}))}),n},a._resetCrossOriginUpdater=function(){n=null,r=null},a.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},a.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},a.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},a.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},a.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},a.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},a.prototype._monitorIntersections=function(t){var n=t.defaultView;if(n&&-1==this._monitoringDocuments.indexOf(t)){var r=this._checkForIntersections,o=null,a=null;this.POLL_INTERVAL?o=n.setInterval(r,this.POLL_INTERVAL):(s(n,"resize",r,!0),s(t,"scroll",r,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(a=new n.MutationObserver(r)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push((function(){var e=t.defaultView;e&&(o&&e.clearInterval(o),u(e,"resize",r,!0)),u(t,"scroll",r,!0),a&&a.disconnect()}));var l=this.root&&(this.root.ownerDocument||this.root)||e;if(t!=l){var c=i(t);c&&this._monitorIntersections(c.ownerDocument)}}},a.prototype._unmonitorIntersections=function(t){var n=this._monitoringDocuments.indexOf(t);if(-1!=n){var r=this.root&&(this.root.ownerDocument||this.root)||e,o=this._observationTargets.some((function(e){var n=e.element.ownerDocument;if(n==t)return!0;for(;n&&n!=r;){var o=i(n);if((n=o&&o.ownerDocument)==t)return!0}return!1}));if(!o){var a=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),a(),t!=r){var s=i(t);s&&this._unmonitorIntersections(s.ownerDocument)}}}},a.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},a.prototype._checkForIntersections=function(){if(this.root||!n||r){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(r){var i=r.element,a=c(i),s=this._rootContainsTarget(i),u=r.entry,l=e&&s&&this._computeTargetAndRootIntersection(i,a,t),f=null;this._rootContainsTarget(i)?n&&!this.root||(f=t):f={top:0,bottom:0,left:0,right:0,width:0,height:0};var h=r.entry=new o({time:window.performance&&performance.now&&performance.now(),target:i,boundingClientRect:a,rootBounds:f,intersectionRect:l});u?e&&s?this._hasCrossedThreshold(u,h)&&this._queuedEntries.push(h):u&&u.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},a.prototype._computeTargetAndRootIntersection=function(t,i,o){if("none"!=window.getComputedStyle(t).display){for(var a=i,s=p(t),u=!1;!u&&s;){var f=null,d=1==s.nodeType?window.getComputedStyle(s):{};if("none"==d.display)return null;if(s==this.root||9==s.nodeType)if(u=!0,s==this.root||s==e)n&&!this.root?!r||0==r.width&&0==r.height?(s=null,f=null,a=null):f=r:f=o;else{var v=p(s),m=v&&c(v),g=v&&this._computeTargetAndRootIntersection(v,m,o);m&&g?(s=v,f=h(m,g)):(s=null,a=null)}else{var y=s.ownerDocument;s!=y.body&&s!=y.documentElement&&"visible"!=d.overflow&&(f=c(s))}if(f&&(a=l(f,a)),!a)break;s=s&&p(s)}return a}},a.prototype._getRootRect=function(){var t;if(this.root&&!v(this.root))t=c(this.root);else{var n=v(this.root)?this.root:e,r=n.documentElement,i=n.body;t={top:0,left:0,right:r.clientWidth||i.clientWidth,width:r.clientWidth||i.clientWidth,bottom:r.clientHeight||i.clientHeight,height:r.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(t)},a.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},a.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var i=0;i<this.thresholds.length;i++){var o=this.thresholds[i];if(o==n||o==r||o<n!==o<r)return!0}},a.prototype._rootIsInDom=function(){return!this.root||d(e,this.root)},a.prototype._rootContainsTarget=function(t){var n=this.root&&(this.root.ownerDocument||this.root)||e;return d(n,t)&&(!this.root||n==t.ownerDocument)},a.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},a.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=a,window.IntersectionObserverEntry=o}function i(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(t){return null}}function o(e){this.time=e.time,this.target=e.target,this.rootBounds=f(e.rootBounds),this.boundingClientRect=f(e.boundingClientRect),this.intersectionRect=f(e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,i=r.width*r.height;this.intersectionRatio=n?Number((i/n).toFixed(4)):this.isIntersecting?1:0}function a(e,t){var n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType&&9!=n.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=function(e,t){var n=null;return function(){n||(n=setTimeout((function(){e(),n=null}),t))}}(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function s(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function u(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function l(e,t){var n=Math.max(e.top,t.top),r=Math.min(e.bottom,t.bottom),i=Math.max(e.left,t.left),o=Math.min(e.right,t.right),a=o-i,s=r-n;return a>=0&&s>=0&&{top:n,bottom:r,left:i,right:o,width:a,height:s}||null}function c(e){var t;try{t=e.getBoundingClientRect()}catch(n){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function f(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function h(e,t){var n=t.top-e.top,r=t.left-e.left;return{top:n,left:r,height:t.height,width:t.width,bottom:n+t.height,right:r+t.width}}function d(e,t){for(var n=t;n;){if(n==e)return!0;n=p(n)}return!1}function p(t){var n=t.parentNode;return 9==t.nodeType&&t!=e?i(t):(n&&n.assignedSlot&&(n=n.assignedSlot.parentNode),n&&11==n.nodeType&&n.host?n.host:n)}function v(e){return e&&9===e.nodeType}}()},90187:function(e,t,n){"use strict";var r=n(18679)(),i=n(86045)("Object.prototype.toString"),o=function(e){return!(r&&e&&"object"===typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},a=function(e){return!!o(e)||null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},s=function(){return o(arguments)}();o.isLegacyArguments=a,e.exports=s?o:a},7685:function(e,t,n){"use strict";var r,i=Object.prototype.toString,o=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=n(18679)(),u=Object.getPrototypeOf;e.exports=function(e){if("function"!==typeof e)return!1;if(a.test(o.call(e)))return!0;if(!s)return"[object GeneratorFunction]"===i.call(e);if(!u)return!1;if("undefined"===typeof r){var t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}();r=!!t&&u(t)}return u(e)===r}},65408:function(e){"use strict";e.exports=function(e){return e!==e}},63861:function(e,t,n){"use strict";var r=n(23942),i=n(91002),o=n(65408),a=n(61279),s=n(45553),u=r(a(),Number);i(u,{getPolyfill:a,implementation:o,shim:s}),e.exports=u},61279:function(e,t,n){"use strict";var r=n(65408);e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:r}},45553:function(e,t,n){"use strict";var r=n(91002),i=n(61279);e.exports=function(){var e=i();return r(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}},82031:function(e,t,n){"use strict";var r=n(22458),i=n(53370),o=n(86045),a=o("Object.prototype.toString"),s=n(18679)(),u="undefined"===typeof globalThis?n.g:globalThis,l=i(),c=o("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},f=o("String.prototype.slice"),h={},d=n(3882),p=Object.getPrototypeOf;s&&d&&p&&r(l,(function(e){var t=new u[e];if(Symbol.toStringTag in t){var n=p(t),r=d(n,Symbol.toStringTag);if(!r){var i=p(n);r=d(i,Symbol.toStringTag)}h[e]=r.get}}));e.exports=function(e){if(!e||"object"!==typeof e)return!1;if(!s||!(Symbol.toStringTag in e)){var t=f(a(e),8,-1);return c(l,t)>-1}return!!d&&function(e){var t=!1;return r(h,(function(n,r){if(!t)try{t=n.call(e)===r}catch(i){}})),t}(e)}},86357:function(e){"use strict";var t=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),n(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function n(e,r,i,o,a,s,u,l,c,f){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var h in r(o,a,s,u,l,c,f),o){var d=o[h];if(Array.isArray(d)){if(h in t.arrayKeywords)for(var p=0;p<d.length;p++)n(e,r,i,d[p],a+"/"+h+"/"+p,s,a,h,o,p)}else if(h in t.propsKeywords){if(d&&"object"==typeof d)for(var v in d)n(e,r,i,d[v],a+"/"+h+"/"+v.replace(/~/g,"~0").replace(/\//g,"~1"),s,a,h,o,v)}else(h in t.keywords||e.allKeys&&!(h in t.skipKeywords))&&n(e,r,i,d,a+"/"+h,s,a,h,o)}i(o,a,s,u,l,c,f)}}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},73511:function(e,t,n){var r="[object Symbol]",i=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a="\\u0300-\\u036f\\ufe20-\\ufe23",s="\\u2700-\\u27bf",u="a-z\\xdf-\\xf6\\xf8-\\xff",l="A-Z\\xc0-\\xd6\\xd8-\\xde",c="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",f="['\u2019]",h="[\\ud800-\\udfff]",d="["+c+"]",p="["+a+"\\u20d0-\\u20f0]",v="\\d+",m="[\\u2700-\\u27bf]",g="["+u+"]",y="[^\\ud800-\\udfff"+c+v+s+u+l+"]",b="\\ud83c[\\udffb-\\udfff]",x="[^\\ud800-\\udfff]",_="(?:\\ud83c[\\udde6-\\uddff]){2}",w="[\\ud800-\\udbff][\\udc00-\\udfff]",S="["+l+"]",E="(?:"+g+"|"+y+")",k="(?:"+S+"|"+y+")",O="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",A="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",C="(?:"+p+"|"+b+")"+"?",M="[\\ufe0e\\ufe0f]?",T=M+C+("(?:\\u200d(?:"+[x,_,w].join("|")+")"+M+C+")*"),P="(?:"+[m,_,w].join("|")+")"+T,R="(?:"+[x+p+"?",p,_,w,h].join("|")+")",I=RegExp(f,"g"),L=RegExp(p,"g"),N=RegExp(b+"(?="+b+")|"+R+T,"g"),j=RegExp([S+"?"+g+"+"+O+"(?="+[d,S,"$"].join("|")+")",k+"+"+A+"(?="+[d,S+E,"$"].join("|")+")",S+"?"+E+"+"+O,S+"+"+A,v,P].join("|"),"g"),D=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),B=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,z="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,F="object"==typeof self&&self&&self.Object===Object&&self,V=z||F||Function("return this")();var U=function(e){return function(t){return null==e?void 0:e[t]}}({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"ss"});function Z(e){return D.test(e)}function H(e){return Z(e)?function(e){return e.match(N)||[]}(e):function(e){return e.split("")}(e)}var G=Object.prototype.toString,W=V.Symbol,q=W?W.prototype:void 0,K=q?q.toString:void 0;function Y(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&G.call(e)==r}(e))return K?K.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function X(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}(e,t,n)}function $(e){return null==e?"":Y(e)}var J,Q=(J=function(e,t,n){return t=t.toLowerCase(),e+(n?function(e){return te($(e).toLowerCase())}(t):t)},function(e){return function(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}(function(e,t,n){return e=$(e),void 0===(t=n?void 0:t)?function(e){return B.test(e)}(e)?function(e){return e.match(j)||[]}(e):function(e){return e.match(i)||[]}(e):e.match(t)||[]}(function(e){return(e=$(e))&&e.replace(o,U).replace(L,"")}(e).replace(I,"")),J,"")});var ee,te=(ee="toUpperCase",function(e){var t=Z(e=$(e))?H(e):void 0,n=t?t[0]:e.charAt(0),r=t?X(t,1).join(""):e.slice(1);return n[ee]()+r});e.exports=Q},55553:function(e,t,n){var r="[object Symbol]",i=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a="\\u2700-\\u27bf",s="a-z\\xdf-\\xf6\\xf8-\\xff",u="A-Z\\xc0-\\xd6\\xd8-\\xde",l="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",c="['\u2019]",f="["+l+"]",h="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",d="\\d+",p="[\\u2700-\\u27bf]",v="["+s+"]",m="[^\\ud800-\\udfff"+l+d+a+s+u+"]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",b="["+u+"]",x="(?:"+v+"|"+m+")",_="(?:"+b+"|"+m+")",w="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",S="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",E="(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?",k="[\\ufe0e\\ufe0f]?",O=k+E+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",g,y].join("|")+")"+k+E+")*"),A="(?:"+[p,g,y].join("|")+")"+O,C=RegExp(c,"g"),M=RegExp(h,"g"),T=RegExp([b+"?"+v+"+"+w+"(?="+[f,b,"$"].join("|")+")",_+"+"+S+"(?="+[f,b+x,"$"].join("|")+")",b+"?"+x+"+"+w,b+"+"+S,d,A].join("|"),"g"),P=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,R="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,I="object"==typeof self&&self&&self.Object===Object&&self,L=R||I||Function("return this")();var N=function(e){return function(t){return null==e?void 0:e[t]}}({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"ss"});var j=Object.prototype.toString,D=L.Symbol,B=D?D.prototype:void 0,z=B?B.toString:void 0;function F(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&j.call(e)==r}(e))return z?z.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function V(e){return null==e?"":F(e)}var U,Z=(U=function(e,t,n){return e+(n?"_":"")+t.toLowerCase()},function(e){return function(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}(function(e,t,n){return e=V(e),void 0===(t=n?void 0:t)?function(e){return P.test(e)}(e)?function(e){return e.match(T)||[]}(e):function(e){return e.match(i)||[]}(e):e.match(t)||[]}(function(e){return(e=V(e))&&e.replace(o,N).replace(M,"")}(e).replace(C,"")),U,"")});e.exports=Z},55902:function(e,t,n){var r=n(38478).runInContext();e.exports=n(87490)(r,r)},87490:function(e,t,n){var r=n(7929),i=n(77711),o=Array.prototype.push;function a(e,t){return 2==t?function(t,n){return e(t,n)}:function(t){return e(t)}}function s(e){for(var t=e?e.length:0,n=Array(t);t--;)n[t]=e[t];return n}function u(e,t){return function(){var n=arguments.length;if(n){for(var r=Array(n);n--;)r[n]=arguments[n];var i=r[0]=t.apply(void 0,r);return e.apply(void 0,r),i}}}e.exports=function e(t,n,l,c){var f="function"==typeof n,h=n===Object(n);if(h&&(c=l,l=n,n=void 0),null==l)throw new TypeError;c||(c={});var d=!("cap"in c)||c.cap,p=!("curry"in c)||c.curry,v=!("fixed"in c)||c.fixed,m=!("immutable"in c)||c.immutable,g=!("rearg"in c)||c.rearg,y=f?l:i,b="curry"in c&&c.curry,x="fixed"in c&&c.fixed,_="rearg"in c&&c.rearg,w=f?l.runInContext():void 0,S=f?l:{ary:t.ary,assign:t.assign,clone:t.clone,curry:t.curry,forEach:t.forEach,isArray:t.isArray,isError:t.isError,isFunction:t.isFunction,isWeakMap:t.isWeakMap,iteratee:t.iteratee,keys:t.keys,rearg:t.rearg,toInteger:t.toInteger,toPath:t.toPath},E=S.ary,k=S.assign,O=S.clone,A=S.curry,C=S.forEach,M=S.isArray,T=S.isError,P=S.isFunction,R=S.isWeakMap,I=S.keys,L=S.rearg,N=S.toInteger,j=S.toPath,D=I(r.aryMethod),B={castArray:function(e){return function(){var t=arguments[0];return M(t)?e(s(t)):e.apply(void 0,arguments)}},iteratee:function(e){return function(){var t=arguments[0],n=arguments[1],r=e(t,n),i=r.length;return d&&"number"==typeof n?(n=n>2?n-2:1,i&&i<=n?r:a(r,n)):r}},mixin:function(e){return function(t){var n=this;if(!P(n))return e(n,Object(t));var r=[];return C(I(t),(function(e){P(t[e])&&r.push([e,n.prototype[e]])})),e(n,Object(t)),C(r,(function(e){var t=e[1];P(t)?n.prototype[e[0]]=t:delete n.prototype[e[0]]})),n}},nthArg:function(e){return function(t){var n=t<0?1:N(t)+1;return A(e(t),n)}},rearg:function(e){return function(t,n){var r=n?n.length:0;return A(e(t,n),r)}},runInContext:function(n){return function(r){return e(t,n(r),c)}}};function z(e,t){if(d){var n=r.iterateeRearg[e];if(n)return function(e,t){return H(e,(function(e){var n=t.length;return function(e,t){return 2==t?function(t,n){return e.apply(void 0,arguments)}:function(t){return e.apply(void 0,arguments)}}(L(a(e,n),t),n)}))}(t,n);var i=!f&&r.iterateeAry[e];if(i)return function(e,t){return H(e,(function(e){return"function"==typeof e?a(e,t):e}))}(t,i)}return t}function F(e,t,n){if(v&&(x||!r.skipFixed[e])){var i=r.methodSpread[e],a=i&&i.start;return void 0===a?E(t,n):function(e,t){return function(){for(var n=arguments.length,r=n-1,i=Array(n);n--;)i[n]=arguments[n];var a=i[t],s=i.slice(0,t);return a&&o.apply(s,a),t!=r&&o.apply(s,i.slice(t+1)),e.apply(this,s)}}(t,a)}return t}function V(e,t,n){return g&&n>1&&(_||!r.skipRearg[e])?L(t,r.methodRearg[e]||r.aryRearg[n]):t}function U(e,t){for(var n=-1,r=(t=j(t)).length,i=r-1,o=O(Object(e)),a=o;null!=a&&++n<r;){var s=t[n],u=a[s];null==u||P(u)||T(u)||R(u)||(a[s]=O(n==i?u:Object(u))),a=a[s]}return o}function Z(t,n){var i=r.aliasToReal[t]||t,o=r.remap[i]||i,a=c;return function(t){var r=f?w:S,s=f?w[o]:n,u=k(k({},a),t);return e(r,i,s,u)}}function H(e,t){return function(){var n=arguments.length;if(!n)return e();for(var r=Array(n);n--;)r[n]=arguments[n];var i=g?0:n-1;return r[i]=t(r[i]),e.apply(void 0,r)}}function G(e,t,n){var i,o=r.aliasToReal[e]||e,a=t,l=B[o];return l?a=l(t):m&&(r.mutate.array[o]?a=u(t,s):r.mutate.object[o]?a=u(t,function(e){return function(t){return e({},t)}}(t)):r.mutate.set[o]&&(a=u(t,U))),C(D,(function(e){return C(r.aryMethod[e],(function(t){if(o==t){var n=r.methodSpread[o],s=n&&n.afterRearg;return i=s?F(o,V(o,a,e),e):V(o,F(o,a,e),e),i=function(e,t,n){return b||p&&n>1?A(t,n):t}(0,i=z(o,i),e),!1}})),!i})),i||(i=a),i==t&&(i=b?A(i,1):function(){return t.apply(this,arguments)}),i.convert=Z(o,t),i.placeholder=t.placeholder=n,i}if(!h)return G(n,l,y);var W=l,q=[];return C(D,(function(e){C(r.aryMethod[e],(function(e){var t=W[r.remap[e]||e];t&&q.push([e,G(e,t,W)])}))})),C(I(W),(function(e){var t=W[e];if("function"==typeof t){for(var n=q.length;n--;)if(q[n][0]==e)return;t.convert=Z(e,t),q.push([e,t])}})),C(q,(function(e){W[e[0]]=e[1]})),W.convert=function(e){return W.runInContext.convert(e)(void 0)},W.placeholder=W,C(I(W),(function(e){C(r.realToAlias[e]||[],(function(t){W[t]=W[e]}))})),W}},7929:function(e,t){t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},t.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,n=t.aliasToReal,r={};for(var i in n){var o=n[i];e.call(r,o)?r[o].push(i):r[o]=[i]}return r}(),t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},t.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},t.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},77711:function(e){e.exports={}},45239:function(e,t,n){var r;e=n.nmd(e),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",u=16,l=32,c=64,f=128,h=256,d=1/0,p=9007199254740991,v=NaN,m=4294967295,g=[["ary",f],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",l],["partialRight",c],["rearg",h]],y="[object Arguments]",b="[object Array]",x="[object Boolean]",_="[object Date]",w="[object Error]",S="[object Function]",E="[object GeneratorFunction]",k="[object Map]",O="[object Number]",A="[object Object]",C="[object Promise]",M="[object RegExp]",T="[object Set]",P="[object String]",R="[object Symbol]",I="[object WeakMap]",L="[object ArrayBuffer]",N="[object DataView]",j="[object Float32Array]",D="[object Float64Array]",B="[object Int8Array]",z="[object Int16Array]",F="[object Int32Array]",V="[object Uint8Array]",U="[object Uint8ClampedArray]",Z="[object Uint16Array]",H="[object Uint32Array]",G=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,X=RegExp(K.source),$=RegExp(Y.source),J=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,oe=RegExp(ie.source),ae=/^\s+/,se=/\s/,ue=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ve=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,xe=/^(?:0|[1-9]\d*)$/,_e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,Ee="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ke="\\u2700-\\u27bf",Oe="a-z\\xdf-\\xf6\\xf8-\\xff",Ae="A-Z\\xc0-\\xd6\\xd8-\\xde",Ce="\\ufe0e\\ufe0f",Me="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Te="['\u2019]",Pe="[\\ud800-\\udfff]",Re="["+Me+"]",Ie="["+Ee+"]",Le="\\d+",Ne="[\\u2700-\\u27bf]",je="["+Oe+"]",De="[^\\ud800-\\udfff"+Me+Le+ke+Oe+Ae+"]",Be="\\ud83c[\\udffb-\\udfff]",ze="[^\\ud800-\\udfff]",Fe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ve="[\\ud800-\\udbff][\\udc00-\\udfff]",Ue="["+Ae+"]",Ze="(?:"+je+"|"+De+")",He="(?:"+Ue+"|"+De+")",Ge="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",We="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",qe="(?:"+Ie+"|"+Be+")"+"?",Ke="[\\ufe0e\\ufe0f]?",Ye=Ke+qe+("(?:\\u200d(?:"+[ze,Fe,Ve].join("|")+")"+Ke+qe+")*"),Xe="(?:"+[Ne,Fe,Ve].join("|")+")"+Ye,$e="(?:"+[ze+Ie+"?",Ie,Fe,Ve,Pe].join("|")+")",Je=RegExp(Te,"g"),Qe=RegExp(Ie,"g"),et=RegExp(Be+"(?="+Be+")|"+$e+Ye,"g"),tt=RegExp([Ue+"?"+je+"+"+Ge+"(?="+[Re,Ue,"$"].join("|")+")",He+"+"+We+"(?="+[Re,Ue+Ze,"$"].join("|")+")",Ue+"?"+Ze+"+"+Ge,Ue+"+"+We,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Le,Xe].join("|"),"g"),nt=RegExp("[\\u200d\\ud800-\\udfff"+Ee+Ce+"]"),rt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,it=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ot=-1,at={};at[j]=at[D]=at[B]=at[z]=at[F]=at[V]=at[U]=at[Z]=at[H]=!0,at[y]=at[b]=at[L]=at[x]=at[N]=at[_]=at[w]=at[S]=at[k]=at[O]=at[A]=at[M]=at[T]=at[P]=at[I]=!1;var st={};st[y]=st[b]=st[L]=st[N]=st[x]=st[_]=st[j]=st[D]=st[B]=st[z]=st[F]=st[k]=st[O]=st[A]=st[M]=st[T]=st[P]=st[R]=st[V]=st[U]=st[Z]=st[H]=!0,st[w]=st[S]=st[I]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lt=parseFloat,ct=parseInt,ft="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ht="object"==typeof self&&self&&self.Object===Object&&self,dt=ft||ht||Function("return this")(),pt=t&&!t.nodeType&&t,vt=pt&&e&&!e.nodeType&&e,mt=vt&&vt.exports===pt,gt=mt&&ft.process,yt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||gt&&gt.binding&&gt.binding("util")}catch(t){}}(),bt=yt&&yt.isArrayBuffer,xt=yt&&yt.isDate,_t=yt&&yt.isMap,wt=yt&&yt.isRegExp,St=yt&&yt.isSet,Et=yt&&yt.isTypedArray;function kt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ot(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function At(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ct(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Tt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Pt(e,t){return!!(null==e?0:e.length)&&Vt(e,t,0)>-1}function Rt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function It(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Lt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Nt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function jt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Dt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Bt=Gt("length");function zt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Ft(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Vt(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Ft(e,Zt,n)}function Ut(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Zt(e){return e!==e}function Ht(e,t){var n=null==e?0:e.length;return n?Kt(e,t)/n:v}function Gt(e){return function(t){return null==t?i:t[e]}}function Wt(e){return function(t){return null==e?i:e[t]}}function qt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Kt(e,t){for(var n,r=-1,o=e.length;++r<o;){var a=t(e[r]);a!==i&&(n=n===i?a:n+a)}return n}function Yt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Xt(e){return e?e.slice(0,vn(e)+1).replace(ae,""):e}function $t(e){return function(t){return e(t)}}function Jt(e,t){return It(t,(function(t){return e[t]}))}function Qt(e,t){return e.has(t)}function en(e,t){for(var n=-1,r=e.length;++n<r&&Vt(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length;n--&&Vt(t,e[n],0)>-1;);return n}function nn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var rn=Wt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),on=Wt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(e){return"\\"+ut[e]}function sn(e){return nt.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function ln(e,t){return function(n){return e(t(n))}}function cn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==s||(e[n]=s,o[i++]=n)}return o}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function dn(e){return sn(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):Bt(e)}function pn(e){return sn(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function vn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var mn=Wt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var gn=function e(t){var n=(t=null==t?dt:gn.defaults(dt.Object(),t,gn.pick(dt,it))).Array,r=t.Date,se=t.Error,Ee=t.Function,ke=t.Math,Oe=t.Object,Ae=t.RegExp,Ce=t.String,Me=t.TypeError,Te=n.prototype,Pe=Ee.prototype,Re=Oe.prototype,Ie=t["__core-js_shared__"],Le=Pe.toString,Ne=Re.hasOwnProperty,je=0,De=function(){var e=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Be=Re.toString,ze=Le.call(Oe),Fe=dt._,Ve=Ae("^"+Le.call(Ne).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=mt?t.Buffer:i,Ze=t.Symbol,He=t.Uint8Array,Ge=Ue?Ue.allocUnsafe:i,We=ln(Oe.getPrototypeOf,Oe),qe=Oe.create,Ke=Re.propertyIsEnumerable,Ye=Te.splice,Xe=Ze?Ze.isConcatSpreadable:i,$e=Ze?Ze.iterator:i,et=Ze?Ze.toStringTag:i,nt=function(){try{var e=ho(Oe,"defineProperty");return e({},"",{}),e}catch(t){}}(),ut=t.clearTimeout!==dt.clearTimeout&&t.clearTimeout,ft=r&&r.now!==dt.Date.now&&r.now,ht=t.setTimeout!==dt.setTimeout&&t.setTimeout,pt=ke.ceil,vt=ke.floor,gt=Oe.getOwnPropertySymbols,yt=Ue?Ue.isBuffer:i,Bt=t.isFinite,Wt=Te.join,yn=ln(Oe.keys,Oe),bn=ke.max,xn=ke.min,_n=r.now,wn=t.parseInt,Sn=ke.random,En=Te.reverse,kn=ho(t,"DataView"),On=ho(t,"Map"),An=ho(t,"Promise"),Cn=ho(t,"Set"),Mn=ho(t,"WeakMap"),Tn=ho(Oe,"create"),Pn=Mn&&new Mn,Rn={},In=Fo(kn),Ln=Fo(On),Nn=Fo(An),jn=Fo(Cn),Dn=Fo(Mn),Bn=Ze?Ze.prototype:i,zn=Bn?Bn.valueOf:i,Fn=Bn?Bn.toString:i;function Vn(e){if(rs(e)&&!Wa(e)&&!(e instanceof Gn)){if(e instanceof Hn)return e;if(Ne.call(e,"__wrapped__"))return Vo(e)}return new Hn(e)}var Un=function(){function e(){}return function(t){if(!ns(t))return{};if(qe)return qe(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Zn(){}function Hn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Gn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Kn;++t<n;)this.add(e[t])}function Xn(e){var t=this.__data__=new qn(e);this.size=t.size}function $n(e,t){var n=Wa(e),r=!n&&Ga(e),i=!n&&!r&&Xa(e),o=!n&&!r&&!i&&fs(e),a=n||r||i||o,s=a?Yt(e.length,Ce):[],u=s.length;for(var l in e)!t&&!Ne.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||xo(l,u))||s.push(l);return s}function Jn(e){var t=e.length;return t?e[Yr(0,t-1)]:i}function Qn(e,t){return Do(Ti(e),ur(t,0,e.length))}function er(e){return Do(Ti(e))}function tr(e,t,n){(n!==i&&!Ua(e[t],n)||n===i&&!(t in e))&&ar(e,t,n)}function nr(e,t,n){var r=e[t];Ne.call(e,t)&&Ua(r,n)&&(n!==i||t in e)||ar(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(Ua(e[n][0],t))return n;return-1}function ir(e,t,n,r){return dr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function or(e,t){return e&&Pi(t,Is(t),e)}function ar(e,t,n){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var r=-1,o=t.length,a=n(o),s=null==e;++r<o;)a[r]=s?i:Cs(e,t[r]);return a}function ur(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function lr(e,t,n,r,o,a){var s,u=1&t,l=2&t,c=4&t;if(n&&(s=o?n(e,r,o,a):n(e)),s!==i)return s;if(!ns(e))return e;var f=Wa(e);if(f){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Ne.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return Ti(e,s)}else{var h=mo(e),d=h==S||h==E;if(Xa(e))return Ei(e,u);if(h==A||h==y||d&&!o){if(s=l||d?{}:yo(e),!u)return l?function(e,t){return Pi(e,vo(e),t)}(e,function(e,t){return e&&Pi(t,Ls(t),e)}(s,e)):function(e,t){return Pi(e,po(e),t)}(e,or(s,e))}else{if(!st[h])return o?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case L:return ki(e);case x:case _:return new r(+e);case N:return function(e,t){var n=t?ki(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case j:case D:case B:case z:case F:case V:case U:case Z:case H:return Oi(e,n);case k:return new r;case O:case P:return new r(e);case M:return function(e){var t=new e.constructor(e.source,ve.exec(e));return t.lastIndex=e.lastIndex,t}(e);case T:return new r;case R:return i=e,zn?Oe(zn.call(i)):{}}var i}(e,h,u)}}a||(a=new Xn);var p=a.get(e);if(p)return p;a.set(e,s),us(e)?e.forEach((function(r){s.add(lr(r,t,n,r,e,a))})):is(e)&&e.forEach((function(r,i){s.set(i,lr(r,t,n,i,e,a))}));var v=f?i:(c?l?oo:io:l?Ls:Is)(e);return At(v||e,(function(r,i){v&&(r=e[i=r]),nr(s,i,lr(r,t,n,i,e,a))})),s}function cr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Oe(e);r--;){var o=n[r],a=t[o],s=e[o];if(s===i&&!(o in e)||!a(s))return!1}return!0}function fr(e,t,n){if("function"!=typeof e)throw new Me(o);return Io((function(){e.apply(i,n)}),t)}function hr(e,t,n,r){var i=-1,o=Pt,a=!0,s=e.length,u=[],l=t.length;if(!s)return u;n&&(t=It(t,$t(n))),r?(o=Rt,a=!1):t.length>=200&&(o=Qt,a=!1,t=new Yn(t));e:for(;++i<s;){var c=e[i],f=null==n?c:n(c);if(c=r||0!==c?c:0,a&&f===f){for(var h=l;h--;)if(t[h]===f)continue e;u.push(c)}else o(t,f,r)||u.push(c)}return u}Vn.templateSettings={escape:J,evaluate:Q,interpolate:ee,variable:"",imports:{_:Vn}},Vn.prototype=Zn.prototype,Vn.prototype.constructor=Vn,Hn.prototype=Un(Zn.prototype),Hn.prototype.constructor=Hn,Gn.prototype=Un(Zn.prototype),Gn.prototype.constructor=Gn,Wn.prototype.clear=function(){this.__data__=Tn?Tn(null):{},this.size=0},Wn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Wn.prototype.get=function(e){var t=this.__data__;if(Tn){var n=t[e];return n===a?i:n}return Ne.call(t,e)?t[e]:i},Wn.prototype.has=function(e){var t=this.__data__;return Tn?t[e]!==i:Ne.call(t,e)},Wn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Tn&&t===i?a:t,this},qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,!0)},qn.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?i:t[n][1]},qn.prototype.has=function(e){return rr(this.__data__,e)>-1},qn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Kn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(On||qn),string:new Wn}},Kn.prototype.delete=function(e){var t=co(this,e).delete(e);return this.size-=t?1:0,t},Kn.prototype.get=function(e){return co(this,e).get(e)},Kn.prototype.has=function(e){return co(this,e).has(e)},Kn.prototype.set=function(e,t){var n=co(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Yn.prototype.add=Yn.prototype.push=function(e){return this.__data__.set(e,a),this},Yn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.clear=function(){this.__data__=new qn,this.size=0},Xn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Xn.prototype.get=function(e){return this.__data__.get(e)},Xn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof qn){var r=n.__data__;if(!On||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Kn(r)}return n.set(e,t),this.size=n.size,this};var dr=Li(_r),pr=Li(wr,!0);function vr(e,t){var n=!0;return dr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function mr(e,t,n){for(var r=-1,o=e.length;++r<o;){var a=e[r],s=t(a);if(null!=s&&(u===i?s===s&&!cs(s):n(s,u)))var u=s,l=a}return l}function gr(e,t){var n=[];return dr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function yr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=bo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?yr(s,t-1,n,r,i):Lt(i,s):r||(i[i.length]=s)}return i}var br=Ni(),xr=Ni(!0);function _r(e,t){return e&&br(e,t,Is)}function wr(e,t){return e&&xr(e,t,Is)}function Sr(e,t){return Tt(t,(function(t){return Qa(e[t])}))}function Er(e,t){for(var n=0,r=(t=xi(t,e)).length;null!=e&&n<r;)e=e[zo(t[n++])];return n&&n==r?e:i}function kr(e,t,n){var r=t(e);return Wa(e)?r:Lt(r,n(e))}function Or(e){return null==e?e===i?"[object Undefined]":"[object Null]":et&&et in Oe(e)?function(e){var t=Ne.call(e,et),n=e[et];try{e[et]=i;var r=!0}catch(a){}var o=Be.call(e);r&&(t?e[et]=n:delete e[et]);return o}(e):function(e){return Be.call(e)}(e)}function Ar(e,t){return e>t}function Cr(e,t){return null!=e&&Ne.call(e,t)}function Mr(e,t){return null!=e&&t in Oe(e)}function Tr(e,t,r){for(var o=r?Rt:Pt,a=e[0].length,s=e.length,u=s,l=n(s),c=1/0,f=[];u--;){var h=e[u];u&&t&&(h=It(h,$t(t))),c=xn(h.length,c),l[u]=!r&&(t||a>=120&&h.length>=120)?new Yn(u&&h):i}h=e[0];var d=-1,p=l[0];e:for(;++d<a&&f.length<c;){var v=h[d],m=t?t(v):v;if(v=r||0!==v?v:0,!(p?Qt(p,m):o(f,m,r))){for(u=s;--u;){var g=l[u];if(!(g?Qt(g,m):o(e[u],m,r)))continue e}p&&p.push(m),f.push(v)}}return f}function Pr(e,t,n){var r=null==(e=Mo(e,t=xi(t,e)))?e:e[zo(Jo(t))];return null==r?i:kt(r,e,n)}function Rr(e){return rs(e)&&Or(e)==y}function Ir(e,t,n,r,o){return e===t||(null==e||null==t||!rs(e)&&!rs(t)?e!==e&&t!==t:function(e,t,n,r,o,a){var s=Wa(e),u=Wa(t),l=s?b:mo(e),c=u?b:mo(t),f=(l=l==y?A:l)==A,h=(c=c==y?A:c)==A,d=l==c;if(d&&Xa(e)){if(!Xa(t))return!1;s=!0,f=!1}if(d&&!f)return a||(a=new Xn),s||fs(e)?no(e,t,n,r,o,a):function(e,t,n,r,i,o,a){switch(n){case N:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case L:return!(e.byteLength!=t.byteLength||!o(new He(e),new He(t)));case x:case _:case O:return Ua(+e,+t);case w:return e.name==t.name&&e.message==t.message;case M:case P:return e==t+"";case k:var s=un;case T:var u=1&r;if(s||(s=fn),e.size!=t.size&&!u)return!1;var l=a.get(e);if(l)return l==t;r|=2,a.set(e,t);var c=no(s(e),s(t),r,i,o,a);return a.delete(e),c;case R:if(zn)return zn.call(e)==zn.call(t)}return!1}(e,t,l,n,r,o,a);if(!(1&n)){var p=f&&Ne.call(e,"__wrapped__"),v=h&&Ne.call(t,"__wrapped__");if(p||v){var m=p?e.value():e,g=v?t.value():t;return a||(a=new Xn),o(m,g,n,r,a)}}if(!d)return!1;return a||(a=new Xn),function(e,t,n,r,o,a){var s=1&n,u=io(e),l=u.length,c=io(t).length;if(l!=c&&!s)return!1;var f=l;for(;f--;){var h=u[f];if(!(s?h in t:Ne.call(t,h)))return!1}var d=a.get(e),p=a.get(t);if(d&&p)return d==t&&p==e;var v=!0;a.set(e,t),a.set(t,e);var m=s;for(;++f<l;){var g=e[h=u[f]],y=t[h];if(r)var b=s?r(y,g,h,t,e,a):r(g,y,h,e,t,a);if(!(b===i?g===y||o(g,y,n,r,a):b)){v=!1;break}m||(m="constructor"==h)}if(v&&!m){var x=e.constructor,_=t.constructor;x==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _||(v=!1)}return a.delete(e),a.delete(t),v}(e,t,n,r,o,a)}(e,t,n,r,Ir,o))}function Lr(e,t,n,r){var o=n.length,a=o,s=!r;if(null==e)return!a;for(e=Oe(e);o--;){var u=n[o];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){var l=(u=n[o])[0],c=e[l],f=u[1];if(s&&u[2]){if(c===i&&!(l in e))return!1}else{var h=new Xn;if(r)var d=r(c,f,l,e,t,h);if(!(d===i?Ir(f,c,3,r,h):d))return!1}}return!0}function Nr(e){return!(!ns(e)||function(e){return!!De&&De in e}(e))&&(Qa(e)?Ve:ye).test(Fo(e))}function jr(e){return"function"==typeof e?e:null==e?ou:"object"==typeof e?Wa(e)?Ur(e[0],e[1]):Vr(e):pu(e)}function Dr(e){if(!ko(e))return yn(e);var t=[];for(var n in Oe(e))Ne.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Br(e){if(!ns(e))return function(e){var t=[];if(null!=e)for(var n in Oe(e))t.push(n);return t}(e);var t=ko(e),n=[];for(var r in e)("constructor"!=r||!t&&Ne.call(e,r))&&n.push(r);return n}function zr(e,t){return e<t}function Fr(e,t){var r=-1,i=Ka(e)?n(e.length):[];return dr(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}function Vr(e){var t=fo(e);return 1==t.length&&t[0][2]?Ao(t[0][0],t[0][1]):function(n){return n===e||Lr(n,e,t)}}function Ur(e,t){return wo(e)&&Oo(t)?Ao(zo(e),t):function(n){var r=Cs(n,e);return r===i&&r===t?Ms(n,e):Ir(t,r,3)}}function Zr(e,t,n,r,o){e!==t&&br(t,(function(a,s){if(o||(o=new Xn),ns(a))!function(e,t,n,r,o,a,s){var u=Po(e,n),l=Po(t,n),c=s.get(l);if(c)return void tr(e,n,c);var f=a?a(u,l,n+"",e,t,s):i,h=f===i;if(h){var d=Wa(l),p=!d&&Xa(l),v=!d&&!p&&fs(l);f=l,d||p||v?Wa(u)?f=u:Ya(u)?f=Ti(u):p?(h=!1,f=Ei(l,!0)):v?(h=!1,f=Oi(l,!0)):f=[]:as(l)||Ga(l)?(f=u,Ga(u)?f=bs(u):ns(u)&&!Qa(u)||(f=yo(l))):h=!1}h&&(s.set(l,f),o(f,l,r,a,s),s.delete(l));tr(e,n,f)}(e,t,s,n,Zr,r,o);else{var u=r?r(Po(e,s),a,s+"",e,t,o):i;u===i&&(u=a),tr(e,s,u)}}),Ls)}function Hr(e,t){var n=e.length;if(n)return xo(t+=t<0?n:0,n)?e[t]:i}function Gr(e,t,n){t=t.length?It(t,(function(e){return Wa(e)?function(t){return Er(t,1===e.length?e[0]:e)}:e})):[ou];var r=-1;t=It(t,$t(lo()));var i=Fr(e,(function(e,n,i){var o=It(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var u=Ai(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Wr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Er(e,a);n(s,a)&&ei(o,xi(a,e),s)}return o}function qr(e,t,n,r){var i=r?Ut:Vt,o=-1,a=t.length,s=e;for(e===t&&(t=Ti(t)),n&&(s=It(e,$t(n)));++o<a;)for(var u=0,l=t[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==e&&Ye.call(s,u,1),Ye.call(e,u,1);return e}function Kr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;xo(i)?Ye.call(e,i,1):hi(e,i)}}return e}function Yr(e,t){return e+vt(Sn()*(t-e+1))}function Xr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=vt(t/2))&&(e+=e)}while(t);return n}function $r(e,t){return Lo(Co(e,t,ou),e+"")}function Jr(e){return Jn(Us(e))}function Qr(e,t){var n=Us(e);return Do(n,ur(t,0,n.length))}function ei(e,t,n,r){if(!ns(e))return e;for(var o=-1,a=(t=xi(t,e)).length,s=a-1,u=e;null!=u&&++o<a;){var l=zo(t[o]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=s){var f=u[l];(c=r?r(f,l,u):i)===i&&(c=ns(f)?f:xo(t[o+1])?[]:{})}nr(u,l,c),u=u[l]}return e}var ti=Pn?function(e,t){return Pn.set(e,t),e}:ou,ni=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:nu(t),writable:!0})}:ou;function ri(e){return Do(Us(e))}function ii(e,t,r){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=n(o);++i<o;)a[i]=e[i+t];return a}function oi(e,t){var n;return dr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ai(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!cs(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return si(e,t,ou,n)}function si(e,t,n,r){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!==t,u=null===t,l=cs(t),c=t===i;o<a;){var f=vt((o+a)/2),h=n(e[f]),d=h!==i,p=null===h,v=h===h,m=cs(h);if(s)var g=r||v;else g=c?v&&(r||d):u?v&&d&&(r||!p):l?v&&d&&!p&&(r||!m):!p&&!m&&(r?h<=t:h<t);g?o=f+1:a=f}return xn(a,4294967294)}function ui(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ua(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function li(e){return"number"==typeof e?e:cs(e)?v:+e}function ci(e){if("string"==typeof e)return e;if(Wa(e))return It(e,ci)+"";if(cs(e))return Fn?Fn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fi(e,t,n){var r=-1,i=Pt,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=Rt;else if(o>=200){var l=t?null:Xi(e);if(l)return fn(l);a=!1,i=Qt,u=new Yn}else u=t?[]:s;e:for(;++r<o;){var c=e[r],f=t?t(c):c;if(c=n||0!==c?c:0,a&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(c)}else i(u,f,n)||(u!==s&&u.push(f),s.push(c))}return s}function hi(e,t){return null==(e=Mo(e,t=xi(t,e)))||delete e[zo(Jo(t))]}function di(e,t,n,r){return ei(e,t,n(Er(e,t)),r)}function pi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ii(e,r?0:o,r?o+1:i):ii(e,r?o+1:0,r?i:o)}function vi(e,t){var n=e;return n instanceof Gn&&(n=n.value()),Nt(t,(function(e,t){return t.func.apply(t.thisArg,Lt([e],t.args))}),n)}function mi(e,t,r){var i=e.length;if(i<2)return i?fi(e[0]):[];for(var o=-1,a=n(i);++o<i;)for(var s=e[o],u=-1;++u<i;)u!=o&&(a[o]=hr(a[o]||s,e[u],t,r));return fi(yr(a,1),t,r)}function gi(e,t,n){for(var r=-1,o=e.length,a=t.length,s={};++r<o;){var u=r<a?t[r]:i;n(s,e[r],u)}return s}function yi(e){return Ya(e)?e:[]}function bi(e){return"function"==typeof e?e:ou}function xi(e,t){return Wa(e)?e:wo(e,t)?[e]:Bo(xs(e))}var _i=$r;function wi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ii(e,t,n)}var Si=ut||function(e){return dt.clearTimeout(e)};function Ei(e,t){if(t)return e.slice();var n=e.length,r=Ge?Ge(n):new e.constructor(n);return e.copy(r),r}function ki(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function Oi(e,t){var n=t?ki(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ai(e,t){if(e!==t){var n=e!==i,r=null===e,o=e===e,a=cs(e),s=t!==i,u=null===t,l=t===t,c=cs(t);if(!u&&!c&&!a&&e>t||a&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!o)return 1;if(!r&&!a&&!c&&e<t||c&&n&&o&&!r&&!a||u&&n&&o||!s&&o||!l)return-1}return 0}function Ci(e,t,r,i){for(var o=-1,a=e.length,s=r.length,u=-1,l=t.length,c=bn(a-s,0),f=n(l+c),h=!i;++u<l;)f[u]=t[u];for(;++o<s;)(h||o<a)&&(f[r[o]]=e[o]);for(;c--;)f[u++]=e[o++];return f}function Mi(e,t,r,i){for(var o=-1,a=e.length,s=-1,u=r.length,l=-1,c=t.length,f=bn(a-u,0),h=n(f+c),d=!i;++o<f;)h[o]=e[o];for(var p=o;++l<c;)h[p+l]=t[l];for(;++s<u;)(d||o<a)&&(h[p+r[s]]=e[o++]);return h}function Ti(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Pi(e,t,n,r){var o=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var u=t[a],l=r?r(n[u],e[u],u,n,e):i;l===i&&(l=e[u]),o?ar(n,u,l):nr(n,u,l)}return n}function Ri(e,t){return function(n,r){var i=Wa(n)?Ot:ir,o=t?t():{};return i(n,e,lo(r,2),o)}}function Ii(e){return $r((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(o--,a):i,s&&_o(n[0],n[1],s)&&(a=o<3?i:a,o=1),t=Oe(t);++r<o;){var u=n[r];u&&e(t,u,r,a)}return t}))}function Li(e,t){return function(n,r){if(null==n)return n;if(!Ka(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Oe(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Ni(e){return function(t,n,r){for(var i=-1,o=Oe(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function ji(e){return function(t){var n=sn(t=xs(t))?pn(t):i,r=n?n[0]:t.charAt(0),o=n?wi(n,1).join(""):t.slice(1);return r[e]()+o}}function Di(e){return function(t){return Nt(Qs(Gs(t).replace(Je,"")),e,"")}}function Bi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Un(e.prototype),r=e.apply(n,t);return ns(r)?r:n}}function zi(e){return function(t,n,r){var o=Oe(t);if(!Ka(t)){var a=lo(n,3);t=Is(t),n=function(e){return a(o[e],e,o)}}var s=e(t,n,r);return s>-1?o[a?t[s]:s]:i}}function Fi(e){return ro((function(t){var n=t.length,r=n,a=Hn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Me(o);if(a&&!u&&"wrapper"==so(s))var u=new Hn([],!0)}for(r=u?r:n;++r<n;){var l=so(s=t[r]),c="wrapper"==l?ao(s):i;u=c&&So(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[so(c[0])].apply(u,c[3]):1==s.length&&So(s)?u[l]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Wa(r))return u.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Vi(e,t,r,o,a,s,u,l,c,h){var d=t&f,p=1&t,v=2&t,m=24&t,g=512&t,y=v?i:Bi(e);return function i(){for(var f=arguments.length,b=n(f),x=f;x--;)b[x]=arguments[x];if(m)var _=uo(i),w=nn(b,_);if(o&&(b=Ci(b,o,a,m)),s&&(b=Mi(b,s,u,m)),f-=w,m&&f<h){var S=cn(b,_);return Ki(e,t,Vi,i.placeholder,r,b,S,l,c,h-f)}var E=p?r:this,k=v?E[e]:e;return f=b.length,l?b=To(b,l):g&&f>1&&b.reverse(),d&&c<f&&(b.length=c),this&&this!==dt&&this instanceof i&&(k=y||Bi(k)),k.apply(E,b)}}function Ui(e,t){return function(n,r){return function(e,t,n,r){return _r(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Zi(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ci(n),r=ci(r)):(n=li(n),r=li(r)),o=e(n,r)}return o}}function Hi(e){return ro((function(t){return t=It(t,$t(lo())),$r((function(n){var r=this;return e(t,(function(e){return kt(e,r,n)}))}))}))}function Gi(e,t){var n=(t=t===i?" ":ci(t)).length;if(n<2)return n?Xr(t,e):t;var r=Xr(t,pt(e/dn(t)));return sn(t)?wi(pn(r),0,e).join(""):r.slice(0,e)}function Wi(e){return function(t,r,o){return o&&"number"!=typeof o&&_o(t,r,o)&&(r=o=i),t=vs(t),r===i?(r=t,t=0):r=vs(r),function(e,t,r,i){for(var o=-1,a=bn(pt((t-e)/(r||1)),0),s=n(a);a--;)s[i?a:++o]=e,e+=r;return s}(t,r,o=o===i?t<r?1:-1:vs(o),e)}}function qi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ys(t),n=ys(n)),e(t,n)}}function Ki(e,t,n,r,o,a,s,u,f,h){var d=8&t;t|=d?l:c,4&(t&=~(d?c:l))||(t&=-4);var p=[e,t,o,d?a:i,d?s:i,d?i:a,d?i:s,u,f,h],v=n.apply(i,p);return So(e)&&Ro(v,p),v.placeholder=r,No(v,e,t)}function Yi(e){var t=ke[e];return function(e,n){if(e=ys(e),(n=null==n?0:xn(ms(n),292))&&Bt(e)){var r=(xs(e)+"e").split("e");return+((r=(xs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Xi=Cn&&1/fn(new Cn([,-0]))[1]==d?function(e){return new Cn(e)}:cu;function $i(e){return function(t){var n=mo(t);return n==k?un(t):n==T?hn(t):function(e,t){return It(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ji(e,t,r,a,d,p,v,m){var g=2&t;if(!g&&"function"!=typeof e)throw new Me(o);var y=a?a.length:0;if(y||(t&=-97,a=d=i),v=v===i?v:bn(ms(v),0),m=m===i?m:ms(m),y-=d?d.length:0,t&c){var b=a,x=d;a=d=i}var _=g?i:ao(e),w=[e,t,r,a,d,b,x,p,v,m];if(_&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=r==f&&8==n||r==f&&n==h&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var l=e[3];e[3]=l?Ci(l,u,t[4]):u,e[4]=l?cn(e[3],s):t[4]}(u=t[5])&&(l=e[5],e[5]=l?Mi(l,u,t[6]):u,e[6]=l?cn(e[5],s):t[6]);(u=t[7])&&(e[7]=u);r&f&&(e[8]=null==e[8]?t[8]:xn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(w,_),e=w[0],t=w[1],r=w[2],a=w[3],d=w[4],!(m=w[9]=w[9]===i?g?0:e.length:bn(w[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)S=8==t||t==u?function(e,t,r){var o=Bi(e);return function a(){for(var s=arguments.length,u=n(s),l=s,c=uo(a);l--;)u[l]=arguments[l];var f=s<3&&u[0]!==c&&u[s-1]!==c?[]:cn(u,c);return(s-=f.length)<r?Ki(e,t,Vi,a.placeholder,i,u,f,i,i,r-s):kt(this&&this!==dt&&this instanceof a?o:e,this,u)}}(e,t,m):t!=l&&33!=t||d.length?Vi.apply(i,w):function(e,t,r,i){var o=1&t,a=Bi(e);return function t(){for(var s=-1,u=arguments.length,l=-1,c=i.length,f=n(c+u),h=this&&this!==dt&&this instanceof t?a:e;++l<c;)f[l]=i[l];for(;u--;)f[l++]=arguments[++s];return kt(h,o?r:this,f)}}(e,t,r,a);else var S=function(e,t,n){var r=1&t,i=Bi(e);return function t(){return(this&&this!==dt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return No((_?ti:Ro)(S,w),e,t)}function Qi(e,t,n,r){return e===i||Ua(e,Re[n])&&!Ne.call(r,n)?t:e}function eo(e,t,n,r,o,a){return ns(e)&&ns(t)&&(a.set(t,e),Zr(e,t,i,eo,a),a.delete(t)),e}function to(e){return as(e)?i:e}function no(e,t,n,r,o,a){var s=1&n,u=e.length,l=t.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(e),f=a.get(t);if(c&&f)return c==t&&f==e;var h=-1,d=!0,p=2&n?new Yn:i;for(a.set(e,t),a.set(t,e);++h<u;){var v=e[h],m=t[h];if(r)var g=s?r(m,v,h,t,e,a):r(v,m,h,e,t,a);if(g!==i){if(g)continue;d=!1;break}if(p){if(!Dt(t,(function(e,t){if(!Qt(p,t)&&(v===e||o(v,e,n,r,a)))return p.push(t)}))){d=!1;break}}else if(v!==m&&!o(v,m,n,r,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function ro(e){return Lo(Co(e,i,qo),e+"")}function io(e){return kr(e,Is,po)}function oo(e){return kr(e,Ls,vo)}var ao=Pn?function(e){return Pn.get(e)}:cu;function so(e){for(var t=e.name+"",n=Rn[t],r=Ne.call(Rn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function uo(e){return(Ne.call(Vn,"placeholder")?Vn:e).placeholder}function lo(){var e=Vn.iteratee||au;return e=e===au?jr:e,arguments.length?e(arguments[0],arguments[1]):e}function co(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function fo(e){for(var t=Is(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Oo(i)]}return t}function ho(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Nr(n)?n:i}var po=gt?function(e){return null==e?[]:(e=Oe(e),Tt(gt(e),(function(t){return Ke.call(e,t)})))}:gu,vo=gt?function(e){for(var t=[];e;)Lt(t,po(e)),e=We(e);return t}:gu,mo=Or;function go(e,t,n){for(var r=-1,i=(t=xi(t,e)).length,o=!1;++r<i;){var a=zo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&ts(i)&&xo(a,i)&&(Wa(e)||Ga(e))}function yo(e){return"function"!=typeof e.constructor||ko(e)?{}:Un(We(e))}function bo(e){return Wa(e)||Ga(e)||!!(Xe&&e&&e[Xe])}function xo(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&xe.test(e))&&e>-1&&e%1==0&&e<t}function _o(e,t,n){if(!ns(n))return!1;var r=typeof t;return!!("number"==r?Ka(n)&&xo(t,n.length):"string"==r&&t in n)&&Ua(n[t],e)}function wo(e,t){if(Wa(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!cs(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Oe(t))}function So(e){var t=so(e),n=Vn[t];if("function"!=typeof n||!(t in Gn.prototype))return!1;if(e===n)return!0;var r=ao(n);return!!r&&e===r[0]}(kn&&mo(new kn(new ArrayBuffer(1)))!=N||On&&mo(new On)!=k||An&&mo(An.resolve())!=C||Cn&&mo(new Cn)!=T||Mn&&mo(new Mn)!=I)&&(mo=function(e){var t=Or(e),n=t==A?e.constructor:i,r=n?Fo(n):"";if(r)switch(r){case In:return N;case Ln:return k;case Nn:return C;case jn:return T;case Dn:return I}return t});var Eo=Ie?Qa:yu;function ko(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Re)}function Oo(e){return e===e&&!ns(e)}function Ao(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Oe(n)))}}function Co(e,t,r){return t=bn(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=bn(i.length-t,0),s=n(a);++o<a;)s[o]=i[t+o];o=-1;for(var u=n(t+1);++o<t;)u[o]=i[o];return u[t]=r(s),kt(e,this,u)}}function Mo(e,t){return t.length<2?e:Er(e,ii(t,0,-1))}function To(e,t){for(var n=e.length,r=xn(t.length,n),o=Ti(e);r--;){var a=t[r];e[r]=xo(a,n)?o[a]:i}return e}function Po(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Ro=jo(ti),Io=ht||function(e,t){return dt.setTimeout(e,t)},Lo=jo(ni);function No(e,t,n){var r=t+"";return Lo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ue,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return At(g,(function(n){var r="_."+n[0];t&n[1]&&!Pt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(le);return t?t[1].split(ce):[]}(r),n)))}function jo(e){var t=0,n=0;return function(){var r=_n(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Do(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var a=Yr(n,o),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Bo=function(e){var t=ja(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(de,"$1"):n||e)})),t}));function zo(e){if("string"==typeof e||cs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Fo(e){if(null!=e){try{return Le.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Vo(e){if(e instanceof Gn)return e.clone();var t=new Hn(e.__wrapped__,e.__chain__);return t.__actions__=Ti(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Uo=$r((function(e,t){return Ya(e)?hr(e,yr(t,1,Ya,!0)):[]})),Zo=$r((function(e,t){var n=Jo(t);return Ya(n)&&(n=i),Ya(e)?hr(e,yr(t,1,Ya,!0),lo(n,2)):[]})),Ho=$r((function(e,t){var n=Jo(t);return Ya(n)&&(n=i),Ya(e)?hr(e,yr(t,1,Ya,!0),i,n):[]}));function Go(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=bn(r+i,0)),Ft(e,lo(t,3),i)}function Wo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=ms(n),o=n<0?bn(r+o,0):xn(o,r-1)),Ft(e,lo(t,3),o,!0)}function qo(e){return(null==e?0:e.length)?yr(e,1):[]}function Ko(e){return e&&e.length?e[0]:i}var Yo=$r((function(e){var t=It(e,yi);return t.length&&t[0]===e[0]?Tr(t):[]})),Xo=$r((function(e){var t=Jo(e),n=It(e,yi);return t===Jo(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Tr(n,lo(t,2)):[]})),$o=$r((function(e){var t=Jo(e),n=It(e,yi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Tr(n,i,t):[]}));function Jo(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Qo=$r(ea);function ea(e,t){return e&&e.length&&t&&t.length?qr(e,t):e}var ta=ro((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return Kr(e,It(t,(function(e){return xo(e,n)?+e:e})).sort(Ai)),r}));function na(e){return null==e?e:En.call(e)}var ra=$r((function(e){return fi(yr(e,1,Ya,!0))})),ia=$r((function(e){var t=Jo(e);return Ya(t)&&(t=i),fi(yr(e,1,Ya,!0),lo(t,2))})),oa=$r((function(e){var t=Jo(e);return t="function"==typeof t?t:i,fi(yr(e,1,Ya,!0),i,t)}));function aa(e){if(!e||!e.length)return[];var t=0;return e=Tt(e,(function(e){if(Ya(e))return t=bn(e.length,t),!0})),Yt(t,(function(t){return It(e,Gt(t))}))}function sa(e,t){if(!e||!e.length)return[];var n=aa(e);return null==t?n:It(n,(function(e){return kt(t,i,e)}))}var ua=$r((function(e,t){return Ya(e)?hr(e,t):[]})),la=$r((function(e){return mi(Tt(e,Ya))})),ca=$r((function(e){var t=Jo(e);return Ya(t)&&(t=i),mi(Tt(e,Ya),lo(t,2))})),fa=$r((function(e){var t=Jo(e);return t="function"==typeof t?t:i,mi(Tt(e,Ya),i,t)})),ha=$r(aa);var da=$r((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,sa(e,n)}));function pa(e){var t=Vn(e);return t.__chain__=!0,t}function va(e,t){return t(e)}var ma=ro((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Gn&&xo(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:va,args:[o],thisArg:i}),new Hn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)}));var ga=Ri((function(e,t,n){Ne.call(e,n)?++e[n]:ar(e,n,1)}));var ya=zi(Go),ba=zi(Wo);function xa(e,t){return(Wa(e)?At:dr)(e,lo(t,3))}function _a(e,t){return(Wa(e)?Ct:pr)(e,lo(t,3))}var wa=Ri((function(e,t,n){Ne.call(e,n)?e[n].push(t):ar(e,n,[t])}));var Sa=$r((function(e,t,r){var i=-1,o="function"==typeof t,a=Ka(e)?n(e.length):[];return dr(e,(function(e){a[++i]=o?kt(t,e,r):Pr(e,t,r)})),a})),Ea=Ri((function(e,t,n){ar(e,n,t)}));function ka(e,t){return(Wa(e)?It:Fr)(e,lo(t,3))}var Oa=Ri((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Aa=$r((function(e,t){if(null==e)return[];var n=t.length;return n>1&&_o(e,t[0],t[1])?t=[]:n>2&&_o(t[0],t[1],t[2])&&(t=[t[0]]),Gr(e,yr(t,1),[])})),Ca=ft||function(){return dt.Date.now()};function Ma(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Ji(e,f,i,i,i,i,t)}function Ta(e,t){var n;if("function"!=typeof t)throw new Me(o);return e=ms(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Pa=$r((function(e,t,n){var r=1;if(n.length){var i=cn(n,uo(Pa));r|=l}return Ji(e,r,t,n,i)})),Ra=$r((function(e,t,n){var r=3;if(n.length){var i=cn(n,uo(Ra));r|=l}return Ji(t,r,e,n,i)}));function Ia(e,t,n){var r,a,s,u,l,c,f=0,h=!1,d=!1,p=!0;if("function"!=typeof e)throw new Me(o);function v(t){var n=r,o=a;return r=a=i,f=t,u=e.apply(o,n)}function m(e){return f=e,l=Io(y,t),h?v(e):u}function g(e){var n=e-c;return c===i||n>=t||n<0||d&&e-f>=s}function y(){var e=Ca();if(g(e))return b(e);l=Io(y,function(e){var n=t-(e-c);return d?xn(n,s-(e-f)):n}(e))}function b(e){return l=i,p&&r?v(e):(r=a=i,u)}function x(){var e=Ca(),n=g(e);if(r=arguments,a=this,c=e,n){if(l===i)return m(c);if(d)return Si(l),l=Io(y,t),v(c)}return l===i&&(l=Io(y,t)),u}return t=ys(t)||0,ns(n)&&(h=!!n.leading,s=(d="maxWait"in n)?bn(ys(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),x.cancel=function(){l!==i&&Si(l),f=0,r=c=a=l=i},x.flush=function(){return l===i?u:b(Ca())},x}var La=$r((function(e,t){return fr(e,1,t)})),Na=$r((function(e,t,n){return fr(e,ys(t)||0,n)}));function ja(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Me(o);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ja.Cache||Kn),n}function Da(e){if("function"!=typeof e)throw new Me(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}ja.Cache=Kn;var Ba=_i((function(e,t){var n=(t=1==t.length&&Wa(t[0])?It(t[0],$t(lo())):It(yr(t,1),$t(lo()))).length;return $r((function(r){for(var i=-1,o=xn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return kt(e,this,r)}))})),za=$r((function(e,t){var n=cn(t,uo(za));return Ji(e,l,i,t,n)})),Fa=$r((function(e,t){var n=cn(t,uo(Fa));return Ji(e,c,i,t,n)})),Va=ro((function(e,t){return Ji(e,h,i,i,i,t)}));function Ua(e,t){return e===t||e!==e&&t!==t}var Za=qi(Ar),Ha=qi((function(e,t){return e>=t})),Ga=Rr(function(){return arguments}())?Rr:function(e){return rs(e)&&Ne.call(e,"callee")&&!Ke.call(e,"callee")},Wa=n.isArray,qa=bt?$t(bt):function(e){return rs(e)&&Or(e)==L};function Ka(e){return null!=e&&ts(e.length)&&!Qa(e)}function Ya(e){return rs(e)&&Ka(e)}var Xa=yt||yu,$a=xt?$t(xt):function(e){return rs(e)&&Or(e)==_};function Ja(e){if(!rs(e))return!1;var t=Or(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!as(e)}function Qa(e){if(!ns(e))return!1;var t=Or(e);return t==S||t==E||"[object AsyncFunction]"==t||"[object Proxy]"==t}function es(e){return"number"==typeof e&&e==ms(e)}function ts(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function ns(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function rs(e){return null!=e&&"object"==typeof e}var is=_t?$t(_t):function(e){return rs(e)&&mo(e)==k};function os(e){return"number"==typeof e||rs(e)&&Or(e)==O}function as(e){if(!rs(e)||Or(e)!=A)return!1;var t=We(e);if(null===t)return!0;var n=Ne.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Le.call(n)==ze}var ss=wt?$t(wt):function(e){return rs(e)&&Or(e)==M};var us=St?$t(St):function(e){return rs(e)&&mo(e)==T};function ls(e){return"string"==typeof e||!Wa(e)&&rs(e)&&Or(e)==P}function cs(e){return"symbol"==typeof e||rs(e)&&Or(e)==R}var fs=Et?$t(Et):function(e){return rs(e)&&ts(e.length)&&!!at[Or(e)]};var hs=qi(zr),ds=qi((function(e,t){return e<=t}));function ps(e){if(!e)return[];if(Ka(e))return ls(e)?pn(e):Ti(e);if($e&&e[$e])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[$e]());var t=mo(e);return(t==k?un:t==T?fn:Us)(e)}function vs(e){return e?(e=ys(e))===d||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function ms(e){var t=vs(e),n=t%1;return t===t?n?t-n:t:0}function gs(e){return e?ur(ms(e),0,m):0}function ys(e){if("number"==typeof e)return e;if(cs(e))return v;if(ns(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ns(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Xt(e);var n=ge.test(e);return n||be.test(e)?ct(e.slice(2),n?2:8):me.test(e)?v:+e}function bs(e){return Pi(e,Ls(e))}function xs(e){return null==e?"":ci(e)}var _s=Ii((function(e,t){if(ko(t)||Ka(t))Pi(t,Is(t),e);else for(var n in t)Ne.call(t,n)&&nr(e,n,t[n])})),ws=Ii((function(e,t){Pi(t,Ls(t),e)})),Ss=Ii((function(e,t,n,r){Pi(t,Ls(t),e,r)})),Es=Ii((function(e,t,n,r){Pi(t,Is(t),e,r)})),ks=ro(sr);var Os=$r((function(e,t){e=Oe(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&_o(t[0],t[1],o)&&(r=1);++n<r;)for(var a=t[n],s=Ls(a),u=-1,l=s.length;++u<l;){var c=s[u],f=e[c];(f===i||Ua(f,Re[c])&&!Ne.call(e,c))&&(e[c]=a[c])}return e})),As=$r((function(e){return e.push(i,eo),kt(js,i,e)}));function Cs(e,t,n){var r=null==e?i:Er(e,t);return r===i?n:r}function Ms(e,t){return null!=e&&go(e,t,Mr)}var Ts=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),e[t]=n}),nu(ou)),Ps=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),Ne.call(e,t)?e[t].push(n):e[t]=[n]}),lo),Rs=$r(Pr);function Is(e){return Ka(e)?$n(e):Dr(e)}function Ls(e){return Ka(e)?$n(e,!0):Br(e)}var Ns=Ii((function(e,t,n){Zr(e,t,n)})),js=Ii((function(e,t,n,r){Zr(e,t,n,r)})),Ds=ro((function(e,t){var n={};if(null==e)return n;var r=!1;t=It(t,(function(t){return t=xi(t,e),r||(r=t.length>1),t})),Pi(e,oo(e),n),r&&(n=lr(n,7,to));for(var i=t.length;i--;)hi(n,t[i]);return n}));var Bs=ro((function(e,t){return null==e?{}:function(e,t){return Wr(e,t,(function(t,n){return Ms(e,n)}))}(e,t)}));function zs(e,t){if(null==e)return{};var n=It(oo(e),(function(e){return[e]}));return t=lo(t),Wr(e,n,(function(e,n){return t(e,n[0])}))}var Fs=$i(Is),Vs=$i(Ls);function Us(e){return null==e?[]:Jt(e,Is(e))}var Zs=Di((function(e,t,n){return t=t.toLowerCase(),e+(n?Hs(t):t)}));function Hs(e){return Js(xs(e).toLowerCase())}function Gs(e){return(e=xs(e))&&e.replace(_e,rn).replace(Qe,"")}var Ws=Di((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),qs=Di((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ks=ji("toLowerCase");var Ys=Di((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Xs=Di((function(e,t,n){return e+(n?" ":"")+Js(t)}));var $s=Di((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Js=ji("toUpperCase");function Qs(e,t,n){return e=xs(e),(t=n?i:t)===i?function(e){return rt.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(fe)||[]}(e):e.match(t)||[]}var eu=$r((function(e,t){try{return kt(e,i,t)}catch(n){return Ja(n)?n:new se(n)}})),tu=ro((function(e,t){return At(t,(function(t){t=zo(t),ar(e,t,Pa(e[t],e))})),e}));function nu(e){return function(){return e}}var ru=Fi(),iu=Fi(!0);function ou(e){return e}function au(e){return jr("function"==typeof e?e:lr(e,1))}var su=$r((function(e,t){return function(n){return Pr(n,e,t)}})),uu=$r((function(e,t){return function(n){return Pr(e,n,t)}}));function lu(e,t,n){var r=Is(t),i=Sr(t,r);null!=n||ns(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Sr(t,Is(t)));var o=!(ns(n)&&"chain"in n)||!!n.chain,a=Qa(e);return At(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=Ti(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Lt([this.value()],arguments))})})),e}function cu(){}var fu=Hi(It),hu=Hi(Mt),du=Hi(Dt);function pu(e){return wo(e)?Gt(zo(e)):function(e){return function(t){return Er(t,e)}}(e)}var vu=Wi(),mu=Wi(!0);function gu(){return[]}function yu(){return!1}var bu=Zi((function(e,t){return e+t}),0),xu=Yi("ceil"),_u=Zi((function(e,t){return e/t}),1),wu=Yi("floor");var Su=Zi((function(e,t){return e*t}),1),Eu=Yi("round"),ku=Zi((function(e,t){return e-t}),0);return Vn.after=function(e,t){if("function"!=typeof t)throw new Me(o);return e=ms(e),function(){if(--e<1)return t.apply(this,arguments)}},Vn.ary=Ma,Vn.assign=_s,Vn.assignIn=ws,Vn.assignInWith=Ss,Vn.assignWith=Es,Vn.at=ks,Vn.before=Ta,Vn.bind=Pa,Vn.bindAll=tu,Vn.bindKey=Ra,Vn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Wa(e)?e:[e]},Vn.chain=pa,Vn.chunk=function(e,t,r){t=(r?_o(e,t,r):t===i)?1:bn(ms(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var a=0,s=0,u=n(pt(o/t));a<o;)u[s++]=ii(e,a,a+=t);return u},Vn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Vn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Lt(Wa(r)?Ti(r):[r],yr(t,1))},Vn.cond=function(e){var t=null==e?0:e.length,n=lo();return e=t?It(e,(function(e){if("function"!=typeof e[1])throw new Me(o);return[n(e[0]),e[1]]})):[],$r((function(n){for(var r=-1;++r<t;){var i=e[r];if(kt(i[0],this,n))return kt(i[1],this,n)}}))},Vn.conforms=function(e){return function(e){var t=Is(e);return function(n){return cr(n,e,t)}}(lr(e,1))},Vn.constant=nu,Vn.countBy=ga,Vn.create=function(e,t){var n=Un(e);return null==t?n:or(n,t)},Vn.curry=function e(t,n,r){var o=Ji(t,8,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Vn.curryRight=function e(t,n,r){var o=Ji(t,u,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Vn.debounce=Ia,Vn.defaults=Os,Vn.defaultsDeep=As,Vn.defer=La,Vn.delay=Na,Vn.difference=Uo,Vn.differenceBy=Zo,Vn.differenceWith=Ho,Vn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=n||t===i?1:ms(t))<0?0:t,r):[]},Vn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,0,(t=r-(t=n||t===i?1:ms(t)))<0?0:t):[]},Vn.dropRightWhile=function(e,t){return e&&e.length?pi(e,lo(t,3),!0,!0):[]},Vn.dropWhile=function(e,t){return e&&e.length?pi(e,lo(t,3),!0):[]},Vn.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&_o(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=ms(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:ms(r))<0&&(r+=o),r=n>r?0:gs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Vn.filter=function(e,t){return(Wa(e)?Tt:gr)(e,lo(t,3))},Vn.flatMap=function(e,t){return yr(ka(e,t),1)},Vn.flatMapDeep=function(e,t){return yr(ka(e,t),d)},Vn.flatMapDepth=function(e,t,n){return n=n===i?1:ms(n),yr(ka(e,t),n)},Vn.flatten=qo,Vn.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,d):[]},Vn.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===i?1:ms(t)):[]},Vn.flip=function(e){return Ji(e,512)},Vn.flow=ru,Vn.flowRight=iu,Vn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Vn.functions=function(e){return null==e?[]:Sr(e,Is(e))},Vn.functionsIn=function(e){return null==e?[]:Sr(e,Ls(e))},Vn.groupBy=wa,Vn.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},Vn.intersection=Yo,Vn.intersectionBy=Xo,Vn.intersectionWith=$o,Vn.invert=Ts,Vn.invertBy=Ps,Vn.invokeMap=Sa,Vn.iteratee=au,Vn.keyBy=Ea,Vn.keys=Is,Vn.keysIn=Ls,Vn.map=ka,Vn.mapKeys=function(e,t){var n={};return t=lo(t,3),_r(e,(function(e,r,i){ar(n,t(e,r,i),e)})),n},Vn.mapValues=function(e,t){var n={};return t=lo(t,3),_r(e,(function(e,r,i){ar(n,r,t(e,r,i))})),n},Vn.matches=function(e){return Vr(lr(e,1))},Vn.matchesProperty=function(e,t){return Ur(e,lr(t,1))},Vn.memoize=ja,Vn.merge=Ns,Vn.mergeWith=js,Vn.method=su,Vn.methodOf=uu,Vn.mixin=lu,Vn.negate=Da,Vn.nthArg=function(e){return e=ms(e),$r((function(t){return Hr(t,e)}))},Vn.omit=Ds,Vn.omitBy=function(e,t){return zs(e,Da(lo(t)))},Vn.once=function(e){return Ta(2,e)},Vn.orderBy=function(e,t,n,r){return null==e?[]:(Wa(t)||(t=null==t?[]:[t]),Wa(n=r?i:n)||(n=null==n?[]:[n]),Gr(e,t,n))},Vn.over=fu,Vn.overArgs=Ba,Vn.overEvery=hu,Vn.overSome=du,Vn.partial=za,Vn.partialRight=Fa,Vn.partition=Oa,Vn.pick=Bs,Vn.pickBy=zs,Vn.property=pu,Vn.propertyOf=function(e){return function(t){return null==e?i:Er(e,t)}},Vn.pull=Qo,Vn.pullAll=ea,Vn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?qr(e,t,lo(n,2)):e},Vn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?qr(e,t,i,n):e},Vn.pullAt=ta,Vn.range=vu,Vn.rangeRight=mu,Vn.rearg=Va,Vn.reject=function(e,t){return(Wa(e)?Tt:gr)(e,Da(lo(t,3)))},Vn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=lo(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Kr(e,i),n},Vn.rest=function(e,t){if("function"!=typeof e)throw new Me(o);return $r(e,t=t===i?t:ms(t))},Vn.reverse=na,Vn.sampleSize=function(e,t,n){return t=(n?_o(e,t,n):t===i)?1:ms(t),(Wa(e)?Qn:Qr)(e,t)},Vn.set=function(e,t,n){return null==e?e:ei(e,t,n)},Vn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ei(e,t,n,r)},Vn.shuffle=function(e){return(Wa(e)?er:ri)(e)},Vn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&_o(e,t,n)?(t=0,n=r):(t=null==t?0:ms(t),n=n===i?r:ms(n)),ii(e,t,n)):[]},Vn.sortBy=Aa,Vn.sortedUniq=function(e){return e&&e.length?ui(e):[]},Vn.sortedUniqBy=function(e,t){return e&&e.length?ui(e,lo(t,2)):[]},Vn.split=function(e,t,n){return n&&"number"!=typeof n&&_o(e,t,n)&&(t=n=i),(n=n===i?m:n>>>0)?(e=xs(e))&&("string"==typeof t||null!=t&&!ss(t))&&!(t=ci(t))&&sn(e)?wi(pn(e),0,n):e.split(t,n):[]},Vn.spread=function(e,t){if("function"!=typeof e)throw new Me(o);return t=null==t?0:bn(ms(t),0),$r((function(n){var r=n[t],i=wi(n,0,t);return r&&Lt(i,r),kt(e,this,i)}))},Vn.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},Vn.take=function(e,t,n){return e&&e.length?ii(e,0,(t=n||t===i?1:ms(t))<0?0:t):[]},Vn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=r-(t=n||t===i?1:ms(t)))<0?0:t,r):[]},Vn.takeRightWhile=function(e,t){return e&&e.length?pi(e,lo(t,3),!1,!0):[]},Vn.takeWhile=function(e,t){return e&&e.length?pi(e,lo(t,3)):[]},Vn.tap=function(e,t){return t(e),e},Vn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Me(o);return ns(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ia(e,t,{leading:r,maxWait:t,trailing:i})},Vn.thru=va,Vn.toArray=ps,Vn.toPairs=Fs,Vn.toPairsIn=Vs,Vn.toPath=function(e){return Wa(e)?It(e,zo):cs(e)?[e]:Ti(Bo(xs(e)))},Vn.toPlainObject=bs,Vn.transform=function(e,t,n){var r=Wa(e),i=r||Xa(e)||fs(e);if(t=lo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ns(e)&&Qa(o)?Un(We(e)):{}}return(i?At:_r)(e,(function(e,r,i){return t(n,e,r,i)})),n},Vn.unary=function(e){return Ma(e,1)},Vn.union=ra,Vn.unionBy=ia,Vn.unionWith=oa,Vn.uniq=function(e){return e&&e.length?fi(e):[]},Vn.uniqBy=function(e,t){return e&&e.length?fi(e,lo(t,2)):[]},Vn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?fi(e,i,t):[]},Vn.unset=function(e,t){return null==e||hi(e,t)},Vn.unzip=aa,Vn.unzipWith=sa,Vn.update=function(e,t,n){return null==e?e:di(e,t,bi(n))},Vn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:di(e,t,bi(n),r)},Vn.values=Us,Vn.valuesIn=function(e){return null==e?[]:Jt(e,Ls(e))},Vn.without=ua,Vn.words=Qs,Vn.wrap=function(e,t){return za(bi(t),e)},Vn.xor=la,Vn.xorBy=ca,Vn.xorWith=fa,Vn.zip=ha,Vn.zipObject=function(e,t){return gi(e||[],t||[],nr)},Vn.zipObjectDeep=function(e,t){return gi(e||[],t||[],ei)},Vn.zipWith=da,Vn.entries=Fs,Vn.entriesIn=Vs,Vn.extend=ws,Vn.extendWith=Ss,lu(Vn,Vn),Vn.add=bu,Vn.attempt=eu,Vn.camelCase=Zs,Vn.capitalize=Hs,Vn.ceil=xu,Vn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=ys(n))===n?n:0),t!==i&&(t=(t=ys(t))===t?t:0),ur(ys(e),t,n)},Vn.clone=function(e){return lr(e,4)},Vn.cloneDeep=function(e){return lr(e,5)},Vn.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:i)},Vn.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:i)},Vn.conformsTo=function(e,t){return null==t||cr(e,t,Is(t))},Vn.deburr=Gs,Vn.defaultTo=function(e,t){return null==e||e!==e?t:e},Vn.divide=_u,Vn.endsWith=function(e,t,n){e=xs(e),t=ci(t);var r=e.length,o=n=n===i?r:ur(ms(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},Vn.eq=Ua,Vn.escape=function(e){return(e=xs(e))&&$.test(e)?e.replace(Y,on):e},Vn.escapeRegExp=function(e){return(e=xs(e))&&oe.test(e)?e.replace(ie,"\\$&"):e},Vn.every=function(e,t,n){var r=Wa(e)?Mt:vr;return n&&_o(e,t,n)&&(t=i),r(e,lo(t,3))},Vn.find=ya,Vn.findIndex=Go,Vn.findKey=function(e,t){return zt(e,lo(t,3),_r)},Vn.findLast=ba,Vn.findLastIndex=Wo,Vn.findLastKey=function(e,t){return zt(e,lo(t,3),wr)},Vn.floor=wu,Vn.forEach=xa,Vn.forEachRight=_a,Vn.forIn=function(e,t){return null==e?e:br(e,lo(t,3),Ls)},Vn.forInRight=function(e,t){return null==e?e:xr(e,lo(t,3),Ls)},Vn.forOwn=function(e,t){return e&&_r(e,lo(t,3))},Vn.forOwnRight=function(e,t){return e&&wr(e,lo(t,3))},Vn.get=Cs,Vn.gt=Za,Vn.gte=Ha,Vn.has=function(e,t){return null!=e&&go(e,t,Cr)},Vn.hasIn=Ms,Vn.head=Ko,Vn.identity=ou,Vn.includes=function(e,t,n,r){e=Ka(e)?e:Us(e),n=n&&!r?ms(n):0;var i=e.length;return n<0&&(n=bn(i+n,0)),ls(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Vt(e,t,n)>-1},Vn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=bn(r+i,0)),Vt(e,t,i)},Vn.inRange=function(e,t,n){return t=vs(t),n===i?(n=t,t=0):n=vs(n),function(e,t,n){return e>=xn(t,n)&&e<bn(t,n)}(e=ys(e),t,n)},Vn.invoke=Rs,Vn.isArguments=Ga,Vn.isArray=Wa,Vn.isArrayBuffer=qa,Vn.isArrayLike=Ka,Vn.isArrayLikeObject=Ya,Vn.isBoolean=function(e){return!0===e||!1===e||rs(e)&&Or(e)==x},Vn.isBuffer=Xa,Vn.isDate=$a,Vn.isElement=function(e){return rs(e)&&1===e.nodeType&&!as(e)},Vn.isEmpty=function(e){if(null==e)return!0;if(Ka(e)&&(Wa(e)||"string"==typeof e||"function"==typeof e.splice||Xa(e)||fs(e)||Ga(e)))return!e.length;var t=mo(e);if(t==k||t==T)return!e.size;if(ko(e))return!Dr(e).length;for(var n in e)if(Ne.call(e,n))return!1;return!0},Vn.isEqual=function(e,t){return Ir(e,t)},Vn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Ir(e,t,i,n):!!r},Vn.isError=Ja,Vn.isFinite=function(e){return"number"==typeof e&&Bt(e)},Vn.isFunction=Qa,Vn.isInteger=es,Vn.isLength=ts,Vn.isMap=is,Vn.isMatch=function(e,t){return e===t||Lr(e,t,fo(t))},Vn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Lr(e,t,fo(t),n)},Vn.isNaN=function(e){return os(e)&&e!=+e},Vn.isNative=function(e){if(Eo(e))throw new se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nr(e)},Vn.isNil=function(e){return null==e},Vn.isNull=function(e){return null===e},Vn.isNumber=os,Vn.isObject=ns,Vn.isObjectLike=rs,Vn.isPlainObject=as,Vn.isRegExp=ss,Vn.isSafeInteger=function(e){return es(e)&&e>=-9007199254740991&&e<=p},Vn.isSet=us,Vn.isString=ls,Vn.isSymbol=cs,Vn.isTypedArray=fs,Vn.isUndefined=function(e){return e===i},Vn.isWeakMap=function(e){return rs(e)&&mo(e)==I},Vn.isWeakSet=function(e){return rs(e)&&"[object WeakSet]"==Or(e)},Vn.join=function(e,t){return null==e?"":Wt.call(e,t)},Vn.kebabCase=Ws,Vn.last=Jo,Vn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=ms(n))<0?bn(r+o,0):xn(o,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Ft(e,Zt,o,!0)},Vn.lowerCase=qs,Vn.lowerFirst=Ks,Vn.lt=hs,Vn.lte=ds,Vn.max=function(e){return e&&e.length?mr(e,ou,Ar):i},Vn.maxBy=function(e,t){return e&&e.length?mr(e,lo(t,2),Ar):i},Vn.mean=function(e){return Ht(e,ou)},Vn.meanBy=function(e,t){return Ht(e,lo(t,2))},Vn.min=function(e){return e&&e.length?mr(e,ou,zr):i},Vn.minBy=function(e,t){return e&&e.length?mr(e,lo(t,2),zr):i},Vn.stubArray=gu,Vn.stubFalse=yu,Vn.stubObject=function(){return{}},Vn.stubString=function(){return""},Vn.stubTrue=function(){return!0},Vn.multiply=Su,Vn.nth=function(e,t){return e&&e.length?Hr(e,ms(t)):i},Vn.noConflict=function(){return dt._===this&&(dt._=Fe),this},Vn.noop=cu,Vn.now=Ca,Vn.pad=function(e,t,n){e=xs(e);var r=(t=ms(t))?dn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Gi(vt(i),n)+e+Gi(pt(i),n)},Vn.padEnd=function(e,t,n){e=xs(e);var r=(t=ms(t))?dn(e):0;return t&&r<t?e+Gi(t-r,n):e},Vn.padStart=function(e,t,n){e=xs(e);var r=(t=ms(t))?dn(e):0;return t&&r<t?Gi(t-r,n)+e:e},Vn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),wn(xs(e).replace(ae,""),t||0)},Vn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&_o(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=vs(e),t===i?(t=e,e=0):t=vs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=Sn();return xn(e+o*(t-e+lt("1e-"+((o+"").length-1))),t)}return Yr(e,t)},Vn.reduce=function(e,t,n){var r=Wa(e)?Nt:qt,i=arguments.length<3;return r(e,lo(t,4),n,i,dr)},Vn.reduceRight=function(e,t,n){var r=Wa(e)?jt:qt,i=arguments.length<3;return r(e,lo(t,4),n,i,pr)},Vn.repeat=function(e,t,n){return t=(n?_o(e,t,n):t===i)?1:ms(t),Xr(xs(e),t)},Vn.replace=function(){var e=arguments,t=xs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Vn.result=function(e,t,n){var r=-1,o=(t=xi(t,e)).length;for(o||(o=1,e=i);++r<o;){var a=null==e?i:e[zo(t[r])];a===i&&(r=o,a=n),e=Qa(a)?a.call(e):a}return e},Vn.round=Eu,Vn.runInContext=e,Vn.sample=function(e){return(Wa(e)?Jn:Jr)(e)},Vn.size=function(e){if(null==e)return 0;if(Ka(e))return ls(e)?dn(e):e.length;var t=mo(e);return t==k||t==T?e.size:Dr(e).length},Vn.snakeCase=Ys,Vn.some=function(e,t,n){var r=Wa(e)?Dt:oi;return n&&_o(e,t,n)&&(t=i),r(e,lo(t,3))},Vn.sortedIndex=function(e,t){return ai(e,t)},Vn.sortedIndexBy=function(e,t,n){return si(e,t,lo(n,2))},Vn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ai(e,t);if(r<n&&Ua(e[r],t))return r}return-1},Vn.sortedLastIndex=function(e,t){return ai(e,t,!0)},Vn.sortedLastIndexBy=function(e,t,n){return si(e,t,lo(n,2),!0)},Vn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=ai(e,t,!0)-1;if(Ua(e[n],t))return n}return-1},Vn.startCase=Xs,Vn.startsWith=function(e,t,n){return e=xs(e),n=null==n?0:ur(ms(n),0,e.length),t=ci(t),e.slice(n,n+t.length)==t},Vn.subtract=ku,Vn.sum=function(e){return e&&e.length?Kt(e,ou):0},Vn.sumBy=function(e,t){return e&&e.length?Kt(e,lo(t,2)):0},Vn.template=function(e,t,n){var r=Vn.templateSettings;n&&_o(e,t,n)&&(t=i),e=xs(e),t=Ss({},t,r,Qi);var o,a,s=Ss({},t.imports,r.imports,Qi),u=Is(s),l=Jt(s,u),c=0,f=t.interpolate||we,h="__p += '",d=Ae((t.escape||we).source+"|"+f.source+"|"+(f===ee?pe:we).source+"|"+(t.evaluate||we).source+"|$","g"),p="//# sourceURL="+(Ne.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ot+"]")+"\n";e.replace(d,(function(t,n,r,i,s,u){return r||(r=i),h+=e.slice(c,u).replace(Se,an),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),h+="';\n";var v=Ne.call(t,"variable")&&t.variable;if(v){if(he.test(v))throw new se("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(a?h.replace(G,""):h).replace(W,"$1").replace(q,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=eu((function(){return Ee(u,p+"return "+h).apply(i,l)}));if(m.source=h,Ja(m))throw m;return m},Vn.times=function(e,t){if((e=ms(e))<1||e>p)return[];var n=m,r=xn(e,m);t=lo(t),e-=m;for(var i=Yt(r,t);++n<e;)t(n);return i},Vn.toFinite=vs,Vn.toInteger=ms,Vn.toLength=gs,Vn.toLower=function(e){return xs(e).toLowerCase()},Vn.toNumber=ys,Vn.toSafeInteger=function(e){return e?ur(ms(e),-9007199254740991,p):0===e?e:0},Vn.toString=xs,Vn.toUpper=function(e){return xs(e).toUpperCase()},Vn.trim=function(e,t,n){if((e=xs(e))&&(n||t===i))return Xt(e);if(!e||!(t=ci(t)))return e;var r=pn(e),o=pn(t);return wi(r,en(r,o),tn(r,o)+1).join("")},Vn.trimEnd=function(e,t,n){if((e=xs(e))&&(n||t===i))return e.slice(0,vn(e)+1);if(!e||!(t=ci(t)))return e;var r=pn(e);return wi(r,0,tn(r,pn(t))+1).join("")},Vn.trimStart=function(e,t,n){if((e=xs(e))&&(n||t===i))return e.replace(ae,"");if(!e||!(t=ci(t)))return e;var r=pn(e);return wi(r,en(r,pn(t))).join("")},Vn.truncate=function(e,t){var n=30,r="...";if(ns(t)){var o="separator"in t?t.separator:o;n="length"in t?ms(t.length):n,r="omission"in t?ci(t.omission):r}var a=(e=xs(e)).length;if(sn(e)){var s=pn(e);a=s.length}if(n>=a)return e;var u=n-dn(r);if(u<1)return r;var l=s?wi(s,0,u).join(""):e.slice(0,u);if(o===i)return l+r;if(s&&(u+=l.length-u),ss(o)){if(e.slice(u).search(o)){var c,f=l;for(o.global||(o=Ae(o.source,xs(ve.exec(o))+"g")),o.lastIndex=0;c=o.exec(f);)var h=c.index;l=l.slice(0,h===i?u:h)}}else if(e.indexOf(ci(o),u)!=u){var d=l.lastIndexOf(o);d>-1&&(l=l.slice(0,d))}return l+r},Vn.unescape=function(e){return(e=xs(e))&&X.test(e)?e.replace(K,mn):e},Vn.uniqueId=function(e){var t=++je;return xs(e)+t},Vn.upperCase=$s,Vn.upperFirst=Js,Vn.each=xa,Vn.eachRight=_a,Vn.first=Ko,lu(Vn,function(){var e={};return _r(Vn,(function(t,n){Ne.call(Vn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Vn.VERSION="4.17.21",At(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Vn[e].placeholder=Vn})),At(["drop","take"],(function(e,t){Gn.prototype[e]=function(n){n=n===i?1:bn(ms(n),0);var r=this.__filtered__&&!t?new Gn(this):this.clone();return r.__filtered__?r.__takeCount__=xn(n,r.__takeCount__):r.__views__.push({size:xn(n,m),type:e+(r.__dir__<0?"Right":"")}),r},Gn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),At(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Gn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:lo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),At(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Gn.prototype[e]=function(){return this[n](1).value()[0]}})),At(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Gn.prototype[e]=function(){return this.__filtered__?new Gn(this):this[n](1)}})),Gn.prototype.compact=function(){return this.filter(ou)},Gn.prototype.find=function(e){return this.filter(e).head()},Gn.prototype.findLast=function(e){return this.reverse().find(e)},Gn.prototype.invokeMap=$r((function(e,t){return"function"==typeof e?new Gn(this):this.map((function(n){return Pr(n,e,t)}))})),Gn.prototype.reject=function(e){return this.filter(Da(lo(e)))},Gn.prototype.slice=function(e,t){e=ms(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Gn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=ms(t))<0?n.dropRight(-t):n.take(t-e)),n)},Gn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Gn.prototype.toArray=function(){return this.take(m)},_r(Gn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Vn[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);o&&(Vn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof Gn,l=s[0],c=u||Wa(t),f=function(e){var t=o.apply(Vn,Lt([e],s));return r&&h?t[0]:t};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var h=this.__chain__,d=!!this.__actions__.length,p=a&&!h,v=u&&!d;if(!a&&c){t=v?t:new Gn(this);var m=e.apply(t,s);return m.__actions__.push({func:va,args:[f],thisArg:i}),new Hn(m,h)}return p&&v?e.apply(this,s):(m=this.thru(f),p?r?m.value()[0]:m.value():m)})})),At(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Te[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Vn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Wa(i)?i:[],e)}return this[n]((function(n){return t.apply(Wa(n)?n:[],e)}))}})),_r(Gn.prototype,(function(e,t){var n=Vn[t];if(n){var r=n.name+"";Ne.call(Rn,r)||(Rn[r]=[]),Rn[r].push({name:t,func:n})}})),Rn[Vi(i,2).name]=[{name:"wrapper",func:i}],Gn.prototype.clone=function(){var e=new Gn(this.__wrapped__);return e.__actions__=Ti(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ti(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ti(this.__views__),e},Gn.prototype.reverse=function(){if(this.__filtered__){var e=new Gn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Gn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Wa(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=xn(t,e+a);break;case"takeRight":e=bn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,f=c.length,h=0,d=xn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return vi(e,this.__actions__);var p=[];e:for(;u--&&h<d;){for(var v=-1,m=e[l+=t];++v<f;){var g=c[v],y=g.iteratee,b=g.type,x=y(m);if(2==b)m=x;else if(!x){if(1==b)continue e;break e}}p[h++]=m}return p},Vn.prototype.at=ma,Vn.prototype.chain=function(){return pa(this)},Vn.prototype.commit=function(){return new Hn(this.value(),this.__chain__)},Vn.prototype.next=function(){this.__values__===i&&(this.__values__=ps(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Vn.prototype.plant=function(e){for(var t,n=this;n instanceof Zn;){var r=Vo(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},Vn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Gn){var t=e;return this.__actions__.length&&(t=new Gn(this)),(t=t.reverse()).__actions__.push({func:va,args:[na],thisArg:i}),new Hn(t,this.__chain__)}return this.thru(na)},Vn.prototype.toJSON=Vn.prototype.valueOf=Vn.prototype.value=function(){return vi(this.__wrapped__,this.__actions__)},Vn.prototype.first=Vn.prototype.head,$e&&(Vn.prototype[$e]=function(){return this}),Vn}();dt._=gn,(r=function(){return gn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},38478:function(e,t,n){var r;e=n.nmd(e),function(){function i(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function o(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function a(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function s(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function u(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function l(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function c(e,t){return!(null==e||!e.length)&&x(e,t,0)>-1}function f(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function h(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function d(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function p(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function v(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function m(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function g(e){return e.match(et)||[]}function y(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function b(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function x(e,t,n){return t===t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):b(e,w,n)}function _(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function w(e){return e!==e}function S(e,t){var n=null==e?0:e.length;return n?A(e,t)/n:ie}function E(e){return function(t){return null==t?q:t[e]}}function k(e){return function(t){return null==e?q:e[t]}}function O(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function A(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==q&&(n=n===q?o:n+o)}return n}function C(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function M(e){return e?e.slice(0,G(e)+1).replace(Ye,""):e}function T(e){return function(t){return e(t)}}function P(e,t){return h(t,(function(t){return e[t]}))}function R(e,t){return e.has(t)}function I(e,t){for(var n=-1,r=e.length;++n<r&&x(t,e[n],0)>-1;);return n}function L(e,t){for(var n=e.length;n--&&x(t,e[n],0)>-1;);return n}function N(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}function j(e){return"\\"+Qt[e]}function D(e){return qt.test(e)}function B(e){return Kt.test(e)}function z(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function F(e,t){return function(n){return e(t(n))}}function V(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==X||(e[n]=X,o[i++]=n)}return o}function U(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Z(e){return D(e)?function(e){for(var t=Gt.lastIndex=0;Gt.test(e);)++t;return t}(e):gn(e)}function H(e){return D(e)?function(e){return e.match(Gt)||[]}(e):function(e){return e.split("")}(e)}function G(e){for(var t=e.length;t--&&Xe.test(e.charAt(t)););return t}function W(e){return e.match(Wt)||[]}var q,K="Expected a function",Y="__lodash_hash_undefined__",X="__lodash_placeholder__",$=16,J=32,Q=64,ee=128,te=256,ne=1/0,re=9007199254740991,ie=NaN,oe=4294967295,ae=[["ary",ee],["bind",1],["bindKey",2],["curry",8],["curryRight",$],["flip",512],["partial",J],["partialRight",Q],["rearg",te]],se="[object Arguments]",ue="[object Array]",le="[object Boolean]",ce="[object Date]",fe="[object Error]",he="[object Function]",de="[object GeneratorFunction]",pe="[object Map]",ve="[object Number]",me="[object Object]",ge="[object Promise]",ye="[object RegExp]",be="[object Set]",xe="[object String]",_e="[object Symbol]",we="[object WeakMap]",Se="[object ArrayBuffer]",Ee="[object DataView]",ke="[object Float32Array]",Oe="[object Float64Array]",Ae="[object Int8Array]",Ce="[object Int16Array]",Me="[object Int32Array]",Te="[object Uint8Array]",Pe="[object Uint8ClampedArray]",Re="[object Uint16Array]",Ie="[object Uint32Array]",Le=/\b__p \+= '';/g,Ne=/\b(__p \+=) '' \+/g,je=/(__e\(.*?\)|\b__t\)) \+\n'';/g,De=/&(?:amp|lt|gt|quot|#39);/g,Be=/[&<>"']/g,ze=RegExp(De.source),Fe=RegExp(Be.source),Ve=/<%-([\s\S]+?)%>/g,Ue=/<%([\s\S]+?)%>/g,Ze=/<%=([\s\S]+?)%>/g,He=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ge=/^\w*$/,We=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qe=/[\\^$.*+?()[\]{}|]/g,Ke=RegExp(qe.source),Ye=/^\s+/,Xe=/\s/,$e=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Je=/\{\n\/\* \[wrapped with (.+)\] \*/,Qe=/,? & /,et=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,tt=/[()=,{}\[\]\/\s]/,nt=/\\(\\)?/g,rt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,it=/\w*$/,ot=/^[-+]0x[0-9a-f]+$/i,at=/^0b[01]+$/i,st=/^\[object .+?Constructor\]$/,ut=/^0o[0-7]+$/i,lt=/^(?:0|[1-9]\d*)$/,ct=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ft=/($^)/,ht=/['\n\r\u2028\u2029\\]/g,dt="\\ud800-\\udfff",pt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",vt="\\u2700-\\u27bf",mt="a-z\\xdf-\\xf6\\xf8-\\xff",gt="A-Z\\xc0-\\xd6\\xd8-\\xde",yt="\\ufe0e\\ufe0f",bt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xt="['\u2019]",_t="["+dt+"]",wt="["+bt+"]",St="["+pt+"]",Et="\\d+",kt="["+vt+"]",Ot="["+mt+"]",At="[^"+dt+bt+Et+vt+mt+gt+"]",Ct="\\ud83c[\\udffb-\\udfff]",Mt="[^"+dt+"]",Tt="(?:\\ud83c[\\udde6-\\uddff]){2}",Pt="[\\ud800-\\udbff][\\udc00-\\udfff]",Rt="["+gt+"]",It="\\u200d",Lt="(?:"+Ot+"|"+At+")",Nt="(?:"+Rt+"|"+At+")",jt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Dt="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Bt="(?:"+St+"|"+Ct+")"+"?",zt="["+yt+"]?",Ft=zt+Bt+("(?:\\u200d(?:"+[Mt,Tt,Pt].join("|")+")"+zt+Bt+")*"),Vt="(?:"+[kt,Tt,Pt].join("|")+")"+Ft,Ut="(?:"+[Mt+St+"?",St,Tt,Pt,_t].join("|")+")",Zt=RegExp(xt,"g"),Ht=RegExp(St,"g"),Gt=RegExp(Ct+"(?="+Ct+")|"+Ut+Ft,"g"),Wt=RegExp([Rt+"?"+Ot+"+"+jt+"(?="+[wt,Rt,"$"].join("|")+")",Nt+"+"+Dt+"(?="+[wt,Rt+Lt,"$"].join("|")+")",Rt+"?"+Lt+"+"+jt,Rt+"+"+Dt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Et,Vt].join("|"),"g"),qt=RegExp("["+It+dt+pt+yt+"]"),Kt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xt=-1,$t={};$t[ke]=$t[Oe]=$t[Ae]=$t[Ce]=$t[Me]=$t[Te]=$t[Pe]=$t[Re]=$t[Ie]=!0,$t[se]=$t[ue]=$t[Se]=$t[le]=$t[Ee]=$t[ce]=$t[fe]=$t[he]=$t[pe]=$t[ve]=$t[me]=$t[ye]=$t[be]=$t[xe]=$t[we]=!1;var Jt={};Jt[se]=Jt[ue]=Jt[Se]=Jt[Ee]=Jt[le]=Jt[ce]=Jt[ke]=Jt[Oe]=Jt[Ae]=Jt[Ce]=Jt[Me]=Jt[pe]=Jt[ve]=Jt[me]=Jt[ye]=Jt[be]=Jt[xe]=Jt[_e]=Jt[Te]=Jt[Pe]=Jt[Re]=Jt[Ie]=!0,Jt[fe]=Jt[he]=Jt[we]=!1;var Qt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},en=parseFloat,tn=parseInt,nn="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,rn="object"==typeof self&&self&&self.Object===Object&&self,on=nn||rn||Function("return this")(),an=t&&!t.nodeType&&t,sn=an&&e&&!e.nodeType&&e,un=sn&&sn.exports===an,ln=un&&nn.process,cn=function(){try{var e=sn&&sn.require&&sn.require("util").types;return e||ln&&ln.binding&&ln.binding("util")}catch(e){}}(),fn=cn&&cn.isArrayBuffer,hn=cn&&cn.isDate,dn=cn&&cn.isMap,pn=cn&&cn.isRegExp,vn=cn&&cn.isSet,mn=cn&&cn.isTypedArray,gn=E("length"),yn=k({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),bn=k({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),xn=k({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),_n=function e(t){function n(e){if(Fi(e)&&!Ts(e)&&!(e instanceof Xe)){if(e instanceof k)return e;if(To.call(e,"__wrapped__"))return hi(e)}return new k(e)}function r(){}function k(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=q}function Xe(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=oe,this.__views__=[]}function et(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function dt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function pt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function vt(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new pt;++t<n;)this.add(e[t])}function mt(e){this.size=(this.__data__=new dt(e)).size}function gt(e,t){var n=Ts(e),r=!n&&Ms(e),i=!n&&!r&&Rs(e),o=!n&&!r&&!i&&Ds(e),a=n||r||i||o,s=a?C(e.length,So):[],u=s.length;for(var l in e)!t&&!To.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Yr(l,u))||s.push(l);return s}function yt(e){var t=e.length;return t?e[Rn(0,t-1)]:q}function bt(e,t){return ui(lr(e),Ct(t,0,e.length))}function xt(e){return ui(lr(e))}function _t(e,t,n){(n===q||Ri(e[t],n))&&(n!==q||t in e)||Ot(e,t,n)}function wt(e,t,n){var r=e[t];To.call(e,t)&&Ri(r,n)&&(n!==q||t in e)||Ot(e,t,n)}function St(e,t){for(var n=e.length;n--;)if(Ri(e[n][0],t))return n;return-1}function Et(e,t,n,r){return Ca(e,(function(e,i,o){t(r,e,n(e),o)})),r}function kt(e,t){return e&&cr(t,eo(t),e)}function Ot(e,t,n){"__proto__"==t&&Ko?Ko(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function At(e,t){for(var n=-1,r=t.length,i=mo(r),o=null==e;++n<r;)i[n]=o?q:Ji(e,t[n]);return i}function Ct(e,t,n){return e===e&&(n!==q&&(e=e<=n?e:n),t!==q&&(e=e>=t?e:t)),e}function Mt(e,t,n,r,i,o){var s,u=1&t,l=2&t,c=4&t;if(n&&(s=i?n(e,r,i,o):n(e)),s!==q)return s;if(!zi(e))return e;var f=Ts(e);if(f){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&To.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!u)return lr(e,s)}else{var h=Fa(e),d=h==he||h==de;if(Rs(e))return rr(e,u);if(h==me||h==se||d&&!i){if(s=l||d?{}:qr(e),!u)return l?function(e,t){return cr(e,za(e),t)}(e,function(e,t){return e&&cr(t,to(t),e)}(s,e)):function(e,t){return cr(e,Ba(e),t)}(e,kt(s,e))}else{if(!Jt[h])return i?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case Se:return ir(e);case le:case ce:return new r(+e);case Ee:return function(e,t){return new e.constructor(t?ir(e.buffer):e.buffer,e.byteOffset,e.byteLength)}(e,n);case ke:case Oe:case Ae:case Ce:case Me:case Te:case Pe:case Re:case Ie:return or(e,n);case pe:return new r;case ve:case xe:return new r(e);case ye:return function(e){var t=new e.constructor(e.source,it.exec(e));return t.lastIndex=e.lastIndex,t}(e);case be:return new r;case _e:return function(e){return ka?_o(ka.call(e)):{}}(e)}}(e,h,u)}}o||(o=new mt);var p=o.get(e);if(p)return p;o.set(e,s),js(e)?e.forEach((function(r){s.add(Mt(r,t,n,r,e,o))})):Ls(e)&&e.forEach((function(r,i){s.set(i,Mt(r,t,n,i,e,o))}));var v=f?q:(c?l?zr:Br:l?to:eo)(e);return a(v||e,(function(r,i){v&&(r=e[i=r]),wt(s,i,Mt(r,t,n,i,e,o))})),s}function Tt(e,t,n){var r=n.length;if(null==e)return!r;for(e=_o(e);r--;){var i=n[r],o=t[i],a=e[i];if(a===q&&!(i in e)||!o(a))return!1}return!0}function Pt(e,t,n){if("function"!=typeof e)throw new Eo(K);return Za((function(){e.apply(q,n)}),t)}function Rt(e,t,n,r){var i=-1,o=c,a=!0,s=e.length,u=[],l=t.length;if(!s)return u;n&&(t=h(t,T(n))),r?(o=f,a=!1):t.length>=200&&(o=R,a=!1,t=new vt(t));e:for(;++i<s;){var d=e[i],p=null==n?d:n(d);if(d=r||0!==d?d:0,a&&p===p){for(var v=l;v--;)if(t[v]===p)continue e;u.push(d)}else o(t,p,r)||u.push(d)}return u}function It(e,t){var n=!0;return Ca(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function Lt(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(s===q?a===a&&!Hi(a):n(a,s)))var s=a,u=o}return u}function Nt(e,t){var n=[];return Ca(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function jt(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=Kr),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?jt(s,t-1,n,r,i):d(i,s):r||(i[i.length]=s)}return i}function Dt(e,t){return e&&Ta(e,t,eo)}function Bt(e,t){return e&&Pa(e,t,eo)}function zt(e,t){return l(t,(function(t){return ji(e[t])}))}function Ft(e,t){for(var n=0,r=(t=tr(t,e)).length;null!=e&&n<r;)e=e[li(t[n++])];return n&&n==r?e:q}function Vt(e,t,n){var r=t(e);return Ts(e)?r:d(r,n(e))}function Ut(e){return null==e?e===q?"[object Undefined]":"[object Null]":qo&&qo in _o(e)?function(e){var t=To.call(e,qo),n=e[qo];try{e[qo]=q;var r=!0}catch(e){}var i=Io.call(e);return r&&(t?e[qo]=n:delete e[qo]),i}(e):function(e){return Io.call(e)}(e)}function Gt(e,t){return e>t}function Wt(e,t){return null!=e&&To.call(e,t)}function qt(e,t){return null!=e&&t in _o(e)}function Kt(e,t,n){for(var r=n?f:c,i=e[0].length,o=e.length,a=o,s=mo(o),u=1/0,l=[];a--;){var d=e[a];a&&t&&(d=h(d,T(t))),u=aa(d.length,u),s[a]=!n&&(t||i>=120&&d.length>=120)?new vt(a&&d):q}d=e[0];var p=-1,v=s[0];e:for(;++p<i&&l.length<u;){var m=d[p],g=t?t(m):m;if(m=n||0!==m?m:0,!(v?R(v,g):r(l,g,n))){for(a=o;--a;){var y=s[a];if(!(y?R(y,g):r(e[a],g,n)))continue e}v&&v.push(g),l.push(m)}}return l}function Qt(e,t,n){var r=null==(e=ri(e,t=tr(t,e)))?e:e[li(gi(t))];return null==r?q:i(r,e,n)}function nn(e){return Fi(e)&&Ut(e)==se}function rn(e,t,n,r,i){return e===t||(null==e||null==t||!Fi(e)&&!Fi(t)?e!==e&&t!==t:function(e,t,n,r,i,o){var a=Ts(e),s=Ts(t),u=a?ue:Fa(e),l=s?ue:Fa(t),c=(u=u==se?me:u)==me,f=(l=l==se?me:l)==me,h=u==l;if(h&&Rs(e)){if(!Rs(t))return!1;a=!0,c=!1}if(h&&!c)return o||(o=new mt),a||Ds(e)?jr(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case Ee:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Se:return!(e.byteLength!=t.byteLength||!o(new zo(e),new zo(t)));case le:case ce:case ve:return Ri(+e,+t);case fe:return e.name==t.name&&e.message==t.message;case ye:case xe:return e==t+"";case pe:var s=z;case be:var u=1&r;if(s||(s=U),e.size!=t.size&&!u)return!1;var l=a.get(e);if(l)return l==t;r|=2,a.set(e,t);var c=jr(s(e),s(t),r,i,o,a);return a.delete(e),c;case _e:if(ka)return ka.call(e)==ka.call(t)}return!1}(e,t,u,n,r,i,o);if(!(1&n)){var d=c&&To.call(e,"__wrapped__"),p=f&&To.call(t,"__wrapped__");if(d||p){var v=d?e.value():e,m=p?t.value():t;return o||(o=new mt),i(v,m,n,r,o)}}return!!h&&(o||(o=new mt),function(e,t,n,r,i,o){var a=1&n,s=Br(e),u=s.length;if(u!=Br(t).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in t:To.call(t,c)))return!1}var f=o.get(e),h=o.get(t);if(f&&h)return f==t&&h==e;var d=!0;o.set(e,t),o.set(t,e);for(var p=a;++l<u;){var v=e[c=s[l]],m=t[c];if(r)var g=a?r(m,v,c,t,e,o):r(v,m,c,e,t,o);if(!(g===q?v===m||i(v,m,n,r,o):g)){d=!1;break}p||(p="constructor"==c)}if(d&&!p){var y=e.constructor,b=t.constructor;y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(d=!1)}return o.delete(e),o.delete(t),d}(e,t,n,r,i,o))}(e,t,n,r,rn,i))}function an(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=_o(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=n[i])[0],l=e[u],c=s[1];if(a&&s[2]){if(l===q&&!(u in e))return!1}else{var f=new mt;if(r)var h=r(l,c,u,e,t,f);if(!(h===q?rn(c,l,3,r,f):h))return!1}}return!0}function sn(e){return!(!zi(e)||function(e){return!!Ro&&Ro in e}(e))&&(ji(e)?jo:st).test(ci(e))}function ln(e){return"function"==typeof e?e:null==e?uo:"object"==typeof e?Ts(e)?kn(e[0],e[1]):En(e):ho(e)}function cn(e){if(!Qr(e))return ia(e);var t=[];for(var n in _o(e))To.call(e,n)&&"constructor"!=n&&t.push(n);return t}function gn(e){if(!zi(e))return function(e){var t=[];if(null!=e)for(var n in _o(e))t.push(n);return t}(e);var t=Qr(e),n=[];for(var r in e)("constructor"!=r||!t&&To.call(e,r))&&n.push(r);return n}function wn(e,t){return e<t}function Sn(e,t){var n=-1,r=Ii(e)?mo(e.length):[];return Ca(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function En(e){var t=Hr(e);return 1==t.length&&t[0][2]?ti(t[0][0],t[0][1]):function(n){return n===e||an(n,e,t)}}function kn(e,t){return $r(e)&&ei(t)?ti(li(e),t):function(n){var r=Ji(n,e);return r===q&&r===t?Qi(n,e):rn(t,r,3)}}function On(e,t,n,r,i){e!==t&&Ta(t,(function(o,a){if(i||(i=new mt),zi(o))!function(e,t,n,r,i,o,a){var s=oi(e,n),u=oi(t,n),l=a.get(u);if(l)return _t(e,n,l),q;var c=o?o(s,u,n+"",e,t,a):q,f=c===q;if(f){var h=Ts(u),d=!h&&Rs(u),p=!h&&!d&&Ds(u);c=u,h||d||p?Ts(s)?c=s:Li(s)?c=lr(s):d?(f=!1,c=rr(u,!0)):p?(f=!1,c=or(u,!0)):c=[]:Ui(u)||Ms(u)?(c=s,Ms(s)?c=Xi(s):zi(s)&&!ji(s)||(c=qr(u))):f=!1}f&&(a.set(u,c),i(c,u,r,o,a),a.delete(u)),_t(e,n,c)}(e,t,a,n,On,r,i);else{var s=r?r(oi(e,a),o,a+"",e,t,i):q;s===q&&(s=o),_t(e,a,s)}}),to)}function An(e,t){var n=e.length;if(n)return Yr(t+=t<0?n:0,n)?e[t]:q}function Cn(e,t,n){t=t.length?h(t,(function(e){return Ts(e)?function(t){return Ft(t,1===e.length?e[0]:e)}:e})):[uo];var r=-1;return t=h(t,T(Ur())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Sn(e,(function(e,n,i){return{criteria:h(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var u=ar(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Mn(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Ft(e,a);n(s,a)&&Dn(o,tr(a,e),s)}return o}function Tn(e,t,n,r){var i=r?_:x,o=-1,a=t.length,s=e;for(e===t&&(t=lr(t)),n&&(s=h(e,T(n)));++o<a;)for(var u=0,l=t[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==e&&Ho.call(s,u,1),Ho.call(e,u,1);return e}function Pn(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Yr(i)?Ho.call(e,i,1):qn(e,i)}}return e}function Rn(e,t){return e+Qo(la()*(t-e+1))}function In(e,t){var n="";if(!e||t<1||t>re)return n;do{t%2&&(n+=e),(t=Qo(t/2))&&(e+=e)}while(t);return n}function Ln(e,t){return Ha(ni(e,t,uo),e+"")}function Nn(e){return yt(ro(e))}function jn(e,t){var n=ro(e);return ui(n,Ct(t,0,n.length))}function Dn(e,t,n,r){if(!zi(e))return e;for(var i=-1,o=(t=tr(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var u=li(t[i]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=a){var c=s[u];(l=r?r(c,u,s):q)===q&&(l=zi(c)?c:Yr(t[i+1])?[]:{})}wt(s,u,l),s=s[u]}return e}function Bn(e){return ui(ro(e))}function zn(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=mo(i);++r<i;)o[r]=e[r+t];return o}function Fn(e,t){var n;return Ca(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function Vn(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!Hi(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return Un(e,t,uo,n)}function Un(e,t,n,r){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=n(t))!==t,s=null===t,u=Hi(t),l=t===q;i<o;){var c=Qo((i+o)/2),f=n(e[c]),h=f!==q,d=null===f,p=f===f,v=Hi(f);if(a)var m=r||p;else m=l?p&&(r||h):s?p&&h&&(r||!d):u?p&&h&&!d&&(r||!v):!d&&!v&&(r?f<=t:f<t);m?i=c+1:o=c}return aa(o,4294967294)}function Zn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ri(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Hn(e){return"number"==typeof e?e:Hi(e)?ie:+e}function Gn(e){if("string"==typeof e)return e;if(Ts(e))return h(e,Gn)+"";if(Hi(e))return Oa?Oa.call(e):"";var t=e+"";return"0"==t&&1/e==-ne?"-0":t}function Wn(e,t,n){var r=-1,i=c,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=f;else if(o>=200){var l=t?null:ja(e);if(l)return U(l);a=!1,i=R,u=new vt}else u=t?[]:s;e:for(;++r<o;){var h=e[r],d=t?t(h):h;if(h=n||0!==h?h:0,a&&d===d){for(var p=u.length;p--;)if(u[p]===d)continue e;t&&u.push(d),s.push(h)}else i(u,d,n)||(u!==s&&u.push(d),s.push(h))}return s}function qn(e,t){return null==(e=ri(e,t=tr(t,e)))||delete e[li(gi(t))]}function Kn(e,t,n,r){return Dn(e,t,n(Ft(e,t)),r)}function Yn(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?zn(e,r?0:o,r?o+1:i):zn(e,r?o+1:0,r?i:o)}function Xn(e,t){var n=e;return n instanceof Xe&&(n=n.value()),p(t,(function(e,t){return t.func.apply(t.thisArg,d([e],t.args))}),n)}function $n(e,t,n){var r=e.length;if(r<2)return r?Wn(e[0]):[];for(var i=-1,o=mo(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=Rt(o[i]||a,e[s],t,n));return Wn(jt(o,1),t,n)}function Jn(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;)n(a,e[r],r<o?t[r]:q);return a}function Qn(e){return Li(e)?e:[]}function er(e){return"function"==typeof e?e:uo}function tr(e,t){return Ts(e)?e:$r(e,t)?[e]:Ga($i(e))}function nr(e,t,n){var r=e.length;return n=n===q?r:n,!t&&n>=r?e:zn(e,t,n)}function rr(e,t){if(t)return e.slice();var n=e.length,r=Fo?Fo(n):new e.constructor(n);return e.copy(r),r}function ir(e){var t=new e.constructor(e.byteLength);return new zo(t).set(new zo(e)),t}function or(e,t){return new e.constructor(t?ir(e.buffer):e.buffer,e.byteOffset,e.length)}function ar(e,t){if(e!==t){var n=e!==q,r=null===e,i=e===e,o=Hi(e),a=t!==q,s=null===t,u=t===t,l=Hi(t);if(!s&&!l&&!o&&e>t||o&&a&&u&&!s&&!l||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&e<t||l&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function sr(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,u=t.length,l=oa(o-a,0),c=mo(u+l),f=!r;++s<u;)c[s]=t[s];for(;++i<a;)(f||i<o)&&(c[n[i]]=e[i]);for(;l--;)c[s++]=e[i++];return c}function ur(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,u=-1,l=t.length,c=oa(o-s,0),f=mo(c+l),h=!r;++i<c;)f[i]=e[i];for(var d=i;++u<l;)f[d+u]=t[u];for(;++a<s;)(h||i<o)&&(f[d+n[a]]=e[i++]);return f}function lr(e,t){var n=-1,r=e.length;for(t||(t=mo(r));++n<r;)t[n]=e[n];return t}function cr(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=r?r(n[s],e[s],s,n,e):q;u===q&&(u=e[s]),i?Ot(n,s,u):wt(n,s,u)}return n}function fr(e,t){return function(n,r){var i=Ts(n)?o:Et,a=t?t():{};return i(n,e,Ur(r,2),a)}}function hr(e){return Ln((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:q,a=i>2?n[2]:q;for(o=e.length>3&&"function"==typeof o?(i--,o):q,a&&Xr(n[0],n[1],a)&&(o=i<3?q:o,i=1),t=_o(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}function dr(e,t){return function(n,r){if(null==n)return n;if(!Ii(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=_o(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function pr(e){return function(t,n,r){for(var i=-1,o=_o(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function vr(e){return function(t){var n=D(t=$i(t))?H(t):q,r=n?n[0]:t.charAt(0),i=n?nr(n,1).join(""):t.slice(1);return r[e]()+i}}function mr(e){return function(t){return p(ao(oo(t).replace(Zt,"")),e,"")}}function gr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Aa(e.prototype),r=e.apply(n,t);return zi(r)?r:n}}function yr(e,t,n){var r=gr(e);return function o(){for(var a=arguments.length,s=mo(a),u=a,l=Vr(o);u--;)s[u]=arguments[u];var c=a<3&&s[0]!==l&&s[a-1]!==l?[]:V(s,l);return(a-=c.length)<n?Mr(e,t,_r,o.placeholder,q,s,c,q,q,n-a):i(this&&this!==on&&this instanceof o?r:e,this,s)}}function br(e){return function(t,n,r){var i=_o(t);if(!Ii(t)){var o=Ur(n,3);t=eo(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:q}}function xr(e){return Dr((function(t){var n=t.length,r=n,i=k.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new Eo(K);if(i&&!a&&"wrapper"==Fr(o))var a=new k([],!0)}for(r=a?r:n;++r<n;){var s=Fr(o=t[r]),u="wrapper"==s?Da(o):q;a=u&&Jr(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?a[Fr(u[0])].apply(a,u[3]):1==o.length&&Jr(o)?a[s]():a.thru(o)}return function(){var e=arguments,r=e[0];if(a&&1==e.length&&Ts(r))return a.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function _r(e,t,n,r,i,o,a,s,u,l){var c=t&ee,f=1&t,h=2&t,d=24&t,p=512&t,v=h?q:gr(e);return function m(){for(var g=arguments.length,y=mo(g),b=g;b--;)y[b]=arguments[b];if(d)var x=Vr(m),_=N(y,x);if(r&&(y=sr(y,r,i,d)),o&&(y=ur(y,o,a,d)),g-=_,d&&g<l)return Mr(e,t,_r,m.placeholder,n,y,V(y,x),s,u,l-g);var w=f?n:this,S=h?w[e]:e;return g=y.length,s?y=ii(y,s):p&&g>1&&y.reverse(),c&&u<g&&(y.length=u),this&&this!==on&&this instanceof m&&(S=v||gr(S)),S.apply(w,y)}}function wr(e,t){return function(n,r){return function(e,t,n,r){return Dt(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Sr(e,t){return function(n,r){var i;if(n===q&&r===q)return t;if(n!==q&&(i=n),r!==q){if(i===q)return r;"string"==typeof n||"string"==typeof r?(n=Gn(n),r=Gn(r)):(n=Hn(n),r=Hn(r)),i=e(n,r)}return i}}function Er(e){return Dr((function(t){return t=h(t,T(Ur())),Ln((function(n){var r=this;return e(t,(function(e){return i(e,r,n)}))}))}))}function kr(e,t){var n=(t=t===q?" ":Gn(t)).length;if(n<2)return n?In(t,e):t;var r=In(t,Jo(e/Z(t)));return D(t)?nr(H(r),0,e).join(""):r.slice(0,e)}function Or(e,t,n,r){var o=1&t,a=gr(e);return function t(){for(var s=-1,u=arguments.length,l=-1,c=r.length,f=mo(c+u),h=this&&this!==on&&this instanceof t?a:e;++l<c;)f[l]=r[l];for(;u--;)f[l++]=arguments[++s];return i(h,o?n:this,f)}}function Ar(e){return function(t,n,r){return r&&"number"!=typeof r&&Xr(t,n,r)&&(n=r=q),t=Wi(t),n===q?(n=t,t=0):n=Wi(n),function(e,t,n,r){for(var i=-1,o=oa(Jo((t-e)/(n||1)),0),a=mo(o);o--;)a[r?o:++i]=e,e+=n;return a}(t,n,r=r===q?t<n?1:-1:Wi(r),e)}}function Cr(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Yi(t),n=Yi(n)),e(t,n)}}function Mr(e,t,n,r,i,o,a,s,u,l){var c=8&t;t|=c?J:Q,4&(t&=~(c?Q:J))||(t&=-4);var f=[e,t,i,c?o:q,c?a:q,c?q:o,c?q:a,s,u,l],h=n.apply(q,f);return Jr(e)&&Ua(h,f),h.placeholder=r,ai(h,e,t)}function Tr(e){var t=xo[e];return function(e,n){if(e=Yi(e),(n=null==n?0:aa(qi(n),292))&&na(e)){var r=($i(e)+"e").split("e");return+((r=($i(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}function Pr(e){return function(t){var n=Fa(t);return n==pe?z(t):n==be?function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}(t):function(e,t){return h(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Rr(e,t,n,r,i,o,a,s){var u=2&t;if(!u&&"function"!=typeof e)throw new Eo(K);var l=r?r.length:0;if(l||(t&=-97,r=i=q),a=a===q?a:oa(qi(a),0),s=s===q?s:qi(s),l-=i?i.length:0,t&Q){var c=r,f=i;r=i=q}var h=u?q:Da(e),d=[e,t,n,r,i,c,f,o,a,s];if(h&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=r==ee&&8==n||r==ee&&n==te&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var s=t[3];if(s){var u=e[3];e[3]=u?sr(u,s,t[4]):s,e[4]=u?V(e[3],X):t[4]}(s=t[5])&&(u=e[5],e[5]=u?ur(u,s,t[6]):s,e[6]=u?V(e[5],X):t[6]),(s=t[7])&&(e[7]=s),r&ee&&(e[8]=null==e[8]?t[8]:aa(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(d,h),e=d[0],t=d[1],n=d[2],r=d[3],i=d[4],!(s=d[9]=d[9]===q?u?0:e.length:oa(d[9]-l,0))&&24&t&&(t&=-25),t&&1!=t)p=8==t||t==$?yr(e,t,s):t!=J&&33!=t||i.length?_r.apply(q,d):Or(e,t,n,r);else var p=function(e,t,n){var r=1&t,i=gr(e);return function t(){return(this&&this!==on&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return ai((h?Ra:Ua)(p,d),e,t)}function Ir(e,t,n,r){return e===q||Ri(e,Ao[n])&&!To.call(r,n)?t:e}function Lr(e,t,n,r,i,o){return zi(e)&&zi(t)&&(o.set(t,e),On(e,t,q,Lr,o),o.delete(t)),e}function Nr(e){return Ui(e)?q:e}function jr(e,t,n,r,i,o){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(e),c=o.get(t);if(l&&c)return l==t&&c==e;var f=-1,h=!0,d=2&n?new vt:q;for(o.set(e,t),o.set(t,e);++f<s;){var p=e[f],v=t[f];if(r)var g=a?r(v,p,f,t,e,o):r(p,v,f,e,t,o);if(g!==q){if(g)continue;h=!1;break}if(d){if(!m(t,(function(e,t){if(!R(d,t)&&(p===e||i(p,e,n,r,o)))return d.push(t)}))){h=!1;break}}else if(p!==v&&!i(p,v,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Dr(e){return Ha(ni(e,q,vi),e+"")}function Br(e){return Vt(e,eo,Ba)}function zr(e){return Vt(e,to,za)}function Fr(e){for(var t=e.name+"",n=ya[t],r=To.call(ya,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Vr(e){return(To.call(n,"placeholder")?n:e).placeholder}function Ur(){var e=n.iteratee||lo;return e=e===lo?ln:e,arguments.length?e(arguments[0],arguments[1]):e}function Zr(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Hr(e){for(var t=eo(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,ei(i)]}return t}function Gr(e,t){var n=function(e,t){return null==e?q:e[t]}(e,t);return sn(n)?n:q}function Wr(e,t,n){for(var r=-1,i=(t=tr(t,e)).length,o=!1;++r<i;){var a=li(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Bi(i)&&Yr(a,i)&&(Ts(e)||Ms(e))}function qr(e){return"function"!=typeof e.constructor||Qr(e)?{}:Aa(Vo(e))}function Kr(e){return Ts(e)||Ms(e)||!!(Go&&e&&e[Go])}function Yr(e,t){var n=typeof e;return!!(t=null==t?re:t)&&("number"==n||"symbol"!=n&&lt.test(e))&&e>-1&&e%1==0&&e<t}function Xr(e,t,n){if(!zi(n))return!1;var r=typeof t;return!!("number"==r?Ii(n)&&Yr(t,n.length):"string"==r&&t in n)&&Ri(n[t],e)}function $r(e,t){if(Ts(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Hi(e))||Ge.test(e)||!He.test(e)||null!=t&&e in _o(t)}function Jr(e){var t=Fr(e),r=n[t];if("function"!=typeof r||!(t in Xe.prototype))return!1;if(e===r)return!0;var i=Da(r);return!!i&&e===i[0]}function Qr(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ao)}function ei(e){return e===e&&!zi(e)}function ti(e,t){return function(n){return null!=n&&n[e]===t&&(t!==q||e in _o(n))}}function ni(e,t,n){return t=oa(t===q?e.length-1:t,0),function(){for(var r=arguments,o=-1,a=oa(r.length-t,0),s=mo(a);++o<a;)s[o]=r[t+o];o=-1;for(var u=mo(t+1);++o<t;)u[o]=r[o];return u[t]=n(s),i(e,this,u)}}function ri(e,t){return t.length<2?e:Ft(e,zn(t,0,-1))}function ii(e,t){for(var n=e.length,r=aa(t.length,n),i=lr(e);r--;){var o=t[r];e[r]=Yr(o,n)?i[o]:q}return e}function oi(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function ai(e,t,n){var r=t+"";return Ha(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace($e,"{\n/* [wrapped with "+t+"] */\n")}(r,fi(function(e){var t=e.match(Je);return t?t[1].split(Qe):[]}(r),n)))}function si(e){var t=0,n=0;return function(){var r=sa(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(q,arguments)}}function ui(e,t){var n=-1,r=e.length,i=r-1;for(t=t===q?r:t;++n<t;){var o=Rn(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}function li(e){if("string"==typeof e||Hi(e))return e;var t=e+"";return"0"==t&&1/e==-ne?"-0":t}function ci(e){if(null!=e){try{return Mo.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function fi(e,t){return a(ae,(function(n){var r="_."+n[0];t&n[1]&&!c(e,r)&&e.push(r)})),e.sort()}function hi(e){if(e instanceof Xe)return e.clone();var t=new k(e.__wrapped__,e.__chain__);return t.__actions__=lr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function di(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:qi(n);return i<0&&(i=oa(r+i,0)),b(e,Ur(t,3),i)}function pi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==q&&(i=qi(n),i=n<0?oa(r+i,0):aa(i,r-1)),b(e,Ur(t,3),i,!0)}function vi(e){return null!=e&&e.length?jt(e,1):[]}function mi(e){return e&&e.length?e[0]:q}function gi(e){var t=null==e?0:e.length;return t?e[t-1]:q}function yi(e,t){return e&&e.length&&t&&t.length?Tn(e,t):e}function bi(e){return null==e?e:ca.call(e)}function xi(e){if(!e||!e.length)return[];var t=0;return e=l(e,(function(e){if(Li(e))return t=oa(e.length,t),!0})),C(t,(function(t){return h(e,E(t))}))}function _i(e,t){if(!e||!e.length)return[];var n=xi(e);return null==t?n:h(n,(function(e){return i(t,q,e)}))}function wi(e){var t=n(e);return t.__chain__=!0,t}function Si(e,t){return t(e)}function Ei(e,t){return(Ts(e)?a:Ca)(e,Ur(t,3))}function ki(e,t){return(Ts(e)?s:Ma)(e,Ur(t,3))}function Oi(e,t){return(Ts(e)?h:Sn)(e,Ur(t,3))}function Ai(e,t,n){return t=n?q:t,t=e&&null==t?e.length:t,Rr(e,ee,q,q,q,q,t)}function Ci(e,t){var n;if("function"!=typeof t)throw new Eo(K);return e=qi(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=q),n}}function Mi(e,t,n){function r(t){var n=l,r=c;return l=c=q,v=t,h=e.apply(r,n)}function i(e){return v=e,d=Za(a,t),m?r(e):h}function o(e){var n=e-p;return p===q||n>=t||n<0||g&&e-v>=f}function a(){var e=ys();return o(e)?s(e):(d=Za(a,function(e){var n=t-(e-p);return g?aa(n,f-(e-v)):n}(e)),q)}function s(e){return d=q,y&&l?r(e):(l=c=q,h)}function u(){var e=ys(),n=o(e);if(l=arguments,c=this,p=e,n){if(d===q)return i(p);if(g)return Na(d),d=Za(a,t),r(p)}return d===q&&(d=Za(a,t)),h}var l,c,f,h,d,p,v=0,m=!1,g=!1,y=!0;if("function"!=typeof e)throw new Eo(K);return t=Yi(t)||0,zi(n)&&(m=!!n.leading,f=(g="maxWait"in n)?oa(Yi(n.maxWait)||0,t):f,y="trailing"in n?!!n.trailing:y),u.cancel=function(){d!==q&&Na(d),v=0,l=p=c=d=q},u.flush=function(){return d===q?h:s(ys())},u}function Ti(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Eo(K);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ti.Cache||pt),n}function Pi(e){if("function"!=typeof e)throw new Eo(K);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Ri(e,t){return e===t||e!==e&&t!==t}function Ii(e){return null!=e&&Bi(e.length)&&!ji(e)}function Li(e){return Fi(e)&&Ii(e)}function Ni(e){if(!Fi(e))return!1;var t=Ut(e);return t==fe||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Ui(e)}function ji(e){if(!zi(e))return!1;var t=Ut(e);return t==he||t==de||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Di(e){return"number"==typeof e&&e==qi(e)}function Bi(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=re}function zi(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Fi(e){return null!=e&&"object"==typeof e}function Vi(e){return"number"==typeof e||Fi(e)&&Ut(e)==ve}function Ui(e){if(!Fi(e)||Ut(e)!=me)return!1;var t=Vo(e);if(null===t)return!0;var n=To.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Mo.call(n)==Lo}function Zi(e){return"string"==typeof e||!Ts(e)&&Fi(e)&&Ut(e)==xe}function Hi(e){return"symbol"==typeof e||Fi(e)&&Ut(e)==_e}function Gi(e){if(!e)return[];if(Ii(e))return Zi(e)?H(e):lr(e);if(Wo&&e[Wo])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Wo]());var t=Fa(e);return(t==pe?z:t==be?U:ro)(e)}function Wi(e){return e?(e=Yi(e))===ne||e===-ne?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function qi(e){var t=Wi(e),n=t%1;return t===t?n?t-n:t:0}function Ki(e){return e?Ct(qi(e),0,oe):0}function Yi(e){if("number"==typeof e)return e;if(Hi(e))return ie;if(zi(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=zi(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=M(e);var n=at.test(e);return n||ut.test(e)?tn(e.slice(2),n?2:8):ot.test(e)?ie:+e}function Xi(e){return cr(e,to(e))}function $i(e){return null==e?"":Gn(e)}function Ji(e,t,n){var r=null==e?q:Ft(e,t);return r===q?n:r}function Qi(e,t){return null!=e&&Wr(e,t,qt)}function eo(e){return Ii(e)?gt(e):cn(e)}function to(e){return Ii(e)?gt(e,!0):gn(e)}function no(e,t){if(null==e)return{};var n=h(zr(e),(function(e){return[e]}));return t=Ur(t),Mn(e,n,(function(e,n){return t(e,n[0])}))}function ro(e){return null==e?[]:P(e,eo(e))}function io(e){return lu($i(e).toLowerCase())}function oo(e){return(e=$i(e))&&e.replace(ct,yn).replace(Ht,"")}function ao(e,t,n){return e=$i(e),(t=n?q:t)===q?B(e)?W(e):g(e):e.match(t)||[]}function so(e){return function(){return e}}function uo(e){return e}function lo(e){return ln("function"==typeof e?e:Mt(e,1))}function co(e,t,n){var r=eo(t),i=zt(t,r);null!=n||zi(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=zt(t,eo(t)));var o=!(zi(n)&&"chain"in n&&!n.chain),s=ji(e);return a(i,(function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=lr(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,d([this.value()],arguments))})})),e}function fo(){}function ho(e){return $r(e)?E(li(e)):function(e){return function(t){return Ft(t,e)}}(e)}function po(){return[]}function vo(){return!1}var mo=(t=null==t?on:_n.defaults(on.Object(),t,_n.pick(on,Yt))).Array,go=t.Date,yo=t.Error,bo=t.Function,xo=t.Math,_o=t.Object,wo=t.RegExp,So=t.String,Eo=t.TypeError,ko=mo.prototype,Oo=bo.prototype,Ao=_o.prototype,Co=t["__core-js_shared__"],Mo=Oo.toString,To=Ao.hasOwnProperty,Po=0,Ro=function(){var e=/[^.]+$/.exec(Co&&Co.keys&&Co.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Io=Ao.toString,Lo=Mo.call(_o),No=on._,jo=wo("^"+Mo.call(To).replace(qe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Do=un?t.Buffer:q,Bo=t.Symbol,zo=t.Uint8Array,Fo=Do?Do.allocUnsafe:q,Vo=F(_o.getPrototypeOf,_o),Uo=_o.create,Zo=Ao.propertyIsEnumerable,Ho=ko.splice,Go=Bo?Bo.isConcatSpreadable:q,Wo=Bo?Bo.iterator:q,qo=Bo?Bo.toStringTag:q,Ko=function(){try{var e=Gr(_o,"defineProperty");return e({},"",{}),e}catch(e){}}(),Yo=t.clearTimeout!==on.clearTimeout&&t.clearTimeout,Xo=go&&go.now!==on.Date.now&&go.now,$o=t.setTimeout!==on.setTimeout&&t.setTimeout,Jo=xo.ceil,Qo=xo.floor,ea=_o.getOwnPropertySymbols,ta=Do?Do.isBuffer:q,na=t.isFinite,ra=ko.join,ia=F(_o.keys,_o),oa=xo.max,aa=xo.min,sa=go.now,ua=t.parseInt,la=xo.random,ca=ko.reverse,fa=Gr(t,"DataView"),ha=Gr(t,"Map"),da=Gr(t,"Promise"),pa=Gr(t,"Set"),va=Gr(t,"WeakMap"),ma=Gr(_o,"create"),ga=va&&new va,ya={},ba=ci(fa),xa=ci(ha),_a=ci(da),wa=ci(pa),Sa=ci(va),Ea=Bo?Bo.prototype:q,ka=Ea?Ea.valueOf:q,Oa=Ea?Ea.toString:q,Aa=function(){function e(){}return function(t){if(!zi(t))return{};if(Uo)return Uo(t);e.prototype=t;var n=new e;return e.prototype=q,n}}();n.templateSettings={escape:Ve,evaluate:Ue,interpolate:Ze,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,k.prototype=Aa(r.prototype),k.prototype.constructor=k,Xe.prototype=Aa(r.prototype),Xe.prototype.constructor=Xe,et.prototype.clear=function(){this.__data__=ma?ma(null):{},this.size=0},et.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},et.prototype.get=function(e){var t=this.__data__;if(ma){var n=t[e];return n===Y?q:n}return To.call(t,e)?t[e]:q},et.prototype.has=function(e){var t=this.__data__;return ma?t[e]!==q:To.call(t,e)},et.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ma&&t===q?Y:t,this},dt.prototype.clear=function(){this.__data__=[],this.size=0},dt.prototype.delete=function(e){var t=this.__data__,n=St(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ho.call(t,n,1),--this.size,!0)},dt.prototype.get=function(e){var t=this.__data__,n=St(t,e);return n<0?q:t[n][1]},dt.prototype.has=function(e){return St(this.__data__,e)>-1},dt.prototype.set=function(e,t){var n=this.__data__,r=St(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},pt.prototype.clear=function(){this.size=0,this.__data__={hash:new et,map:new(ha||dt),string:new et}},pt.prototype.delete=function(e){var t=Zr(this,e).delete(e);return this.size-=t?1:0,t},pt.prototype.get=function(e){return Zr(this,e).get(e)},pt.prototype.has=function(e){return Zr(this,e).has(e)},pt.prototype.set=function(e,t){var n=Zr(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},vt.prototype.add=vt.prototype.push=function(e){return this.__data__.set(e,Y),this},vt.prototype.has=function(e){return this.__data__.has(e)},mt.prototype.clear=function(){this.__data__=new dt,this.size=0},mt.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},mt.prototype.get=function(e){return this.__data__.get(e)},mt.prototype.has=function(e){return this.__data__.has(e)},mt.prototype.set=function(e,t){var n=this.__data__;if(n instanceof dt){var r=n.__data__;if(!ha||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new pt(r)}return n.set(e,t),this.size=n.size,this};var Ca=dr(Dt),Ma=dr(Bt,!0),Ta=pr(),Pa=pr(!0),Ra=ga?function(e,t){return ga.set(e,t),e}:uo,Ia=Ko?function(e,t){return Ko(e,"toString",{configurable:!0,enumerable:!1,value:so(t),writable:!0})}:uo,La=Ln,Na=Yo||function(e){return on.clearTimeout(e)},ja=pa&&1/U(new pa([,-0]))[1]==ne?function(e){return new pa(e)}:fo,Da=ga?function(e){return ga.get(e)}:fo,Ba=ea?function(e){return null==e?[]:(e=_o(e),l(ea(e),(function(t){return Zo.call(e,t)})))}:po,za=ea?function(e){for(var t=[];e;)d(t,Ba(e)),e=Vo(e);return t}:po,Fa=Ut;(fa&&Fa(new fa(new ArrayBuffer(1)))!=Ee||ha&&Fa(new ha)!=pe||da&&Fa(da.resolve())!=ge||pa&&Fa(new pa)!=be||va&&Fa(new va)!=we)&&(Fa=function(e){var t=Ut(e),n=t==me?e.constructor:q,r=n?ci(n):"";if(r)switch(r){case ba:return Ee;case xa:return pe;case _a:return ge;case wa:return be;case Sa:return we}return t});var Va=Co?ji:vo,Ua=si(Ra),Za=$o||function(e,t){return on.setTimeout(e,t)},Ha=si(Ia),Ga=function(e){var t=Ti(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(We,(function(e,n,r,i){t.push(r?i.replace(nt,"$1"):n||e)})),t})),Wa=Ln((function(e,t){return Li(e)?Rt(e,jt(t,1,Li,!0)):[]})),qa=Ln((function(e,t){var n=gi(t);return Li(n)&&(n=q),Li(e)?Rt(e,jt(t,1,Li,!0),Ur(n,2)):[]})),Ka=Ln((function(e,t){var n=gi(t);return Li(n)&&(n=q),Li(e)?Rt(e,jt(t,1,Li,!0),q,n):[]})),Ya=Ln((function(e){var t=h(e,Qn);return t.length&&t[0]===e[0]?Kt(t):[]})),Xa=Ln((function(e){var t=gi(e),n=h(e,Qn);return t===gi(n)?t=q:n.pop(),n.length&&n[0]===e[0]?Kt(n,Ur(t,2)):[]})),$a=Ln((function(e){var t=gi(e),n=h(e,Qn);return(t="function"==typeof t?t:q)&&n.pop(),n.length&&n[0]===e[0]?Kt(n,q,t):[]})),Ja=Ln(yi),Qa=Dr((function(e,t){var n=null==e?0:e.length,r=At(e,t);return Pn(e,h(t,(function(e){return Yr(e,n)?+e:e})).sort(ar)),r})),es=Ln((function(e){return Wn(jt(e,1,Li,!0))})),ts=Ln((function(e){var t=gi(e);return Li(t)&&(t=q),Wn(jt(e,1,Li,!0),Ur(t,2))})),ns=Ln((function(e){var t=gi(e);return t="function"==typeof t?t:q,Wn(jt(e,1,Li,!0),q,t)})),rs=Ln((function(e,t){return Li(e)?Rt(e,t):[]})),is=Ln((function(e){return $n(l(e,Li))})),os=Ln((function(e){var t=gi(e);return Li(t)&&(t=q),$n(l(e,Li),Ur(t,2))})),as=Ln((function(e){var t=gi(e);return t="function"==typeof t?t:q,$n(l(e,Li),q,t)})),ss=Ln(xi),us=Ln((function(e){var t=e.length,n=t>1?e[t-1]:q;return n="function"==typeof n?(e.pop(),n):q,_i(e,n)})),ls=Dr((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return At(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Xe&&Yr(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:Si,args:[i],thisArg:q}),new k(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(q),e}))):this.thru(i)})),cs=fr((function(e,t,n){To.call(e,n)?++e[n]:Ot(e,n,1)})),fs=br(di),hs=br(pi),ds=fr((function(e,t,n){To.call(e,n)?e[n].push(t):Ot(e,n,[t])})),ps=Ln((function(e,t,n){var r=-1,o="function"==typeof t,a=Ii(e)?mo(e.length):[];return Ca(e,(function(e){a[++r]=o?i(t,e,n):Qt(e,t,n)})),a})),vs=fr((function(e,t,n){Ot(e,n,t)})),ms=fr((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),gs=Ln((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Xr(e,t[0],t[1])?t=[]:n>2&&Xr(t[0],t[1],t[2])&&(t=[t[0]]),Cn(e,jt(t,1),[])})),ys=Xo||function(){return on.Date.now()},bs=Ln((function(e,t,n){var r=1;if(n.length){var i=V(n,Vr(bs));r|=J}return Rr(e,r,t,n,i)})),xs=Ln((function(e,t,n){var r=3;if(n.length){var i=V(n,Vr(xs));r|=J}return Rr(t,r,e,n,i)})),_s=Ln((function(e,t){return Pt(e,1,t)})),ws=Ln((function(e,t,n){return Pt(e,Yi(t)||0,n)}));Ti.Cache=pt;var Ss=La((function(e,t){var n=(t=1==t.length&&Ts(t[0])?h(t[0],T(Ur())):h(jt(t,1),T(Ur()))).length;return Ln((function(r){for(var o=-1,a=aa(r.length,n);++o<a;)r[o]=t[o].call(this,r[o]);return i(e,this,r)}))})),Es=Ln((function(e,t){return Rr(e,J,q,t,V(t,Vr(Es)))})),ks=Ln((function(e,t){return Rr(e,Q,q,t,V(t,Vr(ks)))})),Os=Dr((function(e,t){return Rr(e,te,q,q,q,t)})),As=Cr(Gt),Cs=Cr((function(e,t){return e>=t})),Ms=nn(function(){return arguments}())?nn:function(e){return Fi(e)&&To.call(e,"callee")&&!Zo.call(e,"callee")},Ts=mo.isArray,Ps=fn?T(fn):function(e){return Fi(e)&&Ut(e)==Se},Rs=ta||vo,Is=hn?T(hn):function(e){return Fi(e)&&Ut(e)==ce},Ls=dn?T(dn):function(e){return Fi(e)&&Fa(e)==pe},Ns=pn?T(pn):function(e){return Fi(e)&&Ut(e)==ye},js=vn?T(vn):function(e){return Fi(e)&&Fa(e)==be},Ds=mn?T(mn):function(e){return Fi(e)&&Bi(e.length)&&!!$t[Ut(e)]},Bs=Cr(wn),zs=Cr((function(e,t){return e<=t})),Fs=hr((function(e,t){if(Qr(t)||Ii(t))return cr(t,eo(t),e),q;for(var n in t)To.call(t,n)&&wt(e,n,t[n])})),Vs=hr((function(e,t){cr(t,to(t),e)})),Us=hr((function(e,t,n,r){cr(t,to(t),e,r)})),Zs=hr((function(e,t,n,r){cr(t,eo(t),e,r)})),Hs=Dr(At),Gs=Ln((function(e,t){e=_o(e);var n=-1,r=t.length,i=r>2?t[2]:q;for(i&&Xr(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=to(o),s=-1,u=a.length;++s<u;){var l=a[s],c=e[l];(c===q||Ri(c,Ao[l])&&!To.call(e,l))&&(e[l]=o[l])}return e})),Ws=Ln((function(e){return e.push(q,Lr),i($s,q,e)})),qs=wr((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Io.call(t)),e[t]=n}),so(uo)),Ks=wr((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Io.call(t)),To.call(e,t)?e[t].push(n):e[t]=[n]}),Ur),Ys=Ln(Qt),Xs=hr((function(e,t,n){On(e,t,n)})),$s=hr((function(e,t,n,r){On(e,t,n,r)})),Js=Dr((function(e,t){var n={};if(null==e)return n;var r=!1;t=h(t,(function(t){return t=tr(t,e),r||(r=t.length>1),t})),cr(e,zr(e),n),r&&(n=Mt(n,7,Nr));for(var i=t.length;i--;)qn(n,t[i]);return n})),Qs=Dr((function(e,t){return null==e?{}:function(e,t){return Mn(e,t,(function(t,n){return Qi(e,n)}))}(e,t)})),eu=Pr(eo),tu=Pr(to),nu=mr((function(e,t,n){return t=t.toLowerCase(),e+(n?io(t):t)})),ru=mr((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),iu=mr((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),ou=vr("toLowerCase"),au=mr((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),su=mr((function(e,t,n){return e+(n?" ":"")+lu(t)})),uu=mr((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),lu=vr("toUpperCase"),cu=Ln((function(e,t){try{return i(e,q,t)}catch(i){return Ni(i)?i:new yo(i)}})),fu=Dr((function(e,t){return a(t,(function(t){t=li(t),Ot(e,t,bs(e[t],e))})),e})),hu=xr(),du=xr(!0),pu=Ln((function(e,t){return function(n){return Qt(n,e,t)}})),vu=Ln((function(e,t){return function(n){return Qt(e,n,t)}})),mu=Er(h),gu=Er(u),yu=Er(m),bu=Ar(),xu=Ar(!0),_u=Sr((function(e,t){return e+t}),0),wu=Tr("ceil"),Su=Sr((function(e,t){return e/t}),1),Eu=Tr("floor"),ku=Sr((function(e,t){return e*t}),1),Ou=Tr("round"),Au=Sr((function(e,t){return e-t}),0);return n.after=function(e,t){if("function"!=typeof t)throw new Eo(K);return e=qi(e),function(){if(--e<1)return t.apply(this,arguments)}},n.ary=Ai,n.assign=Fs,n.assignIn=Vs,n.assignInWith=Us,n.assignWith=Zs,n.at=Hs,n.before=Ci,n.bind=bs,n.bindAll=fu,n.bindKey=xs,n.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ts(e)?e:[e]},n.chain=wi,n.chunk=function(e,t,n){t=(n?Xr(e,t,n):t===q)?1:oa(qi(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,a=mo(Jo(r/t));i<r;)a[o++]=zn(e,i,i+=t);return a},n.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},n.concat=function(){var e=arguments.length;if(!e)return[];for(var t=mo(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return d(Ts(n)?lr(n):[n],jt(t,1))},n.cond=function(e){var t=null==e?0:e.length,n=Ur();return e=t?h(e,(function(e){if("function"!=typeof e[1])throw new Eo(K);return[n(e[0]),e[1]]})):[],Ln((function(n){for(var r=-1;++r<t;){var o=e[r];if(i(o[0],this,n))return i(o[1],this,n)}}))},n.conforms=function(e){return function(e){var t=eo(e);return function(n){return Tt(n,e,t)}}(Mt(e,1))},n.constant=so,n.countBy=cs,n.create=function(e,t){var n=Aa(e);return null==t?n:kt(n,t)},n.curry=function e(t,n,r){var i=Rr(t,8,q,q,q,q,q,n=r?q:n);return i.placeholder=e.placeholder,i},n.curryRight=function e(t,n,r){var i=Rr(t,$,q,q,q,q,q,n=r?q:n);return i.placeholder=e.placeholder,i},n.debounce=Mi,n.defaults=Gs,n.defaultsDeep=Ws,n.defer=_s,n.delay=ws,n.difference=Wa,n.differenceBy=qa,n.differenceWith=Ka,n.drop=function(e,t,n){var r=null==e?0:e.length;return r?zn(e,(t=n||t===q?1:qi(t))<0?0:t,r):[]},n.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?zn(e,0,(t=r-(t=n||t===q?1:qi(t)))<0?0:t):[]},n.dropRightWhile=function(e,t){return e&&e.length?Yn(e,Ur(t,3),!0,!0):[]},n.dropWhile=function(e,t){return e&&e.length?Yn(e,Ur(t,3),!0):[]},n.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Xr(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=qi(n))<0&&(n=-n>i?0:i+n),(r=r===q||r>i?i:qi(r))<0&&(r+=i),r=n>r?0:Ki(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},n.filter=function(e,t){return(Ts(e)?l:Nt)(e,Ur(t,3))},n.flatMap=function(e,t){return jt(Oi(e,t),1)},n.flatMapDeep=function(e,t){return jt(Oi(e,t),ne)},n.flatMapDepth=function(e,t,n){return n=n===q?1:qi(n),jt(Oi(e,t),n)},n.flatten=vi,n.flattenDeep=function(e){return null!=e&&e.length?jt(e,ne):[]},n.flattenDepth=function(e,t){return null!=e&&e.length?jt(e,t=t===q?1:qi(t)):[]},n.flip=function(e){return Rr(e,512)},n.flow=hu,n.flowRight=du,n.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},n.functions=function(e){return null==e?[]:zt(e,eo(e))},n.functionsIn=function(e){return null==e?[]:zt(e,to(e))},n.groupBy=ds,n.initial=function(e){return null!=e&&e.length?zn(e,0,-1):[]},n.intersection=Ya,n.intersectionBy=Xa,n.intersectionWith=$a,n.invert=qs,n.invertBy=Ks,n.invokeMap=ps,n.iteratee=lo,n.keyBy=vs,n.keys=eo,n.keysIn=to,n.map=Oi,n.mapKeys=function(e,t){var n={};return t=Ur(t,3),Dt(e,(function(e,r,i){Ot(n,t(e,r,i),e)})),n},n.mapValues=function(e,t){var n={};return t=Ur(t,3),Dt(e,(function(e,r,i){Ot(n,r,t(e,r,i))})),n},n.matches=function(e){return En(Mt(e,1))},n.matchesProperty=function(e,t){return kn(e,Mt(t,1))},n.memoize=Ti,n.merge=Xs,n.mergeWith=$s,n.method=pu,n.methodOf=vu,n.mixin=co,n.negate=Pi,n.nthArg=function(e){return e=qi(e),Ln((function(t){return An(t,e)}))},n.omit=Js,n.omitBy=function(e,t){return no(e,Pi(Ur(t)))},n.once=function(e){return Ci(2,e)},n.orderBy=function(e,t,n,r){return null==e?[]:(Ts(t)||(t=null==t?[]:[t]),Ts(n=r?q:n)||(n=null==n?[]:[n]),Cn(e,t,n))},n.over=mu,n.overArgs=Ss,n.overEvery=gu,n.overSome=yu,n.partial=Es,n.partialRight=ks,n.partition=ms,n.pick=Qs,n.pickBy=no,n.property=ho,n.propertyOf=function(e){return function(t){return null==e?q:Ft(e,t)}},n.pull=Ja,n.pullAll=yi,n.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Tn(e,t,Ur(n,2)):e},n.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Tn(e,t,q,n):e},n.pullAt=Qa,n.range=bu,n.rangeRight=xu,n.rearg=Os,n.reject=function(e,t){return(Ts(e)?l:Nt)(e,Pi(Ur(t,3)))},n.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=Ur(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Pn(e,i),n},n.rest=function(e,t){if("function"!=typeof e)throw new Eo(K);return Ln(e,t=t===q?t:qi(t))},n.reverse=bi,n.sampleSize=function(e,t,n){return t=(n?Xr(e,t,n):t===q)?1:qi(t),(Ts(e)?bt:jn)(e,t)},n.set=function(e,t,n){return null==e?e:Dn(e,t,n)},n.setWith=function(e,t,n,r){return r="function"==typeof r?r:q,null==e?e:Dn(e,t,n,r)},n.shuffle=function(e){return(Ts(e)?xt:Bn)(e)},n.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Xr(e,t,n)?(t=0,n=r):(t=null==t?0:qi(t),n=n===q?r:qi(n)),zn(e,t,n)):[]},n.sortBy=gs,n.sortedUniq=function(e){return e&&e.length?Zn(e):[]},n.sortedUniqBy=function(e,t){return e&&e.length?Zn(e,Ur(t,2)):[]},n.split=function(e,t,n){return n&&"number"!=typeof n&&Xr(e,t,n)&&(t=n=q),(n=n===q?oe:n>>>0)?(e=$i(e))&&("string"==typeof t||null!=t&&!Ns(t))&&(!(t=Gn(t))&&D(e))?nr(H(e),0,n):e.split(t,n):[]},n.spread=function(e,t){if("function"!=typeof e)throw new Eo(K);return t=null==t?0:oa(qi(t),0),Ln((function(n){var r=n[t],o=nr(n,0,t);return r&&d(o,r),i(e,this,o)}))},n.tail=function(e){var t=null==e?0:e.length;return t?zn(e,1,t):[]},n.take=function(e,t,n){return e&&e.length?zn(e,0,(t=n||t===q?1:qi(t))<0?0:t):[]},n.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?zn(e,(t=r-(t=n||t===q?1:qi(t)))<0?0:t,r):[]},n.takeRightWhile=function(e,t){return e&&e.length?Yn(e,Ur(t,3),!1,!0):[]},n.takeWhile=function(e,t){return e&&e.length?Yn(e,Ur(t,3)):[]},n.tap=function(e,t){return t(e),e},n.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Eo(K);return zi(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Mi(e,t,{leading:r,maxWait:t,trailing:i})},n.thru=Si,n.toArray=Gi,n.toPairs=eu,n.toPairsIn=tu,n.toPath=function(e){return Ts(e)?h(e,li):Hi(e)?[e]:lr(Ga($i(e)))},n.toPlainObject=Xi,n.transform=function(e,t,n){var r=Ts(e),i=r||Rs(e)||Ds(e);if(t=Ur(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:zi(e)&&ji(o)?Aa(Vo(e)):{}}return(i?a:Dt)(e,(function(e,r,i){return t(n,e,r,i)})),n},n.unary=function(e){return Ai(e,1)},n.union=es,n.unionBy=ts,n.unionWith=ns,n.uniq=function(e){return e&&e.length?Wn(e):[]},n.uniqBy=function(e,t){return e&&e.length?Wn(e,Ur(t,2)):[]},n.uniqWith=function(e,t){return t="function"==typeof t?t:q,e&&e.length?Wn(e,q,t):[]},n.unset=function(e,t){return null==e||qn(e,t)},n.unzip=xi,n.unzipWith=_i,n.update=function(e,t,n){return null==e?e:Kn(e,t,er(n))},n.updateWith=function(e,t,n,r){return r="function"==typeof r?r:q,null==e?e:Kn(e,t,er(n),r)},n.values=ro,n.valuesIn=function(e){return null==e?[]:P(e,to(e))},n.without=rs,n.words=ao,n.wrap=function(e,t){return Es(er(t),e)},n.xor=is,n.xorBy=os,n.xorWith=as,n.zip=ss,n.zipObject=function(e,t){return Jn(e||[],t||[],wt)},n.zipObjectDeep=function(e,t){return Jn(e||[],t||[],Dn)},n.zipWith=us,n.entries=eu,n.entriesIn=tu,n.extend=Vs,n.extendWith=Us,co(n,n),n.add=_u,n.attempt=cu,n.camelCase=nu,n.capitalize=io,n.ceil=wu,n.clamp=function(e,t,n){return n===q&&(n=t,t=q),n!==q&&(n=(n=Yi(n))===n?n:0),t!==q&&(t=(t=Yi(t))===t?t:0),Ct(Yi(e),t,n)},n.clone=function(e){return Mt(e,4)},n.cloneDeep=function(e){return Mt(e,5)},n.cloneDeepWith=function(e,t){return Mt(e,5,t="function"==typeof t?t:q)},n.cloneWith=function(e,t){return Mt(e,4,t="function"==typeof t?t:q)},n.conformsTo=function(e,t){return null==t||Tt(e,t,eo(t))},n.deburr=oo,n.defaultTo=function(e,t){return null==e||e!==e?t:e},n.divide=Su,n.endsWith=function(e,t,n){e=$i(e),t=Gn(t);var r=e.length,i=n=n===q?r:Ct(qi(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},n.eq=Ri,n.escape=function(e){return(e=$i(e))&&Fe.test(e)?e.replace(Be,bn):e},n.escapeRegExp=function(e){return(e=$i(e))&&Ke.test(e)?e.replace(qe,"\\$&"):e},n.every=function(e,t,n){var r=Ts(e)?u:It;return n&&Xr(e,t,n)&&(t=q),r(e,Ur(t,3))},n.find=fs,n.findIndex=di,n.findKey=function(e,t){return y(e,Ur(t,3),Dt)},n.findLast=hs,n.findLastIndex=pi,n.findLastKey=function(e,t){return y(e,Ur(t,3),Bt)},n.floor=Eu,n.forEach=Ei,n.forEachRight=ki,n.forIn=function(e,t){return null==e?e:Ta(e,Ur(t,3),to)},n.forInRight=function(e,t){return null==e?e:Pa(e,Ur(t,3),to)},n.forOwn=function(e,t){return e&&Dt(e,Ur(t,3))},n.forOwnRight=function(e,t){return e&&Bt(e,Ur(t,3))},n.get=Ji,n.gt=As,n.gte=Cs,n.has=function(e,t){return null!=e&&Wr(e,t,Wt)},n.hasIn=Qi,n.head=mi,n.identity=uo,n.includes=function(e,t,n,r){e=Ii(e)?e:ro(e),n=n&&!r?qi(n):0;var i=e.length;return n<0&&(n=oa(i+n,0)),Zi(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&x(e,t,n)>-1},n.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:qi(n);return i<0&&(i=oa(r+i,0)),x(e,t,i)},n.inRange=function(e,t,n){return t=Wi(t),n===q?(n=t,t=0):n=Wi(n),function(e,t,n){return e>=aa(t,n)&&e<oa(t,n)}(e=Yi(e),t,n)},n.invoke=Ys,n.isArguments=Ms,n.isArray=Ts,n.isArrayBuffer=Ps,n.isArrayLike=Ii,n.isArrayLikeObject=Li,n.isBoolean=function(e){return!0===e||!1===e||Fi(e)&&Ut(e)==le},n.isBuffer=Rs,n.isDate=Is,n.isElement=function(e){return Fi(e)&&1===e.nodeType&&!Ui(e)},n.isEmpty=function(e){if(null==e)return!0;if(Ii(e)&&(Ts(e)||"string"==typeof e||"function"==typeof e.splice||Rs(e)||Ds(e)||Ms(e)))return!e.length;var t=Fa(e);if(t==pe||t==be)return!e.size;if(Qr(e))return!cn(e).length;for(var n in e)if(To.call(e,n))return!1;return!0},n.isEqual=function(e,t){return rn(e,t)},n.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:q)?n(e,t):q;return r===q?rn(e,t,q,n):!!r},n.isError=Ni,n.isFinite=function(e){return"number"==typeof e&&na(e)},n.isFunction=ji,n.isInteger=Di,n.isLength=Bi,n.isMap=Ls,n.isMatch=function(e,t){return e===t||an(e,t,Hr(t))},n.isMatchWith=function(e,t,n){return n="function"==typeof n?n:q,an(e,t,Hr(t),n)},n.isNaN=function(e){return Vi(e)&&e!=+e},n.isNative=function(e){if(Va(e))throw new yo("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return sn(e)},n.isNil=function(e){return null==e},n.isNull=function(e){return null===e},n.isNumber=Vi,n.isObject=zi,n.isObjectLike=Fi,n.isPlainObject=Ui,n.isRegExp=Ns,n.isSafeInteger=function(e){return Di(e)&&e>=-re&&e<=re},n.isSet=js,n.isString=Zi,n.isSymbol=Hi,n.isTypedArray=Ds,n.isUndefined=function(e){return e===q},n.isWeakMap=function(e){return Fi(e)&&Fa(e)==we},n.isWeakSet=function(e){return Fi(e)&&"[object WeakSet]"==Ut(e)},n.join=function(e,t){return null==e?"":ra.call(e,t)},n.kebabCase=ru,n.last=gi,n.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==q&&(i=(i=qi(n))<0?oa(r+i,0):aa(i,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):b(e,w,i,!0)},n.lowerCase=iu,n.lowerFirst=ou,n.lt=Bs,n.lte=zs,n.max=function(e){return e&&e.length?Lt(e,uo,Gt):q},n.maxBy=function(e,t){return e&&e.length?Lt(e,Ur(t,2),Gt):q},n.mean=function(e){return S(e,uo)},n.meanBy=function(e,t){return S(e,Ur(t,2))},n.min=function(e){return e&&e.length?Lt(e,uo,wn):q},n.minBy=function(e,t){return e&&e.length?Lt(e,Ur(t,2),wn):q},n.stubArray=po,n.stubFalse=vo,n.stubObject=function(){return{}},n.stubString=function(){return""},n.stubTrue=function(){return!0},n.multiply=ku,n.nth=function(e,t){return e&&e.length?An(e,qi(t)):q},n.noConflict=function(){return on._===this&&(on._=No),this},n.noop=fo,n.now=ys,n.pad=function(e,t,n){e=$i(e);var r=(t=qi(t))?Z(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return kr(Qo(i),n)+e+kr(Jo(i),n)},n.padEnd=function(e,t,n){e=$i(e);var r=(t=qi(t))?Z(e):0;return t&&r<t?e+kr(t-r,n):e},n.padStart=function(e,t,n){e=$i(e);var r=(t=qi(t))?Z(e):0;return t&&r<t?kr(t-r,n)+e:e},n.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),ua($i(e).replace(Ye,""),t||0)},n.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Xr(e,t,n)&&(t=n=q),n===q&&("boolean"==typeof t?(n=t,t=q):"boolean"==typeof e&&(n=e,e=q)),e===q&&t===q?(e=0,t=1):(e=Wi(e),t===q?(t=e,e=0):t=Wi(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=la();return aa(e+i*(t-e+en("1e-"+((i+"").length-1))),t)}return Rn(e,t)},n.reduce=function(e,t,n){var r=Ts(e)?p:O,i=arguments.length<3;return r(e,Ur(t,4),n,i,Ca)},n.reduceRight=function(e,t,n){var r=Ts(e)?v:O,i=arguments.length<3;return r(e,Ur(t,4),n,i,Ma)},n.repeat=function(e,t,n){return t=(n?Xr(e,t,n):t===q)?1:qi(t),In($i(e),t)},n.replace=function(){var e=arguments,t=$i(e[0]);return e.length<3?t:t.replace(e[1],e[2])},n.result=function(e,t,n){var r=-1,i=(t=tr(t,e)).length;for(i||(i=1,e=q);++r<i;){var o=null==e?q:e[li(t[r])];o===q&&(r=i,o=n),e=ji(o)?o.call(e):o}return e},n.round=Ou,n.runInContext=e,n.sample=function(e){return(Ts(e)?yt:Nn)(e)},n.size=function(e){if(null==e)return 0;if(Ii(e))return Zi(e)?Z(e):e.length;var t=Fa(e);return t==pe||t==be?e.size:cn(e).length},n.snakeCase=au,n.some=function(e,t,n){var r=Ts(e)?m:Fn;return n&&Xr(e,t,n)&&(t=q),r(e,Ur(t,3))},n.sortedIndex=function(e,t){return Vn(e,t)},n.sortedIndexBy=function(e,t,n){return Un(e,t,Ur(n,2))},n.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Vn(e,t);if(r<n&&Ri(e[r],t))return r}return-1},n.sortedLastIndex=function(e,t){return Vn(e,t,!0)},n.sortedLastIndexBy=function(e,t,n){return Un(e,t,Ur(n,2),!0)},n.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Vn(e,t,!0)-1;if(Ri(e[n],t))return n}return-1},n.startCase=su,n.startsWith=function(e,t,n){return e=$i(e),n=null==n?0:Ct(qi(n),0,e.length),t=Gn(t),e.slice(n,n+t.length)==t},n.subtract=Au,n.sum=function(e){return e&&e.length?A(e,uo):0},n.sumBy=function(e,t){return e&&e.length?A(e,Ur(t,2)):0},n.template=function(e,t,r){var i=n.templateSettings;r&&Xr(e,t,r)&&(t=q),e=$i(e),t=Us({},t,i,Ir);var o,a,s=Us({},t.imports,i.imports,Ir),u=eo(s),l=P(s,u),c=0,f=t.interpolate||ft,h="__p += '",d=wo((t.escape||ft).source+"|"+f.source+"|"+(f===Ze?rt:ft).source+"|"+(t.evaluate||ft).source+"|$","g"),p="//# sourceURL="+(To.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xt+"]")+"\n";e.replace(d,(function(t,n,r,i,s,u){return r||(r=i),h+=e.slice(c,u).replace(ht,j),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),h+="';\n";var v=To.call(t,"variable")&&t.variable;if(v){if(tt.test(v))throw new yo("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(a?h.replace(Le,""):h).replace(Ne,"$1").replace(je,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=cu((function(){return bo(u,p+"return "+h).apply(q,l)}));if(m.source=h,Ni(m))throw m;return m},n.times=function(e,t){if((e=qi(e))<1||e>re)return[];var n=oe,r=aa(e,oe);t=Ur(t),e-=oe;for(var i=C(r,t);++n<e;)t(n);return i},n.toFinite=Wi,n.toInteger=qi,n.toLength=Ki,n.toLower=function(e){return $i(e).toLowerCase()},n.toNumber=Yi,n.toSafeInteger=function(e){return e?Ct(qi(e),-re,re):0===e?e:0},n.toString=$i,n.toUpper=function(e){return $i(e).toUpperCase()},n.trim=function(e,t,n){if((e=$i(e))&&(n||t===q))return M(e);if(!e||!(t=Gn(t)))return e;var r=H(e),i=H(t);return nr(r,I(r,i),L(r,i)+1).join("")},n.trimEnd=function(e,t,n){if((e=$i(e))&&(n||t===q))return e.slice(0,G(e)+1);if(!e||!(t=Gn(t)))return e;var r=H(e);return nr(r,0,L(r,H(t))+1).join("")},n.trimStart=function(e,t,n){if((e=$i(e))&&(n||t===q))return e.replace(Ye,"");if(!e||!(t=Gn(t)))return e;var r=H(e);return nr(r,I(r,H(t))).join("")},n.truncate=function(e,t){var n=30,r="...";if(zi(t)){var i="separator"in t?t.separator:i;n="length"in t?qi(t.length):n,r="omission"in t?Gn(t.omission):r}var o=(e=$i(e)).length;if(D(e)){var a=H(e);o=a.length}if(n>=o)return e;var s=n-Z(r);if(s<1)return r;var u=a?nr(a,0,s).join(""):e.slice(0,s);if(i===q)return u+r;if(a&&(s+=u.length-s),Ns(i)){if(e.slice(s).search(i)){var l,c=u;for(i.global||(i=wo(i.source,$i(it.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var f=l.index;u=u.slice(0,f===q?s:f)}}else if(e.indexOf(Gn(i),s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+r},n.unescape=function(e){return(e=$i(e))&&ze.test(e)?e.replace(De,xn):e},n.uniqueId=function(e){var t=++Po;return $i(e)+t},n.upperCase=uu,n.upperFirst=lu,n.each=Ei,n.eachRight=ki,n.first=mi,co(n,function(){var e={};return Dt(n,(function(t,r){To.call(n.prototype,r)||(e[r]=t)})),e}(),{chain:!1}),n.VERSION="4.17.21",a(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){n[e].placeholder=n})),a(["drop","take"],(function(e,t){Xe.prototype[e]=function(n){n=n===q?1:oa(qi(n),0);var r=this.__filtered__&&!t?new Xe(this):this.clone();return r.__filtered__?r.__takeCount__=aa(n,r.__takeCount__):r.__views__.push({size:aa(n,oe),type:e+(r.__dir__<0?"Right":"")}),r},Xe.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),a(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Xe.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ur(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),a(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Xe.prototype[e]=function(){return this[n](1).value()[0]}})),a(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Xe.prototype[e]=function(){return this.__filtered__?new Xe(this):this[n](1)}})),Xe.prototype.compact=function(){return this.filter(uo)},Xe.prototype.find=function(e){return this.filter(e).head()},Xe.prototype.findLast=function(e){return this.reverse().find(e)},Xe.prototype.invokeMap=Ln((function(e,t){return"function"==typeof e?new Xe(this):this.map((function(n){return Qt(n,e,t)}))})),Xe.prototype.reject=function(e){return this.filter(Pi(Ur(e)))},Xe.prototype.slice=function(e,t){e=qi(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Xe(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==q&&(n=(t=qi(t))<0?n.dropRight(-t):n.take(t-e)),n)},Xe.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Xe.prototype.toArray=function(){return this.take(oe)},Dt(Xe.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=n[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);o&&(n.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,u=t instanceof Xe,l=s[0],c=u||Ts(t),f=function(e){var t=o.apply(n,d([e],s));return i&&h?t[0]:t};c&&r&&"function"==typeof l&&1!=l.length&&(u=c=!1);var h=this.__chain__,p=!!this.__actions__.length,v=a&&!h,m=u&&!p;if(!a&&c){t=m?t:new Xe(this);var g=e.apply(t,s);return g.__actions__.push({func:Si,args:[f],thisArg:q}),new k(g,h)}return v&&m?e.apply(this,s):(g=this.thru(f),v?i?g.value()[0]:g.value():g)})})),a(["pop","push","shift","sort","splice","unshift"],(function(e){var t=ko[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(Ts(n)?n:[],e)}return this[r]((function(n){return t.apply(Ts(n)?n:[],e)}))}})),Dt(Xe.prototype,(function(e,t){var r=n[t];if(r){var i=r.name+"";To.call(ya,i)||(ya[i]=[]),ya[i].push({name:t,func:r})}})),ya[_r(q,2).name]=[{name:"wrapper",func:q}],Xe.prototype.clone=function(){var e=new Xe(this.__wrapped__);return e.__actions__=lr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=lr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=lr(this.__views__),e},Xe.prototype.reverse=function(){if(this.__filtered__){var e=new Xe(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Xe.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ts(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=aa(t,e+a);break;case"takeRight":e=oa(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,f=c.length,h=0,d=aa(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return Xn(e,this.__actions__);var p=[];e:for(;u--&&h<d;){for(var v=-1,m=e[l+=t];++v<f;){var g=c[v],y=g.iteratee,b=g.type,x=y(m);if(2==b)m=x;else if(!x){if(1==b)continue e;break e}}p[h++]=m}return p},n.prototype.at=ls,n.prototype.chain=function(){return wi(this)},n.prototype.commit=function(){return new k(this.value(),this.__chain__)},n.prototype.next=function(){this.__values__===q&&(this.__values__=Gi(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?q:this.__values__[this.__index__++]}},n.prototype.plant=function(e){for(var t,n=this;n instanceof r;){var i=hi(n);i.__index__=0,i.__values__=q,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t},n.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Xe){var t=e;return this.__actions__.length&&(t=new Xe(this)),(t=t.reverse()).__actions__.push({func:Si,args:[bi],thisArg:q}),new k(t,this.__chain__)}return this.thru(bi)},n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=function(){return Xn(this.__wrapped__,this.__actions__)},n.prototype.first=n.prototype.head,Wo&&(n.prototype[Wo]=function(){return this}),n}();on._=_n,void 0===(r=function(){return _n}.call(t,n,t,e))||(e.exports=r)}.call(this)},46221:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,o){for(var a,s,u=i(e),l=1;l<arguments.length;l++){for(var c in a=Object(arguments[l]))n.call(a,c)&&(u[c]=a[c]);if(t){s=t(a);for(var f=0;f<s.length;f++)r.call(a,s[f])&&(u[s[f]]=a[s[f]])}}return u}},22812:function(e){"use strict";var t=function(e){return e!==e};e.exports=function(e,n){return 0===e&&0===n?1/e===1/n:e===n||!(!t(e)||!t(n))}},12370:function(e,t,n){"use strict";var r=n(91002),i=n(23942),o=n(22812),a=n(76785),s=n(28126),u=i(a(),Object);r(u,{getPolyfill:a,implementation:o,shim:s}),e.exports=u},76785:function(e,t,n){"use strict";var r=n(22812);e.exports=function(){return"function"===typeof Object.is?Object.is:r}},28126:function(e,t,n){"use strict";var r=n(76785),i=n(91002);e.exports=function(){var e=r();return i(Object,{is:e},{is:function(){return Object.is!==e}}),e}},89219:function(e,t,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=n(74066),s=Object.prototype.propertyIsEnumerable,u=!s.call({toString:null},"toString"),l=s.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(e){var t=e.constructor;return t&&t.prototype===e},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"===typeof window)return!1;for(var e in window)try{if(!h["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"===typeof window[e])try{f(window[e])}catch(t){return!0}}catch(t){return!0}return!1}();r=function(e){var t=null!==e&&"object"===typeof e,n="[object Function]"===o.call(e),r=a(e),s=t&&"[object String]"===o.call(e),h=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var p=l&&n;if(s&&e.length>0&&!i.call(e,0))for(var v=0;v<e.length;++v)h.push(String(v));if(r&&e.length>0)for(var m=0;m<e.length;++m)h.push(String(m));else for(var g in e)p&&"prototype"===g||!i.call(e,g)||h.push(String(g));if(u)for(var y=function(e){if("undefined"===typeof window||!d)return f(e);try{return f(e)}catch(t){return!1}}(e),b=0;b<c.length;++b)y&&"constructor"===c[b]||!i.call(e,c[b])||h.push(c[b]);return h}}e.exports=r},10480:function(e,t,n){"use strict";var r=Array.prototype.slice,i=n(74066),o=Object.keys,a=o?function(e){return o(e)}:n(89219),s=Object.keys;a.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return i(e)?s(r.call(e)):s(e)})}else Object.keys=a;return Object.keys||a},e.exports=a},74066:function(e){"use strict";var t=Object.prototype.toString;e.exports=function(e){var n=t.call(e),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),r}},60584:function(e,t,n){"use strict";var r=n(82517);function i(){}var o=null,a={};function s(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._U=0,this._V=0,this._W=null,this._X=null,e!==i&&d(e,this)}function u(e,t){for(;3===e._V;)e=e._W;if(s._Y&&s._Y(e),0===e._V)return 0===e._U?(e._U=1,void(e._X=t)):1===e._U?(e._U=2,void(e._X=[e._X,t])):void e._X.push(t);!function(e,t){r((function(){var n=1===e._V?t.onFulfilled:t.onRejected;if(null!==n){var r=function(e,t){try{return e(t)}catch(n){return o=n,a}}(n,e._W);r===a?c(t.promise,o):l(t.promise,r)}else 1===e._V?l(t.promise,e._W):c(t.promise,e._W)}))}(e,t)}function l(e,t){if(t===e)return c(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var n=function(e){try{return e.then}catch(t){return o=t,a}}(t);if(n===a)return c(e,o);if(n===e.then&&t instanceof s)return e._V=3,e._W=t,void f(e);if("function"===typeof n)return void d(n.bind(t),e)}e._V=1,e._W=t,f(e)}function c(e,t){e._V=2,e._W=t,s._Z&&s._Z(e,t),f(e)}function f(e){if(1===e._U&&(u(e,e._X),e._X=null),2===e._U){for(var t=0;t<e._X.length;t++)u(e,e._X[t]);e._X=null}}function h(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function d(e,t){var n=!1,r=function(e,t,n){try{e(t,n)}catch(r){return o=r,a}}(e,(function(e){n||(n=!0,l(t,e))}),(function(e){n||(n=!0,c(t,e))}));n||r!==a||(n=!0,c(t,o))}e.exports=s,s._Y=null,s._Z=null,s._0=i,s.prototype.then=function(e,t){if(this.constructor!==s)return function(e,t,n){return new e.constructor((function(r,o){var a=new s(i);a.then(r,o),u(e,new h(t,n,a))}))}(this,e,t);var n=new s(i);return u(this,new h(e,t,n)),n}},13042:function(e,t,n){"use strict";var r=n(60584);e.exports=r;var i=c(!0),o=c(!1),a=c(null),s=c(void 0),u=c(0),l=c("");function c(e){var t=new r(r._0);return t._V=1,t._W=e,t}r.resolve=function(e){if(e instanceof r)return e;if(null===e)return a;if(void 0===e)return s;if(!0===e)return i;if(!1===e)return o;if(0===e)return u;if(""===e)return l;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new r(t.bind(e))}catch(n){return new r((function(e,t){t(n)}))}return c(e)};var f=function(e){return"function"===typeof Array.from?(f=Array.from,Array.from(e)):(f=function(e){return Array.prototype.slice.call(e)},Array.prototype.slice.call(e))};r.all=function(e){var t=f(e);return new r((function(e,n){if(0===t.length)return e([]);var i=t.length;function o(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof r&&s.then===r.prototype.then){for(;3===s._V;)s=s._W;return 1===s._V?o(a,s._W):(2===s._V&&n(s._W),void s.then((function(e){o(a,e)}),n))}var u=s.then;if("function"===typeof u)return void new r(u.bind(s)).then((function(e){o(a,e)}),n)}t[a]=s,0===--i&&e(t)}for(var a=0;a<t.length;a++)o(a,t[a])}))},r.reject=function(e){return new r((function(t,n){n(e)}))},r.race=function(e){return new r((function(t,n){f(e).forEach((function(e){r.resolve(e).then(t,n)}))}))},r.prototype.catch=function(e){return this.then(null,e)}},61591:function(e,t,n){"use strict";var r=n(60584),i=[ReferenceError,TypeError,RangeError],o=!1;function a(){o=!1,r._Y=null,r._Z=null}function s(e,t){return t.some((function(t){return e instanceof t}))}t.disable=a,t.enable=function(e){e=e||{},o&&a();o=!0;var t=0,n=0,u={};function l(t){(e.allRejections||s(u[t].error,e.whitelist||i))&&(u[t].displayId=n++,e.onUnhandled?(u[t].logged=!0,e.onUnhandled(u[t].displayId,u[t].error)):(u[t].logged=!0,function(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach((function(e){console.warn("  "+e)}))}(u[t].displayId,u[t].error)))}r._Y=function(t){2===t._V&&u[t._1]&&(u[t._1].logged?function(t){u[t].logged&&(e.onHandled?e.onHandled(u[t].displayId,u[t].error):u[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+u[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+u[t].displayId+".")))}(t._1):clearTimeout(u[t._1].timeout),delete u[t._1])},r._Z=function(e,n){0===e._U&&(e._1=t++,u[e._1]={displayId:null,error:n,timeout:setTimeout(l.bind(null,e._1),s(n,i)?100:2e3),logged:!1})}}},39306:function(e,t,n){"use strict";var r=n(89539);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},92506:function(e,t,n){e.exports=n(39306)()},89539:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},69674:function(e){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){var r,i;r=[n(2)],void 0===(i=function(e){function t(r){if(t.is(r,"function"))return n?r():e.on("raphael.DOMload",r);if(t.is(r,T))return t._engine.create[d](t,r.splice(0,3+t.is(r[0],M))).add(r);var i=Array.prototype.slice.call(arguments,0);if(t.is(i[i.length-1],"function")){var o=i.pop();return n?o.call(t._engine.create[d](t,i)):e.on("raphael.DOMload",(function(){o.call(t._engine.create[d](t,i))}))}return t._engine.create[d](t,arguments)}t.version="2.3.0",t.eve=e;var n,r,i,o,a=/[, ]+/,s={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},u=/\{(\d+)\}/g,l="hasOwnProperty",c={doc:document,win:window},f={was:Object.prototype[l].call(c.win,"Raphael"),is:c.win.Raphael},h=function(){this.ca=this.customAttributes={}},d="apply",p="concat",v="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,m="",g=" ",y=String,b="split",x="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[b](g),_={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},w=y.prototype.toLowerCase,S=Math,E=S.max,k=S.min,O=S.abs,A=S.pow,C=S.PI,M="number",T="array",P=Object.prototype.toString,R=(t._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),I={NaN:1,Infinity:1,"-Infinity":1},L=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,N=S.round,j=parseFloat,D=parseInt,B=y.prototype.toUpperCase,z=t._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},F=t._availableAnimAttrs={blur:M,"clip-rect":"csv",cx:M,cy:M,fill:"colour","fill-opacity":M,"font-size":M,height:M,opacity:M,path:"path",r:M,rx:M,ry:M,stroke:"colour","stroke-opacity":M,"stroke-width":M,transform:"transform",width:M,x:M,y:M},V=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,U={hs:1,rg:1},Z=/,?([achlmqrstvxz]),?/gi,H=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,G=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,W=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,q=(t._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),K=function(e,t){return j(e)-j(t)},Y=function(e){return e},X=t._rectPath=function(e,t,n,r,i){return i?[["M",e+i,t],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]]:[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]]},$=function(e,t,n,r){return null==r&&(r=n),[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]]},J=t._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return $(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return $(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return X(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;return X(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return X(t.x,t.y,t.width,t.height)},set:function(e){var t=e._getBBox();return X(t.x,t.y,t.width,t.height)}},Q=t.mapPath=function(e,t){if(!t)return e;var n,r,i,o,a,s,u;for(i=0,a=(e=Ae(e)).length;i<a;i++)for(o=1,s=(u=e[i]).length;o<s;o+=2)n=t.x(u[o],u[o+1]),r=t.y(u[o],u[o+1]),u[o]=n,u[o+1]=r;return e};if(t._g=c,t.type=c.win.SVGAngle||c.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==t.type){var ee,te=c.doc.createElement("div");if(te.innerHTML='<v:shape adj="1"/>',(ee=te.firstChild).style.behavior="url(#default#VML)",!ee||"object"!=typeof ee.adj)return t.type=m;te=null}function ne(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)e[l](n)&&(t[n]=ne(e[n]));return t}t.svg=!(t.vml="VML"==t.type),t._Paper=h,t.fn=r=h.prototype=t.prototype,t._id=0,t.is=function(e,t){return"finite"==(t=w.call(t))?!I[l](+e):"array"==t?e instanceof Array:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||"array"==t&&Array.isArray&&Array.isArray(e)||P.call(e).slice(8,-1).toLowerCase()==t},t.angle=function(e,n,r,i,o,a){if(null==o){var s=e-r,u=n-i;return s||u?(180+180*S.atan2(-u,-s)/C+360)%360:0}return t.angle(e,n,o,a)-t.angle(r,i,o,a)},t.rad=function(e){return e%360*C/180},t.deg=function(e){return Math.round(180*e/C%360*1e3)/1e3},t.snapTo=function(e,n,r){if(r=t.is(r,"finite")?r:10,t.is(e,T)){for(var i=e.length;i--;)if(O(e[i]-n)<=r)return e[i]}else{var o=n%(e=+e);if(o<r)return n-o;if(o>e-r)return n-o+e}return n},t.createUUID=(i=/[xy]/g,o=function(e){var t=16*S.random()|0;return("x"==e?t:3&t|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(i,o).toUpperCase()}),t.setWindow=function(n){e("raphael.setWindow",t,c.win,n),c.win=n,c.doc=c.win.document,t._engine.initWin&&t._engine.initWin(c.win)};var re=function(e){if(t.vml){var n,r=/^\s+|\s+$/g;try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),n=i.body}catch(e){n=createPopup().document.body}var o=n.createTextRange();re=le((function(e){try{n.style.color=y(e).replace(r,m);var t=o.queryCommandValue("ForeColor");return"#"+("000000"+(t=(255&t)<<16|65280&t|(16711680&t)>>>16).toString(16)).slice(-6)}catch(e){return"none"}}))}else{var a=c.doc.createElement("i");a.title="Rapha\xebl Colour Picker",a.style.display="none",c.doc.body.appendChild(a),re=le((function(e){return a.style.color=e,c.doc.defaultView.getComputedStyle(a,m).getPropertyValue("color")}))}return re(e)},ie=function(){return"hsb("+[this.h,this.s,this.b]+")"},oe=function(){return"hsl("+[this.h,this.s,this.l]+")"},ae=function(){return this.hex},se=function(e,n,r){if(null==n&&t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,n=e.g,e=e.r),null==n&&t.is(e,"string")){var i=t.getRGB(e);e=i.r,n=i.g,r=i.b}return(e>1||n>1||r>1)&&(e/=255,n/=255,r/=255),[e,n,r]},ue=function(e,n,r,i){var o={r:e*=255,g:n*=255,b:r*=255,hex:t.rgb(e,n,r),toString:ae};return t.is(i,"finite")&&(o.opacity=i),o};function le(e,t,n){return function r(){var i=Array.prototype.slice.call(arguments,0),o=i.join("\u2400"),a=r.cache=r.cache||{},s=r.count=r.count||[];return a[l](o)?(function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}(s,o),n?n(a[o]):a[o]):(s.length>=1e3&&delete a[s.shift()],s.push(o),a[o]=e[d](t,i),n?n(a[o]):a[o])}}function ce(){return this.hex}function fe(e,t){for(var n=[],r=0,i=e.length;i-2*!t>r;r+=2){var o=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4==r?o[3]={x:+e[0],y:+e[1]}:i-2==r&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[i-2],y:+e[i-1]}:i-4==r?o[3]=o[2]:r||(o[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}t.color=function(e){var n;return t.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(n=t.hsb2rgb(e),e.r=n.r,e.g=n.g,e.b=n.b,e.hex=n.hex):t.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(n=t.hsl2rgb(e),e.r=n.r,e.g=n.g,e.b=n.b,e.hex=n.hex):(t.is(e,"string")&&(e=t.getRGB(e)),t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(n=t.rgb2hsl(e),e.h=n.h,e.s=n.s,e.l=n.l,n=t.rgb2hsb(e),e.v=n.b):(e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1),e.toString=ae,e},t.hsb2rgb=function(e,t,n,r){var i,o,a,s,u;return this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(n=e.b,t=e.s,r=e.o,e=e.h),s=(u=n*t)*(1-O((e=(e*=360)%360/60)%2-1)),i=o=a=n-u,ue(i+=[u,s,0,0,s,u][e=~~e],o+=[s,u,u,s,0,0][e],a+=[0,0,s,u,u,s][e],r)},t.hsl2rgb=function(e,t,n,r){var i,o,a,s,u;return this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(n=e.l,t=e.s,e=e.h),(e>1||t>1||n>1)&&(e/=360,t/=100,n/=100),s=(u=2*t*(n<.5?n:1-n))*(1-O((e=(e*=360)%360/60)%2-1)),i=o=a=n-u/2,ue(i+=[u,s,0,0,s,u][e=~~e],o+=[s,u,u,s,0,0][e],a+=[0,0,s,u,u,s][e],r)},t.rgb2hsb=function(e,t,n){var r,i;return e=(n=se(e,t,n))[0],t=n[1],n=n[2],{h:((0==(i=(r=E(e,t,n))-k(e,t,n))?null:r==e?(t-n)/i:r==t?(n-e)/i+2:(e-t)/i+4)+360)%6*60/360,s:0==i?0:i/r,b:r,toString:ie}},t.rgb2hsl=function(e,t,n){var r,i,o,a;return e=(n=se(e,t,n))[0],t=n[1],n=n[2],r=((i=E(e,t,n))+(o=k(e,t,n)))/2,{h:((0==(a=i-o)?null:i==e?(t-n)/a:i==t?(n-e)/a+2:(e-t)/a+4)+360)%6*60/360,s:0==a?0:r<.5?a/(2*r):a/(2-2*r),l:r,toString:oe}},t._path2string=function(){return this.join(",").replace(Z,"$1")},t._preload=function(e,t){var n=c.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){t.call(this),this.onload=null,c.doc.body.removeChild(this)},n.onerror=function(){c.doc.body.removeChild(this)},c.doc.body.appendChild(n),n.src=e},t.getRGB=le((function(e){if(!e||(e=y(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ce};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:ce};!U[l](e.toLowerCase().substring(0,2))&&"#"!=e.charAt()&&(e=re(e));var n,r,i,o,a,s,u=e.match(R);return u?(u[2]&&(i=D(u[2].substring(5),16),r=D(u[2].substring(3,5),16),n=D(u[2].substring(1,3),16)),u[3]&&(i=D((a=u[3].charAt(3))+a,16),r=D((a=u[3].charAt(2))+a,16),n=D((a=u[3].charAt(1))+a,16)),u[4]&&(s=u[4][b](V),n=j(s[0]),"%"==s[0].slice(-1)&&(n*=2.55),r=j(s[1]),"%"==s[1].slice(-1)&&(r*=2.55),i=j(s[2]),"%"==s[2].slice(-1)&&(i*=2.55),"rgba"==u[1].toLowerCase().slice(0,4)&&(o=j(s[3])),s[3]&&"%"==s[3].slice(-1)&&(o/=100)),u[5]?(s=u[5][b](V),n=j(s[0]),"%"==s[0].slice(-1)&&(n*=2.55),r=j(s[1]),"%"==s[1].slice(-1)&&(r*=2.55),i=j(s[2]),"%"==s[2].slice(-1)&&(i*=2.55),("deg"==s[0].slice(-3)||"\xb0"==s[0].slice(-1))&&(n/=360),"hsba"==u[1].toLowerCase().slice(0,4)&&(o=j(s[3])),s[3]&&"%"==s[3].slice(-1)&&(o/=100),t.hsb2rgb(n,r,i,o)):u[6]?(s=u[6][b](V),n=j(s[0]),"%"==s[0].slice(-1)&&(n*=2.55),r=j(s[1]),"%"==s[1].slice(-1)&&(r*=2.55),i=j(s[2]),"%"==s[2].slice(-1)&&(i*=2.55),("deg"==s[0].slice(-3)||"\xb0"==s[0].slice(-1))&&(n/=360),"hsla"==u[1].toLowerCase().slice(0,4)&&(o=j(s[3])),s[3]&&"%"==s[3].slice(-1)&&(o/=100),t.hsl2rgb(n,r,i,o)):((u={r:n,g:r,b:i,toString:ce}).hex="#"+(16777216|i|r<<8|n<<16).toString(16).slice(1),t.is(o,"finite")&&(u.opacity=o),u)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ce}}),t),t.hsb=le((function(e,n,r){return t.hsb2rgb(e,n,r).hex})),t.hsl=le((function(e,n,r){return t.hsl2rgb(e,n,r).hex})),t.rgb=le((function(e,t,n){function r(e){return e+.5|0}return"#"+(16777216|r(n)|r(t)<<8|r(e)<<16).toString(16).slice(1)})),t.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},n=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),n.hex},t.getColor.reset=function(){delete this.start},t.parsePathString=function(e){if(!e)return null;var n=he(e);if(n.arr)return be(n.arr);var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[];return t.is(e,T)&&t.is(e[0],T)&&(i=be(e)),i.length||y(e).replace(H,(function(e,t,n){var o=[],a=t.toLowerCase();if(n.replace(W,(function(e,t){t&&o.push(+t)})),"m"==a&&o.length>2&&(i.push([t][p](o.splice(0,2))),a="l",t="m"==t?"l":"L"),"r"==a)i.push([t][p](o));else for(;o.length>=r[a]&&(i.push([t][p](o.splice(0,r[a]))),r[a]););})),i.toString=t._path2string,n.arr=be(i),i},t.parseTransformString=le((function(e){if(!e)return null;var n=[];return t.is(e,T)&&t.is(e[0],T)&&(n=be(e)),n.length||y(e).replace(G,(function(e,t,r){var i=[];w.call(t),r.replace(W,(function(e,t){t&&i.push(+t)})),n.push([t][p](i))})),n.toString=t._path2string,n}),this,(function(e){if(!e)return e;for(var t=[],n=0;n<e.length;n++){for(var r=[],i=0;i<e[n].length;i++)r.push(e[n][i]);t.push(r)}return t}));var he=function e(t){var n=e.ps=e.ps||{};return n[t]?n[t].sleep=100:n[t]={sleep:100},setTimeout((function(){for(var e in n)n[l](e)&&e!=t&&(n[e].sleep--,!n[e].sleep&&delete n[e])})),n[t]};function de(e,t,n,r,i){return e*(e*(-3*t+9*n-9*r+3*i)+6*t-12*n+6*r)-3*t+3*n}function pe(e,t,n,r,i,o,a,s,u){null==u&&(u=1);for(var l=(u=u>1?1:u<0?0:u)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,d=0;d<12;d++){var p=l*c[d]+l,v=de(p,e,n,i,a),m=de(p,t,r,o,s),g=v*v+m*m;h+=f[d]*S.sqrt(g)}return l*h}function ve(e,t,n,r,i,o,a,s){if(!(E(e,n)<k(i,a)||k(e,n)>E(i,a)||E(t,r)<k(o,s)||k(t,r)>E(o,s))){var u=(e-n)*(o-s)-(t-r)*(i-a);if(u){var l=((e*r-t*n)*(i-a)-(e-n)*(i*s-o*a))/u,c=((e*r-t*n)*(o-s)-(t-r)*(i*s-o*a))/u,f=+l.toFixed(2),h=+c.toFixed(2);if(!(f<+k(e,n).toFixed(2)||f>+E(e,n).toFixed(2)||f<+k(i,a).toFixed(2)||f>+E(i,a).toFixed(2)||h<+k(t,r).toFixed(2)||h>+E(t,r).toFixed(2)||h<+k(o,s).toFixed(2)||h>+E(o,s).toFixed(2)))return{x:l,y:c}}}}function me(e,n,r){var i=t.bezierBBox(e),o=t.bezierBBox(n);if(!t.isBBoxIntersect(i,o))return r?0:[];for(var a=pe.apply(0,e),s=pe.apply(0,n),u=E(~~(a/5),1),l=E(~~(s/5),1),c=[],f=[],h={},d=r?0:[],p=0;p<u+1;p++){var v=t.findDotsAtSegment.apply(t,e.concat(p/u));c.push({x:v.x,y:v.y,t:p/u})}for(p=0;p<l+1;p++)v=t.findDotsAtSegment.apply(t,n.concat(p/l)),f.push({x:v.x,y:v.y,t:p/l});for(p=0;p<u;p++)for(var m=0;m<l;m++){var g=c[p],y=c[p+1],b=f[m],x=f[m+1],_=O(y.x-g.x)<.001?"y":"x",w=O(x.x-b.x)<.001?"y":"x",S=ve(g.x,g.y,y.x,y.y,b.x,b.y,x.x,x.y);if(S){if(h[S.x.toFixed(4)]==S.y.toFixed(4))continue;h[S.x.toFixed(4)]=S.y.toFixed(4);var A=g.t+O((S[_]-g[_])/(y[_]-g[_]))*(y.t-g.t),C=b.t+O((S[w]-b[w])/(x[w]-b[w]))*(x.t-b.t);A>=0&&A<=1.001&&C>=0&&C<=1.001&&(r?d++:d.push({x:S.x,y:S.y,t1:k(A,1),t2:k(C,1)}))}}return d}function ge(e,n,r){e=t._path2curve(e),n=t._path2curve(n);for(var i,o,a,s,u,l,c,f,h,d,p=r?0:[],v=0,m=e.length;v<m;v++){var g=e[v];if("M"==g[0])i=u=g[1],o=l=g[2];else{"C"==g[0]?(h=[i,o].concat(g.slice(1)),i=h[6],o=h[7]):(h=[i,o,i,o,u,l,u,l],i=u,o=l);for(var y=0,b=n.length;y<b;y++){var x=n[y];if("M"==x[0])a=c=x[1],s=f=x[2];else{"C"==x[0]?(d=[a,s].concat(x.slice(1)),a=d[6],s=d[7]):(d=[a,s,a,s,c,f,c,f],a=c,s=f);var _=me(h,d,r);if(r)p+=_;else{for(var w=0,S=_.length;w<S;w++)_[w].segment1=v,_[w].segment2=y,_[w].bez1=h,_[w].bez2=d;p=p.concat(_)}}}}}return p}t.findDotsAtSegment=function(e,t,n,r,i,o,a,s,u){var l=1-u,c=A(l,3),f=A(l,2),h=u*u,d=h*u,p=c*e+3*f*u*n+3*l*u*u*i+d*a,v=c*t+3*f*u*r+3*l*u*u*o+d*s,m=e+2*u*(n-e)+h*(i-2*n+e),g=t+2*u*(r-t)+h*(o-2*r+t),y=n+2*u*(i-n)+h*(a-2*i+n),b=r+2*u*(o-r)+h*(s-2*o+r),x=l*e+u*n,_=l*t+u*r,w=l*i+u*a,E=l*o+u*s,k=90-180*S.atan2(m-y,g-b)/C;return(m>y||g<b)&&(k+=180),{x:p,y:v,m:{x:m,y:g},n:{x:y,y:b},start:{x:x,y:_},end:{x:w,y:E},alpha:k}},t.bezierBBox=function(e,n,r,i,o,a,s,u){t.is(e,"array")||(e=[e,n,r,i,o,a,s,u]);var l=Oe.apply(null,e);return{x:l.min.x,y:l.min.y,x2:l.max.x,y2:l.max.y,width:l.max.x-l.min.x,height:l.max.y-l.min.y}},t.isPointInsideBBox=function(e,t,n){return t>=e.x&&t<=e.x2&&n>=e.y&&n<=e.y2},t.isBBoxIntersect=function(e,n){var r=t.isPointInsideBBox;return r(n,e.x,e.y)||r(n,e.x2,e.y)||r(n,e.x,e.y2)||r(n,e.x2,e.y2)||r(e,n.x,n.y)||r(e,n.x2,n.y)||r(e,n.x,n.y2)||r(e,n.x2,n.y2)||(e.x<n.x2&&e.x>n.x||n.x<e.x2&&n.x>e.x)&&(e.y<n.y2&&e.y>n.y||n.y<e.y2&&n.y>e.y)},t.pathIntersection=function(e,t){return ge(e,t)},t.pathIntersectionNumber=function(e,t){return ge(e,t,1)},t.isPointInsidePath=function(e,n,r){var i=t.pathBBox(e);return t.isPointInsideBBox(i,n,r)&&ge(e,[["M",n,r],["H",i.x2+10]],1)%2==1},t._removedFactory=function(t){return function(){e("raphael.log",null,"Rapha\xebl: you are calling to method \u201c"+t+"\u201d of removed object",t)}};var ye=t.pathBBox=function(e){var t=he(e);if(t.bbox)return ne(t.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var n,r=0,i=0,o=[],a=[],s=0,u=(e=Ae(e)).length;s<u;s++)if("M"==(n=e[s])[0])r=n[1],i=n[2],o.push(r),a.push(i);else{var l=Oe(r,i,n[1],n[2],n[3],n[4],n[5],n[6]);o=o[p](l.min.x,l.max.x),a=a[p](l.min.y,l.max.y),r=n[5],i=n[6]}var c=k[d](0,o),f=k[d](0,a),h=E[d](0,o),v=E[d](0,a),m=h-c,g=v-f,y={x:c,y:f,x2:h,y2:v,width:m,height:g,cx:c+m/2,cy:f+g/2};return t.bbox=ne(y),y},be=function(e){var n=ne(e);return n.toString=t._path2string,n},xe=t._pathToRelative=function(e){var n=he(e);if(n.rel)return be(n.rel);t.is(e,T)&&t.is(e&&e[0],T)||(e=t.parsePathString(e));var r=[],i=0,o=0,a=0,s=0,u=0;"M"==e[0][0]&&(a=i=e[0][1],s=o=e[0][2],u++,r.push(["M",i,o]));for(var l=u,c=e.length;l<c;l++){var f=r[l]=[],h=e[l];if(h[0]!=w.call(h[0]))switch(f[0]=w.call(h[0]),f[0]){case"a":f[1]=h[1],f[2]=h[2],f[3]=h[3],f[4]=h[4],f[5]=h[5],f[6]=+(h[6]-i).toFixed(3),f[7]=+(h[7]-o).toFixed(3);break;case"v":f[1]=+(h[1]-o).toFixed(3);break;case"m":a=h[1],s=h[2];default:for(var d=1,p=h.length;d<p;d++)f[d]=+(h[d]-(d%2?i:o)).toFixed(3)}else{f=r[l]=[],"m"==h[0]&&(a=h[1]+i,s=h[2]+o);for(var v=0,m=h.length;v<m;v++)r[l][v]=h[v]}var g=r[l].length;switch(r[l][0]){case"z":i=a,o=s;break;case"h":i+=+r[l][g-1];break;case"v":o+=+r[l][g-1];break;default:i+=+r[l][g-2],o+=+r[l][g-1]}}return r.toString=t._path2string,n.rel=be(r),r},_e=t._pathToAbsolute=function(e){var n=he(e);if(n.abs)return be(n.abs);if(t.is(e,T)&&t.is(e&&e[0],T)||(e=t.parsePathString(e)),!e||!e.length)return[["M",0,0]];var r=[],i=0,o=0,a=0,s=0,u=0;"M"==e[0][0]&&(a=i=+e[0][1],s=o=+e[0][2],u++,r[0]=["M",i,o]);for(var l,c,f=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),h=u,d=e.length;h<d;h++){if(r.push(l=[]),(c=e[h])[0]!=B.call(c[0]))switch(l[0]=B.call(c[0]),l[0]){case"A":l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=+(c[6]+i),l[7]=+(c[7]+o);break;case"V":l[1]=+c[1]+o;break;case"H":l[1]=+c[1]+i;break;case"R":for(var v=[i,o][p](c.slice(1)),m=2,g=v.length;m<g;m++)v[m]=+v[m]+i,v[++m]=+v[m]+o;r.pop(),r=r[p](fe(v,f));break;case"M":a=+c[1]+i,s=+c[2]+o;default:for(m=1,g=c.length;m<g;m++)l[m]=+c[m]+(m%2?i:o)}else if("R"==c[0])v=[i,o][p](c.slice(1)),r.pop(),r=r[p](fe(v,f)),l=["R"][p](c.slice(-2));else for(var y=0,b=c.length;y<b;y++)l[y]=c[y];switch(l[0]){case"Z":i=a,o=s;break;case"H":i=l[1];break;case"V":o=l[1];break;case"M":a=l[l.length-2],s=l[l.length-1];default:i=l[l.length-2],o=l[l.length-1]}}return r.toString=t._path2string,n.abs=be(r),r},we=function(e,t,n,r){return[e,t,n,r,n,r]},Se=function(e,t,n,r,i,o){return[1/3*e+2/3*n,1/3*t+2/3*r,1/3*i+2/3*n,1/3*o+2/3*r,i,o]},Ee=function e(t,n,r,i,o,a,s,u,l,c){var f,h=120*C/180,d=C/180*(+o||0),v=[],m=le((function(e,t,n){return{x:e*S.cos(n)-t*S.sin(n),y:e*S.sin(n)+t*S.cos(n)}}));if(c)M=c[0],T=c[1],k=c[2],A=c[3];else{t=(f=m(t,n,-d)).x,n=f.y,u=(f=m(u,l,-d)).x,l=f.y,S.cos(C/180*o),S.sin(C/180*o);var g=(t-u)/2,y=(n-l)/2,x=g*g/(r*r)+y*y/(i*i);x>1&&(r*=x=S.sqrt(x),i*=x);var _=r*r,w=i*i,E=(a==s?-1:1)*S.sqrt(O((_*w-_*y*y-w*g*g)/(_*y*y+w*g*g))),k=E*r*y/i+(t+u)/2,A=E*-i*g/r+(n+l)/2,M=S.asin(((n-A)/i).toFixed(9)),T=S.asin(((l-A)/i).toFixed(9));(M=t<k?C-M:M)<0&&(M=2*C+M),(T=u<k?C-T:T)<0&&(T=2*C+T),s&&M>T&&(M-=2*C),!s&&T>M&&(T-=2*C)}var P=T-M;if(O(P)>h){var R=T,I=u,L=l;T=M+h*(s&&T>M?1:-1),v=e(u=k+r*S.cos(T),l=A+i*S.sin(T),r,i,o,0,s,I,L,[T,R,k,A])}P=T-M;var N=S.cos(M),j=S.sin(M),D=S.cos(T),B=S.sin(T),z=S.tan(P/4),F=4/3*r*z,V=4/3*i*z,U=[t,n],Z=[t+F*j,n-V*N],H=[u+F*B,l-V*D],G=[u,l];if(Z[0]=2*U[0]-Z[0],Z[1]=2*U[1]-Z[1],c)return[Z,H,G][p](v);for(var W=[],q=0,K=(v=[Z,H,G][p](v).join()[b](",")).length;q<K;q++)W[q]=q%2?m(v[q-1],v[q],d).y:m(v[q],v[q+1],d).x;return W},ke=function(e,t,n,r,i,o,a,s,u){var l=1-u;return{x:A(l,3)*e+3*A(l,2)*u*n+3*l*u*u*i+A(u,3)*a,y:A(l,3)*t+3*A(l,2)*u*r+3*l*u*u*o+A(u,3)*s}},Oe=le((function(e,t,n,r,i,o,a,s){var u,l=i-2*n+e-(a-2*i+n),c=2*(n-e)-2*(i-n),f=e-n,h=(-c+S.sqrt(c*c-4*l*f))/2/l,p=(-c-S.sqrt(c*c-4*l*f))/2/l,v=[t,s],m=[e,a];return O(h)>"1e12"&&(h=.5),O(p)>"1e12"&&(p=.5),h>0&&h<1&&(u=ke(e,t,n,r,i,o,a,s,h),m.push(u.x),v.push(u.y)),p>0&&p<1&&(u=ke(e,t,n,r,i,o,a,s,p),m.push(u.x),v.push(u.y)),l=o-2*r+t-(s-2*o+r),f=t-r,h=(-(c=2*(r-t)-2*(o-r))+S.sqrt(c*c-4*l*f))/2/l,p=(-c-S.sqrt(c*c-4*l*f))/2/l,O(h)>"1e12"&&(h=.5),O(p)>"1e12"&&(p=.5),h>0&&h<1&&(u=ke(e,t,n,r,i,o,a,s,h),m.push(u.x),v.push(u.y)),p>0&&p<1&&(u=ke(e,t,n,r,i,o,a,s,p),m.push(u.x),v.push(u.y)),{min:{x:k[d](0,m),y:k[d](0,v)},max:{x:E[d](0,m),y:E[d](0,v)}}})),Ae=t._path2curve=le((function(e,t){var n=!t&&he(e);if(!t&&n.curve)return be(n.curve);for(var r=_e(e),i=t&&_e(t),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=function(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"][p](Ee[d](0,[t.x,t.y][p](e.slice(1))));break;case"S":"C"==n||"S"==n?(r=2*t.x-t.bx,i=2*t.y-t.by):(r=t.x,i=t.y),e=["C",r,i][p](e.slice(1));break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"][p](Se(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][p](Se(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][p](we(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][p](we(t.x,t.y,e[1],t.y));break;case"V":e=["C"][p](we(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][p](we(t.x,t.y,t.X,t.Y))}return e},u=function(e,t){if(e[t].length>7){e[t].shift();for(var n=e[t];n.length;)c[t]="A",i&&(f[t]="A"),e.splice(t++,0,["C"][p](n.splice(0,6)));e.splice(t,1),g=E(r.length,i&&i.length||0)}},l=function(e,t,n,o,a){e&&t&&"M"==e[a][0]&&"M"!=t[a][0]&&(t.splice(a,0,["M",o.x,o.y]),n.bx=0,n.by=0,n.x=e[a][1],n.y=e[a][2],g=E(r.length,i&&i.length||0))},c=[],f=[],h="",v="",m=0,g=E(r.length,i&&i.length||0);m<g;m++){r[m]&&(h=r[m][0]),"C"!=h&&(c[m]=h,m&&(v=c[m-1])),r[m]=s(r[m],o,v),"A"!=c[m]&&"C"==h&&(c[m]="C"),u(r,m),i&&(i[m]&&(h=i[m][0]),"C"!=h&&(f[m]=h,m&&(v=f[m-1])),i[m]=s(i[m],a,v),"A"!=f[m]&&"C"==h&&(f[m]="C"),u(i,m)),l(r,i,o,a,m),l(i,r,a,o,m);var y=r[m],b=i&&i[m],x=y.length,_=i&&b.length;o.x=y[x-2],o.y=y[x-1],o.bx=j(y[x-4])||o.x,o.by=j(y[x-3])||o.y,a.bx=i&&(j(b[_-4])||a.x),a.by=i&&(j(b[_-3])||a.y),a.x=i&&b[_-2],a.y=i&&b[_-1]}return i||(n.curve=be(r)),i?[r,i]:r}),null,be),Ce=(t._parseDots=le((function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o={},a=e[r].match(/^([^:]*):?([\d\.]*)/);if(o.color=t.getRGB(a[1]),o.color.error)return null;o.opacity=o.color.opacity,o.color=o.color.hex,a[2]&&(o.offset=a[2]+"%"),n.push(o)}for(r=1,i=n.length-1;r<i;r++)if(!n[r].offset){for(var s=j(n[r-1].offset||0),u=0,l=r+1;l<i;l++)if(n[l].offset){u=n[l].offset;break}u||(u=100,l=i);for(var c=((u=j(u))-s)/(l-r+1);r<l;r++)s+=c,n[r].offset=s+"%"}return n})),t._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),Me=(t._tofront=function(e,t){t.top!==e&&(Ce(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},t._toback=function(e,t){t.bottom!==e&&(Ce(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},t._insertafter=function(e,t,n){Ce(e,n),t==n.top&&(n.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},t._insertbefore=function(e,t,n){Ce(e,n),t==n.bottom&&(n.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},t.toMatrix=function(e,t){var n=ye(e),r={_:{transform:m},getBBox:function(){return n}};return Te(r,t),r.matrix}),Te=(t.transformPath=function(e,t){return Q(e,Me(e,t))},t._extractTransform=function(e,n){if(null==n)return e._.transform;n=y(n).replace(/\.{3}|\u2026/g,e._.transform||m);var r,i,o=t.parseTransformString(n),a=0,s=1,u=1,l=e._,c=new Ie;if(l.transform=o||[],o)for(var f=0,h=o.length;f<h;f++){var d,p,v,g,b,x=o[f],_=x.length,w=y(x[0]).toLowerCase(),S=x[0]!=w,E=S?c.invert():0;"t"==w&&3==_?S?(d=E.x(0,0),p=E.y(0,0),v=E.x(x[1],x[2]),g=E.y(x[1],x[2]),c.translate(v-d,g-p)):c.translate(x[1],x[2]):"r"==w?2==_?(b=b||e.getBBox(1),c.rotate(x[1],b.x+b.width/2,b.y+b.height/2),a+=x[1]):4==_&&(S?(v=E.x(x[2],x[3]),g=E.y(x[2],x[3]),c.rotate(x[1],v,g)):c.rotate(x[1],x[2],x[3]),a+=x[1]):"s"==w?2==_||3==_?(b=b||e.getBBox(1),c.scale(x[1],x[_-1],b.x+b.width/2,b.y+b.height/2),s*=x[1],u*=x[_-1]):5==_&&(S?(v=E.x(x[3],x[4]),g=E.y(x[3],x[4]),c.scale(x[1],x[2],v,g)):c.scale(x[1],x[2],x[3],x[4]),s*=x[1],u*=x[2]):"m"==w&&7==_&&c.add(x[1],x[2],x[3],x[4],x[5],x[6]),l.dirtyT=1,e.matrix=c}e.matrix=c,l.sx=s,l.sy=u,l.deg=a,l.dx=r=c.e,l.dy=i=c.f,1==s&&1==u&&!a&&l.bbox?(l.bbox.x+=+r,l.bbox.y+=+i):l.dirtyT=1}),Pe=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}},Re=t._equaliseTransform=function(e,n){n=y(n).replace(/\.{3}|\u2026/g,e),e=t.parseTransformString(e)||[],n=t.parseTransformString(n)||[];for(var r,i,o,a,s=E(e.length,n.length),u=[],l=[],c=0;c<s;c++){if(o=e[c]||Pe(n[c]),a=n[c]||Pe(o),o[0]!=a[0]||"r"==o[0].toLowerCase()&&(o[2]!=a[2]||o[3]!=a[3])||"s"==o[0].toLowerCase()&&(o[3]!=a[3]||o[4]!=a[4]))return;for(u[c]=[],l[c]=[],r=0,i=E(o.length,a.length);r<i;r++)r in o&&(u[c][r]=o[r]),r in a&&(l[c][r]=a[r])}return{from:u,to:l}};function Ie(e,t,n,r,i,o){null!=e?(this.a=+e,this.b=+t,this.c=+n,this.d=+r,this.e=+i,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}t._getContainer=function(e,n,r,i){var o;if(null!=(o=null!=i||t.is(e,"object")?e:c.doc.getElementById(e)))return o.tagName?null==n?{container:o,width:o.style.pixelWidth||o.offsetWidth,height:o.style.pixelHeight||o.offsetHeight}:{container:o,width:n,height:r}:{container:1,x:e,y:n,width:r,height:i}},t.pathToRelative=xe,t._engine={},t.path2curve=Ae,t.matrix=function(e,t,n,r,i,o){return new Ie(e,t,n,r,i,o)},function(e){function n(e){return e[0]*e[0]+e[1]*e[1]}function r(e){var t=S.sqrt(n(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}e.add=function(e,t,n,r,i,o){var a,s,u,l,c=[[],[],[]],f=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],h=[[e,n,i],[t,r,o],[0,0,1]];for(e&&e instanceof Ie&&(h=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),a=0;a<3;a++)for(s=0;s<3;s++){for(l=0,u=0;u<3;u++)l+=f[a][u]*h[u][s];c[a][s]=l}this.a=c[0][0],this.b=c[1][0],this.c=c[0][1],this.d=c[1][1],this.e=c[0][2],this.f=c[1][2]},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new Ie(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new Ie(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){this.add(1,0,0,1,e,t)},e.scale=function(e,t,n,r){null==t&&(t=e),(n||r)&&this.add(1,0,0,1,n,r),this.add(e,0,0,t,0,0),(n||r)&&this.add(1,0,0,1,-n,-r)},e.rotate=function(e,n,r){e=t.rad(e),n=n||0,r=r||0;var i=+S.cos(e).toFixed(9),o=+S.sin(e).toFixed(9);this.add(i,o,-o,i,n,r),this.add(1,0,0,1,-n,-r)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[y.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return t.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];e.scalex=S.sqrt(n(i[0])),r(i[0]),e.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*e.shear,i[1][1]-i[0][1]*e.shear],e.scaley=S.sqrt(n(i[1])),r(i[1]),e.shear/=e.scaley;var o=-i[0][1],a=i[1][1];return a<0?(e.rotate=t.deg(S.acos(a)),o<0&&(e.rotate=360-e.rotate)):e.rotate=t.deg(S.asin(o)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var t=e||this[b]();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[t.dx,t.dy]:m)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:m)+(t.rotate?"r"+[t.rotate,0,0]:m)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(Ie.prototype);for(var Le=function(){this.returnValue=!1},Ne=function(){return this.originalEvent.preventDefault()},je=function(){this.cancelBubble=!0},De=function(){return this.originalEvent.stopPropagation()},Be=function(e){var t=c.doc.documentElement.scrollTop||c.doc.body.scrollTop,n=c.doc.documentElement.scrollLeft||c.doc.body.scrollLeft;return{x:e.clientX+n,y:e.clientY+t}},ze=c.doc.addEventListener?function(e,t,n,r){var i=function(e){var t=Be(e);return n.call(r,e,t.x,t.y)};if(e.addEventListener(t,i,!1),v&&_[t]){var o=function(t){for(var i=Be(t),o=t,a=0,s=t.targetTouches&&t.targetTouches.length;a<s;a++)if(t.targetTouches[a].target==e){(t=t.targetTouches[a]).originalEvent=o,t.preventDefault=Ne,t.stopPropagation=De;break}return n.call(r,t,i.x,i.y)};e.addEventListener(_[t],o,!1)}return function(){return e.removeEventListener(t,i,!1),v&&_[t]&&e.removeEventListener(_[t],o,!1),!0}}:c.doc.attachEvent?function(e,t,n,r){var i=function(e){e=e||c.win.event;var t=c.doc.documentElement.scrollTop||c.doc.body.scrollTop,i=c.doc.documentElement.scrollLeft||c.doc.body.scrollLeft,o=e.clientX+i,a=e.clientY+t;return e.preventDefault=e.preventDefault||Le,e.stopPropagation=e.stopPropagation||je,n.call(r,e,o,a)};return e.attachEvent("on"+t,i),function(){return e.detachEvent("on"+t,i),!0}}:void 0,Fe=[],Ve=function(t){for(var n,r=t.clientX,i=t.clientY,o=c.doc.documentElement.scrollTop||c.doc.body.scrollTop,a=c.doc.documentElement.scrollLeft||c.doc.body.scrollLeft,s=Fe.length;s--;){if(n=Fe[s],v&&t.touches){for(var u,l=t.touches.length;l--;)if((u=t.touches[l]).identifier==n.el._drag.id){r=u.clientX,i=u.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var f,h=n.el.node,d=h.nextSibling,p=h.parentNode,m=h.style.display;c.win.opera&&p.removeChild(h),h.style.display="none",f=n.el.paper.getElementByPoint(r,i),h.style.display=m,c.win.opera&&(d?p.insertBefore(h,d):p.appendChild(h)),f&&e("raphael.drag.over."+n.el.id,n.el,f),r+=a,i+=o,e("raphael.drag.move."+n.el.id,n.move_scope||n.el,r-n.el._drag.x,i-n.el._drag.y,r,i,t)}},Ue=function n(r){t.unmousemove(Ve).unmouseup(n);for(var i,o=Fe.length;o--;)(i=Fe[o]).el._drag={},e("raphael.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,r);Fe=[]},Ze=t.el={},He=x.length;He--;)!function(e){t[e]=Ze[e]=function(n,r){return t.is(n,"function")&&(this.events=this.events||[],this.events.push({name:e,f:n,unbind:ze(this.shape||this.node||c.doc,e,n,r||this)})),this},t["un"+e]=Ze["un"+e]=function(n){for(var r=this.events||[],i=r.length;i--;)r[i].name!=e||!t.is(n,"undefined")&&r[i].f!=n||(r[i].unbind(),r.splice(i,1),!r.length&&delete this.events);return this}}(x[He]);Ze.data=function(n,r){var i=q[this.id]=q[this.id]||{};if(0==arguments.length)return i;if(1==arguments.length){if(t.is(n,"object")){for(var o in n)n[l](o)&&this.data(o,n[o]);return this}return e("raphael.data.get."+this.id,this,i[n],n),i[n]}return i[n]=r,e("raphael.data.set."+this.id,this,r,n),this},Ze.removeData=function(e){return null==e?delete q[this.id]:q[this.id]&&delete q[this.id][e],this},Ze.getData=function(){return ne(q[this.id]||{})},Ze.hover=function(e,t,n,r){return this.mouseover(e,n).mouseout(t,r||n)},Ze.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var Ge=[];function We(){return this.x+g+this.y+g+this.width+" \xd7 "+this.height}Ze.drag=function(n,r,i,o,a,s){function u(u){(u.originalEvent||u).preventDefault();var l=u.clientX,f=u.clientY,h=c.doc.documentElement.scrollTop||c.doc.body.scrollTop,d=c.doc.documentElement.scrollLeft||c.doc.body.scrollLeft;if(this._drag.id=u.identifier,v&&u.touches)for(var p,m=u.touches.length;m--;)if(p=u.touches[m],this._drag.id=p.identifier,p.identifier==this._drag.id){l=p.clientX,f=p.clientY;break}this._drag.x=l+d,this._drag.y=f+h,!Fe.length&&t.mousemove(Ve).mouseup(Ue),Fe.push({el:this,move_scope:o,start_scope:a,end_scope:s}),r&&e.on("raphael.drag.start."+this.id,r),n&&e.on("raphael.drag.move."+this.id,n),i&&e.on("raphael.drag.end."+this.id,i),e("raphael.drag.start."+this.id,a||o||this,this._drag.x,this._drag.y,u)}return this._drag={},Ge.push({el:this,start:u}),this.mousedown(u),this},Ze.onDragOver=function(t){t?e.on("raphael.drag.over."+this.id,t):e.unbind("raphael.drag.over."+this.id)},Ze.undrag=function(){for(var n=Ge.length;n--;)Ge[n].el==this&&(this.unmousedown(Ge[n].start),Ge.splice(n,1),e.unbind("raphael.drag.*."+this.id));!Ge.length&&t.unmousemove(Ve).unmouseup(Ue),Fe=[]},r.circle=function(e,n,r){var i=t._engine.circle(this,e||0,n||0,r||0);return this.__set__&&this.__set__.push(i),i},r.rect=function(e,n,r,i,o){var a=t._engine.rect(this,e||0,n||0,r||0,i||0,o||0);return this.__set__&&this.__set__.push(a),a},r.ellipse=function(e,n,r,i){var o=t._engine.ellipse(this,e||0,n||0,r||0,i||0);return this.__set__&&this.__set__.push(o),o},r.path=function(e){e&&!t.is(e,"string")&&!t.is(e[0],T)&&(e+=m);var n=t._engine.path(t.format[d](t,arguments),this);return this.__set__&&this.__set__.push(n),n},r.image=function(e,n,r,i,o){var a=t._engine.image(this,e||"about:blank",n||0,r||0,i||0,o||0);return this.__set__&&this.__set__.push(a),a},r.text=function(e,n,r){var i=t._engine.text(this,e||0,n||0,y(r));return this.__set__&&this.__set__.push(i),i},r.set=function(e){!t.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var n=new ft(e);return this.__set__&&this.__set__.push(n),n.paper=this,n.type="set",n},r.setStart=function(e){this.__set__=e||this.set()},r.setFinish=function(e){var t=this.__set__;return delete this.__set__,t},r.getSize=function(){var e=this.canvas.parentNode;return{width:e.offsetWidth,height:e.offsetHeight}},r.setSize=function(e,n){return t._engine.setSize.call(this,e,n)},r.setViewBox=function(e,n,r,i,o){return t._engine.setViewBox.call(this,e,n,r,i,o)},r.top=r.bottom=null,r.raphael=t,r.getElementByPoint=function(e,t){var n,r,i,o,a,s,u,l=this.canvas,f=c.doc.elementFromPoint(e,t);if(c.win.opera&&"svg"==f.tagName){var h=(r=(n=l).getBoundingClientRect(),o=(i=n.ownerDocument).body,s=(a=i.documentElement).clientTop||o.clientTop||0,u=a.clientLeft||o.clientLeft||0,{y:r.top+(c.win.pageYOffset||a.scrollTop||o.scrollTop)-s,x:r.left+(c.win.pageXOffset||a.scrollLeft||o.scrollLeft)-u}),d=l.createSVGRect();d.x=e-h.x,d.y=t-h.y,d.width=d.height=1;var p=l.getIntersectionList(d,null);p.length&&(f=p[p.length-1])}if(!f)return null;for(;f.parentNode&&f!=l.parentNode&&!f.raphael;)f=f.parentNode;return f==this.canvas.parentNode&&(f=l),f&&f.raphael?this.getById(f.raphaelid):null},r.getElementsByBBox=function(e){var n=this.set();return this.forEach((function(r){t.isBBoxIntersect(r.getBBox(),e)&&n.push(r)})),n},r.getById=function(e){for(var t=this.bottom;t;){if(t.id==e)return t;t=t.next}return null},r.forEach=function(e,t){for(var n=this.bottom;n;){if(!1===e.call(t,n))return this;n=n.next}return this},r.getElementsByPoint=function(e,t){var n=this.set();return this.forEach((function(r){r.isPointInside(e,t)&&n.push(r)})),n},Ze.isPointInside=function(e,n){var r=this.realPath=J[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(r=t.transformPath(r,this.attr("transform"))),t.isPointInsidePath(r,e,n)},Ze.getBBox=function(e){if(this.removed)return{};var t=this._;return e?(!t.dirty&&t.bboxwt||(this.realPath=J[this.type](this),t.bboxwt=ye(this.realPath),t.bboxwt.toString=We,t.dirty=0),t.bboxwt):((t.dirty||t.dirtyT||!t.bbox)&&(!t.dirty&&this.realPath||(t.bboxwt=0,this.realPath=J[this.type](this)),t.bbox=ye(Q(this.realPath,this.matrix)),t.bbox.toString=We,t.dirty=t.dirtyT=0),t.bbox)},Ze.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},Ze.glow=function(e){if("text"==this.type)return null;var t={width:((e=e||{}).width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:null==e.opacity?.5:e.opacity,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},n=t.width/2,r=this.paper,i=r.set(),o=this.realPath||J[this.type](this);o=this.matrix?Q(o,this.matrix):o;for(var a=1;a<n+1;a++)i.push(r.path(o).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/n*a).toFixed(3),opacity:+(t.opacity/n).toFixed(3)}));return i.insertBefore(this).translate(t.offsetx,t.offsety)};var qe=function(e,n,r,i,o,a,s,u,l){return null==l?pe(e,n,r,i,o,a,s,u):t.findDotsAtSegment(e,n,r,i,o,a,s,u,function(e,t,n,r,i,o,a,s,u){if(!(u<0||pe(e,t,n,r,i,o,a,s)<u)){var l,c=.5,f=1-c;for(l=pe(e,t,n,r,i,o,a,s,f);O(l-u)>.01;)l=pe(e,t,n,r,i,o,a,s,f+=(l<u?1:-1)*(c/=2));return f}}(e,n,r,i,o,a,s,u,l))},Ke=function(e,n){return function(r,i,o){for(var a,s,u,l,c,f="",h={},d=0,p=0,v=(r=Ae(r)).length;p<v;p++){if("M"==(u=r[p])[0])a=+u[1],s=+u[2];else{if(d+(l=qe(a,s,u[1],u[2],u[3],u[4],u[5],u[6]))>i){if(n&&!h.start){if(f+=["C"+(c=qe(a,s,u[1],u[2],u[3],u[4],u[5],u[6],i-d)).start.x,c.start.y,c.m.x,c.m.y,c.x,c.y],o)return f;h.start=f,f=["M"+c.x,c.y+"C"+c.n.x,c.n.y,c.end.x,c.end.y,u[5],u[6]].join(),d+=l,a=+u[5],s=+u[6];continue}if(!e&&!n)return{x:(c=qe(a,s,u[1],u[2],u[3],u[4],u[5],u[6],i-d)).x,y:c.y,alpha:c.alpha}}d+=l,a=+u[5],s=+u[6]}f+=u.shift()+u}return h.end=f,(c=e?d:n?h:t.findDotsAtSegment(a,s,u[0],u[1],u[2],u[3],u[4],u[5],1)).alpha&&(c={x:c.x,y:c.y,alpha:c.alpha}),c}},Ye=Ke(1),Xe=Ke(),$e=Ke(0,1);t.getTotalLength=Ye,t.getPointAtLength=Xe,t.getSubpath=function(e,t,n){if(this.getTotalLength(e)-n<1e-6)return $e(e,t).end;var r=$e(e,n,1);return t?$e(r,t).end:r},Ze.getTotalLength=function(){var e=this.getPath();if(e)return this.node.getTotalLength?this.node.getTotalLength():Ye(e)},Ze.getPointAtLength=function(e){var t=this.getPath();if(t)return Xe(t,e)},Ze.getPath=function(){var e,n=t._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return n&&(e=n(this)),e},Ze.getSubpath=function(e,n){var r=this.getPath();if(r)return t.getSubpath(r,e,n)};var Je=t.easing_formulas={linear:function(e){return e},"<":function(e){return A(e,1.7)},">":function(e){return A(e,.48)},"<>":function(e){var t=.48-e/1.04,n=S.sqrt(.1734+t*t),r=n-t,i=-n-t,o=A(O(r),1/3)*(r<0?-1:1)+A(O(i),1/3)*(i<0?-1:1)+.5;return 3*(1-o)*o*o+o*o*o},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},elastic:function(e){return e==!!e?e:A(2,-10*e)*S.sin(2*C*(e-.075)/.3)+1},bounce:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}};Je.easeIn=Je["ease-in"]=Je["<"],Je.easeOut=Je["ease-out"]=Je[">"],Je.easeInOut=Je["ease-in-out"]=Je["<>"],Je["back-in"]=Je.backIn,Je["back-out"]=Je.backOut;var Qe=[],et=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},tt=function n(){for(var r=+new Date,i=0;i<Qe.length;i++){var o=Qe[i];if(!o.el.removed&&!o.paused){var a,s,u=r-o.start,c=o.ms,f=o.easing,h=o.from,d=o.diff,v=o.to,m=(o.t,o.el),y={},b={};if(o.initstatus?(u=(o.initstatus*o.anim.top-o.prev)/(o.percent-o.prev)*c,o.status=o.initstatus,delete o.initstatus,o.stop&&Qe.splice(i--,1)):o.status=(o.prev+(o.percent-o.prev)*(u/c))/o.anim.top,!(u<0))if(u<c){var x=f(u/c);for(var _ in h)if(h[l](_)){switch(F[_]){case M:a=+h[_]+x*c*d[_];break;case"colour":a="rgb("+[nt(N(h[_].r+x*c*d[_].r)),nt(N(h[_].g+x*c*d[_].g)),nt(N(h[_].b+x*c*d[_].b))].join(",")+")";break;case"path":a=[];for(var w=0,S=h[_].length;w<S;w++){a[w]=[h[_][w][0]];for(var E=1,k=h[_][w].length;E<k;E++)a[w][E]=+h[_][w][E]+x*c*d[_][w][E];a[w]=a[w].join(g)}a=a.join(g);break;case"transform":if(d[_].real)for(a=[],w=0,S=h[_].length;w<S;w++)for(a[w]=[h[_][w][0]],E=1,k=h[_][w].length;E<k;E++)a[w][E]=h[_][w][E]+x*c*d[_][w][E];else{var O=function(e){return+h[_][e]+x*c*d[_][e]};a=[["m",O(0),O(1),O(2),O(3),O(4),O(5)]]}break;case"csv":if("clip-rect"==_)for(a=[],w=4;w--;)a[w]=+h[_][w]+x*c*d[_][w];break;default:var A=[][p](h[_]);for(a=[],w=m.paper.customAttributes[_].length;w--;)a[w]=+A[w]+x*c*d[_][w]}y[_]=a}m.attr(y),function(t,n,r){setTimeout((function(){e("raphael.anim.frame."+t,n,r)}))}(m.id,m,o.anim)}else{if(function(n,r,i){setTimeout((function(){e("raphael.anim.frame."+r.id,r,i),e("raphael.anim.finish."+r.id,r,i),t.is(n,"function")&&n.call(r)}))}(o.callback,m,o.anim),m.attr(v),Qe.splice(i--,1),o.repeat>1&&!o.next){for(s in v)v[l](s)&&(b[s]=o.totalOrigin[s]);o.el.attr(b),ot(o.anim,o.el,o.anim.percents[0],null,o.totalOrigin,o.repeat-1)}o.next&&!o.stop&&ot(o.anim,o.el,o.next,null,o.totalOrigin,o.repeat)}}}Qe.length&&et(n)},nt=function(e){return e>255?255:e<0?0:e};function rt(e,t,n,r,i,o){var a=3*t,s=3*(r-t)-a,u=1-a-s,l=3*n,c=3*(i-n)-l,f=1-l-c;function h(e){return((u*e+s)*e+a)*e}return function(e,t){var n=function(e,t){var n,r,i,o,l,c;for(i=e,c=0;c<8;c++){if(o=h(i)-e,O(o)<t)return i;if(O(l=(3*u*i+2*s)*i+a)<1e-6)break;i-=o/l}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=h(i),O(o-e)<t)return i;e>o?n=i:r=i,i=(r-n)/2+n}return i}(e,t);return((f*n+c)*n+l)*n}(e,1/(200*o))}function it(e,t){var n=[],r={};if(this.ms=t,this.times=1,e){for(var i in e)e[l](i)&&(r[j(i)]=e[i],n.push(j(i)));n.sort(K)}this.anim=r,this.top=n[n.length-1],this.percents=n}function ot(n,r,i,o,s,u){i=j(i);var c,f,h,d,v,m,g=n.ms,x={},_={},w={};if(o)for(E=0,k=Qe.length;E<k;E++){var S=Qe[E];if(S.el.id==r.id&&S.anim==n){S.percent!=i?(Qe.splice(E,1),h=1):f=S,r.attr(S.totalOrigin);break}}else o=+_;for(var E=0,k=n.percents.length;E<k;E++){if(n.percents[E]==i||n.percents[E]>o*n.top){i=n.percents[E],v=n.percents[E-1]||0,g=g/n.top*(i-v),d=n.percents[E+1],c=n.anim[i];break}o&&r.attr(n.anim[n.percents[E]])}if(c){if(f)f.initstatus=o,f.start=new Date-f.ms*o;else{for(var O in c)if(c[l](O)&&(F[l](O)||r.paper.customAttributes[l](O)))switch(x[O]=r.attr(O),null==x[O]&&(x[O]=z[O]),_[O]=c[O],F[O]){case M:w[O]=(_[O]-x[O])/g;break;case"colour":x[O]=t.getRGB(x[O]);var A=t.getRGB(_[O]);w[O]={r:(A.r-x[O].r)/g,g:(A.g-x[O].g)/g,b:(A.b-x[O].b)/g};break;case"path":var C=Ae(x[O],_[O]),T=C[1];for(x[O]=C[0],w[O]=[],E=0,k=x[O].length;E<k;E++){w[O][E]=[0];for(var P=1,R=x[O][E].length;P<R;P++)w[O][E][P]=(T[E][P]-x[O][E][P])/g}break;case"transform":var I=r._,N=Re(I[O],_[O]);if(N)for(x[O]=N.from,_[O]=N.to,w[O]=[],w[O].real=!0,E=0,k=x[O].length;E<k;E++)for(w[O][E]=[x[O][E][0]],P=1,R=x[O][E].length;P<R;P++)w[O][E][P]=(_[O][E][P]-x[O][E][P])/g;else{var D=r.matrix||new Ie,B={_:{transform:I.transform},getBBox:function(){return r.getBBox(1)}};x[O]=[D.a,D.b,D.c,D.d,D.e,D.f],Te(B,_[O]),_[O]=B._.transform,w[O]=[(B.matrix.a-D.a)/g,(B.matrix.b-D.b)/g,(B.matrix.c-D.c)/g,(B.matrix.d-D.d)/g,(B.matrix.e-D.e)/g,(B.matrix.f-D.f)/g]}break;case"csv":var V=y(c[O])[b](a),U=y(x[O])[b](a);if("clip-rect"==O)for(x[O]=U,w[O]=[],E=U.length;E--;)w[O][E]=(V[E]-x[O][E])/g;_[O]=V;break;default:for(V=[][p](c[O]),U=[][p](x[O]),w[O]=[],E=r.paper.customAttributes[O].length;E--;)w[O][E]=((V[E]||0)-(U[E]||0))/g}var Z=c.easing,H=t.easing_formulas[Z];if(!H)if((H=y(Z).match(L))&&5==H.length){var G=H;H=function(e){return rt(e,+G[1],+G[2],+G[3],+G[4],g)}}else H=Y;if(S={anim:n,percent:i,timestamp:m=c.start||n.start||+new Date,start:m+(n.del||0),status:0,initstatus:o||0,stop:!1,ms:g,easing:H,from:x,diff:w,to:_,el:r,callback:c.callback,prev:v,next:d,repeat:u||n.times,origin:r.attr(),totalOrigin:s},Qe.push(S),o&&!f&&!h&&(S.stop=!0,S.start=new Date-g*o,1==Qe.length))return tt();h&&(S.start=new Date-S.ms*o),1==Qe.length&&et(tt)}e("raphael.anim.start."+r.id,r,n)}}function at(e){for(var t=0;t<Qe.length;t++)Qe[t].el.paper==e&&Qe.splice(t--,1)}Ze.animateWith=function(e,n,r,i,o,a){if(this.removed)return a&&a.call(this),this;var s=r instanceof it?r:t.animation(r,i,o,a);ot(s,this,s.percents[0],null,this.attr());for(var u=0,l=Qe.length;u<l;u++)if(Qe[u].anim==n&&Qe[u].el==e){Qe[l-1].start=Qe[u].start;break}return this},Ze.onAnimation=function(t){return t?e.on("raphael.anim.frame."+this.id,t):e.unbind("raphael.anim.frame."+this.id),this},it.prototype.delay=function(e){var t=new it(this.anim,this.ms);return t.times=this.times,t.del=+e||0,t},it.prototype.repeat=function(e){var t=new it(this.anim,this.ms);return t.del=this.del,t.times=S.floor(E(e,0))||1,t},t.animation=function(e,n,r,i){if(e instanceof it)return e;!t.is(r,"function")&&r||(i=i||r||null,r=null),e=Object(e),n=+n||0;var o,a,s={};for(a in e)e[l](a)&&j(a)!=a&&j(a)+"%"!=a&&(o=!0,s[a]=e[a]);if(o)return r&&(s.easing=r),i&&(s.callback=i),new it({100:s},n);if(i){var u=0;for(var c in e){var f=D(c);e[l](c)&&f>u&&(u=f)}!e[u+="%"].callback&&(e[u].callback=i)}return new it(e,n)},Ze.animate=function(e,n,r,i){if(this.removed)return i&&i.call(this),this;var o=e instanceof it?e:t.animation(e,n,r,i);return ot(o,this,o.percents[0],null,this.attr()),this},Ze.setTime=function(e,t){return e&&null!=t&&this.status(e,k(t,e.ms)/e.ms),this},Ze.status=function(e,t){var n,r,i=[],o=0;if(null!=t)return ot(e,this,-1,k(t,1)),this;for(n=Qe.length;o<n;o++)if((r=Qe[o]).el.id==this.id&&(!e||r.anim==e)){if(e)return r.status;i.push({anim:r.anim,status:r.status})}return e?0:i},Ze.pause=function(t){for(var n=0;n<Qe.length;n++)Qe[n].el.id!=this.id||t&&Qe[n].anim!=t||!1!==e("raphael.anim.pause."+this.id,this,Qe[n].anim)&&(Qe[n].paused=!0);return this},Ze.resume=function(t){for(var n=0;n<Qe.length;n++)if(Qe[n].el.id==this.id&&(!t||Qe[n].anim==t)){var r=Qe[n];!1!==e("raphael.anim.resume."+this.id,this,r.anim)&&(delete r.paused,this.status(r.anim,r.status))}return this},Ze.stop=function(t){for(var n=0;n<Qe.length;n++)Qe[n].el.id!=this.id||t&&Qe[n].anim!=t||!1!==e("raphael.anim.stop."+this.id,this,Qe[n].anim)&&Qe.splice(n--,1);return this},e.on("raphael.remove",at),e.on("raphael.clear",at),Ze.toString=function(){return"Rapha\xebl\u2019s object"};var st,ut,lt,ct,ft=function e(t){if(this.items=[],this.length=0,this.type="set",t)for(var n=0,r=t.length;n<r;n++)!t[n]||t[n].constructor!=Ze.constructor&&t[n].constructor!=e||(this[this.items.length]=this.items[this.items.length]=t[n],this.length++)},ht=ft.prototype;for(var dt in ht.push=function(){for(var e,t,n=0,r=arguments.length;n<r;n++)!(e=arguments[n])||e.constructor!=Ze.constructor&&e.constructor!=ft||(this[t=this.items.length]=this.items[t]=e,this.length++);return this},ht.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ht.forEach=function(e,t){for(var n=0,r=this.items.length;n<r;n++)if(!1===e.call(t,this.items[n],n))return this;return this},Ze)Ze[l](dt)&&(ht[dt]=function(e){return function(){var t=arguments;return this.forEach((function(n){n[e][d](n,t)}))}}(dt));return ht.attr=function(e,n){if(e&&t.is(e,T)&&t.is(e[0],"object"))for(var r=0,i=e.length;r<i;r++)this.items[r].attr(e[r]);else for(var o=0,a=this.items.length;o<a;o++)this.items[o].attr(e,n);return this},ht.clear=function(){for(;this.length;)this.pop()},ht.splice=function(e,t,n){e=e<0?E(this.length+e,0):e,t=E(0,k(this.length-e,t));var r,i=[],o=[],a=[];for(r=2;r<arguments.length;r++)a.push(arguments[r]);for(r=0;r<t;r++)o.push(this[e+r]);for(;r<this.length-e;r++)i.push(this[e+r]);var s=a.length;for(r=0;r<s+i.length;r++)this.items[e+r]=this[e+r]=r<s?a[r]:i[r-s];for(r=this.items.length=this.length-=t-s;this[r];)delete this[r++];return new ft(o)},ht.exclude=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]==e)return this.splice(t,1),!0},ht.animate=function(e,n,r,i){(t.is(r,"function")||!r)&&(i=r||null);var o,a,s=this.items.length,u=s,l=this;if(!s)return this;i&&(a=function(){!--s&&i.call(l)}),r=t.is(r,"string")?r:a;var c=t.animation(e,n,r,a);for(o=this.items[--u].animate(c);u--;)this.items[u]&&!this.items[u].removed&&this.items[u].animateWith(o,c,c),this.items[u]&&!this.items[u].removed||s--;return this},ht.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},ht.getBBox=function(){for(var e=[],t=[],n=[],r=[],i=this.items.length;i--;)if(!this.items[i].removed){var o=this.items[i].getBBox();e.push(o.x),t.push(o.y),n.push(o.x+o.width),r.push(o.y+o.height)}return{x:e=k[d](0,e),y:t=k[d](0,t),x2:n=E[d](0,n),y2:r=E[d](0,r),width:n-e,height:r-t}},ht.clone=function(e){e=this.paper.set();for(var t=0,n=this.items.length;t<n;t++)e.push(this.items[t].clone());return e},ht.toString=function(){return"Rapha\xebl\u2018s set"},ht.glow=function(e){var t=this.paper.set();return this.forEach((function(n,r){var i=n.glow(e);null!=i&&i.forEach((function(e,n){t.push(e)}))})),t},ht.isPointInside=function(e,t){var n=!1;return this.forEach((function(r){if(r.isPointInside(e,t))return n=!0,!1})),n},t.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},n=e.face["font-family"];for(var r in e.face)e.face[l](r)&&(t.face[r]=e.face[r]);if(this.fonts[n]?this.fonts[n].push(t):this.fonts[n]=[t],!e.svg)for(var i in t.face["units-per-em"]=D(e.face["units-per-em"],10),e.glyphs)if(e.glyphs[l](i)){var o=e.glyphs[i];if(t.glyphs[i]={w:o.w,k:{},d:o.d&&"M"+o.d.replace(/[mlcxtrv]/g,(function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"}))+"z"},o.k)for(var a in o.k)o[l](a)&&(t.glyphs[i].k[a]=o.k[a])}return e},r.getFont=function(e,n,r,i){if(i=i||"normal",r=r||"normal",n=+n||{normal:400,bold:700,lighter:300,bolder:800}[n]||400,t.fonts){var o,a=t.fonts[e];if(!a){var s=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,m)+"(\\s|$)","i");for(var u in t.fonts)if(t.fonts[l](u)&&s.test(u)){a=t.fonts[u];break}}if(a)for(var c=0,f=a.length;c<f&&((o=a[c]).face["font-weight"]!=n||o.face["font-style"]!=r&&o.face["font-style"]||o.face["font-stretch"]!=i);c++);return o}},r.print=function(e,n,r,i,o,s,u,l){s=s||"middle",u=E(k(u||0,1),-1),l=E(k(l||1,3),1);var c,f=y(r)[b](m),h=0,d=0,p=m;if(t.is(i,"string")&&(i=this.getFont(i)),i){c=(o||16)/i.face["units-per-em"];for(var v=i.face.bbox[b](a),g=+v[0],x=v[3]-v[1],_=0,w=+v[1]+("baseline"==s?x+ +i.face.descent:x/2),S=0,O=f.length;S<O;S++){if("\n"==f[S])h=0,C=0,d=0,_+=x*l;else{var A=d&&i.glyphs[f[S-1]]||{},C=i.glyphs[f[S]];h+=d?(A.w||i.w)+(A.k&&A.k[f[S]]||0)+i.w*u:0,d=1}C&&C.d&&(p+=t.transformPath(C.d,["t",h*c,_*c,"s",c,c,g,w,"t",(e-g)/c,(n-w)/c]))}}return this.path(p).attr({fill:"#000",stroke:"none"})},r.add=function(e){if(t.is(e,"array"))for(var n,r=this.set(),i=0,o=e.length;i<o;i++)n=e[i]||{},s[l](n.type)&&r.push(this[n.type]().attr(n));return r},t.format=function(e,n){var r=t.is(n,T)?[0][p](n):arguments;return e&&t.is(e,"string")&&r.length-1&&(e=e.replace(u,(function(e,t){return null==r[++t]?m:r[t]}))),e||m},t.fullfill=(st=/\{([^\}]+)\}/g,ut=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(e,t){return String(e).replace(st,(function(e,n){return function(e,t,n){var r=n;return t.replace(ut,(function(e,t,n,i,o){t=t||i,r&&(t in r&&(r=r[t]),"function"==typeof r&&o&&(r=r()))})),r=(null==r||r==n?e:r)+""}(e,n,t)}))}),t.ninja=function(){if(f.was)c.win.Raphael=f.is;else{window.Raphael=void 0;try{delete window.Raphael}catch(e){}}return t},t.st=ht,e.on("raphael.DOMload",(function(){n=!0})),null==(lt=document).readyState&&lt.addEventListener&&(lt.addEventListener("DOMContentLoaded",ct=function(){lt.removeEventListener("DOMContentLoaded",ct,!1),lt.readyState="complete"},!1),lt.readyState="loading"),function e(){/in/.test(lt.readyState)?setTimeout(e,9):t.eve("raphael.DOMload")}(),t}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(3),n(4)],void 0===(i=function(e){return e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i,o,a,s,u,l,c,f,h,d,p,v,m;a="hasOwnProperty",s=/[\.\/]/,u=/\s*,\s*/,l=function(e,t){return e-t},c={n:{}},f=function(){for(var e=0,t=this.length;e<t;e++)if(void 0!==this[e])return this[e]},h=function(){for(var e=this.length;--e;)if(void 0!==this[e])return this[e]},d=Object.prototype.toString,p=String,v=Array.isArray||function(e){return e instanceof Array||"[object Array]"==d.call(e)},(m=function(e,t){var n,r=o,a=Array.prototype.slice.call(arguments,2),s=m.listeners(e),u=0,c=[],d={},p=[],v=i;p.firstDefined=f,p.lastDefined=h,i=e,o=0;for(var g=0,y=s.length;g<y;g++)"zIndex"in s[g]&&(c.push(s[g].zIndex),s[g].zIndex<0&&(d[s[g].zIndex]=s[g]));for(c.sort(l);c[u]<0;)if(n=d[c[u++]],p.push(n.apply(t,a)),o)return o=r,p;for(g=0;g<y;g++)if("zIndex"in(n=s[g]))if(n.zIndex==c[u]){if(p.push(n.apply(t,a)),o)break;do{if((n=d[c[++u]])&&p.push(n.apply(t,a)),o)break}while(n)}else d[n.zIndex]=n;else if(p.push(n.apply(t,a)),o)break;return o=r,i=v,p})._events=c,m.listeners=function(e){var t,n,r,i,o,a,u,l,f=v(e)?e:e.split(s),h=c,d=[h],p=[];for(i=0,o=f.length;i<o;i++){for(l=[],a=0,u=d.length;a<u;a++)for(n=[(h=d[a].n)[f[i]],h["*"]],r=2;r--;)(t=n[r])&&(l.push(t),p=p.concat(t.f||[]));d=l}return p},m.separator=function(e){e?(e="["+(e=p(e).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",s=new RegExp(e)):s=/[\.\/]/},m.on=function(e,t){if("function"!=typeof t)return function(){};for(var n=v(e)?v(e[0])?e:[e]:p(e).split(u),r=0,i=n.length;r<i;r++)!function(e){for(var n,r=v(e)?e:p(e).split(s),i=c,o=0,a=r.length;o<a;o++)i=(i=i.n).hasOwnProperty(r[o])&&i[r[o]]||(i[r[o]]={n:{}});for(i.f=i.f||[],o=0,a=i.f.length;o<a;o++)if(i.f[o]==t){n=!0;break}!n&&i.f.push(t)}(n[r]);return function(e){+e==+e&&(t.zIndex=+e)}},m.f=function(e){var t=[].slice.call(arguments,1);return function(){m.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},m.stop=function(){o=1},m.nt=function(e){var t=v(i)?i.join("."):i;return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},m.nts=function(){return v(i)?i:i.split(s)},m.off=m.unbind=function(e,t){if(e){var n=v(e)?v(e[0])?e:[e]:p(e).split(u);if(n.length>1)for(var r=0,i=n.length;r<i;r++)m.off(n[r],t);else{n=v(e)?e:p(e).split(s);var o,l,f,h,d,g=[c];for(r=0,i=n.length;r<i;r++)for(h=0;h<g.length;h+=f.length-2){if(f=[h,1],o=g[h].n,"*"!=n[r])o[n[r]]&&f.push(o[n[r]]);else for(l in o)o[a](l)&&f.push(o[l]);g.splice.apply(g,f)}for(r=0,i=g.length;r<i;r++)for(o=g[r];o.n;){if(t){if(o.f){for(h=0,d=o.f.length;h<d;h++)if(o.f[h]==t){o.f.splice(h,1);break}!o.f.length&&delete o.f}for(l in o.n)if(o.n[a](l)&&o.n[l].f){var y=o.n[l].f;for(h=0,d=y.length;h<d;h++)if(y[h]==t){y.splice(h,1);break}!y.length&&delete o.n[l].f}}else for(l in delete o.f,o.n)o.n[a](l)&&o.n[l].f&&delete o.n[l].f;o=o.n}}}else m._events=c={n:{}}},m.once=function(e,t){var n=function n(){return m.off(e,n),t.apply(this,arguments)};return m.on(e,n)},m.version="0.5.0",m.toString=function(){return"You are running Eve 0.5.0"},e.exports?e.exports=m:void 0===(r=function(){return m}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(0)],void 0===(i=function(e){if(!e||e.svg){var t="hasOwnProperty",n=String,r=parseFloat,i=parseInt,o=Math,a=o.max,s=o.abs,u=o.pow,l=/[, ]+/,c=e.eve,f="",h=" ",d="http://www.w3.org/1999/xlink",p={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},v={};e.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var m=function r(i,o){if(o)for(var a in"string"==typeof i&&(i=r(i)),o)o[t](a)&&("xlink:"==a.substring(0,6)?i.setAttributeNS(d,a.substring(6),n(o[a])):i.setAttribute(a,n(o[a])));else(i=e._g.doc.createElementNS("http://www.w3.org/2000/svg",i)).style&&(i.style.webkitTapHighlightColor="rgba(0,0,0,0)");return i},g=function(t,i){var l="linear",c=t.id+i,h=.5,d=.5,p=t.node,v=t.paper,g=p.style,b=e._g.doc.getElementById(c);if(!b){if(i=(i=n(i).replace(e._radial_gradient,(function(e,t,n){if(l="radial",t&&n){h=r(t);var i=2*((d=r(n))>.5)-1;u(h-.5,2)+u(d-.5,2)>.25&&(d=o.sqrt(.25-u(h-.5,2))*i+.5)&&.5!=d&&(d=d.toFixed(5)-1e-5*i)}return f}))).split(/\s*\-\s*/),"linear"==l){var x=i.shift();if(x=-r(x),isNaN(x))return null;var _=[0,0,o.cos(e.rad(x)),o.sin(e.rad(x))],w=1/(a(s(_[2]),s(_[3]))||1);_[2]*=w,_[3]*=w,_[2]<0&&(_[0]=-_[2],_[2]=0),_[3]<0&&(_[1]=-_[3],_[3]=0)}var S=e._parseDots(i);if(!S)return null;if(c=c.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&c!=t.gradient.id&&(v.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){b=m(l+"Gradient",{id:c}),t.gradient=b,m(b,"radial"==l?{fx:h,fy:d}:{x1:_[0],y1:_[1],x2:_[2],y2:_[3],gradientTransform:t.matrix.invert()}),v.defs.appendChild(b);for(var E=0,k=S.length;E<k;E++)b.appendChild(m("stop",{offset:S[E].offset?S[E].offset:E?"100%":"0%","stop-color":S[E].color||"#fff","stop-opacity":isFinite(S[E].opacity)?S[E].opacity:1}))}}return m(p,{fill:y(c),opacity:1,"fill-opacity":1}),g.fill=f,g.opacity=1,g.fillOpacity=1,1},y=function(e){if((t=document.documentMode)&&(9===t||10===t))return"url('#"+e+"')";var t,n=document.location;return"url('"+n.protocol+"//"+n.host+n.pathname+n.search+"#"+e+"')"},b=function(e){var t=e.getBBox(1);m(e.pattern,{patternTransform:e.matrix.invert()+" translate("+t.x+","+t.y+")"})},x=function(r,i,o){if("path"==r.type){for(var a,s,u,l,c,h=n(i).toLowerCase().split("-"),d=r.paper,g=o?"end":"start",y=r.node,b=r.attrs,x=b["stroke-width"],_=h.length,w="classic",S=3,E=3,k=5;_--;)switch(h[_]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":w=h[_];break;case"wide":E=5;break;case"narrow":E=2;break;case"long":S=5;break;case"short":S=2}if("open"==w?(S+=2,E+=2,k+=2,u=1,l=o?4:1,c={fill:"none",stroke:b.stroke}):(l=u=S/2,c={fill:b.stroke,stroke:"none"}),r._.arrows?o?(r._.arrows.endPath&&v[r._.arrows.endPath]--,r._.arrows.endMarker&&v[r._.arrows.endMarker]--):(r._.arrows.startPath&&v[r._.arrows.startPath]--,r._.arrows.startMarker&&v[r._.arrows.startMarker]--):r._.arrows={},"none"!=w){var O="raphael-marker-"+w,A="raphael-marker-"+g+w+S+E+"-obj"+r.id;e._g.doc.getElementById(O)?v[O]++:(d.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:p[w],id:O})),v[O]=1);var C,M=e._g.doc.getElementById(A);M?(v[A]++,C=M.getElementsByTagName("use")[0]):(M=m(m("marker"),{id:A,markerHeight:E,markerWidth:S,orient:"auto",refX:l,refY:E/2}),C=m(m("use"),{"xlink:href":"#"+O,transform:(o?"rotate(180 "+S/2+" "+E/2+") ":f)+"scale("+S/k+","+E/k+")","stroke-width":(1/((S/k+E/k)/2)).toFixed(4)}),M.appendChild(C),d.defs.appendChild(M),v[A]=1),m(C,c);var T=u*("diamond"!=w&&"oval"!=w);o?(a=r._.arrows.startdx*x||0,s=e.getTotalLength(b.path)-T*x):(a=T*x,s=e.getTotalLength(b.path)-(r._.arrows.enddx*x||0)),(c={})["marker-"+g]="url(#"+A+")",(s||a)&&(c.d=e.getSubpath(b.path,a,s)),m(y,c),r._.arrows[g+"Path"]=O,r._.arrows[g+"Marker"]=A,r._.arrows[g+"dx"]=T,r._.arrows[g+"Type"]=w,r._.arrows[g+"String"]=i}else o?(a=r._.arrows.startdx*x||0,s=e.getTotalLength(b.path)-a):(a=0,s=e.getTotalLength(b.path)-(r._.arrows.enddx*x||0)),r._.arrows[g+"Path"]&&m(y,{d:e.getSubpath(b.path,a,s)}),delete r._.arrows[g+"Path"],delete r._.arrows[g+"Marker"],delete r._.arrows[g+"dx"],delete r._.arrows[g+"Type"],delete r._.arrows[g+"String"];for(c in v)if(v[t](c)&&!v[c]){var P=e._g.doc.getElementById(c);P&&P.parentNode.removeChild(P)}}},_={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},w=function(e,t,r){if(t=_[n(t).toLowerCase()]){for(var i=e.attrs["stroke-width"]||"1",o={round:i,square:i,butt:0}[e.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,a=[],s=t.length;s--;)a[s]=t[s]*i+(s%2?1:-1)*o;m(e.node,{"stroke-dasharray":a.join(",")})}else m(e.node,{"stroke-dasharray":"none"})},S=function(r,o){var u=r.node,c=r.attrs,h=u.style.visibility;for(var p in u.style.visibility="hidden",o)if(o[t](p)){if(!e._availableAttrs[t](p))continue;var v=o[p];switch(c[p]=v,p){case"blur":r.blur(v);break;case"title":var y=u.getElementsByTagName("title");if(y.length&&(y=y[0]))y.firstChild.nodeValue=v;else{y=m("title");var _=e._g.doc.createTextNode(v);y.appendChild(_),u.appendChild(y)}break;case"href":case"target":var S=u.parentNode;if("a"!=S.tagName.toLowerCase()){var k=m("a");S.insertBefore(k,u),k.appendChild(u),S=k}"target"==p?S.setAttributeNS(d,"show","blank"==v?"new":v):S.setAttributeNS(d,p,v);break;case"cursor":u.style.cursor=v;break;case"transform":r.transform(v);break;case"arrow-start":x(r,v);break;case"arrow-end":x(r,v,1);break;case"clip-rect":var O=n(v).split(l);if(4==O.length){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var A=m("clipPath"),C=m("rect");A.id=e.createUUID(),m(C,{x:O[0],y:O[1],width:O[2],height:O[3]}),A.appendChild(C),r.paper.defs.appendChild(A),m(u,{"clip-path":"url(#"+A.id+")"}),r.clip=C}if(!v){var M=u.getAttribute("clip-path");if(M){var T=e._g.doc.getElementById(M.replace(/(^url\(#|\)$)/g,f));T&&T.parentNode.removeChild(T),m(u,{"clip-path":f}),delete r.clip}}break;case"path":"path"==r.type&&(m(u,{d:v?c.path=e._pathToAbsolute(v):"M0,0"}),r._.dirty=1,r._.arrows&&("startString"in r._.arrows&&x(r,r._.arrows.startString),"endString"in r._.arrows&&x(r,r._.arrows.endString,1)));break;case"width":if(u.setAttribute(p,v),r._.dirty=1,!c.fx)break;p="x",v=c.x;case"x":c.fx&&(v=-c.x-(c.width||0));case"rx":if("rx"==p&&"rect"==r.type)break;case"cx":u.setAttribute(p,v),r.pattern&&b(r),r._.dirty=1;break;case"height":if(u.setAttribute(p,v),r._.dirty=1,!c.fy)break;p="y",v=c.y;case"y":c.fy&&(v=-c.y-(c.height||0));case"ry":if("ry"==p&&"rect"==r.type)break;case"cy":u.setAttribute(p,v),r.pattern&&b(r),r._.dirty=1;break;case"r":"rect"==r.type?m(u,{rx:v,ry:v}):u.setAttribute(p,v),r._.dirty=1;break;case"src":"image"==r.type&&u.setAttributeNS(d,"href",v);break;case"stroke-width":1==r._.sx&&1==r._.sy||(v/=a(s(r._.sx),s(r._.sy))||1),u.setAttribute(p,v),c["stroke-dasharray"]&&w(r,c["stroke-dasharray"],o),r._.arrows&&("startString"in r._.arrows&&x(r,r._.arrows.startString),"endString"in r._.arrows&&x(r,r._.arrows.endString,1));break;case"stroke-dasharray":w(r,v,o);break;case"fill":var P=n(v).match(e._ISURL);if(P){A=m("pattern");var R=m("image");A.id=e.createUUID(),m(A,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(R,{x:0,y:0,"xlink:href":P[1]}),A.appendChild(R),function(t){e._preload(P[1],(function(){var e=this.offsetWidth,n=this.offsetHeight;m(t,{width:e,height:n}),m(R,{width:e,height:n})}))}(A),r.paper.defs.appendChild(A),m(u,{fill:"url(#"+A.id+")"}),r.pattern=A,r.pattern&&b(r);break}var I=e.getRGB(v);if(I.error){if(("circle"==r.type||"ellipse"==r.type||"r"!=n(v).charAt())&&g(r,v)){if("opacity"in c||"fill-opacity"in c){var L=e._g.doc.getElementById(u.getAttribute("fill").replace(/^url\(#|\)$/g,f));if(L){var N=L.getElementsByTagName("stop");m(N[N.length-1],{"stop-opacity":("opacity"in c?c.opacity:1)*("fill-opacity"in c?c["fill-opacity"]:1)})}}c.gradient=v,c.fill="none";break}}else delete o.gradient,delete c.gradient,!e.is(c.opacity,"undefined")&&e.is(o.opacity,"undefined")&&m(u,{opacity:c.opacity}),!e.is(c["fill-opacity"],"undefined")&&e.is(o["fill-opacity"],"undefined")&&m(u,{"fill-opacity":c["fill-opacity"]});I[t]("opacity")&&m(u,{"fill-opacity":I.opacity>1?I.opacity/100:I.opacity});case"stroke":I=e.getRGB(v),u.setAttribute(p,I.hex),"stroke"==p&&I[t]("opacity")&&m(u,{"stroke-opacity":I.opacity>1?I.opacity/100:I.opacity}),"stroke"==p&&r._.arrows&&("startString"in r._.arrows&&x(r,r._.arrows.startString),"endString"in r._.arrows&&x(r,r._.arrows.endString,1));break;case"gradient":("circle"==r.type||"ellipse"==r.type||"r"!=n(v).charAt())&&g(r,v);break;case"opacity":c.gradient&&!c[t]("stroke-opacity")&&m(u,{"stroke-opacity":v>1?v/100:v});case"fill-opacity":if(c.gradient){(L=e._g.doc.getElementById(u.getAttribute("fill").replace(/^url\(#|\)$/g,f)))&&(N=L.getElementsByTagName("stop"),m(N[N.length-1],{"stop-opacity":v}));break}default:"font-size"==p&&(v=i(v,10)+"px");var j=p.replace(/(\-.)/g,(function(e){return e.substring(1).toUpperCase()}));u.style[j]=v,r._.dirty=1,u.setAttribute(p,v)}}E(r,o),u.style.visibility=h},E=function(r,o){if("text"==r.type&&(o[t]("text")||o[t]("font")||o[t]("font-size")||o[t]("x")||o[t]("y"))){var a=r.attrs,s=r.node,u=s.firstChild?i(e._g.doc.defaultView.getComputedStyle(s.firstChild,f).getPropertyValue("font-size"),10):10;if(o[t]("text")){for(a.text=o.text;s.firstChild;)s.removeChild(s.firstChild);for(var l,c=n(o.text).split("\n"),h=[],d=0,p=c.length;d<p;d++)l=m("tspan"),d&&m(l,{dy:1.2*u,x:a.x}),l.appendChild(e._g.doc.createTextNode(c[d])),s.appendChild(l),h[d]=l}else for(d=0,p=(h=s.getElementsByTagName("tspan")).length;d<p;d++)d?m(h[d],{dy:1.2*u,x:a.x}):m(h[0],{dy:0});m(s,{x:a.x,y:a.y}),r._.dirty=1;var v=r._getBBox(),g=a.y-(v.y+v.height/2);g&&e.is(g,"finite")&&m(h[0],{dy:g})}},k=function(e){return e.parentNode&&"a"===e.parentNode.tagName.toLowerCase()?e.parentNode:e},O=function(t,n){this[0]=this.node=t,t.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),t.raphaelid=this.id,this.matrix=e.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},A=e.el;O.prototype=A,A.constructor=O,e._engine.path=function(e,t){var n=m("path");t.canvas&&t.canvas.appendChild(n);var r=new O(n,t);return r.type="path",S(r,{fill:"none",stroke:"#000",path:e}),r},A.rotate=function(e,t,i){if(this.removed)return this;if((e=n(e).split(l)).length-1&&(t=r(e[1]),i=r(e[2])),e=r(e[0]),null==i&&(t=i),null==t||null==i){var o=this.getBBox(1);t=o.x+o.width/2,i=o.y+o.height/2}return this.transform(this._.transform.concat([["r",e,t,i]])),this},A.scale=function(e,t,i,o){if(this.removed)return this;if((e=n(e).split(l)).length-1&&(t=r(e[1]),i=r(e[2]),o=r(e[3])),e=r(e[0]),null==t&&(t=e),null==o&&(i=o),null==i||null==o)var a=this.getBBox(1);return i=null==i?a.x+a.width/2:i,o=null==o?a.y+a.height/2:o,this.transform(this._.transform.concat([["s",e,t,i,o]])),this},A.translate=function(e,t){return this.removed||((e=n(e).split(l)).length-1&&(t=r(e[1])),e=r(e[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",e,t]]))),this},A.transform=function(n){var r=this._;if(null==n)return r.transform;if(e._extractTransform(this,n),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&b(this),this.node&&m(this.node,{transform:this.matrix}),1!=r.sx||1!=r.sy){var i=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},A.hide=function(){return this.removed||(this.node.style.display="none"),this},A.show=function(){return this.removed||(this.node.style.display=""),this},A.remove=function(){var t=k(this.node);if(!this.removed&&t.parentNode){var n=this.paper;for(var r in n.__set__&&n.__set__.exclude(this),c.unbind("raphael.*.*."+this.id),this.gradient&&n.defs.removeChild(this.gradient),e._tear(this,n),t.parentNode.removeChild(t),this.removeData(),this)this[r]="function"==typeof this[r]?e._removedFactory(r):null;this.removed=!0}},A._getBBox=function(){if("none"==this.node.style.display){this.show();var e=!0}var t,n=!1;this.paper.canvas.parentElement?t=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(t=this.paper.canvas.parentNode.style),t&&"none"==t.display&&(n=!0,t.display="");var r={};try{r=this.node.getBBox()}catch(e){r={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{r=r||{},n&&(t.display="none")}return e&&this.hide(),r},A.attr=function(n,r){if(this.removed)return this;if(null==n){var i={};for(var o in this.attrs)this.attrs[t](o)&&(i[o]=this.attrs[o]);return i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(null==r&&e.is(n,"string")){if("fill"==n&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==n)return this._.transform;for(var a=n.split(l),s={},u=0,f=a.length;u<f;u++)(n=a[u])in this.attrs?s[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?s[n]=this.paper.customAttributes[n].def:s[n]=e._availableAttrs[n];return f-1?s:s[a[0]]}if(null==r&&e.is(n,"array")){for(s={},u=0,f=n.length;u<f;u++)s[n[u]]=this.attr(n[u]);return s}if(null!=r){var h={};h[n]=r}else null!=n&&e.is(n,"object")&&(h=n);for(var d in h)c("raphael.attr."+d+"."+this.id,this,h[d]);for(d in this.paper.customAttributes)if(this.paper.customAttributes[t](d)&&h[t](d)&&e.is(this.paper.customAttributes[d],"function")){var p=this.paper.customAttributes[d].apply(this,[].concat(h[d]));for(var v in this.attrs[d]=h[d],p)p[t](v)&&(h[v]=p[v])}return S(this,h),this},A.toFront=function(){if(this.removed)return this;var t=k(this.node);t.parentNode.appendChild(t);var n=this.paper;return n.top!=this&&e._tofront(this,n),this},A.toBack=function(){if(this.removed)return this;var t=k(this.node),n=t.parentNode;return n.insertBefore(t,n.firstChild),e._toback(this,this.paper),this.paper,this},A.insertAfter=function(t){if(this.removed||!t)return this;var n=k(this.node),r=k(t.node||t[t.length-1].node);return r.nextSibling?r.parentNode.insertBefore(n,r.nextSibling):r.parentNode.appendChild(n),e._insertafter(this,t,this.paper),this},A.insertBefore=function(t){if(this.removed||!t)return this;var n=k(this.node),r=k(t.node||t[0].node);return r.parentNode.insertBefore(n,r),e._insertbefore(this,t,this.paper),this},A.blur=function(t){var n=this;if(0!=+t){var r=m("filter"),i=m("feGaussianBlur");n.attrs.blur=t,r.id=e.createUUID(),m(i,{stdDeviation:+t||1.5}),r.appendChild(i),n.paper.defs.appendChild(r),n._blur=r,m(n.node,{filter:"url(#"+r.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter");return n},e._engine.circle=function(e,t,n,r){var i=m("circle");e.canvas&&e.canvas.appendChild(i);var o=new O(i,e);return o.attrs={cx:t,cy:n,r:r,fill:"none",stroke:"#000"},o.type="circle",m(i,o.attrs),o},e._engine.rect=function(e,t,n,r,i,o){var a=m("rect");e.canvas&&e.canvas.appendChild(a);var s=new O(a,e);return s.attrs={x:t,y:n,width:r,height:i,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},s.type="rect",m(a,s.attrs),s},e._engine.ellipse=function(e,t,n,r,i){var o=m("ellipse");e.canvas&&e.canvas.appendChild(o);var a=new O(o,e);return a.attrs={cx:t,cy:n,rx:r,ry:i,fill:"none",stroke:"#000"},a.type="ellipse",m(o,a.attrs),a},e._engine.image=function(e,t,n,r,i,o){var a=m("image");m(a,{x:n,y:r,width:i,height:o,preserveAspectRatio:"none"}),a.setAttributeNS(d,"href",t),e.canvas&&e.canvas.appendChild(a);var s=new O(a,e);return s.attrs={x:n,y:r,width:i,height:o,src:t},s.type="image",s},e._engine.text=function(t,n,r,i){var o=m("text");t.canvas&&t.canvas.appendChild(o);var a=new O(o,t);return a.attrs={x:n,y:r,"text-anchor":"middle",text:i,"font-family":e._availableAttrs["font-family"],"font-size":e._availableAttrs["font-size"],stroke:"none",fill:"#000"},a.type="text",S(a,a.attrs),a},e._engine.setSize=function(e,t){return this.width=e||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t&&t.container;if(!n)throw new Error("SVG container not found.");var r,i=t.x,o=t.y,a=t.width,s=t.height,u=m("svg"),l="overflow:hidden;";return i=i||0,o=o||0,m(u,{height:s=s||342,version:1.1,width:a=a||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),1==n?(u.style.cssText=l+"position:absolute;left:"+i+"px;top:"+o+"px",e._g.doc.body.appendChild(u),r=1):(u.style.cssText=l+"position:relative",n.firstChild?n.insertBefore(u,n.firstChild):n.appendChild(u)),(n=new e._Paper).width=a,n.height=s,n.canvas=u,n.clear(),n._left=n._top=0,r&&(n.renderfix=function(){}),n.renderfix(),n},e._engine.setViewBox=function(e,t,n,r,i){c("raphael.setViewBox",this,this._viewBox,[e,t,n,r,i]);var o,s,u=this.getSize(),l=a(n/u.width,r/u.height),f=this.top,d=i?"xMidYMid meet":"xMinYMin";for(null==e?(this._vbSize&&(l=1),delete this._vbSize,o="0 0 "+this.width+h+this.height):(this._vbSize=l,o=e+h+t+h+n+h+r),m(this.canvas,{viewBox:o,preserveAspectRatio:d});l&&f;)s="stroke-width"in f.attrs?f.attrs["stroke-width"]:1,f.attr({"stroke-width":s}),f._.dirty=1,f._.dirtyT=1,f=f.prev;return this._viewBox=[e,t,n,r,!!i],this},e.prototype.renderfix=function(){var e,t=this.canvas,n=t.style;try{e=t.getScreenCTM()||t.createSVGMatrix()}catch(n){e=t.createSVGMatrix()}var r=-e.e%1,i=-e.f%1;(r||i)&&(r&&(this._left=(this._left+r)%1,n.left=this._left+"px"),i&&(this._top=(this._top+i)%1,n.top=this._top+"px"))},e.prototype.clear=function(){e.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=m("desc")).appendChild(e._g.doc.createTextNode("Created with Rapha\xebl "+e.version)),t.appendChild(this.desc),t.appendChild(this.defs=m("defs"))},e.prototype.remove=function(){for(var t in c("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null};var C=e.st;for(var M in A)A[t](M)&&!C[t](M)&&(C[M]=function(e){return function(){var t=arguments;return this.forEach((function(n){n[e].apply(n,t)}))}}(M))}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0)],void 0===(i=function(e){if(!e||e.vml){var t="hasOwnProperty",n=String,r=parseFloat,i=Math,o=i.round,a=i.max,s=i.min,u=i.abs,l=/[, ]+/,c=e.eve,f=" ",h="",d={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},p=/([clmz]),?([^clmz]*)/gi,v=/ progid:\S+Blur\([^\)]+\)/g,m=/-?[^,\s-]+/g,g="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",y=21600,b={path:1,rect:1,image:1},x={circle:1,ellipse:1},_=function(t,n,r){var i=e.matrix();return i.rotate(-t,.5,.5),{dx:i.x(n,r),dy:i.y(n,r)}},w=function(e,t,n,r,i,o){var a=e._,s=e.matrix,l=a.fillpos,c=e.node,h=c.style,d=1,p="",v=y/t,m=y/n;if(h.visibility="hidden",t&&n){if(c.coordsize=u(v)+f+u(m),h.rotation=o*(t*n<0?-1:1),o){var g=_(o,r,i);r=g.dx,i=g.dy}if(t<0&&(p+="x"),n<0&&(p+=" y")&&(d=-1),h.flip=p,c.coordorigin=r*-v+f+i*-m,l||a.fillsize){var b=c.getElementsByTagName("fill");b=b&&b[0],c.removeChild(b),l&&(g=_(o,s.x(l[0],l[1]),s.y(l[0],l[1])),b.position=g.dx*d+f+g.dy*d),a.fillsize&&(b.size=a.fillsize[0]*u(t)+f+a.fillsize[1]*u(n)),c.appendChild(b)}h.visibility="visible"}};e.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};var S,E=function(e,t,r){for(var i=n(t).toLowerCase().split("-"),o=r?"end":"start",a=i.length,s="classic",u="medium",l="medium";a--;)switch(i[a]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":s=i[a];break;case"wide":case"narrow":l=i[a];break;case"long":case"short":u=i[a]}var c=e.node.getElementsByTagName("stroke")[0];c[o+"arrow"]=s,c[o+"arrowlength"]=u,c[o+"arrowwidth"]=l},k=function(i,u){i.attrs=i.attrs||{};var c=i.node,v=i.attrs,g=c.style,_=b[i.type]&&(u.x!=v.x||u.y!=v.y||u.width!=v.width||u.height!=v.height||u.cx!=v.cx||u.cy!=v.cy||u.rx!=v.rx||u.ry!=v.ry||u.r!=v.r),k=x[i.type]&&(v.cx!=u.cx||v.cy!=u.cy||v.r!=u.r||v.rx!=u.rx||v.ry!=u.ry),A=i;for(var C in u)u[t](C)&&(v[C]=u[C]);if(_&&(v.path=e._getPath[i.type](i),i._.dirty=1),u.href&&(c.href=u.href),u.title&&(c.title=u.title),u.target&&(c.target=u.target),u.cursor&&(g.cursor=u.cursor),"blur"in u&&i.blur(u.blur),(u.path&&"path"==i.type||_)&&(c.path=function(t){var r=/[ahqstv]/gi,i=e._pathToAbsolute;if(n(t).match(r)&&(i=e._path2curve),r=/[clmz]/g,i==e._pathToAbsolute&&!n(t).match(r)){var a=n(t).replace(p,(function(e,t,n){var r=[],i="m"==t.toLowerCase(),a=d[t];return n.replace(m,(function(e){i&&2==r.length&&(a+=r+d["m"==t?"l":"L"],r=[]),r.push(o(e*y))})),a+r}));return a}var s,u,l=i(t);a=[];for(var c=0,v=l.length;c<v;c++){s=l[c],"z"==(u=l[c][0].toLowerCase())&&(u="x");for(var g=1,b=s.length;g<b;g++)u+=o(s[g]*y)+(g!=b-1?",":h);a.push(u)}return a.join(f)}(~n(v.path).toLowerCase().indexOf("r")?e._pathToAbsolute(v.path):v.path),i._.dirty=1,"image"==i.type&&(i._.fillpos=[v.x,v.y],i._.fillsize=[v.width,v.height],w(i,1,1,0,0,0))),"transform"in u&&i.transform(u.transform),k){var M=+v.cx,T=+v.cy,P=+v.rx||+v.r||0,R=+v.ry||+v.r||0;c.path=e.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",o((M-P)*y),o((T-R)*y),o((M+P)*y),o((T+R)*y),o(M*y)),i._.dirty=1}if("clip-rect"in u){var I=n(u["clip-rect"]).split(l);if(4==I.length){I[2]=+I[2]+ +I[0],I[3]=+I[3]+ +I[1];var L=c.clipRect||e._g.doc.createElement("div"),N=L.style;N.clip=e.format("rect({1}px {2}px {3}px {0}px)",I),c.clipRect||(N.position="absolute",N.top=0,N.left=0,N.width=i.paper.width+"px",N.height=i.paper.height+"px",c.parentNode.insertBefore(L,c),L.appendChild(c),c.clipRect=L)}u["clip-rect"]||c.clipRect&&(c.clipRect.style.clip="auto")}if(i.textpath){var j=i.textpath.style;u.font&&(j.font=u.font),u["font-family"]&&(j.fontFamily='"'+u["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,h)+'"'),u["font-size"]&&(j.fontSize=u["font-size"]),u["font-weight"]&&(j.fontWeight=u["font-weight"]),u["font-style"]&&(j.fontStyle=u["font-style"])}if("arrow-start"in u&&E(A,u["arrow-start"]),"arrow-end"in u&&E(A,u["arrow-end"],1),null!=u.opacity||null!=u.fill||null!=u.src||null!=u.stroke||null!=u["stroke-width"]||null!=u["stroke-opacity"]||null!=u["fill-opacity"]||null!=u["stroke-dasharray"]||null!=u["stroke-miterlimit"]||null!=u["stroke-linejoin"]||null!=u["stroke-linecap"]){var D=c.getElementsByTagName("fill");if(!(D=D&&D[0])&&(D=S("fill")),"image"==i.type&&u.src&&(D.src=u.src),u.fill&&(D.on=!0),null!=D.on&&"none"!=u.fill&&null!==u.fill||(D.on=!1),D.on&&u.fill){var B=n(u.fill).match(e._ISURL);if(B){D.parentNode==c&&c.removeChild(D),D.rotate=!0,D.src=B[1],D.type="tile";var z=i.getBBox(1);D.position=z.x+f+z.y,i._.fillpos=[z.x,z.y],e._preload(B[1],(function(){i._.fillsize=[this.offsetWidth,this.offsetHeight]}))}else D.color=e.getRGB(u.fill).hex,D.src=h,D.type="solid",e.getRGB(u.fill).error&&(A.type in{circle:1,ellipse:1}||"r"!=n(u.fill).charAt())&&O(A,u.fill,D)&&(v.fill="none",v.gradient=u.fill,D.rotate=!1)}if("fill-opacity"in u||"opacity"in u){var F=((+v["fill-opacity"]+1||2)-1)*((+v.opacity+1||2)-1)*((+e.getRGB(u.fill).o+1||2)-1);F=s(a(F,0),1),D.opacity=F,D.src&&(D.color="none")}c.appendChild(D);var V=c.getElementsByTagName("stroke")&&c.getElementsByTagName("stroke")[0],U=!1;!V&&(U=V=S("stroke")),(u.stroke&&"none"!=u.stroke||u["stroke-width"]||null!=u["stroke-opacity"]||u["stroke-dasharray"]||u["stroke-miterlimit"]||u["stroke-linejoin"]||u["stroke-linecap"])&&(V.on=!0),("none"==u.stroke||null===u.stroke||null==V.on||0==u.stroke||0==u["stroke-width"])&&(V.on=!1);var Z=e.getRGB(u.stroke);V.on&&u.stroke&&(V.color=Z.hex),F=((+v["stroke-opacity"]+1||2)-1)*((+v.opacity+1||2)-1)*((+Z.o+1||2)-1);var H=.75*(r(u["stroke-width"])||1);if(F=s(a(F,0),1),null==u["stroke-width"]&&(H=v["stroke-width"]),u["stroke-width"]&&(V.weight=H),H&&H<1&&(F*=H)&&(V.weight=1),V.opacity=F,u["stroke-linejoin"]&&(V.joinstyle=u["stroke-linejoin"]||"miter"),V.miterlimit=u["stroke-miterlimit"]||8,u["stroke-linecap"]&&(V.endcap="butt"==u["stroke-linecap"]?"flat":"square"==u["stroke-linecap"]?"square":"round"),"stroke-dasharray"in u){var G={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};V.dashstyle=G[t](u["stroke-dasharray"])?G[u["stroke-dasharray"]]:h}U&&c.appendChild(V)}if("text"==A.type){A.paper.canvas.style.display=h;var W=A.paper.span,q=v.font&&v.font.match(/\d+(?:\.\d*)?(?=px)/);g=W.style,v.font&&(g.font=v.font),v["font-family"]&&(g.fontFamily=v["font-family"]),v["font-weight"]&&(g.fontWeight=v["font-weight"]),v["font-style"]&&(g.fontStyle=v["font-style"]),q=r(v["font-size"]||q&&q[0])||10,g.fontSize=100*q+"px",A.textpath.string&&(W.innerHTML=n(A.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var K=W.getBoundingClientRect();A.W=v.w=(K.right-K.left)/100,A.H=v.h=(K.bottom-K.top)/100,A.X=v.x,A.Y=v.y+A.H/2,("x"in u||"y"in u)&&(A.path.v=e.format("m{0},{1}l{2},{1}",o(v.x*y),o(v.y*y),o(v.x*y)+1));for(var Y=["x","y","text","font","font-family","font-weight","font-style","font-size"],X=0,$=Y.length;X<$;X++)if(Y[X]in u){A._.dirty=1;break}switch(v["text-anchor"]){case"start":A.textpath.style["v-text-align"]="left",A.bbx=A.W/2;break;case"end":A.textpath.style["v-text-align"]="right",A.bbx=-A.W/2;break;default:A.textpath.style["v-text-align"]="center",A.bbx=0}A.textpath.style["v-text-kern"]=!0}},O=function(t,o,a){t.attrs=t.attrs||{},t.attrs;var s=Math.pow,u="linear",l=".5 .5";if(t.attrs.gradient=o,o=(o=n(o).replace(e._radial_gradient,(function(e,t,n){return u="radial",t&&n&&(t=r(t),n=r(n),s(t-.5,2)+s(n-.5,2)>.25&&(n=i.sqrt(.25-s(t-.5,2))*(2*(n>.5)-1)+.5),l=t+f+n),h}))).split(/\s*\-\s*/),"linear"==u){var c=o.shift();if(c=-r(c),isNaN(c))return null}var d=e._parseDots(o);if(!d)return null;if(t=t.shape||t.node,d.length){t.removeChild(a),a.on=!0,a.method="none",a.color=d[0].color,a.color2=d[d.length-1].color;for(var p=[],v=0,m=d.length;v<m;v++)d[v].offset&&p.push(d[v].offset+f+d[v].color);a.colors=p.length?p.join():"0% "+a.color,"radial"==u?(a.type="gradientTitle",a.focus="100%",a.focussize="0 0",a.focusposition=l,a.angle=0):(a.type="gradient",a.angle=(270-c)%360),t.appendChild(a)}return 1},A=function(t,n){this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=n,this.matrix=e.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},C=e.el;A.prototype=C,C.constructor=A,C.transform=function(t){if(null==t)return this._.transform;var r,i=this.paper._viewBoxShift,o=i?"s"+[i.scale,i.scale]+"-1-1t"+[i.dx,i.dy]:h;i&&(r=t=n(t).replace(/\.{3}|\u2026/g,this._.transform||h)),e._extractTransform(this,o+t);var a,s=this.matrix.clone(),u=this.skew,l=this.node,c=~n(this.attrs.fill).indexOf("-"),d=!n(this.attrs.fill).indexOf("url(");if(s.translate(1,1),d||c||"image"==this.type)if(u.matrix="1 0 0 1",u.offset="0 0",a=s.split(),c&&a.noRotation||!a.isSimple){l.style.filter=s.toFilter();var p=this.getBBox(),v=this.getBBox(1),m=p.x-v.x,g=p.y-v.y;l.coordorigin=m*-y+f+g*-y,w(this,1,1,m,g,0)}else l.style.filter=h,w(this,a.scalex,a.scaley,a.dx,a.dy,a.rotate);else l.style.filter=h,u.matrix=n(s),u.offset=s.offset();return null!==r&&(this._.transform=r,e._extractTransform(this,r)),this},C.rotate=function(e,t,i){if(this.removed)return this;if(null!=e){if((e=n(e).split(l)).length-1&&(t=r(e[1]),i=r(e[2])),e=r(e[0]),null==i&&(t=i),null==t||null==i){var o=this.getBBox(1);t=o.x+o.width/2,i=o.y+o.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,t,i]])),this}},C.translate=function(e,t){return this.removed||((e=n(e).split(l)).length-1&&(t=r(e[1])),e=r(e[0])||0,t=+t||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=t),this.transform(this._.transform.concat([["t",e,t]]))),this},C.scale=function(e,t,i,o){if(this.removed)return this;if((e=n(e).split(l)).length-1&&(t=r(e[1]),i=r(e[2]),o=r(e[3]),isNaN(i)&&(i=null),isNaN(o)&&(o=null)),e=r(e[0]),null==t&&(t=e),null==o&&(i=o),null==i||null==o)var a=this.getBBox(1);return i=null==i?a.x+a.width/2:i,o=null==o?a.y+a.height/2:o,this.transform(this._.transform.concat([["s",e,t,i,o]])),this._.dirtyT=1,this},C.hide=function(){return!this.removed&&(this.node.style.display="none"),this},C.show=function(){return!this.removed&&(this.node.style.display=h),this},C.auxGetBBox=e.el.getBBox,C.getBBox=function(){var e=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var t={},n=1/this.paper._viewBoxShift.scale;return t.x=e.x-this.paper._viewBoxShift.dx,t.x*=n,t.y=e.y-this.paper._viewBoxShift.dy,t.y*=n,t.width=e.width*n,t.height=e.height*n,t.x2=t.x+t.width,t.y2=t.y+t.height,t}return e},C._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},C.remove=function(){if(!this.removed&&this.node.parentNode){for(var t in this.paper.__set__&&this.paper.__set__.exclude(this),e.eve.unbind("raphael.*.*."+this.id),e._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null;this.removed=!0}},C.attr=function(n,r){if(this.removed)return this;if(null==n){var i={};for(var o in this.attrs)this.attrs[t](o)&&(i[o]=this.attrs[o]);return i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(null==r&&e.is(n,"string")){if("fill"==n&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var a=n.split(l),s={},u=0,f=a.length;u<f;u++)(n=a[u])in this.attrs?s[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?s[n]=this.paper.customAttributes[n].def:s[n]=e._availableAttrs[n];return f-1?s:s[a[0]]}if(this.attrs&&null==r&&e.is(n,"array")){for(s={},u=0,f=n.length;u<f;u++)s[n[u]]=this.attr(n[u]);return s}var h;for(var d in null!=r&&((h={})[n]=r),null==r&&e.is(n,"object")&&(h=n),h)c("raphael.attr."+d+"."+this.id,this,h[d]);if(h){for(d in this.paper.customAttributes)if(this.paper.customAttributes[t](d)&&h[t](d)&&e.is(this.paper.customAttributes[d],"function")){var p=this.paper.customAttributes[d].apply(this,[].concat(h[d]));for(var v in this.attrs[d]=h[d],p)p[t](v)&&(h[v]=p[v])}h.text&&"text"==this.type&&(this.textpath.string=h.text),k(this,h)}return this},C.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&e._tofront(this,this.paper),this},C.toBack=function(){return this.removed||this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper)),this},C.insertAfter=function(t){return this.removed||(t.constructor==e.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper)),this},C.insertBefore=function(t){return this.removed||(t.constructor==e.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),e._insertbefore(this,t,this.paper)),this},C.blur=function(t){var n=this.node.runtimeStyle,r=n.filter;return r=r.replace(v,h),0!=+t?(this.attrs.blur=t,n.filter=r+f+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+t||1.5)+")",n.margin=e.format("-{0}px 0 0 -{0}px",o(+t||1.5))):(n.filter=r,n.margin=0,delete this.attrs.blur),this},e._engine.path=function(e,t){var n=S("shape");n.style.cssText=g,n.coordsize=y+f+y,n.coordorigin=t.coordorigin;var r=new A(n,t),i={fill:"none",stroke:"#000"};e&&(i.path=e),r.type="path",r.path=[],r.Path=h,k(r,i),t.canvas&&t.canvas.appendChild(n);var o=S("skew");return o.on=!0,n.appendChild(o),r.skew=o,r.transform(h),r},e._engine.rect=function(t,n,r,i,o,a){var s=e._rectPath(n,r,i,o,a),u=t.path(s),l=u.attrs;return u.X=l.x=n,u.Y=l.y=r,u.W=l.width=i,u.H=l.height=o,l.r=a,l.path=s,u.type="rect",u},e._engine.ellipse=function(e,t,n,r,i){var o=e.path();return o.attrs,o.X=t-r,o.Y=n-i,o.W=2*r,o.H=2*i,o.type="ellipse",k(o,{cx:t,cy:n,rx:r,ry:i}),o},e._engine.circle=function(e,t,n,r){var i=e.path();return i.attrs,i.X=t-r,i.Y=n-r,i.W=i.H=2*r,i.type="circle",k(i,{cx:t,cy:n,r:r}),i},e._engine.image=function(t,n,r,i,o,a){var s=e._rectPath(r,i,o,a),u=t.path(s).attr({stroke:"none"}),l=u.attrs,c=u.node,f=c.getElementsByTagName("fill")[0];return l.src=n,u.X=l.x=r,u.Y=l.y=i,u.W=l.width=o,u.H=l.height=a,l.path=s,u.type="image",f.parentNode==c&&c.removeChild(f),f.rotate=!0,f.src=n,f.type="tile",u._.fillpos=[r,i],u._.fillsize=[o,a],c.appendChild(f),w(u,1,1,0,0,0),u},e._engine.text=function(t,r,i,a){var s=S("shape"),u=S("path"),l=S("textpath");r=r||0,i=i||0,a=a||"",u.v=e.format("m{0},{1}l{2},{1}",o(r*y),o(i*y),o(r*y)+1),u.textpathok=!0,l.string=n(a),l.on=!0,s.style.cssText=g,s.coordsize=y+f+y,s.coordorigin="0 0";var c=new A(s,t),d={fill:"#000",stroke:"none",font:e._availableAttrs.font,text:a};c.shape=s,c.path=u,c.textpath=l,c.type="text",c.attrs.text=n(a),c.attrs.x=r,c.attrs.y=i,c.attrs.w=1,c.attrs.h=1,k(c,d),s.appendChild(l),s.appendChild(u),t.canvas.appendChild(s);var p=S("skew");return p.on=!0,s.appendChild(p),c.skew=p,c.transform(h),c},e._engine.setSize=function(t,n){var r=this.canvas.style;return this.width=t,this.height=n,t==+t&&(t+="px"),n==+n&&(n+="px"),r.width=t,r.height=n,r.clip="rect(0 "+t+" "+n+" 0)",this._viewBox&&e._engine.setViewBox.apply(this,this._viewBox),this},e._engine.setViewBox=function(t,n,r,i,o){e.eve("raphael.setViewBox",this,this._viewBox,[t,n,r,i,o]);var a,s,u=this.getSize(),l=u.width,c=u.height;return o&&(r*(a=c/i)<l&&(t-=(l-r*a)/2/a),i*(s=l/r)<c&&(n-=(c-i*s)/2/s)),this._viewBox=[t,n,r,i,!!o],this._viewBoxShift={dx:-t,dy:-n,scale:u},this.forEach((function(e){e.transform("...")})),this},e._engine.initWin=function(e){var t=e.document;t.styleSheets.length<31?t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):t.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),S=function(e){return t.createElement("<rvml:"+e+' class="rvml">')}}catch(e){S=function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},e._engine.initWin(e._g.win),e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t.container,r=t.height,i=t.width,o=t.x,a=t.y;if(!n)throw new Error("VML container not found.");var s=new e._Paper,u=s.canvas=e._g.doc.createElement("div"),l=u.style;return o=o||0,a=a||0,i=i||512,r=r||342,s.width=i,s.height=r,i==+i&&(i+="px"),r==+r&&(r+="px"),s.coordsize=216e5+f+216e5,s.coordorigin="0 0",s.span=e._g.doc.createElement("span"),s.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",u.appendChild(s.span),l.cssText=e.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",i,r),1==n?(e._g.doc.body.appendChild(u),l.left=o+"px",l.top=a+"px",l.position="absolute"):n.firstChild?n.insertBefore(u,n.firstChild):n.appendChild(u),s.renderfix=function(){},s},e.prototype.clear=function(){e.eve("raphael.clear",this),this.canvas.innerHTML=h,this.span=e._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},e.prototype.remove=function(){for(var t in e.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null;return!0};var M=e.st;for(var T in C)C[t](T)&&!M[t](T)&&(M[T]=function(e){return function(){var t=arguments;return this.forEach((function(n){n[e].apply(n,t)}))}}(T))}}.apply(t,r))||(e.exports=i)}])},42685:function(e,t,n){"use strict";n(35655),n(38917),n(67133),n(28980),n(17157),n(66851),n(35161),n(77171),n(11621),n(77275),n(81006),n(53954),n(31877),n(70752),n(83950),n(60356),n(74072),n(65898),n(94022),n(66515),n(10350),n(85633),n(59552),n(13244),"undefined"===typeof Promise&&(n(61591).enable(),self.Promise=n(13042)),"undefined"!==typeof window&&n(32727),Object.assign=n(46221)},3683:function(e,t,n){"use strict";n(35655),n(38917),n(67133),n(28980),n(17157),n(66851),n(35161),n(77171),n(11621),n(77275),n(81006),n(53954),n(31877),n(70752),n(83950),n(89028),n(90047),n(28500),n(47752),n(68317),n(66026),n(51075),n(59552),n(82587),n(72),n(7744),n(17294),n(88677),n(64607),n(26320),n(79913),n(69777),n(64018),n(53448),n(59324),n(73437),n(99157),n(33424),n(58921),n(34173),n(19618),n(80520),n(60356),n(81040),n(20940),n(68862),n(11742),n(99307),n(90618),n(30728),n(68229),n(62169),n(69100),n(30482),n(79304),n(60731),n(31167),n(64840),n(11697),n(6105),n(74072),n(87249),n(83546),n(75120),n(74099),n(72205),n(570),n(99176),n(11839),n(45459),n(11207),n(97376),n(39504),n(24783),n(2036),n(93938),n(86510),n(68072),n(61991),n(1701),n(26410),n(50322),n(30794),n(1020),n(10848),n(79133),n(28497),n(33347),n(92958),n(16406),n(17756),n(17930),n(36584),n(29599),n(98097),n(65898),n(47735),n(46403),n(76494),n(45325),n(22266),n(52498),n(90826),n(61644),n(98520),n(73755),n(23822),n(2303),n(43362),n(8781),n(44726),n(77231),n(47623),n(74022),n(75642),n(67249),n(97851),n(27285),n(33141),n(31363),n(38941),n(22584),n(68944),n(13244),n(724),n(78875),n(72346),n(93766),n(51963),n(60417),n(63098),n(31844),n(11279),n(88846),n(95073),n(99773),n(72610),n(878),n(79298),n(21285),n(90176),n(55700),n(68886),n(66092),n(58018),n(7897),n(56405),n(43569),n(17670),n(99262),n(76598),n(6725),n(49350),n(248),n(86058),n(69868),n(74126),n(33144),n(41861),n(65598),n(54841),n(40858),n(76803),n(23654),n(85831),n(69094),n(32991),n(4657),n(41813),n(13154),n(4773),n(8904),n(25565),n(88474),n(94424),n(43901),n(47923),n(47523),n(93325),n(17334),n(15649),n(45599),n(51156),n(8164),n(71574),n(25999),n(85633),n(48638),n(68334),n(93123),n(6659),n(13465),n(62946)},42664:function(e,t,n){"use strict";var r=n(47028),i=n(46221),o=n(93081);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,u={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function x(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,S=60106,E=60107,k=60108,O=60114,A=60109,C=60110,M=60112,T=60113,P=60120,R=60115,I=60116,L=60121,N=60128,j=60129,D=60130,B=60131;if("function"===typeof Symbol&&Symbol.for){var z=Symbol.for;w=z("react.element"),S=z("react.portal"),E=z("react.fragment"),k=z("react.strict_mode"),O=z("react.profiler"),A=z("react.provider"),C=z("react.context"),M=z("react.forward_ref"),T=z("react.suspense"),P=z("react.suspense_list"),R=z("react.memo"),I=z("react.lazy"),L=z("react.block"),z("react.scope"),N=z("react.opaque.id"),j=z("react.debug_trace_mode"),D=z("react.offscreen"),B=z("react.legacy_hidden")}var F,V="function"===typeof Symbol&&Symbol.iterator;function U(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=V&&e[V]||e["@@iterator"])?e:null}function Z(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var H=!1;function G(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Z(e):""}function W(e){switch(e.tag){case 5:return Z(e.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case O:return"Profiler";case k:return"StrictMode";case T:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case R:return q(e.type);case L:return q(e._render);case I:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function K(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function le(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ge=(me=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];function _e(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=_e(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(be).forEach((function(e){xe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var Se=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Oe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ae=null,Ce=null,Me=null;function Te(e){if(e=ri(e)){if("function"!==typeof Ae)throw Error(a(280));var t=e.stateNode;t&&(t=oi(t),Ae(e.stateNode,e.type,t))}}function Pe(e){Ce?Me?Me.push(e):Me=[e]:Ce=e}function Re(){if(Ce){var e=Ce,t=Me;if(Me=Ce=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ie(e,t){return e(t)}function Le(e,t,n,r,i){return e(t,n,r,i)}function Ne(){}var je=Ie,De=!1,Be=!1;function ze(){null===Ce&&null===Me||(Ne(),Re())}function Fe(e,t){var n=e.stateNode;if(null===n)return null;var r=oi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ve=!1;if(f)try{var Ue={};Object.defineProperty(Ue,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",Ue,Ue),window.removeEventListener("test",Ue,Ue)}catch(me){Ve=!1}function Ze(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var He=!1,Ge=null,We=!1,qe=null,Ke={onError:function(e){He=!0,Ge=e}};function Ye(e,t,n,r,i,o,a,s,u){He=!1,Ge=null,Ze.apply(Ke,arguments)}function Xe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Xe(e)!==e)throw Error(a(188))}function Qe(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Xe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Je(i),e;if(o===r)return Je(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,ot=!1,at=[],st=null,ut=null,lt=null,ct=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=pt(t,n,r,i,o),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function gt(e){var t=ni(e.target);if(null!==t){var n=Xe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function bt(e,t,n){yt(e)&&n.delete(t)}function xt(){for(ot=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==st&&yt(st)&&(st=null),null!==ut&&yt(ut)&&(ut=null),null!==lt&&yt(lt)&&(lt=null),ct.forEach(bt),ft.forEach(bt)}function _t(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,xt)))}function wt(e){function t(t){return _t(t,e)}if(0<at.length){_t(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&_t(st,e),null!==ut&&_t(ut,e),null!==lt&&_t(lt,e),ct.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)gt(n),null===n.blockedOn&&ht.shift()}function St(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},kt={},Ot={};function At(e){if(kt[e])return kt[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ot)return kt[e]=n[t];return e}f&&(Ot=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var Ct=At("animationend"),Mt=At("animationiteration"),Tt=At("animationstart"),Pt=At("transitionend"),Rt=new Map,It=new Map,Lt=["abort","abort",Ct,"animationEnd",Mt,"animationIteration",Tt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Pt,"transitionEnd","waiting","waiting"];function Nt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),It.set(r,t),Rt.set(r,i),l(i,[r])}}(0,o.unstable_now)();var jt=8;function Dt(e){if(0!==(1&e))return jt=15,1;if(0!==(2&e))return jt=14,2;if(0!==(4&e))return jt=13,4;var t=24&e;return 0!==t?(jt=12,t):0!==(32&e)?(jt=11,32):0!==(t=192&e)?(jt=10,t):0!==(256&e)?(jt=9,256):0!==(t=3584&e)?(jt=8,t):0!==(4096&e)?(jt=7,4096):0!==(t=4186112&e)?(jt=6,t):0!==(t=62914560&e)?(jt=5,t):67108864&e?(jt=4,67108864):0!==(134217728&e)?(jt=3,134217728):0!==(t=805306368&e)?(jt=2,t):0!==(1073741824&e)?(jt=1,1073741824):(jt=8,e)}function Bt(e,t){var n=e.pendingLanes;if(0===n)return jt=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=jt=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=Dt(u),i=jt):0!==(s&=o)&&(r=Dt(s),i=jt)}else 0!==(o=n&~a)?(r=Dt(o),i=jt):0!==s&&(r=Dt(s),i=jt);if(0===r)return 0;if(r=n&((0>(r=31-Ht(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&a)){if(Dt(t),i<=jt)return t;jt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Ht(t)),r|=e[n],t&=~i;return r}function zt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ft(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?Ft(10,t):e;case 10:return 0===(e=Vt(192&~t))?Ft(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&(0===(e=Vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function Vt(e){return e&-e}function Ut(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ht(t)]=n}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Wt|0)|0},Gt=Math.log,Wt=Math.LN2;var qt=o.unstable_UserBlockingPriority,Kt=o.unstable_runWithPriority,Yt=!0;function Xt(e,t,n,r){De||Ne();var i=Jt,o=De;De=!0;try{Le(i,e,t,n,r)}finally{(De=o)||ze()}}function $t(e,t,n,r){Kt(qt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<at.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),at.push(e);else{var o=Qt(e,t,n,r);if(null===o)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(o,e,t,n,r),void at.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=mt(st,e,t,n,r,i),!0;case"dragenter":return ut=mt(ut,e,t,n,r,i),!0;case"mouseover":return lt=mt(lt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ct.set(o,mt(ct.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ft.set(o,mt(ft.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;vt(e,r)}Nr(e,t,r,null,n)}}}function Qt(e,t,n,r){var i=Oe(r);if(null!==(i=ni(i))){var o=Xe(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=$e(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Nr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function on(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var ln,cn,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(hn),pn=i({},hn,{view:0,detail:0}),vn=un(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(ln=e.screenX-fn.screenX,cn=e.screenY-fn.screenY):cn=ln=0,fn=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),gn=un(mn),yn=un(i({},mn,{dataTransfer:0})),bn=un(i({},pn,{relatedTarget:0})),xn=un(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=un(_n),Sn=un(i({},hn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},On={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=On[e])&&!!t[e]}function Cn(){return An}var Mn=i({},pn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=on(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?on(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?on(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=un(Mn),Pn=un(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),In=un(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=un(Ln),jn=[9,13,27,32],Dn=f&&"CompositionEvent"in window,Bn=null;f&&"documentMode"in document&&(Bn=document.documentMode);var zn=f&&"TextEvent"in window&&!Bn,Fn=f&&(!Dn||Bn&&8<Bn&&11>=Bn),Vn=String.fromCharCode(32),Un=!1;function Zn(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Kn(e,t,n,r){Pe(r),0<(t=Dr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Xn=null;function $n(e){Mr(e,0)}function Jn(e){if($(ii(e)))return e}function Qn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",or),Xn=Yn=null)}function or(e){if("value"===e.propertyName&&Jn(Xn)){var t=[];if(Kn(t,Xn,e,Oe(e)),e=$n,De)e(t);else{De=!0;try{Ie(e,t)}finally{De=!1,ze()}}}}function ar(e,t,n){"focusin"===e?(ir(),Xn=n,(Yn=t).attachEvent("onpropertychange",or)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Xn)}function ur(e,t){if("click"===e)return Jn(t)}function lr(e,t){if("input"===e||"change"===e)return Jn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!cr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=f&&"documentMode"in document&&11>=document.documentMode,br=null,xr=null,_r=null,wr=!1;function Sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==br||br!==J(r)||("selectionStart"in(r=br)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},_r&&hr(_r,r)||(_r=r,0<(r=Dr(xr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}Nt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Nt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Nt(Lt,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),kr=0;kr<Er.length;kr++)It.set(Er[kr],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ar=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,l){if(Ye.apply(this,arguments),He){if(!He)throw Error(a(198));var c=Ge;He=!1,Ge=null,We||(We=!0,qe=c)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Cr(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Cr(i,s,l),o=u}}}if(We)throw e=qe,We=!1,qe=null,e}function Tr(e,t){var n=ai(t),r=e+"__bubble";n.has(r)||(Lr(t,e,2,!1),n.add(r))}var Pr="_reactListening"+Math.random().toString(36).slice(2);function Rr(e){e[Pr]||(e[Pr]=!0,s.forEach((function(t){Ar.has(t)||Ir(t,!1,e,null),Ir(t,!0,e,null)})))}function Ir(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Ar.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=ai(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Lr(o,e,i,t),a.add(s))}function Lr(e,t,n,r){var i=It.get(t);switch(void 0===i?2:i){case 0:i=Xt;break;case 1:i=$t;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Nr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=ni(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Be)return e(t,n);Be=!0;try{je(e,t,n)}finally{Be=!1,ze()}}((function(){var r=o,i=Oe(n),a=[];e:{var s=Rt.get(e);if(void 0!==s){var u=dn,l=e;switch(e){case"keypress":if(0===on(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":l="focus",u=bn;break;case"focusout":l="blur",u=bn;break;case"beforeblur":case"afterblur":u=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Rn;break;case Ct:case Mt:case Tt:u=xn;break;case Pt:u=In;break;case"scroll":u=vn;break;case"wheel":u=Nn;break;case"copy":case"cut":case"paste":u=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Pn}var c=0!==(4&t),f=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Fe(p,h))&&c.push(jr(p,v,d)))),f)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(l=n.relatedTarget||n.fromElement)||!ni(l)&&!l[ei])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?ni(l):null)&&(l!==(f=Xe(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=gn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Pn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:ii(u),d=null==l?s:ii(l),(s=new c(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,ni(i)===r&&((c=new c(h,p+"enter",l,n,i)).target=d,c.relatedTarget=f,v=c),f=v,u&&l)e:{for(h=l,p=0,d=c=u;d;d=Br(d))p++;for(d=0,v=h;v;v=Br(v))d++;for(;0<p-d;)c=Br(c),p--;for(;0<d-p;)h=Br(h),d--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Br(c),h=Br(h)}c=null}else c=null;null!==u&&zr(a,s,u,c,!1),null!==l&&null!==f&&zr(a,f,l,c,!0)}if("select"===(u=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Qn;else if(qn(s))if(er)m=lr;else{m=sr;var g=ar}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ur);switch(m&&(m=m(e,r))?Kn(a,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ie(s,"number",s.value)),g=r?ii(r):window,e){case"focusin":(qn(g)||"true"===g.contentEditable)&&(br=g,xr=r,_r=null);break;case"focusout":_r=xr=br=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,Sr(a,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Sr(a,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Gn?Zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Gn&&(y=rn()):(tn="value"in(en=i)?en.value:en.textContent,Gn=!0)),0<(g=Dr(r,b)).length&&(b=new Sn(b,e,null,n,i),a.push({event:b,listeners:g}),y?b.data=y:null!==(y=Hn(n))&&(b.data=y))),(y=zn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(Un=!0,Vn);case"textInput":return(e=t.data)===Vn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Dn&&Zn(e,t)?(e=rn(),nn=tn=en=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Dr(r,"onBeforeInput")).length&&(i=new Sn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Mr(a,t)}))}function jr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Dr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Fe(e,n))&&r.unshift(jr(e,o,i)),null!=(o=Fe(e,t))&&r.push(jr(e,o,i))),e=e.return}return r}function Br(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function zr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Fe(n,o))&&a.unshift(jr(n,u,s)):i||null!=(u=Fe(n,o))&&a.push(jr(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Fr(){}var Vr=null,Ur=null;function Zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Hr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function qr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Kr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Xr=0;var $r=Math.random().toString(36).slice(2),Jr="__reactFiber$"+$r,Qr="__reactProps$"+$r,ei="__reactContainer$"+$r,ti="__reactEvents$"+$r;function ni(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Jr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Jr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function oi(e){return e[Qr]||null}function ai(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],ui=-1;function li(e){return{current:e}}function ci(e){0>ui||(e.current=si[ui],si[ui]=null,ui--)}function fi(e,t){ui++,si[ui]=e.current,e.current=t}var hi={},di=li(hi),pi=li(!1),vi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function gi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function yi(){ci(pi),ci(di)}function bi(e,t,n){if(di.current!==hi)throw Error(a(168));fi(di,t),fi(pi,n)}function xi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,q(t)||"Unknown",o));return i({},n,r)}function _i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function wi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=xi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,ci(pi),ci(di),fi(di,e)):ci(pi),fi(pi,n)}var Si=null,Ei=null,ki=o.unstable_runWithPriority,Oi=o.unstable_scheduleCallback,Ai=o.unstable_cancelCallback,Ci=o.unstable_shouldYield,Mi=o.unstable_requestPaint,Ti=o.unstable_now,Pi=o.unstable_getCurrentPriorityLevel,Ri=o.unstable_ImmediatePriority,Ii=o.unstable_UserBlockingPriority,Li=o.unstable_NormalPriority,Ni=o.unstable_LowPriority,ji=o.unstable_IdlePriority,Di={},Bi=void 0!==Mi?Mi:function(){},zi=null,Fi=null,Vi=!1,Ui=Ti(),Zi=1e4>Ui?Ti:function(){return Ti()-Ui};function Hi(){switch(Pi()){case Ri:return 99;case Ii:return 98;case Li:return 97;case Ni:return 96;case ji:return 95;default:throw Error(a(332))}}function Gi(e){switch(e){case 99:return Ri;case 98:return Ii;case 97:return Li;case 96:return Ni;case 95:return ji;default:throw Error(a(332))}}function Wi(e,t){return e=Gi(e),ki(e,t)}function qi(e,t,n){return e=Gi(e),Oi(e,t,n)}function Ki(){if(null!==Fi){var e=Fi;Fi=null,Ai(e)}Yi()}function Yi(){if(!Vi&&null!==zi){Vi=!0;var e=0;try{var t=zi;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),zi=null}catch(n){throw null!==zi&&(zi=zi.slice(e+1)),Oi(Ri,Ki),n}finally{Vi=!1}}}var Xi=_.ReactCurrentBatchConfig;function $i(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=li(null),Qi=null,eo=null,to=null;function no(){to=eo=Qi=null}function ro(e){var t=Ji.current;ci(Ji),e.type._context._currentValue=t}function io(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function oo(e,t){Qi=e,to=eo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Da=!0),e.firstContext=null)}function ao(e,t){if(to!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(to=e,t=1073741823),t={context:e,observedBits:t,next:null},null===eo){if(null===Qi)throw Error(a(308));eo=t,Qi.dependencies={lanes:0,firstContext:t,responders:null}}else eo=eo.next=t;return e._currentValue}var so=!1;function uo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function lo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function co(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ho(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function po(e,t,n,r){var o=e.updateQueue;so=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var l=u,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==s&&(null===h?f.firstBaseUpdate=c:h.next=c,f.lastBaseUpdate=l)}}if(null!==a){for(h=o.baseState,s=0,f=c=l=null;;){u=a.lane;var d=a.eventTime;if((r&u)===u){null!==f&&(f=f.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,v=a;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,u);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,h,u):p)||void 0===u)break e;h=i({},h,u);break e;case 2:so=!0}}null!==a.callback&&(e.flags|=32,null===(u=o.effects)?o.effects=[a]:u.push(a))}else d={eventTime:d,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===f?(c=f=d,l=h):f=f.next=d,s|=u;if(null===(a=a.next)){if(null===(u=o.shared.pending))break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===f&&(l=h),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=f,Vs|=s,e.lanes=s,e.memoizedState=h}}function vo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var mo=(new r.Component).refs;function go(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var yo={isMounted:function(e){return!!(e=e._reactInternals)&&Xe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hu(),i=du(e),o=co(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),fo(e,o),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hu(),i=du(e),o=co(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),fo(e,o),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hu(),r=du(e),i=co(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fo(e,i),pu(e,r,n)}};function bo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,o))}function xo(e,t,n){var r=!1,i=hi,o=t.contextType;return"object"===typeof o&&null!==o?o=ao(o):(i=gi(t)?vi:di.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):hi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=yo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function _o(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yo.enqueueReplaceState(t,t.state,null)}function wo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=mo,uo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ao(o):(o=gi(t)?vi:di.current,i.context=mi(e,o)),po(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(go(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&yo.enqueueReplaceState(i,i.state,null),po(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var So=Array.isArray;function Eo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===mo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ko(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Oo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Wu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Xu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Eo(e,t,n),r.return=e,r):((r=qu(n.type,n.key,n.props,null,e.mode,r)).ref=Eo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$u(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,o){return null===t||7!==t.tag?((t=Ku(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Xu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=qu(t.type,t.key,t.props,null,e.mode,n)).ref=Eo(e,null,t),n.return=e,n;case S:return(t=$u(t,e.mode,n)).return=e,t}if(So(t)||U(t))return(t=Ku(t,e.mode,n,null)).return=e,t;ko(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?n.type===E?f(e,t,n.props.children,r,i):l(e,t,n,r):null;case S:return n.key===i?c(e,t,n,r):null}if(So(n)||U(n))return null!==i?null:f(e,t,n,r,null);ko(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===E?f(t,e,r.props.children,i,r.key):l(t,e,r,i);case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(So(r)||U(r))return f(t,e=e.get(n)||null,r,i,null);ko(t,r)}return null}function v(i,a,s,u){for(var l=null,c=null,f=a,v=a=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=d(i,f,s[v],u);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(i,f),a=o(g,a,v),null===c?l=g:c.sibling=g,c=g,f=m}if(v===s.length)return n(i,f),l;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(a=o(f,a,v),null===c?l=f:c.sibling=f,c=f);return l}for(f=r(i,f);v<s.length;v++)null!==(m=p(f,i,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===c?l=m:c.sibling=m,c=m);return e&&f.forEach((function(e){return t(i,e)})),l}function m(i,s,u,l){var c=U(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var f=c=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=d(i,v,y.value,l);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(i,v),s=o(b,s,m),null===f?c=b:f.sibling=b,f=b,v=g}if(y.done)return n(i,v),c;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=h(i,y.value,l))&&(s=o(y,s,m),null===f?c=y:f.sibling=y,f=y);return c}for(v=r(i,v);!y.done;m++,y=u.next())null!==(y=p(v,i,m,y.value,l))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===f?c=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(i,e)})),c}return function(e,r,o,u){var l="object"===typeof o&&null!==o&&o.type===E&&null===o.key;l&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case w:e:{for(c=o.key,l=r;null!==l;){if(l.key===c){if(7===l.tag){if(o.type===E){n(e,l.sibling),(r=i(l,o.props.children)).return=e,e=r;break e}}else if(l.elementType===o.type){n(e,l.sibling),(r=i(l,o.props)).ref=Eo(e,l,o),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}o.type===E?((r=Ku(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=qu(o.type,o.key,o.props,null,e.mode,u)).ref=Eo(e,r,o),u.return=e,e=u)}return s(e);case S:e:{for(l=o.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=$u(o,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Xu(o,e.mode,u)).return=e,e=r),s(e);if(So(o))return v(e,r,o,u);if(U(o))return m(e,r,o,u);if(c&&ko(e,o),"undefined"===typeof o&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,q(e.type)||"Component"))}return n(e,r)}}var Ao=Oo(!0),Co=Oo(!1),Mo={},To=li(Mo),Po=li(Mo),Ro=li(Mo);function Io(e){if(e===Mo)throw Error(a(174));return e}function Lo(e,t){switch(fi(Ro,t),fi(Po,e),fi(To,Mo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ci(To),fi(To,t)}function No(){ci(To),ci(Po),ci(Ro)}function jo(e){Io(Ro.current);var t=Io(To.current),n=pe(t,e.type);t!==n&&(fi(Po,e),fi(To,n))}function Do(e){Po.current===e&&(ci(To),ci(Po))}var Bo=li(0);function zo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fo=null,Vo=null,Uo=!1;function Zo(e,t){var n=Hu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ho(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Go(e){if(Uo){var t=Vo;if(t){var n=t;if(!Ho(e,t)){if(!(t=Kr(n.nextSibling))||!Ho(e,t))return e.flags=-1025&e.flags|2,Uo=!1,void(Fo=e);Zo(Fo,n)}Fo=e,Vo=Kr(t.firstChild)}else e.flags=-1025&e.flags|2,Uo=!1,Fo=e}}function Wo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Fo=e}function qo(e){if(e!==Fo)return!1;if(!Uo)return Wo(e),Uo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Hr(t,e.memoizedProps))for(t=Vo;t;)Zo(e,t),t=Kr(t.nextSibling);if(Wo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Vo=Kr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Vo=null}}else Vo=Fo?Kr(e.stateNode.nextSibling):null;return!0}function Ko(){Vo=Fo=null,Uo=!1}var Yo=[];function Xo(){for(var e=0;e<Yo.length;e++)Yo[e]._workInProgressVersionPrimary=null;Yo.length=0}var $o=_.ReactCurrentDispatcher,Jo=_.ReactCurrentBatchConfig,Qo=0,ea=null,ta=null,na=null,ra=!1,ia=!1;function oa(){throw Error(a(321))}function aa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function sa(e,t,n,r,i,o){if(Qo=o,ea=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$o.current=null===e||null===e.memoizedState?Ia:La,e=n(r,i),ia){o=0;do{if(ia=!1,!(25>o))throw Error(a(301));o+=1,na=ta=null,t.updateQueue=null,$o.current=Na,e=n(r,i)}while(ia)}if($o.current=Ra,t=null!==ta&&null!==ta.next,Qo=0,na=ta=ea=null,ra=!1,t)throw Error(a(300));return e}function ua(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===na?ea.memoizedState=na=e:na=na.next=e,na}function la(){if(null===ta){var e=ea.alternate;e=null!==e?e.memoizedState:null}else e=ta.next;var t=null===na?ea.memoizedState:na.next;if(null!==t)na=t,ta=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ta=e).memoizedState,baseState:ta.baseState,baseQueue:ta.baseQueue,queue:ta.queue,next:null},null===na?ea.memoizedState=na=e:na=na.next=e}return na}function ca(e,t){return"function"===typeof t?t(e):t}function fa(e){var t=la(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ta,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,l=i;do{var c=l.lane;if((Qo&c)===c)null!==u&&(u=u.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=f,o=r):u=u.next=f,ea.lanes|=c,Vs|=c}l=l.next}while(null!==l&&l!==i);null===u?o=r:u.next=s,cr(r,t.memoizedState)||(Da=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ha(e){var t=la(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);cr(o,t.memoizedState)||(Da=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function da(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Qo&e)===e)&&(t._workInProgressVersionPrimary=r,Yo.push(t))),e)return n(t._source);throw Yo.push(t),Error(a(350))}function pa(e,t,n,r){var i=Is;if(null===i)throw Error(a(349));var o=t._getVersion,s=o(t._source),u=$o.current,l=u.useState((function(){return da(i,t,n)})),c=l[1],f=l[0];l=na;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var m=ea;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=c;var e=o(t._source);if(!cr(s,e)){e=n(t._source),cr(f,e)||(c(e),e=du(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var u=31-Ht(a),l=1<<u;r[u]|=e,a&=~l}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(m);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),cr(p,n)&&cr(v,t)&&cr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:f}).dispatch=c=Pa.bind(null,ea,e),l.queue=e,l.baseQueue=null,f=da(i,t,n),l.memoizedState=l.baseState=f),f}function va(e,t,n){return pa(la(),e,t,n)}function ma(e){var t=ua();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:e}).dispatch=Pa.bind(null,ea,e),[t.memoizedState,e]}function ga(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ea.updateQueue)?(t={lastEffect:null},ea.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ya(e){return e={current:e},ua().memoizedState=e}function ba(){return la().memoizedState}function xa(e,t,n,r){var i=ua();ea.flags|=e,i.memoizedState=ga(1|t,n,void 0,void 0===r?null:r)}function _a(e,t,n,r){var i=la();r=void 0===r?null:r;var o=void 0;if(null!==ta){var a=ta.memoizedState;if(o=a.destroy,null!==r&&aa(r,a.deps))return void ga(t,n,o,r)}ea.flags|=e,i.memoizedState=ga(1|t,n,o,r)}function wa(e,t){return xa(516,4,e,t)}function Sa(e,t){return _a(516,4,e,t)}function Ea(e,t){return _a(4,2,e,t)}function ka(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Oa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,_a(4,2,ka.bind(null,t,e),n)}function Aa(){}function Ca(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&aa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ma(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&aa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ta(e,t){var n=Hi();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Jo.transition;Jo.transition=1;try{e(!1),t()}finally{Jo.transition=n}}))}function Pa(e,t,n){var r=hu(),i=du(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===ea||null!==a&&a===ea)ia=ra=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,cr(u,s))return}catch(l){}pu(e,i,r)}}var Ra={readContext:ao,useCallback:oa,useContext:oa,useEffect:oa,useImperativeHandle:oa,useLayoutEffect:oa,useMemo:oa,useReducer:oa,useRef:oa,useState:oa,useDebugValue:oa,useDeferredValue:oa,useTransition:oa,useMutableSource:oa,useOpaqueIdentifier:oa,unstable_isNewReconciler:!1},Ia={readContext:ao,useCallback:function(e,t){return ua().memoizedState=[e,void 0===t?null:t],e},useContext:ao,useEffect:wa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,xa(4,2,ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xa(4,2,e,t)},useMemo:function(e,t){var n=ua();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ua();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Pa.bind(null,ea,e),[r.memoizedState,e]},useRef:ya,useState:ma,useDebugValue:Aa,useDeferredValue:function(e){var t=ma(e),n=t[0],r=t[1];return wa((function(){var t=Jo.transition;Jo.transition=1;try{r(e)}finally{Jo.transition=t}}),[e]),n},useTransition:function(){var e=ma(!1),t=e[0];return ya(e=Ta.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ua();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},pa(r,e,t,n)},useOpaqueIdentifier:function(){if(Uo){var e=!1,t=function(e){return{$$typeof:N,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Xr++).toString(36))),Error(a(355))})),n=ma(t)[1];return 0===(2&ea.mode)&&(ea.flags|=516,ga(5,(function(){n("r:"+(Xr++).toString(36))}),void 0,null)),t}return ma(t="r:"+(Xr++).toString(36)),t},unstable_isNewReconciler:!1},La={readContext:ao,useCallback:Ca,useContext:ao,useEffect:Sa,useImperativeHandle:Oa,useLayoutEffect:Ea,useMemo:Ma,useReducer:fa,useRef:ba,useState:function(){return fa(ca)},useDebugValue:Aa,useDeferredValue:function(e){var t=fa(ca),n=t[0],r=t[1];return Sa((function(){var t=Jo.transition;Jo.transition=1;try{r(e)}finally{Jo.transition=t}}),[e]),n},useTransition:function(){var e=fa(ca)[0];return[ba().current,e]},useMutableSource:va,useOpaqueIdentifier:function(){return fa(ca)[0]},unstable_isNewReconciler:!1},Na={readContext:ao,useCallback:Ca,useContext:ao,useEffect:Sa,useImperativeHandle:Oa,useLayoutEffect:Ea,useMemo:Ma,useReducer:ha,useRef:ba,useState:function(){return ha(ca)},useDebugValue:Aa,useDeferredValue:function(e){var t=ha(ca),n=t[0],r=t[1];return Sa((function(){var t=Jo.transition;Jo.transition=1;try{r(e)}finally{Jo.transition=t}}),[e]),n},useTransition:function(){var e=ha(ca)[0];return[ba().current,e]},useMutableSource:va,useOpaqueIdentifier:function(){return ha(ca)[0]},unstable_isNewReconciler:!1},ja=_.ReactCurrentOwner,Da=!1;function Ba(e,t,n,r){t.child=null===e?Co(t,null,n,r):Ao(t,e.child,n,r)}function za(e,t,n,r,i){n=n.render;var o=t.ref;return oo(t,i),r=sa(e,t,n,r,o,i),null===e||Da?(t.flags|=1,Ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,os(e,t,i))}function Fa(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Gu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=qu(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Va(e,t,a,r,i,o))}return a=e.child,0===(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?os(e,t,o):(t.flags|=1,(e=Wu(a,r)).ref=t.ref,e.return=t,t.child=e)}function Va(e,t,n,r,i,o){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Da=!1,0===(o&i))return t.lanes=e.lanes,os(e,t,o);0!==(16384&e.flags)&&(Da=!0)}return Ha(e,t,n,r,o)}function Ua(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},wu(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},wu(t,e),null;t.memoizedState={baseLanes:0},wu(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,wu(t,r);return Ba(e,t,i,n),t.child}function Za(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ha(e,t,n,r,i){var o=gi(n)?vi:di.current;return o=mi(t,o),oo(t,i),n=sa(e,t,n,r,o,i),null===e||Da?(t.flags|=1,Ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,os(e,t,i))}function Ga(e,t,n,r,i){if(gi(n)){var o=!0;_i(t)}else o=!1;if(oo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),xo(t,n,r),wo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=ao(l):l=mi(t,l=gi(n)?vi:di.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==l)&&_o(t,a,r,l),so=!1;var h=t.memoizedState;a.state=h,po(t,r,a,i),u=t.memoizedState,s!==r||h!==u||pi.current||so?("function"===typeof c&&(go(t,n,c,r),u=t.memoizedState),(s=so||bo(t,n,s,r,h,u,l))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4)):("function"===typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,lo(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:$i(t.type,s),a.props=l,f=t.pendingProps,h=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=ao(u):u=mi(t,u=gi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==f||h!==u)&&_o(t,a,r,u),so=!1,h=t.memoizedState,a.state=h,po(t,r,a,i);var p=t.memoizedState;s!==f||h!==p||pi.current||so?("function"===typeof d&&(go(t,n,d,r),p=t.memoizedState),(l=so||bo(t,n,l,r,h,p,u))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Wa(e,t,n,r,o,i)}function Wa(e,t,n,r,i,o){Za(e,t);var a=0!==(64&t.flags);if(!r&&!a)return i&&wi(t,n,!1),os(e,t,o);r=t.stateNode,ja.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ao(t,e.child,null,o),t.child=Ao(t,null,s,o)):Ba(e,t,s,o),t.memoizedState=r.state,i&&wi(t,n,!0),t.child}function qa(e){var t=e.stateNode;t.pendingContext?bi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&bi(0,t.context,!1),Lo(e,t.containerInfo)}var Ka,Ya,Xa,$a={dehydrated:null,retryLane:0};function Ja(e,t,n){var r,i=t.pendingProps,o=Bo.current,a=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),fi(Bo,1&o),null===e?(void 0!==i.fallback&&Go(t),e=i.children,o=i.fallback,a?(e=Qa(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$a,e):"number"===typeof i.unstable_expectedLoadTime?(e=Qa(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$a,t.lanes=33554432,e):((n=Yu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=ts(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=$a,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function Qa(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Yu(t,i,0,null),n=Ku(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Wu(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Wu(a,s),null!==e?r=Wu(e,r):(r=Ku(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),io(e.return,t)}function rs(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ba(e,t,r.children,n),0!==(2&(r=Bo.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Bo,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===zo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===zo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,o,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function os(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Wu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Wu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function as(e,t){if(!Uo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return gi(t.type)&&yi(),null;case 3:return No(),ci(pi),ci(di),Xo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(qo(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Do(t);var o=Io(Ro.current);if(n=t.type,null!==e&&null!=t.stateNode)Ya(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Io(To.current),qo(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Jr]=t,r[Qr]=s,n){case"dialog":Tr("cancel",r),Tr("close",r);break;case"iframe":case"object":case"embed":Tr("load",r);break;case"video":case"audio":for(e=0;e<Or.length;e++)Tr(Or[e],r);break;case"source":Tr("error",r);break;case"img":case"image":case"link":Tr("error",r),Tr("load",r);break;case"details":Tr("toggle",r);break;case"input":ee(r,s),Tr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Tr("invalid",r);break;case"textarea":ue(r,s),Tr("invalid",r)}for(var l in Ee(n,s),e=null,s)s.hasOwnProperty(l)&&(o=s[l],"children"===l?"string"===typeof o?r.textContent!==o&&(e=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(e=["children",""+o]):u.hasOwnProperty(l)&&null!=o&&"onScroll"===l&&Tr("scroll",r));switch(n){case"input":X(r),re(r,s,!0);break;case"textarea":X(r),ce(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Fr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(l=9===o.nodeType?o:o.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Jr]=t,e[Qr]=r,Ka(e,t),t.stateNode=e,l=ke(n,r),n){case"dialog":Tr("cancel",e),Tr("close",e),o=r;break;case"iframe":case"object":case"embed":Tr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Or.length;o++)Tr(Or[o],e);o=r;break;case"source":Tr("error",e),o=r;break;case"img":case"image":case"link":Tr("error",e),Tr("load",e),o=r;break;case"details":Tr("toggle",e),o=r;break;case"input":ee(e,r),o=Q(e,r),Tr("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Tr("invalid",e);break;case"textarea":ue(e,r),o=se(e,r),Tr("invalid",e);break;default:o=r}Ee(n,o);var c=o;for(s in c)if(c.hasOwnProperty(s)){var f=c[s];"style"===s?we(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&ge(e,f):"children"===s?"string"===typeof f?("textarea"!==n||""!==f)&&ye(e,f):"number"===typeof f&&ye(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=f&&"onScroll"===s&&Tr("scroll",e):null!=f&&x(e,s,f,l))}switch(n){case"input":X(e),re(e,r,!1);break;case"textarea":X(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ae(e,!!r.multiple,s,!1):null!=r.defaultValue&&ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Fr)}Zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xa(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));n=Io(Ro.current),Io(To.current),qo(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return ci(Bo),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&qo(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Bo.current)?0===Bs&&(Bs=3):(0!==Bs&&3!==Bs||(Bs=4),null===Is||0===(134217727&Vs)&&0===(134217727&Us)||yu(Is,Ns))),(r||n)&&(t.flags|=4),null);case 4:return No(),null===e&&Rr(t.stateNode.containerInfo),null;case 10:return ro(t),null;case 19:if(ci(Bo),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(l=r.rendering))if(s)as(r,!1);else{if(0!==Bs||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=zo(e))){for(t.flags|=64,as(r,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Bo,1&Bo.current|2),t.child}e=e.sibling}null!==r.tail&&Zi()>Ws&&(t.flags|=64,s=!0,as(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=zo(l))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),as(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!Uo)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Zi()-r.renderingStartTime>Ws&&1073741824!==n&&(t.flags|=64,s=!0,as(r,!1),t.lanes=33554432);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=r.last)?n.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Zi(),n.sibling=null,t=Bo.current,fi(Bo,s?1&t|2:1&t),n):null;case 23:case 24:return Su(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function us(e){switch(e.tag){case 1:gi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(No(),ci(pi),ci(di),Xo(),0!==(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return Do(e),null;case 13:return ci(Bo),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ci(Bo),null;case 4:return No(),null;case 10:return ro(e),null;case 23:case 24:return Su(),null;default:return null}}function ls(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function cs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Ka=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ya=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Io(To.current);var a,s=null;switch(n){case"input":o=Q(e,o),r=Q(e,r),s=[];break;case"option":o=oe(e,o),r=oe(e,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=se(e,o),r=se(e,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Fr)}for(f in Ee(n,r),n=null,o)if(!r.hasOwnProperty(f)&&o.hasOwnProperty(f)&&null!=o[f])if("style"===f){var l=o[f];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(u.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var c=r[f];if(l=null!=o?o[f]:void 0,r.hasOwnProperty(f)&&c!==l&&(null!=c||null!=l))if("style"===f)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(f,n)),n=c;else"dangerouslySetInnerHTML"===f?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(f,c)):"children"===f?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(f,""+c):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(u.hasOwnProperty(f)?(null!=c&&"onScroll"===f&&Tr("scroll",e),s||l===c||(s=[])):"object"===typeof c&&null!==c&&c.$$typeof===N?c.toString():(s=s||[]).push(f,c))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}},Xa=function(e,t,n,r){n!==r&&(t.flags|=4)};var fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=co(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xs||(Xs=!0,$s=r),cs(0,t)},n}function ds(e,t,n){(n=co(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return cs(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Js?Js=new Set([this]):Js.add(this),cs(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Fu(e,n)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:$i(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&qr(t.stateNode.containerInfo))}throw Error(a(163))}function gs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Du(n,e),ju(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:$i(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&vo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}vo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))))}throw Error(a(163))}function ys(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=_e("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function bs(e,t){if(Ei&&"function"===typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(Si,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Du(t,n);else{r=t;try{i()}catch(o){Fu(r,o)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Fu(t,o)}break;case 5:vs(t);break;case 4:ks(e,t)}}function xs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function _s(e){return 5===e.tag||3===e.tag||4===e.tag}function ws(e){e:{for(var t=e.return;null!==t;){if(_s(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||_s(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Ss(e,n,t):Es(e,n,t)}function Ss(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Fr));else if(4!==r&&null!==(e=e.child))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function Es(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Es(e,t,n),e=e.sibling;null!==e;)Es(e,t,n),e=e.sibling}function ks(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,l=u;;)if(bs(s,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break e;for(;null===l.sibling;){if(null===l.return||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(bs(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Os(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Qr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),ke(e,i),t=ke(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?we(n,u):"dangerouslySetInnerHTML"===s?ge(n,u):"children"===s?ye(n,u):x(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":le(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ae(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ae(n,!!r.multiple,r.defaultValue,!0):ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Gs=Zi(),ys(t.child,!0)),void As(t);case 19:return void As(t);case 23:case 24:return void ys(t,null!==t.memoizedState)}throw Error(a(163))}function As(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=Uu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cs(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ms=Math.ceil,Ts=_.ReactCurrentDispatcher,Ps=_.ReactCurrentOwner,Rs=0,Is=null,Ls=null,Ns=0,js=0,Ds=li(0),Bs=0,zs=null,Fs=0,Vs=0,Us=0,Zs=0,Hs=null,Gs=0,Ws=1/0;function qs(){Ws=Zi()+500}var Ks,Ys=null,Xs=!1,$s=null,Js=null,Qs=!1,eu=null,tu=90,nu=[],ru=[],iu=null,ou=0,au=null,su=-1,uu=0,lu=0,cu=null,fu=!1;function hu(){return 0!==(48&Rs)?Zi():-1!==su?su:su=Zi()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Hi()?1:2;if(0===uu&&(uu=Fs),0!==Xi.transition){0!==lu&&(lu=null!==Hs?Hs.pendingLanes:0),e=uu;var t=4186112&~lu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Hi(),0!==(4&Rs)&&98===e?e=Ft(12,uu):e=Ft(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<ou)throw ou=0,au=null,Error(a(185));if(null===(e=vu(e,t)))return null;Zt(e,t,n),e===Is&&(Us|=t,4===Bs&&yu(e,Ns));var r=Hi();1===t?0!==(8&Rs)&&0===(48&Rs)?bu(e):(mu(e,n),0===Rs&&(qs(),Ki())):(0===(4&Rs)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),mu(e,n)),Hs=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function mu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Ht(s),l=1<<u,c=o[u];if(-1===c){if(0===(l&r)||0!==(l&i)){c=t,Dt(l);var f=jt;o[u]=10<=f?c+250:6<=f?c+5e3:-1}}else c<=t&&(e.expiredLanes|=l);s&=~l}if(r=Bt(e,e===Is?Ns:0),t=jt,0===r)null!==n&&(n!==Di&&Ai(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Di&&Ai(n)}15===t?(n=bu.bind(null,e),null===zi?(zi=[n],Fi=Oi(Ri,Yi)):zi.push(n),n=Di):14===t?n=qi(99,bu.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),n=qi(n,gu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function gu(e){if(su=-1,lu=uu=0,0!==(48&Rs))throw Error(a(327));var t=e.callbackNode;if(Nu()&&e.callbackNode!==t)return null;var n=Bt(e,e===Is?Ns:0);if(0===n)return null;var r=n,i=Rs;Rs|=16;var o=Ou();for(Is===e&&Ns===r||(qs(),Eu(e,r));;)try{Mu();break}catch(u){ku(e,u)}if(no(),Ts.current=o,Rs=i,null!==Ls?r=0:(Is=null,Ns=0,r=Bs),0!==(Fs&Us))Eu(e,0);else if(0!==r){if(2===r&&(Rs|=64,e.hydrate&&(e.hydrate=!1,qr(e.containerInfo)),0!==(n=zt(e))&&(r=Au(e,n))),1===r)throw t=zs,Eu(e,0),yu(e,n),mu(e,Zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:case 5:Ru(e);break;case 3:if(yu(e,n),(62914560&n)===n&&10<(r=Gs+500-Zi())){if(0!==Bt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Gr(Ru.bind(null,e),r);break}Ru(e);break;case 4:if(yu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Ht(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=Zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ms(n/1960))-n)){e.timeoutHandle=Gr(Ru.bind(null,e),n);break}Ru(e);break;default:throw Error(a(329))}}return mu(e,Zi()),e.callbackNode===t?gu.bind(null,e):null}function yu(e,t){for(t&=~Zs,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function bu(e){if(0!==(48&Rs))throw Error(a(327));if(Nu(),e===Is&&0!==(e.expiredLanes&Ns)){var t=Ns,n=Au(e,t);0!==(Fs&Us)&&(n=Au(e,t=Bt(e,t)))}else n=Au(e,t=Bt(e,0));if(0!==e.tag&&2===n&&(Rs|=64,e.hydrate&&(e.hydrate=!1,qr(e.containerInfo)),0!==(t=zt(e))&&(n=Au(e,t))),1===n)throw n=zs,Eu(e,0),yu(e,t),mu(e,Zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ru(e),mu(e,Zi()),null}function xu(e,t){var n=Rs;Rs|=1;try{return e(t)}finally{0===(Rs=n)&&(qs(),Ki())}}function _u(e,t){var n=Rs;Rs&=-2,Rs|=8;try{return e(t)}finally{0===(Rs=n)&&(qs(),Ki())}}function wu(e,t){fi(Ds,js),js|=t,Fs|=t}function Su(){js=Ds.current,ci(Ds)}function Eu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Ls)for(n=Ls.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:No(),ci(pi),ci(di),Xo();break;case 5:Do(r);break;case 4:No();break;case 13:case 19:ci(Bo);break;case 10:ro(r);break;case 23:case 24:Su()}n=n.return}Is=e,Ls=Wu(e.current,null),Ns=js=Fs=t,Bs=0,zs=null,Zs=Us=Vs=0}function ku(e,t){for(;;){var n=Ls;try{if(no(),$o.current=Ra,ra){for(var r=ea.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ra=!1}if(Qo=0,na=ta=ea=null,ia=!1,Ps.current=null,null===n||null===n.return){Bs=1,zs=t,Ls=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=Ns,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!==(1&Bo.current),h=a;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var m=h.updateQueue;if(null===m){var g=new Set;g.add(l),h.updateQueue=g}else m.add(l);if(0===(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=co(-1,1);y.tag=2,fo(s,y)}s.lanes|=1;break e}u=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new fs,u=new Set,b.set(l,u)):void 0===(u=b.get(l))&&(u=new Set,b.set(l,u)),!u.has(s)){u.add(s);var x=Vu.bind(null,o,l,s);l.then(x,x)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);u=Error((q(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Bs&&(Bs=2),u=ls(u,s),h=a;do{switch(h.tag){case 3:o=u,h.flags|=4096,t&=-t,h.lanes|=t,ho(h,hs(0,o,t));break e;case 1:o=u;var _=h.type,w=h.stateNode;if(0===(64&h.flags)&&("function"===typeof _.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Js||!Js.has(w)))){h.flags|=4096,t&=-t,h.lanes|=t,ho(h,ds(h,o,t));break e}}h=h.return}while(null!==h)}Pu(n)}catch(S){t=S,Ls===n&&null!==n&&(Ls=n=n.return);continue}break}}function Ou(){var e=Ts.current;return Ts.current=Ra,null===e?Ra:e}function Au(e,t){var n=Rs;Rs|=16;var r=Ou();for(Is===e&&Ns===t||Eu(e,t);;)try{Cu();break}catch(i){ku(e,i)}if(no(),Rs=n,Ts.current=r,null!==Ls)throw Error(a(261));return Is=null,Ns=0,Bs}function Cu(){for(;null!==Ls;)Tu(Ls)}function Mu(){for(;null!==Ls&&!Ci();)Tu(Ls)}function Tu(e){var t=Ks(e.alternate,e,js);e.memoizedProps=e.pendingProps,null===t?Pu(e):Ls=t,Ps.current=null}function Pu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,js)))return void(Ls=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&js)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Ls=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ls=t);Ls=t=e}while(null!==t);0===Bs&&(Bs=5)}function Ru(e){var t=Hi();return Wi(99,Iu.bind(null,e,t)),null}function Iu(e,t){do{Nu()}while(null!==eu);if(0!==(48&Rs))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<o;){var l=31-Ht(o),c=1<<l;i[l]=0,s[l]=-1,u[l]=-1,o&=~c}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===Is&&(Ls=Is=null,Ns=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Rs,Rs|=32,Ps.current=null,Vr=Yt,gr(s=mr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(c=u.getSelection&&u.getSelection())&&0!==c.rangeCount){u=c.anchorNode,o=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{u.nodeType,l.nodeType}catch(O){u=null;break e}var f=0,h=-1,d=-1,p=0,v=0,m=s,g=null;t:for(;;){for(var y;m!==u||0!==o&&3!==m.nodeType||(h=f+o),m!==l||0!==c&&3!==m.nodeType||(d=f+c),3===m.nodeType&&(f+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===s)break t;if(g===u&&++p===o&&(h=f),g===l&&++v===c&&(d=f),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}u=-1===h||-1===d?null:{start:h,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;Ur={focusedElem:s,selectionRange:u},Yt=!1,cu=null,fu=!1,Ys=r;do{try{Lu()}catch(O){if(null===Ys)throw Error(a(330));Fu(Ys,O),Ys=Ys.nextEffect}}while(null!==Ys);cu=null,Ys=r;do{try{for(s=e;null!==Ys;){var b=Ys.flags;if(16&b&&ye(Ys.stateNode,""),128&b){var x=Ys.alternate;if(null!==x){var _=x.ref;null!==_&&("function"===typeof _?_(null):_.current=null)}}switch(1038&b){case 2:ws(Ys),Ys.flags&=-3;break;case 6:ws(Ys),Ys.flags&=-3,Os(Ys.alternate,Ys);break;case 1024:Ys.flags&=-1025;break;case 1028:Ys.flags&=-1025,Os(Ys.alternate,Ys);break;case 4:Os(Ys.alternate,Ys);break;case 8:ks(s,u=Ys);var w=u.alternate;xs(u),null!==w&&xs(w)}Ys=Ys.nextEffect}}catch(O){if(null===Ys)throw Error(a(330));Fu(Ys,O),Ys=Ys.nextEffect}}while(null!==Ys);if(_=Ur,x=mr(),b=_.focusedElem,s=_.selectionRange,x!==b&&b&&b.ownerDocument&&vr(b.ownerDocument.documentElement,b)){null!==s&&gr(b)&&(x=s.start,void 0===(_=s.end)&&(_=x),"selectionStart"in b?(b.selectionStart=x,b.selectionEnd=Math.min(_,b.value.length)):(_=(x=b.ownerDocument||document)&&x.defaultView||window).getSelection&&(_=_.getSelection(),u=b.textContent.length,w=Math.min(s.start,u),s=void 0===s.end?w:Math.min(s.end,u),!_.extend&&w>s&&(u=s,s=w,w=u),u=pr(b,w),o=pr(b,s),u&&o&&(1!==_.rangeCount||_.anchorNode!==u.node||_.anchorOffset!==u.offset||_.focusNode!==o.node||_.focusOffset!==o.offset)&&((x=x.createRange()).setStart(u.node,u.offset),_.removeAllRanges(),w>s?(_.addRange(x),_.extend(o.node,o.offset)):(x.setEnd(o.node,o.offset),_.addRange(x))))),x=[];for(_=b;_=_.parentNode;)1===_.nodeType&&x.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<x.length;b++)(_=x[b]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Yt=!!Vr,Ur=Vr=null,e.current=n,Ys=r;do{try{for(b=e;null!==Ys;){var S=Ys.flags;if(36&S&&gs(b,Ys.alternate,Ys),128&S){x=void 0;var E=Ys.ref;if(null!==E){var k=Ys.stateNode;Ys.tag,x=k,"function"===typeof E?E(x):E.current=x}}Ys=Ys.nextEffect}}catch(O){if(null===Ys)throw Error(a(330));Fu(Ys,O),Ys=Ys.nextEffect}}while(null!==Ys);Ys=null,Bi(),Rs=i}else e.current=n;if(Qs)Qs=!1,eu=e,tu=t;else for(Ys=r;null!==Ys;)t=Ys.nextEffect,Ys.nextEffect=null,8&Ys.flags&&((S=Ys).sibling=null,S.stateNode=null),Ys=t;if(0===(r=e.pendingLanes)&&(Js=null),1===r?e===au?ou++:(ou=0,au=e):ou=0,n=n.stateNode,Ei&&"function"===typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(Si,n,void 0,64===(64&n.current.flags))}catch(O){}if(mu(e,Zi()),Xs)throw Xs=!1,e=$s,$s=null,e;return 0!==(8&Rs)||Ki(),null}function Lu(){for(;null!==Ys;){var e=Ys.alternate;fu||null===cu||(0!==(8&Ys.flags)?et(Ys,cu)&&(fu=!0):13===Ys.tag&&Cs(e,Ys)&&et(Ys,cu)&&(fu=!0));var t=Ys.flags;0!==(256&t)&&ms(e,Ys),0===(512&t)||Qs||(Qs=!0,qi(97,(function(){return Nu(),null}))),Ys=Ys.nextEffect}}function Nu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Wi(e,Bu)}return!1}function ju(e,t){nu.push(t,e),Qs||(Qs=!0,qi(97,(function(){return Nu(),null})))}function Du(e,t){ru.push(t,e),Qs||(Qs=!0,qi(97,(function(){return Nu(),null})))}function Bu(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Rs))throw Error(a(331));var t=Rs;Rs|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(l){if(null===o)throw Error(a(330));Fu(o,l)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(l){if(null===o)throw Error(a(330));Fu(o,l)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Rs=t,Ki(),!0}function zu(e,t,n){fo(e,t=hs(0,t=ls(n,t),1)),t=hu(),null!==(e=vu(e,1))&&(Zt(e,1,t),mu(e,t))}function Fu(e,t){if(3===e.tag)zu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){zu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r))){var i=ds(n,e=ls(t,e),1);if(fo(n,i),i=hu(),null!==(n=vu(n,1)))Zt(n,1,i),mu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function Vu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hu(),e.pingedLanes|=e.suspendedLanes&n,Is===e&&(Ns&n)===n&&(4===Bs||3===Bs&&(62914560&Ns)===Ns&&500>Zi()-Gs?Eu(e,0):Zs|=n),mu(e,t)}function Uu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Hi()?1:2:(0===uu&&(uu=Fs),0===(t=Vt(62914560&~uu))&&(t=4194304))),n=hu(),null!==(e=vu(e,t))&&(Zt(e,t,n),mu(e,n))}function Zu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Hu(e,t,n,r){return new Zu(e,t,n,r)}function Gu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Wu(e,t){var n=e.alternate;return null===n?((n=Hu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Gu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Ku(n.children,i,o,t);case j:s=8,i|=16;break;case k:s=8,i|=1;break;case O:return(e=Hu(12,n,t,8|i)).elementType=O,e.type=O,e.lanes=o,e;case T:return(e=Hu(13,n,t,i)).type=T,e.elementType=T,e.lanes=o,e;case P:return(e=Hu(19,n,t,i)).elementType=P,e.lanes=o,e;case D:return Yu(n,i,o,t);case B:return(e=Hu(24,n,t,i)).elementType=B,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case C:s=9;break e;case M:s=11;break e;case R:s=14;break e;case I:s=16,r=null;break e;case L:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Hu(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ku(e,t,n,r){return(e=Hu(7,e,r,t)).lanes=n,e}function Yu(e,t,n,r){return(e=Hu(23,e,r,t)).elementType=D,e.lanes=n,e}function Xu(e,t,n){return(e=Hu(6,e,null,t)).lanes=n,e}function $u(e,t,n){return(t=Hu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ju(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ut(0),this.expirationTimes=Ut(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ut(0),this.mutableSourceEagerHydrationData=null}function Qu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function el(e,t,n,r){var i=t.current,o=hu(),s=du(i);e:if(n){t:{if(Xe(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(gi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var l=n.type;if(gi(l)){n=xi(n,l,u);break e}}n=u}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=co(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fo(i,t),pu(i,s,o),s}function tl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rl(e,t){nl(e,t),(e=e.alternate)&&nl(e,t)}function il(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ju(e,t,null!=n&&!0===n.hydrate),t=Hu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,uo(t),e[ei]=n.current,Rr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ol(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function al(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tl(a);s.call(e)}}el(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new il(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=tl(a);u.call(e)}}_u((function(){el(t,a,e,i)}))}return tl(a)}function sl(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ol(t))throw Error(a(200));return Qu(e,t,null,n)}Ks=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Da=!0;else{if(0===(n&r)){switch(Da=!1,t.tag){case 3:qa(t),Ko();break;case 5:jo(t);break;case 1:gi(t.type)&&_i(t);break;case 4:Lo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Ja(e,t,n):(fi(Bo,1&Bo.current),null!==(t=os(e,t,n))?t.sibling:null);fi(Bo,1&Bo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Bo,Bo.current),r)break;return null;case 23:case 24:return t.lanes=0,Ua(e,t,n)}return os(e,t,n)}Da=0!==(16384&e.flags)}else Da=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),oo(t,n),i=sa(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(r)){var o=!0;_i(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,uo(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&go(t,r,s,e),i.updater=yo,t.stateNode=i,i._reactInternals=t,wo(t,r,e,n),t=Wa(null,t,r,!0,o,n)}else t.tag=0,Ba(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"===typeof e)return Gu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===R)return 14}return 2}(i),e=$i(i,e),o){case 0:t=Ha(null,t,i,e,n);break e;case 1:t=Ga(null,t,i,e,n);break e;case 11:t=za(null,t,i,e,n);break e;case 14:t=Fa(null,t,i,$i(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ha(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ga(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 3:if(qa(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,lo(e,t),po(t,r,null,n),(r=t.memoizedState.element)===i)Ko(),t=os(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(Vo=Kr(t.stateNode.containerInfo.firstChild),Fo=t,o=Uo=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],Yo.push(o);for(n=Co(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ba(e,t,r,n),Ko();t=t.child}return t;case 5:return jo(t),null===e&&Go(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Hr(r,i)?s=null:null!==o&&Hr(r,o)&&(t.flags|=16),Za(e,t),Ba(e,t,s,n),t.child;case 6:return null===e&&Go(t),null;case 13:return Ja(e,t,n);case 4:return Lo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ao(t,null,r,n):Ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,za(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 7:return Ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var u=t.type._context;if(fi(Ji,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=cr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!pi.current){t=os(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&o)){1===u.tag&&((c=co(-1,n&-n)).tag=2,fo(u,c)),u.lanes|=n,null!==(c=u.alternate)&&(c.lanes|=n),io(u.return,n),l.lanes|=n;break}c=c.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,oo(t,n),r=r(i=ao(i,o.unstable_observedBits)),t.flags|=1,Ba(e,t,r,n),t.child;case 14:return o=$i(i=t.type,t.pendingProps),Fa(e,t,i,o=$i(i.type,o),r,n);case 15:return Va(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:$i(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,gi(r)?(e=!0,_i(t)):e=!1,oo(t,n),xo(t,r,i),wo(t,r,i,n),Wa(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return Ua(e,t,n)}throw Error(a(156,t.tag))},il.prototype.render=function(e){el(e,this._internalRoot,null,null)},il.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;el(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pu(e,4,hu()),rl(e,4))},nt=function(e){13===e.tag&&(pu(e,67108864,hu()),rl(e,67108864))},rt=function(e){if(13===e.tag){var t=hu(),n=du(e);pu(e,n,t),rl(e,n)}},it=function(e,t){return t()},Ae=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=oi(r);if(!i)throw Error(a(90));$(r),ne(r,i)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},Ie=xu,Le=function(e,t,n,r,i){var o=Rs;Rs|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Rs=o)&&(qs(),Ki())}},Ne=function(){0===(49&Rs)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,mu(e,Zi())}))}Ki()}(),Nu())},je=function(e,t){var n=Rs;Rs|=2;try{return e(t)}finally{0===(Rs=n)&&(qs(),Ki())}};var ul={Events:[ri,ii,oi,Pe,Re,Nu,{current:!1}]},ll={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cl={bundleType:ll.bundleType,version:ll.version,rendererPackageName:ll.rendererPackageName,rendererConfig:ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:ll.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fl.isDisabled&&fl.supportsFiber)try{Si=fl.inject(cl),Ei=fl}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ul,t.createPortal=sl,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Rs;if(0!==(48&n))return e(t);Rs|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Rs=n,Ki()}},t.hydrate=function(e,t,n){if(!ol(t))throw Error(a(200));return al(null,e,t,!0,n)},t.render=function(e,t,n){if(!ol(t))throw Error(a(200));return al(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ol(e))throw Error(a(40));return!!e._reactRootContainer&&(_u((function(){al(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=xu,t.unstable_createPortal=function(e,t){return sl(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ol(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return al(e,t,n,!1,r)},t.version="17.0.2"},69538:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(42664)},50194:function(e,t,n){"use strict";n.d(t,{uI:function(){return he}});var r=n(47028),i=n(92506),o=n.n(i);function a(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function u(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}Object.create;var l=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function c(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),r=l.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!==typeof n.path){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"===typeof t?t:"string"===typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var f=[".DS_Store","Thumbs.db"];function h(e){return"object"===typeof e&&null!==e}function d(e){return g(e.target.files).map((function(e){return c(e)}))}function p(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return e.getFile()})))];case 1:return[2,t.sent().map((function(e){return c(e)}))]}}))}))}function v(e,t){return a(this,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:return null===e?[2,[]]:e.items?(n=g(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(y))]):[3,2];case 1:return[2,m(b(r.sent()))];case 2:return[2,m(g(e.files).map((function(e){return c(e)})))]}}))}))}function m(e){return e.filter((function(e){return-1===f.indexOf(e.name)}))}function g(e){if(null===e)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function y(e){if("function"!==typeof e.webkitGetAsEntry)return x(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?w(t):x(e)}function b(e){return e.reduce((function(e,t){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}(e,Array.isArray(t)?b(t):[t])}),[])}function x(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=c(t);return Promise.resolve(n)}function _(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2,e.isDirectory?w(e):S(e)]}))}))}function w(e){var t=e.createReader();return new Promise((function(e,n){var r=[];!function i(){var o=this;t.readEntries((function(t){return a(o,void 0,void 0,(function(){var o,a,u;return s(this,(function(s){switch(s.label){case 0:if(t.length)return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return o=s.sent(),e(o),[3,4];case 3:return a=s.sent(),n(a),[3,4];case 4:return[3,6];case 5:u=Promise.all(t.map(_)),r.push(u),i(),s.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function S(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var r=c(n,e.fullPath);t(r)}),(function(e){n(e)}))}))]}))}))}var E=n(94946);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T="file-invalid-type",P="file-too-large",R="file-too-small",I="too-many-files",L=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:T,message:"File type must be ".concat(t)}},N=function(e){return{code:P,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},j=function(e){return{code:R,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},D={code:I,message:"Too many files"};function B(e,t){var n="application/x-moz-file"===e.type||(0,E.Z)(e,t);return[n,n?null:L(t)]}function z(e,t,n){if(F(e.size))if(F(t)&&F(n)){if(e.size>n)return[!1,N(n)];if(e.size<t)return[!1,j(t)]}else{if(F(t)&&e.size<t)return[!1,j(t)];if(F(n)&&e.size>n)return[!1,N(n)]}return[!0,null]}function F(e){return void 0!==e&&null!==e}function V(e){var t=e.files,n=e.accept,r=e.minSize,i=e.maxSize,o=e.multiple,a=e.maxFiles;return!(!o&&t.length>1||o&&a>=1&&t.length>a)&&t.every((function(e){var t=C(B(e,n),1)[0],o=C(z(e,r,i),1)[0];return t&&o}))}function U(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function Z(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function H(e){e.preventDefault()}function G(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function W(e){return-1!==e.indexOf("Edge/")}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return G(e)||W(e)}function K(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.some((function(t){return!U(e)&&t&&t.apply(void 0,[e].concat(r)),U(e)}))}}function Y(){return"showOpenFilePicker"in window}function X(e){return e="string"===typeof e?e.split(","):e,[{description:"everything",accept:Array.isArray(e)?e.filter((function(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)})).reduce((function(e,t){return O(O({},e),{},A({},t,[]))}),{}):{}}]}var $=["children"],J=["open"],Q=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],ee=["refKey","onChange","onClick"];function te(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||re(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||re(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){if(e){if("string"===typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var le=(0,r.forwardRef)((function(e,t){var n=e.children,i=he(ue(e,$)),o=i.open,a=ue(i,J);return(0,r.useImperativeHandle)(t,(function(){return{open:o}}),[o]),r.createElement(r.Fragment,null,n(ae(ae({},a),{},{open:o})))}));le.displayName="Dropzone";var ce={disabled:!1,getFilesFromEvent:function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){return h(e)&&h(e.dataTransfer)?[2,v(e.dataTransfer,e.type)]:function(e){return h(e)&&h(e.target)}(e)?[2,d(e)]:Array.isArray(e)&&e.every((function(e){return"getFile"in e&&"function"===typeof e.getFile}))?[2,p(e)]:[2,[]]}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1};le.defaultProps=ce,le.propTypes={children:o().func,accept:o().oneOfType([o().string,o().arrayOf(o().string)]),multiple:o().bool,preventDropOnDocument:o().bool,noClick:o().bool,noKeyboard:o().bool,noDrag:o().bool,noDragEventsBubbling:o().bool,minSize:o().number,maxSize:o().number,maxFiles:o().number,disabled:o().bool,getFilesFromEvent:o().func,onFileDialogCancel:o().func,onFileDialogOpen:o().func,useFsAccessApi:o().bool,onDragEnter:o().func,onDragLeave:o().func,onDragOver:o().func,onDrop:o().func,onDropAccepted:o().func,onDropRejected:o().func,validator:o().func};var fe={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function he(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ae(ae({},ce),e),n=t.accept,i=t.disabled,o=t.getFilesFromEvent,a=t.maxSize,s=t.minSize,u=t.multiple,l=t.maxFiles,c=t.onDragEnter,f=t.onDragLeave,h=t.onDragOver,d=t.onDrop,p=t.onDropAccepted,v=t.onDropRejected,m=t.onFileDialogCancel,g=t.onFileDialogOpen,y=t.useFsAccessApi,b=t.preventDropOnDocument,x=t.noClick,_=t.noKeyboard,w=t.noDrag,S=t.noDragEventsBubbling,E=t.validator,k=(0,r.useMemo)((function(){return"function"===typeof g?g:pe}),[g]),O=(0,r.useMemo)((function(){return"function"===typeof m?m:pe}),[m]),A=(0,r.useRef)(null),C=(0,r.useRef)(null),M=(0,r.useReducer)(de,fe),T=ne(M,2),P=T[0],R=T[1],I=P.isFocused,L=P.isFileDialogActive,N=P.draggedFiles,j=function(){L&&setTimeout((function(){C.current&&(C.current.files.length||(R({type:"closeDialog"}),O()))}),300)};(0,r.useEffect)((function(){return y&&Y()?function(){}:(window.addEventListener("focus",j,!1),function(){window.removeEventListener("focus",j,!1)})}),[C,L,O,y]);var F=(0,r.useRef)([]),G=function(e){A.current&&A.current.contains(e.target)||(e.preventDefault(),F.current=[])};(0,r.useEffect)((function(){return b&&(document.addEventListener("dragover",H,!1),document.addEventListener("drop",G,!1)),function(){b&&(document.removeEventListener("dragover",H),document.removeEventListener("drop",G))}}),[A,b]);var W=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),xe(e),F.current=[].concat(te(F.current),[e.target]),Z(e)&&Promise.resolve(o(e)).then((function(t){U(e)&&!S||(R({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),c&&c(e))}))}),[o,c,S]),$=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),xe(e);var t=Z(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&h&&h(e),!1}),[h,S]),J=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),xe(e);var t=F.current.filter((function(e){return A.current&&A.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),F.current=t,t.length>0||(R({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),Z(e)&&f&&f(e))}),[A,f,S]),re=(0,r.useCallback)((function(e,t){var r=[],i=[];e.forEach((function(e){var t=ne(B(e,n),2),o=t[0],u=t[1],l=ne(z(e,s,a),2),c=l[0],f=l[1],h=E?E(e):null;if(o&&c&&!h)r.push(e);else{var d=[u,f];h&&(d=d.concat(h)),i.push({file:e,errors:d.filter((function(e){return e}))})}})),(!u&&r.length>1||u&&l>=1&&r.length>l)&&(r.forEach((function(e){i.push({file:e,errors:[D]})})),r.splice(0)),R({acceptedFiles:r,fileRejections:i,type:"setFiles"}),d&&d(r,i,t),i.length>0&&v&&v(i,t),r.length>0&&p&&p(r,t)}),[R,u,n,s,a,l,d,p,v,E]),ie=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),xe(e),F.current=[],Z(e)&&Promise.resolve(o(e)).then((function(t){U(e)&&!S||re(t,e)})),R({type:"reset"})}),[o,re,S]),oe=(0,r.useCallback)((function(){if(y&&Y()){R({type:"openDialog"}),k();var e={multiple:u,types:X(n)};window.showOpenFilePicker(e).then((function(e){return o(e)})).then((function(e){return re(e,null)})).catch((function(e){return O(e)})).finally((function(){return R({type:"closeDialog"})}))}else C.current&&(R({type:"openDialog"}),k(),C.current.value=null,C.current.click())}),[R,k,O,y,re,n,u]),le=(0,r.useCallback)((function(e){A.current&&A.current.isEqualNode(e.target)&&(32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),oe()))}),[A,C,oe]),he=(0,r.useCallback)((function(){R({type:"focus"})}),[]),ve=(0,r.useCallback)((function(){R({type:"blur"})}),[]),me=(0,r.useCallback)((function(){x||(q()?setTimeout(oe,0):oe())}),[C,x,oe]),ge=function(e){return i?null:e},ye=function(e){return _?null:ge(e)},be=function(e){return w?null:ge(e)},xe=function(e){S&&e.stopPropagation()},_e=(0,r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.role,o=e.onKeyDown,a=e.onFocus,s=e.onBlur,u=e.onClick,l=e.onDragEnter,c=e.onDragOver,f=e.onDragLeave,h=e.onDrop,d=ue(e,Q);return ae(ae(se({onKeyDown:ye(K(o,le)),onFocus:ye(K(a,he)),onBlur:ye(K(s,ve)),onClick:ge(K(u,me)),onDragEnter:be(K(l,W)),onDragOver:be(K(c,$)),onDragLeave:be(K(f,J)),onDrop:be(K(h,ie)),role:"string"===typeof r&&""!==r?r:"button"},n,A),i||_?{}:{tabIndex:0}),d)}}),[A,le,he,ve,me,W,$,J,ie,_,w,i]),we=(0,r.useCallback)((function(e){e.stopPropagation()}),[]),Se=(0,r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,r=void 0===t?"ref":t,i=e.onChange,o=e.onClick,a=ue(e,ee),s=se({accept:n,multiple:u,type:"file",style:{display:"none"},onChange:ge(K(i,ie)),onClick:ge(K(o,we)),autoComplete:"off",tabIndex:-1},r,C);return ae(ae({},s),a)}}),[C,n,u,ie,i]),Ee=N.length,ke=Ee>0&&V({files:N,accept:n,minSize:s,maxSize:a,multiple:u,maxFiles:l}),Oe=Ee>0&&!ke;return ae(ae({},P),{},{isDragAccept:ke,isDragReject:Oe,isFocused:I&&!i,getRootProps:_e,getInputProps:Se,rootRef:A,inputRef:C,open:ge(oe)})}function de(e,t){switch(t.type){case"focus":return ae(ae({},e),{},{isFocused:!0});case"blur":return ae(ae({},e),{},{isFocused:!1});case"openDialog":return ae(ae({},fe),{},{isFileDialogActive:!0});case"closeDialog":return ae(ae({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=t.isDragActive,r=t.draggedFiles;return ae(ae({},e),{},{draggedFiles:r,isDragActive:n});case"setFiles":return ae(ae({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return ae({},fe);default:return e}}function pe(){}},18743:function(e,t){"use strict";var n=60103,r=60106,i=60107,o=60108,a=60114,s=60109,u=60110,l=60112,c=60113,f=60120,h=60115,d=60116,p=60121,v=60122,m=60117,g=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),r=b("react.portal"),i=b("react.fragment"),o=b("react.strict_mode"),a=b("react.profiler"),s=b("react.provider"),u=b("react.context"),l=b("react.forward_ref"),c=b("react.suspense"),f=b("react.suspense_list"),h=b("react.memo"),d=b("react.lazy"),p=b("react.block"),v=b("react.server.block"),m=b("react.fundamental"),g=b("react.debug_trace_mode"),y=b("react.legacy_hidden")}function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case a:case o:case c:case f:return e;default:switch(e=e&&e.$$typeof){case u:case l:case d:case h:case s:return e;default:return t}}case r:return t}}}t.isContextConsumer=function(e){return x(e)===u}},8031:function(e,t,n){"use strict";e.exports=n(18743)},38002:function(e,t,n){"use strict";n.d(t,{zt:function(){return c},$j:function(){return Z},I0:function(){return K},v9:function(){return J}});var r=n(47028),i=r.createContext(null);var o=function(e){e()},a=function(){return o};var s={notify:function(){},get:function(){return[]}};function u(e,t){var n,r=s;function i(){u.onStateChange&&u.onStateChange()}function o(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=a(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var u={addNestedSub:function(e){return o(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:o,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=s)},getListeners:function(){return r}};return u}var l="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;var c=function(e){var t=e.store,n=e.context,o=e.children,a=(0,r.useMemo)((function(){var e=u(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),s=(0,r.useMemo)((function(){return t.getState()}),[t]);l((function(){var e=a.subscription;return e.trySubscribe(),s!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,s]);var c=n||i;return r.createElement(c.Provider,{value:a},o)};function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var d=n(79666),p=n.n(d),v=n(8031),m=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],g=["reactReduxForwardedRef"],y=[],b=[null,null];function x(e,t){var n=e[1];return[t.payload,n+1]}function _(e,t,n){l((function(){return e.apply(void 0,t)}),n)}function w(e,t,n,r,i,o,a){e.current=r,t.current=i,n.current=!1,o.current&&(o.current=null,a())}function S(e,t,n,r,i,o,a,s,u,l){if(e){var c=!1,f=null,h=function(){if(!c){var e,n,h=t.getState();try{e=r(h,i.current)}catch(d){n=d,f=d}n||(f=null),e===o.current?a.current||u():(o.current=e,s.current=e,a.current=!0,l({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=h,n.trySubscribe(),h();return function(){if(c=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}}var E=function(){return[null,0]};function k(e,t){void 0===t&&(t={});var n=t,o=n.getDisplayName,a=void 0===o?function(e){return"ConnectAdvanced("+e+")"}:o,s=n.methodName,l=void 0===s?"connectAdvanced":s,c=n.renderCountProp,d=void 0===c?void 0:c,k=n.shouldHandleStateChanges,O=void 0===k||k,A=n.storeKey,C=void 0===A?"store":A,M=(n.withRef,n.forwardRef),T=void 0!==M&&M,P=n.context,R=void 0===P?i:P,I=h(n,m),L=R;return function(t){var n=t.displayName||t.name||"Component",i=a(n),o=f({},I,{getDisplayName:a,methodName:l,renderCountProp:d,shouldHandleStateChanges:O,storeKey:C,displayName:i,wrappedComponentName:n,WrappedComponent:t}),s=I.pure;var c=s?r.useMemo:function(e){return e()};function m(n){var i=(0,r.useMemo)((function(){var e=n.reactReduxForwardedRef,t=h(n,g);return[n.context,e,t]}),[n]),a=i[0],s=i[1],l=i[2],d=(0,r.useMemo)((function(){return a&&a.Consumer&&(0,v.isContextConsumer)(r.createElement(a.Consumer,null))?a:L}),[a,L]),p=(0,r.useContext)(d),m=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(p)&&Boolean(p.store);var k=m?n.store:p.store,A=(0,r.useMemo)((function(){return function(t){return e(t.dispatch,o)}(k)}),[k]),C=(0,r.useMemo)((function(){if(!O)return b;var e=u(k,m?null:p.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[k,m,p]),M=C[0],T=C[1],P=(0,r.useMemo)((function(){return m?p:f({},p,{subscription:M})}),[m,p,M]),R=(0,r.useReducer)(x,y,E),I=R[0][0],N=R[1];if(I&&I.error)throw I.error;var j=(0,r.useRef)(),D=(0,r.useRef)(l),B=(0,r.useRef)(),z=(0,r.useRef)(!1),F=c((function(){return B.current&&l===D.current?B.current:A(k.getState(),l)}),[k,I,l]);_(w,[D,j,z,l,F,B,T]),_(S,[O,k,M,A,D,j,z,B,T,N],[k,M,A]);var V=(0,r.useMemo)((function(){return r.createElement(t,f({},F,{ref:s}))}),[s,t,F]);return(0,r.useMemo)((function(){return O?r.createElement(d.Provider,{value:P},V):V}),[d,V,P])}var k=s?r.memo(m):m;if(k.WrappedComponent=t,k.displayName=m.displayName=i,T){var A=r.forwardRef((function(e,t){return r.createElement(k,f({},e,{reactReduxForwardedRef:t}))}));return A.displayName=i,A.WrappedComponent=t,p()(A,t)}return p()(k,t)}}function O(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function A(e,t){if(O(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!O(e[n[i]],t[n[i]]))return!1;return!0}function C(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function M(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function T(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=M(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=M(i),i=r(t,n)),i},r}}var P=[function(e){return"function"===typeof e?T(e):void 0},function(e){return e?void 0:C((function(e){return{dispatch:e}}))},function(e){return e&&"object"===typeof e?C((function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"===typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)})):void 0}];var R=[function(e){return"function"===typeof e?T(e):void 0},function(e){return e?void 0:C((function(){return{}}))}];function I(e,t,n){return f({},n,e,t)}var L=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,a=!1;return function(t,n,s){var u=e(t,n,s);return a?i&&o(u,r)||(r=u):(a=!0,r=u),r}}}(e):void 0},function(e){return e?void 0:function(){return I}}],N=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function j(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function D(e,t,n,r,i){var o,a,s,u,l,c=i.areStatesEqual,f=i.areOwnPropsEqual,h=i.areStatePropsEqual,d=!1;function p(i,d){var p=!f(d,a),v=!c(i,o);return o=i,a=d,p&&v?(s=e(o,a),t.dependsOnOwnProps&&(u=t(r,a)),l=n(s,u,a)):p?(e.dependsOnOwnProps&&(s=e(o,a)),t.dependsOnOwnProps&&(u=t(r,a)),l=n(s,u,a)):v?function(){var t=e(o,a),r=!h(t,s);return s=t,r&&(l=n(s,u,a)),l}():l}return function(i,c){return d?p(i,c):(s=e(o=i,a=c),u=t(r,a),l=n(s,u,a),d=!0,l)}}function B(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=h(t,N),a=n(e,o),s=r(e,o),u=i(e,o);return(o.pure?D:j)(a,s,u,e,o)}var z=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function F(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function V(e,t){return e===t}function U(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?k:n,i=t.mapStateToPropsFactories,o=void 0===i?R:i,a=t.mapDispatchToPropsFactories,s=void 0===a?P:a,u=t.mergePropsFactories,l=void 0===u?L:u,c=t.selectorFactory,d=void 0===c?B:c;return function(e,t,n,i){void 0===i&&(i={});var a=i,u=a.pure,c=void 0===u||u,p=a.areStatesEqual,v=void 0===p?V:p,m=a.areOwnPropsEqual,g=void 0===m?A:m,y=a.areStatePropsEqual,b=void 0===y?A:y,x=a.areMergedPropsEqual,_=void 0===x?A:x,w=h(a,z),S=F(e,o,"mapStateToProps"),E=F(t,s,"mapDispatchToProps"),k=F(n,l,"mergeProps");return r(d,f({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:S,initMapDispatchToProps:E,initMergeProps:k,pure:c,areStatesEqual:v,areOwnPropsEqual:g,areStatePropsEqual:b,areMergedPropsEqual:_},w))}}var Z=U();function H(){return(0,r.useContext)(i)}function G(e){void 0===e&&(e=i);var t=e===i?H:function(){return(0,r.useContext)(e)};return function(){return t().store}}var W=G();function q(e){void 0===e&&(e=i);var t=e===i?W:G(e);return function(){return t().dispatch}}var K=q(),Y=function(e,t){return e===t};function X(e){void 0===e&&(e=i);var t=e===i?H:function(){return(0,r.useContext)(e)};return function(e,n){void 0===n&&(n=Y);var i=t(),o=function(e,t,n,i){var o,a=(0,r.useReducer)((function(e){return e+1}),0)[1],s=(0,r.useMemo)((function(){return u(n,i)}),[n,i]),c=(0,r.useRef)(),f=(0,r.useRef)(),h=(0,r.useRef)(),d=(0,r.useRef)(),p=n.getState();try{if(e!==f.current||p!==h.current||c.current){var v=e(p);o=void 0!==d.current&&t(v,d.current)?d.current:v}else o=d.current}catch(m){throw c.current&&(m.message+="\nThe error may be correlated with this previous error:\n"+c.current.stack+"\n\n"),m}return l((function(){f.current=e,h.current=p,d.current=o,c.current=void 0})),l((function(){function e(){try{var e=n.getState();if(e===h.current)return;var r=f.current(e);if(t(r,d.current))return;d.current=r,h.current=e}catch(m){c.current=m}a()}return s.onStateChange=e,s.trySubscribe(),e(),function(){return s.tryUnsubscribe()}}),[n,s]),o}(e,n,i.store,i.subscription);return(0,r.useDebugValue)(o),o}}var $,J=X(),Q=n(69538);$=Q.unstable_batchedUpdates,o=$},60702:function(e,t,n){"use strict";n.d(t,{ZP:function(){return m}});var r=n(69531),i=n(14189),o=n(47028),a=n(69538),s=!1,u=n(916),l="unmounted",c="exited",f="entering",h="entered",d="exiting",p=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=c,r.appearStatus=f):i=h:i=t.unmountOnExit||t.mountOnEnter?l:c,r.state={status:i},r.nextCallback=null,r}(0,i.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===l?{status:c}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==f&&n!==h&&(t=f):n!==f&&n!==h||(t=d)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===f?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===c&&this.setState({status:l})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[a.findDOMNode(this),r],o=i[0],u=i[1],l=this.getTimeouts(),c=r?l.appear:l.enter;!e&&!n||s?this.safeSetState({status:h},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,u),this.safeSetState({status:f},(function(){t.props.onEntering(o,u),t.onTransitionEnd(c,(function(){t.safeSetState({status:h},(function(){t.props.onEntered(o,u)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:a.findDOMNode(this);t&&!s?(this.props.onExit(r),this.safeSetState({status:d},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:c},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:c},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],s=i[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===l)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,r.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o.createElement(u.Z.Provider,{value:null},"function"===typeof n?n(e,i):o.cloneElement(o.Children.only(n),i))},t}(o.Component);function v(){}p.contextType=u.Z,p.propTypes={},p.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:v,onEntering:v,onEntered:v,onExit:v,onExiting:v,onExited:v},p.UNMOUNTED=l,p.EXITED=c,p.ENTERING=f,p.ENTERED=h,p.EXITING=d;var m=p},916:function(e,t,n){"use strict";var r=n(47028);t.Z=r.createContext(null)},17173:function(e,t,n){"use strict";n(46221);var r=n(47028),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:o,_owner:a.current}}t.jsx=l,t.jsxs=l},84420:function(e,t,n){"use strict";var r=n(46221),i=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,u=60112;t.Suspense=60113;var l=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),o=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),a=f("react.provider"),s=f("react.context"),u=f("react.forward_ref"),t.Suspense=f("react.suspense"),l=f("react.memo"),c=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=y.prototype=new g;b.constructor=y,r(b,m.prototype),b.isPureReactComponent=!0;var x={current:null},_=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,r)&&!w.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var k=/\/+/g;function O(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case o:u=!0}}if(u)return a=a(u=e),e=""===r?"."+O(u,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(k,"$&/")+"/"),A(a,t,n,"",(function(e){return e}))):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(k,"$&/")+"/")+e)),t.push(a)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=r+O(s=e[l],l);u+=A(s,t,n,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=A(s=s.value,t,n,c=r+O(s,l++),a);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function C(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function M(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var T={current:null};function P(){var e=T.current;if(null===e)throw Error(d(321));return e}var R={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var o=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!w.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){l=Array(c);for(var f=0;f<c;f++)l[f]=arguments[f+2];o.children=l}return{$$typeof:i,type:e.type,key:a,ref:s,props:o,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return P().useCallback(e,t)},t.useContext=function(e,t){return P().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return P().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return P().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return P().useLayoutEffect(e,t)},t.useMemo=function(e,t){return P().useMemo(e,t)},t.useReducer=function(e,t,n){return P().useReducer(e,t,n)},t.useRef=function(e){return P().useRef(e)},t.useState=function(e){return P().useState(e)},t.version="17.0.2"},47028:function(e,t,n){"use strict";e.exports=n(84420)},47279:function(e,t,n){"use strict";e.exports=n(17173)},65777:function(e,t,n){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,n){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function o(e,t){o.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function a(e,t){a.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,n){s.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function u(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function l(e){var t="undefined"==typeof e?"undefined":T(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function c(e,t,n,r,f,h,d){d=d||[];var p=(f=f||[]).slice(0);if("undefined"!=typeof h){if(r){if("function"==typeof r&&r(p,h))return;if("object"===("undefined"==typeof r?"undefined":T(r))){if(r.prefilter&&r.prefilter(p,h))return;if(r.normalize){var v=r.normalize(p,h,e,t);v&&(e=v[0],t=v[1])}}}p.push(h)}"regexp"===l(e)&&"regexp"===l(t)&&(e=e.toString(),t=t.toString());var m="undefined"==typeof e?"undefined":T(e),g="undefined"==typeof t?"undefined":T(t),y="undefined"!==m||d&&d[d.length-1].lhs&&d[d.length-1].lhs.hasOwnProperty(h),b="undefined"!==g||d&&d[d.length-1].rhs&&d[d.length-1].rhs.hasOwnProperty(h);if(!y&&b)n(new o(p,t));else if(!b&&y)n(new a(p,e));else if(l(e)!==l(t))n(new i(p,e,t));else if("date"===l(e)&&e-t!==0)n(new i(p,e,t));else if("object"===m&&null!==e&&null!==t)if(d.filter((function(t){return t.lhs===e})).length)e!==t&&n(new i(p,e,t));else{if(d.push({lhs:e,rhs:t}),Array.isArray(e)){var x;for(e.length,x=0;x<e.length;x++)x>=t.length?n(new s(p,x,new a(void 0,e[x]))):c(e[x],t[x],n,r,p,x,d);for(;x<t.length;)n(new s(p,x,new o(void 0,t[x++])))}else{var _=Object.keys(e),w=Object.keys(t);_.forEach((function(i,o){var a=w.indexOf(i);a>=0?(c(e[i],t[i],n,r,p,i,d),w=u(w,a)):c(e[i],void 0,n,r,p,i,d)})),w.forEach((function(e){c(void 0,t[e],n,r,p,e,d)}))}d.length=d.length-1}else e!==t&&("number"===m&&isNaN(e)&&isNaN(t)||n(new i(p,e,t)))}function f(e,t,n,r){return r=r||[],c(e,t,(function(e){e&&r.push(e)}),n),r.length?r:void 0}function h(e,t,n){if(n.path&&n.path.length){var r,i=e[t],o=n.path.length-1;for(r=0;r<o;r++)i=i[n.path[r]];switch(n.kind){case"A":h(i[n.path[r]],n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}else switch(n.kind){case"A":h(e[t],n.index,n.item);break;case"D":e=u(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function d(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,i=-1,o=n.path?n.path.length-1:0;++i<o;)"undefined"==typeof r[n.path[i]]&&(r[n.path[i]]="number"==typeof n.path[i]?[]:{}),r=r[n.path[i]];switch(n.kind){case"A":h(n.path?r[n.path[i]]:r,n.index,n.item);break;case"D":delete r[n.path[i]];break;case"E":case"N":r[n.path[i]]=n.rhs}}}function p(e,t,n){if(n.path&&n.path.length){var r,i=e[t],o=n.path.length-1;for(r=0;r<o;r++)i=i[n.path[r]];switch(n.kind){case"A":p(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}else switch(n.kind){case"A":p(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=u(e,t)}return e}function v(e,t,n){if(e&&t&&n&&n.kind){var r,i,o=e;for(i=n.path.length-1,r=0;r<i;r++)"undefined"==typeof o[n.path[r]]&&(o[n.path[r]]={}),o=o[n.path[r]];switch(n.kind){case"A":p(o[n.path[r]],n.index,n.item);break;case"D":case"E":o[n.path[r]]=n.lhs;break;case"N":delete o[n.path[r]]}}}function m(e,t,n){e&&t&&c(e,t,(function(r){n&&!n(e,t,r)||d(e,t,r)}))}function g(e){return"color: "+I[e].color+"; font-weight: bold"}function y(e){var t=e.kind,n=e.path,r=e.lhs,i=e.rhs,o=e.index,a=e.item;switch(t){case"E":return[n.join("."),r,"\u2192",i];case"N":return[n.join("."),i];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+o+"]",a];default:return[]}}function b(e,t,n,r){var i=f(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}i?i.forEach((function(e){var t=e.kind,r=y(e);n.log.apply(n,["%c "+I[t].text,g(t)].concat(P(r)))})):n.log("\u2014\u2014 no diff \u2014\u2014");try{n.groupEnd()}catch(e){n.log("\u2014\u2014 diff end \u2014\u2014 ")}}function x(e,t,n,r){switch("undefined"==typeof e?"undefined":T(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,P(n)):e[r];case"function":return e(t);default:return e}}function _(e){var t=e.timestamp,n=e.duration;return function(e,r,i){var o=["action"];return o.push("%c"+String(e.type)),t&&o.push("%c@ "+r),n&&o.push("%c(in "+i.toFixed(2)+" ms)"),o.join(" ")}}function w(e,t){var n=t.logger,r=t.actionTransformer,i=t.titleFormatter,o=void 0===i?_(t):i,a=t.collapsed,s=t.colors,u=t.level,l=t.diff,c="undefined"==typeof t.titleFormatter;e.forEach((function(i,f){var h=i.started,d=i.startedTime,p=i.action,v=i.prevState,m=i.error,g=i.took,y=i.nextState,_=e[f+1];_&&(y=_.prevState,g=_.started-h);var w=r(p),S="function"==typeof a?a((function(){return y}),p,i):a,E=C(d),k=s.title?"color: "+s.title(w)+";":"",O=["color: gray; font-weight: lighter;"];O.push(k),t.timestamp&&O.push("color: gray; font-weight: lighter;"),t.duration&&O.push("color: gray; font-weight: lighter;");var A=o(w,E,g);try{S?s.title&&c?n.groupCollapsed.apply(n,["%c "+A].concat(O)):n.groupCollapsed(A):s.title&&c?n.group.apply(n,["%c "+A].concat(O)):n.group(A)}catch(e){n.log(A)}var M=x(u,w,[v],"prevState"),T=x(u,w,[w],"action"),P=x(u,w,[m,v],"error"),R=x(u,w,[y],"nextState");if(M)if(s.prevState){var I="color: "+s.prevState(v)+"; font-weight: bold";n[M]("%c prev state",I,v)}else n[M]("prev state",v);if(T)if(s.action){var L="color: "+s.action(w)+"; font-weight: bold";n[T]("%c action    ",L,w)}else n[T]("action    ",w);if(m&&P)if(s.error){var N="color: "+s.error(m,v)+"; font-weight: bold;";n[P]("%c error     ",N,m)}else n[P]("error     ",m);if(R)if(s.nextState){var j="color: "+s.nextState(y)+"; font-weight: bold";n[R]("%c next state",j,y)}else n[R]("next state",y);l&&b(v,y,n,S);try{n.groupEnd()}catch(e){n.log("\u2014\u2014 log end \u2014\u2014")}}))}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},L,e),n=t.logger,r=t.stateTransformer,i=t.errorTransformer,o=t.predicate,a=t.logErrors,s=t.diffPredicate;if("undefined"==typeof n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var u=[];return function(e){var n=e.getState;return function(e){return function(l){if("function"==typeof o&&!o(n,l))return e(l);var c={};u.push(c),c.started=M.now(),c.startedTime=new Date,c.prevState=r(n()),c.action=l;var f=void 0;if(a)try{f=e(l)}catch(e){c.error=i(e)}else f=e(l);c.took=M.now()-c.started,c.nextState=r(n());var h=t.diff&&"function"==typeof s?s(n,l):t.diff;if(w(u,Object.assign({},t,{diff:h})),u.length=0,c.error)throw c.error;return f}}}}var E,k,O=function(e,t){return new Array(t+1).join(e)},A=function(e,t){return O("0",t-e.toString().length)+e},C=function(e){return A(e.getHours(),2)+":"+A(e.getMinutes(),2)+":"+A(e.getSeconds(),2)+"."+A(e.getMilliseconds(),3)},M="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},R=[];E="object"===("undefined"==typeof n.g?"undefined":T(n.g))&&n.g?n.g:"undefined"!=typeof window?window:{},(k=E.DeepDiff)&&R.push((function(){"undefined"!=typeof k&&E.DeepDiff===f&&(E.DeepDiff=k,k=void 0)})),t(i,r),t(o,r),t(a,r),t(s,r),Object.defineProperties(f,{diff:{value:f,enumerable:!0},observableDiff:{value:c,enumerable:!0},applyDiff:{value:m,enumerable:!0},applyChange:{value:d,enumerable:!0},revertChange:{value:v,enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof k},enumerable:!0},noConflict:{value:function(){return R&&(R.forEach((function(e){e()})),R=null),f},enumerable:!0}});var I={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},L={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?S()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=L,e.createLogger=S,e.logger=N,e.default=N,Object.defineProperty(e,"__esModule",{value:!0})}(t)},9297:function(e,t,n){"use strict";n.d(t,{ZP:function(){return W}});var r=n(26395),i=n(97442);var o=n(64674),a=n(68030),s=n(37936);function u(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}var l=u,c=[],f=0;function h(e){try{v(),e()}finally{m()}}function d(e){c.push(e),f||(v(),g())}function p(e){try{return v(),e()}finally{g()}}function v(){f++}function m(){f--}function g(){var e;for(m();!f&&void 0!==(e=c.shift());)h(e)}var y=function(e){return function(t){return e.some((function(e){return S(e)(t)}))}},b=function(e){return function(t){return e(t)}},x=function(e){return function(t){return t.type===String(e)}},_=function(e){return function(t){return t.type===e}},w=function(){return a.k};function S(e){var t="*"===e?w:(0,o.Z_)(e)?x:(0,o.IX)(e)?y:(0,o.eR)(e)?x:(0,o.Yl)(e)?b:(0,o.NA)(e)?_:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var E={type:r.sZ},k=function(e){return e&&e.type===r.sZ};function O(e){void 0===e&&(e=(0,a.e)());var t=!1,n=[];return{take:function(r){t&&e.isEmpty()?r(E):e.isEmpty()?(n.push(r),r.cancel=function(){(0,a.r)(n,r)}):r(e.take())},put:function(r){if(!t){if(0===n.length)return e.put(r);n.shift()(r)}},flush:function(n){t&&e.isEmpty()?n(E):n(e.flush())},close:function(){if(!t){t=!0;var e=n;n=[];for(var r=0,i=e.length;r<i;r++){(0,e[r])(E)}}}}}function A(){var e=function(){var e,t=!1,n=[],i=n,o=function(){i===n&&(i=n.slice())},s=function(){t=!0;var e=n=i;i=[],e.forEach((function(e){e(E)}))};return(e={})[r.AS]=!0,e.put=function(e){if(!t)if(k(e))s();else for(var o=n=i,a=0,u=o.length;a<u;a++){var l=o[a];l[r.uq](e)&&(l.cancel(),l(e))}},e.take=function(e,n){void 0===n&&(n=w),t?e(E):(e[r.uq]=n,o(),i.push(e),e.cancel=(0,a.o)((function(){o(),(0,a.r)(i,e)})))},e.close=s,e}(),t=e.put;return e.put=function(e){e[r.Nm]?t(e):d((function(){t(e)}))},e}function C(e,t){var n=e[r.n1];(0,o.Yl)(n)&&(t.cancel=n),e.then(t,(function(e){t(e,!0)}))}var M,T=0,P=function(){return++T};function R(e){e.isRunning()&&e.cancel()}var I=((M={})[a.T]=function(e,t,n){var i=t.channel,a=void 0===i?e.channel:i,s=t.pattern,u=t.maybe,l=function(e){e instanceof Error?n(e,!0):!k(e)||u?n(e):n(r.EO)};try{a.take(l,(0,o.d5)(s)?S(s):null)}catch(c){return void n(c,!0)}n.cancel=l.cancel},M[a.P]=function(e,t,n){var r=t.channel,i=t.action,a=t.resolve;d((function(){var t;try{t=(r?r.put:e.dispatch)(i)}catch(s){return void n(s,!0)}a&&(0,o.MC)(t)?C(t,n):n(t)}))},M[a.A]=function(e,t,n,r){var i=r.digestEffect,s=T,u=Object.keys(t);if(0!==u.length){var l=(0,a.l)(t,n);u.forEach((function(e){i(t[e],s,l[e],e)}))}else n((0,o.IX)(t)?[]:{})},M[a.R]=function(e,t,n,r){var i=r.digestEffect,s=T,u=Object.keys(t),l=(0,o.IX)(t)?(0,a.m)(u.length):{},c={},f=!1;u.forEach((function(e){var t=function(t,r){f||(r||(0,a.s)(t)?(n.cancel(),n(t,r)):(n.cancel(),f=!0,l[e]=t,n(l)))};t.cancel=a.t,c[e]=t})),n.cancel=function(){f||(f=!0,u.forEach((function(e){return c[e].cancel()})))},u.forEach((function(e){f||i(t[e],s,c[e],e)}))},M[a.C]=function(e,t,n,r){var i=t.context,s=t.fn,u=t.args,l=r.task;try{var c=s.apply(i,u);if((0,o.MC)(c))return void C(c,n);if((0,o.hZ)(c))return void Z(e,c,l.context,T,(0,a.j)(s),!1,n);n(c)}catch(f){n(f,!0)}},M[a.a]=function(e,t,n){var r=t.context,i=t.fn,a=t.args;try{var s=function(e,t){(0,o.sR)(e)?n(t):n(e,!0)};i.apply(r,a.concat(s)),s.cancel&&(n.cancel=s.cancel)}catch(u){n(u,!0)}},M[a.F]=function(e,t,n,r){var i=t.context,s=t.fn,u=t.args,l=t.detached,c=r.task,f=function(e){var t=e.context,n=e.fn,r=e.args;try{var i=n.apply(t,r);if((0,o.hZ)(i))return i;var s=!1;return(0,a.q)((function(e){return s?{value:e,done:!0}:(s=!0,{value:i,done:!(0,o.MC)(i)})}))}catch(u){return(0,a.q)((function(){throw u}))}}({context:i,fn:s,args:u}),h=function(e,t){return e.isSagaIterator?{name:e.meta.name}:(0,a.j)(t)}(f,s);p((function(){var t=Z(e,f,c.context,T,h,l,void 0);l?n(t):t.isRunning()?(c.queue.addTask(t),n(t)):t.isAborted()?c.queue.abort(t.error()):n(t)}))},M[a.J]=function(e,t,n,r){var i=r.task,s=function(e,t){if(e.isRunning()){var n={task:i,cb:t};t.cancel=function(){e.isRunning()&&(0,a.r)(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if((0,o.IX)(t)){if(0===t.length)return void n([]);var u=(0,a.l)(t,n);t.forEach((function(e,t){s(e,u[t])}))}else s(t,n)},M[a.b]=function(e,t,n,i){var a=i.task;t===r.sC?R(a):(0,o.IX)(t)?t.forEach(R):R(t),n()},M[a.S]=function(e,t,n){var r=t.selector,i=t.args;try{n(r.apply(void 0,[e.getState()].concat(i)))}catch(o){n(o,!0)}},M[a.d]=function(e,t,n){var r=t.pattern,i=O(t.buffer),o=S(r),a=function t(n){k(n)||e.channel.take(t,o),i.put(n)},s=i.close;i.close=function(){a.cancel(),s()},e.channel.take(a,o),n(i)},M[a.f]=function(e,t,n,r){n(r.task.isCancelled())},M[a.g]=function(e,t,n){t.flush(n)},M[a.G]=function(e,t,n,r){n(r.task.context[t])},M[a.h]=function(e,t,n,r){var i=r.task;(0,a.p)(i.context,t),n()},M);function L(e,t){return e+"?"+t}function N(e){var t=e.name,n=e.location;return n?t+"  "+L(n.fileName,n.lineNumber):t}function j(e){var t=(0,a.u)((function(e){return e.cancelledTasks}),e);return t.length?["Tasks cancelled due to error:"].concat(t).join("\n"):""}var D=null,B=[],z=function(e){e.crashedEffect=D,B.push(e)},F=function(){D=null,B.length=0},V=function(){var e=B[0],t=B.slice(1),n=e.crashedEffect?function(e){var t=(0,a.v)(e);return t?t.code+"  "+L(t.fileName,t.lineNumber):""}(e.crashedEffect):null;return["The above error occurred in task "+N(e.meta)+(n?" \n when executing effect "+n:"")].concat(t.map((function(e){return"    created by "+N(e.meta)})),[j(B)]).join("\n")};function U(e,t,n,i,o,s,u){var c;void 0===u&&(u=a.t);var f,h,d=0,p=null,v=[],m=Object.create(n),g=function(e,t,n){var r,i=[],o=!1;function s(e){t(),l(),n(e,!0)}function u(t){i.push(t),t.cont=function(u,l){o||((0,a.r)(i,t),t.cont=a.t,l?s(u):(t===e&&(r=u),i.length||(o=!0,n(r))))}}function l(){o||(o=!0,i.forEach((function(e){e.cont=a.t,e.cancel()})),i=[])}return u(e),{addTask:u,cancelAll:l,abort:s,getTasks:function(){return i}}}(t,(function(){v.push.apply(v,g.getTasks().map((function(e){return e.meta.name})))}),y);function y(t,n){if(n){if(d=2,z({meta:o,cancelledTasks:v}),b.isRoot){var i=V();F(),e.onError(t,{sagaStack:i})}h=t,p&&p.reject(t)}else t===r.Wd?d=1:1!==d&&(d=3),f=t,p&&p.resolve(t);b.cont(t,n),b.joiners.forEach((function(e){e.cb(t,n)})),b.joiners=null}var b=((c={})[r.Cs]=!0,c.id=i,c.meta=o,c.isRoot=s,c.context=m,c.joiners=[],c.queue=g,c.cancel=function(){0===d&&(d=1,g.cancelAll(),y(r.Wd,!1))},c.cont=u,c.end=y,c.setContext=function(e){(0,a.p)(m,e)},c.toPromise=function(){return p||(p=l(),2===d?p.reject(h):0!==d&&p.resolve(f)),p.promise},c.isRunning=function(){return 0===d},c.isCancelled=function(){return 1===d||0===d&&1===t.status},c.isAborted=function(){return 2===d},c.result=function(){return f},c.error=function(){return h},c);return b}function Z(e,t,n,i,s,u,l){var c=e.finalizeRunEffect((function(t,n,i){if((0,o.MC)(t))C(t,i);else if((0,o.hZ)(t))Z(e,t,h.context,n,s,!1,i);else if(t&&t[r.IO]){(0,I[t.type])(e,t.payload,i,d)}else i(t)}));p.cancel=a.t;var f={meta:s,cancel:function(){0===f.status&&(f.status=1,p(r.Wd))},status:0},h=U(e,f,n,i,s,u,l),d={task:h,digestEffect:v};return l&&(l.cancel=h.cancel),p(),h;function p(e,n){try{var s;n?(s=t.throw(e),F()):(0,a.y)(e)?(f.status=1,p.cancel(),s=(0,o.Yl)(t.return)?t.return(r.Wd):{done:!0,value:r.Wd}):s=(0,a.z)(e)?(0,o.Yl)(t.return)?t.return():{done:!0}:t.next(e),s.done?(1!==f.status&&(f.status=3),f.cont(s.value)):v(s.value,i,p)}catch(u){if(1===f.status)throw u;f.status=2,f.cont(u,!0)}}function v(t,n,r,i){void 0===i&&(i="");var o,s=P();function u(n,i){o||(o=!0,r.cancel=a.t,e.sagaMonitor&&(i?e.sagaMonitor.effectRejected(s,n):e.sagaMonitor.effectResolved(s,n)),i&&function(e){D=e}(t),r(n,i))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:s,parentEffectId:n,label:i,effect:t}),u.cancel=a.t,r.cancel=function(){o||(o=!0,u.cancel(),u.cancel=a.t,e.sagaMonitor&&e.sagaMonitor.effectCancelled(s))},c(t,s,u)}}function H(e,t){var n=e.channel,r=void 0===n?A():n,i=e.dispatch,o=e.getState,u=e.context,l=void 0===u?{}:u,c=e.sagaMonitor,f=e.effectMiddlewares,h=e.onError,d=void 0===h?a.B:h;for(var v=arguments.length,m=new Array(v>2?v-2:0),g=2;g<v;g++)m[g-2]=arguments[g];var y=t.apply(void 0,m);var b,x=P();if(c&&(c.rootSagaStarted=c.rootSagaStarted||a.t,c.effectTriggered=c.effectTriggered||a.t,c.effectResolved=c.effectResolved||a.t,c.effectRejected=c.effectRejected||a.t,c.effectCancelled=c.effectCancelled||a.t,c.actionDispatched=c.actionDispatched||a.t,c.rootSagaStarted({effectId:x,saga:t,args:m})),f){var _=s.qC.apply(void 0,f);b=function(e){return function(t,n,r){return _((function(t){return e(t,n,r)}))(t)}}}else b=a.E;var w={channel:r,dispatch:(0,a.D)(i),getState:o,sagaMonitor:c,onError:d,finalizeRunEffect:b};return p((function(){var e=Z(w,y,l,x,(0,a.j)(t),!0,void 0);return c&&c.effectResolved(x,e),e}))}var G=function(e){var t,n=void 0===e?{}:e,r=n.context,o=void 0===r?{}:r,s=n.channel,u=void 0===s?A():s,l=n.sagaMonitor,c=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,["context","channel","sagaMonitor"]);function f(e){var n=e.getState,r=e.dispatch;return t=H.bind(null,(0,i.Z)({},c,{context:o,channel:u,dispatch:r,getState:n,sagaMonitor:l})),function(e){return function(t){l&&l.actionDispatched&&l.actionDispatched(t);var n=e(t);return u.put(t),n}}}return f.run=function(){return t.apply(void 0,arguments)},f.setContext=function(e){(0,a.p)(o,e)},f},W=G},26381:function(e,t,n){"use strict";n.d(t,{RE:function(){return i.N},gz:function(){return i.Y},Cs:function(){return i.a1},ib:function(){return c}});var r=n(64674),i=n(68030),o=function(e){return{done:!0,value:e}},a={};function s(e){return(0,r.CE)(e)?"channel":(0,r.eR)(e)?String(e):(0,r.Yl)(e)?e.name:String(e)}function u(e,t,n){var r,s,u,l=t;function c(t,n){if(l===a)return o(t);if(n&&!s)throw l=a,n;r&&r(t);var i=n?e[s](n):e[l]();return l=i.nextState,u=i.effect,r=i.stateUpdater,s=i.errorState,l===a?o(t):u}return(0,i.q)(c,(function(e){return c(null,e)}),n)}function l(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var a,l={done:!1,value:(0,i.K)(e)},c=function(e){return{done:!1,value:i.L.apply(void 0,[t].concat(r,[e]))}},f=function(e){return a=e};return u({q1:function(){return{nextState:"q2",effect:l,stateUpdater:f}},q2:function(){return{nextState:"q1",effect:c(a)}}},"q1","takeEvery("+s(e)+", "+t.name+")")}function c(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return i.L.apply(void 0,[l,e,t].concat(r))}},61640:function(e,t){"use strict";function n(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var r=n();r.withExtraArgument=n,t.Z=r},37936:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}n.d(t,{md:function(){return p},UY:function(){return h},qC:function(){return d},MT:function(){return f}});var s="function"===typeof Symbol&&Symbol.observable||"@@observable",u=function(){return Math.random().toString(36).substring(7).split("").join(".")},l={INIT:"@@redux/INIT"+u(),REPLACE:"@@redux/REPLACE"+u(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+u()}};function c(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function f(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(a(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(a(1));return n(f)(e,t)}if("function"!==typeof e)throw new Error(a(2));var i=e,o=t,u=[],h=u,d=!1;function p(){h===u&&(h=u.slice())}function v(){if(d)throw new Error(a(3));return o}function m(e){if("function"!==typeof e)throw new Error(a(4));if(d)throw new Error(a(5));var t=!0;return p(),h.push(e),function(){if(t){if(d)throw new Error(a(6));t=!1,p();var n=h.indexOf(e);h.splice(n,1),u=null}}}function g(e){if(!c(e))throw new Error(a(7));if("undefined"===typeof e.type)throw new Error(a(8));if(d)throw new Error(a(9));try{d=!0,o=i(o,e)}finally{d=!1}for(var t=u=h,n=0;n<t.length;n++){(0,t[n])()}return e}function y(e){if("function"!==typeof e)throw new Error(a(10));i=e,g({type:l.REPLACE})}function b(){var e,t=m;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(a(11));function n(){e.next&&e.next(v())}return n(),{unsubscribe:t(n)}}})[s]=function(){return this},e}return g({type:l.INIT}),(r={dispatch:g,subscribe:m,getState:v,replaceReducer:y})[s]=b,r}function h(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var o,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:l.INIT}))throw new Error(a(12));if("undefined"===typeof n(void 0,{type:l.PROBE_UNKNOWN_ACTION()}))throw new Error(a(13))}))}(n)}catch(u){o=u}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},u=0;u<s.length;u++){var l=s[u],c=n[l],f=e[l],h=c(f,t);if("undefined"===typeof h){t&&t.type;throw new Error(a(14))}i[l]=h,r=r||h!==f}return(r=r||s.length!==Object.keys(e).length)?i:e}}function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(a(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},s=t.map((function(e){return e(i)}));return r=d.apply(void 0,s)(n.dispatch),o(o({},n),{},{dispatch:r})}}}},62946:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=function(e,t,n){var r=f;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=c(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function g(){}function y(){}var b={};u(b,o,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(M([])));_&&_!==n&&r.call(_,o)&&(b=_);var w=y.prototype=m.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function k(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=c(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function M(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:t,done:!0}}return g.prototype=y,u(w,"constructor",y),u(y,"constructor",g),g.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(E.prototype),u(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new E(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(w),u(w,s,"Generator"),u(w,o,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},40699:function(e,t,n){"use strict";n.r(t);var r=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),i="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,o="undefined"!==typeof n.g&&n.g.Math===Math?n.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),a="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var s=["top","right","bottom","left","width","height","size","weight"],u="undefined"!==typeof MutationObserver,l=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&u()}function s(){a(o)}function u(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,t);i=e}return u}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;s.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),c=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},f=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||o},h=y(0,0,0,0);function d(e){return parseFloat(e)||0}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+d(e["border-"+n+"-width"])}),0)}function v(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return h;var r=f(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=d(o)}return t}(r),o=i.left+i.right,a=i.top+i.bottom,s=d(r.width),u=d(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=p(r,"left","right")+o),Math.round(u+a)!==n&&(u-=p(r,"top","bottom")+a)),!function(e){return e===f(e).document.documentElement}(e)){var l=Math.round(s+o)-t,c=Math.round(u+a)-n;1!==Math.abs(l)&&(s-=l),1!==Math.abs(c)&&(u-=c)}return y(i.left,i.top,s,u)}var m="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof f(e).SVGGraphicsElement}:function(e){return e instanceof f(e).SVGElement&&"function"===typeof e.getBBox};function g(e){return i?m(e)?function(e){var t=e.getBBox();return y(0,0,t.width,t.height)}(e):v(e):h}function y(e,t,n,r){return{x:e,y:t,width:n,height:r}}var b=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=g(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),x=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return c(a,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),a}(t);c(this,{target:e,contentRect:n})},_=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new b(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new x(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),w="undefined"!==typeof WeakMap?new WeakMap:new r,S=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=l.getInstance(),r=new _(t,n,this);w.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){S.prototype[e]=function(){var t;return(t=w.get(this))[e].apply(t,arguments)}}));var E="undefined"!==typeof o.ResizeObserver?o.ResizeObserver:S;t.default=E},64855:function(e,t){"use strict";var n,r,i,o;if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,c=null,f=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==l?setTimeout(n,0,e):(l=e,setTimeout(f,0))},r=function(e,t){c=setTimeout(e,t)},i=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,g=-1,y=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,_=x.port2;x.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();b=e+y;try{m(!0,e)?_.postMessage(null):(v=!1,m=null)}catch(n){throw _.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,_.postMessage(null))},r=function(e,n){g=h((function(){e(t.unstable_now())}),n)},i=function(){d(g),g=-1}}function w(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<k(i,t)))break e;e[r]=t,e[n]=i,n=r}}function S(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>k(a,n))void 0!==u&&0>k(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>k(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function k(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var O=[],A=[],C=1,M=null,T=3,P=!1,R=!1,I=!1;function L(e){for(var t=S(A);null!==t;){if(null===t.callback)E(A);else{if(!(t.startTime<=e))break;E(A),t.sortIndex=t.expirationTime,w(O,t)}t=S(A)}}function N(e){if(I=!1,L(e),!R)if(null!==S(O))R=!0,n(j);else{var t=S(A);null!==t&&r(N,t.startTime-e)}}function j(e,n){R=!1,I&&(I=!1,i()),P=!0;var o=T;try{for(L(n),M=S(O);null!==M&&(!(M.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=M.callback;if("function"===typeof a){M.callback=null,T=M.priorityLevel;var s=a(M.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?M.callback=s:M===S(O)&&E(O),L(n)}else E(O);M=S(O)}if(null!==M)var u=!0;else{var l=S(A);null!==l&&r(N,l.startTime-n),u=!1}return u}finally{M=null,T=o,P=!1}}var D=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||P||(R=!0,n(j))},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return S(O)},t.unstable_next=function(e){switch(T){case 1:case 2:case 3:var t=3;break;default:t=T}var n=T;T=t;try{return e()}finally{T=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=D,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=T;T=e;try{return t()}finally{T=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:C++,callback:o,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(e.sortIndex=a,w(A,e),null===S(O)&&e===S(A)&&(I?i():I=!0,r(N,a-s))):(e.sortIndex=u,w(O,e),R||P||(R=!0,n(j))),e},t.unstable_wrapCallback=function(e){var t=T;return function(){var n=T;T=t;try{return e.apply(this,arguments)}finally{T=n}}}},93081:function(e,t,n){"use strict";e.exports=n(64855)},41174:function(e,t,n){!function(e,t){"use strict";if(!e.setImmediate){var n,r=1,i={},o=!1,a=e.document,s=Object.getPrototypeOf&&Object.getPrototypeOf(e);s=s&&s.setTimeout?s:e,"[object process]"==={}.toString.call(e.process)?n=function(e){process.nextTick((function(){l(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&l(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),n=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},n=function(t){e.port2.postMessage(t)}}():a&&"onreadystatechange"in a.createElement("script")?function(){var e=a.documentElement;n=function(t){var n=a.createElement("script");n.onreadystatechange=function(){l(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():n=function(e){setTimeout(l,0,e)},s.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),o=0;o<t.length;o++)t[o]=arguments[o+1];var a={callback:e,args:t};return i[r]=a,n(r),r++},s.clearImmediate=u}function u(e){delete i[e]}function l(e){if(o)setTimeout(l,0,e);else{var t=i[e];if(t){o=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{u(e),o=!1}}}}}("undefined"===typeof self?"undefined"===typeof n.g?this:n.g:self)},2147:function(e,t){function n(e,t,n){this.f=e,this.once=t,this.priority=n}function r(){this.handlers=[]}function i(e,t){for(var n=0;n<e.handlers.length&&!(e.handlers[n].priority<t.priority);n++);e.handlers=e.handlers.slice(0,n).concat(t).concat(e.handlers.slice(n))}function o(){r.call(this)}function a(){r.call(this)}function s(){r.call(this)}t.w0=r,r.prototype.handlersForDispatch=function(){for(var e=this.handlers,t=null,n=e.length-1;n>=0;n--)e[n].once&&(t||(t=e.slice()),t.splice(n,1));return t&&(this.handlers=t),e},r.prototype.add=function(e,t){i(this,new n(e,!1,t||0))},r.prototype.addOnce=function(e,t){i(this,new n(e,!0,t||0))},r.prototype.remove=function(e){for(var t=0;t<this.handlers.length;t++)if(this.handlers[t].f==e)return void(this.handlers=this.handlers.slice(0,t).concat(this.handlers.slice(t+1)))},r.prototype.hasHandler=function(){return this.handlers.length>0},r.prototype.dispatch=function(){for(var e=this.handlersForDispatch(),t=0;t<e.length;t++)e[t].f.apply(null,arguments)},t.he=o,o.prototype=new r,o.prototype.dispatch=function(e){for(var t=this.handlersForDispatch(),n=0;n<t.length;n++)e=t[n].f(e);return e},a.prototype=new r,a.prototype.dispatch=function(){for(var e=this.handlersForDispatch(),t=0;t<e.length;t++){var n=e[t].f.apply(null,arguments);if(n)return n}},t.ZN=s,s.prototype=new r,s.prototype.dispatch=function(e){for(var t=this.handlersForDispatch(),n=0;n<t.length;n++)if(t[n].f(e)||e.defaultPrevented)return!0;return!1}},48977:function(e,t,n){"use strict";e.exports=n(39291)},10824:function(e){"use strict";var t=2*Math.PI;function n(e,t,n,r){var i=e*n+t*r;return i>1&&(i=1),i<-1&&(i=-1),(e*r-t*n<0?-1:1)*Math.acos(i)}function r(e,t){var n=4/3*Math.tan(t/4),r=Math.cos(e),i=Math.sin(e),o=Math.cos(e+t),a=Math.sin(e+t);return[r,i,r-i*n,i+r*n,o+a*n,a-o*n,o,a]}e.exports=function(e,i,o,a,s,u,l,c,f){var h=Math.sin(f*t/360),d=Math.cos(f*t/360),p=d*(e-o)/2+h*(i-a)/2,v=-h*(e-o)/2+d*(i-a)/2;if(0===p&&0===v)return[];if(0===l||0===c)return[];l=Math.abs(l),c=Math.abs(c);var m=p*p/(l*l)+v*v/(c*c);m>1&&(l*=Math.sqrt(m),c*=Math.sqrt(m));var g=function(e,r,i,o,a,s,u,l,c,f){var h=f*(e-i)/2+c*(r-o)/2,d=-c*(e-i)/2+f*(r-o)/2,p=u*u,v=l*l,m=h*h,g=d*d,y=p*v-p*g-v*m;y<0&&(y=0),y/=p*g+v*m;var b=(y=Math.sqrt(y)*(a===s?-1:1))*u/l*d,x=y*-l/u*h,_=f*b-c*x+(e+i)/2,w=c*b+f*x+(r+o)/2,S=(h-b)/u,E=(d-x)/l,k=(-h-b)/u,O=(-d-x)/l,A=n(1,0,S,E),C=n(S,E,k,O);return 0===s&&C>0&&(C-=t),1===s&&C<0&&(C+=t),[_,w,A,C]}(e,i,o,a,s,u,l,c,h,d),y=[],b=g[2],x=g[3],_=Math.max(Math.ceil(Math.abs(x)/(t/4)),1);x/=_;for(var w=0;w<_;w++)y.push(r(b,x)),b+=x;return y.map((function(e){for(var t=0;t<e.length;t+=2){var n=e[t+0],r=e[t+1],i=d*(n*=l)-h*(r*=c),o=h*n+d*r;e[t+0]=i+g[0],e[t+1]=o+g[1]}return e}))}},49407:function(e){"use strict";var t=1e-10,n=Math.PI/180;function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);this.rx=e,this.ry=t,this.ax=n}r.prototype.transform=function(e){var r=Math.cos(this.ax*n),i=Math.sin(this.ax*n),o=[this.rx*(e[0]*r+e[2]*i),this.rx*(e[1]*r+e[3]*i),this.ry*(-e[0]*i+e[2]*r),this.ry*(-e[1]*i+e[3]*r)],a=o[0]*o[0]+o[2]*o[2],s=o[1]*o[1]+o[3]*o[3],u=((o[0]-o[3])*(o[0]-o[3])+(o[2]+o[1])*(o[2]+o[1]))*((o[0]+o[3])*(o[0]+o[3])+(o[2]-o[1])*(o[2]-o[1])),l=(a+s)/2;if(u<t*l)return this.rx=this.ry=Math.sqrt(l),this.ax=0,this;var c=o[0]*o[1]+o[2]*o[3],f=l+(u=Math.sqrt(u))/2,h=l-u/2;return this.ax=Math.abs(c)<t&&Math.abs(f-s)<t?90:180*Math.atan(Math.abs(c)>Math.abs(f-s)?(f-a)/c:c/(f-s))/Math.PI,this.ax>=0?(this.rx=Math.sqrt(f),this.ry=Math.sqrt(h)):(this.ax+=90,this.rx=Math.sqrt(h),this.ry=Math.sqrt(f)),this},r.prototype.isDegenerate=function(){return this.rx<t*this.ry||this.ry<t*this.rx},e.exports=r},53766:function(e){"use strict";function t(){if(!(this instanceof t))return new t;this.queue=[],this.cache=null}t.prototype.matrix=function(e){return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]||(this.cache=null,this.queue.push(e)),this},t.prototype.translate=function(e,t){return 0===e&&0===t||(this.cache=null,this.queue.push([1,0,0,1,e,t])),this},t.prototype.scale=function(e,t){return 1===e&&1===t||(this.cache=null,this.queue.push([e,0,0,t,0,0])),this},t.prototype.rotate=function(e,t,n){var r,i,o;return 0!==e&&(this.translate(t,n),r=e*Math.PI/180,i=Math.cos(r),o=Math.sin(r),this.queue.push([i,o,-o,i,0,0]),this.cache=null,this.translate(-t,-n)),this},t.prototype.skewX=function(e){return 0!==e&&(this.cache=null,this.queue.push([1,0,Math.tan(e*Math.PI/180),1,0,0])),this},t.prototype.skewY=function(e){return 0!==e&&(this.cache=null,this.queue.push([1,Math.tan(e*Math.PI/180),0,1,0,0])),this},t.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var e=1;e<this.queue.length;e++)this.cache=(t=this.cache,n=this.queue[e],[t[0]*n[0]+t[2]*n[1],t[1]*n[0]+t[3]*n[1],t[0]*n[2]+t[2]*n[3],t[1]*n[2]+t[3]*n[3],t[0]*n[4]+t[2]*n[5]+t[4],t[1]*n[4]+t[3]*n[5]+t[5]]);var t,n;return this.cache},t.prototype.calc=function(e,t,n){var r;return this.queue.length?(this.cache||(this.cache=this.toArray()),[e*(r=this.cache)[0]+t*r[2]+(n?0:r[4]),e*r[1]+t*r[3]+(n?0:r[5])]):[e,t]},e.exports=t},93205:function(e){"use strict";var t={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function r(e){return e>=48&&e<=57}function i(e){return e>=48&&e<=57||43===e||45===e||46===e}function o(e){this.index=0,this.path=e,this.max=e.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function a(e){for(;e.index<e.max&&(10===(t=e.path.charCodeAt(e.index))||13===t||8232===t||8233===t||32===t||9===t||11===t||12===t||160===t||t>=5760&&n.indexOf(t)>=0);)e.index++;var t}function s(e){var t=e.path.charCodeAt(e.index);return 48===t?(e.param=0,void e.index++):49===t?(e.param=1,void e.index++):void(e.err="SvgPath: arc flag can be 0 or 1 only (at pos "+e.index+")")}function u(e){var t,n=e.index,i=n,o=e.max,a=!1,s=!1,u=!1,l=!1;if(i>=o)e.err="SvgPath: missed param (at pos "+i+")";else if(43!==(t=e.path.charCodeAt(i))&&45!==t||(t=++i<o?e.path.charCodeAt(i):0),r(t)||46===t){if(46!==t){if(a=48===t,t=++i<o?e.path.charCodeAt(i):0,a&&i<o&&t&&r(t))return void(e.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+n+")");for(;i<o&&r(e.path.charCodeAt(i));)i++,s=!0;t=i<o?e.path.charCodeAt(i):0}if(46===t){for(l=!0,i++;r(e.path.charCodeAt(i));)i++,u=!0;t=i<o?e.path.charCodeAt(i):0}if(101===t||69===t){if(l&&!s&&!u)return void(e.err="SvgPath: invalid float exponent (at pos "+i+")");if(43!==(t=++i<o?e.path.charCodeAt(i):0)&&45!==t||i++,!(i<o&&r(e.path.charCodeAt(i))))return void(e.err="SvgPath: invalid float exponent (at pos "+i+")");for(;i<o&&r(e.path.charCodeAt(i));)i++}e.index=i,e.param=parseFloat(e.path.slice(n,i))+0}else e.err="SvgPath: param should start with 0..9 or `.` (at pos "+i+")"}function l(e){var n,r;r=(n=e.path[e.segmentStart]).toLowerCase();var i=e.data;if("m"===r&&i.length>2&&(e.result.push([n,i[0],i[1]]),i=i.slice(2),r="l",n="m"===n?"l":"L"),"r"===r)e.result.push([n].concat(i));else for(;i.length>=t[r]&&(e.result.push([n].concat(i.splice(0,t[r]))),t[r]););}function c(e){var n,r,o,c,f,h=e.max;if(e.segmentStart=e.index,n=e.path.charCodeAt(e.index),r=97===(32|n),function(e){switch(32|e){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(n))if(c=t[e.path[e.index].toLowerCase()],e.index++,a(e),e.data=[],c){for(o=!1;;){for(f=c;f>0;f--){if(!r||3!==f&&4!==f?u(e):s(e),e.err.length)return;e.data.push(e.param),a(e),o=!1,e.index<h&&44===e.path.charCodeAt(e.index)&&(e.index++,a(e),o=!0)}if(!o){if(e.index>=e.max)break;if(!i(e.path.charCodeAt(e.index)))break}}l(e)}else l(e);else e.err="SvgPath: bad command "+e.path[e.index]+" (at pos "+e.index+")"}e.exports=function(e){var t=new o(e),n=t.max;for(a(t);t.index<n&&!t.err.length;)c(t);return t.err.length?t.result=[]:t.result.length&&("mM".indexOf(t.result[0][0])<0?(t.err="SvgPath: string should start with `M` or `m`",t.result=[]):t.result[0][0]="M"),{err:t.err,segments:t.result}}},39291:function(e,t,n){"use strict";var r=n(93205),i=n(24262),o=n(53766),a=n(10824),s=n(49407);function u(e){if(!(this instanceof u))return new u(e);var t=r(e);this.segments=t.segments,this.err=t.err,this.__stack=[]}u.from=function(e){if("string"===typeof e)return new u(e);if(e instanceof u){var t=new u("");return t.err=e.err,t.segments=e.segments.map((function(e){return e.slice()})),t.__stack=e.__stack.map((function(e){return o().matrix(e.toArray())})),t}throw new Error("SvgPath.from: invalid param type "+e)},u.prototype.__matrix=function(e){var t,n=this;e.queue.length&&this.iterate((function(r,i,o,a){var u,l,c,f;switch(r[0]){case"v":l=0===(u=e.calc(0,r[1],!0))[0]?["v",u[1]]:["l",u[0],u[1]];break;case"V":l=(u=e.calc(o,r[1],!1))[0]===e.calc(o,a,!1)[0]?["V",u[1]]:["L",u[0],u[1]];break;case"h":l=0===(u=e.calc(r[1],0,!0))[1]?["h",u[0]]:["l",u[0],u[1]];break;case"H":l=(u=e.calc(r[1],a,!1))[1]===e.calc(o,a,!1)[1]?["H",u[0]]:["L",u[0],u[1]];break;case"a":case"A":var h=e.toArray(),d=s(r[1],r[2],r[3]).transform(h);if(h[0]*h[3]-h[1]*h[2]<0&&(r[5]=r[5]?"0":"1"),u=e.calc(r[6],r[7],"a"===r[0]),"A"===r[0]&&r[6]===o&&r[7]===a||"a"===r[0]&&0===r[6]&&0===r[7]){l=["a"===r[0]?"l":"L",u[0],u[1]];break}l=d.isDegenerate()?["a"===r[0]?"l":"L",u[0],u[1]]:[r[0],d.rx,d.ry,d.ax,r[4],r[5],u[0],u[1]];break;case"m":f=i>0,l=["m",(u=e.calc(r[1],r[2],f))[0],u[1]];break;default:for(l=[c=r[0]],f=c.toLowerCase()===c,t=1;t<r.length;t+=2)u=e.calc(r[t],r[t+1],f),l.push(u[0],u[1])}n.segments[i]=l}),!0)},u.prototype.__evaluateStack=function(){var e,t;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(e=o(),t=this.__stack.length;--t>=0;)e.matrix(this.__stack[t].toArray());this.__matrix(e),this.__stack=[]}},u.prototype.toString=function(){var e="",t="",n=!1;this.__evaluateStack();for(var r=0,i=this.segments.length;r<i;r++){var o=this.segments[r],a=o[0];a!==t||"m"===a||"M"===a?("m"===a&&"z"===t&&(e+=" "),e+=a,n=!1):n=!0;for(var s=1;s<o.length;s++){var u=o[s];1===s?n&&u>=0&&(e+=" "):u>=0&&(e+=" "),e+=u}t=a}return e},u.prototype.translate=function(e,t){return this.__stack.push(o().translate(e,t||0)),this},u.prototype.scale=function(e,t){return this.__stack.push(o().scale(e,t||0===t?t:e)),this},u.prototype.rotate=function(e,t,n){return this.__stack.push(o().rotate(e,t||0,n||0)),this},u.prototype.skewX=function(e){return this.__stack.push(o().skewX(e)),this},u.prototype.skewY=function(e){return this.__stack.push(o().skewY(e)),this},u.prototype.matrix=function(e){return this.__stack.push(o().matrix(e)),this},u.prototype.transform=function(e){return e.trim()?(this.__stack.push(i(e)),this):this},u.prototype.round=function(e){var t,n=0,r=0,i=0,o=0;return e=e||0,this.__evaluateStack(),this.segments.forEach((function(a){var s=a[0].toLowerCase()===a[0];switch(a[0]){case"H":case"h":return s&&(a[1]+=i),i=a[1]-a[1].toFixed(e),void(a[1]=+a[1].toFixed(e));case"V":case"v":return s&&(a[1]+=o),o=a[1]-a[1].toFixed(e),void(a[1]=+a[1].toFixed(e));case"Z":case"z":return i=n,void(o=r);case"M":case"m":return s&&(a[1]+=i,a[2]+=o),i=a[1]-a[1].toFixed(e),o=a[2]-a[2].toFixed(e),n=i,r=o,a[1]=+a[1].toFixed(e),void(a[2]=+a[2].toFixed(e));case"A":case"a":return s&&(a[6]+=i,a[7]+=o),i=a[6]-a[6].toFixed(e),o=a[7]-a[7].toFixed(e),a[1]=+a[1].toFixed(e),a[2]=+a[2].toFixed(e),a[3]=+a[3].toFixed(e+2),a[6]=+a[6].toFixed(e),void(a[7]=+a[7].toFixed(e));default:return t=a.length,s&&(a[t-2]+=i,a[t-1]+=o),i=a[t-2]-a[t-2].toFixed(e),o=a[t-1]-a[t-1].toFixed(e),void a.forEach((function(t,n){n&&(a[n]=+a[n].toFixed(e))}))}})),this},u.prototype.iterate=function(e,t){var n,r,i,o=this.segments,a={},s=!1,u=0,l=0,c=0,f=0;if(t||this.__evaluateStack(),o.forEach((function(t,n){var r=e(t,n,u,l);Array.isArray(r)&&(a[n]=r,s=!0);var i=t[0]===t[0].toLowerCase();switch(t[0]){case"m":case"M":return u=t[1]+(i?u:0),l=t[2]+(i?l:0),c=u,void(f=l);case"h":case"H":return void(u=t[1]+(i?u:0));case"v":case"V":return void(l=t[1]+(i?l:0));case"z":case"Z":return u=c,void(l=f);default:u=t[t.length-2]+(i?u:0),l=t[t.length-1]+(i?l:0)}})),!s)return this;for(i=[],n=0;n<o.length;n++)if("undefined"!==typeof a[n])for(r=0;r<a[n].length;r++)i.push(a[n][r]);else i.push(o[n]);return this.segments=i,this},u.prototype.abs=function(){return this.iterate((function(e,t,n,r){var i,o=e[0],a=o.toUpperCase();if(o!==a)switch(e[0]=a,o){case"v":return void(e[1]+=r);case"a":return e[6]+=n,void(e[7]+=r);default:for(i=1;i<e.length;i++)e[i]+=i%2?n:r}}),!0),this},u.prototype.rel=function(){return this.iterate((function(e,t,n,r){var i,o=e[0],a=o.toLowerCase();if(o!==a&&(0!==t||"M"!==o))switch(e[0]=a,o){case"V":return void(e[1]-=r);case"A":return e[6]-=n,void(e[7]-=r);default:for(i=1;i<e.length;i++)e[i]-=i%2?n:r}}),!0),this},u.prototype.unarc=function(){return this.iterate((function(e,t,n,r){var i,o,s,u=[],l=e[0];return"A"!==l&&"a"!==l?null:("a"===l?(o=n+e[6],s=r+e[7]):(o=e[6],s=e[7]),0===(i=a(n,r,o,s,e[4],e[5],e[1],e[2],e[3])).length?[["a"===e[0]?"l":"L",e[6],e[7]]]:(i.forEach((function(e){u.push(["C",e[2],e[3],e[4],e[5],e[6],e[7]])})),u))})),this},u.prototype.unshort=function(){var e,t,n,r,i,o=this.segments;return this.iterate((function(a,s,u,l){var c,f=a[0],h=f.toUpperCase();s&&("T"===h?(c="t"===f,"Q"===(n=o[s-1])[0]?(e=n[1]-u,t=n[2]-l):"q"===n[0]?(e=n[1]-n[3],t=n[2]-n[4]):(e=0,t=0),r=-e,i=-t,c||(r+=u,i+=l),o[s]=[c?"q":"Q",r,i,a[1],a[2]]):"S"===h&&(c="s"===f,"C"===(n=o[s-1])[0]?(e=n[3]-u,t=n[4]-l):"c"===n[0]?(e=n[3]-n[5],t=n[4]-n[6]):(e=0,t=0),r=-e,i=-t,c||(r+=u,i+=l),o[s]=[c?"c":"C",r,i,a[1],a[2],a[3],a[4]]))})),this},e.exports=u},24262:function(e,t,n){"use strict";var r=n(53766),i={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},o=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,a=/[\s,]+/;e.exports=function(e){var t,n,s=new r;return e.split(o).forEach((function(e){if(e.length)if("undefined"===typeof i[e])switch(n=e.split(a).map((function(e){return+e||0})),t){case"matrix":return void(6===n.length&&s.matrix(n));case"scale":return void(1===n.length?s.scale(n[0],n[0]):2===n.length&&s.scale(n[0],n[1]));case"rotate":return void(1===n.length?s.rotate(n[0],0,0):3===n.length&&s.rotate(n[0],n[1],n[2]));case"translate":return void(1===n.length?s.translate(n[0],0):2===n.length&&s.translate(n[0],n[1]));case"skewX":return void(1===n.length&&s.skewX(n[0]));case"skewY":return void(1===n.length&&s.skewY(n[0]))}else t=e})),s}},58913:function(e,t,n){var r;!function(i,o){"use strict";var a="function",s="undefined",u="object",l="string",c="model",f="name",h="type",d="vendor",p="version",v="architecture",m="console",g="mobile",y="tablet",b="smarttv",x="wearable",_="embedded",w="Amazon",S="Apple",E="ASUS",k="BlackBerry",O="Firefox",A="Google",C="Huawei",M="LG",T="Microsoft",P="Motorola",R="Opera",I="Samsung",L="Sony",N="Xiaomi",j="Zebra",D="Facebook",B=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},z=function(e,t){return typeof e===l&&-1!==F(t).indexOf(F(e))},F=function(e){return e.toLowerCase()},V=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof t===s?e:e.substring(0,255)},U=function(e,t){for(var n,r,i,s,l,c,f=0;f<t.length&&!l;){var h=t[f],d=t[f+1];for(n=r=0;n<h.length&&!l;)if(l=h[n++].exec(e))for(i=0;i<d.length;i++)c=l[++r],typeof(s=d[i])===u&&s.length>0?2===s.length?typeof s[1]==a?this[s[0]]=s[1].call(this,c):this[s[0]]=s[1]:3===s.length?typeof s[1]!==a||s[1].exec&&s[1].test?this[s[0]]=c?c.replace(s[1],s[2]):o:this[s[0]]=c?s[1].call(this,c,s[2]):o:4===s.length&&(this[s[0]]=c?s[3].call(this,c.replace(s[1],s[2])):o):this[s]=c||o;f+=2}},Z=function(e,t){for(var n in t)if(typeof t[n]===u&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(z(t[n][r],e))return"?"===n?o:n}else if(z(t[n],e))return"?"===n?o:n;return e},H={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},G={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[f,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[f,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[f,p],[/opios[\/ ]+([\w\.]+)/i],[p,[f,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[p,[f,R]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[f,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[f,"UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],[p,[f,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[f,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[f,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[f,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[f,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[f,/(.+)/,"$1 Secure Browser"],p],[/\bfocus\/([\w\.]+)/i],[p,[f,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[p,[f,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[f,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[f,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[f,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[f,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[p,[f,O]],[/\bqihu|(qi?ho?o?|360)browser/i],[[f,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[f,/(.+)/,"$1 Browser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[f,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[f,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[f],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[f,D],p],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[f,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[f,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[f,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[f,"Chrome WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[f,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[f,p],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[p,[f,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[p,f],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[f,[p,Z,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[f,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[f,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[f,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[f,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,F]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows (ce|mobile); ppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[v,/ower/,"",F]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,F]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[d,I],[h,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[d,I],[h,g]],[/\((ip(?:hone|od)[\w ]*);/i],[c,[d,S],[h,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[d,S],[h,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[d,C],[h,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[c,[d,C],[h,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[d,N],[h,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[d,N],[h,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[d,"OPPO"],[h,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[d,"Vivo"],[h,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[c,[d,"Realme"],[h,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[d,P],[h,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[d,P],[h,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[d,M],[h,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[d,M],[h,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[d,"Lenovo"],[h,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[d,"Nokia"],[h,g]],[/(pixel c)\b/i],[c,[d,A],[h,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[d,A],[h,g]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[d,L],[h,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[d,L],[h,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[d,"OnePlus"],[h,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[d,w],[h,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[d,w],[h,g]],[/(playbook);[-\w\),; ]+(rim)/i],[c,d,[h,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[d,k],[h,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[d,E],[h,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[d,E],[h,g]],[/(nexus 9)/i],[c,[d,"HTC"],[h,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[d,[c,/_/g," "],[h,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[d,"Acer"],[h,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[d,"Meizu"],[h,g]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[d,"Sharp"],[h,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,c,[h,g]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,c,[h,y]],[/(surface duo)/i],[c,[d,T],[h,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[d,"Fairphone"],[h,g]],[/(u304aa)/i],[c,[d,"AT&T"],[h,g]],[/\bsie-(\w*)/i],[c,[d,"Siemens"],[h,g]],[/\b(rct\w+) b/i],[c,[d,"RCA"],[h,y]],[/\b(venue[\d ]{2,7}) b/i],[c,[d,"Dell"],[h,y]],[/\b(q(?:mv|ta)\w+) b/i],[c,[d,"Verizon"],[h,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[d,"Barnes & Noble"],[h,y]],[/\b(tm\d{3}\w+) b/i],[c,[d,"NuVision"],[h,y]],[/\b(k88) b/i],[c,[d,"ZTE"],[h,y]],[/\b(nx\d{3}j) b/i],[c,[d,"ZTE"],[h,g]],[/\b(gen\d{3}) b.+49h/i],[c,[d,"Swiss"],[h,g]],[/\b(zur\d{3}) b/i],[c,[d,"Swiss"],[h,y]],[/\b((zeki)?tb.*\b) b/i],[c,[d,"Zeki"],[h,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],c,[h,y]],[/\b(ns-?\w{0,9}) b/i],[c,[d,"Insignia"],[h,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[d,"NextBook"],[h,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],c,[h,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],c,[h,g]],[/\b(ph-1) /i],[c,[d,"Essential"],[h,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[d,"Envizen"],[h,y]],[/\b(trio[-\w\. ]+) b/i],[c,[d,"MachSpeed"],[h,y]],[/\btu_(1491) b/i],[c,[d,"Rotor"],[h,y]],[/(shield[\w ]+) b/i],[c,[d,"Nvidia"],[h,y]],[/(sprint) (\w+)/i],[d,c,[h,g]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[d,T],[h,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[d,j],[h,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[d,j],[h,g]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,c,[h,m]],[/droid.+; (shield) bui/i],[c,[d,"Nvidia"],[h,m]],[/(playstation [345portablevi]+)/i],[c,[d,L],[h,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[d,T],[h,m]],[/smart-tv.+(samsung)/i],[d,[h,b]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[d,I],[h,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,M],[h,b]],[/(apple) ?tv/i],[d,[c,"Apple TV"],[h,b]],[/crkey/i],[[c,"Chromecast"],[d,A],[h,b]],[/droid.+aft(\w)( bui|\))/i],[c,[d,w],[h,b]],[/\(dtv[\);].+(aquos)/i],[c,[d,"Sharp"],[h,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[d,V],[c,V],[h,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,b]],[/((pebble))app/i],[d,c,[h,x]],[/droid.+; (glass) \d/i],[c,[d,A],[h,x]],[/droid.+; (wt63?0{2,3})\)/i],[c,[d,j],[h,x]],[/(quest( 2)?)/i],[c,[d,D],[h,x]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[h,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[c,[h,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[h,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,y]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[h,g]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[f,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[f,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[f,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,f]],os:[[/microsoft (windows) (vista|xp)/i],[f,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[f,[p,Z,H]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,"Windows"],[p,Z,H]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[f,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[f,"Mac OS"],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[p,f],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[f,p],[/\(bb(10);/i],[p,[f,k]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[f,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[f,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[f,"webOS"]],[/crkey\/([\d\.]+)/i],[p,[f,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[f,"Chromium OS"],p],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[f,p],[/(sunos) ?([\w\.\d]*)/i],[[f,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[f,p]]},W=function e(t,n){if(typeof t===u&&(n=t,t=o),!(this instanceof e))return new e(t,n).getResult();var r=t||(typeof i!==s&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),a=n?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2===0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(G,n):G;return this.getBrowser=function(){var e,t={};return t.name=o,t.version=o,U.call(t,r,a.browser),t.major=typeof(e=t.version)===l?e.replace(/[^\d\.]/g,"").split(".")[0]:o,t},this.getCPU=function(){var e={};return e.architecture=o,U.call(e,r,a.cpu),e},this.getDevice=function(){var e={};return e.vendor=o,e.model=o,e.type=o,U.call(e,r,a.device),e},this.getEngine=function(){var e={};return e.name=o,e.version=o,U.call(e,r,a.engine),e},this.getOS=function(){var e={};return e.name=o,e.version=o,U.call(e,r,a.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===l&&e.length>255?V(e,255):e,this},this.setUA(r),this};W.VERSION="0.7.31",W.BROWSER=B([f,p,"major"]),W.CPU=B([v]),W.DEVICE=B([c,d,h,m,g,b,y,x,_]),W.ENGINE=W.OS=B([f,p]),typeof t!==s?(e.exports&&(t=e.exports=W),t.UAParser=W):n.amdO?(r=function(){return W}.call(t,n,t,e))===o||(e.exports=r):typeof i!==s&&(i.UAParser=W);var q=typeof i!==s&&(i.jQuery||i.Zepto);if(q&&!q.ua){var K=new W;q.ua=K.getResult(),q.ua.get=function(){return K.getUA()},q.ua.set=function(e){K.setUA(e);var t=K.getResult();for(var n in t)q.ua[n]=t[n]}}}("object"===typeof window?window:this)},19776:function(e,t){!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var r=t.length-1,i=1;i<r;++i)t[i]=t[i].slice(1,-1);return t[r]=t[r].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function r(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function o(e){return void 0!==e&&null!==e?e instanceof Array?e:"number"!==typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}function a(e,t){var n=e;if(t)for(var r in t)n[r]=t[r];return n}function s(e){var r="[A-Za-z]",i="[0-9]",o=t(i,"[A-Fa-f]"),a=n(n("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+n("%[89A-Fa-f]"+o+"%"+o+o)+"|"+n("%"+o+o)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",u=t("[\\:\\/\\?\\#\\[\\]\\@]",s),l=e?"[\\uE000-\\uF8FF]":"[]",c=t(r,i,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),f=n(r+t(r,i,"[\\+\\-\\.]")+"*"),h=n(n(a+"|"+t(c,s,"[\\:]"))+"*"),d=(n(n("25[0-5]")+"|"+n("2[0-4]"+i)+"|"+n("1"+i+i)+"|"+n("[1-9]"+i)+"|"+i),n(n("25[0-5]")+"|"+n("2[0-4]"+i)+"|"+n("1"+i+i)+"|"+n("0?[1-9]"+i)+"|0?0?"+i)),p=n(d+"\\."+d+"\\."+d+"\\."+d),v=n(o+"{1,4}"),m=n(n(v+"\\:"+v)+"|"+p),g=n(n(v+"\\:")+"{6}"+m),y=n("\\:\\:"+n(v+"\\:")+"{5}"+m),b=n(n(v)+"?\\:\\:"+n(v+"\\:")+"{4}"+m),x=n(n(n(v+"\\:")+"{0,1}"+v)+"?\\:\\:"+n(v+"\\:")+"{3}"+m),_=n(n(n(v+"\\:")+"{0,2}"+v)+"?\\:\\:"+n(v+"\\:")+"{2}"+m),w=n(n(n(v+"\\:")+"{0,3}"+v)+"?\\:\\:"+v+"\\:"+m),S=n(n(n(v+"\\:")+"{0,4}"+v)+"?\\:\\:"+m),E=n(n(n(v+"\\:")+"{0,5}"+v)+"?\\:\\:"+v),k=n(n(n(v+"\\:")+"{0,6}"+v)+"?\\:\\:"),O=n([g,y,b,x,_,w,S,E,k].join("|")),A=n(n(c+"|"+a)+"+"),C=(n(O+"\\%25"+A),n(O+n("\\%25|\\%(?!"+o+"{2})")+A)),M=n("[vV]"+o+"+\\."+t(c,s,"[\\:]")+"+"),T=n("\\["+n(C+"|"+O+"|"+M)+"\\]"),P=n(n(a+"|"+t(c,s))+"*"),R=n(T+"|"+p+"(?!"+P+")|"+P),I=n(i+"*"),L=n(n(h+"@")+"?"+R+n("\\:"+I)+"?"),N=n(a+"|"+t(c,s,"[\\:\\@]")),j=n(N+"*"),D=n(N+"+"),B=n(n(a+"|"+t(c,s,"[\\@]"))+"+"),z=n(n("\\/"+j)+"*"),F=n("\\/"+n(D+z)+"?"),V=n(B+z),U=n(D+z),Z="(?!"+N+")",H=(n(z+"|"+F+"|"+V+"|"+U+"|"+Z),n(n(N+"|"+t("[\\/\\?]",l))+"*")),G=n(n(N+"|[\\/\\?]")+"*"),W=n(n("\\/\\/"+L+z)+"|"+F+"|"+U+"|"+Z),q=n(f+"\\:"+W+n("\\?"+H)+"?"+n("\\#"+G)+"?"),K=n(n("\\/\\/"+L+z)+"|"+F+"|"+V+"|"+Z),Y=n(K+n("\\?"+H)+"?"+n("\\#"+G)+"?");return n(q+"|"+Y),n(f+"\\:"+W+n("\\?"+H)+"?"),n(n("\\/\\/("+n("("+h+")@")+"?("+R+")"+n("\\:("+I+")")+"?)")+"?("+z+"|"+F+"|"+U+"|"+Z+")"),n("\\?("+H+")"),n("\\#("+G+")"),n(n("\\/\\/("+n("("+h+")@")+"?("+R+")"+n("\\:("+I+")")+"?)")+"?("+z+"|"+F+"|"+V+"|"+Z+")"),n("\\?("+H+")"),n("\\#("+G+")"),n(n("\\/\\/("+n("("+h+")@")+"?("+R+")"+n("\\:("+I+")")+"?)")+"?("+z+"|"+F+"|"+U+"|"+Z+")"),n("\\?("+H+")"),n("\\#("+G+")"),n("("+h+")@"),n("\\:("+I+")"),{NOT_SCHEME:new RegExp(t("[^]",r,i,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",c,s),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",c,s),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",c,s),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",c,s),"g"),NOT_QUERY:new RegExp(t("[^\\%]",c,s,"[\\:\\@\\/\\?]",l),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",c,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",c,s),"g"),UNRESERVED:new RegExp(c,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",c,u),"g"),PCT_ENCODED:new RegExp(a,"g"),IPV4ADDRESS:new RegExp("^("+p+")$"),IPV6ADDRESS:new RegExp("^\\[?("+O+")"+n(n("\\%25|\\%(?!"+o+"{2})")+"("+A+")")+"?\\]?$")}}var u=s(!1),l=s(!0),c=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},h=2147483647,d=36,p=1,v=26,m=38,g=700,y=72,b=128,x="-",_=/^xn--/,w=/[^\0-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=d-p,O=Math.floor,A=String.fromCharCode;function C(e){throw new RangeError(E[e])}function M(e,t){for(var n=[],r=e.length;r--;)n[r]=t(e[r]);return n}function T(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+M((e=e.replace(S,".")).split("."),t).join(".")}function P(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}var R=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:d},I=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},L=function(e,t,n){var r=0;for(e=n?O(e/g):e>>1,e+=O(e/t);e>k*v>>1;r+=d)e=O(e/k);return O(r+(k+1)*e/(e+m))},N=function(e){var t=[],n=e.length,r=0,i=b,o=y,a=e.lastIndexOf(x);a<0&&(a=0);for(var s=0;s<a;++s)e.charCodeAt(s)>=128&&C("not-basic"),t.push(e.charCodeAt(s));for(var u=a>0?a+1:0;u<n;){for(var l=r,c=1,f=d;;f+=d){u>=n&&C("invalid-input");var m=R(e.charCodeAt(u++));(m>=d||m>O((h-r)/c))&&C("overflow"),r+=m*c;var g=f<=o?p:f>=o+v?v:f-o;if(m<g)break;var _=d-g;c>O(h/_)&&C("overflow"),c*=_}var w=t.length+1;o=L(r-l,w,0==l),O(r/w)>h-i&&C("overflow"),i+=O(r/w),r%=w,t.splice(r++,0,i)}return String.fromCodePoint.apply(String,t)},j=function(e){var t=[],n=(e=P(e)).length,r=b,i=0,o=y,a=!0,s=!1,u=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;f<128&&t.push(A(f))}}catch(W){s=!0,u=W}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}var m=t.length,g=m;for(m&&t.push(x);g<n;){var _=h,w=!0,S=!1,E=void 0;try{for(var k,M=e[Symbol.iterator]();!(w=(k=M.next()).done);w=!0){var T=k.value;T>=r&&T<_&&(_=T)}}catch(W){S=!0,E=W}finally{try{!w&&M.return&&M.return()}finally{if(S)throw E}}var R=g+1;_-r>O((h-i)/R)&&C("overflow"),i+=(_-r)*R,r=_;var N=!0,j=!1,D=void 0;try{for(var B,z=e[Symbol.iterator]();!(N=(B=z.next()).done);N=!0){var F=B.value;if(F<r&&++i>h&&C("overflow"),F==r){for(var V=i,U=d;;U+=d){var Z=U<=o?p:U>=o+v?v:U-o;if(V<Z)break;var H=V-Z,G=d-Z;t.push(A(I(Z+H%G,0))),V=O(H/G)}t.push(A(I(V,0))),o=L(i,R,g==m),i=0,++g}}}catch(W){j=!0,D=W}finally{try{!N&&z.return&&z.return()}finally{if(j)throw D}}++i,++r}return t.join("")},D=function(e){return T(e,(function(e){return _.test(e)?N(e.slice(4).toLowerCase()):e}))},B=function(e){return T(e,(function(e){return w.test(e)?"xn--"+j(e):e}))},z={version:"2.1.0",ucs2:{decode:P,encode:function(e){return String.fromCodePoint.apply(String,f(e))}},decode:N,encode:j,toASCII:B,toUnicode:D},F={};function V(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function U(e){for(var t="",n=0,r=e.length;n<r;){var i=parseInt(e.substr(n+1,2),16);if(i<128)t+=String.fromCharCode(i),n+=3;else if(i>=194&&i<224){if(r-n>=6){var o=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&i)<<6|63&o)}else t+=e.substr(n,6);n+=6}else if(i>=224){if(r-n>=9){var a=parseInt(e.substr(n+4,2),16),s=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}else t+=e.substr(n,9);n+=9}else t+=e.substr(n,3),n+=3}return t}function Z(e,t){function n(e){var n=U(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,V).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,V).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,V).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,V).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,V).replace(t.PCT_ENCODED,i)),e}function H(e){return e.replace(/^0*(.*)/,"$1")||"0"}function G(e,t){var n=e.match(t.IPV4ADDRESS)||[],r=c(n,2)[1];return r?r.split(".").map(H).join("."):e}function W(e,t){var n=e.match(t.IPV6ADDRESS)||[],r=c(n,3),i=r[1],o=r[2];if(i){for(var a=i.toLowerCase().split("::").reverse(),s=c(a,2),u=s[0],l=s[1],f=l?l.split(":").map(H):[],h=u.split(":").map(H),d=t.IPV4ADDRESS.test(h[h.length-1]),p=d?7:8,v=h.length-p,m=Array(p),g=0;g<p;++g)m[g]=f[g]||h[v+g]||"";d&&(m[p-1]=G(m[p-1],t));var y=m.reduce((function(e,t,n){if(!t||"0"===t){var r=e[e.length-1];r&&r.index+r.length===n?r.length++:e.push({index:n,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(y&&y.length>1){var x=m.slice(0,y.index),_=m.slice(y.index+y.length);b=x.join(":")+"::"+_.join(":")}else b=m.join(":");return o&&(b+="%"+o),b}return e}var q=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,K=void 0==="".match(/(){0}/)[1];function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=!1!==t.iri?l:u;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(q);if(i){K?(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5])):(n.scheme=i[1]||void 0,n.userinfo=-1!==e.indexOf("@")?i[3]:void 0,n.host=-1!==e.indexOf("//")?i[4]:void 0,n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=-1!==e.indexOf("?")?i[7]:void 0,n.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),n.host&&(n.host=W(G(n.host,r),r)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var o=F[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)Z(n,r);else{if(n.host&&(t.domainHost||o&&o.domainHost))try{n.host=z.toASCII(n.host.replace(r.PCT_ENCODED,U).toLowerCase())}catch(a){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+a}Z(n,u)}o&&o.parse&&o.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}function X(e,t){var n=!1!==t.iri?l:u,r=[];return void 0!==e.userinfo&&(r.push(e.userinfo),r.push("@")),void 0!==e.host&&r.push(W(G(String(e.host),n),n).replace(n.IPV6ADDRESS,(function(e,t,n){return"["+t+(n?"%25"+n:"")+"]"}))),"number"!==typeof e.port&&"string"!==typeof e.port||(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}var $=/^\.\.?\//,J=/^\/\.(\/|$)/,Q=/^\/\.\.(\/|$)/,ee=/^\/?(?:.|\n)*?(?=\/|$)/;function te(e){for(var t=[];e.length;)if(e.match($))e=e.replace($,"");else if(e.match(J))e=e.replace(J,"/");else if(e.match(Q))e=e.replace(Q,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(ee);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];e=e.slice(r.length),t.push(r)}return t.join("")}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?l:u,r=[],i=F[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(n.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?z.toUnicode(e.host):z.toASCII(e.host.replace(n.PCT_ENCODED,U).toLowerCase())}catch(s){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+s}Z(e,n),"suffix"!==t.reference&&e.scheme&&(r.push(e.scheme),r.push(":"));var o=X(e,t);if(void 0!==o&&("suffix"!==t.reference&&r.push("//"),r.push(o),e.path&&"/"!==e.path.charAt(0)&&r.push("/")),void 0!==e.path){var a=e.path;t.absolutePath||i&&i.absolutePath||(a=te(a)),void 0===o&&(a=a.replace(/^\/\//,"/%2F")),r.push(a)}return void 0!==e.query&&(r.push("?"),r.push(e.query)),void 0!==e.fragment&&(r.push("#"),r.push(e.fragment)),r.join("")}function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return arguments[3]||(e=Y(ne(e,n),n),t=Y(ne(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(r.scheme=t.scheme,r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=te(t.path||""),r.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=te(t.path||""),r.query=t.query):(t.path?("/"===t.path.charAt(0)?r.path=te(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?r.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:r.path=t.path:r.path="/"+t.path,r.path=te(r.path)),r.query=t.query):(r.path=e.path,void 0!==t.query?r.query=t.query:r.query=e.query),r.userinfo=e.userinfo,r.host=e.host,r.port=e.port),r.scheme=e.scheme),r.fragment=t.fragment,r}function ie(e,t,n){var r=a({scheme:"null"},n);return ne(re(Y(e,r),Y(t,r),r,!0),r)}function oe(e,t){return"string"===typeof e?e=ne(Y(e,t),t):"object"===r(e)&&(e=Y(ne(e,t),t)),e}function ae(e,t,n){return"string"===typeof e?e=ne(Y(e,n),n):"object"===r(e)&&(e=ne(e,n)),"string"===typeof t?t=ne(Y(t,n),n):"object"===r(t)&&(t=ne(t,n)),e===t}function se(e,t){return e&&e.toString().replace(t&&t.iri?l.ESCAPE:u.ESCAPE,V)}function ue(e,t){return e&&e.toString().replace(t&&t.iri?l.PCT_ENCODED:u.PCT_ENCODED,U)}var le={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var n="https"===String(e.scheme).toLowerCase();return e.port!==(n?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},ce={scheme:"https",domainHost:le.domainHost,parse:le.parse,serialize:le.serialize};function fe(e){return"boolean"===typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var he={scheme:"ws",domainHost:!0,parse:function(e,t){var n=e;return n.secure=fe(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize:function(e,t){if(e.port!==(fe(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"===typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var n=e.resourceName.split("?"),r=c(n,2),i=r[0],o=r[1];e.path=i&&"/"!==i?i:void 0,e.query=o,e.resourceName=void 0}return e.fragment=void 0,e}},de={scheme:"wss",domainHost:he.domainHost,parse:he.parse,serialize:he.serialize},pe={},ve="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",me="[0-9A-Fa-f]",ge=n(n("%[EFef]"+me+"%"+me+me+"%"+me+me)+"|"+n("%[89A-Fa-f]"+me+"%"+me+me)+"|"+n("%"+me+me)),ye="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",be=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),xe="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",_e=new RegExp(ve,"g"),we=new RegExp(ge,"g"),Se=new RegExp(t("[^]",ye,"[\\.]",'[\\"]',be),"g"),Ee=new RegExp(t("[^]",ve,xe),"g"),ke=Ee;function Oe(e){var t=U(e);return t.match(_e)?t:e}var Ae={scheme:"mailto",parse:function(e,t){var n=e,r=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var i=!1,o={},a=n.query.split("&"),s=0,u=a.length;s<u;++s){var l=a[s].split("=");switch(l[0]){case"to":for(var c=l[1].split(","),f=0,h=c.length;f<h;++f)r.push(c[f]);break;case"subject":n.subject=ue(l[1],t);break;case"body":n.body=ue(l[1],t);break;default:i=!0,o[ue(l[0],t)]=ue(l[1],t)}}i&&(n.headers=o)}n.query=void 0;for(var d=0,p=r.length;d<p;++d){var v=r[d].split("@");if(v[0]=ue(v[0]),t.unicodeSupport)v[1]=ue(v[1],t).toLowerCase();else try{v[1]=z.toASCII(ue(v[1],t).toLowerCase())}catch(m){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+m}r[d]=v.join("@")}return n},serialize:function(e,t){var n=e,r=o(e.to);if(r){for(var a=0,s=r.length;a<s;++a){var u=String(r[a]),l=u.lastIndexOf("@"),c=u.slice(0,l).replace(we,Oe).replace(we,i).replace(Se,V),f=u.slice(l+1);try{f=t.iri?z.toUnicode(f):z.toASCII(ue(f,t).toLowerCase())}catch(v){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+v}r[a]=c+"@"+f}n.path=r.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var d=[];for(var p in h)h[p]!==pe[p]&&d.push(p.replace(we,Oe).replace(we,i).replace(Ee,V)+"="+h[p].replace(we,Oe).replace(we,i).replace(ke,V));return d.length&&(n.query=d.join("&")),n}},Ce=/^([^\:]+)\:(.*)/,Me={scheme:"urn",parse:function(e,t){var n=e.path&&e.path.match(Ce),r=e;if(n){var i=t.scheme||r.scheme||"urn",o=n[1].toLowerCase(),a=n[2],s=i+":"+(t.nid||o),u=F[s];r.nid=o,r.nss=a,r.path=void 0,u&&(r=u.parse(r,t))}else r.error=r.error||"URN can not be parsed.";return r},serialize:function(e,t){var n=t.scheme||e.scheme||"urn",r=e.nid,i=n+":"+(t.nid||r),o=F[i];o&&(e=o.serialize(e,t));var a=e,s=e.nss;return a.path=(r||t.nid)+":"+s,a}},Te=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Pe={scheme:"urn:uuid",parse:function(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&n.uuid.match(Te)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e,t){var n=e;return n.nss=(e.uuid||"").toLowerCase(),n}};F[le.scheme]=le,F[ce.scheme]=ce,F[he.scheme]=he,F[de.scheme]=de,F[Ae.scheme]=Ae,F[Me.scheme]=Me,F[Pe.scheme]=Pe,e.SCHEMES=F,e.pctEncChar=V,e.pctDecChars=U,e.parse=Y,e.removeDotSegments=te,e.serialize=ne,e.resolveComponents=re,e.resolve=ie,e.normalize=oe,e.equal=ae,e.escapeComponent=se,e.unescapeComponent=ue,Object.defineProperty(e,"__esModule",{value:!0})}(t)},26149:function(e,t,n){!function(e){"use strict";var t=function(){try{if(e.URLSearchParams&&"bar"===new e.URLSearchParams("foo=bar").get("foo"))return e.URLSearchParams}catch(t){}return null}(),n=t&&"a=1"===new t({a:1}).toString(),r=t&&"+"===new t("s=%2B").get("s"),i=!t||function(){var e=new t;return e.append("s"," &"),"s=+%26"===e.toString()}(),o=l.prototype,a=!(!e.Symbol||!e.Symbol.iterator);if(!(t&&n&&r&&i)){var s;o.append=function(e,t){p(this.__URLSearchParams__,e,t)},o.delete=function(e){delete this.__URLSearchParams__[e]},o.get=function(e){var t=this.__URLSearchParams__;return this.has(e)?t[e][0]:null},o.getAll=function(e){var t=this.__URLSearchParams__;return this.has(e)?t[e].slice(0):[]},o.has=function(e){return m(this.__URLSearchParams__,e)},o.set=function(e,t){this.__URLSearchParams__[e]=[""+t]},o.toString=function(){var e,t,n,r,i=this.__URLSearchParams__,o=[];for(t in i)for(n=c(t),e=0,r=i[t];e<r.length;e++)o.push(n+"="+c(r[e]));return o.join("&")},!!r&&t&&!n&&e.Proxy?(s=new Proxy(t,{construct:function(e,t){return new e(new l(t[0]).toString())}})).toString=Function.prototype.toString.bind(l):s=l,Object.defineProperty(e,"URLSearchParams",{value:s});var u=e.URLSearchParams.prototype;u.polyfill=!0,u.forEach=u.forEach||function(e,t){var n=d(this.toString());Object.getOwnPropertyNames(n).forEach((function(r){n[r].forEach((function(n){e.call(t,n,r,this)}),this)}),this)},u.sort=u.sort||function(){var e,t,n,r=d(this.toString()),i=[];for(e in r)i.push(e);for(i.sort(),t=0;t<i.length;t++)this.delete(i[t]);for(t=0;t<i.length;t++){var o=i[t],a=r[o];for(n=0;n<a.length;n++)this.append(o,a[n])}},u.keys=u.keys||function(){var e=[];return this.forEach((function(t,n){e.push(n)})),h(e)},u.values=u.values||function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},u.entries=u.entries||function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),h(e)},a&&(u[e.Symbol.iterator]=u[e.Symbol.iterator]||u.entries)}function l(e){((e=e||"")instanceof URLSearchParams||e instanceof l)&&(e=e.toString()),this.__URLSearchParams__=d(e)}function c(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))}function f(e){return e.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/gi,(function(e){return decodeURIComponent(e)}))}function h(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return a&&(n[e.Symbol.iterator]=function(){return n}),n}function d(e){var t={};if("object"===typeof e)if(v(e))for(var n=0;n<e.length;n++){var r=e[n];if(!v(r)||2!==r.length)throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements");p(t,r[0],r[1])}else for(var i in e)e.hasOwnProperty(i)&&p(t,i,e[i]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var o=e.split("&"),a=0;a<o.length;a++){var s=o[a],u=s.indexOf("=");-1<u?p(t,f(s.slice(0,u)),f(s.slice(u+1))):s&&p(t,f(s),"")}}return t}function p(e,t,n){var r="string"===typeof n?n:null!==n&&void 0!==n&&"function"===typeof n.toString?n.toString():JSON.stringify(n);m(e,t)?e[t].push(r):e[t]=[r]}function v(e){return!!e&&"[object Array]"===Object.prototype.toString.call(e)}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}("undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:this)},57923:function(e,t,n){"use strict";var r=n(40699),i=n(47028);function o(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var a=o(r);e.exports=function(e){void 0===e&&(e={});var t=e.onResize,n=i.useRef(void 0);n.current=t;var r=i.useRef(),o=i.useState({width:void 0,height:void 0}),s=o[0],u=o[1],l=i.useRef(!1);i.useEffect((function(){return function(){l.current=!0}}),[]);var c=i.useRef({width:void 0,height:void 0}),f=function(e,t){var n=i.useRef(null),r=i.useCallback((function(e){n.current=e,s()}),[]),o=i.useRef(null),a=i.useRef(),s=function(){var r=null;n.current?r=n.current:t&&(r=t instanceof HTMLElement?t:t.current),o.current!==r&&(a.current&&(a.current(),a.current=null),o.current=r,r&&(a.current=e(r)))};return i.useEffect((function(){s()}),[t]),r}((function(e){return r.current||(r.current=new a.default((function(e){if(Array.isArray(e)){var t=e[0],r=Math.round(t.contentRect.width),i=Math.round(t.contentRect.height);if(c.current.width!==r||c.current.height!==i){var o={width:r,height:i};n.current?n.current(o):(c.current.width=r,c.current.height=i,l.current||u(o))}}}))),r.current.observe(e),function(){r.current&&r.current.unobserve(e)}}),e.ref);return i.useMemo((function(){return{ref:f,width:s.width,height:s.height}}),[f,s?s.width:null,s?s.height:null])}},97866:function(e){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},8450:function(e,t,n){"use strict";var r=n(90187),i=n(7685),o=n(74506),a=n(82031);function s(e){return e.call.bind(e)}var u="undefined"!==typeof BigInt,l="undefined"!==typeof Symbol,c=s(Object.prototype.toString),f=s(Number.prototype.valueOf),h=s(String.prototype.valueOf),d=s(Boolean.prototype.valueOf);if(u)var p=s(BigInt.prototype.valueOf);if(l)var v=s(Symbol.prototype.valueOf);function m(e,t){if("object"!==typeof e)return!1;try{return t(e),!0}catch(n){return!1}}function g(e){return"[object Map]"===c(e)}function y(e){return"[object Set]"===c(e)}function b(e){return"[object WeakMap]"===c(e)}function x(e){return"[object WeakSet]"===c(e)}function _(e){return"[object ArrayBuffer]"===c(e)}function w(e){return"undefined"!==typeof ArrayBuffer&&(_.working?_(e):e instanceof ArrayBuffer)}function S(e){return"[object DataView]"===c(e)}function E(e){return"undefined"!==typeof DataView&&(S.working?S(e):e instanceof DataView)}t.isArgumentsObject=r,t.isGeneratorFunction=i,t.isTypedArray=a,t.isPromise=function(e){return"undefined"!==typeof Promise&&e instanceof Promise||null!==e&&"object"===typeof e&&"function"===typeof e.then&&"function"===typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||E(e)},t.isUint8Array=function(e){return"Uint8Array"===o(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===o(e)},t.isUint16Array=function(e){return"Uint16Array"===o(e)},t.isUint32Array=function(e){return"Uint32Array"===o(e)},t.isInt8Array=function(e){return"Int8Array"===o(e)},t.isInt16Array=function(e){return"Int16Array"===o(e)},t.isInt32Array=function(e){return"Int32Array"===o(e)},t.isFloat32Array=function(e){return"Float32Array"===o(e)},t.isFloat64Array=function(e){return"Float64Array"===o(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===o(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===o(e)},g.working="undefined"!==typeof Map&&g(new Map),t.isMap=function(e){return"undefined"!==typeof Map&&(g.working?g(e):e instanceof Map)},y.working="undefined"!==typeof Set&&y(new Set),t.isSet=function(e){return"undefined"!==typeof Set&&(y.working?y(e):e instanceof Set)},b.working="undefined"!==typeof WeakMap&&b(new WeakMap),t.isWeakMap=function(e){return"undefined"!==typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},x.working="undefined"!==typeof WeakSet&&x(new WeakSet),t.isWeakSet=function(e){return x(e)},_.working="undefined"!==typeof ArrayBuffer&&_(new ArrayBuffer),t.isArrayBuffer=w,S.working="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=E;var k="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function O(e){return"[object SharedArrayBuffer]"===c(e)}function A(e){return"undefined"!==typeof k&&("undefined"===typeof O.working&&(O.working=O(new k)),O.working?O(e):e instanceof k)}function C(e){return m(e,f)}function M(e){return m(e,h)}function T(e){return m(e,d)}function P(e){return u&&m(e,p)}function R(e){return l&&m(e,v)}t.isSharedArrayBuffer=A,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===c(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===c(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===c(e)},t.isGeneratorObject=function(e){return"[object Generator]"===c(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===c(e)},t.isNumberObject=C,t.isStringObject=M,t.isBooleanObject=T,t.isBigIntObject=P,t.isSymbolObject=R,t.isBoxedPrimitive=function(e){return C(e)||M(e)||T(e)||P(e)||R(e)},t.isAnyArrayBuffer=function(e){return"undefined"!==typeof Uint8Array&&(w(e)||A(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},40570:function(e,t,n){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}})),s=r[n];n<o;s=r[++n])m(s)||!_(s)?a+=" "+s:a+=" "+u(s);return a},t.deprecate=function(e,n){if("undefined"!==typeof process&&!0===process.noDeprecation)return e;if("undefined"===typeof process)return function(){return t.deprecate(e,n).apply(this,arguments)};var r=!1;return function(){if(!r){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),r=!0}return e.apply(this,arguments)}};var o={},a=/^$/;if({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_PATH:"http://52.32.91.31/v2"}.NODE_DEBUG){var s={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_PATH:"http://52.32.91.31/v2"}.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+s+"$","i")}function u(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&t._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),f(r,e,r.depth)}function l(e,t){var n=u.styles[t];return n?"\x1b["+u.colors[n][0]+"m"+e+"\x1b["+u.colors[n][1]+"m":e}function c(e,t){return e}function f(e,n,r){if(e.customInspect&&n&&E(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return y(i)||(i=f(e,i,r)),i}var o=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(g(t))return e.stylize(""+t,"number");if(v(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,n);if(o)return o;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),S(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return h(n);if(0===a.length){if(E(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(x(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return h(n)}var l,c="",_=!1,k=["{","}"];(p(n)&&(_=!0,k=["[","]"]),E(n))&&(c=" [Function"+(n.name?": "+n.name:"")+"]");return x(n)&&(c=" "+RegExp.prototype.toString.call(n)),w(n)&&(c=" "+Date.prototype.toUTCString.call(n)),S(n)&&(c=" "+h(n)),0!==a.length||_&&0!=n.length?r<0?x(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=_?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)M(t,String(a))?o.push(d(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(d(e,t,n,r,i,!0))})),o}(e,n,r,s,a):a.map((function(t){return d(e,n,r,s,t,_)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,c,k)):k[0]+c+k[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),M(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=m(n)?f(e,u.value,null):f(e,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),b(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e){return Array.isArray(e)}function v(e){return"boolean"===typeof e}function m(e){return null===e}function g(e){return"number"===typeof e}function y(e){return"string"===typeof e}function b(e){return void 0===e}function x(e){return _(e)&&"[object RegExp]"===k(e)}function _(e){return"object"===typeof e&&null!==e}function w(e){return _(e)&&"[object Date]"===k(e)}function S(e){return _(e)&&("[object Error]"===k(e)||e instanceof Error)}function E(e){return"function"===typeof e}function k(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!o[e])if(a.test(e)){var n=process.pid;o[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else o[e]=function(){};return o[e]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=n(8450),t.isArray=p,t.isBoolean=v,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=y,t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=b,t.isRegExp=x,t.types.isRegExp=x,t.isObject=_,t.isDate=w,t.types.isDate=w,t.isError=S,t.types.isNativeError=S,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=n(97866);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),A[e.getMonth()],t].join(" ")}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",C(),t.format.apply(t,arguments))},t.inherits=n(44144),t._extend=function(e,t){if(!t||!_(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var T="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(T&&e[T]){var t;if("function"!==typeof(t=e[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(a){n(a)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),T&&Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=T,t.callbackify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var r=t.pop();if("function"!==typeof r)throw new TypeError("The last argument must be of type Function");var i=this,o=function(){return r.apply(i,arguments)};e.apply(this,t).then((function(e){process.nextTick(o.bind(null,null,e))}),(function(e){process.nextTick(P.bind(null,e,o))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,r(e)),t}},32727:function(e,t,n){"use strict";n.r(t),n.d(t,{DOMException:function(){return O},Headers:function(){return p},Request:function(){return _},Response:function(){return E},fetch:function(){return A}});var r="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&self||"undefined"!==typeof r&&r,i="URLSearchParams"in r,o="Symbol"in r&&"iterator"in Symbol,a="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in r,u="ArrayBuffer"in r;if(u)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&l.indexOf(Object.prototype.toString.call(e))>-1};function f(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function h(e){return"string"!==typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function v(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=m(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:a&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():u&&a&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=v(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=v(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(g)}),this.text=function(){var e=v(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=m(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=f(e),t=h(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[f(e)]},p.prototype.get=function(e){return e=f(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(f(e))},p.prototype.set=function(e,t){this.map[f(e)]=h(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),d(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),d(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),d(e)},o&&(p.prototype[Symbol.iterator]=p.prototype.entries);var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(e,t){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n=(t=t||{}).body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=function(e){var t=e.toUpperCase();return x.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function S(e){var t=new p;return e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t}function E(e,t){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},b.call(_.prototype),b.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var k=[301,302,303,307,308];E.redirect=function(e,t){if(-1===k.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})};var O=r.DOMException;try{new O}catch(C){(O=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),O.prototype.constructor=O}function A(e,t){return new Promise((function(n,i){var o=new _(e,t);if(o.signal&&o.signal.aborted)return i(new O("Aborted","AbortError"));var s=new XMLHttpRequest;function l(){s.abort()}s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:S(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;setTimeout((function(){n(new E(t,e))}),0)},s.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){i(new O("Aborted","AbortError"))}),0)},s.open(o.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&(a?s.responseType="blob":u&&o.headers.get("Content-Type")&&-1!==o.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!t||"object"!==typeof t.headers||t.headers instanceof p?o.headers.forEach((function(e,t){s.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){s.setRequestHeader(e,h(t.headers[e]))})),o.signal&&(o.signal.addEventListener("abort",l),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",l)}),s.send("undefined"===typeof o._bodyInit?null:o._bodyInit)}))}A.polyfill=!0,r.fetch||(r.fetch=A,r.Headers=p,r.Request=_,r.Response=E)},74506:function(e,t,n){"use strict";var r=n(22458),i=n(53370),o=n(86045),a=o("Object.prototype.toString"),s=n(18679)(),u="undefined"===typeof globalThis?n.g:globalThis,l=i(),c=o("String.prototype.slice"),f={},h=n(3882),d=Object.getPrototypeOf;s&&h&&d&&r(l,(function(e){if("function"===typeof u[e]){var t=new u[e];if(Symbol.toStringTag in t){var n=d(t),r=h(n,Symbol.toStringTag);if(!r){var i=d(n);r=h(i,Symbol.toStringTag)}f[e]=r.get}}}));var p=n(82031);e.exports=function(e){return!!p(e)&&(s&&Symbol.toStringTag in e?function(e){var t=!1;return r(f,(function(n,r){if(!t)try{var i=n.call(e);i===r&&(t=i)}catch(o){}})),t}(e):c(a(e),8,-1))}},29346:function(e,t,n){"use strict";n.r(t),n.d(t,{Editor:function(){return Lo}});var r=n(64179),i=n(38002),o=n(47028),a=n.t(o,2),s=n(31610),u=n(60847),l=n(45752),c=n(45239),f=n(99724),h=n(57135),d=n.n(h),p=n(26381),v=n(9297),m=n(46398),g=n(11026),y=n(64649),b=n(18808),x=n(41833),_=n(2502),w=n(37491),S=n(41795),E=n(61205),k=n(92452),O=n(45485),A=n(35680),C=n(30305),M=n(11578),T=["sx"];function P(e){var t,n=e.sx,r=function(e){var t={systemProps:{},otherProps:{}};return Object.keys(e).forEach((function(n){M.Gc[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]})),t}((0,S.Z)(e,T)),i=r.systemProps,o=r.otherProps;return t=Array.isArray(n)?[i].concat((0,A.Z)(n)):"function"===typeof n?function(){var e=n.apply(void 0,arguments);return(0,C.P)(e)?(0,w.Z)({},i,e):i}:(0,w.Z)({},i,n),(0,w.Z)({},o,{sx:t})}var R=n(25789),I=n(47279),L=["className","component"];var N=n(90223),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=e.defaultClassName,r=void 0===n?"MuiBox-root":n,i=e.generateClassName,a=e.styleFunctionSx,s=void 0===a?O.Z:a,u=(0,k.ZP)("div")(s),l=o.forwardRef((function(e,n){var o=(0,R.Z)(t),a=P(e),s=a.className,l=a.component,c=void 0===l?"div":l,f=(0,S.Z)(a,L);return(0,I.jsx)(u,(0,w.Z)({as:c,ref:n,className:(0,E.Z)(s,i?i(r):r),theme:o},f))}));return l}({defaultTheme:(0,l.Z)(),defaultClassName:"MuiBox-root",generateClassName:N.Z.generate}),D=j,B=n(96916),z=n(14484),F=n(97308),V=n(15277),U=n(90274),Z=n(83297),H=n(43600),G=n(31821);var W=function(e,t){return o.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)},q=n(38626),K=n(62364),Y=n(62149);function X(e){return(0,K.Z)("MuiFormControl",e)}(0,Y.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);var $=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],J=(0,Z.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return(0,F.Z)({},t.root,t["margin".concat((0,G.Z)(n.margin))],n.fullWidth&&t.fullWidth)}})((function(e){var t=e.ownerState;return(0,F.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),Q=o.forwardRef((function(e,t){var n=(0,U.Z)({props:e,name:"MuiFormControl"}),r=n.children,i=n.className,a=n.color,s=void 0===a?"primary":a,u=n.component,l=void 0===u?"div":u,c=n.disabled,f=void 0!==c&&c,h=n.error,d=void 0!==h&&h,p=n.focused,v=n.fullWidth,m=void 0!==v&&v,g=n.hiddenLabel,y=void 0!==g&&g,b=n.margin,x=void 0===b?"none":b,_=n.required,w=void 0!==_&&_,S=n.size,k=void 0===S?"medium":S,O=n.variant,A=void 0===O?"outlined":O,C=(0,z.Z)(n,$),M=(0,F.Z)({},n,{color:s,component:l,disabled:f,error:d,fullWidth:m,hiddenLabel:y,margin:x,required:w,size:k,variant:A}),T=function(e){var t=e.classes,n=e.margin,r=e.fullWidth,i={root:["root","none"!==n&&"margin".concat((0,G.Z)(n)),r&&"fullWidth"]};return(0,V.Z)(i,X,t)}(M),P=o.useState((function(){var e=!1;return r&&o.Children.forEach(r,(function(t){if(W(t,["Input","Select"])){var n=W(t,["Select"])?t.props.input:t;n&&(0,H.B7)(n.props)&&(e=!0)}})),e})),R=(0,B.Z)(P,2),L=R[0],N=R[1],j=o.useState((function(){var e=!1;return r&&o.Children.forEach(r,(function(t){W(t,["Input","Select"])&&(0,H.vd)(t.props,!0)&&(e=!0)})),e})),D=(0,B.Z)(j,2),Z=D[0],K=D[1],Y=o.useState(!1),Q=(0,B.Z)(Y,2),ee=Q[0],te=Q[1];f&&ee&&te(!1);var ne=void 0===p||f?ee:p,re=o.useCallback((function(){K(!0)}),[]),ie={adornedStart:L,setAdornedStart:N,color:s,disabled:f,error:d,filled:Z,focused:ne,fullWidth:m,hiddenLabel:y,size:k,onBlur:function(){te(!1)},onEmpty:o.useCallback((function(){K(!1)}),[]),onFilled:re,onFocus:function(){te(!0)},registerEffect:undefined,required:w,variant:A};return(0,I.jsx)(q.Z.Provider,{value:ie,children:(0,I.jsx)(J,(0,F.Z)({as:l,ownerState:M,className:(0,E.Z)(T.root,i),ref:t},C,{children:r}))})})),ee=n(29673);function te(e){return(0,K.Z)("MuiTypography",e)}(0,Y.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var ne=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],re=(0,Z.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat((0,G.Z)(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((function(e){var t=e.theme,n=e.ownerState;return(0,F.Z)({margin:0},n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),ie={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},oe={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},ae=o.forwardRef((function(e,t){var n=(0,U.Z)({props:e,name:"MuiTypography"}),r=function(e){return oe[e]||e}(n.color),i=P((0,F.Z)({},n,{color:r})),o=i.align,a=void 0===o?"inherit":o,s=i.className,u=i.component,l=i.gutterBottom,c=void 0!==l&&l,f=i.noWrap,h=void 0!==f&&f,d=i.paragraph,p=void 0!==d&&d,v=i.variant,m=void 0===v?"body1":v,g=i.variantMapping,y=void 0===g?ie:g,b=(0,z.Z)(i,ne),x=(0,F.Z)({},i,{align:a,color:r,className:s,component:u,gutterBottom:c,noWrap:h,paragraph:p,variant:m,variantMapping:y}),_=u||(p?"p":y[m]||ie[m])||"span",w=function(e){var t=e.align,n=e.gutterBottom,r=e.noWrap,i=e.paragraph,o=e.variant,a=e.classes,s={root:["root",o,"inherit"!==e.align&&"align".concat((0,G.Z)(t)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return(0,V.Z)(s,te,a)}(x);return(0,I.jsx)(re,(0,F.Z)({as:_,ref:t,ownerState:x,className:(0,E.Z)(w.root,s)},b))})),se=n(80217),ue=n(22238),le=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],ce=(0,Z.ZP)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[(0,ee.Z)({},"& .".concat(ue.Z.primary),t.primary),(0,ee.Z)({},"& .".concat(ue.Z.secondary),t.secondary),t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})((function(e){var t=e.ownerState;return(0,F.Z)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})})),fe=o.forwardRef((function(e,t){var n=(0,U.Z)({props:e,name:"MuiListItemText"}),r=n.children,i=n.className,a=n.disableTypography,s=void 0!==a&&a,u=n.inset,l=void 0!==u&&u,c=n.primary,f=n.primaryTypographyProps,h=n.secondary,d=n.secondaryTypographyProps,p=(0,z.Z)(n,le),v=o.useContext(se.Z).dense,m=null!=c?c:r,g=h,y=(0,F.Z)({},n,{disableTypography:s,inset:l,primary:!!m,secondary:!!g,dense:v}),b=function(e){var t=e.classes,n=e.inset,r=e.primary,i=e.secondary,o={root:["root",n&&"inset",e.dense&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,V.Z)(o,ue.L,t)}(y);return null==m||m.type===ae||s||(m=(0,I.jsx)(ae,(0,F.Z)({variant:v?"body2":"body1",className:b.primary,component:"span",display:"block"},f,{children:m}))),null==g||g.type===ae||s||(g=(0,I.jsx)(ae,(0,F.Z)({variant:"body2",className:b.secondary,color:"text.secondary",display:"block"},d,{children:g}))),(0,I.jsxs)(ce,(0,F.Z)({className:(0,E.Z)(b.root,i),ownerState:y,ref:t},p,{children:[m,g]}))}));function he(e){return(0,K.Z)("MuiDialogTitle",e)}var de=(0,Y.Z)("MuiDialogTitle",["root"]);var pe=(0,o.createContext)({}),ve=["className","id"],me=(0,Z.ZP)(ae,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,t){return t.root}})({padding:"16px 24px",flex:"0 0 auto"}),ge=o.forwardRef((function(e,t){var n=(0,U.Z)({props:e,name:"MuiDialogTitle"}),r=n.className,i=n.id,a=(0,z.Z)(n,ve),s=n,u=function(e){var t=e.classes;return(0,V.Z)({root:["root"]},he,t)}(s),l=o.useContext(pe).titleId,c=void 0===l?i:l;return(0,I.jsx)(me,(0,F.Z)({component:"h2",className:(0,E.Z)(u.root,r),ownerState:s,ref:t,variant:"h6",id:c},a))}));function ye(e){return(0,K.Z)("MuiDialogContent",e)}(0,Y.Z)("MuiDialogContent",["root","dividers"]);var be=["className","dividers"],xe=(0,Z.ZP)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.dividers&&t.dividers]}})((function(e){var t=e.theme,n=e.ownerState;return(0,F.Z)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},n.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat(t.palette.divider),borderBottom:"1px solid ".concat(t.palette.divider)}:(0,ee.Z)({},".".concat(de.root," + &"),{paddingTop:0}))})),_e=o.forwardRef((function(e,t){var n=(0,U.Z)({props:e,name:"MuiDialogContent"}),r=n.className,i=n.dividers,o=void 0!==i&&i,a=(0,z.Z)(n,be),s=(0,F.Z)({},n,{dividers:o}),u=function(e){var t=e.classes,n={root:["root",e.dividers&&"dividers"]};return(0,V.Z)(n,ye,t)}(s);return(0,I.jsx)(xe,(0,F.Z)({className:(0,E.Z)(u.root,r),ownerState:s,ref:t},a))}));function we(e){return(0,K.Z)("MuiDialogActions",e)}(0,Y.Z)("MuiDialogActions",["root","spacing"]);var Se=["className","disableSpacing"],Ee=(0,Z.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.disableSpacing&&t.spacing]}})((function(e){var t=e.ownerState;return(0,F.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})})),ke=o.forwardRef((function(e,t){var n=(0,U.Z)({props:e,name:"MuiDialogActions"}),r=n.className,i=n.disableSpacing,o=void 0!==i&&i,a=(0,z.Z)(n,Se),s=(0,F.Z)({},n,{disableSpacing:o}),u=function(e){var t=e.classes,n={root:["root",!e.disableSpacing&&"spacing"]};return(0,V.Z)(n,we,t)}(s);return(0,I.jsx)(Ee,(0,F.Z)({className:(0,E.Z)(u.root,r),ownerState:s,ref:t},a))})),Oe=0;var Ae=a.useId;function Ce(e){if(void 0!==Ae){var t=Ae();return null!=e?e:t}return function(e){var t=o.useState(e),n=(0,B.Z)(t,2),r=n[0],i=n[1],a=e||r;return o.useEffect((function(){null==r&&i("mui-".concat(Oe+=1))}),[r]),a}(e)}var Me=n(66088),Te=n(26126),Pe=n(81879);function Re(e){return(0,K.Z)("MuiDialog",e)}var Ie=(0,Y.Z)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Le=n(48821),Ne=n(58983),je=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],De=(0,Z.ZP)(Le.Z,{name:"MuiDialog",slot:"Backdrop",overrides:function(e,t){return t.backdrop}})({zIndex:-1}),Be=(0,Z.ZP)(Me.Z,{name:"MuiDialog",slot:"Root",overridesResolver:function(e,t){return t.root}})({"@media print":{position:"absolute !important"}}),ze=(0,Z.ZP)("div",{name:"MuiDialog",slot:"Container",overridesResolver:function(e,t){var n=e.ownerState;return[t.container,t["scroll".concat((0,G.Z)(n.scroll))]]}})((function(e){var t=e.ownerState;return(0,F.Z)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===t.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===t.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})})),Fe=(0,Z.ZP)(Pe.Z,{name:"MuiDialog",slot:"Paper",overridesResolver:function(e,t){var n=e.ownerState;return[t.paper,t["scrollPaper".concat((0,G.Z)(n.scroll))],t["paperWidth".concat((0,G.Z)(String(n.maxWidth)))],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})((function(e){var t=e.theme,n=e.ownerState;return(0,F.Z)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===n.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===n.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!n.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===n.maxWidth&&(0,ee.Z)({maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):"".concat(t.breakpoints.values.xs).concat(t.breakpoints.unit)},"&.".concat(Ie.paperScrollBody),(0,ee.Z)({},t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})),"xs"!==n.maxWidth&&(0,ee.Z)({maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit)},"&.".concat(Ie.paperScrollBody),(0,ee.Z)({},t.breakpoints.down(t.breakpoints.values[n.maxWidth]+64),{maxWidth:"calc(100% - 64px)"})),n.fullWidth&&{width:"calc(100% - 64px)"},n.fullScreen&&(0,ee.Z)({margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0},"&.".concat(Ie.paperScrollBody),{margin:0,maxWidth:"100%"}))})),Ve=o.forwardRef((function(e,t){var n=(0,U.Z)({props:e,name:"MuiDialog"}),r=(0,Ne.Z)(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},a=n["aria-describedby"],s=n["aria-labelledby"],u=n.BackdropComponent,l=n.BackdropProps,c=n.children,f=n.className,h=n.disableEscapeKeyDown,d=void 0!==h&&h,p=n.fullScreen,v=void 0!==p&&p,m=n.fullWidth,g=void 0!==m&&m,y=n.maxWidth,b=void 0===y?"sm":y,x=n.onBackdropClick,_=n.onClose,w=n.open,S=n.PaperComponent,k=void 0===S?Pe.Z:S,O=n.PaperProps,A=void 0===O?{}:O,C=n.scroll,M=void 0===C?"paper":C,T=n.TransitionComponent,P=void 0===T?Te.Z:T,R=n.transitionDuration,L=void 0===R?i:R,N=n.TransitionProps,j=(0,z.Z)(n,je),D=(0,F.Z)({},n,{disableEscapeKeyDown:d,fullScreen:v,fullWidth:g,maxWidth:b,scroll:M}),B=function(e){var t=e.classes,n=e.scroll,r=e.maxWidth,i=e.fullWidth,o=e.fullScreen,a={root:["root"],container:["container","scroll".concat((0,G.Z)(n))],paper:["paper","paperScroll".concat((0,G.Z)(n)),"paperWidth".concat((0,G.Z)(String(r))),i&&"paperFullWidth",o&&"paperFullScreen"]};return(0,V.Z)(a,Re,t)}(D),Z=o.useRef(),H=Ce(s),W=o.useMemo((function(){return{titleId:H}}),[H]);return(0,I.jsx)(Be,(0,F.Z)({className:(0,E.Z)(B.root,f),BackdropProps:(0,F.Z)({transitionDuration:L,as:u},l),closeAfterTransition:!0,BackdropComponent:De,disableEscapeKeyDown:d,onClose:_,open:w,ref:t,onClick:function(e){Z.current&&(Z.current=null,x&&x(e),_&&_(e,"backdropClick"))},ownerState:D},j,{children:(0,I.jsx)(P,(0,F.Z)({appear:!0,in:w,timeout:L,role:"presentation"},N,{children:(0,I.jsx)(ze,{className:(0,E.Z)(B.container),onMouseDown:function(e){Z.current=e.target===e.currentTarget},ownerState:D,children:(0,I.jsx)(Fe,(0,F.Z)({as:k,elevation:24,role:"dialog","aria-describedby":a,"aria-labelledby":H},A,{className:(0,E.Z)(B.paper,A.className),ownerState:D,children:(0,I.jsx)(pe.Provider,{value:W,children:c})}))})}))}))})),Ue=n(45378),Ze=n(25526),He=n(90036),Ge=n(31435),We=n(96541),qe=n(97616),Ke=n(83826),Ye=n(50194),Xe=n(70387),$e=n(91976),Je=n(22951),Qe=(0,f.oM)({name:"editor",initialState:{isReady:null,activeTool:"select"},reducers:{init:function(e){e.isReady=!1},initSuccess:function(e){e.isReady=!0},initFailure:function(e){e.isReady=!1},selectTool:function(e,t){e.activeTool=t.payload}}}),et=Qe.actions,tt=et.init,nt=et.initSuccess,rt=et.initFailure,it=et.selectTool,ot=function(e){return e.editor.activeTool},at=Qe.reducer,st=d().mark(ct),ut=d().mark(ft),lt=function(){return new Promise((function(e){setTimeout((function(){return e("some data")}),1e3)}))};function ct(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.gz)(tt());case 2:return e.prev=2,e.next=5,(0,p.RE)(lt);case 5:return e.next=7,(0,p.gz)(nt());case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(2),e.next=13,(0,p.gz)(rt());case 13:case"end":return e.stop()}}),st,null,[[2,9]])}function ft(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.ib)("editor/fetchData",ct);case 2:case"end":return e.stop()}}),ut)}var ht=d().mark(dt);function dt(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.Cs)(ft);case 2:case"end":return e.stop()}}),ht)}var pt=(0,f.oM)({name:"modal",initialState:{name:null,isOpen:!1},reducers:{openModal:function(e,t){e.name=t.payload,e.isOpen=!0},closeModal:function(e){e.name=null,e.isOpen=!1}}}),vt=pt.actions,mt=vt.openModal,gt=vt.closeModal,yt=function(e){return e.modal.name},bt=function(e){return e.modal.isOpen},xt=pt.reducer;var _t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,v.ZP)(),n=(0,f.xC)({reducer:{editor:at,modal:xt},middleware:function(e){return e({thunk:!1}).concat(t)},preloadedState:e});return t.run(dt),n}(),wt={color:{background:{canvas:"#F2F2F2",primary:"#FFFFFF",secondary:"#F8FEFF",overlay:"#005662"},text:{primary:"#333333",secondary:"#585858",light:"#FFFFFF",dark:"#000000",error:"#FF4A4A"},tab:{regular:"#F3F3F3",active:"#005662",hover:"#00838F"},scroll:{regular:"#717171",inactive:"#DDDDDD"},button:{primary:{active:"#005662",hover:"#00838F",clicked:"#4FB3BF",disabled:"rgba(0, 131, 143, 0.4)"},secondary:{active:"#717171",hover:"#333333",clicked:"#AEAEAE",disabled:"rgba(113, 113, 113, 0.4)"},text:{primary:"#FFFFFF",secondary:"#005662",disabled:"#7A7A7A"}},dropdown:{primary:"#333333",secondary:"#FFFFFF",hover:"#DDDDDD",disabled:"#7A7A7A"},tooltip:{background:"#FFFFFF",text:"#333333"},link:{active:"#00838F",hover:"#005662"},divider:"#AEAEAE",spinner:"#005662",error:"#FF4A4A",input:{text:{default:"#585858",active:"#333333",disabled:"#585858",error:"#FF4A4A"},background:{default:"#FFFFFF",hover:"#DDDDDD",disabled:"#DDDDDD"},border:{regular:"#005662",active:"#FFFFFF",hover:"#DDDDDD",error:"#FF4A4A"}},icon:{hover:"#005662",active:"#525252",activeMenu:"#005662",clicked:"#FFFFFF",disabled:"rgba(82, 82, 82, 0.4)"},monomer:{default:"#C8C8C8"}},font:{size:{small:"10px",regular:"12px",medium:"14px",xsmall:"6px"},family:{montserrat:"Montserrat, sans-serif",inter:"Inter, FreeSans, Arimo, 'Droid Sans', Helvetica, 'Helvetica Neue',\nArial, sans-serif",roboto:"Roboto, FreeSans, Arimo, Droid Sans, Helvetica, Helvetica Neue, Arial, sans-serif"},weight:{light:300,regular:400,bold:600}}},St=function(e){return(0,s.iv)({body:{fontSize:e.ketcher.font.size.medium,fontFamily:e.ketcher.font.family.inter,fontWeight:e.ketcher.font.weight.regular,backgroundColor:e.ketcher.color.background.primary,color:e.ketcher.color.text.primary,boxSizing:"border-box"},div:{boxSizing:"border-box"},input:{fontFamily:e.ketcher.font.family.inter,fontWeight:e.ketcher.font.weight.regular,fontSize:e.ketcher.font.size.regular,boxSizing:"border-box"},h1:{fontSize:96},h2:{fontSize:60},h3:{fontSize:48},h4:{fontSize:34},h5:{fontSize:24},h6:{fontSize:20,fontWeight:e.ketcher.font.weight.bold},p:{fontSize:e.ketcher.font.size.regular},button:{textTransform:"uppercase",fontWeight:e.ketcher.font.weight.bold}},"","")};var Et=(0,m.Z)("div",{target:"e1u2apxc8"})((function(e){return{width:e.fullWidth?"100%":"fit-content",display:"flex",flexDirection:"column",justifyContent:"space-between"}}),""),kt=(0,m.Z)("div",{target:"e1u2apxc7"})((function(e){return{height:"100vh",width:"100%",position:"relative",padding:"16px",paddingBottom:0,backgroundColor:e.theme.ketcher.color.background.canvas,display:"flex",justifyContent:"space-between",columnGap:"6px"}}),""),Ot=(0,m.Z)("div",{target:"e1u2apxc6"})({name:"zitjnd",styles:"display:flex;height:fit-content"}),At={name:"ozr3pz",styles:"height:100%;width:fit-content;display:flex;flex-direction:column"},Ct=(0,m.Z)("div",{target:"e1u2apxc5"})(At,""),Mt=(0,m.Z)("div",{target:"e1u2apxc4"})(At,""),Tt=(0,m.Z)("div",{target:"e1u2apxc3"})({name:"g3tvil",styles:"height:fit-content;width:100%;margin-bottom:6px;display:flex;justify-content:flex-end"}),Pt=(0,m.Z)("div",{target:"e1u2apxc2"})({name:"1kzq5ms",styles:"height:100%;width:100%"}),Rt=(0,m.Z)("div",{target:"e1u2apxc1"})({name:"1k18kha",styles:"height:40px"}),It=(0,m.Z)("div",{target:"e1u2apxc0"})({name:"1bac41o",styles:"flex-basis:40px;height:100%;flex-shrink:1"}),Lt=function(e){var t=e.children,n={Left:null,Main:null,Right:null,Top:null};return o.Children.forEach(t,(function(e){e.type===Ct?n.Left=e:e.type===Mt?n.Right=e:e.type===Tt?n.Top=e:e.type===Pt&&(n.Main=e)})),(0,r.BX)(kt,{children:[(0,r.BX)(Et,{children:[n.Left,(0,r.tZ)(Rt,{})]}),(0,r.BX)(Et,{fullWidth:!0,children:[(0,r.BX)(Ot,{children:[(0,r.tZ)(It,{}),n.Top,(0,r.tZ)(It,{})]}),n.Main]}),(0,r.tZ)(Et,{children:n.Right})]})};Lt.Left=Ct,Lt.Top=Tt,Lt.Right=Mt,Lt.Main=Pt;var Nt,jt,Dt,Bt,zt,Ft,Vt,Ut,Zt,Ht,Gt,Wt,qt,Kt,Yt,Xt,$t,Jt,Qt,en,tn,nn,rn,on,an,sn,un,ln,cn,fn,hn,dn,pn,vn,mn,gn,yn,bn,xn,_n,wn,Sn=function(e){var t=e.ketcher;return(0,s.iv)("scrollbar-width:thin;scrollbar-color:",t.color.scroll.regular," ",t.color.scroll.inactive,";&::-webkit-scrollbar{width:4px;height:4px;background-color:",t.color.scroll.inactive,";border-radius:2px;-webkit-border-radius:2px;}&::-webkit-scrollbar-thumb{background-color:",t.color.scroll.regular,";border-radius:2px;-webkit-border-radius:2px;}&::-webkit-scrollbar-thumb:active{background-color:",t.color.scroll.regular,";}","")},En=["children","value","index"];function kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function An(e){var t=e.children,n=e.value,i=e.index,o=(0,b.Z)(e,En);return(0,r.tZ)("div",On(On({role:"tabpanel",hidden:n!==i,id:i},o),{},{children:n===i&&(0,r.tZ)(D,{children:t})}))}function Cn(e){var t=(0,o.useState)(0),n=(0,g.Z)(t,2),i=n[0],a=n[1],s=e.tabs,u=s[i],l=null===u||void 0===u?void 0:u.component,c=null===u||void 0===u?void 0:u.props,f=(0,m.Z)(x.Z,{target:"e58bl4b2"})({name:"1oug8xv",styles:"height:24px;min-height:24px;list-style-type:none;margin:0;padding:0;& .MuiTabs-indicator{display:none;}"}),h=(0,m.Z)(_.Z,{target:"e58bl4b1"})((function(e){var t=e.theme;return{minHeight:24,minWidth:60,height:1,width:65,padding:0,fontSize:t.ketcher.font.size.small,cursor:"pointer",textAlign:"center",backgroundColor:t.ketcher.color.tab.regular,color:t.ketcher.color.text.primary,listStyleType:"none",margin:0,"&:hover":{backgroundColor:t.ketcher.color.tab.hover,color:t.ketcher.color.text.light},"&.Mui-selected":{color:t.ketcher.color.text.light,backgroundColor:t.ketcher.color.tab.active}}}),""),d=(0,m.Z)("div",{target:"e58bl4b0"})((function(e){var t=e.theme;return On({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",overflowY:"auto",width:"100%"},Sn(t))}),"");return(0,r.BX)(r.HY,{children:[(0,r.tZ)(f,{value:i,onChange:function(e,t){a(t)},children:s.map((function(e,t){return(0,r.tZ)(h,On({label:e.caption},function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}(t)),t)}))}),u&&(0,r.tZ)(An,{value:i,index:i,children:(0,r.tZ)(d,{children:(0,r.tZ)(l,On({},c))})})]})}function Mn(){return Mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mn.apply(this,arguments)}function Tn(){return Tn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tn.apply(this,arguments)}function Pn(){return Pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pn.apply(this,arguments)}function Rn(){return Rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rn.apply(this,arguments)}function In(){return In=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},In.apply(this,arguments)}function Ln(){return Ln=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ln.apply(this,arguments)}function Nn(){return Nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nn.apply(this,arguments)}function jn(){return jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jn.apply(this,arguments)}function Dn(){return Dn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dn.apply(this,arguments)}function Bn(){return Bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bn.apply(this,arguments)}function zn(){return zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zn.apply(this,arguments)}function Fn(){return Fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fn.apply(this,arguments)}function Vn(){return Vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vn.apply(this,arguments)}function Un(){return Un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Un.apply(this,arguments)}function Zn(){return Zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zn.apply(this,arguments)}function Hn(){return Hn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hn.apply(this,arguments)}function Gn(){return Gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gn.apply(this,arguments)}function Wn(){return Wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wn.apply(this,arguments)}function qn(){return qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qn.apply(this,arguments)}function Kn(){return Kn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kn.apply(this,arguments)}function Yn(){return Yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yn.apply(this,arguments)}function Xn(){return Xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xn.apply(this,arguments)}function $n(){return $n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$n.apply(this,arguments)}function Jn(){return Jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jn.apply(this,arguments)}function Qn(){return Qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qn.apply(this,arguments)}function er(){return er=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},er.apply(this,arguments)}function tr(){return tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tr.apply(this,arguments)}function nr(){return nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nr.apply(this,arguments)}function rr(){return rr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rr.apply(this,arguments)}function ir(){return ir=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ir.apply(this,arguments)}function or(){return or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},or.apply(this,arguments)}function ar(){return ar=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ar.apply(this,arguments)}var sr,ur={"arrow-down":function(e){return o.createElement("svg",Mn({width:8,height:10,viewBox:"0 0 8 10",xmlns:"http://www.w3.org/2000/svg"},e),Nt||(Nt=o.createElement("path",{d:"M3.646 9.354a.5.5 0 00.708 0l3.182-3.182a.5.5 0 10-.708-.708L4 8.293 1.172 5.464a.5.5 0 10-.708.708l3.182 3.182zM3.5 0v9h1V0h-1z"})))},"arrow-up":function(e){return o.createElement("svg",Tn({width:21,height:27,viewBox:"0 0 21 27",xmlns:"http://www.w3.org/2000/svg"},e),jt||(jt=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.898 8.972L9.54.395a1.365 1.365 0 011.92 0l8.642 8.577c.53.527.53 1.38 0 1.906-.53.527-1.39.527-1.92 0l-6.324-6.276V26.5H9.142V4.602l-6.324 6.276c-.53.527-1.39.527-1.92 0a1.34 1.34 0 010-1.906z"})))},bracket:function(e){return o.createElement("svg",Pn({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),Dt||(Dt=o.createElement("path",{d:"M15 4v2h3v12h-3v2h3a2 2 0 002-2V6a2 2 0 00-2-2h-3zM6 4a2 2 0 00-2 2v12a2 2 0 002 2h3v-2H6V6h3V4H6z"})))},"capital-t":function(e){return o.createElement("svg",Rn({width:22,height:23,viewBox:"0 0 22 23",xmlns:"http://www.w3.org/2000/svg"},e),Bt||(Bt=o.createElement("path",{d:"M.5 0v4.5h8.25v18h4.5v-18h8.25V0H.5z"})))},checkmark:function(e){return o.createElement("svg",In({width:16,height:16,viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},e),zt||(zt=o.createElement("path",{d:"M3.34 6.803L6.4 9.857 12.664 3.6l.94.94L6.4 11.743l-4-4 .94-.94z"})))},chevron:function(e){return o.createElement("svg",Ln({width:16,height:16,viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},e),Ft||(Ft=o.createElement("path",{d:"M4.94 5.727L8 8.78l3.06-3.053.94.94-4 4-4-4 .94-.94z"})))},close:function(e){return o.createElement("svg",Nn({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Vt||(Vt=o.createElement("path",{d:"M12.665 4.273l-.94-.94L8 7.06 4.272 3.333l-.94.94L7.059 8l-3.727 3.727.94.94L7.999 8.94l3.726 3.727.94-.94L8.94 8l3.726-3.727z",fill:"#525252"})))},copy:function(e){return o.createElement("svg",jn({width:12,height:12,viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg"},e),Ut||(Ut=o.createElement("path",{d:"M9.5 10.5H4v-7h5.5v7zm0-8H4a1 1 0 00-1 1v7a1 1 0 001 1h5.5a1 1 0 001-1v-7a1 1 0 00-1-1zM8 .5H2a1 1 0 00-1 1v7h1v-7h6v-1z"})))},divider:function(e){return o.createElement("svg",Dn({width:24,height:1,viewBox:"0 0 24 1",xmlns:"http://www.w3.org/2000/svg"},e),Zt||(Zt=o.createElement("rect",{y:1,width:1,height:24,rx:.5,transform:"rotate(-90 0 1)"})))},dropdown:function(e){return o.createElement("svg",Bn({width:4,height:4,viewBox:"0 0 4 4",xmlns:"http://www.w3.org/2000/svg"},e),Ht||(Ht=o.createElement("path",{d:"M4 4H0l4-4v4z"})))},erase:function(e){return o.createElement("svg",zn({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),Gt||(Gt=o.createElement("path",{d:"M16.24 3.56l4.95 4.94c.78.79.78 2.05 0 2.84L12 20.53a4.008 4.008 0 01-5.66 0L2.81 17c-.78-.79-.78-2.05 0-2.84l10.6-10.6c.79-.78 2.05-.78 2.83 0zM4.22 15.58l3.54 3.53c.78.79 2.04.79 2.83 0l3.53-3.53-4.95-4.95-4.95 4.95z"})))},ellipse:function(e){return o.createElement("svg",Fn({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Wt||(Wt=o.createElement("path",{d:"M19 2.903v3h3v2h-3v3h-2v-3h-3v-2h3v-3h2z",fill:"#005662"})),qt||(qt=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 6V4C6.5 4 2 7.58 2 12s4.5 8 10 8 10-3.58 10-8h-2c0 3.31-3.59 6-8 6s-8-2.69-8-6 3.59-6 8-6z",fill:"#005662"})))},"file-thumbnail":function(e){return o.createElement("svg",Vn({width:29,height:37,viewBox:"0 0 29 37",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Kt||(Kt=o.createElement("path",{d:"M19.872.583H3.747A3.594 3.594 0 00.164 4.167v28.666a3.594 3.594 0 003.583 3.584h21.5a3.594 3.594 0 003.584-3.584V9.543L19.872.583zM3.747 32.833V4.168h14.334v7.167h7.166v21.5h-21.5z",fill:"#005662"})),Yt||(Yt=o.createElement("path",{d:"M12.21 10.723l-3.66 9.15 10.065 6.404",stroke:"#005662",strokeWidth:1.483})),Xt||(Xt=o.createElement("circle",{cx:12.213,cy:10.723,r:1.83,fill:"#005662"})),$t||($t=o.createElement("circle",{cx:8.552,cy:19.872,fill:"#005662",r:1.83})),Jt||(Jt=o.createElement("circle",{cx:18.619,cy:26.277,r:1.83,fill:"#005662"})))},fullscreen:function(e){return o.createElement("svg",ar({stroke:"currentColor",fill:"currentColor",strokeWidth:0,viewBox:"0 0 16 16",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg"},e),wn||(wn=o.createElement("path",{d:"M1.5 1a.5.5 0 00-.5.5v4a.5.5 0 01-1 0v-4A1.5 1.5 0 011.5 0h4a.5.5 0 010 1h-4zM10 .5a.5.5 0 01.5-.5h4A1.5 1.5 0 0116 1.5v4a.5.5 0 01-1 0v-4a.5.5 0 00-.5-.5h-4a.5.5 0 01-.5-.5zM.5 10a.5.5 0 01.5.5v4a.5.5 0 00.5.5h4a.5.5 0 010 1h-4A1.5 1.5 0 010 14.5v-4a.5.5 0 01.5-.5zm15 0a.5.5 0 01.5.5v4a1.5 1.5 0 01-1.5 1.5h-4a.5.5 0 010-1h4a.5.5 0 00.5-.5v-4a.5.5 0 01.5-.5z",stroke:"none"})))},help:function(e){return o.createElement("svg",Un({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),Qt||(Qt=o.createElement("path",{d:"M11 18h2v-2h-2v2zm1-16a10 10 0 100 20 10 10 0 000-20zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14a4 4 0 00-4 4h2a2 2 0 114 0c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5a4 4 0 00-4-4z"})))},"horizontal-flip":function(e){return o.createElement("svg",Zn({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),en||(en=o.createElement("path",{d:"M3 15v2h2v-2H3zm12 4v2h2v-2h-2zm4-16H5c-1.1 0-2 .9-2 2v4h2V5h14v4h2V5c0-1.1-.9-2-2-2zm2 16h-2v2c1.1 0 2-.9 2-2zM1 11v2h22v-2H1zm6 8v2h2v-2H7zm12-4v2h2v-2h-2zm-8 4v2h2v-2h-2zm-8 0c0 1.1.9 2 2 2v-2H3z",fill:"#005662"})))},open:function(e){return o.createElement("svg",Hn({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),tn||(tn=o.createElement("path",{d:"M6.1 10L4 18V8h17a2 2 0 00-2-2h-7l-2-2H4a2 2 0 00-2 2v12a2 2 0 002 2h15c.9 0 1.7-.6 1.9-1.5l2.3-8.5H6.1zM19 18H6l1.6-6h13L19 18z"})))},"rap-left-link":function(e){return o.createElement("svg",Gn({width:27,height:18,viewBox:"0 0 27 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),nn||(nn=o.createElement("path",{d:"M26 0v4.229a4 4 0 01-4 4H5a4 4 0 00-4 4V18"})))},"rap-middle-link":function(e){return o.createElement("svg",Wn({width:2,height:16,viewBox:"0 0 2 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),rn||(rn=o.createElement("path",{d:"M1 0v16"})))},"rap-right-link":function(e){return o.createElement("svg",qn({width:27,height:18,viewBox:"0 0 27 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),on||(on=o.createElement("path",{d:"M1 0v4.229a4 4 0 004 4h17a4 4 0 014 4V18"})))},rotate:function(e){return o.createElement("svg",Kn({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),an||(an=o.createElement("path",{d:"M7.34 6.41L.86 12.9l6.49 6.48 6.49-6.48-6.5-6.49zM3.69 12.9l3.66-3.66L11 12.9l-3.66 3.66-3.65-3.66zm15.67-6.26A8.95 8.95 0 0013 4V.76L8.76 5 13 9.24V6c1.79 0 3.58.68 4.95 2.05a7.007 7.007 0 010 9.9 6.973 6.973 0 01-7.79 1.44l-1.49 1.49C10 21.62 11.5 22 13 22c2.3 0 4.61-.88 6.36-2.64a8.98 8.98 0 000-12.72z"})))},rectangle:function(e){return o.createElement("svg",Yn({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),sn||(sn=o.createElement("path",{d:"M19 6h3v2h-3v3h-2V8h-3V6h3V3h2v3zm-2 11v-3h2v5H3V6h8v2H5v9h12z"})))},"select-lasso":function(e){return o.createElement("svg",Xn({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),un||(un=o.createElement("path",{d:"M13.239 16.342c.263.323.57.922.035 1.696-.53.748-1.546.554-2.86.303-1.088-.207-2.38-.454-3.771-.238a23.623 23.623 0 00-3.555.824s-1.017.292-.762 1.204c.254.901 1.192.753 1.192.753.072-.02.185-.057.333-.107.608-.203 1.816-.607 3.267-.755 1.304-.14 2.202.076 2.957.256.288.07.555.134.816.17.932.137 2.725.269 4.108-1.296L15 19.15v-3.086l-1.761.278zM20.527 23.584c-.296.155-.652.02-.788-.305l-1.292-3.07-1.487 1.308a.539.539 0 01-.367.143.568.568 0 01-.42-.19.68.68 0 01-.173-.458v-9.716a.68.68 0 01.174-.458.568.568 0 01.419-.19c.142 0 .278.059.379.15l.006-.007 6.808 6.244a.69.69 0 01.077.913.585.585 0 01-.338.22l-1.872.402 1.303 3.064a.651.651 0 01-.284.855l-2.145 1.095zM12.724 3.02a13.272 13.272 0 00-1.497.003 1 1 0 01-.117-1.997 15.269 15.269 0 011.723-.003 1 1 0 01-.11 1.997zM16.544 2.718a1 1 0 011.325-.495 11.754 11.754 0 011.421.77 1 1 0 11-1.079 1.685 8.962 8.962 0 00-1.171-.635 1 1 0 01-.496-1.325zM7.409 2.735a1 1 0 01-.49 1.327 9.698 9.698 0 00-1.166.639 1 1 0 11-1.087-1.679 10.914 10.914 0 011.416-.777 1 1 0 011.327.49zM21.024 5.838a1 1 0 011.338.46 6.503 6.503 0 01.497 1.417 1 1 0 11-1.953.431 4.197 4.197 0 00-.342-.97 1 1 0 01.46-1.338zM2.952 5.872a1 1 0 01.47 1.334 4.488 4.488 0 00-.335.971 1 1 0 11-1.956-.416 6.178 6.178 0 01.487-1.42 1 1 0 011.334-.47z"})),ln||(ln=o.createElement("path",{d:"M14.803 15.017l-2.31.216a1 1 0 00.78 1.714c.292-.025.585-.058.876-.1a1 1 0 00.851-.87v-.238a1.002 1.002 0 00-.033-.162l-.164-.56zM20.788 12.88l-.974-.978.87-1.202a1 1 0 011.59 1.174 7.057 7.057 0 01-.353.6 1 1 0 01-1.133.406zM2.16 10.563a1 1 0 011.353.413 5.64 5.64 0 00.621.915A1 1 0 112.6 13.173a7.636 7.636 0 01-.494-.66 7.09 7.09 0 01-.357-.597 1 1 0 01.412-1.353zM5.916 14.607a1 1 0 011.31-.533 10.823 10.823 0 001.335.464 1 1 0 11-.539 1.926 13.475 13.475 0 01-1.573-.547 1 1 0 01-.533-1.31z"})))},"select-rectangle":function(e){return o.createElement("svg",$n({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),cn||(cn=o.createElement("path",{d:"M3.8 1.648a1.8 1.8 0 00-1.8 1.8v2.7h1.8v-2.7h2.7v-1.8H3.8zM20 6.148v-2.7a1.8 1.8 0 00-1.8-1.8h-2.7v1.8h2.7v2.7H20zM20 12.138l-1.8-1.625V8.848H20v3.29zM17.158 19.648l-.1-.233-.268.233h.368zM2 15.148v2.7a1.8 1.8 0 001.8 1.8h2.7v-1.8H3.8v-2.7H2zM12.8 1.648H9.2v1.8h3.6v-1.8zM12.8 17.848H9.2v1.8h3.6v-1.8zM3.8 8.848H2v3.6h1.8v-3.6z",fill:"#005662"})),fn||(fn=o.createElement("path",{d:"M20.527 23.584c-.296.155-.652.02-.788-.305l-1.292-3.07-1.487 1.308a.539.539 0 01-.367.143.568.568 0 01-.42-.19.68.68 0 01-.173-.458v-9.716a.68.68 0 01.174-.458.568.568 0 01.419-.19c.142 0 .278.059.379.15l.006-.007 6.808 6.244a.69.69 0 01.077.913.585.585 0 01-.338.22l-1.872.402 1.303 3.064a.651.651 0 01-.284.855l-2.145 1.095z",fill:"#005662"})))},"select-fragment":function(e){return o.createElement("svg",Jn({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),hn||(hn=o.createElement("path",{d:"M20.527 23.584c-.296.155-.652.02-.788-.305l-1.292-3.07-1.487 1.308a.539.539 0 01-.367.143.568.568 0 01-.42-.19.68.68 0 01-.173-.458v-9.716a.68.68 0 01.174-.458.568.568 0 01.419-.19c.142 0 .278.059.379.15l.006-.007 6.808 6.244a.69.69 0 01.077.913.585.585 0 01-.338.22l-1.872.402 1.303 3.064a.651.651 0 01-.284.855l-2.145 1.095z",fill:"#005662"})),dn||(dn=o.createElement("path",{d:"M8.3 16H14v2H7L3 9l7-7 9 4v4h-.846L17 8.892V7.3l-6.6-2.9-5 5L8.3 16z",fill:"#005662"})))},settings:function(e){return o.createElement("svg",Qn({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),pn||(pn=o.createElement("path",{d:"M12 8a4 4 0 110 8 4 4 0 010-8zm0 2a2 2 0 100 4 2 2 0 000-4zm-2 12c-.25 0-.46-.18-.5-.42l-.37-2.65c-.63-.25-1.17-.59-1.69-.99l-2.49 1.01c-.22.08-.49 0-.61-.22l-2-3.46a.493.493 0 01.12-.64l2.11-1.66L4.5 12l.07-1-2.11-1.63a.493.493 0 01-.12-.64l2-3.46c.12-.22.39-.31.61-.22l2.49 1c.52-.39 1.06-.73 1.69-.98l.37-2.65c.04-.24.25-.42.5-.42h4c.25 0 .46.18.5.42l.37 2.65c.63.25 1.17.59 1.69.98l2.49-1c.22-.09.49 0 .61.22l2 3.46c.13.22.07.49-.12.64L19.43 11l.07 1-.07 1 2.11 1.63c.19.15.25.42.12.64l-2 3.46c-.12.22-.39.31-.61.22l-2.49-1c-.52.39-1.06.73-1.69.98l-.37 2.65c-.04.24-.25.42-.5.42h-4zm1.25-18l-.37 2.61c-1.2.25-2.26.89-3.03 1.78L5.44 7.35l-.75 1.3L6.8 10.2a5.55 5.55 0 000 3.6l-2.12 1.56.75 1.3 2.43-1.04c.77.88 1.82 1.52 3.01 1.76l.37 2.62h1.52l.37-2.61c1.19-.25 2.24-.89 3.01-1.77l2.43 1.04.75-1.3-2.12-1.55c.4-1.17.4-2.44 0-3.61l2.11-1.55-.75-1.3-2.41 1.04a5.42 5.42 0 00-3.03-1.77L12.75 4h-1.5z"})))},star:function(e){return o.createElement("svg",er({width:14,height:13,viewBox:"0 0 14 13",xmlns:"http://www.w3.org/2000/svg"},e),vn||(vn=o.createElement("path",{d:"M7.26 9.75l-.257-.157-.26.155L3.6 11.627l.854-3.539.071-.296-.23-.2-2.74-2.367L5.16 4.91l.299-.026.117-.276 1.42-3.325 1.393 3.322.117.279.3.026 3.63.315L9.676 7.59l-.23.197.068.295.816 3.538L7.26 9.75z"})))},"single-bond":function(e){return o.createElement("svg",tr({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),mn||(mn=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.53 18.53a.75.75 0 010-1.06L17.47 4.53a.75.75 0 111.06 1.061L5.591 18.531a.75.75 0 01-1.06 0z"})))},"vertical-flip":function(e){return o.createElement("svg",nr({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),gn||(gn=o.createElement("path",{d:"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z",fill:"#005662"})))},undo:function(e){return o.createElement("svg",rr({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),yn||(yn=o.createElement("path",{d:"M12.5 8c-2.65 0-5.05 1-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"})))},save:function(e){return o.createElement("svg",ir({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),bn||(bn=o.createElement("path",{d:"M16.999 3h-12a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2V7l-4-4zm2 16h-14V5h11.17l2.83 2.83V19zM6.499 6.5h8v3h-8v-3z",fill:"#005662"})),xn||(xn=o.createElement("path",{d:"M13.999 15a2 2 0 11-4 0 2 2 0 014 0z",fill:"#005662"})))},error:function(e){return o.createElement("svg",or({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),_n||(_n=o.createElement("path",{d:"M8.001 14a1.333 1.333 0 100-2.667 1.333 1.333 0 000 2.667zM6.668 2h2.667v8H6.668V2z",fill:"#FF4A4A"})))}},lr=function(e){var t=e.name,n=e.className,i=(0,u.a)(),o=ur[t];if(!o)return null;var a=i.ketcher.color.icon.active;return(0,r.tZ)(o,{className:n,fill:a,role:"img"})};!function(e){e[e.Nucleotide=0]="Nucleotide",e[e.Sugar=1]="Sugar",e[e.Nucleobase=2]="Nucleobase",e[e.Phosphate=3]="Phosphate"}(sr||(sr={}));var cr=["rap-left-link","rap-middle-link","rap-right-link"],fr=function(e){var t=e.isActive,n=e.children,i=e.callback,o=(0,u.a)().ketcher.color,a=(0,s.iv)("padding:3px 12px;background-color:",t?o.button.primary.active:o.background.canvas,";border-radius:8px;line-height:18px;min-width:33px;color:",t?o.text.light:o.text.dark,";:hover{background-color:",o.button.primary.hover,";color:",o.text.light,";}","");return(0,r.tZ)(Ue.Z,{css:a,onClick:i,children:n})},hr=(0,m.Z)("div",{target:"e1dv8vvk4"})({name:"24p7d3",styles:"width:100%;display:flex;flex-direction:column;align-items:center;margin:8px 0"}),dr=(0,m.Z)("div",{target:"e1dv8vvk3"})({name:"f77vq6",styles:"display:flex;gap:11px"}),pr=(0,m.Z)("div",{target:"e1dv8vvk2"})({name:"490tlg",styles:"display:flex;gap:4px"}),vr=(0,m.Z)(lr,{target:"e1dv8vvk1"})((function(e){var t=e.isActive,n=e.theme;return{fill:"none","& path":{strokeDasharray:t?"none":"4,4",stroke:t?n.ketcher.color.button.primary.active:"#D1D5E3"}}}),""),mr=(0,m.Z)(Ue.Z,{target:"e1dv8vvk0"})("margin-left:auto;height:15px;color:#ff2727;font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";min-width:30px;text-transform:none;:hover{background-color:unset;}"),gr=function(e){var t=e.selectedMonomers,n=e.setActiveMonomerType,i=(0,o.useState)(0),a=(0,g.Z)(i,2),s=a[0],u=a[1],l=function(e,t){n(e),u(t)},c=(0,g.Z)(t,3),f=c[0],h=c[1],d=c[2],p="".concat(f,"(").concat(h,")").concat(d);return(0,r.BX)(r.HY,{children:[(0,r.BX)(hr,{children:[(0,r.tZ)(fr,{callback:function(){return l(sr[0],0)},isActive:0===s,children:p}),(0,r.tZ)(dr,{children:cr.map((function(e,t){return(0,r.tZ)(vr,{name:e,isActive:s===t+1},e)}))}),(0,r.tZ)(pr,{children:t.map((function(e,t){return(0,r.tZ)(fr,{callback:function(){return l(sr[t+1],t+1)},isActive:s===t+1,children:e},e)}))})]}),(0,r.tZ)(mr,{variant:"text",onClick:function(){n("reset"),u(0)},children:"Reset"})]})},yr=(0,m.Z)("div",{target:"e1k2qvds0"})("background:",(function(e){var t=e.colorScheme,n=e.theme;return t||n.ketcher.color.monomer.default}),";border-radius:2px;width:48px;height:48px;text-align:center;cursor:pointer;display:flex;justify-content:center;align-items:center;font-size:",(function(e){return e.theme.ketcher.font.size.small}),";"),br=function(e){var t=e.item,n=e.onClick;return(0,r.tZ)(yr,{onClick:n,colorScheme:t.colorScheme,children:t.label})};var xr=(0,m.Z)("div",{target:"e1pb7bo32"})({name:"14iafuc",styles:"width:100%;height:100%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;margin:0 15px;&>*{margin:4px 2px;}"}),_r=(0,m.Z)("div",{target:"e1pb7bo31"})("display:block;height:5px;width:10px;border-bottom:1px solid;border-color:",(function(e){return e.theme.ketcher.color.divider}),";"),wr=(0,m.Z)("div",{target:"e1pb7bo30"})("width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:wrap;justify-content:flex-start;font-size:",(function(e){return e.theme.ketcher.font.size.small}),";font-family:",(function(e){return e.theme.ketcher.font.family.roboto}),";color:",(function(e){return e.theme.ketcher.color.divider}),";margin:4px 4px 0;"),Sr=function(e){var t=e.items,n=e.title,i=e.onItemClick;return(0,r.BX)(r.HY,{children:[n&&(0,r.BX)(wr,{children:[(0,r.tZ)("span",{children:n}),(0,r.tZ)(_r,{})]}),(0,r.tZ)(xr,{children:t.map((function(e,t){return(0,r.tZ)(br,{item:e,onClick:function(){return i(e)}},t)}))})]})},Er=function(e){var t=e.list,n=e.onItemClick;return(0,r.tZ)(r.HY,{children:t.map((function(e,t){var i=e.groupTitle,o=e.groupItems;return(0,r.tZ)(Sr,{title:i,items:o,onItemClick:n},t)}))})};function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ar=function(e){return e.Nucleotide[0].groupItems[0].monomers},Cr=[{caption:"\u2729",component:function(){return(0,r.tZ)(r.HY,{})}},{caption:"Peptides",component:Er,props:{list:[{groupItems:[{label:"P"},{label:"vfvv"},{label:"qswsx"},{label:"Mesk"}]}],onItemClick:function(){}}},{caption:"RNA",component:function(e){var t=e.selectItem,n=e.items,i=(0,o.useState)(Ar(n)),a=(0,g.Z)(i,2),s=a[0],u=a[1],l=(0,o.useState)("Nucleotide"),c=(0,g.Z)(l,2),f=c[0],h=c[1];(0,o.useEffect)((function(){var e="Nucleotide"===f?s:s[f];t(e)}),[t,f,s]);return(0,r.BX)(r.HY,{children:[(0,r.tZ)(gr,{selectedMonomers:Object.values(s),setActiveMonomerType:function(e){"reset"===e?(h("Nucleotide"),u(Ar(n))):h(e)}}),(0,r.tZ)(Er,{list:n[f],onItemClick:function(e){u("Nucleotide"===f?e.monomers:function(t){return Or(Or({},t),{},(0,y.Z)({},f,e.label))})}})]})},props:{items:{Nucleotide:[{groupItems:[{label:"A",monomers:{Sugar:"R",Nucleobase:"A",Phosphate:"P"}},{label:"C",monomers:{Sugar:"R",Nucleobase:"C",Phosphate:"P"}},{label:"G",monomers:{Sugar:"R",Nucleobase:"G",Phosphate:"P"}},{label:"T",monomers:{Sugar:"R",Nucleobase:"T",Phosphate:"P"}},{label:"U",monomers:{Sugar:"R",Nucleobase:"U",Phosphate:"P"}}],groupTitle:"Nucleotides"}],Nucleobase:[{groupItems:[{label:"A",colorScheme:"#A0A0FF"},{label:"2ldg"},{label:"4skmc"},{label:"7jds"},{label:"dc"}],groupTitle:"A"},{groupItems:[{label:"C"},{label:"5dvd"},{label:"9dkvj"},{label:"sd6"},{label:"dsa"}],groupTitle:"C"}],Sugar:[{groupItems:[{label:"R"},{label:"m"},{label:"d"},{label:"ar"},{label:"Ld"}]}],Phosphate:[{groupItems:[{label:"p"},{label:"36dcd"},{label:"bnn"},{label:"bp"},{label:"me"}]}]},selectItem:function(e){}}},{caption:"CHEM",component:function(){return(0,r.tZ)(r.HY,{})}}],Mr=(0,m.Z)("div",{target:"e2igpet0"})((function(e){return{width:"253px",height:"100%",backgroundColor:e.theme.ketcher.color.background.primary}}),""),Tr=function(){return(0,r.tZ)(Mr,{children:(0,r.tZ)(Cn,{tabs:Cr})})};var Pr=(0,m.Z)(lr,{target:"e1bnhm9w1"})({name:"1ux2zfx",styles:"fill:#343434"}),Rr=(0,m.Z)(lr,{target:"e1bnhm9w0"})({name:"wpnrak",styles:"user-select:none;width:16px;height:1em;display:inline-block;flex-shrink:0;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;position:absolute;right:7px;top:calc(50% - 0.5em);pointer-events:none;fill:#5b6077"}),Ir=function(e){var t=e.className;return(0,r.tZ)(Rr,{name:"chevron",className:t})},Lr=function(e){return e.isSelected?(0,r.tZ)(Pr,{name:"checkmark"}):null};function Nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nr(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dr={name:"af34ib",styles:"background-color:white;border-bottom-left-radius:0;border-bottom-right-radius:0"},Br=(0,m.Z)(Ze.Z,{target:"e1gkbopp1"})("width:150px;height:24px;border:1px solid #5b6077;border-radius:2px;",(function(e){return e.open&&Dr})," & .MuiSelect-select{padding:0 24px 0 8px;height:100%;}& span{",(function(e){var t=e.theme;return"font-size: ".concat(t.ketcher.font.size.regular)}),";}& .MuiOutlinedInput-notchedOutline{border:0;}"),zr={width:"120px",backgroundColor:"white",border:"1px solid #5B6077",borderTopWidth:"0",borderRadius:"0px 0px 2px 2px",boxShadow:"none"},Fr=(0,m.Z)(He.Z,{target:"e1gkbopp0"})("display:flex;flex-direction:row;justify-content:space-between;padding:0 8px 0 8px;height:24px;& .MuiTypography-root{",(function(e){var t=e.theme;return"font-size: ".concat(t.ketcher.font.size.regular)}),";}"),Vr=function(e){var t=e.options,n=e.currentSelection,i=e.selectionHandler,a=e.className,s=e.customStylesForExpanded,u=void 0===s?{}:s,l=(0,o.useState)(!1),c=(0,g.Z)(l,2),f=c[0],h=c[1];return(0,r.tZ)(Q,{className:a,children:(0,r.tZ)(Br,{value:n,onChange:function(e){i(e.target.value)},open:f,onOpen:function(){h(!0)},onClose:function(){h(!1)},renderValue:function(e){var n=t.filter((function(t){return t.id===e}))[0];return(0,r.tZ)("span",{children:n.label})},IconComponent:Ir,fullWidth:!0,MenuProps:{PaperProps:{style:jr(jr({},zr),u)},MenuListProps:{style:{padding:"0"}}},children:t.map((function(e){return(0,r.BX)(Fr,{value:e.id,children:[(0,r.tZ)(fe,{primary:e.label}),(0,r.tZ)(Lr,{isSelected:e.id===n})]},e.id)}))})})},Ur=(0,m.Z)("div",{target:"e198b2fz0"})("top:",3,"px;position:relative;padding-left:",10,"px;padding-right:",10,"px;display:flex;justify-content:flex-end;flex-direction:column;",(function(e){var t=e.theme;return(0,s.iv)("background-color:",t.ketcher.color.background.primary,";border:",1,"px solid ",t.ketcher.color.background.primary,";","")}),";border-radius:2px;z-index:1;",(function(e){return e.hasInput?(0,s.iv)("margin-top:-",10,"px;margin-bottom:-",10,"px;padding-top:",10,"px;padding-bottom:",10,"px;",""):(0,s.iv)("padding-top:",3,"px;margin-top:-",3,"px;padding-bottom:",3,"px;margin-bottom:-",3,"px;","")})," &:focus-within{border-color:#3e7bfa;}"),Zr=(0,m.Z)(lr,{target:"e1gtkwjo0"})("fill:",(function(e){return e.theme.ketcher.color.icon.active}),";",(function(e){return e.isFlipped&&"transform: rotate(0.5turn);"}),";"),Hr=function(e){var t=e.expandHandler,n=e.expanded,i="".concat(n?"Collapse":"Expand"," input area");return(0,r.tZ)(Ge.Z,{onClick:t,title:i,children:(0,r.tZ)(Zr,{name:"arrow-down",isFlipped:n})})};var Gr="\n  line-height: ".concat(16,"px;\n  width: ").concat(335,"px;\n  border: none;\n  resize: none;\n  padding: 0;\n"),Wr={name:"1sot2q6",styles:"white-space:nowrap;overflow:hidden"},qr=(0,m.Z)("textarea",{target:"e1x33kw2"})(Gr," ",(function(e){var t=e.theme;return Sn(t)})," outline:none;",(function(e){return e.shouldHideOverflow?Wr:null}),";"),Kr=(0,m.Z)("textarea",{target:"e1x33kw1"})(Gr,";visibility:hidden;position:absolute;overflow:hidden;height:0;top:0;left:0;transform:translateZ(0);"),Yr=(0,m.Z)("span",{target:"e1x33kw0"})((function(e){var t=e.shouldDisplay,n=e.theme;return t?(0,s.iv)("display:inline-block;position:absolute;right:0;font-size:",n.ketcher.font.size.medium,";line-height:",16,"px;padding-left:3px;padding-right:",10,"px;background-color:",n.ketcher.color.background.primary,";box-shadow:-3px 0 5px 2px ",n.ketcher.color.background.primary,";",""):"display: none"}),";"),Xr=function(e){var t=e.inputValue,n=e.inputHandler,i=e.isFocused,a=e.isMultiLine,s=e.isCollapsed,u=e.setMultiLine,l=e.maxRows,c=void 0===l?8:l,f=(0,o.useRef)(null),h=(0,o.useRef)(null),d=(0,o.useCallback)((function(){var e=f.current,n=h.current;if(e&&n){n.value=" ";var r=n.scrollHeight;n.value=t;var i=n.scrollHeight;n.value=" ";var o=s?1:c,a=Math.min(Number(o)*r,i);u(i/r>1),e.style.height="".concat(a,"px")}}),[c,t,u,s]);(0,o.useEffect)((function(){d()}),[d]),(0,o.useEffect)((function(){var e=f.current;i&&e&&e.focus()}),[i]);return(0,r.BX)(r.HY,{children:[(0,r.tZ)(qr,{ref:f,value:t,onChange:function(e){n(e.target.value)},shouldHideOverflow:a&&s}),(0,r.tZ)(Yr,{shouldDisplay:a&&s,children:"..."}),(0,r.tZ)(Kr,{"aria-hidden":"true",ref:h})]})},$r=(0,m.Z)("div",{target:"ew8atn80"})("height:100%;width:",375,"px;overflow:visible;position:relative;display:flex;align-items:flex-start;justify-content:flex-start;"),Jr=function(e){var t=e.inputValue,n=e.inputHandler,i=(0,o.useState)(!1),a=(0,g.Z)(i,2),s=a[0],u=a[1],l=(0,o.useState)(!1),c=(0,g.Z)(l,2),f=c[0],h=c[1],d=(0,o.useState)(!1),p=(0,g.Z)(d,2),v=p[0],m=p[1];return(0,r.BX)($r,{children:[(0,r.tZ)(Ur,{hasInput:Boolean(t),onClick:function(){f||h(!0),u(!0)},onBlur:function(){return u(!1)},children:(0,r.tZ)(Xr,{inputValue:t,maxRows:8,inputHandler:n,isFocused:s,isMultiLine:v,isCollapsed:!f,setMultiLine:m})}),v&&(0,r.tZ)(Hr,{expandHandler:function(){return h((function(e){return!e}))},expanded:f})]})},Qr=["label","clickHandler","children","styleType"];function ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ti(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ei(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ni={name:"urkvsh",styles:"padding:5px 8px;border-radius:2px;text-transform:none;line-height:14px;font-size:12px;text-align:center"},ri=(0,m.Z)(qe.Z,{target:"evxgg171"})((function(e){var t=e.theme;return{backgroundColor:t.ketcher.color.button.primary.active,color:t.ketcher.color.text.light,border:"none",fontWeight:t.ketcher.font.weight.regular,"&:hover":{backgroundColor:t.ketcher.color.button.primary.hover},"&:disabled":{background:t.ketcher.color.button.primary.disabled,opacity:.4}}}),ni,""),ii=(0,m.Z)(qe.Z,{target:"evxgg170"})((function(e){var t=e.theme;return{backgroundColor:"transparent",border:"1px solid ".concat(t.ketcher.color.button.secondary.active),color:t.ketcher.color.button.secondary.active,fontWeight:t.ketcher.font.weight.regular,"&:hover":{border:"1px solid ".concat(t.ketcher.color.button.secondary.hover),color:t.ketcher.color.button.secondary.hover},"&:disabled":{border:"1px solid ".concat(t.ketcher.color.button.secondary.disabled),color:t.ketcher.color.button.secondary.disabled},"&:clicked":{border:"1px solid ".concat(t.ketcher.color.button.secondary.clicked),color:t.ketcher.color.button.secondary.clicked}}}),ni,""),oi=function(e){var t=e.label,n=e.clickHandler,i=e.children,o=e.styleType,a=(0,b.Z)(e,Qr);return"secondary"===o?(0,r.tZ)(ii,ti(ti({onClick:n,title:a.title||t,role:"button"},a),{},{children:i||t})):(0,r.tZ)(ri,ti(ti({onClick:n,title:a.title||t,role:"button"},a),{},{children:i||t}))},ai=(0,m.Z)("div",{target:"el1hlg80"})("display:flex;align-items:center;justify-content:space-between;height:",24,"px;width:",670,"px;"),si=function(e){var t=e.notationOptions,n=e.selectedNotationId,i=e.selectionHandler,o=e.inputValue,a=e.inputHandler,s=e.addButtonHandler;return(0,r.BX)(ai,{children:[(0,r.tZ)(Vr,{options:t,currentSelection:n,selectionHandler:i}),(0,r.tZ)(Jr,{inputValue:o,inputHandler:a}),(0,r.tZ)(oi,{label:"Add to Canvas",clickHandler:s,disabled:!o})]})},ui=[{id:"1",label:"HELM Notation"},{id:"2",label:"RNA Sequence"},{id:"3",label:"Peptide Sequence"},{id:"4",label:"Black"}],li=function(){var e=(0,o.useState)(""),t=(0,g.Z)(e,2),n=t[0],i=t[1],a=(0,o.useState)(ui[0].id),s=(0,g.Z)(a,2),u=s[0],l=s[1];return(0,r.tZ)(si,{notationOptions:ui,selectedNotationId:u,selectionHandler:l,inputValue:n,inputHandler:i,addButtonHandler:function(){return null}})},ci=o.createContext({}),fi=function(){return o.useContext(ci)},hi=function(e){var t=e.isActive,n=e.onClick,i=e.children,o=(0,u.a)(),a=(0,s.iv)("display:flex;align-items:center;width:32px;height:32px;padding:0;justify-content:center;border-radius:2px;background-color:",t?o.ketcher.color.icon.activeMenu:o.ketcher.color.background.primary,";&:hover{background:",t?o.ketcher.color.icon.activeMenu:o.ketcher.color.background.primary,";}&>svg path{fill:",t?o.ketcher.color.icon.clicked:o.ketcher.color.icon.activeMenu,";}","");return(0,r.tZ)(He.Z,{css:a,onClick:n,children:i})},di=function(e){var t=e.itemId,n=fi(),i=n.isActive,a=n.activate,s=(0,o.useCallback)((function(){a(t)}),[a,t]);return(0,r.tZ)(hi,{isActive:i(t),onClick:s,children:(0,r.tZ)(lr,{name:t})})};var pi=(0,m.Z)("div",{target:"egn64i14"})({name:"5ob2ly",styles:"display:flex;position:relative"}),vi=(0,m.Z)("div",{target:"egn64i13"})("display:flex;position:absolute;left:5px;border-radius:2px;flex-direction:",(function(e){return e.isVertical?"column":"row"}),";"),mi=(0,m.Z)("div",{target:"egn64i12"})("display:flex;width:6px;height:6px;position:absolute;bottom:0;right:0;>svg path{fill:",(function(e){var t=e.isActive,n=e.theme;return t?n.ketcher.color.icon.clicked:n.ketcher.color.icon.activeMenu}),";}"),gi=(0,m.Z)(Ke.Z,{target:"egn64i11"})({name:"bjn8wh",styles:"position:relative"}),yi=(0,m.Z)("div",{target:"egn64i10"})({name:"a1qh1t",styles:"display:flex;align-items:center;position:relative;width:32px;height:32px;padding:0;justify-content:center;border-radius:2px"}),bi=function(e){var t=e.children,n=e.vertical,i=void 0!==n&&n,a=(0,o.useState)(!1),s=(0,g.Z)(a,2),u=s[0],l=s[1],c=fi().isActive,f=function(){u&&l(!1)},h=o.Children.map(t,(function(e){return e.type===di?e:null})),d=h.map((function(e){return e.props.itemId})).filter((function(e){return e})),p=d.filter((function(e){return c(e)})),v=p.length?p[0]:d[0];return(0,r.BX)(pi,{children:[(0,r.BX)(yi,{children:[(0,r.tZ)(di,{itemId:v}),(0,r.tZ)(mi,{isActive:c(v),onClick:function(){l((function(e){return!e}))},children:(0,r.tZ)(lr,{name:"dropdown"})})]}),(0,r.tZ)(gi,{in:u,timeout:"auto",unmountOnExit:!0,onClick:f,children:(0,r.tZ)(We.Z,{onClickAway:f,children:(0,r.tZ)(vi,{isVertical:i,children:h.map((function(e){return e}))})})})]})},xi=(0,m.Z)("span",{target:"e1agxudk1"})("display:block;height:8px;width:32px;border-top:1px solid;border-color:",(function(e){return e.theme.ketcher.color.divider}),";"),_i=(0,m.Z)("div",{target:"e1agxudk0"})("display:flex;flex-direction:column;flex-wrap:nowrap;align-items:center;background-color:",(function(e){return e.theme.ketcher.color.background.primary}),";border-radius:2px;width:32px;margin-bottom:8px;>*{margin-bottom:8px;}>:last-child{margin-bottom:0;}"),wi=function(e){var t=e.children,n=e.divider,i=void 0!==n&&n,a=o.Children.map(t,(function(e){return e.type===di||bi?e:null}));return(0,r.BX)(r.HY,{children:[(0,r.tZ)(_i,{children:a.map((function(e){return e}))}),i&&(0,r.tZ)(xi,{})]})},Si=function(e){var t=e.children,n=e.onItemClick,i=e.activeMenuItem,a=o.useMemo((function(){return{isActive:function(e){return i===e},activate:function(e){n(e)}}}),[i,n]),s=o.Children.map(t,(function(e){return e.type===wi?e:null}));return(0,r.tZ)(ci.Provider,{value:a,children:s.map((function(e){return e}))})};Si.Group=wi,Si.Item=di,Si.Submenu=bi;var Ei=function(){return(0,i.I0)()},ki=i.v9,Oi=(0,m.Z)("div",{target:"e1mrqb6u0"})((function(e){var t=e.theme;return{fontFamily:t.ketcher.font.family.montserrat,fontSize:t.ketcher.font.size.medium,fontWeight:t.ketcher.font.weight.bold,color:t.ketcher.color.text.secondary,display:"flex",flexDirection:"column",alignItems:"center",height:"auto",position:"absolute",bottom:"15px",left:"13px","> span:first-of-type, > span:last-of-type":{fontWeight:t.ketcher.font.weight.light,fontSize:t.ketcher.font.size.xsmall,textTransform:"uppercase"},"> span:last-of-type":{fontWeight:t.ketcher.font.weight.regular},"> span:nth-of-type(2)":{color:t.ketcher.color.text.primary,"&:first-letter":{color:t.ketcher.color.text.secondary}}}}),""),Ai=function(){return(0,r.BX)(Oi,{children:[(0,r.tZ)("span",{children:"Polymer Editor"}),(0,r.tZ)("span",{children:"Ketcher"}),(0,r.tZ)("span",{children:"EPAM"})]})};function Ci(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Mi=(0,m.Z)(ge,{target:"exzirv73"})((function(e){var t=e.theme;return{margin:"12px 11px 12px 16px",padding:0,display:"flex",alignItems:"center",justifyContent:"space-between",fontFamily:"".concat(t.ketcher.font.family.inter),fontSize:"".concat(t.ketcher.font.size.medium),fontWeight:"".concat(t.ketcher.font.weight.regular),textTransform:"uppercase"}}),""),Ti=(0,m.Z)("div",{target:"exzirv72"})({name:"nkt64x",styles:"margin-right:10px"}),Pi=(0,m.Z)(_e,{target:"exzirv71"})((function(e){var t=e.theme;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ci(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ci(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({margin:"0 16px 16px",padding:0},Sn(t))}),""),Ri=(0,m.Z)(ke,{target:"exzirv70"})({name:"1mep41x",styles:"margin:0 16px 16px;padding:0"}),Ii=function(e){var t=e.children,n=e.title,i=e.isOpen,a=e.showCloseButton,s=void 0===a||a,l=e.onClose,c=e.className,f=(0,u.a)(),h=(0,o.useMemo)((function(){return{style:{minWidth:"20vw",background:f.ketcher.color.background.canvas,borderRadius:"8px",color:f.ketcher.color.text.primary}}}),[f.ketcher.color.text.primary,f.ketcher.color.background.canvas]),d=(0,o.useMemo)((function(){return{style:{background:f.ketcher.color.background.overlay,opacity:.4}}}),[f.ketcher.color.background.overlay]),p={Content:null,Footer:null};return o.Children.forEach(t,(function(e){e.type===Pi?p.Content=e:e.type===Ri&&(p.Footer=e)})),(0,r.BX)(Ve,{BackdropProps:d,PaperProps:h,open:i,maxWidth:"md",onClose:l,disableEscapeKeyDown:!s,className:c,children:[(0,r.BX)(Mi,{children:[(0,r.tZ)(Ti,{children:n}),s&&(0,r.tZ)(Ge.Z,{title:"Close window",onClick:l,children:(0,r.tZ)(lr,{name:"close"})})]}),p.Content,p.Footer]})};Ii.Content=Pi,Ii.Footer=Ri;var Li=(0,m.Z)("div",{target:"ews046q0"})("display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;width:40px;height:12px;margin-top:10px;& span{display:inline-block;width:8px;height:8px;border:2px solid ",(function(e){return e.theme.ketcher.color.spinner}),";border-radius:100%;box-sizing:border-box;&:nth-of-type(1){animation:bounce 1s ease-in-out infinite;}&:nth-of-type(2){animation:bounce 1s ease-in-out 0.33s infinite;}&:nth-of-type(3){animation:bounce 1s ease-in-out 0.66s infinite;}}@keyframes bounce{0%,75%,100%{-webkit-transform:translateY(0);-ms-transform:translateY(0);-o-transform:translateY(0);transform:translateY(0);}25%{-webkit-transform:translateY(-100%);-ms-transform:translateY(-100%);-o-transform:translateY(-100%);transform:translateY(-100%);}}"),Ni=function(){return(0,r.BX)(Li,{children:[(0,r.tZ)("span",{}),(0,r.tZ)("span",{}),(0,r.tZ)("span",{})]})};var ji=(0,m.Z)("div",{target:"e1sgaql31"})({name:"1btsn9l",styles:"width:410px;min-height:23em;flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center"}),Di=(0,m.Z)("div",{target:"e1sgaql30"})({name:"vbftiw",styles:"display:flex;flex-direction:row;align-items:center;svg{margin-right:13px;}p{color:#585858;font-size:16px;line-height:19px;}"}),Bi=function(e){var t=e.fileName;return(0,r.BX)(ji,{children:[t&&(0,r.BX)(Di,{children:[(0,r.tZ)(lr,{name:"file-thumbnail"}),(0,r.tZ)("p",{children:t})]}),(0,r.tZ)(Ni,{})]})},zi=["buttonLabel","textLabel","iconName","disabled","disabledText"];function Fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fi(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ui={width:"100%",height:"100%",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"space-around"},Zi={backgroundColor:"#F8FEFFFF"},Hi=(0,m.Z)("div",{target:"e1jpd6mb0"})("display:flex;flex-direction:column;align-items:center;margin-top:8px;&>span{padding-top:5px;font-size:",(function(e){return e.theme.ketcher.font.size.small}),";}&>svg{margin-bottom:8px;}"),Gi=function(e){var t=e.buttonLabel,n=e.textLabel,i=e.iconName,a=e.disabled,s=e.disabledText,u=(0,b.Z)(e,zi),l=(0,Ye.uI)(Vi({multiple:!1,noClick:!0,disabled:a},u)),c=l.getRootProps,f=l.getInputProps,h=l.isDragActive,d=l.open,p=(0,o.useMemo)((function(){return Vi(Vi({},Ui),h?Zi:{})}),[h]);return(0,r.BX)("div",Vi(Vi({},c({style:p})),{},{children:[(0,r.tZ)("input",Vi({},f())),(0,r.BX)(Hi,{children:[(0,r.tZ)(oi,{label:t,clickHandler:d,disabled:a}),n&&(0,r.tZ)("span",{children:n})]}),a?(0,r.tZ)("p",{children:s}):(0,r.tZ)(lr,{name:i})]}))};var Wi="capital-t",qi="arrow-up",Ki=(0,m.Z)("div",{target:"ezys1rm1"})({name:"h9hj7s",styles:"display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;margin-bottom:20px;&>*{margin-right:18px;}& :last-child{margin-right:0;}"}),Yi=(0,m.Z)("div",{target:"ezys1rm0"})("width:152px;height:112px;border:1px solid #aeaeae;border-radius:4px;flex:1;display:flex;flex-direction:column;justify-content:space-around;align-items:center;box-sizing:border-box;position:relative;&>p{margin-top:6px;text-align:center;}svg{fill:",(function(e){return e.theme.ketcher.color.button.primary.active}),";}"),Xi=function(e){var t=e.selectClipboard,n=e.fileLoadHandler,i=e.errorHandler;return(0,r.BX)(Ki,{children:[(0,r.BX)(Yi,{children:[(0,r.tZ)(oi,{clickHandler:t,label:"Paste from Clipboard"}),(0,r.tZ)(lr,{name:Wi})]}),(0,r.tZ)(Yi,{children:(0,r.tZ)(Gi,{onDropAccepted:n,onDropRejected:function(e){return i("Unable to accept file(s). ".concat(e))},buttonLabel:"Open from file",textLabel:"or drag file here",iconName:qi})})]})},$i=(0,m.Z)("textarea",{target:"e1jn6xrw0"})("width:100%;height:100%;overflow:auto;white-space:pre;resize:none;box-sizing:border-box;outline:transparent;border:none;padding:8px;color:",(function(e){return e.theme.ketcher.color.input.text.default}),";font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";",(function(e){var t=e.theme;return Sn(t)}),";&:hover{cursor:",(function(e){return e.readOnly&&"not-allowed"}),";}"),Ji=function(e){var t=e.struct,n=e.inputHandler,i=e.readonly,a=void 0!==i&&i,s=e.selectOnInit,u=void 0!==s&&s,l=e.className,c=(0,o.useRef)(null);return(0,o.useEffect)((function(){var e;u&&(null===(e=c.current)||void 0===e||e.select())}),[c,t,u]),(0,r.tZ)($i,{value:t,readOnly:a,onChange:n&&function(e){return n(e.target.value)},ref:c,className:l})};function Qi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qi(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var to=(0,m.Z)(Ji,{target:"e9hx4ni0"})({name:"urwyie",styles:"width:405px;height:320px"}),no=function(e){if(e.isAnalyzingFile)return(0,r.tZ)(Bi,{fileName:e.fileName});switch(e.currentState){case e.states.openOptions:return(0,r.tZ)(Xi,eo({},e));case e.states.textEditor:return(0,r.tZ)(to,eo({},e));default:return null}};function ro(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){var n=r.result;e.msClose&&e.msClose(),t(n)},r.onerror=function(e){n(e)},r.readAsText(e,"UTF-8")}))}var io={openOptions:"openOptions",textEditor:"textEditor"},oo=function(e){e.struct,e.fragment},ao=function(e){},so=["value","id","onChange","label"];function uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uo(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var co,fo=(0,m.Z)("label",{target:"e5bylk61"})((function(e){return{marginRight:"8px",color:e.theme.ketcher.color.text.secondary}}),""),ho=(0,m.Z)("input",{target:"e5bylk60"})((function(e){var t=e.theme;return{height:"24px",padding:"4px 8px",border:"none",borderRadius:"2px",backgroundColor:t.ketcher.color.input.background.default,color:t.ketcher.color.text.primary,outline:"transparent",width:"164px",letterSpacing:"normal","&:active, &:focus":{color:t.ketcher.color.input.text.active},"&:hover":{backgroundColor:t.ketcher.color.input.background.hover}}}),""),po=function(e){var t=e.value,n=e.id,i=e.onChange,o=e.label,a=(0,b.Z)(e,so);return(0,r.BX)(r.HY,{children:[o&&(0,r.tZ)(fo,{htmlFor:n,children:o}),(0,r.tZ)(ho,lo({type:"text",id:n,value:t,onChange:function(e){i(e.target.value)}},a))]})},vo=function(e){var t=e.label,n=e.data,i=e.filename,o=e.type,a=e.onSave,s=e.disabled,u=void 0!==s&&s;return(0,r.tZ)(oi,{label:t,clickHandler:function(){var e=new Blob([n],{type:o});(0,Xe.saveAs)(e,i),a()},type:"submit",disabled:u})};!function(e){e.Mol="chemical/x-mdl-molfile",e.Helm="chemical/x-helm"}(co||(co={}));var mo=(0,$e.Z)((function e(t,n,r,i,o){(0,Je.Z)(this,e),this.name=t,this.mime=n,this.extensions=r,this.supportsCoords=i||!1,this.options=o||{}})),go={mol:new mo("MDL Molfile V3000",co.Mol,[".mol"],!0,{"molfile-saving-mode":"3000"}),helm:new mo("HELM",co.Helm,[".helm"])},yo=function(e){return go[e]};var bo=[{id:"mol",label:"MDL Molfile V3000"},{id:"helm",label:"HELM"}],xo=(0,m.Z)("form",{target:"e1xsfeqd5"})({name:"13ku56z",styles:"display:flex;flex-direction:column;height:100%"}),_o=(0,m.Z)("div",{target:"e1xsfeqd4"})({name:"itz7qk",styles:"display:flex;justify-content:space-between;margin-bottom:16px"}),wo=(0,m.Z)("label",{target:"e1xsfeqd3"})((function(e){return{marginRight:"8px",color:e.theme.ketcher.color.text.secondary}}),""),So=(0,m.Z)(Vr,{target:"e1xsfeqd2"})((function(e){var t=e.theme;return{"& .MuiOutlinedInput-root":{border:"none",backgroundColor:t.ketcher.color.background.primary,color:t.ketcher.color.text.primary,fontFamily:t.ketcher.font.family.inter}}}),""),Eo={border:"none"},ko=(0,m.Z)(Ii,{target:"e1xsfeqd1"})({name:"9hyvcv",styles:"& .MuiPaper-root{width:520px;height:358px;}& .MuiDialogContent-root{overflow:hidden;}"}),Oo=(0,m.Z)(oi,{target:"e1xsfeqd0"})((function(e){var t=e.theme;return{backgroundColor:t.ketcher.color.background.canvas,color:t.ketcher.color.text.error,"&:hover":{backgroundColor:"initial"}}}),""),Ao={mol:"\n    -INDIGO-02102212382D\n  \n    0  0  0  0  0  0  0  0  0  0  0 V3000\n  M  V30 BEGIN CTAB\n  M  V30 COUNTS 11 10 0 0 0\n  M  V30 BEGIN ATOM\n  M  V30 1 C 2.75 -5.225 0.0 0\n  M  V30 2 C 3.61603 -5.725 0.0 0\n  M  V30 3 C 4.48205 -5.225 0.0 0\n  M  V30 4 C 5.34808 -5.725 0.0 0\n  M  V30 5 C 6.2141 -5.225 0.0 0\n  M  V30 6 C 7.08013 -5.725 0.0 0\n  M  V30 7 C 7.94615 -5.225 0.0 0\n  M  V30 8 C 8.81218 -5.725 0.0 0\n  M  V30 9 C 9.6782 -5.225 0.0 0\n  M  V30 10 C 10.5442 -5.725 0.0 0\n  M  V30 11 C 11.4103 -5.225 0.0 0\n  M  V30 END ATOM\n  M  V30 BEGIN BOND\n  M  V30 1 1 1 2\n  M  V30 2 1 2 3\n  M  V30 3 1 3 4\n  M  V30 4 1 4 5\n  M  V30 5 1 5 6\n  M  V30 6 1 6 7\n  M  V30 7 1 7 8\n  M  V30 8 1 8 9\n  M  V30 9 1 9 10\n  M  V30 10 1 10 11\n  M  V30 END BOND\n  M  V30 END CTAB\n  M  END\n  ",helm:"PEPTIDE1{A.C.D.F.G.H.K.A.C.D}$PEPTIDE1,PEPTIDE1,3:R3-7:R3"},Co={open:function(e){var t=e.isModalOpen,i=e.onClose,a=(0,o.useCallback)((function(){S(io.openOptions),c(""),i()}),[i]),s=(0,o.useState)(""),u=(0,g.Z)(s,2),l=u[0],c=u[1],f=(0,o.useState)(""),h=(0,g.Z)(f,2),d=h[0],p=h[1],v=(0,o.useState)(),m=(0,g.Z)(v,2),y=m[0],b=m[1],x=(0,o.useState)(io.openOptions),_=(0,g.Z)(x,2),w=_[0],S=_[1];(0,o.useEffect)((function(){new Promise((function(e,t){n.g.FileReader?e(ro):t(new Error("Your browser does not support opening files locally"))})).then((function(e){b({chosenOpener:e})}))}),[]);var E=function(){oo({struct:l,fragment:!0}),a()},k=function(){oo({struct:l,fragment:!1}),a()};return(0,r.BX)(Ii,{isOpen:t,title:"Open Structure",onClose:a,children:[(0,r.tZ)(Ii.Content,{children:(0,r.tZ)(no,{isAnalyzingFile:false,fileName:d,currentState:w,states:io,selectClipboard:function(){return S(io.textEditor)},fileLoadHandler:function(e){p(e[0].name),y.chosenOpener(e[0]).then((function(e){c(e),S(io.textEditor)}),(function(){}))},errorHandler:ao,struct:l,inputHandler:c})}),(0,r.tZ)(Ii.Footer,{children:w===io.textEditor?[(0,r.tZ)(oi,{disabled:!l,clickHandler:E,label:"Add to Canvas",title:"Structure will be loaded as fragment and added to Clipboard",styleType:"secondary"},"copyButton"),(0,r.tZ)(oi,{disabled:!l,clickHandler:k,label:"Open as New Project"},"openButton")]:[]})]})},save:function(e){var t=e.onClose,n=e.isModalOpen,i=(0,o.useState)("mol"),a=(0,g.Z)(i,2),s=a[0],u=a[1],l=(0,o.useState)("ketcher"),c=(0,g.Z)(l,2),f=c[0],h=c[1],d=(0,o.useState)(""),p=(0,g.Z)(d,2),v=p[0],m=p[1],y=(0,o.useState)(""),b=(0,g.Z)(y,2),x=b[0],_=b[1],w=function(){};return(0,o.useEffect)((function(){m(Ao[s]),_("mol"===s?"some error":"")}),[s]),(0,r.BX)(ko,{title:"save structure",isOpen:n,onClose:t,children:[(0,r.tZ)(Ii.Content,{children:(0,r.BX)(xo,{onSubmit:w,id:"save",children:[(0,r.BX)(_o,{children:[(0,r.tZ)("div",{children:(0,r.tZ)(po,{value:f,id:"filename",onChange:function(e){h(e)},label:"File name:"})}),(0,r.BX)("div",{style:{lineHeight:"24px"},children:[(0,r.tZ)(wo,{htmlFor:"fileformat",children:"File format:"}),(0,r.tZ)(So,{options:bo,currentSelection:s,selectionHandler:function(e){u(e)},customStylesForExpanded:Eo})]})]}),(0,r.tZ)(Ji,{struct:v,readonly:!0,selectOnInit:!0})]})}),(0,r.BX)(Ii.Footer,{children:[x&&(0,r.BX)(Oo,{label:"Errors",clickHandler:function(){},children:[(0,r.tZ)(lr,{name:"error"}),"Errors"]}),(0,r.tZ)(vo,{label:"Save as file",data:v,type:yo(s).mime,onSave:w,filename:f+yo(s).extensions[0],disabled:!f})]})]})}},Mo=function(){var e=ki(bt),t=ki(yt),n=Ei(),i=(0,o.useCallback)((function(){n(gt())}),[n]);if(!t)return null;var a=Co[t];if(!a)throw new Error("There is no modal window named ".concat(t));return(0,r.tZ)(a,{onClose:i,isModalOpen:e})};var To=function(){var e,t=document.querySelector(".Ketcher-polymer-editor-root")||document.documentElement;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen&&document.exitFullscreen()||document.msExitFullscreen&&document.msExitFullscreen()||document.mozCancelFullScreen&&document.mozCancelFullScreen()||document.webkitExitFullscreen&&document.webkitExitFullscreen():(e=t).requestFullscreen&&e.requestFullscreen()||e.msRequestFullscreen&&e.msRequestFullscreen()||e.mozRequestFullScreen&&e.mozRequestFullScreen()||e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},Po=(0,m.Z)("div",{target:"evrk200"})({name:"1vd861w",styles:"position:absolute;right:47px;bottom:12px"}),Ro=function(e){return(0,r.tZ)(Po,{className:e.className,children:(0,r.tZ)(hi,{onClick:To,isActive:!1,children:(0,r.tZ)(lr,{name:"fullscreen"})})})},Io=(0,l.Z)({});function Lo(e){var t=e.onInit,n=e.theme,a=(0,o.useRef)(null),l=n?(0,c.merge)(wt,n):wt,f=(0,c.merge)(Io,{ketcher:l});return(0,o.useEffect)((function(){null===t||void 0===t||t()}),[t]),(0,r.tZ)(i.zt,{store:_t,children:(0,r.BX)(u.b,{theme:f,children:[(0,r.tZ)(s.xB,{styles:St}),(0,r.BX)("div",{ref:a,className:"Ketcher-polymer-editor-root",children:[(0,r.BX)(Lt,{children:[(0,r.tZ)(Lt.Left,{children:(0,r.tZ)(No,{})}),(0,r.tZ)(Lt.Top,{children:(0,r.tZ)(li,{})}),(0,r.tZ)(Lt.Main,{}),(0,r.tZ)(Lt.Right,{children:(0,r.tZ)(Tr,{})})]}),(0,r.tZ)(Ai,{}),(0,r.tZ)(Ro,{}),(0,r.tZ)(Mo,{})]})]})})}function No(){var e=Ei(),t=ki(ot);return(0,r.BX)(Si,{onItemClick:function(t){e(Co[t]?mt(t):it(t))},activeMenuItem:t,children:[(0,r.tZ)(Si.Group,{children:(0,r.BX)(Si.Submenu,{children:[(0,r.tZ)(Si.Item,{itemId:"open"}),(0,r.tZ)(Si.Item,{itemId:"save"})]})}),(0,r.tZ)(Si.Group,{children:(0,r.tZ)(Si.Item,{itemId:"undo"})}),(0,r.BX)(Si.Group,{children:[(0,r.tZ)(Si.Item,{itemId:"erase"}),(0,r.BX)(Si.Submenu,{vertical:!0,children:[(0,r.tZ)(Si.Item,{itemId:"select-lasso"}),(0,r.tZ)(Si.Item,{itemId:"select-rectangle"}),(0,r.tZ)(Si.Item,{itemId:"select-fragment"})]}),(0,r.BX)(Si.Submenu,{children:[(0,r.tZ)(Si.Item,{itemId:"rectangle"}),(0,r.tZ)(Si.Item,{itemId:"ellipse"})]}),(0,r.BX)(Si.Submenu,{children:[(0,r.tZ)(Si.Item,{itemId:"rotate"}),(0,r.tZ)(Si.Item,{itemId:"horizontal-flip"}),(0,r.tZ)(Si.Item,{itemId:"vertical-flip"})]})]}),(0,r.tZ)(Si.Group,{children:(0,r.tZ)(Si.Item,{itemId:"single-bond"})}),(0,r.tZ)(Si.Group,{divider:!0,children:(0,r.tZ)(Si.Item,{itemId:"bracket"})}),(0,r.BX)(Si.Group,{children:[(0,r.tZ)(Si.Item,{itemId:"settings"}),(0,r.tZ)(Si.Item,{itemId:"help"})]})]})}},53370:function(e,t,n){"use strict";var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],i="undefined"===typeof globalThis?n.g:globalThis;e.exports=function(){for(var e=[],t=0;t<r.length;t++)"function"===typeof i[r[t]]&&(e[e.length]=r[t]);return e}},3882:function(e,t,n){"use strict";var r=n(75223)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(i){r=null}e.exports=r},1793:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},66470:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},22951:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},91976:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return i}})},64649:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},53764:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},18808:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{Z:function(){return r}})},11026:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(66470);var i=n(64013),o=n(53764);function a(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||(0,i.Z)(e,t)||(0,o.Z)()}},64013:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1793);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},59612:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},16320:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},97308:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},14484:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},37491:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},41795:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},84427:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},97442:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},93593:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},36591:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},75952:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},66107:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return i}})},29673:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},55627:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},85690:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},96916:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(36591);var i=n(77728),o=n(85690);function a(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||(0,i.Z)(e,t)||(0,o.Z)()}},35680:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(93593);var i=n(55627),o=n(77728);function a(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},77728:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(93593);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},14189:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,{Z:function(){return i}})},69531:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},71143:function(e){"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},31512:function(e){"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){a[e]=function(){return r[e]}}));return a.default=function(){return r},n.d(o,a),o}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";n(42685),n(3683),n(26149);var e=n(69538),t=n(96916),r=n(64649),i=n(47279);n(62868),n(14115),n(62946),n(32727);function o(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,u,"next",e)}function u(e){o(a,r,i,s,u,"throw",e)}s(void 0)}))}}var s=n(57135),u=n.n(s),l=n(22951),c=n(91976),f=n(87737),h=n.n(f);function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if(t&&("object"===v(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function x(e,t,n){return x=b()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&d(i,n.prototype),i},x.apply(null,arguments)}function _(e){var t="function"===typeof Map?new Map:void 0;return _=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return x(e,arguments,y(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,e)},_(e)}var w=n(1793);function S(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var E=n(64013);function k(e){return function(e){if(Array.isArray(e))return(0,w.Z)(e)}(e)||S(e)||(0,E.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function A(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,O(e,t,"set"),n),n}function C(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,O(e,t,"get"))}var M=n(11026);function T(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function P(){return P="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=T(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},P.apply(this,arguments)}var R=n(45239),I=n(35471),L=n.n(I),N=n(18808),j=n(69674),D=n.n(j),B=n(48977),z=n.n(B),F=n(55902),V={H:"#000000",He:"#89a1a1",Li:"#bd77ed",Be:"#8fbc00",B:"#c18989",C:"#000000",N:"#304ff7",O:"#ff0d0d",F:"#78bc42",Ne:"#80a2af",Na:"#ab5cf2",Mg:"#6fcd00",Al:"#a99393",Si:"#b29478",P:"#ff8000",S:"#c99a19",Cl:"#1fd01f",Ar:"#69acba",K:"#8f40d4",Ca:"#38e900",Sc:"#999999",Ti:"#979a9e",V:"#99999e",Cr:"#8a99c7",Mn:"#9c7ac7",Fe:"#e06633",Co:"#d37e8e",Ni:"#4ece4e",Cu:"#c78033",Zn:"#7d80b0",Ga:"#bc8b8b",Ge:"#668f8f",As:"#b87ddd",Se:"#e59100",Br:"#a62929",Kr:"#59b1c9",Rb:"#702eb0",Sr:"#00ff00",Y:"#66afaf",Zr:"#71abab",Nb:"#67aeb4",Mo:"#54b5b5",Tc:"#3b9e9e",Ru:"#248f8f",Rh:"#0a7d8c",Pd:"#006985",Ag:"#9a9a9a",Cd:"#b29764",In:"#a67573",Sn:"#668080",Sb:"#9e63b5",Te:"#d47a00",I:"#940094",Xe:"#429eb0",Cs:"#57178f",Ba:"#00c900",La:"#5caed1",Ce:"#9d9d7b",Pr:"#8ca581",Nd:"#84a984",Pm:"#71b18a",Sm:"#66b68e",Eu:"#4ac298",Gd:"#37cb9e",Tb:"#28d1a4",Dy:"#1bd7a8",Ho:"#00e98f",Er:"#00e675",Tm:"#00d452",Yb:"#00bf38",Lu:"#00ab24",Hf:"#47b3ec",Ta:"#4da6ff",W:"#2194d6",Re:"#267dab",Os:"#266696",Ir:"#175487",Pt:"#9898a3",Au:"#c19e1c",Hg:"#9797ac",Tl:"#a6544d",Pb:"#575961",Bi:"#9e4fb5",Po:"#ab5c00",At:"#754f45",Rn:"#428296",Fr:"#420066",Ra:"#007d00",Ac:"#6aa2ec",Th:"#00baff",Pa:"#00a1ff",U:"#008fff",Np:"#0080ff",Pu:"#006bff",Am:"#545cf2",Cm:"#785ce3",Bk:"#8a4fe3",Cf:"#a136d4",Es:"#b31fd4",Fm:"#000000",Md:"#000000",No:"#000000",Lr:"#000000",Rf:"#47b3ec",Db:"#4da6ff",Sg:"#2194d6",Bh:"#267dab",Hs:"#266696",Mt:"#175487",Ds:"#9898a3",Rg:"#c19e1c",Cn:"#9797ac",Nh:"#000000",Fl:"#000000",Mc:"#000000",Lv:"#000000",Ts:"#000000",Og:"#000000"},U=[{number:1,label:"H",period:1,group:1,title:"Hydrogen",state:"gas",origin:"primordial",type:"other-nonmetal",mass:1.00794},{number:2,label:"He",period:1,group:8,title:"Helium",state:"gas",origin:"primordial",type:"noble",mass:4.0026022},{number:3,label:"Li",period:2,group:1,title:"Lithium",state:"solid",origin:"primordial",type:"alkali",mass:6.94},{number:4,label:"Be",period:2,group:2,title:"Beryllium",state:"solid",origin:"primordial",type:"alkaline-earth",mass:9.01218315},{number:5,label:"B",period:2,group:3,title:"Boron",state:"solid",origin:"primordial",type:"metalloid",mass:10.81},{number:6,label:"C",period:2,group:4,title:"Carbon",state:"solid",origin:"primordial",type:"other-nonmetal",mass:12.011},{number:7,label:"N",period:2,group:5,title:"Nitrogen",state:"gas",origin:"primordial",type:"other-nonmetal",mass:14.007},{number:8,label:"O",period:2,group:6,leftH:!0,title:"Oxygen",state:"gas",origin:"primordial",type:"other-nonmetal",mass:15.999},{number:9,label:"F",period:2,group:7,leftH:!0,title:"Fluorine",state:"gas",origin:"primordial",type:"halogen",mass:18.9984031636},{number:10,label:"Ne",period:2,group:8,title:"Neon",state:"gas",origin:"primordial",type:"noble",mass:20.17976},{number:11,label:"Na",period:3,group:1,title:"Sodium",state:"solid",origin:"primordial",type:"alkali",mass:22.989769282},{number:12,label:"Mg",period:3,group:2,title:"Magnesium",state:"solid",origin:"primordial",type:"alkaline-earth",mass:24.305},{number:13,label:"Al",period:3,group:3,title:"Aluminium",state:"solid",origin:"primordial",type:"post-transition",mass:26.98153857},{number:14,label:"Si",period:3,group:4,title:"Silicon",state:"solid",origin:"primordial",type:"metalloid",mass:28.085},{number:15,label:"P",period:3,group:5,title:"Phosphorus",state:"solid",origin:"primordial",type:"other-nonmetal",mass:30.9737619985},{number:16,label:"S",period:3,group:6,leftH:!0,title:"Sulfur",state:"solid",origin:"primordial",type:"other-nonmetal",mass:32.06},{number:17,label:"Cl",period:3,group:7,leftH:!0,title:"Chlorine",state:"gas",origin:"primordial",type:"halogen",mass:35.45},{number:18,label:"Ar",period:3,group:8,title:"Argon",state:"gas",origin:"primordial",type:"noble",mass:39.9481},{number:19,label:"K",period:4,group:1,title:"Potassium",state:"solid",origin:"primordial",type:"alkali",mass:39.09831},{number:20,label:"Ca",period:4,group:2,title:"Calcium",state:"solid",origin:"primordial",type:"alkaline-earth",mass:40.0784},{number:21,label:"Sc",period:4,group:3,title:"Scandium",state:"solid",origin:"primordial",type:"transition",mass:44.9559085},{number:22,label:"Ti",period:4,group:4,title:"Titanium",state:"solid",origin:"primordial",type:"transition",mass:47.8671},{number:23,label:"V",period:4,group:5,title:"Vanadium",state:"solid",origin:"primordial",type:"transition",mass:50.94151},{number:24,label:"Cr",period:4,group:6,title:"Chromium",state:"solid",origin:"primordial",type:"transition",mass:51.99616},{number:25,label:"Mn",period:4,group:7,title:"Manganese",state:"solid",origin:"primordial",type:"transition",mass:54.9380443},{number:26,label:"Fe",period:4,group:8,title:"Iron",state:"solid",origin:"primordial",type:"transition",mass:55.8452},{number:27,label:"Co",period:4,group:8,title:"Cobalt",state:"solid",origin:"primordial",type:"transition",mass:58.9331944},{number:28,label:"Ni",period:4,group:8,title:"Nickel",state:"solid",origin:"primordial",type:"transition",mass:58.69344},{number:29,label:"Cu",period:4,group:1,title:"Copper",state:"solid",origin:"primordial",type:"transition",mass:63.5463},{number:30,label:"Zn",period:4,group:2,title:"Zinc",state:"solid",origin:"primordial",type:"transition",mass:65.382},{number:31,label:"Ga",period:4,group:3,title:"Gallium",state:"solid",origin:"primordial",type:"post-transition",mass:69.7231},{number:32,label:"Ge",period:4,group:4,title:"Germanium",state:"solid",origin:"primordial",type:"metalloid",mass:72.6308},{number:33,label:"As",period:4,group:5,title:"Arsenic",state:"solid",origin:"primordial",type:"metalloid",mass:74.9215956},{number:34,label:"Se",period:4,group:6,leftH:!0,title:"Selenium",state:"solid",origin:"primordial",type:"other-nonmetal",mass:78.9718},{number:35,label:"Br",period:4,group:7,leftH:!0,title:"Bromine",state:"liquid",origin:"primordial",type:"halogen",mass:79.904},{number:36,label:"Kr",period:4,group:8,title:"Krypton",state:"gas",origin:"primordial",type:"noble",mass:83.7982},{number:37,label:"Rb",period:5,group:1,title:"Rubidium",state:"solid",origin:"primordial",type:"alkali",mass:85.46783},{number:38,label:"Sr",period:5,group:2,title:"Strontium",state:"solid",origin:"primordial",type:"alkaline-earth",mass:87.621},{number:39,label:"Y",period:5,group:3,title:"Yttrium",state:"solid",origin:"primordial",type:"transition",mass:88.905842},{number:40,label:"Zr",period:5,group:4,title:"Zirconium",state:"solid",origin:"primordial",type:"transition",mass:91.2242},{number:41,label:"Nb",period:5,group:5,title:"Niobium",state:"solid",origin:"primordial",type:"transition",mass:92.906372},{number:42,label:"Mo",period:5,group:6,title:"Molybdenum",state:"solid",origin:"primordial",type:"transition",mass:95.951},{number:43,label:"Tc",period:5,group:7,title:"Technetium",state:"solid",origin:"decay",type:"transition",mass:98},{number:44,label:"Ru",period:5,group:8,title:"Ruthenium",state:"solid",origin:"primordial",type:"transition",mass:101.072},{number:45,label:"Rh",period:5,group:8,title:"Rhodium",state:"solid",origin:"primordial",type:"transition",mass:102.905502},{number:46,label:"Pd",period:5,group:8,title:"Palladium",state:"solid",origin:"primordial",type:"transition",mass:106.421},{number:47,label:"Ag",period:5,group:1,title:"Silver",state:"solid",origin:"primordial",type:"transition",mass:107.86822},{number:48,label:"Cd",period:5,group:2,title:"Cadmium",state:"solid",origin:"primordial",type:"transition",mass:112.4144},{number:49,label:"In",period:5,group:3,title:"Indium",state:"solid",origin:"primordial",type:"post-transition",mass:114.8181},{number:50,label:"Sn",period:5,group:4,title:"Tin",state:"solid",origin:"primordial",type:"post-transition",mass:118.7107},{number:51,label:"Sb",period:5,group:5,title:"Antimony",state:"solid",origin:"primordial",type:"metalloid",mass:121.7601},{number:52,label:"Te",period:5,group:6,title:"Tellurium",state:"solid",origin:"primordial",type:"metalloid",mass:127.603},{number:53,label:"I",period:5,group:7,leftH:!0,title:"Iodine",state:"solid",origin:"primordial",type:"halogen",mass:126.904473},{number:54,label:"Xe",period:5,group:8,title:"Xenon",state:"gas",origin:"primordial",type:"noble",mass:131.2936},{number:55,label:"Cs",period:6,group:1,title:"Caesium",state:"solid",origin:"primordial",type:"alkali",mass:132.905451966},{number:56,label:"Ba",period:6,group:2,title:"Barium",state:"solid",origin:"primordial",type:"alkaline-earth",mass:137.3277},{number:57,label:"La",period:6,group:3,title:"Lanthanum",state:"solid",origin:"primordial",type:"transition",mass:138.905477},{number:58,label:"Ce",period:6,group:3,title:"Cerium",state:"solid",origin:"primordial",type:"lanthanide",mass:140.1161},{number:59,label:"Pr",period:6,group:3,title:"Praseodymium",state:"solid",origin:"primordial",type:"lanthanide",mass:140.907662},{number:60,label:"Nd",period:6,group:3,title:"Neodymium",state:"solid",origin:"primordial",type:"lanthanide",mass:144.2423},{number:61,label:"Pm",period:6,group:3,title:"Promethium",state:"solid",origin:"decay",type:"lanthanide",mass:145},{number:62,label:"Sm",period:6,group:3,title:"Samarium",state:"solid",origin:"primordial",type:"lanthanide",mass:150.362},{number:63,label:"Eu",period:6,group:3,title:"Europium",state:"solid",origin:"primordial",type:"lanthanide",mass:151.9641},{number:64,label:"Gd",period:6,group:3,title:"Gadolinium",state:"solid",origin:"primordial",type:"lanthanide",mass:157.253},{number:65,label:"Tb",period:6,group:3,title:"Terbium",state:"solid",origin:"primordial",type:"lanthanide",mass:158.925352},{number:66,label:"Dy",period:6,group:3,title:"Dysprosium",state:"solid",origin:"primordial",type:"lanthanide",mass:162.5001},{number:67,label:"Ho",period:6,group:3,title:"Holmium",state:"solid",origin:"primordial",type:"lanthanide",mass:164.930332},{number:68,label:"Er",period:6,group:3,title:"Erbium",state:"solid",origin:"primordial",type:"lanthanide",mass:167.2593},{number:69,label:"Tm",period:6,group:3,title:"Thulium",state:"solid",origin:"primordial",type:"lanthanide",mass:168.934222},{number:70,label:"Yb",period:6,group:3,title:"Ytterbium",state:"solid",origin:"primordial",type:"lanthanide",mass:173.0451},{number:71,label:"Lu",period:6,group:3,title:"Lutetium",state:"solid",origin:"primordial",type:"lanthanide",mass:174.96681},{number:72,label:"Hf",period:6,group:4,title:"Hafnium",state:"solid",origin:"primordial",type:"transition",mass:178.492},{number:73,label:"Ta",period:6,group:5,title:"Tantalum",state:"solid",origin:"primordial",type:"transition",mass:180.947882},{number:74,label:"W",period:6,group:6,title:"Tungsten",state:"solid",origin:"primordial",type:"transition",mass:183.841},{number:75,label:"Re",period:6,group:7,title:"Rhenium",state:"solid",origin:"primordial",type:"transition",mass:186.2071},{number:76,label:"Os",period:6,group:8,title:"Osmium",state:"solid",origin:"primordial",type:"transition",mass:190.233},{number:77,label:"Ir",period:6,group:8,title:"Iridium",state:"solid",origin:"primordial",type:"transition",mass:192.2173},{number:78,label:"Pt",period:6,group:8,title:"Platinum",state:"solid",origin:"primordial",type:"transition",mass:195.0849},{number:79,label:"Au",period:6,group:1,title:"Gold",state:"solid",origin:"primordial",type:"transition",mass:196.9665695},{number:80,label:"Hg",period:6,group:2,title:"Mercury",state:"liquid",origin:"primordial",type:"transition",mass:200.5923},{number:81,label:"Tl",period:6,group:3,title:"Thallium",state:"solid",origin:"primordial",type:"post-transition",mass:204.38},{number:82,label:"Pb",period:6,group:4,title:"Lead",state:"solid",origin:"primordial",type:"post-transition",mass:207.21},{number:83,label:"Bi",period:6,group:5,title:"Bismuth",state:"solid",origin:"primordial",type:"post-transition",mass:208.980401},{number:84,label:"Po",period:6,group:6,title:"Polonium",state:"solid",origin:"decay",type:"metalloid",mass:209},{number:85,label:"At",period:6,group:7,title:"Astatine",state:"solid",origin:"decay",type:"halogen",mass:210},{number:86,label:"Rn",period:6,group:8,title:"Radon",state:"gas",origin:"decay",type:"noble",mass:222},{number:87,label:"Fr",period:7,group:1,title:"Francium",state:"solid",origin:"decay",type:"alkali",mass:223},{number:88,label:"Ra",period:7,group:2,title:"Radium",state:"solid",origin:"decay",type:"alkaline-earth",mass:226},{number:89,label:"Ac",period:7,group:3,title:"Actinium",state:"solid",origin:"decay",type:"transition",mass:227},{number:90,label:"Th",period:7,group:3,title:"Thorium",state:"solid",origin:"primordial",type:"actinide",mass:232.03774},{number:91,label:"Pa",period:7,group:3,title:"Protactinium",state:"solid",origin:"decay",type:"actinide",mass:231.035882},{number:92,label:"U",period:7,group:3,title:"Uranium",state:"solid",origin:"primordial",type:"actinide",mass:238.028913},{number:93,label:"Np",period:7,group:3,title:"Neptunium",state:"solid",origin:"decay",type:"actinide",mass:237},{number:94,label:"Pu",period:7,group:3,title:"Plutonium",state:"solid",origin:"decay",type:"actinide",mass:244},{number:95,label:"Am",period:7,group:3,title:"Americium",state:"solid",origin:"synthetic",type:"actinide",mass:243},{number:96,label:"Cm",period:7,group:3,title:"Curium",state:"solid",origin:"synthetic",type:"actinide",mass:247},{number:97,label:"Bk",period:7,group:3,title:"Berkelium",state:"solid",origin:"synthetic",type:"actinide",mass:247},{number:98,label:"Cf",period:7,group:3,title:"Californium",state:"solid",origin:"synthetic",type:"actinide",mass:251},{number:99,label:"Es",period:7,group:3,title:"Einsteinium",state:"solid",origin:"synthetic",type:"actinide",mass:252},{number:100,label:"Fm",period:7,group:3,title:"Fermium",origin:"synthetic",type:"actinide",mass:257},{number:101,label:"Md",period:7,group:3,title:"Mendelevium",origin:"synthetic",type:"actinide",mass:258},{number:102,label:"No",period:7,group:3,title:"Nobelium",origin:"synthetic",type:"actinide",mass:259},{number:103,label:"Lr",period:7,group:3,title:"Lawrencium",origin:"synthetic",type:"actinide",mass:266},{number:104,label:"Rf",period:7,group:4,title:"Rutherfordium",origin:"synthetic",type:"transition",mass:267},{number:105,label:"Db",period:7,group:5,title:"Dubnium",origin:"synthetic",type:"transition",mass:268},{number:106,label:"Sg",period:7,group:6,title:"Seaborgium",origin:"synthetic",type:"transition",mass:269},{number:107,label:"Bh",period:7,group:7,title:"Bohrium",origin:"synthetic",type:"transition",mass:270},{number:108,label:"Hs",period:7,group:8,title:"Hassium",origin:"synthetic",type:"transition",mass:269},{number:109,label:"Mt",period:7,group:8,title:"Meitnerium",origin:"synthetic",type:"transition",mass:278},{number:110,label:"Ds",period:7,group:8,title:"Darmstadtium",origin:"synthetic",type:"transition",mass:281},{number:111,label:"Rg",period:7,group:1,title:"Roentgenium",origin:"synthetic",type:"transition",mass:282},{number:112,label:"Cn",period:7,group:2,title:"Copernicium",origin:"synthetic",type:"transition",mass:285},{number:113,label:"Nh",period:7,group:3,title:"Nihonium",origin:"synthetic",type:"post-transition",mass:286},{number:114,label:"Fl",period:7,group:4,title:"Flerovium",origin:"synthetic",type:"post-transition",mass:289},{number:115,label:"Mc",period:7,group:5,title:"Moscovium",origin:"synthetic",type:"post-transition",mass:289},{number:116,label:"Lv",period:7,group:6,title:"Livermorium",origin:"synthetic",type:"post-transition",mass:293},{number:117,label:"Ts",period:7,group:7,title:"Tennessine",origin:"synthetic",type:"halogen",mass:294},{number:118,label:"Og",period:7,group:8,title:"Oganesson",origin:"synthetic",type:"noble",mass:294}],Z=U.reduce((function(e,t){return e.set(t.label,t),e.set(t.number,t),e}),new Map),H=function(e){return Z.get(e)},G=function(e){return U.filter(e)};function W(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K=function(){function e(t){(0,l.Z)(this,e),this.notList=t.notList,this.ids=t.ids}return(0,c.Z)(e,[{key:"labelList",value:function(){var e,t=[],n=W(this.ids);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=H(r);i&&t.push(i.label)}}catch(o){n.e(o)}finally{n.f()}return t}},{key:"label",value:function(){var e="["+this.labelList().join(",")+"]";return this.notList&&(e="!"+e),e}},{key:"equals",value:function(e){return this.notList===e.notList&&(this.ids||[]).sort().toString()===(e.ids||[]).sort().toString()}}]),e}(),Y=function(){function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if((0,l.Z)(this,e),0===n.length)this.x=0,this.y=0,this.z=0;else if(1===arguments.length)this.x=parseFloat(n[0].x||0),this.y=parseFloat(n[0].y||0),this.z=parseFloat(n[0].z||0);else if(2===arguments.length)this.x=parseFloat(n[0]||0),this.y=parseFloat(n[1]||0),this.z=0;else{if(3!==arguments.length)throw new Error("Vec2(): invalid arguments");this.x=parseFloat(n[0]),this.y=parseFloat(n[1]),this.z=parseFloat(n[2])}}return(0,c.Z)(e,[{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}},{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z)}},{key:"add_",value:function(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}},{key:"get_xy0",value:function(){return new e(this.x,this.y)}},{key:"sub",value:function(t){return new e(this.x-t.x,this.y-t.y,this.z-t.z)}},{key:"scaled",value:function(t){return new e(this.x*t,this.y*t,this.z*t)}},{key:"negated",value:function(){return new e(-this.x,-this.y,-this.z)}},{key:"yComplement",value:function(t){return t=t||0,new e(this.x,t-this.y,this.z)}},{key:"addScaled",value:function(t,n){return new e(this.x+t.x*n,this.y+t.y*n,this.z+t.z*n)}},{key:"normalized",value:function(){return this.scaled(1/this.length())}},{key:"normalize",value:function(){var e=this.length();return!(e<1e-6)&&(this.x/=e,this.y/=e,!0)}},{key:"turnLeft",value:function(){return new e(-this.y,this.x,this.z)}},{key:"coordStr",value:function(){return this.x.toString()+" , "+this.y.toString()}},{key:"toString",value:function(){return"("+this.x.toFixed(2)+","+this.y.toFixed(2)+")"}},{key:"max",value:function(t){return h()(null!=t),e.max(this,t)}},{key:"min",value:function(t){return e.min(this,t)}},{key:"ceil",value:function(){return new e(Math.ceil(this.x),Math.ceil(this.y),Math.ceil(this.z))}},{key:"floor",value:function(){return new e(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))}},{key:"rotate",value:function(e){var t=Math.sin(e),n=Math.cos(e);return this.rotateSC(t,n)}},{key:"rotateSC",value:function(t,n){return h()(0===t||!!t),h()(0===n||!!n),new e(this.x*n-this.y*t,this.x*t+this.y*n,this.z)}},{key:"oxAngle",value:function(){return Math.atan2(this.y,this.x)}}],[{key:"dist",value:function(t,n){return e.diff(t,n).length()}},{key:"max",value:function(t,n){return new e(Math.max(t.x,n.x),Math.max(t.y,n.y),Math.max(t.z,n.z))}},{key:"min",value:function(t,n){return new e(Math.min(t.x,n.x),Math.min(t.y,n.y),Math.min(t.z,n.z))}},{key:"sum",value:function(t,n){return new e(t.x+n.x,t.y+n.y,t.z+n.z)}},{key:"dot",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"cross",value:function(e,t){return e.x*t.y-e.y*t.x}},{key:"angle",value:function(t,n){return Math.atan2(e.cross(t,n),e.dot(t,n))}},{key:"diff",value:function(t,n){return new e(t.x-n.x,t.y-n.y,t.z-n.z)}},{key:"lc",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=new e,o=0;o<arguments.length/2;++o)i=i.addScaled(n[2*o],n[2*o+1]);return i}},{key:"lc2",value:function(t,n,r,i){return new e(t.x*n+r.x*i,t.y*n+r.y*i,t.z*n+r.z*i)}},{key:"centre",value:function(t,n){return e.lc2(t,.5,n,.5)}}]),e}();function X(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}(0,r.Z)(Y,"ZERO",new Y(0,0)),(0,r.Z)(Y,"UNIT",new Y(1,1));var Q,ee=function(e){p(n,e);var t=J(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"find",value:function(e){var t,n=X(this);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"equals",value:function(e){return this.isSuperset(e)&&e.isSuperset(this)}},{key:"isSuperset",value:function(e){var t,n=X(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!this.has(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}},{key:"filter",value:function(e){return new n(Array.from(this).filter(e))}},{key:"union",value:function(e){var t,r=new n(this),i=X(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.add(o)}}catch(a){i.e(a)}finally{i.f()}return r}}]),n}(_(Set));function te(e,t){return"undefined"!==typeof e?e:t}function ne(e){return(e-=0)===re.PATTERN.RADICAL.DOUPLET?1:e===re.PATTERN.RADICAL.SINGLET||e===re.PATTERN.RADICAL.TRIPLET?2:0}!function(e){e.Abs="abs",e.And="&",e.Or="or"}(Q||(Q={}));var re=function(){function e(t){(0,l.Z)(this,e),this.label=t.label,this.fragment=te(t.fragment,-1),this.alias=te(t.alias,e.attrlist.alias),this.isotope=te(t.isotope,e.attrlist.isotope),this.radical=te(t.radical,e.attrlist.radical),this.charge=te(t.charge,e.attrlist.charge),this.rglabel=te(t.rglabel,e.attrlist.rglabel),this.attpnt=te(t.attpnt,e.attrlist.attpnt),this.explicitValence=te(t.explicitValence,e.attrlist.explicitValence),this.valence=0,this.implicitH=t.implicitH||0,this.pp=t.pp?new Y(t.pp):new Y,this.sgs=new ee,this.ringBondCount=te(t.ringBondCount,e.attrlist.ringBondCount),this.substitutionCount=te(t.substitutionCount,e.attrlist.substitutionCount),this.unsaturatedAtom=te(t.unsaturatedAtom,e.attrlist.unsaturatedAtom),this.hCount=te(t.hCount,e.attrlist.hCount),this.aam=te(t.aam,e.attrlist.aam),this.invRet=te(t.invRet,e.attrlist.invRet),this.exactChangeFlag=te(t.exactChangeFlag,e.attrlist.exactChangeFlag),this.rxnFragmentType=te(t.rxnFragmentType,-1),this.stereoLabel=te(t.stereoLabel,e.attrlist.stereoLabel),this.stereoParity=te(t.stereoParity,e.attrlist.stereoParity),this.atomList=t.atomList?new K(t.atomList):null,this.neighbors=[],this.badConn=!1,Object.defineProperty(this,"pseudo",{enumerable:!0,get:function(){return e=this.label,H(e)||"L"===e||"L#"===e||"R#"===e?"":e;var e}})}return(0,c.Z)(e,[{key:"clone",value:function(t){var n=new e(this);return t&&t.has(this.fragment)&&(n.fragment=t.get(this.fragment)),n}},{key:"isQuery",value:function(){return null!==this.atomList||"A"===this.label||this.attpnt||this.hCount}},{key:"pureHydrogen",value:function(){return"H"===this.label&&0===this.isotope}},{key:"isPlainCarbon",value:function(){return"C"===this.label&&0===this.isotope&&0===this.radical&&0===this.charge&&this.explicitValence<0&&0===this.ringBondCount&&0===this.substitutionCount&&0===this.unsaturatedAtom&&0===this.hCount&&!this.atomList}},{key:"isPseudo",value:function(){return!this.atomList&&!this.rglabel&&!H(this.label)}},{key:"hasRxnProps",value:function(){return!!(this.invRet||this.exactChangeFlag||null!==this.attpnt||this.aam)}},{key:"calcValence",value:function(e){var t=this.label,n=this.charge;if(this.isQuery())return this.implicitH=0,!0;var r=H(t);if(!r)return this.implicitH=0,!0;var i=r.group,o=ne(this.radical),a=e,s=0,u=Math.abs(n);return 1===i?"H"!==t&&"Li"!==t&&"Na"!==t&&"K"!==t&&"Rb"!==t&&"Cs"!==t&&"Fr"!==t||(a=1,s=1-o-e-u):2===i?e+o+u===2||e+o+u===0?a=2:s=-1:3===i?"B"===t||"Al"===t||"Ga"===t||"In"===t?-1===n?(a=4,s=4-o-e):(a=3,s=3-o-e-u):"Tl"===t&&(-1===n?o+e<=2?(a=2,s=2-o-e):(a=4,s=4-o-e):-2===n?o+e<=3?(a=3,s=3-o-e):(a=5,s=5-o-e):o+e+u<=1?(a=1,s=1-o-e-u):(a=3,s=3-o-e-u)):4===i?"C"===t||"Si"===t||"Ge"===t?(a=4,s=4-o-e-u):"Sn"!==t&&"Pb"!==t||(e+o+u<=2?(a=2,s=2-o-e-u):(a=4,s=4-o-e-u)):5===i?"N"===t||"P"===t?1===n?(a=4,s=4-o-e):2===n?(a=3,s=3-o-e):"N"===t||o+e+u<=3?(a=3,s=3-o-e-u):(a=5,s=5-o-e-u):"Bi"!==t&&"Sb"!==t&&"As"!==t||(1===n?o+e<=2&&"As"!==t?(a=2,s=2-o-e):(a=4,s=4-o-e):2===n?(a=3,s=3-o-e):o+e<=3?(a=3,s=3-o-e-u):(a=5,s=5-o-e-u)):6===i?"O"===t?n>=1?(a=3,s=3-o-e):(a=2,s=2-o-e-u):"S"===t||"Se"===t||"Po"===t?1===n?e<=3?(a=3,s=3-o-e):(a=5,s=5-o-e):e+o+u<=2?(a=2,s=2-o-e-u):e+o+u<=4?(a=4,s=4-o-e-u):(a=6,s=6-o-e-u):"Te"===t&&(-1===n?e<=2&&(a=2,s=2-o-e-u):0!==n&&2!==n||(e<=2?(a=2,s=2-o-e-u):e<=4?(a=4,s=4-o-e-u):0===n&&e<=6?(a=6,s=6-o-e-u):s=-1)):7===i?"F"===t?(a=1,s=1-o-e-u):"Cl"!==t&&"Br"!==t&&"I"!==t&&"At"!==t||(1===n?e<=2?(a=2,s=2-o-e):(3===e||5===e||e>=7)&&(s=-1):0===n&&(e<=1?(a=1,s=1-o-e):2===e||4===e||6===e?1===o?(a=e,s=0):s=-1:e>7&&(s=-1))):8===i&&(e+o+u===0?a=1:s=-1),this.valence=a,this.implicitH=s,!(this.implicitH<0)||(this.valence=e,this.implicitH=0,this.badConn=!0,!1)}},{key:"calcValenceMinusHyd",value:function(e){var t=this.charge,n=this.label,r=H(this.label);if(!r)return this.implicitH=0,0;var i=r.group,o=ne(this.radical);if(3===i){if(("B"===n||"Al"===n||"Ga"===n||"In"===n)&&-1===t&&o+e<=4)return o+e}else if(5===i){if("N"===n||"P"===n){if(1===t)return o+e;if(2===t)return o+e}else if("Sb"===n||"Bi"===n||"As"===n){if(1===t)return o+e;if(2===t)return o+e}}else if(6===i){if("O"===n){if(t>=1)return o+e}else if(("S"===n||"Se"===n||"Po"===n)&&1===t)return o+e}else if(7===i&&("Cl"===n||"Br"===n||"I"===n||"At"===n)&&1===t)return o+e;return o+e+Math.abs(t)}}],[{key:"getAttrHash",value:function(t){var n={};for(var r in e.attrlist)"undefined"!==typeof t[r]&&(n[r]=t[r]);return n}},{key:"attrGetDefault",value:function(t){if(t in e.attrlist)return e.attrlist[t]}}]),e}();(0,r.Z)(re,"PATTERN",{RADICAL:{NONE:0,SINGLET:1,DOUPLET:2,TRIPLET:3},STEREO_PARITY:{NONE:0,ODD:1,EVEN:2,EITHER:3}}),(0,r.Z)(re,"attrlist",{alias:null,label:"C",isotope:0,radical:0,charge:0,explicitValence:-1,ringBondCount:0,substitutionCount:0,unsaturatedAtom:0,hCount:0,atomList:null,invRet:0,exactChangeFlag:0,rglabel:null,attpnt:null,aam:0,stereoLabel:null,stereoParity:0});var ie,oe=function(){function e(t){(0,l.Z)(this,e),this.begin=t.begin,this.end=t.end,this.type=t.type,this.xxx=t.xxx||"",this.stereo=e.PATTERN.STEREO.NONE,this.topology=e.PATTERN.TOPOLOGY.EITHER,this.reactingCenterStatus=0,this.len=0,this.sb=0,this.sa=0,this.angle=0,t.stereo&&(this.stereo=t.stereo),t.topology&&(this.topology=t.topology),t.reactingCenterStatus&&(this.reactingCenterStatus=t.reactingCenterStatus),this.center=new Y}return(0,c.Z)(e,[{key:"hasRxnProps",value:function(){return!!this.reactingCenterStatus}},{key:"getCenter",value:function(e){var t=e.atoms.get(this.begin).pp,n=e.atoms.get(this.end).pp;return Y.lc2(t,.5,n,.5)}},{key:"getDir",value:function(e){var t=e.atoms.get(this.begin).pp;return e.atoms.get(this.end).pp.sub(t).normalized()}},{key:"clone",value:function(t){var n=new e(this);return t&&(n.begin=t.get(n.begin),n.end=t.get(n.end)),n}}],[{key:"getAttrHash",value:function(t){var n={};for(var r in e.attrlist)(t[r]||"stereo"===r)&&(n[r]=t[r]);return n}},{key:"attrGetDefault",value:function(t){if(t in e.attrlist)return e.attrlist[t]}}]),e}();function ae(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function se(e,t){if(t&&0!==t.length){var n=t.map((function(t){return e.atoms.get(t)})).filter((function(e){return null===e||void 0===e?void 0:e.stereoLabel}));if(n.length){var r,i=n[0].stereoLabel,o=n.some((function(e){return(null===e||void 0===e?void 0:e.stereoLabel)!==i}));if(o)r=ie.Mixed;else{var a,s=null===(a=i.match(/\D+/g))||void 0===a?void 0:a[0];switch(s){case Q.Abs:r=ie.Abs;break;case Q.And:r=ie.And;break;case Q.Or:r=ie.Or;break;default:throw new Error("Unsupported stereo label: ".concat(s,"."))}}return r}}}(0,r.Z)(oe,"PATTERN",{TYPE:{SINGLE:1,DOUBLE:2,TRIPLE:3,AROMATIC:4,SINGLE_OR_DOUBLE:5,SINGLE_OR_AROMATIC:6,DOUBLE_OR_AROMATIC:7,ANY:8,DATIVE:9,HYDROGEN:10},STEREO:{NONE:0,UP:1,EITHER:4,DOWN:6,CIS_TRANS:3},TOPOLOGY:{EITHER:0,RING:1,CHAIN:2},REACTING_CENTER:{NOT_CENTER:-1,UNMARKED:0,CENTER:1,UNCHANGED:2,MADE_OR_BROKEN:4,ORDER_CHANGED:8,MADE_OR_BROKEN_AND_CHANGED:12}}),(0,r.Z)(oe,"attrlist",{type:oe.PATTERN.TYPE.SINGLE,stereo:oe.PATTERN.STEREO.NONE,topology:oe.PATTERN.TOPOLOGY.EITHER,reactingCenterStatus:oe.PATTERN.REACTING_CENTER.UNMARKED}),function(e){e.Mixed="MIXED",e.Abs="ABS",e.And="AND",e.Or="OR"}(ie||(ie={}));var ue=new WeakMap,le=new WeakMap,ce=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;(0,l.Z)(this,e),ae(this,ue,{writable:!0,value:void 0}),ae(this,le,{writable:!0,value:void 0}),n&&(this.stereoFlagPosition=new Y(n)),A(this,le,t)}return(0,c.Z)(e,[{key:"stereoAtoms",get:function(){return k(C(this,le))}},{key:"enhancedStereoFlag",get:function(){return C(this,ue)}},{key:"clone",value:function(t){var n=new e(C(this,le).map((function(e){return t.get(e)})),this.stereoFlagPosition);return A(n,ue,C(this,ue)),n}},{key:"updateStereoFlag",value:function(e){return A(this,ue,se(e,this.stereoAtoms)),C(this,ue)}},{key:"updateStereoAtom",value:function(e,t,n,r){var i;r&&!C(this,le).includes(t)&&C(this,le).push(t),r||(null===(i=e.atoms.get(t))||void 0===i?void 0:i.fragment)===n&&Array.from(e.bonds.values()).filter((function(e){return e.stereo&&e.type!==oe.PATTERN.TYPE.DOUBLE})).some((function(e){return e.begin===t}))||A(this,le,this.stereoAtoms.filter((function(e){return e!==t}))),A(this,ue,se(e,this.stereoAtoms))}},{key:"addStereoAtom",value:function(e){return!C(this,le).includes(e)&&(this.stereoAtoms.push(e),!0)}},{key:"deleteStereoAtom",value:function(e,t,n){var r;return((null===(r=e.atoms.get(n))||void 0===r?void 0:r.fragment)!==t||!Array.from(e.bonds.values()).filter((function(e){return e.stereo&&e.type!==oe.PATTERN.TYPE.DOUBLE})).some((function(e){return e.begin===n})))&&(A(this,le,C(this,le).filter((function(e){return e!==n}))),!0)}}],[{key:"getDefaultStereoFlagPosition",value:function(e,t){var n=e.getFragment(t);if(n){var r=n.getCoordBoundingBox();return new Y(r.max.x,r.min.y-1)}}}]),e}();var fe={scaled2obj:function(e,t){return e.scaled(1/t.scale)},obj2scaled:function(e,t){return e.scaled(t.scale)}};var he={isCorrectStereoCenter:function(e,t,n,r){var i,o=r.atoms.get(e.begin),a=NaN;return 2===(null===n||void 0===n?void 0:n.length)&&(a=n[0].aid===e.begin?n[1].aid:n[0].aid),e.stereo>0&&((1!==(null===n||void 0===n?void 0:n.length)||2!==(null===t||void 0===t?void 0:t.length)||Number(null===o||void 0===o?void 0:o.implicitH)%2!==0)&&((2!==(null===n||void 0===n?void 0:n.length)||2!==(null===t||void 0===t?void 0:t.length)||Number(null===o||void 0===o?void 0:o.implicitH)%2!==0||1!==(null===(i=r.atomGetNeighbors(a))||void 0===i?void 0:i.length))&&1!==(null===t||void 0===t?void 0:t.length)))}},de=function(){function e(){(0,l.Z)(this,e),this.functionalGroupsList=[]}return(0,c.Z)(e,[{key:"getFunctionalGroupsList",value:function(){return this.functionalGroupsList}},{key:"setFunctionalGroupsList",value:function(e){this.functionalGroupsList=e}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),pe=function(){function e(){(0,l.Z)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(1===n.length&&"min"in n[0]&&"max"in n[0]&&(this.p0=n[0].min,this.p1=n[0].max),2===n.length)this.p0=n[0],this.p1=n[1];else if(4===n.length)this.p0=new Y(n[0],n[1]),this.p1=new Y(n[2],n[3]);else{if(0!==n.length)throw new Error("Box2Abs constructor only accepts 4 numbers or 2 vectors or no args!");this.p0=new Y,this.p1=new Y}}return(0,c.Z)(e,[{key:"toString",value:function(){return this.p0.toString()+" "+this.p1.toString()}},{key:"clone",value:function(){return new e(this.p0,this.p1)}},{key:"extend",value:function(t,n){return n=n||t,new e(this.p0.sub(t),this.p1.add(n))}},{key:"include",value:function(t){return h()(null!=t),new e(this.p0.min(t),this.p1.max(t))}},{key:"contains",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return h()(null!=e),e.x>=this.p0.x-t&&e.x<=this.p1.x+t&&e.y>=this.p0.y-t&&e.y<=this.p1.y+t}},{key:"translate",value:function(t){return new e(this.p0.add(t),this.p1.add(t))}},{key:"transform",value:function(t,n){return h()("function"===typeof t),new e(t(this.p0,n),t(this.p1,n))}},{key:"sz",value:function(){return this.p1.sub(this.p0)}},{key:"centre",value:function(){return Y.centre(this.p0,this.p1)}},{key:"pos",value:function(){return this.p0}}],[{key:"fromRelBox",value:function(t){return new e(t.x,t.y,t.x+t.width,t.y+t.height)}},{key:"union",value:function(t,n){return new e(Y.min(t.p0,n.p0),Y.max(t.p1,n.p1))}},{key:"segmentIntersection",value:function(e,t,n,r){var i=(e.x-n.x)*(t.y-n.y)-(e.y-n.y)*(t.x-n.x),o=(e.x-r.x)*(t.y-r.y)-(e.y-r.y)*(t.x-r.x),a=(n.x-e.x)*(r.y-e.y)-(n.y-e.y)*(r.x-e.x),s=(n.x-t.x)*(r.y-t.y)-(n.y-t.y)*(r.x-t.x);return i*o<=0&&a*s<=0}}]),e}(),ve=(0,c.Z)((function e(t,n,r,i){(0,l.Z)(this,e),this.c=t,this.d=n,this.n=n.rotateSC(1,0),this.w=r,this.h=i})),me=function(){function e(t){(0,l.Z)(this,e),this.type=t,this.id=-1,this.label=-1,this.bracketBox=null,this.bracketDir=new Y(1,0),this.areas=[],this.hover=!1,this.hovering=null,this.selected=!1,this.selectionPlate=null,this.atoms=[],this.patoms=[],this.bonds=[],this.xBonds=[],this.neiAtoms=[],this.pp=null,this.data={mul:1,connectivity:"ht",name:"",subscript:"n",expanded:void 0,attached:!1,absolute:!0,showUnits:!1,nCharsToDisplay:-1,tagChar:"",daspPos:1,fieldType:"F",fieldName:"",fieldValue:"",units:"",query:"",queryOp:""}}return(0,c.Z)(e,[{key:"getAttr",value:function(e){return this.data[e]}},{key:"getAttrs",value:function(){var e=this,t={};return Object.keys(this.data).forEach((function(n){t[n]=e.data[n]})),t}},{key:"setAttr",value:function(e,t){var n=this.data[e];return this.data[e]=t,n}},{key:"checkAttr",value:function(e,t){return this.data[e]===t}},{key:"updateOffset",value:function(e){this.pp=Y.sum(this.bracketBox.p1,e)}},{key:"calculatePP",value:function(t){var n;if("Atom"===this.data.context||"Bond"===this.data.context){var r=[],i=null,o=new Y(1,0);this.atoms.forEach((function(e){var n=t.atoms.get(e),i=new Y(n.pp),o=new Y(.05*3,.05*3),a=new pe(i,i).extend(o,o);r.push(a)})),r.forEach((function(e){var t=null;[e.p0.x,e.p1.x].forEach((function(n){[e.p0.y,e.p1.y].forEach((function(e){var r=new Y(n,e),i=new Y(Y.dot(r,o),Y.dot(r,o.rotateSC(1,0)));t=t?t.include(i):new pe(i,i)}))})),i=i?pe.union(i,t):t})),n=i.p0}else n=this.bracketBox.p1.add(new Y(.5,.5));for(var a=Array.from(t.sgroups.values()),s=0;s<t.sgroups.size&&ge(a,n);++s)n=n.add(new Y(0,.5));if("INDIGO_CIP_DESC"===this.data.fieldName)if(1===this.atoms.length){var u,l=this.atoms[0],c=null===(u=t.atoms.get(l))||void 0===u?void 0:u.pp;c&&(n=c)}else n=e.getMassCentre(t,this.atoms);this.pp=n}}],[{key:"getOffset",value:function(e){return null!==e&&void 0!==e&&e.pp?Y.diff(e.pp,e.bracketBox.p1):null}},{key:"filterAtoms",value:function(e,t){for(var n=[],r=0;r<e.length;++r){var i=e[r];"number"!==typeof t[i]?n.push(i):t[i]>=0?n.push(t[i]):n.push(-1)}return n}},{key:"removeNegative",value:function(e){for(var t=[],n=0;n<e.length;++n)e[n]>=0&&t.push(e[n]);return t}},{key:"filter",value:function(t,n,r){n.atoms=e.removeNegative(e.filterAtoms(n.atoms,r))}},{key:"clone",value:function(t,n){var r=new e(t.type);return Object.keys(t.data).forEach((function(e){r.data[e]=t.data[e]})),r.atoms=t.atoms.map((function(e){return n.get(e)})),r.pp=t.pp,r.bracketBox=t.bracketBox,r.patoms=null,r.bonds=null,r.allAtoms=t.allAtoms,r.data.expanded=t.data.expanded,r}},{key:"addAtom",value:function(e,t){e.atoms.push(t)}},{key:"removeAtom",value:function(e,t){for(var n=0;n<e.atoms.length;++n)if(e.atoms[n]===t)return void e.atoms.splice(n,1)}},{key:"getCrossBonds",value:function(e,t){var n={};return e.bonds.forEach((function(e,r){t.has(e.begin)&&!t.has(e.end)?(n[e.begin]||(n[e.begin]=[]),n[e.begin].push(r)):t.has(e.end)&&!t.has(e.begin)&&(n[e.end]||(n[e.end]=[]),n[e.end].push(r))})),n}},{key:"bracketPos",value:function(e,t,n){var r=e.atoms,i=n?Object.values(n).flat():null;if(i&&2===i.length){var o=t.bonds.get(i[0]).getCenter(t),a=t.bonds.get(i[1]).getCenter(t);e.bracketDir=Y.diff(a,o).normalized()}else e.bracketDir=new Y(1,0);var s=e.bracketDir,u=null,l=[];r.forEach((function(e){var n=t.atoms.get(e),r=new Y(n.pp),i=new Y(.05*3,.05*3),o=new pe(r,r).extend(i,i);l.push(o)})),l.forEach((function(e){var t=null;[e.p0.x,e.p1.x].forEach((function(n){[e.p0.y,e.p1.y].forEach((function(e){var r=new Y(n,e),i=new Y(Y.dot(r,s),Y.dot(r,s.rotateSC(1,0)));t=t?t.include(i):new pe(i,i)}))})),u=u?pe.union(u,t):t}));var c=new Y(.2,.4);u&&(u=u.extend(c,c)),e.bracketBox=u}},{key:"getBracketParameters",value:function(e,t,n,r,i,o){var a=[],s=Object.values(t),u=s.flat();return u.length<2?function(){i=i||new Y(1,0),o=o||i.rotateSC(1,0);var e=Math.min(.25,.3*r.sz().x),t=Y.lc2(i,r.p0.x,o,.5*(r.p0.y+r.p1.y)),n=Y.lc2(i,r.p1.x,o,.5*(r.p0.y+r.p1.y)),s=r.sz().y;a.push(new ve(t,i.negated(),e,s),new ve(n,i,e,s))}():2===u.length&&2===s.length?function(){var t=e.bonds.get(u[0]),n=e.bonds.get(u[1]),r=t.getCenter(e),i=n.getCenter(e),o=Y.diff(i,r).normalized(),s=o.negated();a.push(new ve(r.addScaled(s,0),s,.25,1.5),new ve(i.addScaled(o,0),o,.25,1.5))}():function(){for(var t=0;t<u.length;++t){var r=e.bonds.get(u[t]),i=r.getCenter(e),o=n.has(r.begin)?r.getDir(e):r.getDir(e).negated();a.push(new ve(i,o,.2,1))}}(),a}},{key:"getObjBBox",value:function(e,t){for(var n=t.atoms.get(e[0]).pp,r=new pe(n,n),i=1;i<e.length;++i){var o=e[i],a=t.atoms.get(o).pp;r=r.include(a)}return r}},{key:"getAtoms",value:function(e,t){if(!t.allAtoms)return t.atoms;var n=[];return e.atoms.forEach((function(e,t){n.push(t)})),n}},{key:"getBonds",value:function(t,n){var r=e.getAtoms(t,n),i=[];return t.bonds.forEach((function(e,t){r.indexOf(e.begin)>=0&&r.indexOf(e.end)>=0&&i.push(t)})),i}},{key:"prepareMulForSaving",value:function(e,t){e.atoms.sort((function(e,t){return e-t})),e.atomSet=new ee(e.atoms),e.parentAtomSet=new ee(e.atomSet);var n=[],r=[];if(t.bonds.forEach((function(t,i){e.parentAtomSet.has(t.begin)&&e.parentAtomSet.has(t.end)?n.push(i):(e.parentAtomSet.has(t.begin)||e.parentAtomSet.has(t.end))&&r.push(i)})),0!==r.length&&2!==r.length)throw Error("Unsupported cross-bonds number");var i=-1,o=-1,a=null;if(2===r.length){var s=t.bonds.get(r[0]);i=e.parentAtomSet.has(s.begin)?s.begin:s.end;var u=t.bonds.get(r[1]);o=e.parentAtomSet.has(u.begin)?u.begin:u.end,a=u}for(var l=o,c=[],f=function(r){var s={};if(e.atoms.forEach((function(n){var r=t.atoms.get(n),i=t.atoms.add(new re(r));c.push(i),e.atomSet.add(i),s[n]=i})),n.forEach((function(e){var n=t.bonds.get(e),r=new oe(n);r.begin=s[r.begin],r.end=s[r.end],t.bonds.add(r)})),null!==a){var u=new oe(a);u.begin=l,u.end=s[i],t.bonds.add(u),l=s[o]}},h=0;h<e.data.mul-1;h++)f();if(l>=0){var d=t.bonds.get(r[1]);d.begin===o?d.begin=l:d.end=l}e.bonds=r,c.forEach((function(n){t.sGroupForest.getPathToRoot(e.id).reverse().forEach((function(e){t.atomAddToSGroup(e,n)}))}))}},{key:"getMassCentre",value:function(e,t){for(var n=new Y,r=0;r<t.length;++r)n=n.addScaled(e.atoms.get(t[r]).pp,1/t.length);return n}}]),e}();function ge(e,t){return e.some((function(e){if(!e.pp)return!1;var n=e.pp.add(new Y(.5,.5)),r=t.add(new Y(.5,.5));return pe.segmentIntersection(e.pp,n,t,r)}))}function ye(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return be(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xe(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}(0,r.Z)(me,"TYPES",{SUP:"SUP",MUL:"MUL",SRU:"SRU",MON:"MON",MER:"MER",COP:"COP",CRO:"CRO",MOD:"MOD",GRA:"GRA",COM:"COM",MIX:"MIX",FOR:"FOR",DAT:"DAT",ANY:"ANY",GEN:"GEN"});var _e,we=new WeakMap,Se=function(){function e(t){(0,l.Z)(this,e),xe(this,we,{writable:!0,value:void 0}),h()(null!=t),A(this,we,t)}return(0,c.Z)(e,[{key:"name",get:function(){return C(this,we).data.name}},{key:"relatedSGroupId",get:function(){return C(this,we).id}},{key:"isExpanded",get:function(){return C(this,we).data.expanded}},{key:"relatedSGroup",get:function(){return C(this,we)}}],[{key:"isFunctionalGroup",value:function(e){return de.getInstance().getFunctionalGroupsList().some((function(t){return t.name===e.data.name}))&&"SUP"===e.type}},{key:"atomsInFunctionalGroup",value:function(e,t){if(0===e.size)return null;var n,r=ye(e.values());try{for(r.s();!(n=r.n()).done;){if(n.value.relatedSGroup.atoms.includes(t))return t}}catch(i){r.e(i)}finally{r.f()}return null}},{key:"bondsInFunctionalGroup",value:function(e,t,n){if(0===t.size)return null;var r,i=ye(t.values());try{for(i.s();!(r=i.n()).done;){var o=r.value;if(me.getBonds(e,o.relatedSGroup).includes(n))return n}}catch(a){i.e(a)}finally{i.f()}return null}},{key:"findFunctionalGroupByAtom",value:function(e,t){var n,r=ye(e.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.relatedSGroup.atoms.includes(t))return i.relatedSGroupId}}catch(o){r.e(o)}finally{r.f()}return null}},{key:"findFunctionalGroupByBond",value:function(e,t,n){var r,i=ye(t.values());try{for(i.s();!(r=i.n()).done;){var o=r.value;if(me.getBonds(e,o.relatedSGroup).includes(n))return o.relatedSGroupId}}catch(a){i.e(a)}finally{i.f()}return null}},{key:"clone",value:function(t){return new e(C(t,we))}},{key:"isFirstAtomInFunctionalGroup",value:function(t,n){var r,i=ye(t.values());try{for(i.s();!(r=i.n()).done;){var o=r.value;if(e.isFunctionalGroup(o)&&n===o.atoms[0])return!0}}catch(a){i.e(a)}finally{i.f()}return!1}},{key:"isAtomInContractedFunctionalGroup",value:function(t,n,r,i){var o=[];return i?n.forEach((function(t){e.isContractedFunctionalGroup(t.item.id,r)&&o.push(t.item.id)})):n.forEach((function(t){e.isContractedFunctionalGroup(t.id,r)&&o.push(t.id)})),o.some((function(e){return t.sgs.has(e)}))}},{key:"isBondInContractedFunctionalGroup",value:function(t,n,r,i){var o=[];return i?n.forEach((function(t){e.isContractedFunctionalGroup(t.item.id,r)&&o.push.apply(o,k(t.item.atoms))})):n.forEach((function(t){e.isContractedFunctionalGroup(t.id,r)&&o.push.apply(o,k(t.atoms))})),o.includes(t.begin)&&o.includes(t.end)}},{key:"isContractedFunctionalGroup",value:function(e,t){var n=!1,r=!1;return t.forEach((function(t){t.relatedSGroupId===e&&(n=!0,r=t.isExpanded)})),!r&&n}}]),e}(),Ee=(0,c.Z)((function e(t,n,r){(0,l.Z)(this,e),h()(3===arguments.length,"Invalid parameter number."),this.begin=t,this.end=n,this.bid=r,this.dir=new Y,this.norm=new Y,this.ang=0,this.p=new Y,this.loop=-1,this.contra=-1,this.next=-1,this.leftSin=0,this.leftCos=0,this.leftNeighbor=0,this.rightSin=0,this.rightCos=0,this.rightNeighbor=0})),ke=(0,c.Z)((function e(t,n,r){var i=this;(0,l.Z)(this,e),this.hbs=t,this.dblBonds=0,this.aromatic=!0,this.convex=r||!1,t.forEach((function(e){var t=n.bonds.get(n.halfBonds.get(e).bid);t.type!==oe.PATTERN.TYPE.AROMATIC&&(i.aromatic=!1),t.type===oe.PATTERN.TYPE.DOUBLE&&i.dblBonds++}))})),Oe=function(){function e(t){(0,l.Z)(this,e),this.frags=new ee,this.resth=(null===t||void 0===t?void 0:t.resth)||!1,this.range=(null===t||void 0===t?void 0:t.range)||"",this.ifthen=(null===t||void 0===t?void 0:t.ifthen)||0,this.index=(null===t||void 0===t?void 0:t.index)||-1}return(0,c.Z)(e,[{key:"getAttrs",value:function(){return{resth:this.resth,range:this.range,ifthen:this.ifthen,index:this.index}}},{key:"clone",value:function(t){var n=new e(this);return this.frags.forEach((function(e){n.frags.add(t?t.get(e):e)})),n}}],[{key:"findRGroupByFragment",value:function(e,t){return e.find((function(e,n){return n.frags.has(t)}))}}]),e}();!function(e){e.OpenAngle="open-angle",e.FilledTriangle="filled-triangle",e.FilledBow="filled-bow",e.DashedOpenAngle="dashed-open-angle",e.Failed="failed",e.BothEndsFilledTriangle="both-ends-filled-triangle",e.EquilibriumFilledTriangle="equilibrium-filled-triangle",e.EquilibriumFilledHalfBow="equilibrium-filled-half-bow",e.EquilibriumOpenAngle="equilibrium-open-angle",e.UnbalancedEquilibriumFilledHalfBow="unbalanced-equilibrium-filled-half-bow",e.UnbalancedEquilibriumOpenHalfAngle="unbalanced-equilibrium-open-half-angle",e.UnbalancedEquilibriumLargeFilledHalfBow="unbalanced-equilibrium-large-filled-half-bow",e.UnbalancedEquilibriumFilledHalfTriangle="unbalanced-equilibrium-filled-half-triangle",e.EllipticalArcFilledBow="elliptical-arc-arrow-filled-bow",e.EllipticalArcFilledTriangle="elliptical-arc-arrow-filled-triangle",e.EllipticalArcOpenAngle="elliptical-arc-arrow-open-angle",e.EllipticalArcOpenHalfAngle="elliptical-arc-arrow-open-half-angle"}(_e||(_e={}));var Ae,Ce=function(){function e(t){if((0,l.Z)(this,e),this.pos=[],t.pos)for(var n=0;n<t.pos.length;n++){var r=t.pos[n];this.pos[n]=r?new Y(t.pos[n]):new Y}this.mode=t.mode;var i;e.isElliptical(this)&&(this.height=null!==(i=t.height)&&void 0!==i?i:2)}return(0,c.Z)(e,[{key:"clone",value:function(){return new e(this)}},{key:"center",value:function(){return Y.centre(this.pos[0],this.pos[1])}}],[{key:"isElliptical",value:function(e){return[_e.EllipticalArcFilledBow,_e.EllipticalArcFilledTriangle,_e.EllipticalArcOpenHalfAngle,_e.EllipticalArcOpenAngle].includes(e.mode)}}]),e}(),Me=function(){function e(t){(0,l.Z)(this,e),this.pp=null!==t&&void 0!==t&&t.pp?new Y(t.pp):new Y}return(0,c.Z)(e,[{key:"clone",value:function(){return new e(this)}}]),e}(),Te=function(){function e(){(0,l.Z)(this,e),this.parent=new Map,this.children=new Map,this.children.set(-1,[]),this.atomSets=new Map}return(0,c.Z)(e,[{key:"getSGroupsBFS",value:function(){for(var e=[],t=Array.from(this.children.get(-1));t.length>0;){var n=t.shift();if("number"!==typeof n)break;var r=this.children.get(n);if("undefined"===typeof r)break;r.forEach((function(e){t.push(e)})),e.push(n)}return e}},{key:"getAtomSetRelations",value:function(e,t){var n=this,r=new Map,i=new Map;this.atomSets.delete(e),this.atomSets.forEach((function(e,n){i.set(n,e.isSuperset(t)),r.set(n,t.isSuperset(e)&&!e.equals(t))}));var o=Array.from(this.atomSets.keys()).filter((function(e){if(!i.get(e))return!1;var t=n.children.get(e);return t&&t.findIndex((function(e){return i.get(e)}))<0}));return{children:Array.from(this.atomSets.keys()).filter((function(e){return r.get(e)&&!r.get(n.parent.get(e))})),parent:0===o.length?-1:o[0]}}},{key:"getPathToRoot",value:function(e){for(var t=[],n=e;n>=0;n=this.parent.get(n))t.push(n);return t}},{key:"insert",value:function(e,t,n){var r,i=this,o=e.id,a=e.atoms;if(h()(!this.parent.has(o),"sgid already present in the forest"),h()(!this.children.has(o),"sgid already present in the forest"),!t||!n){var s=this.getAtomSetRelations(o,new ee(a));t=s.parent,n=s.children}return n.forEach((function(e){i.resetParentLink(e,o)})),this.children.set(o,n.filter((function(e){return i.parent.get(e)}))),this.parent.set(o,t),null===(r=this.children.get(t))||void 0===r||r.push(o),this.atomSets.set(o,new ee(a)),{parent:t,children:n}}},{key:"resetParentLink",value:function(e,t){var n=this.parent.get(e);if("undefined"!==typeof n){var r=this.children.get(n);if(r){var i=r.indexOf(e);r.splice(i,1),this.parent.set(e,t)}}}},{key:"remove",value:function(e){var t,n=this;h()(this.parent.has(e),"sgid is not in the forest"),h()(this.children.has(e),"sgid is not in the forest");var r=this.parent.get(e),i=this.children.get(r);null===(t=this.children.get(e))||void 0===t||t.forEach((function(e){var t;n.parent.set(e,r),null===(t=n.children.get(r))||void 0===t||t.push(e)}));var o=i.indexOf(e);i.splice(o,1),this.children.delete(e),this.parent.delete(e),this.atomSets.delete(e)}}]),e}();!function(e){e.ellipse="ellipse",e.rectangle="rectangle",e.line="line"}(Ae||(Ae={}));var Pe=function(){function e(t){if((0,l.Z)(this,e),this.pos=[],null!==t&&void 0!==t&&t.pos)for(var n=0;n<t.pos.length;n++){var r=t.pos[n];this.pos[n]=r?new Y(t.pos[n]):new Y}this.mode=(null===t||void 0===t?void 0:t.mode)||Ae.line}return(0,c.Z)(e,[{key:"clone",value:function(){return new e(this)}},{key:"center",value:function(){return this.mode===Ae.rectangle?Y.centre(this.pos[0],this.pos[1]):this.pos[0]}}]),e}();function Re(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ie(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Ne=function(e){p(n,e);var t=Le(n);function n(){var e;(0,l.Z)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(m(e),"nextId",0),e}return(0,c.Z)(n,[{key:"add",value:function(e){var t=this.nextId++;return P(y(n.prototype),"set",this).call(this,t,e),t}},{key:"newId",value:function(){return this.nextId++}},{key:"keyOf",value:function(e){var t,n=Re(this.entries());try{for(n.s();!(t=n.n()).done;){var r=(0,M.Z)(t.value,2),i=r[0];if(r[1]===e)return i}}catch(o){n.e(o)}finally{n.f()}return null}},{key:"find",value:function(e){var t,n=Re(this.entries());try{for(n.s();!(t=n.n()).done;){var r=(0,M.Z)(t.value,2),i=r[0];if(e(i,r[1]))return i}}catch(o){n.e(o)}finally{n.f()}return null}},{key:"filter",value:function(e){return new n(Array.from(this).filter((function(t){var n=(0,M.Z)(t,2),r=n[0],i=n[1];return e(r,i)})))}},{key:"some",value:function(e){var t,n=Re(this.values());try{for(n.s();!(t=n.n()).done;){if(e(t.value))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}}]),n}(_(Map));function je(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return!1;return e.push(t),!0}var De,Be=function(){function e(){(0,l.Z)(this,e),this.atoms=new Ne,this.bonds=new Ne,this.sgroups=new Ne,this.halfBonds=new Ne,this.loops=new Ne,this.isReaction=!1,this.rxnArrows=new Ne,this.rxnPluses=new Ne,this.frags=new Ne,this.rgroups=new Ne,this.name="",this.sGroupForest=new Te,this.simpleObjects=new Ne,this.texts=new Ne,this.functionalGroups=new Ne,this.highlights=new Ne}return(0,c.Z)(e,[{key:"hasRxnProps",value:function(){return!(!this.atoms.find((function(e,t){return t.hasRxnProps()}))&&!this.bonds.find((function(e,t){return t.hasRxnProps()})))}},{key:"hasRxnArrow",value:function(){return 1===this.rxnArrows.size}},{key:"hasRxnPluses",value:function(){return this.rxnPluses.size>0}},{key:"isRxn",value:function(){return this.hasRxnArrow()||this.hasRxnPluses()}},{key:"isBlank",value:function(){return 0===this.atoms.size&&0===this.rxnArrows.size&&0===this.rxnPluses.size&&0===this.simpleObjects.size&&0===this.texts.size}},{key:"clone",value:function(t,n,r,i,o,a){return this.mergeInto(new e,t,n,r,!1,i,o,a)}},{key:"getScaffold",value:function(){var e=this,t=new ee;return this.atoms.forEach((function(e,n){t.add(n)})),this.rgroups.forEach((function(n){n.frags.forEach((function(n,r){e.atoms.forEach((function(e,n){e.fragment===r&&t.delete(n)}))}))})),this.clone(t)}},{key:"getFragmentIds",value:function(e){var t=new ee;return this.atoms.forEach((function(n,r){n.fragment===e&&t.add(r)})),t}},{key:"getFragment",value:function(e){return this.clone(this.getFragmentIds(e),null,!0)}},{key:"mergeInto",value:function(e,t,n,r,i,o,a,s){var u=this;t=t||new ee(this.atoms.keys()),n=n||new ee(this.bonds.keys()),a=a||new ee(this.simpleObjects.keys()),s=s||new ee(this.texts.keys()),o=o||new Map,n=n.filter((function(e){var n=u.bonds.get(e);return t.has(n.begin)&&t.has(n.end)}));var l=new ee;this.atoms.forEach((function(e,n){t.has(n)&&l.add(e.fragment)}));var c=new Map;this.frags.forEach((function(t,n){l.has(n)&&c.set(n,e.frags.add(null))}));var f=[];this.rgroups.forEach((function(t,n){var r=i;if(r||(t.frags.forEach((function(e,t){f.push(t),l.has(t)&&(r=!0)})),r)){var o=e.rgroups.get(n);o?t.frags.forEach((function(e,t){f.push(t),l.has(t)&&o.frags.add(c.get(t))})):e.rgroups.set(n,t.clone(c))}})),this.atoms.forEach((function(n,r){t.has(r)&&-1===f.indexOf(n.fragment)&&o.set(r,e.atoms.add(n.clone(c)))})),this.atoms.forEach((function(n,r){t.has(r)&&-1!==f.indexOf(n.fragment)&&o.set(r,e.atoms.add(n.clone(c)))})),c.forEach((function(t,n){var r=u.frags.get(n);r&&r instanceof ce&&e.frags.set(t,u.frags.get(n).clone(o))}));var h=new Map;return this.bonds.forEach((function(t,r){n.has(r)&&h.set(r,e.bonds.add(t.clone(o)))})),this.sgroups.forEach((function(n){if(!n.atoms.some((function(e){return!t.has(e)}))){n=me.clone(n,o);var r=e.sgroups.add(n);n.id=r,n.atoms.forEach((function(t){var n=e.atoms.get(t);n&&n.sgs.add(r)})),"DAT"===n.type?e.sGroupForest.insert(n,-1,[]):e.sGroupForest.insert(n)}})),this.functionalGroups.forEach((function(t){t=Se.clone(t),e.functionalGroups.add(t)})),a.forEach((function(t){e.simpleObjects.add(u.simpleObjects.get(t).clone())})),s.forEach((function(t){e.texts.add(u.texts.get(t).clone())})),r||(e.isReaction=this.isReaction,this.rxnArrows.forEach((function(t){e.rxnArrows.add(t.clone())})),this.rxnPluses.forEach((function(t){e.rxnPluses.add(t.clone())}))),e.name=this.name,e}},{key:"prepareLoopStructure",value:function(){this.initHalfBonds(),this.initNeighbors(),this.updateHalfBonds(Array.from(this.atoms.keys())),this.sortNeighbors(Array.from(this.atoms.keys())),this.findLoops()}},{key:"atomAddToSGroup",value:function(e,t){me.addAtom(this.sgroups.get(e),t),this.atoms.get(t).sgs.add(e)}},{key:"calcConn",value:function(e){for(var t=0,n=0;n<e.neighbors.length;++n){var r=this.halfBonds.get(e.neighbors[n]);switch(this.bonds.get(r.bid).type){case oe.PATTERN.TYPE.SINGLE:t+=1;break;case oe.PATTERN.TYPE.DOUBLE:t+=2;break;case oe.PATTERN.TYPE.TRIPLE:t+=3;break;case oe.PATTERN.TYPE.DATIVE:case oe.PATTERN.TYPE.HYDROGEN:break;case oe.PATTERN.TYPE.AROMATIC:return 1===e.neighbors.length?[-1,!0]:[e.neighbors.length,!0];default:return[-1,!1]}}return[t,!1]}},{key:"findBondId",value:function(e,t){return this.bonds.find((function(n,r){return r.begin===e&&r.end===t||r.begin===t&&r.end===e}))}},{key:"initNeighbors",value:function(){var e=this;this.atoms.forEach((function(e){e.neighbors=[]})),this.bonds.forEach((function(t){var n=e.atoms.get(t.begin),r=e.atoms.get(t.end);n.neighbors.push(t.hb1),r.neighbors.push(t.hb2)}))}},{key:"bondInitHalfBonds",value:function(e,t){(t=t||this.bonds.get(e)).hb1=2*e,t.hb2=2*e+1,this.halfBonds.set(t.hb1,new Ee(t.begin,t.end,e)),this.halfBonds.set(t.hb2,new Ee(t.end,t.begin,e));var n=this.halfBonds.get(t.hb1),r=this.halfBonds.get(t.hb2);n.contra=t.hb2,r.contra=t.hb1}},{key:"halfBondUpdate",value:function(e){var t=this.halfBonds.get(e),n=this.atoms.get(t.begin).pp,r=this.atoms.get(t.end).pp,i=Y.diff(r,n).normalized();t.dir=Y.dist(r,n)>1e-4?i:new Y(1,0),t.norm=t.dir.turnLeft(),t.ang=t.dir.oxAngle(),t.loop<0&&(t.loop=-1)}},{key:"initHalfBonds",value:function(){var e=this;this.halfBonds.clear(),this.bonds.forEach((function(t,n){e.bondInitHalfBonds(n,t)}))}},{key:"setHbNext",value:function(e,t){this.halfBonds.get(this.halfBonds.get(e).contra).next=t}},{key:"halfBondSetAngle",value:function(e,t){var n=this.halfBonds.get(e),r=this.halfBonds.get(t);r.rightCos=Y.dot(r.dir,n.dir),n.leftCos=Y.dot(r.dir,n.dir),r.rightSin=Y.cross(r.dir,n.dir),n.leftSin=Y.cross(r.dir,n.dir),n.leftNeighbor=t,r.rightNeighbor=e}},{key:"atomAddNeighbor",value:function(e){var t,n=this.halfBonds.get(e),r=this.atoms.get(n.begin);for(t=0;t<r.neighbors.length&&!(this.halfBonds.get(r.neighbors[t]).ang>n.ang);++t);r.neighbors.splice(t,0,e);var i=r.neighbors[(t+1)%r.neighbors.length],o=r.neighbors[(t+r.neighbors.length-1)%r.neighbors.length];this.setHbNext(o,e),this.setHbNext(e,i),this.halfBondSetAngle(e,o),this.halfBondSetAngle(i,e)}},{key:"atomSortNeighbors",value:function(e){var t=this,n=this.atoms.get(e),r=this.halfBonds;n.neighbors.sort((function(e,t){return r.get(e).ang-r.get(t).ang})).forEach((function(e,r){var i=n.neighbors[(r+1)%n.neighbors.length];t.halfBonds.get(t.halfBonds.get(e).contra).next=i,t.halfBondSetAngle(i,e)}))}},{key:"sortNeighbors",value:function(e){var t=this;e?e.forEach((function(e){t.atomSortNeighbors(e)})):this.atoms.forEach((function(e,n){t.atomSortNeighbors(n)}))}},{key:"atomUpdateHalfBonds",value:function(e){var t=this;this.atoms.get(e).neighbors.forEach((function(e){t.halfBondUpdate(e),t.halfBondUpdate(t.halfBonds.get(e).contra)}))}},{key:"updateHalfBonds",value:function(e){var t=this;e?e.forEach((function(e){t.atomUpdateHalfBonds(e)})):this.atoms.forEach((function(e,n){t.atomUpdateHalfBonds(n)}))}},{key:"sGroupsRecalcCrossBonds",value:function(){var e=this;this.sgroups.forEach((function(e){e.xBonds=[],e.neiAtoms=[]})),this.bonds.forEach((function(t,n){var r=e.atoms.get(t.begin),i=e.atoms.get(t.end);r.sgs.forEach((function(r){if(!i.sgs.has(r)){var o=e.sgroups.get(r);o.xBonds.push(n),je(o.neiAtoms,t.end)}})),i.sgs.forEach((function(i){if(!r.sgs.has(i)){var o=e.sgroups.get(i);o.xBonds.push(n),je(o.neiAtoms,t.begin)}}))}))}},{key:"sGroupDelete",value:function(e){var t=this;this.sgroups.get(e).atoms.forEach((function(n){t.atoms.get(n).sgs.delete(e)})),this.sGroupForest.remove(e),this.sgroups.delete(e)}},{key:"atomSetPos",value:function(e,t){this.atoms.get(e).pp=t}},{key:"rxnPlusSetPos",value:function(e,t){this.rxnPluses.get(e).pp=t}},{key:"rxnArrowSetPos",value:function(e,t){var n=this.rxnArrows.get(e);n&&(n.pos=t)}},{key:"simpleObjectSetPos",value:function(e,t){this.simpleObjects.get(e).pos=t}},{key:"textSetPosition",value:function(e,t){var n=this.texts.get(e);n&&(n.position=t)}},{key:"getCoordBoundingBox",value:function(e){var t=null;function n(e){t?e instanceof Array?e.forEach((function(e){t.min=Y.min(t.min,e),t.max=Y.max(t.max,e)})):(t.min=Y.min(t.min,e),t.max=Y.max(t.max,e)):t={min:e,max:e}}var r=!e||0===e.size;return this.atoms.forEach((function(t,i){(r||e.has(i))&&n(t.pp)})),r&&(this.rxnPluses.forEach((function(e){n(e.pp)})),this.rxnArrows.forEach((function(e){n(e.pos)})),this.simpleObjects.forEach((function(e){n(e.pos)})),this.texts.forEach((function(e){n(e.position)}))),!t&&r&&(t={min:new Y(0,0),max:new Y(1,1)}),t}},{key:"getCoordBoundingBoxObj",value:function(){var e=null;return this.atoms.forEach((function(t){var n;n=t.pp,e?(e.min=Y.min(e.min,n),e.max=Y.max(e.max,n)):e={min:new Y(n),max:new Y(n)}})),e}},{key:"getBondLengthData",value:function(){var e=this,t=0,n=0;return this.bonds.forEach((function(r){t+=Y.dist(e.atoms.get(r.begin).pp,e.atoms.get(r.end).pp),n++})),{cnt:n,totalLength:t}}},{key:"getAvgBondLength",value:function(){var e=this.getBondLengthData();return e.cnt>0?e.totalLength/e.cnt:-1}},{key:"getAvgClosestAtomDistance",value:function(){var e,t,n,r=0,i=0,o=Array.from(this.atoms.keys());for(t=0;t<o.length;++t){for(e=-1,n=0;n<o.length;++n)n!==t&&(i=Y.dist(this.atoms.get(o[n]).pp,this.atoms.get(o[t]).pp),(e<0||e>i)&&(e=i));r+=e}return o.length>0?r/o.length:-1}},{key:"checkBondExists",value:function(e,t){var n=this.bonds.find((function(n,r){return r.begin===e&&r.end===t||r.end===e&&r.begin===t}));return void 0!==n}},{key:"findConnectedComponent",value:function(e){for(var t=this,n=[e],r=new ee;n.length>0;){var i=n.pop();r.add(i),this.atoms.get(i).neighbors.forEach((function(e){var i=t.halfBonds.get(e).end;r.has(i)||n.push(i)}))}return r}},{key:"findConnectedComponents",value:function(e){var t=this;this.halfBonds.size||(this.initHalfBonds(),this.initNeighbors(),this.updateHalfBonds(Array.from(this.atoms.keys())),this.sortNeighbors(Array.from(this.atoms.keys())));var n=new ee,r=[];return this.atoms.forEach((function(i,o){if((e||i.fragment<0)&&!n.has(o)){var a=t.findConnectedComponent(o);r.push(a),n=n.union(a)}})),r}},{key:"markFragment",value:function(e){var t=this,n=new ce,r=this.frags.add(n);e.forEach((function(e){var i=t.atoms.get(e);i.stereoLabel&&n.updateStereoAtom(t,e,r,!0),i.fragment=r}))}},{key:"markFragments",value:function(){var e=this;this.findConnectedComponents().forEach((function(t){e.markFragment(t)}))}},{key:"scale",value:function(e){1!==e&&(this.atoms.forEach((function(t){t.pp=t.pp.scaled(e)})),this.rxnPluses.forEach((function(t){t.pp=t.pp.scaled(e)})),this.rxnArrows.forEach((function(t){t.pos=t.pos.map((function(t){return t.scaled(e)}))})),this.sgroups.forEach((function(t){t.pp=t.pp?t.pp.scaled(e):null})))}},{key:"rescale",value:function(){var e=this.getAvgBondLength();e<0&&!this.isReaction&&(e=this.getAvgClosestAtomDistance()),e<.001&&(e=1);var t=1/e;this.scale(t)}},{key:"loopHasSelfIntersections",value:function(e){for(var t=0;t<e.length;++t)for(var n=this.halfBonds.get(e[t]),r=this.atoms.get(n.begin).pp,i=this.atoms.get(n.end).pp,o=new ee([n.begin,n.end]),a=t+2;a<e.length;++a){var s=this.halfBonds.get(e[a]);if(!o.has(s.begin)&&!o.has(s.end)){var u=this.atoms.get(s.begin).pp,l=this.atoms.get(s.end).pp;if(pe.segmentIntersection(r,i,u,l))return!0}}return!1}},{key:"partitionLoop",value:function(e){for(var t=[],n=!0;n;){var r={};n=!1;for(var i=0;i<e.length;++i){var o=e[i],a=this.halfBonds.get(o).begin,s=this.halfBonds.get(o).end;if(s in r){var u=r[s],l=e.slice(u,i+1);t.push(l),i<e.length&&e.splice(u,i-u+1),n=!0;break}r[a]=i}n||t.push(e)}return t}},{key:"halfBondAngle",value:function(e,t){var n=this.halfBonds.get(e),r=this.halfBonds.get(t);return Math.atan2(Y.cross(n.dir,r.dir),Y.dot(n.dir,r.dir))}},{key:"loopIsConvex",value:function(e){var t=this;return e.every((function(e,n,r){return t.halfBondAngle(e,r[(n+1)%r.length])<=0}))}},{key:"loopIsInner",value:function(e){var t=this,n=2*Math.PI;return e.forEach((function(e,r,i){var o=i[(r+1)%i.length],a=t.halfBonds.get(o),s=t.halfBondAngle(e,o);n+=a.contra===e?Math.PI:s})),Math.abs(n)<Math.PI}},{key:"findLoops",value:function(){var e,t,n,r=this,i=[],o=new ee;return this.halfBonds.forEach((function(a,s){if(-1===a.loop)for(e=s,t=0,n=[];t<=r.halfBonds.size;e=r.halfBonds.get(e).next,++t){if(t>0&&e===s){r.partitionLoop(n).forEach((function(e){var t;r.loopIsInner(e)&&!r.loopHasSelfIntersections(e)?(t=Math.min.apply(Math,k(e)),r.loops.set(t,new ke(e,r,r.loopIsConvex(e)))):t=-2,e.forEach((function(e){r.halfBonds.get(e).loop=t,o.add(r.halfBonds.get(e).bid)})),t>=0&&i.push(t)}));break}n.push(e)}})),{newLoops:i,bondsToMark:Array.from(o)}}},{key:"calcImplicitHydrogen",value:function(e){var t=this.atoms.get(e),n=this.calcConn(t),r=(0,M.Z)(n,2),i=r[0],o=r[1],a=i;if(t.badConn=!1,o)if("C"===t.label&&0===t.charge){if(3===i)return void(t.implicitH=-ne(t.radical));if(2===i)return void(t.implicitH=1-ne(t.radical))}else{if("O"===t.label&&0===t.charge||"N"===t.label&&0===t.charge&&3===i||"N"===t.label&&1===t.charge&&3===i||"S"===t.label&&0===t.charge&&3===i)return void(t.implicitH=0);t.hasImplicitH||a++}if(a<0||t.isQuery())t.implicitH=0;else if(t.explicitValence>=0){var s=H(t.label);t.implicitH=s?t.explicitValence-t.calcValenceMinusHyd(a):0,t.implicitH<0&&(t.implicitH=0,t.badConn=!0)}else t.calcValence(a)}},{key:"setImplicitHydrogen",value:function(e){var t=this;this.sgroups.forEach((function(e){"MRV_IMPLICIT_H"===e.data.fieldName&&(t.atoms.get(e.atoms[0]).hasImplicitH=!0)})),e?e.forEach((function(e){t.atoms.get(e)&&t.calcImplicitHydrogen(e)})):this.atoms.forEach((function(e,n){t.calcImplicitHydrogen(n)}))}},{key:"atomGetNeighbors",value:function(e){var t,n=this;return null===(t=this.atoms.get(e))||void 0===t?void 0:t.neighbors.map((function(e){var t=n.halfBonds.get(e);return{aid:t.end,bid:t.bid}}))}},{key:"getComponents",value:function(){var e=this,t=this.findConnectedComponents(!0),n=[],r=null;this.rxnArrows.forEach((function(e){r=e.center().x})),this.rxnPluses.forEach((function(e){n.push(e.pp.x)})),null!==r&&n.push(r),n.sort((function(e,t){return e-t}));var i=[];t.forEach((function(t){for(var r=e.getCoordBoundingBox(t),o=Y.lc2(r.min,.5,r.max,.5),a=0;o.x>n[a];)++a;i[a]=i[a]||new ee,i[a]=i[a].union(t)}));var o=[],a=[];return i.forEach((function(t){t&&(1===e.defineRxnFragmentTypeForAtomset(t,r||0)?o.push(t):a.push(t))})),{reactants:o,products:a}}},{key:"defineRxnFragmentTypeForAtomset",value:function(e,t){var n=this.getCoordBoundingBox(e);return Y.lc2(n.min,.5,n.max,.5).x<t?1:2}},{key:"getBondFragment",value:function(e){var t,n,r=null===(t=this.bonds.get(e))||void 0===t?void 0:t.begin;return r&&(null===(n=this.atoms.get(r))||void 0===n?void 0:n.fragment)}},{key:"bindSGroupsToFunctionalGroups",value:function(){var e=this;this.sgroups.forEach((function(t){Se.isFunctionalGroup(t)&&e.functionalGroups.add(new Se(t))}))}}]),e}();!function(e){e.Bold="BOLD",e.Italic="ITALIC",e.Subscript="SUBSCRIPT",e.Superscript="SUPERSCRIPT",e.FontSize="CUSTOM_FONT_SIZE"}(De||(De={}));var ze=function(){function e(t){(0,l.Z)(this,e),this.content=(null===t||void 0===t?void 0:t.content)||"",this.position=null!==t&&void 0!==t&&t.position?new Y(t.position):new Y}return(0,c.Z)(e,[{key:"clone",value:function(){return new e(this)}}]),e}(),Fe=(0,c.Z)((function e(t){(0,l.Z)(this,e);var n=t.atoms,r=t.bonds,i=t.color;this.color=i,this.atoms=n,this.bonds=r})),Ve=function(e){if("object"===v(e)&&e.y){var t=(0,R.cloneDeep)(e);return t.y=-t.y,t}},Ue=function(e){return(0,R.cloneDeepWith)(e,Ve)};function Ze(e,t,n,r){void 0===n||null===n||n===r||Array.isArray(n)&&0===n.length||(e[t]=n)}function He(e){return("number"===typeof e?e:parseFloat(e)).toFixed(8)}function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){var t={atoms:Array.from(e.atoms.values()).map((function(e){return"R#"===e.label?function(e){var t={type:"rg-label"};Ze(t,"location",[e.pp.x,-e.pp.y,e.pp.z]),Ze(t,"attachmentPoints",e.attpnt,0);var n=function(e){var t,n,r=[];for(t=0;t<32;t++)e&1<<t&&(n=t+1,r.push(n));return r}(e.rglabel).map((function(e){return"rg-".concat(e)}));return Ze(t,"$refs",n),t}(e):"L#"===e.label?function(e){var t={type:"atom-list"};return Ze(t,"location",[e.pp.x,-e.pp.y,e.pp.z]),Ze(t,"attachmentPoints",e.attpnt,0),Ze(t,"elements",e.atomList.labelList()),Ze(t,"notList",e.atomList.notList,!1),t}(e):function(e){var t={};return Ze(t,"label",e.label),Ze(t,"alias",e.alias),Ze(t,"location",[e.pp.x,-e.pp.y,e.pp.z]),Ze(t,"charge",e.charge,0),Ze(t,"explicitValence",e.explicitValence,-1),Ze(t,"isotope",e.isotope,0),Ze(t,"radical",e.radical,0),Ze(t,"attachmentPoints",e.attpnt,0),Ze(t,"stereoLabel",e.stereoLabel,null),Ze(t,"stereoParity",e.stereoCare,0),Ze(t,"weight",e.weight,0),Ze(t,"ringBondCount",e.ringBondCount,0),Ze(t,"substitutionCount",e.substitutionCount,0),Ze(t,"unsaturatedAtom",!!e.unsaturatedAtom,!1),Ze(t,"hCount",e.hCount,0),Ze(t,"mapping",parseInt(e.aam),0),Ze(t,"invRet",e.invRet,0),Ze(t,"exactChangeFlag",!!e.exactChangeFlag,!1),t}(e)}))};0!==e.bonds.size&&(t.bonds=Array.from(e.bonds.values()).map(qe)),0!==e.sgroups.size&&(t.sgroups=Array.from(e.sgroups.values()).map((function(t){return function(e,t){var n={};switch(Ze(n,"type",t.type),Ze(n,"atoms",t.atoms),t.type){case"GEN":break;case"MUL":Ze(n,"mul",t.data.mul||1);break;case"SRU":Ze(n,"subscript",t.data.subscript||"n"),Ze(n,"connectivity",t.data.connectivity.toUpperCase()||"ht");break;case"SUP":Ze(n,"name",t.data.name||""),Ze(n,"expanded",t.data.expanded),Ze(n,"id",t.id);break;case"DAT":var r=t.data;Ze(n,"placement",r.absolute,!0),Ze(n,"display",r.attached,!1),Ze(n,"context",r.context),Ze(n,"fieldName",r.fieldName),Ze(n,"fieldData",r.fieldValue),Ze(n,"bonds",me.getBonds(e,t))}return n}(e,t)})));var n=e.frags.get(0);return n&&Ze(t,"stereoFlagPosition",n.stereoFlagPosition,null),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"molecule"},t)}function qe(e){var t={};return Ze(t,"type",e.type),Ze(t,"atoms",[e.begin,e.end]),Ze(t,"stereo",e.stereo,0),Ze(t,"topology",e.topology,0),Ze(t,"center",e.reactingCenterStatus,0),t}function Ke(e){var t=new Be;return e.atoms.forEach((function(e){"rg-label"===e.type&&t.atoms.add(function(e){var t={label:"R#"};Ze(t,"pp",{x:e.location[0],y:-e.location[1],z:e.location[2]||0}),Ze(t,"attpnt",e.attachmentPoints);var n=function(e){var t=0;return e.forEach((function(e){t|=1<<e-1})),t}(e.$refs.map((function(e){return parseInt(e.slice(3))})));return Ze(t,"rglabel",n),new re(t)}(e)),"atom-list"===e.type&&t.atoms.add(function(e){var t={label:"L#"};Ze(t,"pp",{x:e.location[0],y:-e.location[1],z:e.location[2]||0}),Ze(t,"attpnt",e.attachmentPoints);var n=e.elements.map((function(e){var t;return null===(t=H(e))||void 0===t?void 0:t.number})).filter((function(e){return e}));return Ze(t,"atomList",{ids:n,notList:e.notList}),new re(t)}(e)),e.type||t.atoms.add(function(e){var t={};return Ze(t,"label",e.label),Ze(t,"alias",e.alias),Ze(t,"pp",{x:e.location[0],y:-e.location[1],z:e.location[2]||0}),Ze(t,"charge",e.charge),Ze(t,"explicitValence",e.explicitValence),Ze(t,"isotope",e.isotope),Ze(t,"radical",e.radical),Ze(t,"attpnt",e.attachmentPoints),Ze(t,"stereoLabel",e.stereoLabel),Ze(t,"stereoParity",e.stereoParity),Ze(t,"weight",e.weight),Ze(t,"ringBondCount",e.ringBondCount),Ze(t,"substitutionCount",e.substitutionCount),Ze(t,"unsaturatedAtom",Number(Boolean(e.unsaturatedAtom))),Ze(t,"hCount",e.hCount),Ze(t,"aam",e.mapping),Ze(t,"invRet",e.invRet),Ze(t,"exactChangeFlag",Number(Boolean(e.exactChangeFlag))),new re(t)}(e))})),e.bonds&&e.bonds.forEach((function(e){return t.bonds.add(function(e){var t={};return Ze(t,"type",e.type),Ze(t,"topology",e.topology),Ze(t,"reactingCenterStatus",e.center),Ze(t,"stereo",e.stereo),Ze(t,"begin",e.atoms[0]),Ze(t,"end",e.atoms[1]),new oe(t)}(e))})),e.sgroups&&e.sgroups.forEach((function(e){return t.sgroups.add(function(e){var t=new me(e.type);switch(Ze(t,"atoms",e.atoms),e.type){case"GEN":break;case"MUL":Ze(t.data,"mul",e.mul);break;case"SRU":Ze(t.data,"subscript",e.subscript),Ze(t.data,"connectivity",e.connectivity.toLowerCase());break;case"SUP":Ze(t.data,"name",e.name),Ze(t.data,"expanded",e.expanded),Ze(t,"id",e.id);break;case"DAT":Ze(t.data,"absolute",e.placement),Ze(t.data,"attached",e.display),Ze(t.data,"context",e.context),Ze(t.data,"fieldName",e.fieldName),Ze(t.data,"fieldValue",e.fieldData)}return t}(e))})),t.initHalfBonds(),t.initNeighbors(),t.markFragments(),t.bindSGroupsToFunctionalGroups(),t}function Ye(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xe(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $e(e,t){var n=e.getCoordBoundingBox(t);return Y.centre(n.min,n.max)}function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function et(e,t){var n={};return Ze(n,"number",e),Ze(n,"range",t.range,""),Ze(n,"resth",t.resth,!1),Ze(n,"ifthen",t.ifthen,0),n}function tt(e){var t=Ke(e),n=function(e){var t={};return Ze(t,"range",e.range),Ze(t,"resth",e.resth),Ze(t,"ifthen",e.ifthen),new Oe(t)}(e.rlogic);return t.frags.forEach((function(e,t){n.frags.add(t)})),e.rlogic&&t.rgroups.set(e.rlogic.number,n),t}function nt(e,t){return"arrow"===e.type?t.rxnArrows.add(new Ce(Ue(e.data))):t.rxnPluses.add(new Me({pp:{x:e.location[0],y:-e.location[1],z:e.location[2]}})),t}function rt(e,t){var n="circle"===e.data.mode?function(e){var t=Y.dist(e.data.pos[1],e.data.pos[0]),n=e.data.pos[0];return{mode:Ae.ellipse,pos:[{x:n.x-Math.abs(t),y:n.y-Math.abs(t),z:n.z-Math.abs(t)},{x:n.x+Math.abs(t),y:n.y+Math.abs(t),z:n.z+Math.abs(t)}]}}(e):e.data;return t.simpleObjects.add(new Pe(Ue(n))),t}var it={$schema:"http://json-schema.org/draft-07/schema#",title:"ket",description:"Ketcher format schema",type:"object",required:["root"],properties:{root:{type:"object",required:["nodes"],properties:{nodes:{type:"array",minItems:0,items:{oneOf:[{$ref:"#/definitions/simpleObject"},{$ref:"#/definitions/text"},{$ref:"#/definitions/arrow"},{$ref:"#/definitions/plus"},{type:"object",required:["$ref"],properties:{$ref:{type:"string",pattern:"^(mol\\d+|rg[1-9]\\d*)"}}}]}}}}},patternProperties:{"^rg[1-9]\\d*":{$ref:"#/definitions/rgroup"},"^mol\\d+":{$ref:"#/definitions/molecule"},"^header$":{$ref:"#/definitions/header"}},additionalProperties:!1,definitions:{header:{type:"object",properties:{moleculeName:{type:"string"}}},rsite:{type:"object",required:["type","location"],properties:{type:{const:"rg-label"},location:{type:"array",minItems:2,maxItems:3,items:{type:"number"}},$refs:{type:"array",items:{type:"string",pattern:"^rg-[1-9]\\d*"}},attachmentPoints:{type:"integer",enum:[0,1,2,3]}}},atom:{type:"object",required:["label"],properties:{label:{type:"string"},location:{type:"array",minItems:2,maxItems:3,items:{type:"number"}},charge:{type:"integer",minimum:-1e3,maximum:1e3},explicitValence:{type:"integer",enum:[-1,0,1,2,3,4,5,6,7,8,9,10,11,12]},isotope:{type:"integer",minimum:0,maximum:1e3},radical:{type:"integer",enum:[0,2,1,3]},attachmentPoints:{type:"integer",enum:[0,1,2,3]},stereoLabel:{type:"string",pattern:"(?:(?:^&|or)[0-9]+$)|(?:^abs$)"},stereoParity:{type:"integer",enum:[0,1,2,3]},ringBondCount:{type:"integer",enum:[0,-2,-1,2,3,4]},substitutionCount:{type:"integer",enum:[0,-2,-1,1,2,3,4,5,6]},unsaturatedAtom:{type:"boolean"},hCount:{type:"integer",enum:[-1,0,1,2,3,4,5]},mapping:{type:"integer",minimum:0},invRet:{type:"integer",enum:[0,1,2]},exactChangeFlag:{type:"boolean"}},additionalProperties:!1},atomlist:{type:"object",required:["type","location"],properties:{type:{enum:["atom-list"]},notList:{type:"boolean"},location:{type:"array",minItems:2,maxItems:3,items:{type:"number"}},elements:{type:"array",minItems:1,items:{type:"string",minLength:1}},attachmentPoints:{type:"integer",enum:[0,1,2,3]}}},bond:{type:"object",required:["atoms","type"],properties:{type:{type:"integer",enum:[1,2,3,4,5,6,7,8,9,10,11,12]},atoms:{type:"array",minItems:2,maxItems:2,uniqueItems:!0,items:{type:"integer",minimum:0}},stereo:{type:"integer",enum:[0,1,3,4,6]},topology:{type:"integer",enum:[0,1,2]},center:{type:"integer",enum:[0,-1,1,2,4,8,12]},stereobox:{type:"integer",enum:[0,1]}}},rgroup:{type:"object",required:["rlogic","type"],properties:{type:{const:"rgroup"},rlogic:{type:"object",required:["number"],properties:{number:{type:"integer",minimum:1},range:{type:"string",maxLength:50,default:""},resth:{type:"boolean",default:!1},ifthen:{type:"integer",minimum:0,default:0}}}},allOf:[{$ref:"#/definitions/structure"}]},molecule:{type:"object",required:["type"],properties:{type:{const:"molecule"}},allOf:[{$ref:"#/definitions/structure"}]},structure:{type:"object",required:["atoms"],properties:{stereoFlagPosition:{type:"object",required:["x","y"],properties:{x:{type:"number"},y:{type:"number"}}},atoms:{type:"array",items:{oneOf:[{$ref:"#/definitions/atom"},{$ref:"#/definitions/rsite"},{$ref:"#/definitions/atomlist"}]}},bonds:{type:"array",items:{$ref:"#/definitions/bond"}},highlight:{$ref:"#/definitions/subset"},selection:{$ref:"#/definitions/subset"},sgroups:{$ref:"#/definitions/sgroups"}}},subset:{type:"array",minItems:1,maxItems:2,items:{oneOf:[{type:"object",required:["entityType","items"],properties:{entityType:{type:"string",const:"atoms"},items:{type:"array",uniqueItems:!0,items:{type:"integer",minimum:0}}}},{type:"object",required:["entityType","items"],properties:{entityType:{type:"string",const:"bonds"},items:{type:"array",uniqueItems:!0,items:{type:"integer",minimum:0}}}}]}},sgroups:{type:"array",items:{required:["atoms","type"],type:"object",properties:{atoms:{type:"array",items:{type:"integer",minimum:0}},type:{type:"string",enum:["GEN","MUL","SRU","SUP","DAT"]}},if:{properties:{type:{const:"DAT"}}},then:{required:["fieldName"],properties:{context:{enum:["Fragment","Multifragment","Bond","Atom","Group"]},fieldName:{type:"string"},fieldValue:{type:"string",minLength:1},display:{type:"boolean"},placement:{type:"boolean"},bonds:{type:"array",items:{type:"integer",minimum:0}}}}}},plus:{type:"object",required:["type","location"],properties:{type:{const:"plus"},location:{type:"array",minItems:2,maxItems:3,items:{type:"number"}}}},arrow:{type:"object",required:["type","data"],properties:{type:{const:"arrow"},data:{type:"object",required:["mode"],properties:{mode:{type:"string"},pos:{type:"array",items:{type:"object",required:["x","y"],properties:{x:{type:"number"},y:{type:"number"},z:{type:"number"}}}},height:{type:"number"}}}}},simpleObject:{type:"object",required:["type","data"],properties:{type:{const:"simpleObject"},data:{type:"object",required:["mode"],properties:{mode:{type:"string",enum:["line","rectangle","circle","ellipse","polyline"]}},if:{properties:{mode:{const:"polyline"}}},then:{required:["pos"],properties:{pos:{type:"array",minItems:2,items:{type:"object",required:["x","y"],properties:{x:{type:"number"},y:{type:"number"},z:{type:"number"}}}}}},else:{required:["pos"],properties:{pos:{type:"array",minItems:2,maxItems:2,items:{type:"object",required:["x","y"],properties:{x:{type:"number"},y:{type:"number"},z:{type:"number"}}}}}}}}},text:{type:"object",required:["type","data"],properties:{type:{const:"text"},data:{type:"object",required:["content","position"],properties:{content:{type:"string"},position:{type:"object",required:["x","y"],properties:{x:{type:"number"},y:{type:"number"}}}}}}}}};function ot(e,t){switch(e.type){case"arrow":case"plus":nt(e,t);break;case"simpleObject":rt(e,t);break;case"molecule":var n=Ke(e);if(e.stereoFlagPosition)n.frags.get(0).stereoFlagPosition=new Y(e.stereoFlagPosition);n.mergeInto(t);break;case"rgroup":tt(e).mergeInto(t);break;case"text":!function(e,t){var n=Ue(e.data);t.texts.add(new ze(n))}(e,t)}}var at=function(){function e(){(0,l.Z)(this,e)}return(0,c.Z)(e,[{key:"deserialize",value:function(e){var t=new Be,n=JSON.parse(e);if(!function(e){return(new(L())).compile(it)(e)}(n))throw new Error("Cannot deserialize input JSON.");var r=n.root.nodes;return Object.keys(r).forEach((function(e){r[e].type?ot(r[e],t):r[e].$ref&&ot(n[r[e].$ref],t)})),t.name=n.header?n.header.moleculeName:null,t}},{key:"serialize",value:function(e){var t={root:{nodes:[]}},n=function(e){var t={};return Ze(t,"moleculeName",e.name,""),Ze(t,"creatorProgram",null,""),Ze(t,"comment",null,""),0!==Object.keys(t).length?t:null}(e);n&&(t.header=n);var r=function(e){var t,n=[],r=new Set,i=Ye(e.rgroups.entries());try{for(i.s();!(t=i.n()).done;){var o=(0,M.Z)(t.value,2),a=o[0],s=o[1];s.frags.forEach((function(e){return r.add(e)}));var u=Array.from(s.frags.values()).reduce((function(t,n){return t.union(e.getFragmentIds(n))}),new ee);n.push({type:"rgroup",fragment:e.clone(u),center:$e(e,u),data:{rgnumber:a,rgroup:s}})}}catch(l){i.e(l)}finally{i.f()}return Array.from(e.frags.keys()).filter((function(e){return!r.has(e)})).forEach((function(t){var r=e.getFragmentIds(t);n.push({type:"molecule",fragment:e.clone(r),center:$e(e,r)})})),e.rxnArrows.forEach((function(e){n.push({type:"arrow",center:e.pos[0],data:{mode:e.mode,pos:e.pos,height:e.height}})})),e.rxnPluses.forEach((function(e){n.push({type:"plus",center:e.pp,data:{}})})),e.simpleObjects.forEach((function(e){n.push({type:"simpleObject",center:e.pos[0],data:{mode:e.mode,pos:e.pos}})})),e.texts.forEach((function(e){n.push({type:"text",center:e.position,data:{content:e.content,position:e.position}})})),n.forEach((function(e){if(e.fragment){var t=Array.from(e.fragment.sgroups.values()).filter((function(e){return e.atoms.every((function(e){return void 0!==e}))})),n=new Map;t.forEach((function(e,t){n.set(t,e)})),e.fragment.sgroups=n}})),n}(e),i=0;return r.forEach((function(e){switch(e.type){case"molecule":t.root.nodes.push({$ref:"mol".concat(i)}),t["mol".concat(i++)]=We(e.fragment);break;case"rgroup":t.root.nodes.push({$ref:"rg".concat(e.data.rgnumber)}),t["rg".concat(e.data.rgnumber)]=function(e,t){var n=Qe({rlogic:et(t.rgnumber,t.rgroup)},We(e));return Qe(Qe({},n),{},{type:"rgroup"})}(e.fragment,e.data);break;case"plus":t.root.nodes.push(function(e){var t=e.center;return{type:"plus",location:[t.x,-t.y,t.z],prop:e.data}}(e));break;case"arrow":t.root.nodes.push({type:"arrow",data:Ue(e.data)});break;case"simpleObject":t.root.nodes.push({type:"simpleObject",data:Ue(e.data)});break;case"text":t.root.nodes.push({type:"text",data:Ue(e.data)})}})),JSON.stringify(t,null,4)}}]),e}();var st={bondTypeMap:{1:oe.PATTERN.TYPE.SINGLE,2:oe.PATTERN.TYPE.DOUBLE,3:oe.PATTERN.TYPE.TRIPLE,4:oe.PATTERN.TYPE.AROMATIC,5:oe.PATTERN.TYPE.SINGLE_OR_DOUBLE,6:oe.PATTERN.TYPE.SINGLE_OR_AROMATIC,7:oe.PATTERN.TYPE.DOUBLE_OR_AROMATIC,8:oe.PATTERN.TYPE.ANY,9:oe.PATTERN.TYPE.DATIVE,10:oe.PATTERN.TYPE.HYDROGEN},bondStereoMap:{0:oe.PATTERN.STEREO.NONE,1:oe.PATTERN.STEREO.UP,4:oe.PATTERN.STEREO.EITHER,6:oe.PATTERN.STEREO.DOWN,3:oe.PATTERN.STEREO.CIS_TRANS},v30bondStereoMap:{0:oe.PATTERN.STEREO.NONE,1:oe.PATTERN.STEREO.UP,2:oe.PATTERN.STEREO.EITHER,3:oe.PATTERN.STEREO.DOWN},bondTopologyMap:{0:oe.PATTERN.TOPOLOGY.EITHER,1:oe.PATTERN.TOPOLOGY.RING,2:oe.PATTERN.TOPOLOGY.CHAIN},countsLinePartition:[3,3,3,3,3,3,3,3,3,3,3,6],atomLinePartition:[10,10,10,1,3,2,3,3,3,3,3,3,3,3,3,3,3],bondLinePartition:[3,3,3,3,3,3,3],atomListHeaderPartition:[3,1,1,4,1,1],atomListHeaderLength:11,atomListHeaderItemLength:4,chargeMap:[0,3,2,1,0,-1,-2,-3],valenceMap:[void 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,0],implicitHydrogenMap:[void 0,0,1,2,3,4],v30atomPropMap:{CHG:"charge",RAD:"radical",MASS:"isotope",VAL:"explicitValence",HCOUNT:"hCount",INVRET:"invRet",SUBST:"substitutionCount",UNSAT:"unsaturatedAtom",RBCNT:"ringBondCount"},rxnItemsPartition:[3,3,3]},ut=1,lt=2,ct=3;var ft={fmtInfo:st,paddedNum:function(e,t,n){var r=(e=parseFloat(e)).toFixed(n||0).replace(",",".");if(r.length>t)throw new Error("number does not fit");return r.padStart(t)},parseDecimalInt:function(e){var t=parseInt(e,10);return isNaN(t)?0:t},partitionLine:function(e,t,n){for(var r=[],i=0,o=0;i<t.length;++i)r.push(e.slice(o,o+t[i])),n&&o++,o+=t[i];return r},partitionLineFixed:function(e,t,n){for(var r=[],i=0;i<e.length;i+=t)r.push(e.slice(i,i+t)),n&&i++;return r},rxnMerge:function(e,t,n,r,i){var o,a=new Be,s=[],u=[],l=[],c=[],f=[],h=[],d={cnt:0,totalLength:0};for(o=0;o<e.length;++o){var p=e[o],v=p.getBondLengthData();d.cnt+=v.cnt,d.totalLength+=v.totalLength}var m,g,y,b,x=1/(0===d.cnt?1:d.totalLength/d.cnt);for(o=0;o<e.length;++o)(p=e[o]).scale(x);for(o=0;o<e.length;++o){var _=(p=e[o]).getCoordBoundingBoxObj();if(_){var w=o<t?ut:o<t+n?lt:ct;w===ut?(s.push(_),c.push(p)):w===ct?(u.push(_),f.push(p)):w===lt&&(l.push(_),h.push(p)),p.atoms.forEach((function(e){e.rxnFragmentType=w}))}}function S(e,t,n,r,i){var o=new Y(r-n.min.x,i?1-n.min.y:-(n.min.y+n.max.y)/2);return t.atoms.forEach((function(e){e.pp.add_(o)})),t.sgroups.forEach((function(e){e.pp&&e.pp.add_(o)})),n.min.add_(o),n.max.add_(o),t.mergeInto(e),n.max.x-n.min.x}if(i){var E=0;for(o=0;o<c.length;++o)E+=S(a,c[o],s[o],E,!1)+2;for(E+=2,o=0;o<f.length;++o)E+=S(a,f[o],u[o],E,!0)+2;for(E+=2,o=0;o<h.length;++o)E+=S(a,h[o],l[o],E,!1)+2}else{for(o=0;o<c.length;++o)c[o].mergeInto(a);for(o=0;o<f.length;++o)f[o].mergeInto(a);for(o=0;o<h.length;++o)h[o].mergeInto(a)}var k=null,O=null;for(o=0;o<s.length-1;++o)m=s[o],g=s[o+1],y=(m.max.x+g.min.x)/2,b=(m.max.y+m.min.y+g.max.y+g.min.y)/4,a.rxnPluses.add(new Me({pp:new Y(y,b)}));for(o=0;o<s.length;++o)0===o?((k={}).max=new Y(s[o].max),k.min=new Y(s[o].min)):(k.max=Y.max(k.max,s[o].max),k.min=Y.min(k.min,s[o].min));for(o=0;o<l.length-1;++o)m=l[o],g=l[o+1],y=(m.max.x+g.min.x)/2,b=(m.max.y+m.min.y+g.max.y+g.min.y)/4,a.rxnPluses.add(new Me({pp:new Y(y,b)}));for(o=0;o<l.length;++o)0===o?((O={}).max=new Y(l[o].max),O.min=new Y(l[o].min)):(O.max=Y.max(O.max,l[o].max),O.min=Y.min(O.min,l[o].min));if(g=O,(m=k)||g){var A=m?new Y(m.max.x,(m.max.y+m.min.y)/2):null,C=g?new Y(g.min.x,(g.max.y+g.min.y)/2):null;A||(A=new Y(C.x-3,C.y)),C||(C=new Y(A.x+3,A.y));var M=Y.lc2(A,.5,C,.5),T=new Y(M.x-1,M.y,M.z),P=new Y(M.x+1,M.y,M.z);a.rxnArrows.add(new Ce({mode:"open-angle",pos:[T,P]}))}else a.rxnArrows.add(new Ce({mode:"open-angle",pos:[new Y(0,0),new Y(2,0)]}));return a.isReaction=!0,a},rgMerge:function(e,t){var n=new Be;return e.mergeInto(n,null,null,!1,!0),Object.keys(t).forEach((function(e){for(var r=parseInt(e,10),i=function(e){var i=t[r][e];i.rgroups.set(r,new Oe);var o=new ce,a=i.frags.add(o);i.rgroups.get(r).frags.add(a),i.atoms.forEach((function(e){e.fragment=a})),i.mergeInto(n)},o=0;o<t[r].length;++o)i(o)})),n}};function ht(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dt(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pt(e,t){for(var n=new Ne,r=ft.partitionLineFixed(e,3,!0),i=ft.parseDecimalInt(r[0]),o=0;o<i;++o){var a=ft.parseDecimalInt(r[2*o+1])-1,s=t?r[2*o+2].trim():ft.parseDecimalInt(r[2*o+2]);n.set(a,s)}return n}function vt(e,t,n){e.data.mul=e.data.subscript-0;var r={};e.atoms=me.filterAtoms(e.atoms,n),e.patoms=me.filterAtoms(e.patoms,n);for(var i=1;i<e.data.mul;++i)for(var o=0;o<e.patoms.length;++o){var a=e.atoms[i*e.patoms.length+o];if(!(a<0)){if(e.patoms[o]<0)throw new Error("parent atom missing");r[a]=e.patoms[o]}}e.patoms=me.removeNegative(e.patoms);var s=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=e[n];return t}(e.patoms),u=[];t.bonds.forEach((function(e,t){var n=e.begin in r,i=e.end in r;n&&i||n&&e.end in s||i&&e.begin in s?u.push(t):n?e.begin=r[e.begin]:i&&(e.end=r[e.end])}),e);for(var l=0;l<u.length;++l)t.bonds.delete(u[l]);for(var c in r)t.atoms.delete(+c),n[c]=-1;e.atoms=e.patoms,e.patoms=null}function mt(e){e.data.connectivity=(e.data.connectivity||"EU").trim().toLowerCase()}function gt(e){e.data.name=(e.data.subscript||"").trim(),e.data.subscript=""}function yt(e,t,n){}function bt(e,t){e.data.absolute||(e.pp=e.pp.add(me.getMassCentre(t,e.atoms)))}function xt(e){}function _t(e){}function wt(e){}function St(e){}function Et(e){}function kt(e){}function Ot(e){}function At(e){}function Ct(e){}function Mt(e){}function Tt(e,t){var n=ft.partitionLine(t,[10,10,4,1,1,1,3,3,3,3,2,3,2],!1),r=parseFloat(n[0]),i=parseFloat(n[1]),o="A"===n[3].trim(),a="A"===n[4].trim(),s="U"===n[5].trim(),u=n[7].trim();u="ALL"===u?-1:ft.parseDecimalInt(u);var l=n[10].trim(),c=ft.parseDecimalInt(n[11].trim());e.pp=new Y(r,-i),e.data.attached=o,e.data.absolute=a,e.data.showUnits=s,e.data.nCharsToDisplay=u,e.data.tagChar=l,e.data.daspPos=c}function Pt(e,t,n){e.data.fieldValue=(e.data.fieldValue||"")+t,n&&(e.data.fieldValue=e.data.fieldValue.replace(/\s+$/,""),e.data.fieldValue.startsWith('"')&&e.data.fieldValue.endsWith('"')&&(e.data.fieldValue=e.data.fieldValue.substr(1,e.data.fieldValue.length-2)))}var Rt={readKeyValuePairs:pt,readKeyMultiValuePairs:function(e,t){for(var n=[],r=ft.partitionLineFixed(e,3,!0),i=ft.parseDecimalInt(r[0]),o=0;o<i;++o)n.push([ft.parseDecimalInt(r[2*o+1])-1,t?r[2*o+2].trim():ft.parseDecimalInt(r[2*o+2])]);return n},loadSGroup:function(e,t,n){var r={SUP:gt,MUL:vt,SRU:mt,MON:xt,MER:_t,COP:wt,CRO:St,MOD:Et,GRA:kt,COM:Ot,MIX:At,FOR:Ct,DAT:bt,ANY:Mt,GEN:yt};t.id=e.sgroups.add(t),r[t.type](t,e,n);for(var i=0;i<t.atoms.length;++i)e.atoms.has(t.atoms[i])&&e.atoms.get(t.atoms[i]).sgs.add(t.id);return"DAT"===t.type?e.sGroupForest.insert(t,-1,[]):e.sGroupForest.insert(t),t.id},initSGroup:function(e,t){var n,r=ht(pt(t,!0));try{for(r.s();!(n=r.n()).done;){var i=(0,M.Z)(n.value,2),o=i[0],a=i[1],s=new me(a);s.number=o,e[o]=s}}catch(u){r.e(u)}finally{r.f()}},applySGroupProp:function(e,t,n,r,i){var o,a=pt(n,!r),s=ht(a.keys());try{for(s.s();!(o=s.n()).done;){var u=o.value;(i?e[u]:e[u].data)[t]=a.get(u)}}catch(l){s.e(l)}finally{s.f()}},applySGroupArrayProp:function(e,t,n,r){var i=ft.parseDecimalInt(n.slice(1,4))-1,o=ft.parseDecimalInt(n.slice(4,8)),a=function(e){for(var t=[],n=0;n<e.length;++n)t[n]=ft.parseDecimalInt(e[n]);return t}(ft.partitionLineFixed(n.slice(8),3,!0));if(a.length!==o)throw new Error("File format invalid");r&&(a=a.map((function(e){return e+r}))),e[i][t]=e[i][t].concat(a)},applyDataSGroupName:function(e,t){e.data.fieldName=t},applyDataSGroupQuery:function(e,t){e.data.query=t},applyDataSGroupQueryOp:function(e,t){e.data.queryOp=t},applyDataSGroupDesc:function(e,t){var n=ft.partitionLine(t,[4,31,2,20,2,3],!1),r=ft.parseDecimalInt(n[0])-1,i=n[1].trim(),o=n[2].trim(),a=n[3].trim(),s=n[4].trim(),u=n[5].trim(),l=e[r];l.data.fieldType=o,l.data.fieldName=i,l.data.units=a,l.data.query=s,l.data.queryOp=u},applyDataSGroupInfo:Tt,applyDataSGroupData:Pt,applyDataSGroupInfoLine:function(e,t){Tt(e[ft.parseDecimalInt(t.substr(0,4))-1],t.substr(5))},applyDataSGroupDataLine:function(e,t,n){var r=ft.parseDecimalInt(t.substr(0,5))-1,i=t.substr(5);Pt(e[r],i,n)},applyDataSGroupExpand:function(e,t){e.data.expanded=t}};function It(e){var t=ft.partitionLine(e,ft.fmtInfo.atomLinePartition),n={pp:new Y(parseFloat(t[0]),-parseFloat(t[1]),parseFloat(t[2])),label:t[4].trim(),explicitValence:ft.fmtInfo.valenceMap[ft.parseDecimalInt(t[10])],massDifference:ft.parseDecimalInt(t[5]),charge:ft.fmtInfo.chargeMap[ft.parseDecimalInt(t[6])],hCount:ft.parseDecimalInt(ft.parseDecimalInt(t[8])),stereoCare:0!==ft.parseDecimalInt(t[9]),aam:ft.parseDecimalInt(t[14]),invRet:ft.parseDecimalInt(t[15]),exactChangeFlag:ft.parseDecimalInt(t[16])};return new re(n)}function Lt(e){var t=ft.partitionLine(e,ft.fmtInfo.bondLinePartition),n={begin:ft.parseDecimalInt(t[0])-1,end:ft.parseDecimalInt(t[1])-1,type:ft.fmtInfo.bondTypeMap[ft.parseDecimalInt(t[2])],stereo:ft.fmtInfo.bondStereoMap[ft.parseDecimalInt(t[3])],xxx:t[4],topology:ft.fmtInfo.bondTopologyMap[ft.parseDecimalInt(t[5])],reactingCenterStatus:ft.parseDecimalInt(t[6])};return new oe(n)}function Nt(e){for(var t=ft.partitionLine(e,ft.fmtInfo.atomListHeaderPartition),n=ft.parseDecimalInt(t[0])-1,r="T"===t[2].trim(),i=ft.parseDecimalInt(t[4].trim()),o=e.slice(ft.fmtInfo.atomListHeaderLength),a=[],s=ft.fmtInfo.atomListHeaderItemLength,u=0;u<i;++u)a[u]=ft.parseDecimalInt(o.slice(u*s,(u+1)*s-1));return{aid:n,atomList:new K({notList:r,ids:a})}}function jt(e,t){var n,r=new Be,i=ft.parseDecimalInt(t[0]),o=ft.parseDecimalInt(t[1]),a=ft.parseDecimalInt(t[2]),s=1===ft.parseDecimalInt(t[4]),u=0===ft.parseDecimalInt(t[4]),l=ft.parseDecimalInt(t[5]),c=ft.parseDecimalInt(t[10]),f=0,h=e.slice(f,f+i);f+=i;var d=e.slice(f,f+o);f+=o;var p=e.slice(f,f+a);f+=a+l,h.map(It).forEach((function(e){return r.atoms.add(e)})),d.map(Lt).forEach((function(e){e.stereo&&s&&(r.atoms.get(e.begin).stereoLabel=Q.Abs),e.stereo&&u&&(r.atoms.get(e.begin).stereoLabel="".concat(Q.And,"1")),r.bonds.add(e)})),p.map(Nt).forEach((function(e){r.atoms.get(e.aid).atomList=e.atomList,r.atoms.get(e.aid).label="L#"}));var v={},m={},g=function(e,t,n,r,i,o){for(var a=new Ne;n<r;){var s=t[n];if("A"===s.charAt(0)){var u=t[++n],l=/'.+'/.test(u);l&&!a.get("pseudo")&&a.set("pseudo",new Ne),l||a.get("alias")||a.set("alias",new Ne),l&&(u=u.replace(/'/g,"")),a.get(l?"pseudo":"alias").set(ft.parseDecimalInt(s.slice(3,6))-1,u)}else if("M"===s.charAt(0)){var c=s.slice(3,6),f=s.slice(6);if("END"===c)break;if("CHG"===c)a.get("charge")||a.set("charge",Rt.readKeyValuePairs(f));else if("RAD"===c)a.get("radical")||a.set("radical",Rt.readKeyValuePairs(f));else if("ISO"===c)a.get("isotope")||a.set("isotope",Rt.readKeyValuePairs(f));else if("RBC"===c)a.get("ringBondCount")||a.set("ringBondCount",Rt.readKeyValuePairs(f));else if("SUB"===c)a.get("substitutionCount")||a.set("substitutionCount",Rt.readKeyValuePairs(f));else if("UNS"===c)a.get("unsaturatedAtom")||a.set("unsaturatedAtom",Rt.readKeyValuePairs(f));else if("RGP"===c){a.get("rglabel")||a.set("rglabel",new Ne);for(var h=a.get("rglabel"),d=Rt.readKeyMultiValuePairs(f),p=0;p<d.length;p++){var v=d[p];h.set(v[0],(h.get(v[0])||0)|1<<v[1]-1)}}else if("LOG"===c){f=f.slice(4);var m=ft.parseDecimalInt(f.slice(0,3).trim()),g=ft.parseDecimalInt(f.slice(4,7).trim()),y=ft.parseDecimalInt(f.slice(8,11).trim()),b=f.slice(12).trim(),x={};g>0&&(x.ifthen=g),x.resth=1===y,x.range=b,o[m]=x}else if("APO"===c)a.get("attpnt")||a.set("attpnt",Rt.readKeyValuePairs(f));else if("ALS"===c){var _=zt(ft.partitionLine(f,[1,3,3,1,1,1]),ft.partitionLineFixed(f.slice(10),4,!1));a.get("atomList")||a.set("atomList",new Ne),a.get("label")||a.set("label",new Ne),_.forEach((function(e,t){a.get("label").set(t,"L#"),a.get("atomList").set(t,e)}))}else if("STY"===c)Rt.initSGroup(i,f);else if("SST"===c)Rt.applySGroupProp(i,"subtype",f);else if("SLB"===c)Rt.applySGroupProp(i,"label",f,!0);else if("SPL"===c)Rt.applySGroupProp(i,"parent",f,!0,!0);else if("SCN"===c)Rt.applySGroupProp(i,"connectivity",f);else if("SAL"===c)Rt.applySGroupArrayProp(i,"atoms",f,-1);else if("SBL"===c)Rt.applySGroupArrayProp(i,"bonds",f,-1);else if("SPA"===c)Rt.applySGroupArrayProp(i,"patoms",f,-1);else if("SMT"===c){var w=ft.parseDecimalInt(f.slice(0,4))-1;i[w].data.subscript=f.slice(4).trim()}else"SDT"===c?Rt.applyDataSGroupDesc(i,f):"SDD"===c?Rt.applyDataSGroupInfoLine(i,f):"SCD"===c?Rt.applyDataSGroupDataLine(i,f,!1):"SED"===c?Rt.applyDataSGroupDataLine(i,f,!0):"SDS"===c&&f.slice(7).trim().split("   ").forEach((function(e){var t=Number(e)-1;i[t].data.expanded=!0}))}++n}return a}(0,e,f,Math.min(e.length,f+c),v,m);g.forEach((function(e,t){!function(e,t,n){t.forEach((function(t,r){e.get(r)[n]=t}))}(r.atoms,e,t)}));var y,b={};for(y in v){var x=v[y];if("DAT"===x.type&&0===x.atoms.length){var _=v[y].parent;if(_>=0){var w=v[_-1];"GEN"===w.type&&(x.atoms=[].slice.call(w.atoms))}}}for(y in v)Rt.loadSGroup(r,v[y],b);var S=[];for(y in v)me.filter(r,v[y],b),0!==v[y].atoms.length||v[y].allAtoms||S.push(+y);for(n=0;n<S.length;++n)r.sGroupForest.remove(S[n]),r.sgroups.delete(S[n]);for(var E in m){var k=parseInt(E,10);r.rgroups.set(k,new Oe(m[k]))}return r}function Dt(e){if("$CTAB"!==(e=e.slice(7))[0].trim())throw new Error("RGFile format invalid");for(var t=1;"$"!==e[t].charAt(0);)t++;if("$END CTAB"!==e[t].trim())throw new Error("RGFile format invalid");var n=e.slice(1,t);e=e.slice(t+1);for(var r={};;){if(0===e.length)throw new Error("Unexpected end of file");var i=e[0].trim();if("$END MOL"===i){e=e.slice(1);break}if("$RGP"!==i)throw new Error("RGFile format invalid");var o=parseInt(e[1].trim(),10);for(r[o]=[],e=e.slice(2);;){if(0===e.length)throw new Error("Unexpected end of file");if("$END RGP"===(i=e[0].trim())){e=e.slice(1);break}if("$CTAB"!==i)throw new Error("RGFile format invalid");for(t=1;"$"!==e[t].charAt(0);)t++;if("$END CTAB"!==e[t].trim())throw new Error("RGFile format invalid");r[o].push(e.slice(1,t)),e=e.slice(t+1)}}var a=Bt(n),s={};for(var u in r){var l=parseInt(u,10);s[l]=[];for(var c=0;c<r[l].length;++c)s[l].push(Bt(r[l][c]))}return ft.rgMerge(a,s)}function Bt(e){var t=ft.partitionLine(e[0],ft.fmtInfo.countsLinePartition);return jt(e=e.slice(1),t)}function zt(e,t){var n=ft.parseDecimalInt(e[1])-1,r=ft.parseDecimalInt(e[2]),i="T"===e[4].trim(),o=function(e){for(var t=[],n=0;n<e.length;++n){var r=H(e[n].trim());r&&t.push(r.number)}return t}(t.slice(0,r)),a=new Ne;return a.set(n,new K({notList:i,ids:o})),a}var Ft={parseCTabV2000:jt,parseRg2000:Dt,parseRxn2000:function(e,t){e=e.slice(4);var n=ft.partitionLine(e[0],ft.fmtInfo.rxnItemsPartition),r=n[0]-0,i=n[1]-0,o=n[2]-0;e=e.slice(1);for(var a=[];e.length>0&&"$MOL"===e[0].substr(0,4);){e=e.slice(1);for(var s=0;s<e.length&&"$MOL"!==e[s].substr(0,4);)s++;var u,l=e.slice(0,s);0===l[0].search("\\$MDL")?u=Dt(l):(u=Bt(l.slice(3))).name=l[0].trim(),a.push(u),e=e.slice(s)}return ft.rxnMerge(a,r,i,o,t)}};function Vt(e){var t,n,r,i,o=qt(e),a={pp:new Y(parseFloat(o[2]),-parseFloat(o[3]),parseFloat(o[4])),aam:o[5].trim()},s=o[1].trim();if('"'===s.charAt(0)&&'"'===s.charAt(s.length-1)&&(s=s.substr(1,s.length-2)),"]"===s.charAt(s.length-1)){var u={notList:!1},l=(s=s.substr(0,s.length-1)).match(/NOT ?\[/);if(l){u.notList=!0;var c=(0,M.Z)(l,1)[0];s=s.substr(c.length)}else{if("["!==s.charAt(0))throw new Error("Error: atom list expected, found '"+s+"'");s=s.substr(1)}u.ids=function(e){for(var t=[],n=0;n<e.length;++n){var r=H(e[n].trim());r&&t.push(r.number)}return t}(s.split(",")),a.atomList=new K(u),a.label="L#"}else a.label=s;for(o.splice(0,6),i=0;i<o.length;++i)if(n=(t=Yt(o[i],"="))[0],r=t[1],n in ft.fmtInfo.v30atomPropMap){var f=ft.parseDecimalInt(r);if("VAL"===n){if(0===f)continue;-1===f&&(f=0)}a[ft.fmtInfo.v30atomPropMap[n]]=f}else if("RGROUPS"===n){var h=(r=r.trim().substr(1,r.length-2)).split(" ").slice(1);a.rglabel=0;for(var d=0;d<h.length;++d)a.rglabel|=1<<h[d]-1}else"ATTCHPT"===n&&(a.attpnt=r.trim()-0);return new re(a)}function Ut(e){var t,n,r,i,o=qt(e),a={begin:ft.parseDecimalInt(o[2])-1,end:ft.parseDecimalInt(o[3])-1,type:ft.fmtInfo.bondTypeMap[ft.parseDecimalInt(o[1])]};for(o.splice(0,4),i=0;i<o.length;++i)n=(t=Yt(o[i],"="))[0],r=t[1],"CFG"===n?(a.stereo=ft.fmtInfo.v30bondStereoMap[ft.parseDecimalInt(r)],a.type===oe.PATTERN.TYPE.DOUBLE&&a.stereo===oe.PATTERN.STEREO.EITHER&&(a.stereo=oe.PATTERN.STEREO.CIS_TRANS)):"TOPO"===n?a.topology=ft.fmtInfo.bondTopologyMap[ft.parseDecimalInt(r)]:"RXCTR"===n?a.reactingCenterStatus=ft.parseDecimalInt(r):"STBOX"===n&&(a.stereoCare=ft.parseDecimalInt(r));return new oe(a)}function Zt(e,t,n){for(n++;"M  V30 END COLLECTION"!==t[n].trim();)n++;return++n}function Ht(e,t,n,r,i){var o="";for(i++;i<t.length;){if("END SGROUP"===(o=Jt(t[i++]).trim()).trim())return i;for(;"-"===o.charAt(o.length-1);)o=(o.substr(0,o.length-1)+Jt(t[i++])).trim();var a=Xt(o),s=a[1],u=new me(s);u.number=a[0]-0,u.type=s,u.label=a[2]-0,n[u.number]=u;for(var l={},c=3;c<a.length;++c){var f=Yt(a[c],"=");if(2!==f.length)throw new Error("A record of form AAA=BBB or AAA=(...) expected, got '"+a[c]+"'");var h=f[0];h in l||(l[h]=[]),l[h].push(f[1])}u.atoms=$t(l.ATOMS[0],-1),l.PATOMS&&(u.patoms=$t(l.PATOMS[0],-1)),u.bonds=l.BONDS?$t(l.BONDS[0],-1):[];var d=l.BRKXYZ;if(u.brkxyz=[],d)for(var p=0;p<d.length;++p)u.brkxyz.push($t(d[p]));l.MULT&&(u.data.subscript=l.MULT[0]-0),l.LABEL&&(u.data.subscript=l.LABEL[0].trim()),l.CONNECT&&(u.data.connectivity=l.CONNECT[0].toLowerCase()),l.FIELDDISP&&Rt.applyDataSGroupInfo(u,Kt(l.FIELDDISP[0])),l.FIELDDATA&&Rt.applyDataSGroupData(u,l.FIELDDATA[0],!0),l.FIELDNAME&&Rt.applyDataSGroupName(u,l.FIELDNAME[0]),l.QUERYTYPE&&Rt.applyDataSGroupQuery(u,l.QUERYTYPE[0]),l.QUERYOP&&Rt.applyDataSGroupQueryOp(u,l.QUERYOP[0]),Rt.loadSGroup(e,u,r),l.ESTATE&&Rt.applyDataSGroupExpand(u,l.ESTATE[0])}throw new Error("S-group declaration incomplete.")}function Gt(e,t){var n=new Be,r=0;if("M  V30 BEGIN CTAB"!==e[r++].trim())throw Error("CTAB V3000 invalid");if("M  V30 COUNTS"!==e[r].slice(0,13))throw Error("CTAB V3000 invalid");var i=e[r].slice(14).split(" "),o=1===ft.parseDecimalInt(i[4]);if("M  V30 BEGIN ATOM"===e[++r].trim()){var a;for(r++;r<e.length&&"END ATOM"!==(a=Jt(e[r++]).trim());){for(;"-"===a.charAt(a.length-1);)a=(a.substring(0,a.length-1)+Jt(e[r++])).trim();n.atoms.add(Vt(a))}if("M  V30 BEGIN BOND"===e[r].trim())for(r++;r<e.length&&"END BOND"!==(a=Jt(e[r++]).trim());){for(;"-"===a.charAt(a.length-1);)a=(a.substring(0,a.length-1)+Jt(e[r++])).trim();var s=Ut(a);s.stereo&&o&&(n.atoms.get(s.begin).stereoLabel="abs"),n.bonds.add(s)}for(var u={},l={};"M  V30 END CTAB"!==e[r].trim();)if("M  V30 BEGIN COLLECTION"===e[r].trim())r=Zt(0,e,r);else{if("M  V30 BEGIN SGROUP"!==e[r].trim())throw Error("CTAB V3000 invalid");r=Ht(n,e,u,l,r)}}if("M  V30 END CTAB"!==e[r++].trim())throw Error("CTAB V3000 invalid");return t||Wt(n,e.slice(r)),n}function Wt(e,t){for(var n={},r={},i=0;i<t.length&&0===t[i].search("M  V30 BEGIN RGROUP");){var o=t[i++].split(" ").pop();for(n[o]=[],r[o]={};;){var a=t[i].trim();if(0!==a.search("M  V30 RLOGIC")){if("M  V30 BEGIN CTAB"!==a)throw Error("CTAB V3000 invalid");for(var s=0;s<t.length&&"M  V30 END CTAB"!==t[i+s].trim();++s);var u=Gt(t.slice(i,i+s+1),!0);if(n[o].push(u),"M  V30 END RGROUP"===t[i=i+s+1].trim()){i++;break}}else{var l=(a=a.slice(13)).trim().split(/\s+/g),c=ft.parseDecimalInt(l[0]),f=ft.parseDecimalInt(l[1]),h=l.slice(2).join(" "),d={};c>0&&(d.ifthen=c),d.resth=1===f,d.range=h,r[o]=d,i++}}}Object.keys(n).forEach((function(t){n[t].forEach((function(n){n.rgroups.set(t,new Oe(r[t]));var i=n.frags.add({});n.rgroups.get(t).frags.add(i),n.atoms.forEach((function(e){e.fragment=i})),n.mergeInto(e)}))}))}function qt(e){for(var t=[],n=0,r=0,i=-1,o=!1;r<e.length;r+=1){var a=e[r];if("NOT"===e.substr(r,3)){var s=e.indexOf("]");t.push(e.slice(r,s+1)),i=r=s+1}else"("===a?n+=1:")"===a?n-=1:'"'===a?o=!o:o||" "!==e[r]||0!==n||(r>i+1&&t.push(e.slice(i+1,r)),i=r)}return r>i+1&&t.push(e.slice(i+1,r)),t}function Kt(e){return'"'===e[0]&&'"'===e[e.length-1]?e.substr(1,e.length-2):e}function Yt(e,t){var n=e.indexOf(t);return[e.slice(0,n),e.slice(n+1)]}function Xt(e){for(var t=[],n=0,r=!1,i=0;i<e.length;++i){var o=e.charAt(i);'"'===o?r=!r:r||("("===o?n++:")"===o?n--:" "===o&&0===n&&(t.push(e.slice(0,i)),e=e.slice(i+1).trim(),i=0))}if(0!==n)throw new Error("Brace balance broken. S-group properies invalid!");return e.length>0&&t.push(e.trim()),t}function $t(e,t){if(!e)return null;var n=[],r=(e=(e=e.trim()).substr(1,e.length-2)).split(" ");t=t||0;for(var i=1;i<r.length;++i){var o=parseInt(r[i]);isNaN(o)||n.push(o+t)}return n}function Jt(e){if("M  V30 "!==e.slice(0,7))throw new Error("Prefix invalid");return e.slice(7)}var Qt={parseCTabV3000:Gt,readRGroups3000:Wt,parseRxn3000:function(e,t){var n=(e=e.slice(4))[0].split(/\s+/g).slice(3),r=n[0]-0,i=n[1]-0,o=n.length>2?n[2]-0:0;function a(t){for(var n=t;n<e.length;++n)if("M  V30 END CTAB"===e[n].trim())return n}function s(t){for(var n=t;n<e.length;++n)if("M  V30 END RGROUP"===e[n].trim())return n}for(var u=[],l=[],c=null,f=[],h=0;h<e.length;++h){var d,p=e[h].trim();if(p.startsWith("M  V30 COUNTS"));else{if("M  END"===p)break;if("M  V30 BEGIN PRODUCT"===p)c=l;else if("M  V30 END PRODUCT"===p)c=null;else if("M  V30 BEGIN REACTANT"===p)c=u;else if("M  V30 END REACTANT"===p)c=null;else if(p.startsWith("M  V30 BEGIN RGROUP"))d=s(h),f.push(e.slice(h,d+1)),h=d;else{if("M  V30 BEGIN CTAB"!==p)throw new Error("line unrecognized: "+p);d=a(h),c.push(e.slice(h,d+1)),h=d}}}var v=[],m=u.concat(l);for(d=0;d<m.length;++d){var g=Gt(m[d],n);v.push(g)}var y=ft.rxnMerge(v,r,i,o,t);return Wt(y,function(e){for(var t=[],n=0;n<e.length;++n)t=t.concat(e[n]);return t}(f)),y}};function en(e){var t=function(e,t,n){for(var r=[],i=0,o=0;i<t.length;++i)r.push(e.slice(o,o+t[i])),n&&o++,o+=t[i];return r}(e[0],ft.fmtInfo.countsLinePartition),n=t[11].trim();if(e=e.slice(1),"V2000"===n)return Ft.parseCTabV2000(e,t);if("V3000"===n)return Qt.parseCTabV3000(e,!1);throw new Error("Molfile version unknown: "+n)}var tn={MUL:me.prepareMulForSaving,SRU:function(e,t){var n=[];if(t.bonds.forEach((function(r,i){var o=t.atoms.get(r.begin),a=t.atoms.get(r.end);(o.sgs.has(e.id)&&!a.sgs.has(e.id)||a.sgs.has(e.id)&&!o.sgs.has(e.id))&&n.push(i)}),e),0!==n.length&&2!==n.length)throw{id:e.id,"error-type":"cross-bond-number",message:"Unsupported cross-bonds number"};e.bonds=n},SUP:function(e,t){var n=[];t.bonds.forEach((function(r,i){var o=t.atoms.get(r.begin),a=t.atoms.get(r.end);(o.sgs.has(e.id)&&!a.sgs.has(e.id)||a.sgs.has(e.id)&&!o.sgs.has(e.id))&&n.push(i)}),e),e.bonds=n},DAT:function(e,t){e.atoms=me.getAtoms(t,e)},GEN:function(e,t){}};var nn={MUL:function(e,t,n,r,i){var o=(n[e.id]+"").padStart(3),a=[];a=(a=(a=a.concat(rn("SAL",o,Array.from(e.atomSet.values()),r))).concat(rn("SPA",o,Array.from(e.parentAtomSet.values()),r))).concat(rn("SBL",o,e.bonds,i));var s="M  SMT "+o+" "+e.data.mul;return a.push(s),(a=a.concat(on(t,e,o))).join("\n")},SRU:function(e,t,n,r,i){var o=(n[e.id]+"").padStart(3),a=[];return(a=(a=(a=a.concat(rn("SAL",o,e.atoms,r))).concat(rn("SBL",o,e.bonds,i))).concat(on(t,e,o))).join("\n")},SUP:function(e,t,n,r,i){var o=(n[e.id]+"").padStart(3),a=[];a=(a=a.concat(rn("SAL",o,e.atoms,r))).concat(rn("SBL",o,e.bonds,i)),e.data.name&&""!==e.data.name&&a.push("M  SMT "+o+" "+e.data.name);return a.join("\n")},DAT:function(e,t,n,r){var i=(n[e.id]+"").padStart(3),o=e.data,a=e.pp;o.absolute||(a=a.sub(me.getMassCentre(t,e.atoms)));var s=[];s=s.concat(rn("SAL",i,e.atoms,r));var u="M  SDT "+i+" "+(o.fieldName||"").padEnd(30)+(o.fieldType||"").padStart(2)+(o.units||"").padEnd(20)+(o.query||"").padStart(2);o.queryOp&&(u+=o.queryOp.padEnd(15));s.push(u);var l="M  SDD "+i+" "+ft.paddedNum(a.x,10,4)+ft.paddedNum(-a.y,10,4)+"    "+(o.attached?"A":"D")+(o.absolute?"A":"R")+(o.showUnits?"U":" ")+"   "+(o.nCharnCharsToDisplay>=0?ft.paddedNum(o.nCharnCharsToDisplay,3):"ALL")+"  1   "+(o.tagChar||" ")+"  "+ft.paddedNum(o.daspPos,1)+"  ";s.push(l);var c=(f=o.fieldValue,f.replace(an,"\n")).replace(/\n*$/,"");var f;return c.split("\n").forEach((function(e){for(;e.length>69;)s.push("M  SCD "+i+" "+e.slice(0,69)),e=e.slice(69);s.push("M  SED "+i+" "+e)})),s.join("\n")},GEN:function(e,t,n,r,i){var o=(n[e.id]+"").padStart(3),a=[];return(a=(a=(a=a.concat(rn("SAL",o,e.atoms,r))).concat(rn("SBL",o,e.bonds,i))).concat(on(t,e,o))).join("\n")}};function rn(e,t,n,r){if(!n)return[];for(var i=[],o=0;o<Math.floor((n.length+14)/15);++o){for(var a=Math.min(n.length-15*o,15),s="M  "+e+" "+t+" "+ft.paddedNum(a,2),u=0;u<a;++u)s+=" "+ft.paddedNum(r[n[15*o+u]],3);i.push(s)}return i}function on(e,t,n){var r=new ee(t.atoms),i=me.getCrossBonds(e,r);me.bracketPos(t,e,i);for(var o=t.bracketBox,a=t.bracketDir,s=a.rotateSC(1,0),u=me.getBracketParameters(e,i,r,o,a,s),l=[],c=0;c<u.length;++c){for(var f=u[c],h=f.c.addScaled(f.n,-.5*f.h).yComplement(),d=f.c.addScaled(f.n,.5*f.h).yComplement(),p="M  SDI "+n+ft.paddedNum(4,3),v=[h.x,h.y,d.x,d.y],m=0;m<v.length;++m)p+=ft.paddedNum(v[m],10,4);l.push(p)}return l}var an=/\r\n|[\n\r]/g;var sn={parseCTab:en,parseMol:function(e){if(0===e[0].search("\\$MDL")){var t=Ft.parseRg2000(e);return t.name=e[3].trim(),t}var n=en(e.slice(3));return n.name=e[0].trim(),n},parseRxn:function(e,t){var n=e[0].trim().split(" ");if(n.length>1&&"V3000"===n[1])return Qt.parseRxn3000(e,t);var r=Ft.parseRxn2000(e,t);return r.name=e[1].trim(),r},prepareForSaving:tn,saveToMolfile:nn},un=function(){function e(){(0,l.Z)(this,e),this.molecule=null,this.molfile=null,this.reaction=!1,this.mapping={},this.bondMapping={}}return(0,c.Z)(e,[{key:"parseCTFile",value:function(e,t){var n;return(n=0===e[0].search("\\$RXN")?sn.parseRxn(e,t):sn.parseMol(e)).initHalfBonds(),n.initNeighbors(),n.bindSGroupsToFunctionalGroups(),n}},{key:"prepareSGroups",value:function(e,t){var n,r=this.molecule,i=[],o=0;if(null===(n=this.molecule)||void 0===n||n.sGroupForest.getSGroupsBFS().reverse().forEach((function(n){var a=r.sgroups.get(n),s=!1;try{sn.prepareForSaving[a.type](a,r)}catch(u){if(!e||"number"!==typeof u.id)throw new Error("Error: ".concat(u.message));s=!0}(s||!t&&/^INDIGO_.+_DESC$/i.test(a.data.fieldName))&&(o+=+s,i.push(a.id))}),this),o)throw new Error("Warning: "+o+" invalid S-groups were detected. They will be omitted.");for(var a=0;a<i.length;++a)null===r||void 0===r||r.sGroupDelete(i[a])}},{key:"getCTab",value:function(e,t){return this.molecule=e.clone(),this.prepareSGroups(!1,!1),this.molfile="",this.writeCTab2000(t),this.molfile}},{key:"saveMolecule",value:function(t,n,r,i){var o=this;if(this.reaction=t.hasRxnArrow(),this.molfile=""+t.name,this.reaction){if(t.rgroups.size>0)throw new Error("Reactions with r-groups are not supported at the moment");var a=t.getComponents(),s=a.reactants,u=a.products,l=s.concat(u);this.molfile="$RXN\n"+t.name+"\n\n\n"+ft.paddedNum(s.length,3)+ft.paddedNum(u.length,3)+ft.paddedNum(0,3)+"\n";for(var c=0;c<l.length;++c){var f=new e,h=t.clone(l[c],null,!0),d=f.saveMolecule(h,!1,!0);this.molfile+="$MOL\n"+d}return this.molfile}if(t.rgroups.size>0){if(!r){var p=(new e).getCTab(t.getScaffold(),t.rgroups);return this.molfile="$MDL  REV  1\n$MOL\n$HDR\n"+t.name+"\n\n\n$END HDR\n",this.molfile+="$CTAB\n"+p+"$END CTAB\n",t.rgroups.forEach((function(n,r){o.molfile+="$RGP\n",o.writePaddedNumber(r,3),o.molfile+="\n",n.frags.forEach((function(n){var r=(new e).getCTab(t.getFragment(n));o.molfile+="$CTAB\n"+r+"$END CTAB\n"})),o.molfile+="$END RGP\n"})),this.molfile+="$END MOL\n",this.molfile}t=t.getScaffold()}return this.molecule=t.clone(),this.prepareSGroups(n,i),this.writeHeader(),this.writeCTab2000(),this.molfile}},{key:"writeHeader",value:function(){var e=new Date;this.writeCR(),this.writeWhiteSpace(2),this.write("Ketcher"),this.writeWhiteSpace(),this.writeCR((e.getMonth()+1+"").padStart(2)+(e.getDate()+"").padStart(2)+(e.getFullYear()%100+"").padStart(2)+(e.getHours()+"").padStart(2)+(e.getMinutes()+"").padStart(2)+"2D 1   1.00000     0.00000     0"),this.writeCR()}},{key:"write",value:function(e){this.molfile+=e}},{key:"writeCR",value:function(e){0===arguments.length&&(e=""),this.molfile+=e+"\n"}},{key:"writeWhiteSpace",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;0===arguments.length&&(e=1),this.write(" ".repeat(Math.max(e,0)))}},{key:"writePadded",value:function(e,t){this.write(e),this.writeWhiteSpace(t-e.length)}},{key:"writePaddedNumber",value:function(e,t){var n=(e-0).toString();this.writeWhiteSpace(t-n.length),this.write(n)}},{key:"writePaddedFloat",value:function(e,t,n){this.write(ft.paddedNum(e,t,n))}},{key:"writeCTab2000Header",value:function(){this.writePaddedNumber(this.molecule.atoms.size,3),this.writePaddedNumber(this.molecule.bonds.size,3),this.writePaddedNumber(0,3),this.writePaddedNumber(0,3);var e=Array.from(this.molecule.frags.values()).some((function(e){return!!e&&e.enhancedStereoFlag===ie.Abs}));this.writePaddedNumber(e?1:0,3),this.writePaddedNumber(0,3),this.writeWhiteSpace(12),this.writePaddedNumber(999,3),this.writeCR(" V2000")}},{key:"writeCTab2000",value:function(e){var t=this;this.writeCTab2000Header(),this.mapping={};var n=1,r=[],i=[];for(this.molecule.atoms.forEach((function(e,o){var a=e.label;null!=e.atomList?(a="L",r.push(o)):e.pseudo?e.pseudo.length>3&&(a="A",i.push({id:o,value:"'".concat(e.pseudo,"'")})):e.alias?i.push({id:o,value:e.alias}):H(e.label)||-1!==["A","Q","X","*","R#"].indexOf(e.label)||(a="C",i.push({id:o,value:e.label})),t.writeAtom(e,a),t.mapping[o]=n++}),this),this.bondMapping={},n=1,this.molecule.bonds.forEach((function(e,r){t.bondMapping[r]=n++,t.writeBond(e)}),this);i.length>0;)this.writeAtomProps(i[0]),i.splice(0,1);var o=[],a=[],s=[],u=[],l=[],c=[],f=[],h=[],d=[];this.molecule.atoms.forEach((function(e,t){if(0!==e.charge&&o.push([t,e.charge]),0!==e.isotope&&a.push([t,e.isotope]),0!==e.radical&&s.push([t,e.radical]),null!=e.rglabel&&"R#"===e.label)for(var n=0;n<32;n++)e.rglabel&1<<n&&u.push([t,n+1]);null!=e.attpnt&&c.push([t,e.attpnt]),0!==e.ringBondCount&&f.push([t,e.ringBondCount]),0!==e.substitutionCount&&d.push([t,e.substitutionCount]),0!==e.unsaturatedAtom&&h.push([t,e.unsaturatedAtom])})),e&&e.forEach((function(e,t){if(e.resth||e.ifthen>0||e.range.length>0){var n="  1 "+ft.paddedNum(t,3)+" "+ft.paddedNum(e.ifthen,3)+" "+ft.paddedNum(e.resth?1:0,3)+"   "+e.range;l.push(n)}})),this.writeAtomPropList("M  CHG",o),this.writeAtomPropList("M  ISO",a),this.writeAtomPropList("M  RAD",s),this.writeAtomPropList("M  RGP",u);for(var p=0;p<l.length;++p)this.write("M  LOG"+l[p]+"\n");if(this.writeAtomPropList("M  APO",c),this.writeAtomPropList("M  RBC",f),this.writeAtomPropList("M  SUB",d),this.writeAtomPropList("M  UNS",h),r.length>0)for(var v=0;v<r.length;++v){var m=r[v],g=this.molecule.atoms.get(m).atomList;this.write("M  ALS"),this.writePaddedNumber(m+1,4),this.writePaddedNumber(g.ids.length,3),this.writeWhiteSpace(),this.write(g.notList?"T":"F");for(var y=g.labelList(),b=0;b<y.length;++b)this.writeWhiteSpace(),this.writePadded(y[b],3);this.writeCR()}var x={},_=1,w={};this.molecule.sGroupForest.getSGroupsBFS().forEach((function(e){w[_]=e,x[e]=_++}));for(var S=1;S<_;++S){var E=w[S],k=this.molecule.sgroups.get(E);this.write("M  STY"),this.writePaddedNumber(1,3),this.writeWhiteSpace(1),this.writePaddedNumber(S,3),this.writeWhiteSpace(1),this.writePadded(k.type,3),this.writeCR(),this.write("M  SLB"),this.writePaddedNumber(1,3),this.writeWhiteSpace(1),this.writePaddedNumber(S,3),this.writeWhiteSpace(1),this.writePaddedNumber(S,3),this.writeCR();var O=this.molecule.sGroupForest.parent.get(E);if(O>=0&&(this.write("M  SPL"),this.writePaddedNumber(1,3),this.writeWhiteSpace(1),this.writePaddedNumber(S,3),this.writeWhiteSpace(1),this.writePaddedNumber(x[O],3),this.writeCR()),"SRU"===k.type&&k.data.connectivity){var A=" ".concat(S.toString().padStart(3)," ").concat((k.data.connectivity||"").padEnd(3));this.write("M  SCN"),this.writePaddedNumber(1,3),this.write(A.toUpperCase()),this.writeCR()}"SRU"===k.type&&(this.write("M  SMT "),this.writePaddedNumber(S,3),this.writeWhiteSpace(),this.write(k.data.subscript||"n"),this.writeCR()),this.writeCR(sn.saveToMolfile[k.type](k,this.molecule,x,this.mapping,this.bondMapping))}var C=[];if(this.molecule.sgroups.forEach((function(e){e.data.expanded&&C.push(e.id+1)})),C.length){var M="M  SDS EXP  ".concat(C.length,"   ").concat(C.join("   "));this.writeCR(M)}this.writeCR("M  END")}},{key:"writeAtom",value:function(e,t){var n;this.writePaddedFloat(e.pp.x,10,4),this.writePaddedFloat(-e.pp.y,10,4),this.writePaddedFloat(e.pp.z,10,4),this.writeWhiteSpace(),this.writePadded(t,3),this.writePaddedNumber(0,2),this.writePaddedNumber(0,3),this.writePaddedNumber(0,3),"undefined"===typeof e.hCount&&(e.hCount=0),this.writePaddedNumber(e.hCount,3),"undefined"===typeof e.stereoCare&&(e.stereoCare=0),this.writePaddedNumber(e.stereoCare,3),n=e.explicitValence<0?0:0===e.explicitValence?15:e.explicitValence,this.writePaddedNumber(n,3),this.writePaddedNumber(0,3),this.writePaddedNumber(0,3),this.writePaddedNumber(0,3),"undefined"===typeof e.aam&&(e.aam=0),this.writePaddedNumber(e.aam,3),"undefined"===typeof e.invRet&&(e.invRet=0),this.writePaddedNumber(e.invRet,3),"undefined"===typeof e.exactChangeFlag&&(e.exactChangeFlag=0),this.writePaddedNumber(e.exactChangeFlag,3),this.writeCR()}},{key:"writeBond",value:function(e){this.writePaddedNumber(this.mapping[e.begin],3),this.writePaddedNumber(this.mapping[e.end],3),this.writePaddedNumber(e.type,3),"undefined"===typeof e.stereo&&(e.stereo=0),this.writePaddedNumber(e.stereo,3),this.writePadded(e.xxx,3),"undefined"===typeof e.topology&&(e.topology=0),this.writePaddedNumber(e.topology,3),"undefined"===typeof e.reactingCenterStatus&&(e.reactingCenterStatus=0),this.writePaddedNumber(e.reactingCenterStatus,3),this.writeCR()}},{key:"writeAtomProps",value:function(e){this.write("A  "),this.writePaddedNumber(e.id+1,3),this.writeCR(),this.writeCR(e.value)}},{key:"writeAtomPropList",value:function(e,t){for(var n=this;t.length>0;){for(var r=[];t.length>0&&r.length<8;)r.push(t[0]),t.splice(0,1);this.write(e),this.writePaddedNumber(r.length,3),r.forEach((function(e){n.writeWhiteSpace(),n.writePaddedNumber(n.mapping[e[0]],3),n.writeWhiteSpace(),n.writePaddedNumber(e[1],3)})),this.writeCR()}}}]),e}();function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fn=function(){function e(t){(0,l.Z)(this,e),this.options=cn(cn({},e.DefaultOptions),t)}return(0,c.Z)(e,[{key:"deserialize",value:function(e){var t=new un,n=null===e||void 0===e?void 0:e.split(/\r\n|[\n\r]/g);try{return t.parseCTFile(n,this.options.reactionRelayout)}catch(r){if(this.options.badHeaderRecover){try{return t.parseCTFile(n.slice(1),this.options.reactionRelayout)}catch(i){}try{return t.parseCTFile([""].concat(n),this.options.reactionRelayout)}catch(o){}}throw r}}},{key:"serialize",value:function(e){return(new un).saveMolecule(e,this.options.ignoreErrors,this.options.noRgroups,this.options.preserveIndigoDesc)}}]),e}();function hn(e,t,n){this.molecule=e,this.bonds=new Ne,this.getNeighbors=t,this.context=n}function dn(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function pn(e,t,n,r){var i=this;this.molecule=e,this.atom_data=t,this.components=n,this.nComponentsInReactants=-1,this.nReactants=r,this.vertices=new Array(this.molecule.atoms.size),this.molecule.atoms.forEach((function(e,t){i.vertices[t]=new pn.VertexDesc}),this),this.edges=new Array(this.molecule.bonds.size),this.molecule.bonds.forEach((function(e,t){i.edges[t]=new pn.EdgeDesc}),this),this.v_seq=[]}function vn(e,t,n){this.molecule=e,this.atoms=new Ne,this.getNeighbors=t,this.context=n}function mn(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function gn(){this.smiles="",this.writtenAtoms=[],this.writtenComponents=0,this.ignoreErrors=!1}function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,r.Z)(fn,"DefaultOptions",{badHeaderRecover:!1,ignoreErrors:!1,noRgroups:!1,preserveIndigoDesc:!1,reactionRelayout:!1}),hn.PARITY={NONE:0,CIS:1,TRANS:2},hn.prototype.each=function(e){this.bonds.forEach(e)},hn.prototype.getParity=function(e){return this.bonds.get(e).parity},hn.prototype.getSubstituents=function(e){return this.bonds.get(e).substituents},hn.prototype.sameside=function(e,t,n,r){var i=Y.diff(e,t),o=new Y(-i.y,i.x);if(!o.normalize())return 0;var a=Y.diff(n,e),s=Y.diff(r,t);if(!a.normalize())return 0;if(!s.normalize())return 0;var u=Y.dot(a,o),l=Y.dot(s,o);return Math.abs(u)<.001||Math.abs(l)<.001?0:u*l>0?1:-1},hn.prototype.samesides=function(e,t,n,r){return this.sameside(this.molecule.atoms.get(e).pp,this.molecule.atoms.get(t).pp,this.molecule.atoms.get(n).pp,this.molecule.atoms.get(r).pp)},hn.prototype.sortSubstituents=function(e){var t=this.molecule.atoms.get(e[0]).pureHydrogen(),n=e[1]<0||this.molecule.atoms.get(e[1]).pureHydrogen(),r=this.molecule.atoms.get(e[2]).pureHydrogen(),i=e[3]<0||this.molecule.atoms.get(e[3]).pureHydrogen();return(!t||!n)&&((!r||!i)&&(n?e[1]=-1:t?(e[0]=e[1],e[1]=-1):e[0]>e[1]&&dn(e,0,1),i?e[3]=-1:r?(e[2]=e[3],e[3]=-1):e[2]>e[3]&&dn(e,2,3),!0))},hn.prototype.isGeomStereoBond=function(e,t){var n=this.molecule.bonds.get(e);if(n.type!==oe.PATTERN.TYPE.DOUBLE)return!1;var r=this.molecule.atoms.get(n.begin).label,i=this.molecule.atoms.get(n.end).label;if("C"!==r&&"N"!==r&&"Si"!==r&&"Ge"!==r)return!1;if("C"!==i&&"N"!==i&&"Si"!==i&&"Ge"!==i)return!1;var o,a,s=this.getNeighbors.call(this.context,n.begin),u=this.getNeighbors.call(this.context,n.end);if(s.length<2||s.length>3||u.length<2||u.length>3)return!1;for(t[0]=-1,t[1]=-1,t[2]=-1,t[3]=-1,o=0;o<s.length;o++)if((a=s[o]).bid!==e){if(this.molecule.bonds.get(a.bid).type!==oe.PATTERN.TYPE.SINGLE)return!1;-1===t[0]?t[0]=a.aid:t[1]=a.aid}for(o=0;o<u.length;o++)if((a=u[o]).bid!==e){if(this.molecule.bonds.get(a.bid).type!==oe.PATTERN.TYPE.SINGLE)return!1;-1===t[2]?t[2]=a.aid:t[3]=a.aid}return(-1===t[1]||-1===this.samesides(n.begin,n.end,t[0],t[1]))&&(-1===t[3]||-1===this.samesides(n.begin,n.end,t[2],t[3]))},hn.prototype.build=function(e){var t=this;this.molecule.bonds.forEach((function(n,r){var i={parity:0,substituents:[]};if(t.bonds.set(r,i),(!Array.isArray(e)||!e[r])&&t.isGeomStereoBond(r,i.substituents)&&t.sortSubstituents(i.substituents)){var o=t.samesides(n.begin,n.end,i.substituents[0],i.substituents[2]);1===o?i.parity=hn.PARITY.CIS:-1===o&&(i.parity=hn.PARITY.TRANS)}}))},pn.VertexDesc=function(){this.dfs_state=0,this.parent_vertex=0,this.parent_edge=0,this.branches=0},pn.EdgeDesc=function(){this.opening_cycles=0,this.closing_cycle=0},pn.SeqElem=function(e,t,n){this.idx=e,this.parent_vertex=t,this.parent_edge=n},pn.prototype.walk=function(){for(var e,t,n=this,r=[],i=0,o=0;;){if(r.length<1){for(var a=-1;i<this.components.length&&-1===a;)null===(a=this.components[i].find((function(e){return 0===n.vertices[e].dfs_state&&(a=e,!0)})))&&(a=-1,i++),i===this.nReactants&&(this.nComponentsInReactants=o);if(a<-1&&this.molecule.atoms.find((function(e){return 0===n.vertices[e].dfs_state&&(a=e,!0)})),-1===a)break;this.vertices[a].parent_vertex=-1,this.vertices[a].parent_edge=-1,r.push(a),o++}var s=r.pop(),u=this.vertices[s].parent_vertex,l=new pn.SeqElem(s,u,this.vertices[s].parent_edge);this.v_seq.push(l),this.vertices[s].dfs_state=2;var c=this.atom_data[s];for(e=0;e<c.neighbours.length;e++){var f=c.neighbours[e].aid,h=c.neighbours[e].bid;if(f!==u)if(2===this.vertices[f].dfs_state){for(this.edges[h].closing_cycle=1,t=s;-1!==t&&this.vertices[t].parent_vertex!==f;)t=this.vertices[t].parent_vertex;if(-1===t)throw new Error("cycle unwind error");this.edges[this.vertices[t].parent_edge].opening_cycles++,this.vertices[s].branches++,l=new pn.SeqElem(f,s,h),this.v_seq.push(l)}else{if(1===this.vertices[f].dfs_state){if(-1===(t=r.indexOf(f)))throw new Error("internal: removing vertex from stack");r.splice(t,1);var d=this.vertices[f].parent_vertex;d>=0&&this.vertices[d].branches--}this.vertices[s].branches++,this.vertices[f].parent_vertex=s,this.vertices[f].parent_edge=h,this.vertices[f].dfs_state=1,r.push(f)}}}},pn.prototype.edgeClosingCycle=function(e){return 0!==this.edges[e].closing_cycle},pn.prototype.numBranches=function(e){return this.vertices[e].branches},pn.prototype.numOpeningCycles=function(e){return this.edges[e].opening_cycles},pn.prototype.toString=function(){var e="";return this.v_seq.forEach((function(t){e+=t.idx+" -> "})),e+="*"},vn.prototype.each=function(e,t){this.atoms.forEach(e,t)},vn.prototype.buildFromBonds=function(e){var t=this,n=this.molecule.atoms,r=this.molecule.bonds,i=new ee;n.forEach((function(e,o){var a=t.getNeighbors.call(t.context,o);if(2!==a.length)return!1;var s=a[0],u=a[1];if([o,s.aid,u.aid].findIndex((function(e){return["C","Si"].indexOf(n.get(e).label)<0}),t)>=0)return!1;if([s.bid,u.bid].findIndex((function(e){return r.get(e).type!==oe.PATTERN.TYPE.DOUBLE}),t)>=0)return!1;var l=t.getNeighbors.call(t.context,s.aid).filter((function(e){return e.aid!==o})),c=t.getNeighbors.call(t.context,u.aid).filter((function(e){return e.aid!==o}));return!(l.length<1||l.length>2||c.length<1||c.length>2)&&(!(l.concat(c).findIndex((function(e){return r.get(e.bid).type!==oe.PATTERN.TYPE.SINGLE}),t)>=0)&&(!(l.concat(c).findIndex((function(e){return r.get(e.bid).stereo===oe.PATTERN.STEREO.EITHER}),t)>=0)&&(i.add(s.aid).add(u.aid),!0)))})),i.size>0&&n.forEach((function(e,n){if(!i.has(n)){var r=t.getNeighbors.call(t.context,n),o=!1;r.find((function(e){var t=this.molecule.bonds.get(e.bid);return t.type===oe.PATTERN.TYPE.SINGLE&&t.begin===n&&(t.stereo===oe.PATTERN.STEREO.UP||t.stereo===oe.PATTERN.STEREO.DOWN)&&(o=!0,!0)}),t),o&&t.buildOneCenter(n)}}))},vn.allowed_stereocenters=[{elem:"C",charge:0,degree:3,n_double_bonds:0,implicit_degree:4},{elem:"C",charge:0,degree:4,n_double_bonds:0,implicit_degree:4},{elem:"Si",charge:0,degree:3,n_double_bonds:0,implicit_degree:4},{elem:"Si",charge:0,degree:4,n_double_bonds:0,implicit_degree:4},{elem:"N",charge:1,degree:3,n_double_bonds:0,implicit_degree:4},{elem:"N",charge:1,degree:4,n_double_bonds:0,implicit_degree:4},{elem:"N",charge:0,degree:3,n_double_bonds:0,implicit_degree:3},{elem:"S",charge:0,degree:4,n_double_bonds:2,implicit_degree:4},{elem:"S",charge:1,degree:3,n_double_bonds:0,implicit_degree:3},{elem:"S",charge:0,degree:3,n_double_bonds:1,implicit_degree:3},{elem:"P",charge:0,degree:3,n_double_bonds:0,implicit_degree:3},{elem:"P",charge:1,degree:4,n_double_bonds:0,implicit_degree:4},{elem:"P",charge:0,degree:4,n_double_bonds:1,implicit_degree:4}],vn.prototype.buildOneCenter=function(e){var t=this,n=this.molecule.atoms.get(e),r=this.getNeighbors.call(this.context,e),i=r.length,o=-1,a={group:0,type:0,pyramid:[]},s=[],u=0,l=0;a.pyramid[0]=-1,a.pyramid[1]=-1,a.pyramid[2]=-1,a.pyramid[3]=-1;var c=0;if(i>4)throw new Error("stereocenter with %d bonds are not supported"+i);if(r.forEach((function(e,r){var i=t.molecule.atoms.get(e.aid),o=t.molecule.bonds.get(e.bid);if(s[r]={edge_idx:e.bid,nei_idx:e.aid,rank:e.aid,vec:Y.diff(i.pp,n.pp).yComplement()},i.pureHydrogen()?(c++,s[r].rank=1e4):"H"===i.label&&(s[r].rank=5e3),!s[r].vec.normalize())throw new Error("zero bond length");if(o.type===oe.PATTERN.TYPE.TRIPLE)throw new Error("non-single bonds not allowed near stereocenter");if(o.type===oe.PATTERN.TYPE.AROMATIC)throw new Error("aromatic bonds not allowed near stereocenter");o.type===oe.PATTERN.TYPE.DOUBLE&&l++})),vn.allowed_stereocenters.find((function(e){return e.elem===n.label&&e.charge===n.charge&&e.degree===i&&e.n_double_bonds===l&&(o=e.implicit_degree,!0)})),-1===o)throw new Error("unknown stereocenter configuration: "+n.label+", charge "+n.charge+", "+i+" bonds ("+l+" double)");if(4===i&&c>1)throw new Error(c+" hydrogens near stereocenter");if(3===i&&4===o&&c>0)throw new Error("have hydrogen(s) besides implicit hydrogen near stereocenter");if(4===i){s[0].rank>s[1].rank&&mn(s,0,1),s[1].rank>s[2].rank&&mn(s,1,2),s[2].rank>s[3].rank&&mn(s,2,3),s[1].rank>s[2].rank&&mn(s,1,2),s[0].rank>s[1].rank&&mn(s,0,1),s[1].rank>s[2].rank&&mn(s,1,2);for(var f,h,d=-1,p=-1,v=-1,m=-1,g=0,y=0;y<4;y++){var b=this.getBondStereo(e,s[y].edge_idx);if(b===oe.PATTERN.STEREO.UP||b===oe.PATTERN.STEREO.DOWN){d=y,g=b;break}}if(-1===d)throw new Error("none of 4 bonds going from stereocenter is stereobond");if(-1===p&&((f=vn.xyzzy(s[d].vec,s[(d+1)%4].vec,s[(d+2)%4].vec))+(h=vn.xyzzy(s[d].vec,s[(d+1)%4].vec,s[(d+3)%4].vec))!==3&&f+h!==12||(p=(d+1)%4,v=(d+2)%4,m=(d+3)%4)),-1===p&&((f=vn.xyzzy(s[d].vec,s[(d+2)%4].vec,s[(d+1)%4].vec))+(h=vn.xyzzy(s[d].vec,s[(d+2)%4].vec,s[(d+3)%4].vec))!==3&&f+h!==12||(p=(d+2)%4,v=(d+1)%4,m=(d+3)%4)),-1===p&&((f=vn.xyzzy(s[d].vec,s[(d+3)%4].vec,s[(d+1)%4].vec))+(h=vn.xyzzy(s[d].vec,s[(d+3)%4].vec,s[(d+2)%4].vec))!==3&&f+h!==12||(p=(d+3)%4,v=(d+2)%4,m=(d+1)%4)),-1===p)throw new Error("internal error: can not find opposite bond");if(g===oe.PATTERN.STEREO.UP&&this.getBondStereo(e,s[p].edge_idx)===oe.PATTERN.STEREO.DOWN)throw new Error("stereo types of the opposite bonds mismatch");if(g===oe.PATTERN.STEREO.DOWN&&this.getBondStereo(e,s[p].edge_idx)===oe.PATTERN.STEREO.UP)throw new Error("stereo types of the opposite bonds mismatch");if(g===this.getBondStereo(e,s[v].edge_idx))throw new Error("stereo types of non-opposite bonds match");if(g===this.getBondStereo(e,s[m].edge_idx))throw new Error("stereo types of non-opposite bonds match");u=3===d||3===p?g:g===oe.PATTERN.STEREO.UP?oe.PATTERN.STEREO.DOWN:oe.PATTERN.STEREO.UP;var x=vn.sign(s[0].vec,s[1].vec,s[2].vec);u===oe.PATTERN.STEREO.UP&&x>0||u===oe.PATTERN.STEREO.DOWN&&x<0?(a.pyramid[0]=s[0].nei_idx,a.pyramid[1]=s[1].nei_idx,a.pyramid[2]=s[2].nei_idx):(a.pyramid[0]=s[0].nei_idx,a.pyramid[1]=s[2].nei_idx,a.pyramid[2]=s[1].nei_idx),a.pyramid[3]=s[3].nei_idx}else if(3===i){s[0].rank>s[1].rank&&mn(s,0,1),s[1].rank>s[2].rank&&mn(s,1,2),s[0].rank>s[1].rank&&mn(s,0,1);var _=this.getBondStereo(e,s[0].edge_idx),w=this.getBondStereo(e,s[1].edge_idx),S=this.getBondStereo(e,s[2].edge_idx),E=0,k=0;if(E+=_===oe.PATTERN.STEREO.UP?1:0,E+=w===oe.PATTERN.STEREO.UP?1:0,E+=S===oe.PATTERN.STEREO.UP?1:0,k+=_===oe.PATTERN.STEREO.DOWN?1:0,k+=w===oe.PATTERN.STEREO.DOWN?1:0,k+=S===oe.PATTERN.STEREO.DOWN?1:0,4===o){if(3===E)throw new Error("all 3 bonds up near stereoatom");if(3===k)throw new Error("all 3 bonds down near stereoatom");if(0===E&&0===k)throw new Error("no up/down bonds near stereoatom -- indefinite case");if(1===E&&1===k)throw new Error("one bond up, one bond down -- indefinite case");if(g=0,2===E)u=oe.PATTERN.STEREO.DOWN;else if(2===k)u=oe.PATTERN.STEREO.UP;else{for(d=-1,v=-1,m=-1,y=0;y<3;y++){var O=this.getBondStereo(e,s[y].edge_idx);if(O===oe.PATTERN.STEREO.UP||O===oe.PATTERN.STEREO.DOWN){d=y,g=O,v=(y+1)%3,m=(y+2)%3;break}}if(-1===d)throw new Error("internal error: can not find up or down bond");var A=vn.xyzzy(s[v].vec,s[m].vec,s[d].vec);if(3===A||4===A)throw new Error("degenerate case for 3 bonds near stereoatom");u=1===A?g:g===oe.PATTERN.STEREO.UP?oe.PATTERN.STEREO.DOWN:oe.PATTERN.STEREO.UP}var C=vn.sign(s[0].vec,s[1].vec,s[2].vec);u===oe.PATTERN.STEREO.UP&&C>0||u===oe.PATTERN.STEREO.DOWN&&C<0?(a.pyramid[0]=s[0].nei_idx,a.pyramid[1]=s[1].nei_idx,a.pyramid[2]=s[2].nei_idx):(a.pyramid[0]=s[0].nei_idx,a.pyramid[1]=s[2].nei_idx,a.pyramid[2]=s[1].nei_idx),a.pyramid[3]=-1}else{var M;if(k>0&&E>0)throw new Error("one bond up, one bond down -- indefinite case");if(0===k&&0===E)throw new Error("no up-down bonds attached to stereocenter");M=E>0?1:-1,1!==vn.xyzzy(s[0].vec,s[1].vec,s[2].vec)&&1!==vn.xyzzy(s[0].vec,s[2].vec,s[1].vec)&&1!==vn.xyzzy(s[2].vec,s[1].vec,s[0].vec)||(M=-M),vn.sign(s[0].vec,s[1].vec,s[2].vec)===M?(a.pyramid[0]=s[0].nei_idx,a.pyramid[1]=s[2].nei_idx,a.pyramid[2]=s[1].nei_idx):(a.pyramid[0]=s[0].nei_idx,a.pyramid[1]=s[1].nei_idx,a.pyramid[2]=s[2].nei_idx),a.pyramid[3]=-1}}this.atoms.set(e,a)},vn.prototype.getBondStereo=function(e,t){var n=this.molecule.bonds.get(t);return e!==n.begin?0:n.stereo},vn.xyzzy=function(e,t,n){var r=.001,i=Y.cross(e,t),o=Y.dot(e,t),a=Y.cross(e,n),s=Y.dot(e,n);if(Math.abs(i)<r){if(Math.abs(a)<r)throw new Error("degenerate case -- bonds overlap");return a>0?4:8}return i*a<-r*r||s<o?2:1},vn.sign=function(e,t,n){var r=(e.x-n.x)*(t.y-n.y)-(e.y-n.y)*(t.x-n.x);if(r>.001)return 1;if(r<-.001)return-1;throw new Error("degenerate triangle")},vn.isPyramidMappingRigid=function(e){var t=e.slice(),n=!0;return t[0]>t[1]&&(mn(t,0,1),n=!n),t[1]>t[2]&&(mn(t,1,2),n=!n),t[2]>t[3]&&(mn(t,2,3),n=!n),t[1]>t[2]&&(mn(t,1,2),n=!n),t[0]>t[1]&&(mn(t,0,1),n=!n),t[1]>t[2]&&(mn(t,1,2),n=!n),n},gn._Atom=function(e){this.neighbours=[],this.aromatic=!1,this.lowercase=!1,this.chirality=0,this.branch_cnt=0,this.paren_written=!1,this.h_count=e,this.parent=-1},gn.prototype.isBondInRing=function(e){return this.inLoop[e]},gn.prototype.saveMolecule=function(e,t){var n,r,i,o=this;t||(this.ignoreErrors=t),(e=e.clone(void 0,void 0,!e.hasRxnArrow(),void 0,void 0,void 0)).initHalfBonds(),e.initNeighbors(),e.sortNeighbors(),e.setImplicitHydrogen(),e.sgroups.forEach((function(t){if("MUL"===t.type)try{me.prepareMulForSaving(t,e)}catch(n){throw Error("Bad s-group ("+n.message+")")}})),this.atoms=new Array(e.atoms.size),e.atoms.forEach((function(e,t){o.atoms[t]=new gn._Atom(e.implicitH)}));var a=["B","C","N","O","P","S","Se","As"];e.bonds.forEach((function(t,n){t.type===oe.PATTERN.TYPE.AROMATIC&&(o.atoms[t.begin].aromatic=!0,-1!==a.indexOf(e.atoms.get(t.begin).label)&&(o.atoms[t.begin].lowercase=!0),o.atoms[t.end].aromatic=!0,-1!==a.indexOf(e.atoms.get(t.end).label)&&(o.atoms[t.end].lowercase=!0)),o.atoms[t.begin].neighbours.push({aid:t.end,bid:n}),o.atoms[t.end].neighbours.push({aid:t.begin,bid:n})})),this.inLoop=function(){e.prepareLoopStructure();var t=new ee;e.loops.forEach((function(n){if(n.hbs.length<=6){var r=n.hbs.map((function(t){return e.halfBonds.get(t).bid}));t=t.union(new ee(r))}}));var n={};return t.forEach((function(e){n[e]=1})),n}(),this.touchedCistransbonds=0,this.markCisTrans(e);var s=e.getComponents(),u=s.reactants.concat(s.products),l=new pn(e,this.atoms,u,s.reactants.length);for(l.walk(),this.atoms.forEach((function(e){e.neighbours=[]})),n=0;n<l.v_seq.length;n++){var c=l.v_seq[n],f=c.idx,h=c.parent_edge,d=c.parent_vertex;if(h>=0){var p=this.atoms[f],v=l.numOpeningCycles(h);for(r=0;r<v;r++)this.atoms[d].neighbours.push({aid:-1,bid:-1});if(l.edgeClosingCycle(h)){for(i=0;i<p.neighbours.length;i++)if(-1===p.neighbours[i].aid){p.neighbours[i].aid=d,p.neighbours[i].bid=h;break}if(i===p.neighbours.length)throw new Error("internal: can not put closing bond to its place")}else p.neighbours.push({aid:d,bid:h}),p.parent=d;this.atoms[d].neighbours.push({aid:f,bid:h})}}try{var m=new vn(e,(function(e){return this.atoms[e].neighbours}),this);m.buildFromBonds(this.ignoreErrors),m.each((function(e,t){var n=-1;-1===e.pyramid[3]&&(n=3);var a=[],s=0,u=o.atoms[t];if(-1!==u.parent)for(i=0;i<4;i++)if(e.pyramid[i]===u.parent){a[s++]=i;break}for(-1!==n&&(a[s++]=n),r=0;r!==u.neighbours.length;r++)if(u.neighbours[r].aid!==u.parent)for(i=0;i<4;i++)if(u.neighbours[r].aid===e.pyramid[i]){if(s>=4)throw new Error("internal: pyramid overflow");a[s++]=i;break}if(4===s)s=a[0],a[0]=a[1],a[1]=a[2],a[2]=a[3],a[3]=s;else if(3!==s)throw new Error("cannot calculate chirality");vn.isPyramidMappingRigid(a)?o.atoms[t].chirality=1:o.atoms[t].chirality=2}))}catch(S){}var g=[];g.push(0);var y=!0;for(n=0;n<l.v_seq.length;n++){f=(c=l.v_seq[n]).idx,h=c.parent_edge;var b=!0;if((d=c.parent_vertex)>=0){for(l.numBranches(d)>1&&this.atoms[d].branch_cnt>0&&this.atoms[d].paren_written&&(this.smiles+=")"),v=l.numOpeningCycles(h),r=0;r<v;r++){for(i=1;i<g.length&&-1!==g[i];i++);i===g.length?g.push(d):g[i]=d,this.writeCycleNumber(i)}if(d>=0){var x=l.numBranches(d);if(x>1&&this.atoms[d].branch_cnt<x-1&&(l.edgeClosingCycle(h)?this.atoms[d].paren_written=!1:(this.smiles+="(",this.atoms[d].paren_written=!0)),this.atoms[d].branch_cnt++,this.atoms[d].branch_cnt>x)throw new Error("unexpected branch")}var _=e.bonds.get(h),w=0;if(_.type===oe.PATTERN.TYPE.SINGLE&&(w=this.calcBondDirection(e,h,d)),1===w&&f===_.end||2===w&&f===_.begin?this.smiles+="/":2===w&&f===_.end||1===w&&f===_.begin?this.smiles+="\\":_.type===oe.PATTERN.TYPE.ANY?this.smiles+="~":_.type===oe.PATTERN.TYPE.DOUBLE?this.smiles+="=":_.type===oe.PATTERN.TYPE.TRIPLE?this.smiles+="#":_.type===oe.PATTERN.TYPE.SINGLE_OR_AROMATIC?this.smiles+="-,:":_.type===oe.PATTERN.TYPE.DOUBLE_OR_AROMATIC?this.smiles+="=,:":_.type===oe.PATTERN.TYPE.SINGLE_OR_DOUBLE?this.smiles+="-,=":_.type!==oe.PATTERN.TYPE.AROMATIC||this.atoms[_.begin].lowercase&&this.atoms[_.end].lowercase&&this.isBondInRing(h)?_.type===oe.PATTERN.TYPE.SINGLE&&this.atoms[_.begin].aromatic&&this.atoms[_.end].aromatic&&(this.smiles+="-"):this.smiles+=":",l.edgeClosingCycle(h)){for(r=1;r<g.length&&g[r]!==f;r++);if(r===g.length)throw new Error("cycle number not found");this.writeCycleNumber(r),g[r]=-1,b=!1}}else y||(this.smiles+=this.writtenComponents===l.nComponentsInReactants&&0!==l.nReactants?">>":"."),y=!1,this.writtenComponents++;b&&(this.writeAtom(e,f,this.atoms[f].aromatic,this.atoms[f].lowercase,this.atoms[f].chirality),this.writtenAtoms.push(c.idx))}return this.comma=!1,this.writeRadicals(e),this.comma&&(this.smiles+="|"),this.smiles},gn.prototype.writeCycleNumber=function(e){if(e>0&&e<10)this.smiles+=e;else if(e>=10&&e<100)this.smiles+="%"+e;else{if(!(e>=100&&e<1e3))throw new Error("bad cycle number: "+e);this.smiles+="%%"+e}},gn.prototype.writeAtom=function(e,t,n,r,i){var o,a=e.atoms.get(t),s=!1,u=-1;if("A"!==a.label)if("R"!==a.label&&"R#"!==a.label){o=a.aam,"C"!==a.label&&"P"!==a.label&&"N"!==a.label&&"S"!==a.label&&"O"!==a.label&&"Cl"!==a.label&&"F"!==a.label&&"Br"!==a.label&&"B"!==a.label&&"I"!==a.label&&(s=!0),(a.explicitValence>=0||0!==a.radical||i>0||n&&"C"!==a.label&&"O"!==a.label||n&&"C"===a.label&&this.atoms[t].neighbours.length<3&&0===this.atoms[t].h_count)&&(u=this.atoms[t].h_count);var l=a.label;if(a.atomList&&!a.atomList.notList?(l=a.atomList.label(),s=!1):a.isPseudo()||a.atomList&&a.atomList.notList?(l="*",s=!1):(i||0!==a.charge||a.isotope>0||u>=0||o>0)&&(s=!0),s&&(-1===u&&(u=this.atoms[t].h_count),this.smiles+="["),a.isotope>0&&(this.smiles+=a.isotope),this.smiles+=r?l.toLowerCase():l,i>0&&(this.smiles+=1===i?"@":"@@",a.implicitH>1))throw new Error(a.implicitH+" implicit H near stereocenter");"H"!==a.label&&(u>1||0===u&&!s?this.smiles+="H"+u:1===u&&(this.smiles+="H")),a.charge>1?this.smiles+="+"+a.charge:a.charge<-1?this.smiles+=a.charge:1===a.charge?this.smiles+="+":-1===a.charge&&(this.smiles+="-"),o>0&&(this.smiles+=":"+o),s&&(this.smiles+="]")}else this.smiles+="[*]";else this.smiles+="*"},gn.prototype.markCisTrans=function(e){var t=this;this.cis_trans=new hn(e,(function(e){return this.atoms[e].neighbours}),this),this.cis_trans.build(),this.dbonds=new Array(e.bonds.size),e.bonds.forEach((function(e,n){t.dbonds[n]={ctbond_beg:-1,ctbond_end:-1,saved:0}})),this.cis_trans.each((function(n,r){var i=e.bonds.get(r);if(0!==n.parity&&!t.isBondInRing(r)){var o=t.atoms[i.begin].neighbours,a=t.atoms[i.end].neighbours,s=!0,u=!0;if(o.forEach((function(t){t.bid!==r&&e.bonds.get(t.bid).type===oe.PATTERN.TYPE.SINGLE&&(s=!1)})),a.forEach((function(t){t.bid!==r&&e.bonds.get(t.bid).type===oe.PATTERN.TYPE.SINGLE&&(u=!1)})),s||u)return;o.forEach((function(n){n.bid!==r&&(e.bonds.get(n.bid).begin===i.begin?t.dbonds[n.bid].ctbond_beg=r:t.dbonds[n.bid].ctbond_end=r)})),a.forEach((function(n){n.bid!==r&&(e.bonds.get(n.bid).begin===i.end?t.dbonds[n.bid].ctbond_beg=r:t.dbonds[n.bid].ctbond_end=r)}))}}))},gn.prototype.updateSideBonds=function(e,t){var n=e.bonds.get(t),r=this.cis_trans.getSubstituents(t),i=this.cis_trans.getParity(t),o=[-1,-1,-1,-1];o[0]=e.findBondId(r[0],n.begin),-1!==r[1]&&(o[1]=e.findBondId(r[1],n.begin)),o[2]=e.findBondId(r[2],n.end),-1!==r[3]&&(o[3]=e.findBondId(r[3],n.end));var a=0,s=0,u=0,l=0;if(0!==this.dbonds[o[0]].saved&&(1===this.dbonds[o[0]].saved&&e.bonds.get(o[0]).begin===n.begin||2===this.dbonds[o[0]].saved&&e.bonds.get(o[0]).end===n.begin?a++:s++),-1!==o[1]&&0!==this.dbonds[o[1]].saved&&(2===this.dbonds[o[1]].saved&&e.bonds.get(o[1]).begin===n.begin||1===this.dbonds[o[1]].saved&&e.bonds.get(o[1]).end===n.begin?a++:s++),0!==this.dbonds[o[2]].saved&&(1===this.dbonds[o[2]].saved&&e.bonds.get(o[2]).begin===n.end||2===this.dbonds[o[2]].saved&&e.bonds.get(o[2]).end===n.end?u++:l++),-1!==o[3]&&0!==this.dbonds[o[3]].saved&&(2===this.dbonds[o[3]].saved&&e.bonds.get(o[3]).begin===n.end||1===this.dbonds[o[3]].saved&&e.bonds.get(o[3]).end===n.end?u++:l++),i===hn.PARITY.CIS?(a+=u,s+=l):(a+=l,s+=u),a>0&&s>0)throw new Error("incompatible cis-trans configuration");return(0!==a||0!==s)&&(a>0&&(this.dbonds[o[0]].saved=e.bonds.get(o[0]).begin===n.begin?1:2,-1!==o[1]&&(this.dbonds[o[1]].saved=e.bonds.get(o[1]).begin===n.begin?2:1),this.dbonds[o[2]].saved=e.bonds.get(o[2]).begin===n.end===(i===hn.PARITY.CIS)?1:2,-1!==o[3]&&(this.dbonds[o[3]].saved=e.bonds.get(o[3]).begin===n.end===(i===hn.PARITY.CIS)?2:1)),s>0&&(this.dbonds[o[0]].saved=e.bonds.get(o[0]).begin===n.begin?2:1,-1!==o[1]&&(this.dbonds[o[1]].saved=e.bonds.get(o[1]).begin===n.begin?1:2),this.dbonds[o[2]].saved=e.bonds.get(o[2]).begin===n.end===(i===hn.PARITY.CIS)?2:1,-1!==o[3]&&(this.dbonds[o[3]].saved=e.bonds.get(o[3]).begin===n.end===(i===hn.PARITY.CIS)?1:2)),!0)},gn.prototype.calcBondDirection=function(e,t,n){var r,i=this;if(-1===this.dbonds[t].ctbond_beg&&-1===this.dbonds[t].ctbond_end)return 0;if(e.bonds.get(t).type!==oe.PATTERN.TYPE.SINGLE)throw new Error("internal: directed bond type "+e.bonds.get(t).type);for(;r=0,this.cis_trans.each((function(t,n){0===t.parity||i.isBondInRing(n)||i.updateSideBonds(e,n)&&r++})),r!==this.touchedCistransbonds;)this.touchedCistransbonds=r;return 0===this.dbonds[t].saved&&(n===e.bonds.get(t).begin?this.dbonds[t].saved=1:this.dbonds[t].saved=2),this.dbonds[t].saved},gn.prototype.writeRadicals=function(e){var t,n,r=new Array(this.writtenAtoms.length);for(t=0;t<this.writtenAtoms.length;t++)if(!r[t]){var i=e.atoms.get(this.writtenAtoms[t]).radical;if(0!==i)for(this.comma?this.smiles+=",":(this.smiles+=" |",this.comma=!0),i===re.PATTERN.RADICAL.SINGLET?this.smiles+="^3:":i===re.PATTERN.RADICAL.DOUPLET?this.smiles+="^1:":this.smiles+="^4:",this.smiles+=t,n=t+1;n<this.writtenAtoms.length;n++)e.atoms.get(this.writtenAtoms[n]).radical===i&&(r[n]=!0,this.smiles+=","+n)}};var xn=function(){function e(t){(0,l.Z)(this,e),this.options=bn(bn({},e.DefaultOptions),t)}return(0,c.Z)(e,[{key:"deserialize",value:function(e){throw new Error("Not implemented yet.")}},{key:"serialize",value:function(e){return(new gn).saveMolecule(e,this.options.ignoreErrors)}}]),e}();(0,r.Z)(xn,"DefaultOptions",{ignoreErrors:!1});var _n,wn=/^[^]+?\$\$\$\$$/gm,Sn=function(){function e(){(0,l.Z)(this,e)}return(0,c.Z)(e,[{key:"deserialize",value:function(e){for(var t,n=[],r=new fn;null!==(t=wn.exec(e));){var i=t[0].replace(/\r/g,"").trim(),o=i.indexOf("M  END");if(-1!==o){var a=i.substr(o+7).trim().split(/^$\n?/m),s=r.deserialize(i.substring(0,o+6)),u=a.reduce((function(e,t){var n=t.match(/^> [ \d]*<(\S+)>/);if(n){var r=n[1],i=t.split("\n")[1].trim();e[r]=Number.isFinite(i)?+i:i.toString()}return e}),{});n.push({struct:s,props:u})}}return n}},{key:"serialize",value:function(e){var t=new fn;return e.reduce((function(e,n){return e+=t.serialize(n.struct),Object.keys(n.props).forEach((function(t){e+="> <"+t+">\n",e+=n.props[t]+"\n\n"})),e+"$$$$"}),"")}}]),e}();function En(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kn(e,t,n,r,i){var o=t;n&&"GET"===e&&(o=function(e,t){return e.replace(/:(\w+)/g,(function(e,n){return t[n]}))}(t,n));var a=fetch(o,{method:e,headers:Object.assign({Accept:"application/json"},r),body:"GET"!==e?n:void 0,credentials:"same-origin"});return a=i?i(a):a.then((function(e){return e.json().then((function(t){return e.ok?t:Promise.reject(t.error)}))}))}function On(e,t,n,i,o){return function(a,s,u){var l=Object.assign({},a);return l.options=Object.assign(l.options||{},i,s),kn(e,n+t,JSON.stringify(l),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?En(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({"Content-Type":"application/json"},o),u)}}!function(e){e.Mol="chemical/x-mdl-molfile",e.Rxn="chemical/x-mdl-rxnfile",e.DaylightSmiles="chemical/x-daylight-smiles",e.ExtendedSmiles="chemical/x-chemaxon-cxsmiles",e.DaylightSmarts="chemical/x-daylight-smarts",e.InChI="chemical/x-inchi",e.InChIAuxInfo="chemical/x-inchi-aux",e.CDXML="chemical/x-cdxml",e.CML="chemical/x-cml",e.KET="chemical/x-indigo-ket"}(_n||(_n={}));var An=function(){function e(t,n,r){(0,l.Z)(this,e),this.apiPath=t,this.defaultOptions=n,this.customHeaders=r}return(0,c.Z)(e,[{key:"generateInchIKey",value:function(e){return On("POST","indigo/convert",this.apiPath,this.defaultOptions,this.customHeaders)({struct:e,output_format:"chemical/x-inchi"},{})}},{key:"info",value:function(){var e=a(u().mark((function e(){var t,n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,e.prev=1,e.next=4,kn("GET",this.apiPath+"info");case 4:i=e.sent,t=i.indigo_version,n=i.imago_versions,r=!0,e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),t="",n=[],r=!1;case 15:return e.abrupt("return",{indigoVersion:t,imagoVersions:n,isAvailable:r});case 16:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"convert",value:function(e,t){return On("POST","indigo/convert",this.apiPath,this.defaultOptions,this.customHeaders)(e,t)}},{key:"layout",value:function(e,t){return On("POST","indigo/layout",this.apiPath,this.defaultOptions,this.customHeaders)(e,t)}},{key:"clean",value:function(e,t){return On("POST","indigo/clean",this.apiPath,this.defaultOptions,this.customHeaders)(e,t)}},{key:"aromatize",value:function(e,t){return On("POST","indigo/aromatize",this.apiPath,this.defaultOptions,this.customHeaders)(e,t)}},{key:"dearomatize",value:function(e,t){return On("POST","indigo/dearomatize",this.apiPath,this.defaultOptions,this.customHeaders)(e,t)}},{key:"calculateCip",value:function(e,t){return On("POST","indigo/calculate_cip",this.apiPath,this.defaultOptions,this.customHeaders)(e,t)}},{key:"automap",value:function(e,t){return On("POST","indigo/automap",this.apiPath,this.defaultOptions,this.customHeaders)(e,t)}},{key:"check",value:function(e,t){return On("POST","indigo/check",this.apiPath,this.defaultOptions,this.customHeaders)(e,t)}},{key:"calculate",value:function(e,t){return On("POST","indigo/calculate",this.apiPath,this.defaultOptions,this.customHeaders)(e,t)}},{key:"recognize",value:function(e,t){var n=t?"?version=".concat(t):"",r=kn("POST",this.apiPath+"imago/uploads".concat(n),e,{"Content-Type":e.type||"application/octet-stream"}),i=kn.bind(null,"GET",this.apiPath+"imago/uploads/:id");return r.then((function(e){return function(e,t,n,r){return new Promise((function(i,o){setTimeout((function r(){e().then((function(e){try{t(e)?i(e):setTimeout(r,n)}catch(a){o(a)}}),(function(e){return o(e)}))}),r||0)}))}(i.bind(null,{id:e.upload_id}),(function(e){if("FAILURE"===e.state)throw e;return"SUCCESS"===e.state}),500,300)})).then((function(e){return{struct:e.metadata.mol_str}}))}},{key:"generateImageAsBase64",value:function(e,t){var n=(null===t||void 0===t?void 0:t.outputFormat)||"png";return On("POST","indigo/render",this.apiPath,this.defaultOptions,this.customHeaders)({struct:e},{"render-output-format":n},(function(e){return e.then((function(e){return e.text()}))}))}}]),e}(),Cn=function(){function e(t,n){(0,l.Z)(this,e),(0,r.Z)(this,"mode","remote");var i=t;this.customHeaders=n;var o=new URLSearchParams(document.location.search);o.has("api_path")&&(i=o.get("api_path")),this.apiPath=!i||/\/$/.test(i)?i:i+"/"}return(0,c.Z)(e,[{key:"createStructService",value:function(e){return new An(this.apiPath,e,this.customHeaders)}}]),e}(),Mn=(0,c.Z)((function e(t,n,r,i,o){(0,l.Z)(this,e),this.name=t,this.mime=n,this.extensions=r,this.supportsCoords=i||!1,this.options=o||{}})),Tn={mol:new Mn("MDL Molfile V2000",_n.Mol,[".mol"],!0),molV3000:new Mn("MDL Molfile V3000",_n.Mol,[".mol"],!0,{"molfile-saving-mode":"3000"}),rxn:new Mn("MDL Rxnfile V2000",_n.Rxn,[".rxn"],!0),rxnV3000:new Mn("MDL Rxnfile V3000",_n.Rxn,[".rxn"],!0,{"molfile-saving-mode":"3000"}),smiles:new Mn("Daylight SMILES",_n.DaylightSmiles,[".smi",".smiles"]),smilesExt:new Mn("Extended SMILES",_n.ExtendedSmiles,[".cxsmi",".cxsmiles"]),smarts:new Mn("Daylight SMARTS",_n.DaylightSmarts,[".smarts"]),inChI:new Mn("InChI",_n.InChI,[".inchi"]),inChIAuxInfo:new Mn("InChI AuxInfo",_n.InChIAuxInfo,[".inchi"]),cml:new Mn("CML",_n.CML,[".cml",".mrv"],!0),ket:new Mn("Ket Format",_n.KET,[".ket"]),cdxml:new Mn("CDXML",_n.CDXML,[".cdxml"],!0)},Pn={svg:{extension:".svg",name:"SVG Document"},png:{extension:".png",name:"PNG Image"}};function Rn(e){return Pn[e]}function In(e){return Tn[e]}function Ln(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var Nn=new WeakMap,jn=function(){function e(t){(0,l.Z)(this,e),Ln(this,Nn,{writable:!0,value:void 0}),A(this,Nn,t)}return(0,c.Z)(e,[{key:"getStructureFromStructAsync",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C(this,Nn).serialize(t),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStructureFromStringAsync",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C(this,Nn).deserialize(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Dn(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var Bn=new WeakMap,zn=function(){function e(t){(0,l.Z)(this,e),Dn(this,Bn,{writable:!0,value:void 0}),A(this,Bn,t)}return(0,c.Z)(e,[{key:"getStructureFromStructAsync",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C(this,Bn).serialize(t),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStructureFromStringAsync",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C(this,Bn).deserialize(t),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Fn(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var Vn=new WeakMap,Un=function(){function e(t){(0,l.Z)(this,e),Fn(this,Vn,{writable:!0,value:void 0}),A(this,Vn,t)}return(0,c.Z)(e,[{key:"getStructureFromStructAsync",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C(this,Vn).serialize(t),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStructureFromStringAsync",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C(this,Vn).deserialize(t),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gn(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var Wn=new WeakMap,qn=new WeakMap,Kn=new WeakMap,Yn=new WeakMap,Xn=function(){function e(t,n,r,i){(0,l.Z)(this,e),Gn(this,Wn,{writable:!0,value:void 0}),Gn(this,qn,{writable:!0,value:void 0}),Gn(this,Kn,{writable:!0,value:void 0}),Gn(this,Yn,{writable:!0,value:void 0}),A(this,Wn,t),A(this,qn,n),A(this,Kn,r),A(this,Yn,i)}return(0,c.Z)(e,[{key:"getStructureFromStructAsync",value:function(){var e=a(u().mark((function e(t){var n,r,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(this,Wn).info();case 2:if(e.sent.isAvailable){e.next=5;break}throw new Error("Server is not available");case 5:return n=In(C(this,Kn)),e.prev=6,r=C(this,qn).serialize(t),e.next=10,C(this,Wn).convert({struct:r,output_format:n.mime},Hn(Hn({},C(this,Yn)),n.options));case 10:return i=e.sent,e.abrupt("return",i.struct);case 14:throw e.prev=14,e.t0=e.catch(6),o="Server is not compatible"===e.t0.message?"".concat(n.name," is not supported."):"Convert error!\n".concat(e.t0.message||e.t0),new Error(o);case 18:case"end":return e.stop()}}),e,this,[[6,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getStructureFromStringAsync",value:function(){var e=a(u().mark((function e(t){var n,r,i,o,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(this,Wn).info();case 2:if(e.sent.isAvailable){e.next=5;break}throw new Error("Server is not available");case 5:return r={struct:void 0,output_format:In("ket").mime},(i=In(C(this,Kn)).supportsCoords)?(n=C(this,Wn).convert,r.struct=t):(n=C(this,Wn).layout,r.struct=t.trim()),e.prev=8,e.next=11,n(r,C(this,Yn));case 11:return o=e.sent,a=C(this,qn).deserialize(o.struct),i||a.rescale(),e.abrupt("return",a);case 17:if(e.prev=17,e.t0=e.catch(8),"Server is not compatible"===e.t0.message){e.next=21;break}throw Error("Convert error!\n".concat(e.t0.message||e.t0));case 21:throw s="smiles"===C(this,Kn)?"".concat(In("smilesExt").name," and opening of ").concat(In("smiles").name):In(C(this,Kn)).name,Error("".concat(s," is not supported in standalone mode."));case 23:case"end":return e.stop()}}),e,this,[[8,17]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function $n(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var Jn=new WeakMap,Qn=new WeakMap,er=new WeakMap,tr=new WeakMap,nr=new WeakMap,rr=function(){function e(t,n,r,i,o){(0,l.Z)(this,e),$n(this,Jn,{writable:!0,value:void 0}),$n(this,Qn,{writable:!0,value:void 0}),$n(this,er,{writable:!0,value:void 0}),$n(this,tr,{writable:!0,value:void 0}),$n(this,nr,{writable:!0,value:void 0}),A(this,Jn,t),A(this,er,r),A(this,Qn,n),A(this,tr,i),A(this,nr,o)}return(0,c.Z)(e,[{key:"getStructureFromStructAsync",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C(this,Jn).serialize(t),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStructureFromStringAsync",value:function(e){return new Xn(C(this,Qn),C(this,er),C(this,tr),C(this,nr)).getStructureFromStringAsync(e)}}]),e}(),ir=["reactionRelayout","badHeaderRecover"];function or(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var ar,sr,ur,lr=new WeakMap,cr=function(){function e(t){(0,l.Z)(this,e),or(this,lr,{writable:!0,value:void 0}),A(this,lr,t)}return(0,c.Z)(e,[{key:"separateOptions",value:function(e){if(!e)return[{},{}];var t=e.reactionRelayout,n=e.badHeaderRecover,r=(0,N.Z)(e,ir),i={};return"boolean"===typeof t&&(i.reactionRelayout=t),"boolean"===typeof n&&(i.badHeaderRecover=n),[i,r]}},{key:"create",value:function(e,t){var n,r=this.separateOptions(t),i=(0,M.Z)(r,2),o=i[0],a=i[1];switch(e){case"ket":n=new jn(new at);break;case"mol":n=new zn(new fn(o));break;case"rxn":n=new Un(new fn(o));break;case"smiles":n=new rr(new xn,C(this,lr),new at,e,a);break;default:n=new Xn(C(this,lr),new at,e,a)}return n}}]),e}();function fr(e){var t=e.trim();try{if(JSON.parse(t))return"ket"}catch(i){}if(-1!==t.indexOf("$RXN"))return"rxn";if(-1!==t.indexOf("V3000"))return"molV3000";var n=t.match(/^(M {2}END|\$END MOL)$/m);if(n){var r=(n.index||0)+n[0].length;if(r===t.length||-1!==t.slice(r,r+20).search(/^\$(MOL|END CTAB)$/m))return"mol"}return"<"===t[0]&&-1!==t.indexOf("<molecule")?"cml":"InChI"===t.slice(0,5)?"inChI":-1===t.indexOf("\n")?"smiles":-1!==t.indexOf("<CDXML")?"cdxml":"mol"}D().el.translateAbs=function(e,t){this.delta=this.delta||new Y,this.delta.x+=e-0,this.delta.y+=t-0,this.transform("t"+this.delta.x.toString()+","+this.delta.y.toString())},D().st.translateAbs=function(e,t){this.forEach((function(n){n.translateAbs(e,t)}))},function(e){e.background="background",e.selectionPlate="selectionPlate",e.hovering="hovering",e.warnings="warnings",e.data="data",e.indices="indices"}(ar||(ar={})),function(e){e.LabelsOnly="LabelsOnly",e.BondsOnly="BondsOnly",e.LabelsAndBonds="LabelsAndBonds",e.Off="Off"}(sr||(sr={})),function(e){e.IUPAC="Iupac",e.Classic="Classic",e.On="On",e.Off="Off"}(ur||(ur={}));var hr=function(){function e(t){(0,l.Z)(this,e),this.type=t,this.paths=[],this.boxes=[],this.boundingBox=null,this.exts=[]}return(0,c.Z)(e,[{key:"add",value:function(e,t,n){this.paths.push(e),t&&(this.boxes.push(t),this.boundingBox=null==this.boundingBox?t:pe.union(this.boundingBox,t)),n&&this.exts.push(n)}},{key:"clear",value:function(){this.paths=[],this.boxes=[],this.exts=[],this.boundingBox=null}},{key:"translate",value:function(){if(arguments.length>2)throw new Error("One vector or two scalar arguments expected");if(1===arguments.length){var e=arguments.length<=0?void 0:arguments[0];this.translate(e.x,e.y)}else{for(var t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],r=new Y(t,n),i=0;i<this.paths.length;++i)this.paths[i].translateAbs(t,n);for(var o=0;o<this.boxes.length;++o)this.boxes[o]=this.boxes[o].translate(r);null!==this.boundingBox&&(this.boundingBox=this.boundingBox.translate(r))}}}]),e}(),dr=function(){function e(t){(0,l.Z)(this,e),(0,r.Z)(this,"hover",!1),(0,r.Z)(this,"hovering",null),(0,r.Z)(this,"selected",!1),(0,r.Z)(this,"selectionPlate",null),this.visel=new hr(t)}return(0,c.Z)(e,[{key:"getVBoxObj",value:function(e){var t=this.visel.boundingBox;return null===t?null:(e.options.offset&&(t=t.translate(e.options.offset.negated())),t.transform(fe.scaled2obj,e.options))}},{key:"setHover",value:function(e,t){if(e){var n="hovering"in this&&null!==this.hovering;if(n)if("set"===this.hovering.type){if(!this.hovering[0])return;n=!this.hovering[0].removed}else n=!this.hovering.removed;n?this.hovering.show():(t.paper.setStart(),this.drawHover(t),this.hovering=t.paper.setFinish())}else this.hovering&&this.hovering.hide();this.hover=e}},{key:"drawHover",value:function(e){throw new Error("ReObject.drawHover is not overridden.")}},{key:"makeSelectionPlate",value:function(e,t,n){throw new Error("ReObject.makeSelectionPlate is not overridden")}}]),e}();var pr={tfx:function(e){return parseFloat(e).toFixed(8)},relBox:function(e){return{x:e.x,y:e.y,width:e.width,height:e.height}},shiftRayBox:function(e,t,n){h()(!!e),h()(!!t),h()(!!n);var r=[n.p0,new Y(n.p1.x,n.p0.y),n.p1,new Y(n.p0.x,n.p1.y)].map((function(t){return t.sub(e)}));t=t.normalized();for(var i=r.map((function(e){return Y.cross(e,t)})),o=r.map((function(e){return Y.dot(e,t)})),a=-1,s=-1,u=0;u<4;++u)i[u]>0?(a<0||o[a]<o[u])&&(a=u):(s<0||o[s]<o[u])&&(s=u);if(s<0||a<0)return 0;var l=o[a]>o[s]?s:a,c=o[a]>o[s]?a:s;return o[l]+Math.abs(i[l])*(o[c]-o[l])/(Math.abs(i[l])+Math.abs(i[c]))},calcCoordinates:function(e,t,n){var r={pos1:null,pos2:null},i={x:t.x-e.x,y:t.y-e.y},o=(Math.pow(n,2)-i.x*i.x-i.y*i.y-Math.pow(n,2))/-2,a=i.x*i.x+i.y*i.y;if(0!==i.x){var s=-2*i.y*o,u=s*s-4*a*(o*o-n*n*i.x*i.x);u>0&&(r.pos1={x:0,y:0},r.pos2={x:0,y:0},r.pos1.y=(-s+Math.sqrt(u))/(2*a),r.pos2.y=(-s-Math.sqrt(u))/(2*a),r.pos1.x=(o-r.pos1.y*i.y)/i.x,r.pos2.x=(o-r.pos2.y*i.y)/i.x)}else r.pos1={x:0,y:0},r.pos2={x:0,y:0},r.pos1.y=o/i.y,r.pos2.y=o/i.y,r.pos1.x=-Math.sqrt(Math.pow(n,2)-Math.pow(o,2)/Math.pow(i.y,2)),r.pos2.x=Math.sqrt(Math.pow(n,2)-Math.pow(o,2)/Math.pow(i.y,2));return null!==r.pos1&&(r.pos1.x+=e.x,r.pos1.y+=e.y),null!==r.pos2&&(r.pos2.x+=e.x,r.pos2.y+=e.y),r}};function vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gr=pr.tfx;function yr(e,t){return"M"+gr(e.x)+","+gr(e.y)+"L"+gr(t.x)+","+gr(t.y)+"\t"}function br(e,t,n){for(var r=0,i=Y.dist(e,t),o=Y.diff(t,e).normalized(),a=!0,s="",u=0;r<i;){var l=n[u%n.length],c=r+Math.min(l,i-r);a&&(s+="M "+e.addScaled(o,r).coordStr()+" L "+e.addScaled(o,c).coordStr()),r+=l,a=!a,u++}return s}function xr(e,t){if(D().vml){var n=.16*t.height;e.translateAbs(0,n),t.y+=n}}var _r={recenterText:xr,arrow:function(e,t,n,r,i){switch(t.mode){case _e.OpenAngle:return function(e,t,n,r,i){var o=(0,M.Z)(t.pos,2),a=o[0];o[1];var s=5,u=7,l=a.x+n,c="M".concat(gr(a.x),",").concat(gr(a.y))+"L".concat(gr(l),",").concat(gr(a.y))+"L".concat(gr(l-u),",").concat(gr(a.y-s))+"M".concat(gr(l),",").concat(gr(a.y))+"L".concat(gr(l-u),", ").concat(gr(a.y+s)),f=z()(c).rotate(r,a.x,a.y).toString();return e.path(f).attr(i.lineattr)}(e,t,n,r,i);case _e.FilledTriangle:return function(e,t,n,r,i){var o=(0,M.Z)(t.pos,2),a=o[0];o[1];var s=10,u=5,l=a.x+n,c="M".concat(gr(a.x),",").concat(gr(a.y))+"L".concat(gr(l),",").concat(gr(a.y))+"L".concat(gr(l-s),",").concat(gr(a.y+u))+"L".concat(gr(l-s),",").concat(gr(a.y-u))+"L".concat(gr(l),",").concat(gr(a.y),"Z"),f=z()(c).rotate(r,a.x,a.y).toString();return e.path(f).attr(mr(mr({},i.lineattr),{},{fill:"#000"}))}(e,t,n,r,i);case _e.FilledBow:return function(e,t,n,r,i){var o=(0,M.Z)(t.pos,2),a=o[0];o[1];var s=10,u=5,l=4,c=a.x+n,f="M".concat(gr(a.x),",").concat(gr(a.y))+"L".concat(gr(c),",").concat(gr(a.y))+"L".concat(gr(c-s),",").concat(gr(a.y+u))+"L".concat(gr(c-s+l),",").concat(gr(a.y))+"L".concat(gr(c-s),",").concat(gr(a.y-u))+"L".concat(gr(c),",").concat(gr(a.y),"Z"),h=z()(f).rotate(r,a.x,a.y).toString();return e.path(h).attr(mr(mr({},i.lineattr),{},{fill:"#000"}))}(e,t,n,r,i);case _e.DashedOpenAngle:return function(e,t,n,r,i){var o=(0,M.Z)(t.pos,2),a=o[0];o[1];for(var s=10,u=5,l=3.5,c=[],f=a.x+n,h=0;h<n/l;h++)h%2?c.push("L".concat(gr(a.x+h*l),",").concat(gr(a.y))):c.push("M".concat(gr(a.x+h*l),",").concat(gr(a.y)));c.push("M".concat(gr(f),",").concat(gr(a.y))+"L".concat(gr(f-s),",").concat(gr(a.y+u))+"M".concat(gr(f),",").concat(gr(a.y))+"L".concat(gr(f-s),",").concat(gr(a.y-u)));var d=z()(c.join("")).rotate(r,a.x,a.y).toString();return e.path(d).attr(mr(mr({},i.lineattr),{},{fill:"#000"}))}(e,t,n,r,i);case _e.Failed:return function(e,t,n,r,i){var o=(0,M.Z)(t.pos,2),a=o[0];o[1];var s=10,u=5,l=4,c=8,f=a.x+n,h=f-(f-a.x)/2,d=[];d.push("M".concat(gr(a.x),",").concat(gr(a.y))+"L".concat(gr(f),",").concat(gr(a.y))+"L".concat(gr(f-s),",").concat(gr(a.y+u))+"L".concat(gr(f-s+l),",").concat(gr(a.y))+"L".concat(gr(f-s),",").concat(gr(a.y-u))+"L".concat(gr(f),",").concat(gr(a.y),"Z")),d.push("M".concat(gr(h+c),",").concat(gr(a.y+c))+"L".concat(gr(h-c),",").concat(gr(a.y-c))),d.push("M".concat(gr(h+c),",").concat(gr(a.y-c))+"L".concat(gr(h-c),",").concat(gr(a.y+c)));var p=z()(d.join("")).rotate(r,a.x,a.y).toString();return e.path(p).attr(mr(mr({},i.lineattr),{},{fill:"#000"}))}(e,t,n,r,i);case _e.BothEndsFilledTriangle:return function(e,t,n,r,i){var o=(0,M.Z)(t.pos,2),a=o[0];o[1];var s=10,u=5,l=a.x+n,c="M".concat(gr(a.x),",").concat(gr(a.y))+"L".concat(gr(l),",").concat(gr(a.y))+"L".concat(gr(l-s),",").concat(gr(a.y+u))+"L".concat(gr(l-s),",").concat(gr(a.y-u))+"L".concat(gr(l),",").concat(gr(a.y))+"M".concat(gr(a.x),",").concat(gr(a.y))+"L".concat(gr(a.x+s),",").concat(gr(a.y-u))+"L".concat(gr(a.x+s),",").concat(gr(a.y+u))+"L".concat(gr(a.x),",").concat(gr(a.y)),f=z()(c).rotate(r,a.x,a.y).toString();return e.path(f).attr(mr(mr({},i.lineattr),{},{fill:"#000"}))}(e,t,n,r,i);case _e.EquilibriumFilledHalfBow:return function(e,t,n,r,i){var o=(0,M.Z)(t.pos,2),a=o[0];o[1];var s=9,u=3.5,l=7,c=2,f=a.x+n,h=[];h.push("M".concat(gr(a.x),",").concat(gr(a.y-u))+"L".concat(gr(f),",").concat(gr(a.y-u))+"L".concat(gr(f-s),",").concat(gr(a.y-l))+"L".concat(gr(f-s+c),",").concat(gr(a.y-u),"Z")),h.push("M".concat(gr(f),",").concat(gr(a.y+u))+"L".concat(gr(a.x),",").concat(gr(a.y+u))+"L".concat(gr(a.x+s),",").concat(gr(a.y+l))+"L".concat(gr(a.x+s-c),",").concat(a.y+u,"Z"));var d=z()(h.join("")).rotate(r,a.x,a.y).toString();return e.path(d).attr(mr(mr({},i.lineattr),{},{fill:"#000"}))}(e,t,n,r,i);case _e.EquilibriumFilledTriangle:return function(e,t,n,r,i){var o=(0,M.Z)(t.pos,2),a=o[0];o[1];var s=9,u=3.5,l=7,c=a.x+n,f=[];f.push("M".concat(gr(a.x),",").concat(gr(a.y-u))+"L".concat(gr(c),",").concat(gr(a.y-u))+"L".concat(gr(c-s),",").concat(gr(a.y-l))+"L".concat(gr(c-s),",").concat(gr(a.y-u))+"L".concat(gr(c-s),",").concat(gr(a.y))+"L".concat(gr(c),",").concat(gr(a.y-u),"Z")),f.push("M".concat(gr(a.x),",").concat(gr(a.y+u))+"L".concat(gr(c),",").concat(gr(a.y+u))+"M".concat(gr(a.x),",").concat(gr(a.y+u))+"L".concat(gr(a.x+s),",").concat(gr(a.y+l))+"L".concat(gr(a.x+s),",").concat(a.y+u,"Z")+"L".concat(gr(a.x+s),",").concat(gr(a.y))+"L".concat(gr(a.x+s),",").concat(a.y+u,"Z"));var h=z()(f.join("")).rotate(r,a.x,a.y).toString();return e.path(h).attr(mr(mr({},i.lineattr),{},{fill:"#000"}))}(e,t,n,r,i);case _e.EquilibriumOpenAngle:return function(e,t,n,r,i){var o=(0,M.Z)(t.pos,2),a=o[0];o[1];var s=5,u=7,l=9,c=3.5,f=a.x+n,h=[];h.push("M".concat(gr(a.x),",").concat(gr(a.y-c))+"L".concat(gr(f),",").concat(gr(a.y-c))+"L".concat(gr(f-u),",").concat(gr(a.y-s-c))),h.push("M".concat(gr(a.x),",").concat(gr(a.y+c))+"L".concat(gr(f),",").concat(gr(a.y+c))+"M".concat(gr(a.x),",").concat(gr(a.y+c))+"L".concat(gr(a.x+l),",").concat(gr(a.y+c+s)));var d=z()(h.join("")).rotate(r,a.x,a.y).toString();return e.path(d).attr(i.lineattr)}(e,t,n,r,i);case _e.UnbalancedEquilibriumFilledHalfBow:return function(e,t,n,r,i){var o=(0,M.Z)(t.pos,2),a=o[0];o[1];var s=9,u=3.5,l=7,c=2,f=15,h=a.x+n,d=[];d.push("M".concat(gr(a.x),",").concat(gr(a.y-u))+"L".concat(gr(h),",").concat(gr(a.y-u))+"L".concat(gr(h-s),",").concat(gr(a.y-l))+"L".concat(gr(h-s+c),",").concat(gr(a.y-u),"Z")),d.push("M".concat(gr(a.x+f),",").concat(gr(a.y+u))+"L".concat(gr(h-f),",").concat(gr(a.y+u))+"M".concat(gr(a.x+f),",").concat(gr(a.y+u))+"L".concat(gr(a.x+s+f),",").concat(gr(a.y+l))+"L".concat(gr(a.x+s-c+f),",").concat(a.y+u,"Z"));var p=z()(d.join("")).rotate(r,a.x,a.y).toString();return e.path(p).attr(mr(mr({},i.lineattr),{},{fill:"#000"}))}(e,t,n,r,i);case _e.UnbalancedEquilibriumOpenHalfAngle:return function(e,t,n,r,i){var o=(0,M.Z)(t.pos,2),a=o[0];o[1];var s=5,u=7,l=9,c=3.5,f=15,h=a.x+n,d=[];d.push("M".concat(gr(a.x),",").concat(gr(a.y-c))+"L".concat(gr(h),",").concat(gr(a.y-c))+"L".concat(gr(h-u),",").concat(gr(a.y-s-c))),d.push("M".concat(gr(a.x+f),",").concat(gr(a.y+c))+"L".concat(gr(h-f),",").concat(gr(a.y+c))+"M".concat(gr(a.x+f),",").concat(gr(a.y+c))+"L".concat(gr(a.x+l+f),",").concat(gr(a.y+c+s)));var p=z()(d.join("")).rotate(r,a.x,a.y).toString();return e.path(p).attr(i.lineattr)}(e,t,n,r,i);case _e.UnbalancedEquilibriumLargeFilledHalfBow:return function(e,t,n,r,i){var o=(0,M.Z)(t.pos,2),a=o[0];o[1];var s=9,u=3.5,l=10,c=2,f=15,h=a.x+n,d=[];d.push("M".concat(gr(a.x),",").concat(gr(a.y-u))+"L".concat(gr(h),",").concat(gr(a.y-u))+"L".concat(gr(h-s),",").concat(gr(a.y-l))+"L".concat(gr(h-s+c),",").concat(gr(a.y-u),"Z")),d.push("M".concat(gr(a.x+f),",").concat(gr(a.y+u))+"L".concat(gr(h-f),",").concat(gr(a.y+u))+"M".concat(gr(a.x+f),",").concat(gr(a.y+u))+"L".concat(gr(a.x+s+f),",").concat(gr(a.y+l))+"L".concat(gr(a.x+s-c+f),",").concat(a.y+u,"Z"));var p=z()(d.join("")).rotate(r,a.x,a.y).toString();return e.path(p).attr(mr(mr({},i.lineattr),{},{fill:"#000"}))}(e,t,n,r,i);case _e.UnbalancedEquilibriumFilledHalfTriangle:return function(e,t,n,r,i){var o=(0,M.Z)(t.pos,2),a=o[0];o[1];var s=9,u=3.5,l=7,c=15,f=a.x+n,h=[];h.push("M".concat(gr(a.x),",").concat(gr(a.y-u))+"L".concat(gr(f),",").concat(gr(a.y-u))+"L".concat(gr(f-s),",").concat(gr(a.y-l))+"L".concat(gr(f-s),",").concat(gr(a.y-u),"Z")),h.push("M".concat(gr(a.x+c),",").concat(gr(a.y+u))+"L".concat(gr(f-c),",").concat(gr(a.y+u))+"M".concat(gr(a.x+c),",").concat(gr(a.y+u))+"L".concat(gr(a.x+s+c),",").concat(gr(a.y+l))+"L".concat(gr(a.x+s+c),",").concat(a.y+u,"Z"));var d=z()(h.join("")).rotate(r,a.x,a.y).toString();return e.path(d).attr(mr(mr({},i.lineattr),{},{fill:"#000"}))}(e,t,n,r,i);case _e.EllipticalArcFilledBow:return function(e,t,n,r,i){var o=(0,M.Z)(t.pos,2),a=o[0];o[1];var s=t.height,u=s>=0?1:-1,l=10*u,c=5*u,f=4*u,h=a.x+n,d="M".concat(gr(a.x),",").concat(gr(a.y))+"A".concat(n/2,",").concat(s,",",0,",",0,",").concat(u>0?1:0,",").concat(gr(h),",").concat(gr(a.y))+"L".concat(gr(h-c),",").concat(gr(a.y-l))+"l".concat(gr(c),",").concat(gr(f))+"l".concat(gr(c),",").concat(gr(-f))+"l".concat(gr(-c),",").concat(l),p=z()(d).rotate(r,a.x,a.y).toString();return e.path(p).attr(mr({},i.lineattr))}(e,t,n,r,i);case _e.EllipticalArcFilledTriangle:return function(e,t,n,r,i){var o=(0,M.Z)(t.pos,2),a=o[0];o[1];var s=t.height,u=s>=0?1:-1,l=10*u,c=5*u,f=a.x+n,h="M".concat(gr(a.x),",").concat(gr(a.y))+"A".concat(n/2,",").concat(s,",",0,",",0,",").concat(u>0?1:0,",").concat(gr(f),",").concat(gr(a.y))+"L".concat(gr(f-c),",").concat(gr(a.y-l))+"l".concat(gr(l),",").concat(gr(0))+"l".concat(gr(-c),",").concat(gr(l)),d=z()(h).rotate(r,a.x,a.y).toString();return e.path(d).attr(mr({},i.lineattr))}(e,t,n,r,i);case _e.EllipticalArcOpenAngle:return function(e,t,n,r,i){var o=(0,M.Z)(t.pos,2),a=o[0];o[1];var s=t.height,u=s>=0?1:-1,l=5*u,c=7*u,f=a.x+n,h="M".concat(gr(a.x),",").concat(gr(a.y))+"A".concat(n/2,",").concat(s,",",0,",",0,",").concat(u>0?1:0,",").concat(gr(f),",").concat(gr(a.y))+"L".concat(gr(f-l),",").concat(gr(a.y-c))+"M".concat(gr(f),",").concat(gr(a.y))+"L".concat(gr(f+l),", ").concat(gr(a.y-c)),d=z()(h).rotate(r,a.x,a.y).toString();return e.path(d).attr(i.lineattr)}(e,t,n,r,i);case _e.EllipticalArcOpenHalfAngle:return function(e,t,n,r,i){var o=(0,M.Z)(t.pos,2),a=o[0];o[1];var s=t.height,u=s>=0?1:-1,l=5*u,c=7*u,f=a.x+n,h="M".concat(gr(a.x),",").concat(gr(a.y))+"A".concat(n/2,",").concat(s,",",0,",",0,",").concat(u>0?1:0,", ").concat(gr(f),",").concat(gr(a.y))+"L".concat(gr(f+l),", ").concat(gr(a.y-c)),d=z()(h).rotate(r,a.x,a.y).toString();return e.path(d).attr(i.lineattr)}(e,t,n,r,i)}},plus:function(e,t,n){var r=n.scale/5;return e.path("M{0},{4}L{0},{5}M{2},{1}L{3},{1}",gr(t.x),gr(t.y),gr(t.x-r),gr(t.x+r),gr(t.y-r),gr(t.y+r)).attr(n.lineattr)},aromaticBondPaths:function(e,t,n,r,i,o){return[o&&1&i?br(e,n,o):yr(e,n),o&&2&i?br(t,r,o):yr(t,r)]},bondSingle:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#000",o=t.p,a=n.p;return e.path(yr(o,a)).attr(r.lineattr).attr({fill:i,stroke:i})},bondSingleUp:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#000";return e.path("M{0},{1}L{2},{3}L{4},{5}Z",gr(t.x),gr(t.y),gr(n.x),gr(n.y),gr(r.x),gr(r.y)).attr(i.lineattr).attr({fill:o,stroke:o})},bondSingleStereoBold:function(e,t,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"#000",s=e.path("M{0},{1}L{2},{3}L{4},{5}L{6},{7}Z",gr(t.x),gr(t.y),gr(n.x),gr(n.y),gr(r.x),gr(r.y),gr(i.x),gr(i.y)).attr(o.lineattr);return s.attr({stroke:a,fill:a}),s},bondDoubleStereoBold:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#000";return e.set([t,e.path("M{0},{1}L{2},{3}",gr(n.x),gr(n.y),gr(r.x),gr(r.y)).attr(i.lineattr).attr({stroke:o,fill:o})])},bondSingleDown:function(e,t,n,r,i,o){for(var a,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"#000",u=t.p,l=t.norm,c=.7*o.stereoBond,f="",h=0;h<r;++h)f+=yr((a=u.addScaled(n,i*h)).addScaled(l,c*(h+.5)/(r-.5)),a.addScaled(l,-c*(h+.5)/(r-.5)));return e.path(f).attr(o.lineattr).attr({fill:s,stroke:s})},bondSingleEither:function(e,t,n,r,i,o){for(var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"#000",s=t.p,u=t.norm,l=.7*o.stereoBond,c="M"+gr(s.x)+","+gr(s.y),f=s,h=0;h<r;++h)f=s.addScaled(n,i*(h+.5)).addScaled(u,(1&h?-1:1)*l*(h+.5)/(r-.5)),c+="L"+gr(f.x)+","+gr(f.y);return e.path(c).attr(o.lineattr).attr({fill:a,stroke:a})},bondDouble:function(e,t,n,r,i,o,a){return e.path(o?"M{0},{1}L{6},{7}M{4},{5}L{2},{3}":"M{0},{1}L{2},{3}M{4},{5}L{6},{7}",gr(t.x),gr(t.y),gr(r.x),gr(r.y),gr(n.x),gr(n.y),gr(i.x),gr(i.y)).attr(a.lineattr)},bondSingleOrDouble:function(e,t,n,r,i){for(var o,a=t.p,s=n.p,u=t.norm,l=i.bondSpace/2,c="",f=a,h=1;h<=r;++h)o=Y.lc2(a,(r-h)/r,s,h/r),1&h?c+=yr(f,o):(c+=yr(f.addScaled(u,l),o.addScaled(u,l)),c+=yr(f.addScaled(u,-l),o.addScaled(u,-l))),f=o;return e.path(c).attr(i.lineattr)},bondTriple:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#000",o=t.p,a=n.p,s=t.norm,u=o.addScaled(s,r.bondSpace),l=a.addScaled(s,r.bondSpace),c=o.addScaled(s,-r.bondSpace),f=a.addScaled(s,-r.bondSpace);return e.path(yr(o,a)+yr(u,l)+yr(c,f)).attr(r.lineattr).attr({fill:i,stroke:i})},bondAromatic:function(e,t,n,r){var i=e.path(t[0]).attr(r.lineattr),o=e.path(t[1]).attr(r.lineattr);return void 0!==n&&null!==n&&(n>0?i:o).attr({"stroke-dasharray":"- "}),e.set([i,o])},bondAny:function(e,t,n,r){var i=t.p,o=n.p;return e.path(yr(i,o)).attr(r.lineattr).attr({"stroke-dasharray":"- "})},bondHydrogen:function(e,t,n,r){var i=t.p,o=n.p;return e.path(yr(i,o)).attr(r.lineattr).attr({"stroke-dasharray":".","stroke-linecap":"square"})},bondDative:function(e,t,n,r){var i=t.p,o=n.p;return e.path(yr(i,o)).attr(r.lineattr).attr({"arrow-end":"block-midium-long"})},reactingCenter:function(e,t,n){for(var r="",i=0;i<t.length/2;++i)r+=yr(t[2*i],t[2*i+1]);return e.path(r).attr(n.lineattr)},topologyMark:function(e,t,n,r){var i=e.text(t.x,t.y,n).attr({font:r.font,"font-size":r.fontszsub,fill:"#000"}),o=pr.relBox(i.getBBox());return xr(i,o),i},radicalCap:function(e,t,n){var r=.9*n.lineWidth,i=r,o=2*r;return e.path("M{0},{1}L{2},{3}L{4},{5}",gr(t.x-i),gr(t.y+o),gr(t.x),gr(t.y),gr(t.x+i),gr(t.y+o)).attr({stroke:"#000","stroke-width":.7*n.lineWidth,"stroke-linecap":"square","stroke-linejoin":"miter"})},radicalBullet:function(e,t,n){return e.circle(gr(t.x),gr(t.y),n.lineWidth).attr({stroke:null,fill:"#000"})},bracket:function(e,t,n,r,i,o,a){i=i||.25,o=o||1;var s=r.addScaled(n,-.5*o),u=r.addScaled(n,.5*o),l=s.addScaled(t,-i),c=u.addScaled(t,-i);return e.path("M{0},{1}L{2},{3}L{4},{5}L{6},{7}",gr(l.x),gr(l.y),gr(s.x),gr(s.y),gr(u.x),gr(u.y),gr(c.x),gr(c.y)).attr(a.sgroupBracketStyle)},selectionRectangle:function(e,t,n,r){return e.rect(gr(Math.min(t.x,n.x)),gr(Math.min(t.y,n.y)),gr(Math.abs(n.x-t.x)),gr(Math.abs(n.y-t.y))).attr(r.lassoStyle)},selectionPolygon:function(e,t,n){for(var r=t[t.length-1],i="M"+gr(r.x)+","+gr(r.y),o=0;o<t.length;++o)i+="L"+gr(t[o].x)+","+gr(t[o].y);return e.path(i).attr(n.lassoStyle)},selectionLine:function(e,t,n,r){return e.path(yr(t,n)).attr(r.lassoStyle)},ellipse:function(e,t,n){var r=Y.diff(t[1],t[0]),i=r.x/2,o=r.y/2;return e.ellipse(t[0].x+i,t[0].y+o,Math.abs(i),Math.abs(o))},rectangle:function(e,t,n){return e.rect(gr(Math.min(t[0].x,t[1].x)),gr(Math.min(t[0].y,t[1].y)),gr(Math.abs(t[1].x-t[0].x)),gr(Math.abs(t[1].y-t[0].y)))},rectangleArrowHighlightAndSelection:function(e,t,n,r,i){var o=t.pos,a=t.height,s=(0,M.Z)(o,2),u=s[0];s[1];var l=u.x+n,c=a||8,f="M".concat(gr(u.x-5),",").concat(gr(u.y))+"L".concat(gr(u.x-5),",").concat(gr(u.y-c))+"L".concat(gr(l+5),",").concat(gr(u.y-c))+"L".concat(gr(l+5),",").concat(gr(u.y+(!a&&c)))+"L".concat(gr(u.x-5),",").concat(gr(u.y+(!a&&c)),"Z");return z()(f).rotate(r,u.x,u.y).toString()},polyline:function(e,t,n){for(var r=["M",t[0].x,t[0].y],i=1;i<t.length;i++)r.push("L",t[i].x,t[i].y);return e.path(r)},line:function(e,t,n){var r=["M",t[0].x,t[0].y];return r.push("L",t[1].x,t[1].y),e.path(r)}};function wr(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Sr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sr(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Er(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var kr;!function(e){e.Off="off",e.Hetero="Hetero",e.Terminal="Terminal",e.TerminalAndHetero="Terminal and Hetero",e.On="on"}(kr||(kr={}));var Or=function(e){p(n,e);var t=Er(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,"atom")).a=e,r.showLabel=!1,r.hydrogenOnTheLeft=!1,r.color="#000000",r.component=-1,r}return(0,c.Z)(n,[{key:"getVBoxObj",value:function(e){return this.visel.boundingBox?dr.prototype.getVBoxObj.call(this,e):new pe(this.a.pp,this.a.pp)}},{key:"drawHover",value:function(e){var t=this.makeHoverPlate(e);return e.ctab.addReObjectPath(ar.hovering,this.visel,t),t}},{key:"makeHoverPlate",value:function(e){var t=e.paper,n=e.options,r=fe.obj2scaled(this.a.pp,n),i=this.a,o=e.ctab.sgroups,a=e.ctab.molecule.functionalGroups;return Se.isAtomInContractedFunctionalGroup(i,o,a,!0)?null:t.circle(r.x,r.y,n.atomSelectionPlateRadius).attr(n.hoverStyle)}},{key:"makeSelectionPlate",value:function(e,t,n){var r=this.a,i=e.render.ctab.sgroups,o=e.render.ctab.molecule.functionalGroups;if(Se.isAtomInContractedFunctionalGroup(r,i,o,!0))return null;var a=fe.obj2scaled(this.a.pp,e.render.options);return t.circle(a.x,a.y,n.atomSelectionPlateRadius).attr(n.selectionStyle)}},{key:"show",value:function(e,t,n){var r,i=e.molecule.atoms.get(t),o=e.molecule.sgroups,a=e.molecule.functionalGroups,s=e.render,u=fe.obj2scaled(this.a.pp,s.options);if(Se.isAtomInContractedFunctionalGroup(i,o,a,!1)){if(Se.isFirstAtomInFunctionalGroup(o,t)){var l,c,f=wr(o.values());try{for(f.s();!(c=f.n()).done;){var h=c.value;t===h.atoms[0]&&(l=h.data.name)}}catch(te){f.e(te)}finally{f.f()}var d=s.paper.text(u.x,u.y,l).attr({"font-weight":700,"font-size":14});e.addReObjectPath(ar.data,this.visel,d,u,!0)}}else{var p,v,m,g,y,b;this.hydrogenOnTheLeft=function(e,t){if(0===t.a.neighbors.length){var n=H(t.a.label);return!n||Boolean(n.leftH)}var r=1,i=1,o=0,a=0;return t.a.neighbors.forEach((function(t){var n=e.halfBonds.get(t).dir;n.x<=0?(r=Math.min(r,Math.abs(n.y)),o++):(i=Math.min(i,Math.abs(n.y)),a++)})),r<.51||i<.51?i<r:a>o}(e.molecule,this),this.showLabel=function(e,t,n){var r=t.showHydrogenLabels!==kr.Off&&t.showHydrogenLabels!==kr.Hetero;if(0===n.a.neighbors.length||n.a.neighbors.length<2&&r||t.carbonExplicitly||n.a.alias||0!==n.a.isotope||0!==n.a.radical||0!==n.a.charge||n.a.explicitValence>=0||null!==n.a.atomList||null!==n.a.rglabel||n.a.badConn&&t.showValenceWarnings||"c"!==n.a.label.toLowerCase())return!0;if(2===n.a.neighbors.length){var i=n.a.neighbors[0],o=n.a.neighbors[1],a=e.molecule.halfBonds.get(i),s=e.molecule.halfBonds.get(o),u=e.bonds.get(a.bid),l=e.bonds.get(s.bid);if(u.b.type===l.b.type&&u.b.stereo===oe.PATTERN.STEREO.NONE&&l.b.stereo===oe.PATTERN.STEREO.NONE&&Math.abs(Y.cross(a.dir,s.dir))<.2)return!0}return!1}(e,s.options,this),this.color="black";var x=null;if(this.showLabel&&(b=function(e,t,n,r){var i={};i.text=function(e){if(null!==e.atomList)return e.atomList.label();if(e.pseudo)return e.pseudo;if(e.alias)return e.alias;if("R#"===e.label&&null!==e.rglabel){for(var t="",n=0;n<32;n++)e.rglabel&1<<n&&(t+="R"+(n+1).toString());return t}return e.label}(e.a),""===i.text&&(i="R#");if(i.text===e.a.label){var o=H(i.text);r.atomColoring&&o&&(e.color=V[i.text]||"#000")}i.path=t.text(n.x,n.y,i.text).attr({font:r.font,"font-size":r.fontsz,fill:e.color,"font-style":e.a.pseudo?"italic":""}),i.rbb=pr.relBox(i.path.getBBox()),_r.recenterText(i.path,i.rbb),null!==e.a.atomList&&Cr(i.path,i.rbb,(e.hydrogenOnTheLeft?-1:1)*(i.rbb.width-i.rbb.height)/2,0);return e.label=i,i}(this,s.paper,u,n),p=.5*n.lineWidth,v=b.rbb.width/2*(n.zoom>1?1:n.zoom),m=-b.rbb.width/2*(n.zoom>1?1:n.zoom),g=Math.floor(this.a.implicitH),y="H"===b.text,e.addReObjectPath(ar.data,this.visel,b.path,u,!0)),n.showAtomIds){(x={}).text=t.toString();var _=this.hydrogenOnTheLeft?Y.lc(u,1,new Y({x:-2,y:0,z:0}),6):Y.lc(u,1,new Y({x:2,y:0,z:0}),6);this.showLabel&&(_=Y.lc(_,1,new Y({x:1,y:-3,z:0}),6)),x.path=s.paper.text(_.x,_.y,x.text).attr({font:n.font,"font-size":n.fontszsub,fill:"#070"}),x.rbb=pr.relBox(x.path.getBBox()),_r.recenterText(x.path,x.rbb),e.addReObjectPath(ar.indices,this.visel,x.path,u)}if(this.setHover(this.hover,s),this.showLabel&&!this.a.pseudo){var w=null;if(y&&g>0&&(w=function(e,t,n,r){var i=fe.obj2scaled(e.a.pp,t.options),o=t.options,a=.5*o.lineWidth,s={};return s.text=(n+1).toString(),s.path=t.paper.text(i.x,i.y,s.text).attr({font:o.font,"font-size":o.fontszsub,fill:e.color}),s.rbb=pr.relBox(s.path.getBBox()),_r.recenterText(s.path,s.rbb),Cr(s.path,s.rbb,r+.5*s.rbb.width+a,.2*e.label.rbb.height),s}(this,s,g,v),v+=w.rbb.width+p,e.addReObjectPath(ar.data,this.visel,w.path,u,!0)),0!==this.a.radical){var S=function(e,t){var n,r=fe.obj2scaled(e.a.pp,t.options),i=t.options,o=t.paper,a={};switch(e.a.radical){case 1:a.path=o.set(),n=1.6*i.lineWidth,a.path.push(_r.radicalBullet(o,r.add(new Y(-n,0)),i),_r.radicalBullet(o,r.add(new Y(n,0)),i)),a.path.attr("fill",e.color);break;case 2:a.path=o.set(),a.path.push(_r.radicalBullet(o,r,i)),a.path.attr("fill",e.color);break;case 3:a.path=o.set(),n=1.6*i.lineWidth,a.path.push(_r.radicalCap(o,r.add(new Y(-n,0)),i),_r.radicalCap(o,r.add(new Y(n,0)),i)),a.path.attr("stroke",e.color)}a.rbb=pr.relBox(a.path.getBBox());var s=-.5*(e.label.rbb.height+a.rbb.height);3===e.a.radical&&(s-=i.lineWidth/2);return Cr(a.path,a.rbb,0,s),a}(this,s);e.addReObjectPath(ar.data,this.visel,S.path,u,!0)}if(0!==this.a.isotope){var E=function(e,t,n){var r=fe.obj2scaled(e.a.pp,t.options),i=t.options,o=.5*i.lineWidth,a={};return a.text=e.a.isotope.toString(),a.path=t.paper.text(r.x,r.y,a.text).attr({font:i.font,"font-size":i.fontszsub,fill:e.color}),a.rbb=pr.relBox(a.path.getBBox()),_r.recenterText(a.path,a.rbb),Cr(a.path,a.rbb,n-.5*a.rbb.width-o,-.3*e.label.rbb.height),a}(this,s,m);m-=E.rbb.width+p,e.addReObjectPath(ar.data,this.visel,E.path,u,!0)}if(!y&&!this.a.alias&&g>0&&function(e,t){return e===kr.On||e===kr.Terminal&&t.a.neighbors.length<2||e===kr.Hetero&&"c"!==t.label.text.toLowerCase()||e===kr.TerminalAndHetero&&(t.a.neighbors.length<2||"c"!==t.label.text.toLowerCase())}(n.showHydrogenLabels,this)){var k=function(e,t,n,r){var i=r.hydroIndex,o=e.hydrogenOnTheLeft,a=fe.obj2scaled(e.a.pp,t.options),s=t.options,u=.5*s.lineWidth,l=r.hydrogen;l.text="H",l.path=t.paper.text(a.x,a.y,l.text).attr({font:s.font,"font-size":s.fontsz,fill:e.color}),l.rbb=pr.relBox(l.path.getBBox()),_r.recenterText(l.path,l.rbb),o||(Cr(l.path,l.rbb,r.rightMargin+.5*l.rbb.width+u,0),r.rightMargin+=l.rbb.width+u);n>1&&((i={}).text=n.toString(),i.path=t.paper.text(a.x,a.y,i.text).attr({font:s.font,"font-size":s.fontszsub,fill:e.color}),i.rbb=pr.relBox(i.path.getBBox()),_r.recenterText(i.path,i.rbb),o||(Cr(i.path,i.rbb,r.rightMargin+.5*i.rbb.width*(s.zoom>1?1:s.zoom)+u,.2*e.label.rbb.height),r.rightMargin+=i.rbb.width+u));o&&(null!=i&&(Cr(i.path,i.rbb,r.leftMargin-.5*i.rbb.width-u,.2*e.label.rbb.height),r.leftMargin-=i.rbb.width+u),Cr(l.path,l.rbb,r.leftMargin-.5*l.rbb.width*(n>1&&s.zoom<1?s.zoom:1)-u,0),r.leftMargin-=l.rbb.width+u);return Object.assign(r,{hydrogen:l,hydroIndex:i})}(this,s,g,{hydrogen:{},hydroIndex:w,rightMargin:v,leftMargin:m}),O=k.hydrogen;w=k.hydroIndex,v=k.rightMargin,m=k.leftMargin,e.addReObjectPath(ar.data,this.visel,O.path,u,!0),null!=w&&e.addReObjectPath(ar.data,this.visel,w.path,u,!0)}if(0!==this.a.charge&&n.showCharge){var A=function(e,t,n){var r=fe.obj2scaled(e.a.pp,t.options),i=t.options,o=.5*i.lineWidth,a={text:""},s=Math.abs(e.a.charge);1!==s&&(a.text=s.toString());e.a.charge<0?a.text+="\u2013":a.text+="+";return a.path=t.paper.text(r.x,r.y,a.text).attr({font:i.font,"font-size":i.fontszsub,fill:e.color}),a.rbb=pr.relBox(a.path.getBBox()),_r.recenterText(a.path,a.rbb),Cr(a.path,a.rbb,n+.5*a.rbb.width+o,-.3*e.label.rbb.height),a}(this,s,v);v+=A.rbb.width+p,e.addReObjectPath(ar.data,this.visel,A.path,u,!0)}if(this.a.explicitValence>=0&&n.showValence){var C=function(e,t,n){var r={0:"0",1:"I",2:"II",3:"III",4:"IV",5:"V",6:"VI",7:"VII",8:"VIII",9:"IX",10:"X",11:"XI",12:"XII",13:"XIII",14:"XIV"},i=fe.obj2scaled(e.a.pp,t.options),o=t.options,a=.5*o.lineWidth,s={};if(s.text=r[e.a.explicitValence],!s.text)throw new Error("invalid valence "+e.a.explicitValence.toString());return s.text="("+s.text+")",s.path=t.paper.text(i.x,i.y,s.text).attr({font:o.font,"font-size":o.fontszsub,fill:e.color}),s.rbb=pr.relBox(s.path.getBBox()),_r.recenterText(s.path,s.rbb),Cr(s.path,s.rbb,n+.5*s.rbb.width+a,-.3*e.label.rbb.height),s}(this,s,v);v+=C.rbb.width+p,e.addReObjectPath(ar.data,this.visel,C.path,u,!0)}if(this.a.badConn&&n.showValenceWarnings){var M=function(e,t,n,r){var i=fe.obj2scaled(e.a.pp,t.options),o=.5*t.options.lineWidth,a=pr.tfx,s={},u=i.y+e.label.rbb.height/2+o;return s.path=t.paper.path("M{0},{1}L{2},{3}",a(i.x+n),a(u),a(i.x+r),a(u)).attr(t.options.lineattr).attr({stroke:"#F00"}),s.rbb=pr.relBox(s.path.getBBox()),s}(this,s,m,v);e.addReObjectPath(ar.warnings,this.visel,M.path,u,!0)}x&&Cr(x.path,x.rbb,-.5*b.rbb.width-.5*x.rbb.width-p,.3*b.rbb.height)}if(this.a.attpnt)!function(e,t,n,r){var i,o,a="\u2217",s=fe.obj2scaled(e.a.pp,t.options),u=t.options,l=pr.tfx;for(i=0;i<4;++i){var c="";if(e.a.attpnt&1<<i){for(c.length>0&&(c+=" "),c+=a,o=0;o<(0===i?0:i+1);++o)c+="'";var f=new Y(s),h=s.addScaled(n,.7*u.scale),d=t.paper.text(h.x,h.y,c).attr({font:u.font,"font-size":u.fontsz,fill:e.color}),p=pr.relBox(d.getBBox());_r.recenterText(d,p);var v=n.negated();h=h.addScaled(v,pr.shiftRayBox(h,v,pe.fromRelBox(p))+u.lineWidth/2),f=Tr(e,f,n,u.lineWidth);var m=n.rotateSC(1,0),g=h.addScaled(m,.05*u.scale).addScaled(v,.09*u.scale),y=h.addScaled(m,-.05*u.scale).addScaled(v,.09*u.scale),b=t.paper.set();b.push(d,t.paper.path("M{0},{1}L{2},{3}M{4},{5}L{2},{3}L{6},{7}",l(f.x),l(f.y),l(h.x),l(h.y),l(g.x),l(g.y),l(y.x),l(y.y)).attr(t.options.lineattr).attr({"stroke-width":u.lineWidth/2})),r(ar.indices,e.visel,b,s),n=n.rotate(Math.PI/6)}}}(this,s,Mr(this,e.molecule),e.addReObjectPath.bind(e));var T=this.a.stereoLabel,P=function(e){var t="";e.a.aam>0&&(t+=e.a.aam);if(e.a.invRet>0)if(t.length>0&&(t+=","),1===e.a.invRet)t+="Inv";else{if(2!==e.a.invRet)throw new Error("Invalid value for the invert/retain flag");t+="Ret"}if(e.a.exactChangeFlag>0){if(t.length>0&&(t+=","),1!==e.a.exactChangeFlag)throw new Error("Invalid value for the exact change flag");t+="ext"}return t}(this),R=this.a.pseudo?"":function(e){var t="";if(0!==e.a.ringBondCount)if(e.a.ringBondCount>0)t+="rb"+e.a.ringBondCount.toString();else if(-1===e.a.ringBondCount)t+="rb0";else{if(-2!==e.a.ringBondCount)throw new Error("Ring bond count invalid");t+="rb*"}if(0!==e.a.substitutionCount)if(t.length>0&&(t+=","),e.a.substitutionCount>0)t+="s"+e.a.substitutionCount.toString();else if(-1===e.a.substitutionCount)t+="s0";else{if(-2!==e.a.substitutionCount)throw new Error("Substitution count invalid");t+="s*"}if(e.a.unsaturatedAtom>0){if(t.length>0&&(t+=","),1!==e.a.unsaturatedAtom)throw new Error("Unsaturated atom invalid value");t+="u"}e.a.hCount>0&&(t.length>0&&(t+=","),t+="H"+(e.a.hCount-1).toString());return t}(this),I=Number(null===(r=e.atoms.get(t))||void 0===r?void 0:r.a.fragment),L=e.molecule.frags.get(I),N=(function(e,t,n){if(!e)return!1;var r=e.match(/\D+/g)[0];switch(t){case ur.Off:return!1;case ur.On:return!0;case ur.Classic:return!(n!==ie.Mixed&&r!==Q.Or);case ur.IUPAC:return!(n!==ie.Mixed||r===Q.Abs);default:return!0}}(T,n.stereoLabelStyle,null===L||void 0===L?void 0:L.enhancedStereoFlag)?"".concat(T,"\n"):"")+(R.length>0?"".concat(R,"\n"):"")+(P.length>0?".".concat(P,"."):"");if(N.length>0){var j=H(this.a.label),D=s.paper.text(u.x,u.y,N).attr({font:n.font,"font-size":n.fontszsub,fill:n.atomColoring&&j?V[this.a.label]:"#000"});if(T){var B=function(e,t){if(!t||e.colorStereogenicCenters===sr.Off||e.colorStereogenicCenters===sr.BondsOnly)return"#000";return Ar(e,t)}(s.options,T);D.node.childNodes[0].setAttribute("fill",B);var z=function(e,t){var n=t.match(/\D+/g)[0],r=+t.replace(n,"");if(!e.autoFadeOfStereoLabels||n===Q.Abs||e.colorStereogenicCenters===sr.Off||e.colorStereogenicCenters===sr.BondsOnly)return 1;return Math.max(1-(r-1)/10,.3)}(s.options,T);D.node.childNodes[0].setAttribute("fill-opacity",z)}var F=pr.relBox(D.getBBox());_r.recenterText(D,F);for(var U=this.visel,Z=3,G=Mr(this,e.molecule),W=0;W<U.exts.length;++W)Z=Math.max(Z,pr.shiftRayBox(u,G,U.exts[W].translate(u)));Z+=pr.shiftRayBox(u,G.negated(),pe.fromRelBox(F)),Cr(D,F,(G=G.scaled(8+Z)).x,G.y),e.addReObjectPath(ar.data,this.visel,D,u,!0)}var q=e.molecule.highlights,K=!1,X="";if(q.forEach((function(e){var n,r=null===(n=e.atoms)||void 0===n?void 0:n.includes(t);K=K||r,r&&(X=e.color)})),K){var $={fill:X,stroke:"none"},J=fe.obj2scaled(this.a.pp,e.render.options),ee=s.paper.circle(J.x,J.y,.8*n.atomSelectionPlateRadius).attr($);e.addReObjectPath(ar.hovering,this.visel,ee)}}}}],[{key:"isSelectable",value:function(){return!0}}]),n}(dr);function Ar(e,t){switch(t.match(/\D+/g)[0]){case Q.And:return e.colorOfAndCenters;case Q.Or:return e.colorOfOrCenters;case Q.Abs:return e.colorOfAbsoluteCenters;default:return"#000"}}function Cr(e,t,n,r){e.translateAbs(n,r),t.x+=n,t.y+=r}function Mr(e,t){var n=[];e.a.neighbors.forEach((function(e){var r=t.halfBonds.get(e);r&&n.push(r.ang)})),n=n.sort((function(e,t){return e-t}));for(var r=[],i=0;i<n.length-1;++i)r.push(n[(i+1)%n.length]-n[i]);r.push(n[0]-n[n.length-1]+2*Math.PI);for(var o=0,a=-Math.PI/2,s=0;s<n.length;++s)r[s]>o&&(o=r[s],a=n[s]+r[s]/2);return new Y(Math.cos(a),Math.sin(a))}function Tr(e,t,n,r){for(var i=0,o=e.visel,a=0;a<o.exts.length;++a){var s=o.exts[a].translate(t);i=Math.max(i,pr.shiftRayBox(t,n,s))}return i>0&&(t=t.addScaled(n,i+r)),t}function Pr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Rr=function(e){p(n,e);var t=Pr(n);function n(e){var i;return(0,l.Z)(this,n),i=t.call(this,"bond"),(0,r.Z)(m(i),"neihbid1",-1),(0,r.Z)(m(i),"neihbid2",-1),i.b=e,i.doubleBondShift=0,i}return(0,c.Z)(n,[{key:"drawHover",value:function(e){var t=this.makeHoverPlate(e);return e.ctab.addReObjectPath(ar.hovering,this.visel,t),t}},{key:"makeHoverPlate",value:function(e){var t=e.options;Vr(this,e.ctab,t);var n=this.b,r=e.ctab.sgroups,i=e.ctab.molecule.functionalGroups;if(Se.isBondInContractedFunctionalGroup(n,r,i,!0))return null;var o=fe.obj2scaled(this.b.center,t);return e.paper.circle(o.x,o.y,.8*t.atomSelectionPlateRadius).attr(t.hoverStyle)}},{key:"makeSelectionPlate",value:function(e,t,n){Vr(this,e,n);var r=this.b,i=e.render.ctab.sgroups,o=e.render.ctab.molecule.functionalGroups;if(Se.isBondInContractedFunctionalGroup(r,i,o,!0))return null;var a=fe.obj2scaled(this.b.center,n);return t.circle(a.x,a.y,.8*n.atomSelectionPlateRadius).attr(n.selectionStyle)}},{key:"show",value:function(e,t,n){var r=e.render,i=e.molecule,o=e.molecule.bonds.get(t),a=e.molecule.sgroups,s=e.molecule.functionalGroups;if(!Se.isBondInContractedFunctionalGroup(o,a,s,!1)){var u=r.paper,l=void 0!==this.b.hb1?i.halfBonds.get(this.b.hb1):null,c=void 0!==this.b.hb2?i.halfBonds.get(this.b.hb2):null;if(function(e,t,n){var r=[t.b.begin,t.b.end].map((function(t){var r=n.molecule.atoms.get(t),i=Ir(r,e,!1,n);return i<0?-1:r.neighbors[i]}));t.boldStereo=r[0]>=0&&r[1]>=0}(t,this,e),Vr(this,e,n),function(e,t){var n=e.b.hb1,r=e.b.hb2;if(!n&&0!==n||!r&&0!==r)return void(e.doubleBondShift=Zr(t,e));var i=t.halfBonds.get(n).loop,o=t.halfBonds.get(r).loop;if(i>=0&&o>=0){var a=t.loops.get(i).dblBonds,s=t.loops.get(o).dblBonds,u=t.loops.get(i).hbs.length,l=t.loops.get(o).hbs.length;e.doubleBondShift=function(e,t,n,r){return 6===e&&6!==t&&(n>1||1===r)?-1:6===t&&6!==e&&(r>1||1===n)?1:t*n>e*r?-1:t*n<e*r?1:t>e?-1:1}(u,l,a,s)}else e.doubleBondShift=i>=0?-1:o>=0?1:Zr(t,e)}(this,i),l&&c){this.path=function(e,t,n,r){var i,o,a=null,s=e.render,u=e.molecule,l=!(null!==(i=e.atoms.get(n.begin))&&void 0!==i&&i.showLabel),c=!(null!==(o=e.atoms.get(r.begin))&&void 0!==o&&o.showLabel);switch(t.b.type){case oe.PATTERN.TYPE.SINGLE:switch(t.b.stereo){case oe.PATTERN.STEREO.UP:Lr(n.bid,t,e),a=t.boldStereo&&t.neihbid1>=0&&t.neihbid2>=0?jr(s,n,r,t,u):function(e,t,n,r,i){var o=t.p,a=n.p,s=t.norm,u=e.options,l=.7*u.stereoBond,c=a.addScaled(s,l),f=a.addScaled(s,-l);if(r.neihbid2>=0){var h=Br(n,r.neihbid2,u.stereoBond,i);c=h[0],f=h[1]}return _r.bondSingleUp(e.paper,o,c,f,u,Nr(u,r,i))}(s,n,r,t,u);break;case oe.PATTERN.STEREO.DOWN:a=function(e,t,n,r,i){var o=t.p,a=n.p,s=e.options,u=a.sub(o),l=u.length()+.2;u=u.normalized();var c=1.2*s.lineWidth,f=Math.max(Math.floor((l-s.lineWidth)/(s.lineWidth+c)),0)+2,h=l/(f-1);return _r.bondSingleDown(e.paper,t,u,f,h,s,Nr(s,r,i))}(s,n,r,t,u);break;case oe.PATTERN.STEREO.EITHER:a=function(e,t,n,r,i){var o=t.p,a=n.p,s=e.options,u=a.sub(o),l=u.length();u=u.normalized();var c=.6*s.lineWidth,f=Math.max(Math.floor((l-s.lineWidth)/(s.lineWidth+c)),0)+2,h=l/(f-.5);return _r.bondSingleEither(e.paper,t,u,f,h,s,Nr(s,r,i))}(s,n,r,t,u);break;default:a=_r.bondSingle(s.paper,n,r,s.options,Nr(s.options,t,u))}break;case oe.PATTERN.TYPE.DOUBLE:Lr(n.bid,t,e),a=t.b.stereo===oe.PATTERN.STEREO.NONE&&t.boldStereo&&t.neihbid1>=0&&t.neihbid2>=0?function(e,t,n,r,i,o,a){var s=t.p,u=n.p,l=t.norm,c=r.doubleBondShift,f=1.5*e.options.stereoBond,h=s.addScaled(l,f*c),d=u.addScaled(l,f*c);c>0?(o&&(h=h.addScaled(t.dir,f*Dr(t.rightCos,t.rightSin))),a&&(d=d.addScaled(t.dir,-f*Dr(n.leftCos,n.leftSin)))):c<0&&(o&&(h=h.addScaled(t.dir,f*Dr(t.leftCos,t.leftSin))),a&&(d=d.addScaled(t.dir,-f*Dr(n.rightCos,n.rightSin))));var p=jr(e,t,n,r,i);return _r.bondDoubleStereoBold(e.paper,p,h,d,e.options,Nr(e.options,r,i))}(s,n,r,t,u,l,c):function(e,t,n,r,i,o){var a=r.b.stereo===oe.PATTERN.STEREO.CIS_TRANS,s=t.p,u=n.p,l=t.norm,c=a?0:r.doubleBondShift,f=e.options,h=f.bondSpace/2,d=h+c*h,p=c*h-h,v=s.addScaled(l,d),m=u.addScaled(l,d),g=s.addScaled(l,p),y=u.addScaled(l,p);c>0?(i&&(v=v.addScaled(t.dir,f.bondSpace*Dr(t.rightCos,t.rightSin))),o&&(m=m.addScaled(t.dir,-f.bondSpace*Dr(n.leftCos,n.leftSin)))):c<0&&(i&&(g=g.addScaled(t.dir,f.bondSpace*Dr(t.leftCos,t.leftSin))),o&&(y=y.addScaled(t.dir,-f.bondSpace*Dr(n.rightCos,n.rightSin))));return _r.bondDouble(e.paper,v,g,m,y,a,f)}(s,n,r,t,l,c);break;case oe.PATTERN.TYPE.TRIPLE:a=_r.bondTriple(s.paper,n,r,s.options);break;case oe.PATTERN.TYPE.AROMATIC:var f,h;a=n.loop>=0&&(null===(f=u.loops.get(n.loop))||void 0===f?void 0:f.aromatic)||r.loop>=0&&(null===(h=u.loops.get(r.loop))||void 0===h?void 0:h.aromatic)?_r.bondSingle(s.paper,n,r,s.options):zr(s,n,r,t,l,c);break;case oe.PATTERN.TYPE.SINGLE_OR_DOUBLE:a=function(e,t,n){var r=t.p,i=n.p,o=e.options,a=Y.dist(r,i)/Number((o.bondSpace+o.lineWidth).toFixed());1&a||(a+=1);return _r.bondSingleOrDouble(e.paper,t,n,a,o)}(s,n,r);break;case oe.PATTERN.TYPE.SINGLE_OR_AROMATIC:case oe.PATTERN.TYPE.DOUBLE_OR_AROMATIC:a=zr(s,n,r,t,l,c);break;case oe.PATTERN.TYPE.ANY:a=_r.bondAny(s.paper,n,r,s.options);break;case oe.PATTERN.TYPE.HYDROGEN:a=_r.bondHydrogen(s.paper,n,r,s.options);break;case oe.PATTERN.TYPE.DATIVE:a=_r.bondDative(s.paper,n,r,s.options);break;default:throw new Error("Bond type "+t.b.type+" not supported")}return a}(e,this,l,c),this.rbb=pr.relBox(this.path.getBBox()),e.addReObjectPath(ar.data,this.visel,this.path,null,!0);var f={};f.path=function(e,t,n,r){var i=n.p,o=r.p,a=o.add(i).scaled(.5),s=o.sub(i).normalized(),u=s.rotateSC(1,0),l=[],c=e.options.lineWidth,f=e.options.bondSpace/2,h=c,d=2*c,p=1.5*f,v=1.5*f,m=3*f,g=.2;switch(t.b.reactingCenterStatus){case oe.PATTERN.REACTING_CENTER.NOT_CENTER:l.push(a.addScaled(u,m).addScaled(s,g*m)),l.push(a.addScaled(u,-m).addScaled(s,-g*m)),l.push(a.addScaled(u,m).addScaled(s,-g*m)),l.push(a.addScaled(u,-m).addScaled(s,g*m));break;case oe.PATTERN.REACTING_CENTER.CENTER:l.push(a.addScaled(u,m).addScaled(s,g*m).addScaled(s,h)),l.push(a.addScaled(u,-m).addScaled(s,-g*m).addScaled(s,h)),l.push(a.addScaled(u,m).addScaled(s,g*m).addScaled(s,-h)),l.push(a.addScaled(u,-m).addScaled(s,-g*m).addScaled(s,-h)),l.push(a.addScaled(s,p).addScaled(u,v)),l.push(a.addScaled(s,-p).addScaled(u,v)),l.push(a.addScaled(s,p).addScaled(u,-v)),l.push(a.addScaled(s,-p).addScaled(u,-v));break;case oe.PATTERN.REACTING_CENTER.MADE_OR_BROKEN:l.push(a.addScaled(u,m).addScaled(s,d)),l.push(a.addScaled(u,-m).addScaled(s,d)),l.push(a.addScaled(u,m).addScaled(s,-d)),l.push(a.addScaled(u,-m).addScaled(s,-d));break;case oe.PATTERN.REACTING_CENTER.ORDER_CHANGED:l.push(a.addScaled(u,m)),l.push(a.addScaled(u,-m));break;case oe.PATTERN.REACTING_CENTER.MADE_OR_BROKEN_AND_CHANGED:l.push(a.addScaled(u,m).addScaled(s,d)),l.push(a.addScaled(u,-m).addScaled(s,d)),l.push(a.addScaled(u,m).addScaled(s,-d)),l.push(a.addScaled(u,-m).addScaled(s,-d)),l.push(a.addScaled(u,m)),l.push(a.addScaled(u,-m));break;default:return null}return _r.reactingCenter(e.paper,l,e.options)}(r,this,l,c),f.path&&(f.rbb=pr.relBox(f.path.getBBox()),e.addReObjectPath(ar.data,this.visel,f.path,null,!0));var h={};h.path=function(e,t,n,r){var i=e.options,o=null;if(t.b.topology===oe.PATTERN.TOPOLOGY.RING)o="rng";else{if(t.b.topology!==oe.PATTERN.TOPOLOGY.CHAIN)return null;o="chn"}var a=n.p,s=r.p,u=s.add(a).scaled(.5),l=s.sub(a).normalized().rotateSC(1,0),c=i.lineWidth;t.doubleBondShift>0?l=l.scaled(-t.doubleBondShift):0===t.doubleBondShift&&(c+=i.bondSpace/2);var f=new Y(2,1).scaled(i.bondSpace);t.b.type===oe.PATTERN.TYPE.TRIPLE&&(c+=i.bondSpace);var h=u.add(new Y(l.x*(f.x+c),l.y*(f.y+c)));return _r.topologyMark(e.paper,h,o,i)}(r,this,l,c),h.path&&(h.rbb=pr.relBox(h.path.getBBox()),e.addReObjectPath(ar.data,this.visel,h.path,null,!0)),this.setHover(this.hover,r);var d=null,p=.6*n.subFontSize;n.showBondIds&&(d=Fr(t,u,l,c,p,.5,.5,l.norm),e.addReObjectPath(ar.indices,this.visel,d)),n.showHalfBondIds&&(d=Fr(this.b.hb1,u,l,c,p,.8,.2,l.norm),e.addReObjectPath(ar.indices,this.visel,d),d=Fr(this.b.hb2,u,l,c,p,.2,.8,c.norm),e.addReObjectPath(ar.indices,this.visel,d)),n.showLoopIds&&!n.showBondIds&&(d=Fr(l.loop,u,l,c,p,.5,.5,c.norm),e.addReObjectPath(ar.indices,this.visel,d),d=Fr(c.loop,u,l,c,p,.5,.5,l.norm),e.addReObjectPath(ar.indices,this.visel,d));var v=e.molecule.highlights,m=!1,g="";if(v.forEach((function(e){var n,r=null===(n=e.bonds)||void 0===n?void 0:n.includes(t);m=m||r,r&&(g=e.color)})),m){var y={fill:g,stroke:g,"stroke-width":7*n.lineattr["stroke-width"],"stroke-linecap":"round"},b=fe.obj2scaled(this.b.center,e.render.options),x=function(e,t,n){var r={x:t.p.x,y:t.p.y},i={x:n.p.x,y:n.p.y},o=e.render.paper,a="M".concat(r.x,",").concat(r.y," L").concat(i.x,",").concat(i.y);return o.path(a)}(e,l,c);x.attr(y),e.addReObjectPath(ar.hovering,this.visel,x,b,!0)}}}}}],[{key:"isSelectable",value:function(){return!0}}]),n}(dr);function Ir(e,t,n,r){return e.neighbors.findIndex((function(e){var i=r.molecule.halfBonds.get(e);if(!i||i.bid===t)return!1;var o=r.bonds.get(i.bid);return!!o&&(o.b.type===oe.PATTERN.TYPE.SINGLE&&o.b.stereo===oe.PATTERN.STEREO.UP?o.b.end===i.begin||o.boldStereo&&n:!(o.b.type!==oe.PATTERN.TYPE.DOUBLE||o.b.stereo!==oe.PATTERN.STEREO.NONE||!n||!o.boldStereo))}))}function Lr(e,t,n){var r,i,o=[t.b.begin,t.b.end].map((function(t){var r=n.molecule.atoms.get(t);if(!r)return-1;var i=Ir(r,e,!0,n);return i<0?-1:r.neighbors[i]}));t.neihbid1=null!==(r=n.atoms.get(t.b.begin))&&void 0!==r&&r.showLabel?-1:o[0],t.neihbid2=null!==(i=n.atoms.get(t.b.end))&&void 0!==i&&i.showLabel?-1:o[1]}function Nr(e,t,n){var r,i,o="#000";if(0===t.b.stereo)return o;var a=null===(r=n.atoms.get(t.b.begin))||void 0===r?void 0:r.stereoLabel,s=null===(i=n.atoms.get(t.b.end))||void 0===i?void 0:i.stereoLabel,u="";return a&&!s?u=a:!a&&s&&(u=s),u&&e.colorStereogenicCenters!==sr.Off&&e.colorStereogenicCenters!==sr.LabelsOnly?Ar(e,u):o}function jr(e,t,n,r,i){var o=e.options,a=Br(t,r.neihbid1,o.stereoBond,i),s=Br(n,r.neihbid2,o.stereoBond,i),u=a[0],l=a[1],c=s[0],f=s[1];return _r.bondSingleStereoBold(e.paper,u,l,c,f,o,Nr(o,r,i))}function Dr(e,t){return t<0||Math.abs(e)>.9?0:t/(1-e)}function Br(e,t,n,r){var i=r.halfBonds.get(t),o=Y.dot(e.dir,i.dir),a=Y.cross(e.dir,i.dir),s=Math.sqrt(.5*(1-o)),u=i.dir.rotateSC((a>=0?-1:1)*s,Math.sqrt(.5*(1+o))),l=e.p.addScaled(u,.7*n/(s+.3)),c=e.p.addScaled(u.negated(),.7*n/(s+.3));return a>0?[l,c]:[c,l]}function zr(e,t,n,r,i,o){var a=[.125,.125,.005,.125],s=null,u=null,l=e.options,c=r.doubleBondShift;r.b.type===oe.PATTERN.TYPE.SINGLE_OR_AROMATIC&&(s=c>0?1:2,u=a.map((function(e){return e*l.scale}))),r.b.type===oe.PATTERN.TYPE.DOUBLE_OR_AROMATIC&&(s=3,u=a.map((function(e){return e*l.scale})));var f=function(e,t,n,r,i,o,a,s){var u=e.p,l=t.p,c=e.norm,f=o/2,h=f+n*f,d=n*f-f,p=u.addScaled(c,h),v=l.addScaled(c,h),m=u.addScaled(c,d),g=l.addScaled(c,d);n>0?(r&&(p=p.addScaled(e.dir,o*Dr(e.rightCos,e.rightSin))),i&&(v=v.addScaled(e.dir,-o*Dr(t.leftCos,t.leftSin)))):n<0&&(r&&(m=m.addScaled(e.dir,o*Dr(e.leftCos,e.leftSin))),i&&(g=g.addScaled(e.dir,-o*Dr(t.rightCos,t.rightSin))));return _r.aromaticBondPaths(p,m,v,g,a,s)}(t,n,c,i,o,l.bondSpace,s,u);return _r.bondAromatic(e.paper,f,c,l)}function Fr(e,t,n,r,i,o,a,s){var u=Y.lc(n.p,o,r.p,a,s,i),l=t.text(u.x,u.y,e.toString()),c=pr.relBox(l.getBBox());return _r.recenterText(l,c),l}function Vr(e,t,n){var r=t.render,i=t.atoms.get(e.b.begin),o=t.atoms.get(e.b.end);if(i&&o&&void 0!==e.b.hb1&&void 0!==e.b.hb2){var a=fe.obj2scaled(i.a.pp,r.options),s=fe.obj2scaled(o.a.pp,r.options),u=t.molecule.halfBonds.get(e.b.hb1),l=t.molecule.halfBonds.get(e.b.hb2);null!==u&&void 0!==u&&u.dir&&null!==l&&void 0!==l&&l.dir&&(u.p=Ur(i,a,u.dir,2*n.lineWidth),l.p=Ur(o,s,l.dir,2*n.lineWidth),e.b.center=Y.lc2(i.a.pp,.5,o.a.pp,.5),e.b.len=Y.dist(a,s),e.b.sb=5*n.lineWidth,e.b.sa=Math.max(e.b.sb,e.b.len/2-2*n.lineWidth),e.b.angle=180*Math.atan2(u.dir.y,u.dir.x)/Math.PI)}}function Ur(e,t,n,r){for(var i=0,o=e.visel,a=0;a<o.exts.length;++a){var s=o.exts[a].translate(t);i=Math.max(i,pr.shiftRayBox(t,n,s))}return i>0&&(t=t.addScaled(n,i+r)),t}function Zr(e,t){if(!t.b.hb1&&0!==t.b.hb1||!t.b.hb2&&0!==t.b.hb2)return 0;var n=e.halfBonds.get(t.b.hb1),r=e.halfBonds.get(t.b.hb2);if(!n||!r)return 0;var i=(n.leftSin>.3?1:0)+(r.rightSin>.3?1:0),o=(r.leftSin>.3?1:0)+(n.rightSin>.3?1:0);return i>o?-1:i<o||(n.leftSin>.3?1:0)+(n.rightSin>.3?1:0)===1?1:0}function Hr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function Gr(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var Wr=new WeakMap,qr=function(e){p(n,e);var t=Hr(n);function n(){var e;return(0,l.Z)(this,n),Gr(m(e=t.call(this,"enhancedFlag")),Wr,{writable:!0,value:void 0}),e}return(0,c.Z)(n,[{key:"hoverPath",value:function(e){var t=pe.fromRelBox(C(this,Wr).getBBox()),n=t.p1.sub(t.p0),r=t.p0.sub(e.options.offset);return e.paper.rect(r.x,r.y,n.x,n.y)}},{key:"drawHover",value:function(e){var t;if(null===(t=C(this,Wr))||void 0===t||!t.attrs)return null;var n=this.hoverPath(e).attr(e.options.hoverStyle);return e.ctab.addReObjectPath(ar.hovering,this.visel,n),n}},{key:"makeSelectionPlate",value:function(e,t,n){var r;return null!==(r=C(this,Wr))&&void 0!==r&&r.attrs?this.hoverPath(e.render).attr(n.selectionStyle):null}},{key:"show",value:function(e,t,n){var i,o=e.render,a=e.molecule.frags.get(t);if(null!==a&&void 0!==a&&a.enhancedStereoFlag){var s=a.stereoFlagPosition?a.stereoFlagPosition:ce.getDefaultStereoFlagPosition(e.molecule,t),u=o.paper,l=fe.obj2scaled(s,n),c=(i={},(0,r.Z)(i,ie.Abs,n.absFlagLabel),(0,r.Z)(i,ie.And,n.andFlagLabel),(0,r.Z)(i,ie.Mixed,n.mixedFlagLabel),(0,r.Z)(i,ie.Or,n.orFlagLabel),i);n.showStereoFlags&&A(this,Wr,u.text(l.x,l.y,a.enhancedStereoFlag?c[a.enhancedStereoFlag]:"").attr({font:n.font,"font-size":n.fontsz,fill:"#000"})),o.ctab.addReObjectPath(ar.data,this.visel,C(this,Wr),null,!0)}}}],[{key:"isSelectable",value:function(){return!0}}]),n}(dr);function Kr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Yr=function(e){p(r,e);var t=Kr(r);function r(e){var n;return(0,l.Z)(this,r),(n=t.call(this,"frag")).item=e,n}return(0,c.Z)(r,[{key:"fragGetAtoms",value:function(e,t){return Array.from(e.atoms.keys()).filter((function(n){return e.atoms.get(n).a.fragment===t}))}},{key:"fragGetBonds",value:function(e,t){return Array.from(e.bonds.keys()).filter((function(n){var r=e.bonds.get(n).b,i=e.atoms.get(r.begin).a.fragment,o=e.atoms.get(r.end).a.fragment;return i===t&&o===t}))}},{key:"calcBBox",value:function(e,t,r){var i;return e.atoms.forEach((function(e){if(e.a.fragment===t){var o=e.visel.boundingBox;if(o)r||(r=n.g._ui_editor.render),o=o.translate((r.options.offset||new Y).negated()).transform(fe.scaled2obj,r.options);else{o=new pe(e.a.pp,e.a.pp);var a=new Y(.05*3,.05*3);o=o.extend(a,a)}i=i?pe.union(i,o):o}})),i}},{key:"_draw",value:function(e,t,n){var r=this.calcBBox(e.ctab,t,e);if(r){var i=fe.obj2scaled(new Y(r.p0.x,r.p0.y),e.options),o=fe.obj2scaled(new Y(r.p1.x,r.p1.y),e.options);return e.paper.rect(i.x,i.y,o.x-i.x,o.y-i.y,0).attr(n)}}},{key:"draw",value:function(e){return null}},{key:"drawHover",value:function(e){}},{key:"setHover",value:function(e,t){var n=t.ctab.frags.keyOf(this);(n||0===n)&&(n=parseInt(n,10),t.ctab.atoms.forEach((function(r){r.a.fragment===n&&r.setHover(e,t)})),t.ctab.bonds.forEach((function(r){t.ctab.atoms.get(r.b.begin).a.fragment===n&&r.setHover(e,t)})))}}],[{key:"isSelectable",value:function(){return!1}}]),r}(dr);function Xr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var $r=new Y(.05*3,.05*3),Jr=function(e){p(n,e);var t=Xr(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,"rgroup")).labelBox=null,r.item=e,r}return(0,c.Z)(n,[{key:"getAtoms",value:function(e){var t=[];return this.item.frags.forEach((function(n){t=t.concat(e.ctab.frags.get(n).fragGetAtoms(e.ctab,n))})),t}},{key:"getBonds",value:function(e){var t=[];return this.item.frags.forEach((function(n){t=t.concat(e.ctab.frags.get(n).fragGetBonds(e.ctab,n))})),t}},{key:"calcBBox",value:function(e){var t=null;return this.item.frags.forEach((function(n){var r=e.ctab.frags.get(n).calcBBox(e.ctab,n,e);r&&(t=t?pe.union(t,r):r)})),t&&(t=t.extend($r,$r)),t}},{key:"draw",value:function(e,t){var n=this.calcBBox(e);if(!n)return{};var r={data:[]},i=fe.obj2scaled(n.p0,t),o=fe.obj2scaled(n.p1,t),a=e.paper.set();Qr(a,e,n),r.data.push(a);var s=e.ctab.rgroups.keyOf(this),u=e.paper.set(),l=e.paper.text(i.x,(i.y+o.y)/2,"R"+s+"=").attr({font:t.font,"font-size":t.fontRLabel,fill:"black"}),c=pr.relBox(l.getBBox());l.translateAbs(-c.width/2-t.lineWidth,0),u.push(l);for(var f={font:t.font,"font-size":t.fontRLogic,fill:"black"},h=[ei(s,this.item)],d=c.height/2+t.lineWidth/2,p=0;p<h.length;++p){var v=e.paper.text(i.x,(i.y+o.y)/2,h[p]).attr(f),m=pr.relBox(v.getBBox());d+=m.height/2,v.translateAbs(-m.width/2-6*t.lineWidth,d),d+=m.height/2+t.lineWidth/2,r.data.push(v),u.push(v)}return r.data.push(l),this.labelBox=pe.fromRelBox(u.getBBox()).transform(fe.scaled2obj,e.options),r}},{key:"_draw",value:function(e,t,n){if(!this.getVBoxObj(e))return null;var r=this.getVBoxObj(e).extend($r,$r);if(!r)return null;var i=fe.obj2scaled(r.p0,e.options),o=fe.obj2scaled(r.p1,e.options);return e.paper.rect(i.x,i.y,o.x-i.x,o.y-i.y,0).attr(n)}},{key:"drawHover",value:function(e){var t=e.ctab.rgroups.keyOf(this);if(!t)return null;var n=this._draw(e,t,e.options.hoverStyle);return e.ctab.addReObjectPath(ar.hovering,this.visel,n),this.item.frags.forEach((function(t,n){e.ctab.frags.get(n).drawHover(e)})),n}},{key:"show",value:function(e,t,n){var r=this,i=this.draw(e.render,n);Object.keys(i).forEach((function(t){for(;i[t].length>0;)e.addReObjectPath(ar.data,r.visel,i[t].shift(),null,!0)}))}}],[{key:"isSelectable",value:function(){return!1}}]),n}(dr);function Qr(e,t,n,r){r=fe.obj2scaled(r||new Y(1,0),t.options);var i=Math.min(.25,.3*n.sz().x),o=n.p1.y-n.p0.y,a=.5*(n.p1.y+n.p0.y),s=_r.bracket(t.paper,r.negated(),r.negated().rotateSC(1,0),fe.obj2scaled(new Y(n.p0.x,a),t.options),i,o,t.options),u=_r.bracket(t.paper,r,r.rotateSC(1,0),fe.obj2scaled(new Y(n.p1.x,a),t.options),i,o,t.options);return e.push(s,u)}function ei(e,t){var n=t.ifthen>0?"IF ":"",r=t.range.startsWith(">")||t.range.startsWith("<")||t.range.startsWith("="),i=null;i=t.range.length>0?r?t.range:"="+t.range:">0";var o=t.resth?" (RestH)":"",a=t.ifthen>0?"\nTHEN R"+t.ifthen.toString():"";return"".concat(n,"R").concat(e.toString()).concat(i).concat(o).concat(a)}function ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ti(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ri(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var ii=function(e){p(n,e);var t=ri(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,"rxnArrow")).item=e,r}return(0,c.Z)(n,[{key:"calcDistance",value:function(e,t){var n=new Y(e.x,e.y),r=this.getReferencePointDistance(e),i=this.item,o=oi(i.pos,n);if(Ce.isElliptical(i)){var a=this.getReferencePoints(),s=(0,M.Z)(a,3),u=s[0],l=s[1],c=s[2];o=Math.min(o,oi([u,c],n),oi([c,l],n))}var f=r.minDist<=8/t?r.refPoint:null;return{minDist:o=Math.min(r.minDist,o),refPoint:f}}},{key:"getReferencePointDistance",value:function(e){var t=[];return this.getReferencePoints().forEach((function(n){t.push({minDist:Math.abs(Y.dist(e,n)),refPoint:n})})),t.reduce((function(e,t){return e&&e.minDist<t.minDist?e:t}),null)}},{key:"hoverPath",value:function(e){var t=this.generatePath(e,e.options,"selection");return e.paper.path(t)}},{key:"drawHover",value:function(e){var t=this.hoverPath(e).attr(e.options.hoverStyle);return e.ctab.addReObjectPath(ar.hovering,this.visel,t),t}},{key:"getReferencePoints",value:function(){var e=[],t=this.item,n=(0,M.Z)(t.pos,2),r=n[0],i=n[1],o=t.height;if(e.push(new Y(r.x,r.y)),e.push(new Y(i.x,i.y)),Ce.isElliptical(t)){var a=function(e,t,n){if(0===+pr.tfx(e)){var r=Math.min(t.x,n.x),i=Math.min(t.y,n.y),o=r+Math.abs(t.x-n.x)/2,a=i+Math.abs(t.y-n.y)/2;return new Y(o,a)}var s=Math.hypot(n.x-t.x,n.y-t.y),u=Math.hypot(s/2,e),l=pr.calcCoordinates(t,n,u).pos1,c=pr.calcCoordinates(t,n,u).pos2;if(e>0){if(n.x<t.x)return new Y(null===l||void 0===l?void 0:l.x,null===l||void 0===l?void 0:l.y);if(n.x>t.x)return new Y(null===c||void 0===c?void 0:c.x,null===c||void 0===c?void 0:c.y);if(n.x===t.x){if(n.y>t.y)return new Y(null===c||void 0===c?void 0:c.x,null===c||void 0===c?void 0:c.y);if(n.y<t.y)return new Y(null===l||void 0===l?void 0:l.x,null===l||void 0===l?void 0:l.y);if(n.y===t.y)return new Y(t.x,t.y)}}else{if(n.x>t.x)return new Y(null===l||void 0===l?void 0:l.x,null===l||void 0===l?void 0:l.y);if(n.x<t.x)return new Y(null===c||void 0===c?void 0:c.x,null===c||void 0===c?void 0:c.y);if(n.x===t.x){if(n.y>t.y)return new Y(null===l||void 0===l?void 0:l.x,null===l||void 0===l?void 0:l.y);if(n.y<t.y)return new Y(null===c||void 0===c?void 0:c.x,null===c||void 0===c?void 0:c.y);if(n.y===t.y)return new Y(t.x,t.y)}}return new Y(t.x,t.y)}(o,r,i);e.push(a)}return e}},{key:"makeSelectionPlate",value:function(e,t,n){var r=e.render,i=e.render.options,o=this.getReferencePoints(),a=i.scale,s=e.render.paper.set();return s.push(r.paper.path(this.generatePath(r,i,"selection")).attr(n.selectionStyle)),o.forEach((function(t){var n=fe.obj2scaled(t,e.render.options);s.push(e.render.paper.circle(n.x,n.y,a/8).attr({fill:"black"}))})),s}},{key:"generatePath",value:function(e,t,n){var r,i=this.item,o=Ce.isElliptical(i)&&i.height*t.scale,a=i.pos.map((function(e){return fe.obj2scaled(e,t)||new Y})),s=this.getArrowParams(a[0].x,a[0].y,a[1].x,a[1].y),u=s.length,l=s.angle;switch(n){case"selection":r=_r.rectangleArrowHighlightAndSelection(e.paper,{pos:a,height:o},u,l,t);break;case"arrow":r=_r.arrow(e.paper,ni(ni({},i),{},{pos:a,height:o}),u,l,t)}return r}},{key:"getArrowParams",value:function(e,t,n,r){return{length:Math.hypot(n-e,r-t),angle:D().angle(e,t,n,r)-180}}},{key:"show",value:function(e,t,n){var r=this.generatePath(e.render,n,"arrow"),i=n.offset;null!=i&&r.translateAbs(i.x,i.y),this.visel.add(r,pe.fromRelBox(pr.relBox(r.getBBox())))}}],[{key:"isSelectable",value:function(){return!0}}]),n}(dr);function oi(e,t){var n;if((t.x<Math.min(e[0].x,e[1].x)||t.x>Math.max(e[0].x,e[1].x))&&(t.y<Math.min(e[0].y,e[1].y)||t.y>Math.max(e[0].y,e[1].y)))n=Math.min(Y.dist(e[0],t),Y.dist(e[1],t));else{var r=Y.dist(e[0],e[1]),i=Y.dist(e[0],t),o=Y.dist(e[1],t),a=(r+i+o)/2;n=2/r*Math.sqrt(a*(a-r)*(a-i)*(a-o))}return n}function ai(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var si=function(e){p(n,e);var t=ai(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,"rxnPlus")).item=e,r}return(0,c.Z)(n,[{key:"hoverPath",value:function(e){var t=fe.obj2scaled(this.item.pp,e.options),n=e.options.scale;return e.paper.rect(t.x-n/4,t.y-n/4,n/2,n/2,n/8)}},{key:"drawHover",value:function(e){var t=this.hoverPath(e).attr(e.options.hoverStyle);return e.ctab.addReObjectPath(ar.hovering,this.visel,t),t}},{key:"makeSelectionPlate",value:function(e,t,n){return this.hoverPath(e.render).attr(n.selectionStyle)}},{key:"show",value:function(e,t,n){var r=e.render,i=fe.obj2scaled(this.item.pp,n),o=_r.plus(r.paper,i,n),a=n.offset;null!=a&&o.translateAbs(a.x,a.y),this.visel.add(o,pe.fromRelBox(pr.relBox(o.getBBox())))}}],[{key:"isSelectable",value:function(){return!0}}]),n}(dr);function ui(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var li=function(e){p(n,e);var t=ui(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,"sgroupData")).sgroup=e,r}return(0,c.Z)(n,[{key:"hoverPath",value:function(e){var t=this.sgroup.dataArea,n=fe.obj2scaled(t.p0,e.options),r=fe.obj2scaled(t.p1,e.options).sub(n);return e.paper.rect(n.x,n.y,r.x,r.y)}},{key:"drawHover",value:function(e){var t=this.hoverPath(e).attr(e.options.hoverStyle);return e.ctab.addReObjectPath(ar.hovering,this.visel,t),t}},{key:"makeSelectionPlate",value:function(e,t,n){return this.hoverPath(e.render).attr(n.selectionStyle)}}],[{key:"isSelectable",value:function(){return!0}}]),n}(dr);function ci(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var fi=pr.tfx,hi=function(e){p(n,e);var t=ci(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,"sgroup")).item=e,r}return(0,c.Z)(n,[{key:"draw",value:function(e,t){this.render=e.render;var n=this.render.paper.set(),r=new ee(t.atoms),i=me.getCrossBonds(e.molecule,r);me.bracketPos(t,e.molecule,i);var o=t.bracketBox,a=t.bracketDir;t.areas=[o];var s=e.molecule.functionalGroups;if(Se.isContractedFunctionalGroup(t.id,s))t.firstSgroupAtom=e.molecule.atoms.get(t.atoms[0]),t.functionalGroup=!0;else switch(t.type){case"MUL":di(n,this.render,t,i,r,o,a,t.data.mul);break;case"SRU":var u=t.data.connectivity||"eu";"ht"===u&&(u="");var l=t.data.subscript||"n";di(n,this.render,t,i,r,o,a,l,u);break;case"SUP":di(n,this.render,t,i,r,o,a,t.data.name,null,{"font-style":"italic"});break;case"GEN":di(n,this.render,t,i,r,o,a);break;case"DAT":n=function(e,t){me.bracketPos(t,e.molecule),t.areas=t.bracketBox?[t.bracketBox]:[],null===t.pp&&t.calculatePP(e.molecule);return t.data.attached?function(e,t){var n=e.render,r=n.options,i=n.paper,o=i.set();return me.getAtoms(e,t).forEach((function(a){var s=e.atoms.get(a),u=fe.obj2scaled(s.a.pp,r),l=s.visel.boundingBox;null!==l&&(u.x=Math.max(u.x,l.p1.x)),u.x+=r.lineWidth;var c=pi(i,u,t,r),f=pr.relBox(c.getBBox());c.translateAbs(.5*f.width,-.3*f.height),o.push(c);var h=pe.fromRelBox(pr.relBox(c.getBBox()));h=h.transform(fe.scaled2obj,n.options),t.areas.push(h)})),o}(e,t):function(e,t){var n=e.render,r=n.options,i=n.paper,o=i.set(),a=t.pp.scaled(r.scale),s=pi(i,a,t,r),u=pr.relBox(s.getBBox());s.translateAbs(.5*u.width,-.5*u.height),o.push(s);var l=pe.fromRelBox(pr.relBox(s.getBBox()));t.dataArea=l.transform(fe.scaled2obj,n.options),e.sgroupData.has(t.id)||e.sgroupData.set(t.id,new li(t));return o}(e,t)}(e,t)}return n}},{key:"makeSelectionPlate",value:function(e,t,n){var r=this.item,i=vi(r,n),o=i.startX,a=i.startY,s=i.size,u=e.molecule.functionalGroups;if(Se.isContractedFunctionalGroup(r.id,u))return t.rect(o,a,s,s).attr(n.selectionStyle)}},{key:"drawHover",value:function(e){var t=e.options,n=e.paper,r=this.item,i=vi(r,t),o=i.a0,a=i.a1,s=i.b0,u=i.b1,l=e.ctab.molecule.functionalGroups,c=n.set();if(Se.isContractedFunctionalGroup(r.id,l)){var f=vi(r,t),h=f.startX,d=f.startY,p=f.size;r.hovering=n.rect(h,d,p,p).attr(t.hoverStyle)}else r.hovering=n.path("M{0},{1}L{2},{3}L{4},{5}L{6},{7}L{0},{1}",fi(o.x),fi(o.y),fi(a.x),fi(a.y),fi(u.x),fi(u.y),fi(s.x),fi(s.y)).attr(t.hoverStyle);c.push(r.hovering),me.getAtoms(e.ctab.molecule,r).forEach((function(t){c.push(e.ctab.atoms.get(t).makeHoverPlate(e))}),this),me.getBonds(e.ctab.molecule,r).forEach((function(t){c.push(e.ctab.bonds.get(t).makeHoverPlate(e))}),this),e.ctab.addReObjectPath(ar.hovering,this.visel,c)}},{key:"show",value:function(e){var t=e.render,n=this.item;if("MRV_IMPLICIT_H"!==n.data.fieldName){var r=t.ctab,i=this.draw(r,n);e.addReObjectPath(ar.data,this.visel,i,null,!0),this.setHover(this.hover,t)}}}],[{key:"isSelectable",value:function(){return!1}}]),n}(dr);function di(e,t,n,r,i,o,a,s,u,l){for(var c=function(e,t,n,r,i,o,a){function s(e,t,n,r){this.c=e,this.d=t,this.n=t.rotateSC(1,0),this.w=n,this.h=r}var u=[],l=i.rotateSC(1,0),c=Object.values(t),f=c.flat();f.length<2?function(){i=i||new Y(1,0),l=l||i.rotateSC(1,0);var e=Math.min(.25,.3*r.sz().x),t=Y.lc2(i,r.p0.x,l,.5*(r.p0.y+r.p1.y)),n=Y.lc2(i,r.p1.x,l,.5*(r.p0.y+r.p1.y)),o=r.sz().y;u.push(new s(t,i.negated(),e,o),new s(n,i,e,o))}():2===f.length&&2===c.length?function(){var t=e.bonds.get(f[0]),n=e.bonds.get(f[1]),r=t.getCenter(e),i=n.getCenter(e),l=-1,c=-1,h=-1,d=-1,p=Y.centre(r,i),v=Y.diff(i,r).normalized(),m=v.negated(),g=v.rotateSC(1,0),y=g.negated();e.sGroupForest.children.get(a).forEach((function(e){var t=o.ctab.sgroups.get(e).visel.boundingBox;t=t.translate((o.options.offset||new Y).negated()).transform(fe.scaled2obj,o.options),l=Math.max(l,pr.shiftRayBox(r,m,t)),c=Math.max(c,pr.shiftRayBox(i,v,t)),h=Math.max(h,pr.shiftRayBox(p,g,t)),d=Math.max(d,pr.shiftRayBox(p,y,t))}),this),l=Math.max(l+.2,0),c=Math.max(c+.2,0);var b=.25,x=1.5+(h=Math.max(Math.max(h,d)+.1,0));u.push(new s(r.addScaled(m,l),m,b,x),new s(i.addScaled(v,c),v,b,x))}():function(){for(var t=0;t<f.length;++t){var r=e.bonds.get(f[t]),i=r.getCenter(e),o=n.has(r.begin)?r.getDir(e):r.getDir(e).negated();u.push(new s(i,o,.2,1))}}();return u}(t.ctab.molecule,r,i,o,a,t,n.id),f=-1,h=0;h<c.length;++h){var d=c[h],p=_r.bracket(t.paper,fe.obj2scaled(d.d,t.options),fe.obj2scaled(d.n,t.options),fe.obj2scaled(d.c,t.options),d.w,d.h,t.options);e.push(p),(f<0||c[f].d.x<d.d.x||c[f].d.x===d.d.x&&c[f].d.y>d.d.y)&&(f=h)}var v=c[f];function m(n,r){var i=fe.obj2scaled(v.c.addScaled(v.n,r*v.h),t.options),o=t.paper.text(i.x,i.y,n).attr({font:t.options.font,"font-size":t.options.fontszsub});l&&o.attr(l);var a=pe.fromRelBox(pr.relBox(o.getBBox())),s=Math.max(pr.shiftRayBox(i,v.d.negated(),a),3)+2;o.translateAbs(s*v.d.x,s*v.d.y),e.push(o)}s&&m(s,.5),u&&m(u,-.5)}function pi(e,t,n,r){var i=e.text(t.x,t.y,n.data.fieldValue).attr({font:r.font,"font-size":r.fontsz}),o=i.getBBox(),a=e.rect(o.x-1,o.y-1,o.width+2,o.height+2,3,3);a=n.selected?a.attr(r.selectionStyle):a.attr({fill:"#fff",stroke:"#fff"});var s=e.set();return s.push(a,i.toFront()),s}function vi(e,t){var n=e.bracketBox.transform(fe.obj2scaled,t),r=t.lineWidth,i=new Y(4*r,6*r);n=n.extend(i,i);var o=e.bracketDir,a=o.rotateSC(1,0),s=Y.lc2(o,n.p0.x,a,n.p0.y),u=Y.lc2(o,n.p0.x,a,n.p1.y),l=Y.lc2(o,n.p1.x,a,n.p0.y),c=Y.lc2(o,n.p1.x,a,n.p1.y),f=t.contractedFunctionalGroupSize,h=(l.x+s.x)/2-f/2,d=(u.y+s.y)/2-f/2;if(e.firstSgroupAtom){var p=new Y(f/2,f/2,0),v=Y.diff(e.firstSgroupAtom.pp.scaled(40),p);h=v.x,d=v.y}return{a0:s,a1:u,b0:l,b1:c,startX:h,startY:d,size:f}}function mi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var gi=pr.tfx,yi=function(e){p(n,e);var t=mi(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,"simpleObject")).item=e,r}return(0,c.Z)(n,[{key:"calcDistance",value:function(e,t){var n,r=new Y(e.x,e.y),i=this.getReferencePointDistance(e),o=this.item,a=o.mode,s=o.pos;switch(a){case Ae.ellipse:var u=Y.diff(s[1],s[0]),l=u.x/2,c=u.y/2,f=Y.sum(s[0],new Y(l,c)),h=Y.diff(r,f);n=0!==l&&0!==c?Math.abs(1-h.x*h.x/(l*l)-h.y*h.y/(c*c)):bi(s,r);break;case Ae.rectangle:var d=Math.min(s[0].x,s[1].x),p=Math.min(s[0].y,s[1].y),v=Math.max(s[0].x,s[1].x),m=Math.max(s[0].y,s[1].y),g=[];r.x>=d&&r.x<=v&&(r.y<p?g.push(p-r.y):r.y>m?g.push(r.y-m):g.push(r.y-p,m-r.y)),r.x<d&&r.y<p&&g.push(Y.dist(new Y(d,p),r)),r.x>v&&r.y>m&&g.push(Y.dist(new Y(v,m),r)),r.x<d&&r.y>m&&g.push(Y.dist(new Y(d,m),r)),r.x>v&&r.y<p&&g.push(Y.dist(new Y(v,p),r)),r.y>=p&&r.y<=m&&(r.x<d?g.push(d-r.x):r.x>v?g.push(r.x-v):g.push(r.x-d,v-r.x)),n=Math.min.apply(Math,g);break;case Ae.line:n=bi(s,r);break;default:throw new Error("Unsupported shape type")}var y=i.minDist<=8/t?i.refPoint:null;return{minDist:n=Math.min(i.minDist,n),refPoint:y}}},{key:"getReferencePointDistance",value:function(e){var t=[];return this.getReferencePoints().forEach((function(n){t.push({minDist:Math.abs(Y.dist(e,n)),refPoint:n})})),t.reduce((function(e,t){return e&&e.minDist<t.minDist?e:t}),null)}},{key:"getReferencePoints",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];switch(this.item.mode){case Ae.ellipse:case Ae.rectangle:var n=new Y(Math.min(this.item.pos[0].x,this.item.pos[1].x),Math.min(this.item.pos[0].y,this.item.pos[1].y)),r=Math.abs(Y.diff(this.item.pos[0],this.item.pos[1]).x),i=Math.abs(Y.diff(this.item.pos[0],this.item.pos[1]).y);t.push(new Y(n.x+.5*r,n.y),new Y(n.x+r,n.y+.5*i),new Y(n.x+.5*r,n.y+i),new Y(n.x,n.y+.5*i)),e&&this.item.mode!==Ae.rectangle||t.push(n,new Y(n.x,n.y+i),new Y(n.x+r,n.y+i),new Y(n.x+r,n.y));break;case Ae.line:this.item.pos.forEach((function(e){return t.push(new Y(e.x,e.y,0))}));break;default:throw new Error("Unsupported shape type")}return t}},{key:"hoverPath",value:function(e){var t=[];this.item.pos.forEach((function(n,r){t[r]=fe.obj2scaled(n,e.options)}));var n=e.options.scale,r=[];switch(this.item.mode){case Ae.ellipse:var i=Y.diff(t[1],t[0]),o=i.x/2,a=i.y/2;r.push(e.paper.ellipse(gi(t[0].x+o),gi(t[0].y+a),gi(Math.abs(o)+n/8),gi(Math.abs(a)+n/8))),Math.abs(o)-n/8>0&&Math.abs(a)-n/8>0&&r.push(e.paper.ellipse(gi(t[0].x+o),gi(t[0].y+a),gi(Math.abs(o)-n/8),gi(Math.abs(a)-n/8)));break;case Ae.rectangle:r.push(e.paper.rect(gi(Math.min(t[0].x,t[1].x)-n/8),gi(Math.min(t[0].y,t[1].y)-n/8),gi(Math.max(t[0].x,t[1].x)-Math.min(t[0].x,t[1].x)+n/4),gi(Math.max(t[0].y,t[1].y)-Math.min(t[0].y,t[1].y)+n/4))),Math.max(t[0].x,t[1].x)-Math.min(t[0].x,t[1].x)-n/4>0&&Math.max(t[0].y,t[1].y)-Math.min(t[0].y,t[1].y)-n/4>0&&r.push(e.paper.rect(gi(Math.min(t[0].x,t[1].x)+n/8),gi(Math.min(t[0].y,t[1].y)+n/8),gi(Math.max(t[0].x,t[1].x)-Math.min(t[0].x,t[1].x)-n/4),gi(Math.max(t[0].y,t[1].y)-Math.min(t[0].y,t[1].y)-n/4)));break;case Ae.line:var s=[],u=Math.atan((t[1].y-t[0].y)/(t[1].x-t[0].x)),l={x:0,y:0},c={x:0,y:0},f=t[0].x>t[1].x?-1:1;l.x=t[0].x-f*(n/8*Math.cos(u)),l.y=t[0].y-f*(n/8*Math.sin(u)),c.x=t[1].x+f*(n/8*Math.cos(u)),c.y=t[1].y+f*(n/8*Math.sin(u)),s.push("M",l.x+f*n/8*Math.sin(u),l.y-f*n/8*Math.cos(u)),s.push("L",c.x+f*n/8*Math.sin(u),c.y-f*n/8*Math.cos(u)),s.push("L",c.x-f*n/8*Math.sin(u),c.y+f*n/8*Math.cos(u)),s.push("L",l.x-f*n/8*Math.sin(u),l.y+f*n/8*Math.cos(u)),s.push("L",l.x+f*n/8*Math.sin(u),l.y-f*n/8*Math.cos(u)),r.push(e.paper.path(s));break;default:throw new Error("Unsupported shape type")}var h=r.map((function(e){return{path:e,stylesApplied:!1}}));return h}},{key:"drawHover",value:function(e){var t=this.hoverPath(e).map((function(t){return t.stylesApplied?t.path:t.path.attr(e.options.hoverStyle)}));return e.ctab.addReObjectPath(ar.hovering,this.visel,t),t}},{key:"makeSelectionPlate",value:function(e,t,n){var r=this.item.pos.map((function(t){return fe.obj2scaled(t,e.render.options)||new Y})),i=this.getReferencePoints(),o=e.render.options.scale,a=e.render.paper.set();return a.push(xi(this.item.mode,t,r).attr(n.hoverStyleSimpleObject)),i.forEach((function(t){var n=fe.obj2scaled(t,e.render.options);a.push(e.render.paper.circle(n.x,n.y,o/8).attr({fill:"black"}))})),a}},{key:"show",value:function(e,t){var n=e.render,r=this.item.pos.map((function(e){return fe.obj2scaled(e,t)||new Y})),i=xi(this.item.mode,n.paper,r,t),o=t.offset;null!=o&&i.translateAbs(o.x,o.y),this.visel.add(i,pe.fromRelBox(pr.relBox(i.getBBox())))}}],[{key:"isSelectable",value:function(){return!0}}]),n}(dr);function bi(e,t){var n;if((t.x<Math.min(e[0].x,e[1].x)||t.x>Math.max(e[0].x,e[1].x))&&(t.y<Math.min(e[0].y,e[1].y)||t.y>Math.max(e[0].y,e[1].y)))n=Math.min(Y.dist(e[0],t),Y.dist(e[1],t));else{var r=Y.dist(e[0],e[1]),i=Y.dist(e[0],t),o=Y.dist(e[1],t),a=(r+i+o)/2;n=2/r*Math.sqrt(a*(a-r)*(a-i)*(a-o))}return n}function xi(e,t,n,r){var i;switch(e){case Ae.ellipse:i=_r.ellipse(t,n,r);break;case Ae.rectangle:i=_r.rectangle(t,n,r);break;case Ae.line:i=_r.line(t,n,r);break;default:throw new Error("Unsupported shape type")}return i}function _i(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var wi=pr.tfx,Si=function(e){p(n,e);var t=_i(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,"loop")).loop=e,r.centre=new Y,r.radius=new Y,r}return(0,c.Z)(n,[{key:"show",value:function(e,t,n){var r=this,i=e.render.paper,o=e.molecule,a=this.loop;this.centre=new Y,a.hbs.forEach((function(t){var i=o.halfBonds.get(t),s=e.bonds.get(i.bid),u=fe.obj2scaled(e.atoms.get(i.begin).a.pp,n);s.b.type!==oe.PATTERN.TYPE.AROMATIC&&(a.aromatic=!1),r.centre.add_(u)})),a.convex=!0;for(var s=0;s<this.loop.hbs.length;++s){var u=o.halfBonds.get(a.hbs[s]),l=o.halfBonds.get(a.hbs[(s+1)%a.hbs.length]),c=Math.atan2(Y.cross(u.dir,l.dir),Y.dot(u.dir,l.dir));c>0&&(a.convex=!1)}if(this.centre=this.centre.scaled(1/a.hbs.length),this.radius=-1,a.hbs.forEach((function(t){var i=o.halfBonds.get(t),a=fe.obj2scaled(e.atoms.get(i.begin).a.pp,n),s=fe.obj2scaled(e.atoms.get(i.end).a.pp,n),u=Y.diff(s,a).rotateSC(1,0).normalized(),l=Y.dot(Y.diff(a,r.centre),u);r.radius=r.radius<0?l:Math.min(r.radius,l)})),this.radius*=.7,a.aromatic){var f=null;if(a.convex&&n.aromaticCircle)f=i.circle(this.centre.x,this.centre.y,this.radius).attr({stroke:"#000","stroke-width":n.lineattr["stroke-width"]});else{var h="";for(s=0;s<a.hbs.length;++s){u=o.halfBonds.get(a.hbs[s]),l=o.halfBonds.get(a.hbs[(s+1)%a.hbs.length]),c=Math.atan2(Y.cross(u.dir,l.dir),Y.dot(u.dir,l.dir));var d=(Math.PI-c)/2,p=l.dir.rotate(d),v=fe.obj2scaled(e.atoms.get(l.begin).a.pp,n),m=Math.sin(d);Math.abs(m)<.1&&(m=.1*m/Math.abs(m));var g=n.bondSpace/m,y=v.addScaled(p,-g);h+=0===s?"M":"L",h+=wi(y.x)+","+wi(y.y)}h+="Z",f=i.path(h).attr({stroke:"#000","stroke-width":n.lineattr["stroke-width"],"stroke-dasharray":"- "})}e.addReObjectPath(ar.data,this.visel,f,null,!0)}}},{key:"isValid",value:function(e,t){var n=e.halfBonds;return this.loop.hbs.every((function(e){return n.has(e)&&n.get(e).loop===t}))}}],[{key:"isSelectable",value:function(){return!1}}]),n}(dr);function Ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ki(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Oi=function(e){p(n,e);var t=ki(n);function n(e){var i;return(0,l.Z)(this,n),i=t.call(this,"text"),(0,r.Z)(m(i),"paths",[]),i.item=e,i}return(0,c.Z)(n,[{key:"getReferencePoints",value:function(){var e=this.getRelBox(this.paths),t=e.p0,n=e.p1,r=this.item.position,i=Math.abs(Y.diff(t,n).x)/40,o=Math.abs(Y.diff(t,n).y)/40,a=[];return a.push(this.item.position,new Y(r.x,r.y+o),new Y(r.x+i,r.y+o),new Y(r.x+i,r.y)),a}},{key:"hoverPath",value:function(e){var t=this.getRelBox(this.paths),n=t.p0,r=t.p1,i=n.sub(e.options.offset),o=r.sub(n),a=o.x,s=o.y;return e.paper.rect(i.x,i.y,a,s,5)}},{key:"getRelBox",value:function(e){var t=this,n=e[0][0].getBBox().x,r=e[0],i=Math.min.apply(Math,k(r.map((function(e){return e.getBBox().y})))),o=e.reduce((function(e,n){return t.getRowWidth(n)>t.getRowWidth(e)?n:e}),e[0]),a=o[o.length-1],s=a.getBBox().x+a.getBBox().width,u=e[e.length-1],l=Math.max.apply(Math,k(u.map((function(e){return e.getBBox().y+e.getBBox().height}))));return{p0:new Y(n,i),p1:new Y(s,l)}}},{key:"getRowWidth",value:function(e){return e.reduce((function(e,t){return e+=t.getBBox().width}),0)}},{key:"drawHover",value:function(e){if(!this.paths.length)return null;var t=this.hoverPath(e).attr(e.options.hoverStyle);return e.ctab.addReObjectPath(ar.hovering,this.visel,t),t}},{key:"makeSelectionPlate",value:function(e,t,n){return this.paths.length&&t?this.hoverPath(e.render).attr(n.selectionStyle):null}},{key:"show",value:function(e,t,n){var i=this,o=e.render,a=o.paper,s=fe.obj2scaled(this.item.position,n),u=0;this.paths=[];var l=this.item.content?JSON.parse(this.item.content):null;l&&(l.blocks.forEach((function(e){var t=i.getRanges(e,n),o=0,l=[];t.forEach((function(t){var i=(0,M.Z)(t,3),c=i[0],f=i[1],h=i[2];e.text=e.text.replace(/[^\S\r\n]/g,"\xa0");var d=a.text(s.x,s.y,e.text.substring(c,f+1)||"\xa0").attr(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ei(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ei(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({font:n.font,"font-size":n.fontsz,"text-anchor":"start",fill:"#000000"},h));d.translateAbs(o,u+(h.shiftY||0)),l.push(d),o+=d.getBBox().width})),i.paths.push(l);var c=i.getRelBox([l]),f=c.p0,h=c.p1;u+=Math.abs(Y.diff(f,h).y)})),o.ctab.addReObjectPath(ar.data,this.visel,(0,F.flatten)(this.paths),null,!0))}},{key:"getRanges",value:function(e,t){for(var n=[],r=0,i=this.getStyles(e,r,t),o=1;o<e.text.length;o++){var a=this.getStyles(e,o,t);(0,F.isEqual)(i,a)||(n.push([r,o-1,i]),i=a,r=o)}return n.push([r,e.text.length-1,i]),n}},{key:"getStyles",value:function(e,t,n){var r=e.inlineStyleRanges.filter((function(e){return e.offset<=t&&t<e.offset+e.length})),i=r.reduce((function(e,t){var n;return t.style.includes(De.FontSize)?null===(n=t.style.match(/\d+/))||void 0===n?void 0:n[0]:e}),null);return r.reduce((function(e,t){var r=i||n.fontsz,o=.8*(i||n.fontszsub);switch(t.style){case De.Bold:e["font-weight"]="bold";break;case De.Italic:e["font-style"]="italic";break;case De.Subscript:e["font-size"]=o+"px",e.shiftY=r/3;break;case De.Superscript:e["font-size"]=o+"px",e.shiftY=-r/3;break;case"".concat(De.FontSize,"_").concat(i,"px"):e["font-size"]=i+"px"}return e}),{})}}],[{key:"isSelectable",value:function(){return!0}}]),n}(dr);function Ai(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ci(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ci(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ci(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Mi=function(){function e(t,n){var i=this;(0,l.Z)(this,e),(0,r.Z)(this,"atoms",new Map),(0,r.Z)(this,"bonds",new Map),(0,r.Z)(this,"reloops",new Map),(0,r.Z)(this,"rxnPluses",new Map),(0,r.Z)(this,"rxnArrows",new Map),(0,r.Z)(this,"frags",new Ne),(0,r.Z)(this,"rgroups",new Ne),(0,r.Z)(this,"sgroups",new Map),(0,r.Z)(this,"sgroupData",new Map),(0,r.Z)(this,"enhancedFlags",new Map),(0,r.Z)(this,"simpleObjects",new Map),(0,r.Z)(this,"texts",new Map),(0,r.Z)(this,"initialized",!1),(0,r.Z)(this,"layers",[]),(0,r.Z)(this,"connectedComponents",new Ne),(0,r.Z)(this,"ccFragmentType",new Ne),(0,r.Z)(this,"structChanged",!1),(0,r.Z)(this,"atomsChanged",new Map),(0,r.Z)(this,"simpleObjectsChanged",new Map),(0,r.Z)(this,"rxnArrowsChanged",new Map),(0,r.Z)(this,"rxnPlusesChanged",new Map),(0,r.Z)(this,"enhancedFlagsChanged",new Map),(0,r.Z)(this,"bondsChanged",new Map),(0,r.Z)(this,"textsChanged",new Map),this.render=n,this.molecule=t||new Be,this.initLayers(),this.clearMarks(),t.atoms.forEach((function(e,t){i.atoms.set(t,new Or(e))})),t.bonds.forEach((function(e,t){i.bonds.set(t,new Rr(e))})),t.loops.forEach((function(e,t){i.reloops.set(t,new Si(e))})),t.rxnPluses.forEach((function(e,t){i.rxnPluses.set(t,new si(e))})),t.rxnArrows.forEach((function(e,t){i.rxnArrows.set(t,new ii(e))})),t.simpleObjects.forEach((function(e,t){i.simpleObjects.set(t,new yi(e))})),t.texts.forEach((function(e,t){i.texts.set(t,new Oi(e))})),t.frags.forEach((function(e,t){i.frags.set(t,new Yr(e)),e&&i.enhancedFlags.set(t,new qr)})),t.rgroups.forEach((function(e,t){i.rgroups.set(t,new Jr(e))})),t.sgroups.forEach((function(e,t){i.sgroups.set(t,new hi(e)),"DAT"!==e.type||e.data.attached||i.sgroupData.set(t,new li(e)),Se.isFunctionalGroup(e)&&i.molecule.functionalGroups.set(t,new Se(e))}))}return(0,c.Z)(e,[{key:"connectedComponentRemoveAtom",value:function(e,t){var n=t||this.atoms.get(e);if(n&&!(n.component<0)){var r=this.connectedComponents.get(n.component);r.delete(e),r.size<1&&this.connectedComponents.delete(n.component),n.component=-1}}},{key:"clearConnectedComponents",value:function(){this.connectedComponents.clear(),this.atoms.forEach((function(e){e.component=-1}))}},{key:"getConnectedComponent",value:function(e,t){for(var n=this,r=Array.isArray(e)?Array.from(e):[e],i=new ee;r.length>0;){var o=r.pop();i.add(o);var a=this.atoms.get(o);a&&(a.component>=0&&t.add(a.component),a.a.neighbors.forEach((function(e){var t=n.molecule.halfBonds.get(e);if(t){var o=t.end;i.has(o)||r.push(o)}})))}return i}},{key:"addConnectedComponent",value:function(e){var t=this,n=this.connectedComponents.add(e),r=new ee,i=this.getConnectedComponent(Array.from(e),r);r.delete(n);var o=-1;return i.forEach((function(e){var r=t.atoms.get(e);r&&(r.component=n,-1!==r.a.rxnFragmentType&&(o=r.a.rxnFragmentType))})),this.ccFragmentType.set(n,o),n}},{key:"removeConnectedComponent",value:function(e){var t=this;return this.connectedComponents.get(e).forEach((function(e){var n=t.atoms.get(e);n&&(n.component=-1)})),this.connectedComponents.delete(e)}},{key:"assignConnectedComponents",value:function(){var e=this;this.atoms.forEach((function(t,n){if(!(t.component>=0)){var r=new ee,i=e.getConnectedComponent(n,r);r.forEach((function(t){e.removeConnectedComponent(t)})),e.addConnectedComponent(i)}}))}},{key:"initLayers",value:function(){for(var e in ar)this.layers[ar[e]]=this.render.paper.rect(0,0,10,10).attr({class:e+"Layer",fill:"#000",opacity:"0.0"}).toFront()}},{key:"addReObjectPath",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(n&&this.layers[e].node.parentNode){var a=Array.isArray(n)?n:[n];a.forEach((function(n){var a=r.render.options.offset,s=o?pe.fromRelBox(pr.relBox(n.getBBox())):null,u=i&&s?s.translate(i.negated()):null;null!==a&&(n.translateAbs(a.x,a.y),s=s?s.translate(a):null),t.add(n,s,u),n.insertBefore(r.layers[ar[e]])}))}}},{key:"clearMarks",value:function(){var t=this;Object.keys(e.maps).forEach((function(e){t[e+"Changed"]=new Map})),this.structChanged=!1}},{key:"markItemRemoved",value:function(){this.structChanged=!0}},{key:"markBond",value:function(e,t){this.markItem("bonds",e,t)}},{key:"markAtom",value:function(e,t){this.markItem("atoms",e,t)}},{key:"markItem",value:function(e,t,n){var r=this[e+"Changed"],i=r.has(t)?Math.max(n,r.get(t)):n;r.set(t,i),this[e].has(t)&&this.clearVisel(this[e].get(t).visel)}},{key:"clearVisel",value:function(e){e.paths.forEach((function(e){e.remove()})),e.clear()}},{key:"eachItem",value:function(t){var n=this;Object.keys(e.maps).forEach((function(e){n[e].forEach(t)}))}},{key:"getVBoxObj",value:function(t){var n=this;Ti(t=t||{})&&Object.keys(e.maps).forEach((function(e){t[e]=Array.from(n[e].keys())}));var r=null;return Object.keys(e.maps).forEach((function(e){t[e]&&t[e].forEach((function(t){var i=n[e].get(t).getVBoxObj(n.render);i&&(r=r?pe.union(r,i):i.clone())}))})),r=r||new pe(0,0,0,0)}},{key:"translate",value:function(e){this.eachItem((function(t){return t.visel.translate(e)}))}},{key:"scale",value:function(e){this.eachItem((function(t){return function(e,t){for(var n=0;n<e.paths.length;++n)Pi(e.paths[n],t)}(t.visel,e)}))}},{key:"clearVisels",value:function(){var e=this;this.eachItem((function(t){return e.clearVisel(t.visel)}))}},{key:"update",value:function(t){var n=this;t=t||!this.initialized,Object.keys(e.maps).forEach((function(e){var r=n[e+"Changed"];t?n[e].forEach((function(e,t){return r.set(t,1)})):r.forEach((function(t,i){n[e].has(i)||r.delete(i)}))})),this.atomsChanged.forEach((function(e,t){return n.connectedComponentRemoveAtom(t)})),this.frags.filter((function(e,t){return!t.calcBBox(n.render.ctab,e,n.render)})).forEach((function(e,t){n.clearVisel(e.visel),n.frags.delete(t),n.molecule.frags.delete(t)})),Object.keys(e.maps).forEach((function(e){var t=n[e+"Changed"];t.forEach((function(r,i){n.clearVisel(n[e].get(i).visel),n.structChanged=n.structChanged||t.get(i)>0}))})),this.sgroups.forEach((function(e){n.clearVisel(e.visel),e.hovering=null,e.selectionPlate=null})),this.frags.forEach((function(e){n.clearVisel(e.visel)})),this.rgroups.forEach((function(e){n.clearVisel(e.visel)})),t&&(this.clearConnectedComponents(),this.molecule.initHalfBonds(),this.molecule.initNeighbors());var r=Array.from(this.atomsChanged.keys());this.molecule.updateHalfBonds(r),this.molecule.sortNeighbors(r),this.assignConnectedComponents(),this.initialized=!0,this.verifyLoops();var i=t||this.structChanged;return i&&this.updateLoops(),this.showLabels(),this.showBonds(),i&&this.showLoops(),this.showReactionSymbols(),this.showSGroups(),this.showFragments(),this.showRGroups(),this.showEnhancedFlags(),this.showSimpleObjects(),this.showTexts(),this.clearMarks(),!0}},{key:"updateLoops",value:function(){var e=this;this.reloops.forEach((function(t){e.clearVisel(t.visel)}));var t=this.molecule.findLoops();t.bondsToMark.forEach((function(t){e.markBond(t,1)})),t.newLoops.forEach((function(t){e.reloops.set(t,new Si(e.molecule.loops.get(t)))}))}},{key:"showLoops",value:function(){var e=this,t=this.render.options;this.reloops.forEach((function(n,r){n.show(e,r,t)}))}},{key:"showSimpleObjects",value:function(){var e=this,t=this.render.options;this.simpleObjectsChanged.forEach((function(n,r){var i=e.simpleObjects.get(r);i&&i.show(e,t)}))}},{key:"showTexts",value:function(){var e=this,t=this.render.options;this.textsChanged.forEach((function(n,r){var i=e.texts.get(r);i&&i.show(e,r,t)}))}},{key:"showReactionSymbols",value:function(){var e=this,t=this.render.options;this.rxnArrowsChanged.forEach((function(n,r){var i=e.rxnArrows.get(r);i&&i.show(e,r,t)})),this.rxnPlusesChanged.forEach((function(n,r){var i=e.rxnPluses.get(r);i&&i.show(e,r,t)}))}},{key:"showSGroups",value:function(){var e=this;this.molecule.sGroupForest.getSGroupsBFS().reverse().forEach((function(t){var n=e.sgroups.get(t);n&&n.show(e)}))}},{key:"showFragments",value:function(){var e=this;this.frags.forEach((function(t,n){var r=t.draw(e.render,n);r&&e.addReObjectPath(ar.data,t.visel,r,null,!0)}))}},{key:"showRGroups",value:function(){var e=this,t=this.render.options;this.rgroups.forEach((function(n,r){n.show(e,r,t)}))}},{key:"loopRemove",value:function(e){var t=this,n=this.reloops.get(e);if(n){this.clearVisel(n.visel);var r=[];n.loop.hbs.forEach((function(e){var n=t.molecule.halfBonds.get(e);n&&(n.loop=-1,t.markBond(n.bid,1),t.markAtom(n.begin,1),r.push(n.bid))})),this.reloops.delete(e),this.molecule.loops.delete(e)}}},{key:"verifyLoops",value:function(){var e=this;this.reloops.forEach((function(t,n){t.isValid(e.molecule,n)||e.loopRemove(n)}))}},{key:"showLabels",value:function(){var e=this,t=this.render.options;this.atomsChanged.forEach((function(n,r){var i=e.atoms.get(r);i&&i.show(e,r,t)}))}},{key:"showEnhancedFlags",value:function(){var e=this,t=this.render.options;this.enhancedFlagsChanged.forEach((function(n,r){var i=e.enhancedFlags.get(r);i&&i.show(e,r,t)}))}},{key:"showBonds",value:function(){var e=this,t=this.render.options;this.bondsChanged.forEach((function(n,r){var i=e.bonds.get(r);i&&i.show(e,r,t)}))}},{key:"setSelection",value:function(t){var n=this,r=0===arguments.length,i=[];Object.keys(e.maps).forEach((function(o){var a=n[o].values(),s=(0,M.Z)(a,1)[0];(e.maps[o].isSelectable()||s instanceof hi)&&n[o].forEach((function(e,a){if(e instanceof Or){var s,u,l=Ai(e.a.sgs.values());try{for(l.s();!(u=l.n()).done;){s=u.value}}catch(h){l.e(h)}finally{l.f()}i.push({selected:e.selected,sgroup:s})}if(e instanceof hi&&Se.isContractedFunctionalGroup(e.item.id,n.molecule.functionalGroups)){var c=i.filter((function(t){return t.sgroup===e.item.id}));e.selected=c.length>0&&c[0].selected}var f=r?e.selected:t&&t[o]&&t[o].indexOf(a)>-1;n.showItemSelection(e,f)}))}))}},{key:"showItemSelection",value:function(e,t){var n=function(e){var t,n,r,i;return e&&null!==e.selectionPlate&&(!(null!==(t=e.selectionPlate)&&void 0!==t&&t.items)&&!(null!==(n=e.selectionPlate)&&void 0!==n&&n.removed)||Array.isArray(null===(r=e.selectionPlate)||void 0===r?void 0:r.items)&&!(null!==(i=e.selectionPlate[0])&&void 0!==i&&i.removed))}(e);if(e.selected=t,e instanceof li&&(e.sgroup.selected=t),t){if(!n){var r=this.render,i=r.options,o=r.paper;e.selectionPlate=e.makeSelectionPlate(this,o,i),this.addReObjectPath(ar.selectionPlate,e.visel,e.selectionPlate)}e.selectionPlate&&e.selectionPlate.show()}else n&&e.selectionPlate&&e.selectionPlate.hide()}}]),e}();function Ti(e){return!e||!Object.keys(Mi.maps).some((function(t){return e[t]&&e[t].length>0}))}function Pi(e,t){if("set"===e.type)for(var n=0;n<e.length;++n)Pi(e[n],t);else"undefined"!==typeof e.attrs&&("font-size"in e.attrs?e.attr("font-size",e.attrs["font-size"]*t):"stroke-width"in e.attrs&&e.attr("stroke-width",e.attrs["stroke-width"]*t)),e.scale(t,t,0,0)}(0,r.Z)(Mi,"maps",{atoms:Or,bonds:Rr,rxnPluses:si,rxnArrows:ii,frags:Yr,rgroups:Jr,sgroupData:li,enhancedFlags:qr,sgroups:hi,reloops:Si,simpleObjects:yi,texts:Oi});var Ri=Math.PI/12;function Ii(e,t){var n=Y.diff(t,e);return Math.atan2(n.y,n.x)}function Li(e,t){return t&&(e=Ii(e,t)),Math.round(e/Ri)*Ri}function Ni(e){var t=Math.round(e/Math.PI*180);return t>180?t-=360:t<=-180&&(t+=360),t}var ji={calcAngle:Ii,fracAngle:Li,calcNewAtomPos:function(e,t,n){var r=new Y(1,0).rotate(n?Ii(e,t):Li(e,t));return r.add_(e),r},degrees:Ni,setFracAngle:function(e){Ri=Math.PI/180*e},mergeBondsParams:function(e,t,n,r){var i=e.atoms.get(t.begin),o=n.atoms.get(r.begin),a=e.atoms.get(t.end),s=n.atoms.get(r.end),u=Ii(i.pp,a.pp)-Ii(o.pp,s.pp),l=Math.abs(Ni(u)%180),c=Y.dist(i.pp,a.pp)/Y.dist(o.pp,s.pp);return{merged:!(0,R.inRange)(l,10,170)&&(0,R.inRange)(c,.8,1.2),angle:u,scale:c,cross:Math.abs(Ni(u))>90}}};function Di(e,t){var n=e.clientWidth-10,r=e.clientHeight-10;n=n>0?n:0,r=r>0?r:0,this.userOpts=t,this.clientArea=e,this.paper=new(D())(e,n,r),this.sz=Y.ZERO,this.ctab=new Mi(new Be,this),this.options=function(e){var t=e.scale||100;e.rotationStep&&ji.setFracAngle(e.rotationStep);var n=Math.ceil(t/6*1.9),r=Math.ceil(.7*n),i={showAtomIds:!1,showBondIds:!1,showHalfBondIds:!1,showLoopIds:!1,showValenceWarnings:!0,autoScale:!1,autoScaleMargin:0,maxBondLength:0,atomColoring:!0,hideImplicitHydrogen:!1,hideTerminalLabels:!1,carbonExplicitly:!1,showCharge:!0,showHydrogenLabels:"on",showValence:!0,aromaticCircle:!0,scale:t,zoom:1,offset:new Y,lineWidth:t/20,bondSpace:e.doubleBondWidth||t/7,stereoBond:e.stereoBondWidth||t/7,subFontSize:r,font:"30px Arial",fontsz:n,fontszsub:r,fontRLabel:1.2*n,fontRLogic:.7*n,lineattr:{stroke:"#000","stroke-width":e.bondThickness||t/20,"stroke-linecap":"round","stroke-linejoin":"round"},selectionStyle:{fill:"#7f7",stroke:"none"},hoverStyle:{stroke:"#0c0","stroke-width":.6*t/20},sgroupBracketStyle:{stroke:"darkgray","stroke-width":.5*t/20},lassoStyle:{stroke:"gray","stroke-width":"1px"},hoverStyleSimpleObject:{stroke:"#0c0","stroke-width":t/4,"stroke-linecap":"round","stroke-opacity":.6},atomSelectionPlateRadius:1.2*n,contractedFunctionalGroupSize:50};return Object.assign({},i,e)}(this.userOpts)}Di.prototype.selectionPolygon=function(e){return _r.selectionPolygon(this.paper,e,this.options)},Di.prototype.selectionLine=function(e,t){return _r.selectionLine(this.paper,e,t,this.options)},Di.prototype.selectionRectangle=function(e,t){return _r.selectionRectangle(this.paper,e,t,this.options)},Di.prototype.view2obj=function(e,t){var n=this.scrollPos();return this.useOldZoom||(e=e.scaled(1/this.options.zoom),n=n.scaled(1/this.options.zoom)),e=t?e:e.add(n).sub(this.options.offset),fe.scaled2obj(e,this.options)},Di.prototype.obj2view=function(e,t){var n=fe.obj2scaled(e,this.options);return n=t?n:n.add(this.options.offset).sub(this.scrollPos().scaled(1/this.options.zoom)),this.useOldZoom||(n=n.scaled(this.options.zoom)),n},Di.prototype.scrollPos=function(){return new Y(this.clientArea.scrollLeft,this.clientArea.scrollTop)},Di.prototype.page2obj=function(e){var t=this.clientArea.getBoundingClientRect(),n=t.top,r=t.left,i=new Y(e.clientX-r,e.clientY-n);return this.view2obj(i)},Di.prototype.setPaperSize=function(e){this.sz=e,this.paper.setSize(e.x*this.options.zoom,e.y*this.options.zoom),this.setViewBox(this.options.zoom)},Di.prototype.setOffset=function(e){var t=new Y(e.x-this.options.offset.x,e.y-this.options.offset.y);this.clientArea.scrollLeft+=t.x,this.clientArea.scrollTop+=t.y,this.options.offset=e},Di.prototype.setZoom=function(e){this.options.zoom=e,this.paper.setSize(this.sz.x*e,this.sz.y*e),this.setViewBox(e)},Di.prototype.setScrollOffset=function(e,t){var n=this.clientArea,r=n.clientWidth,i=n.clientHeight,o=function(e,t,n,r,i){var o=t<0?-t:0,a=n<0?-n:0;return e.x<r&&(o+=r-e.x),e.y<i&&(a+=i-e.y),new Y(o,a)}(this.sz.scaled(this.options.zoom),e,t,r+e,i+t).scaled(1/this.options.zoom);if(o.x>0||o.y>0){this.setPaperSize(this.sz.add(o));var a=new Y(e<0?-e:0,t<0?-t:0).scaled(1/this.options.zoom);(a.x>0||a.y>0)&&(this.ctab.translate(a),this.setOffset(this.options.offset.add(a)))}n.scrollLeft=e,n.scrollTop=t,this.update(!1)},Di.prototype.setScale=function(e){this.options.offset&&(this.options.offset=this.options.offset.scaled(1/e).scaled(e)),this.userOpts.scale*=e,this.options=null,this.update(!0)},Di.prototype.setViewBox=function(e){this.useOldZoom?this.setScale(e):this.paper.canvas.setAttribute("viewBox","0 0 "+this.sz.x+" "+this.sz.y)},Di.prototype.setMolecule=function(e){this.paper.clear(),this.ctab=new Mi(e,this),this.options.offset=new Y,this.update(!1)},Di.prototype.update=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t=t||new Y(this.clientArea.clientWidth||100,this.clientArea.clientHeight||100);var n=this.ctab.update(e);if(this.ctab.setSelection(),n){var r=this.options.scale,i=this.ctab.getVBoxObj().transform(fe.obj2scaled,this.options).translate(this.options.offset||new Y);if(this.options.autoScale){var o=i.sz(),a=this.options.autoScaleMargin,s=new Y(a,a),u=t;if(u.x<2*a+1||u.y<2*a+1)throw new Error("View box too small for the given margin");var l=Math.max(o.x/(u.x-2*a),o.y/(u.y-2*a));this.options.maxBondLength/l>1&&(l=1);var c=o.add(s.scaled(2*l));this.paper.setViewBox(i.pos().x-a*l-(u.x*l-c.x)/2,i.pos().y-a*l-(u.y*l-c.y)/2,u.x*l,u.y*l)}else{var f=Y.UNIT.scaled(r),h=i.sz().length()>0?i.extend(f,f):i,d=new pe(this.scrollPos(),t.scaled(1/this.options.zoom).sub(Y.UNIT.scaled(20))),p=pe.union(d,h);this.oldCb||(this.oldCb=new pe);var v=p.sz().floor(),m=this.oldCb.p0.sub(p.p0).ceil();this.oldBb=i,this.sz&&v.x===this.sz.x&&v.y===this.sz.y||this.setPaperSize(v),this.options.offset=this.options.offset||new Y,0===m.x&&0===m.y||(this.setOffset(this.options.offset.add(m)),this.ctab.translate(m))}}};var Bi=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,l.Z)(this,e),this.type=t,this.priority=n}return(0,c.Z)(e,[{key:"execute",value:function(e){throw new Error("Operation.execute() is not implemented")}},{key:"perform",value:function(e){return this.execute(e),this._inverted||(this._inverted=this.invert(),this._inverted._inverted=this),this._inverted}},{key:"invert",value:function(){throw new Error("Operation.invert() is not implemented")}},{key:"isDummy",value:function(e){return!1}}],[{key:"invalidateAtom",value:function(t,n,r){var i=t.atoms.get(n);if(i){t.markAtom(n,r?1:0);var o=t.molecule.halfBonds;i.a.neighbors.forEach((function(n){if(o.has(n)){var i=o.get(n);i&&(t.markBond(i.bid,1),t.markAtom(i.end,0),r&&e.invalidateLoop(t,i.bid))}}));var a=i.a.fragment,s=t.render.options.stereoLabelStyle;t.atoms.forEach((function(e,n){s!==ur.IUPAC&&s!==ur.Classic||e.a.fragment===a&&t.markAtom(n,0)}))}}},{key:"invalidateLoop",value:function(e,t){var n=e.bonds.get(t);if(n&&n.b.hb1&&n.b.hb2){var r=e.molecule.halfBonds.get(n.b.hb1),i=e.molecule.halfBonds.get(n.b.hb2);r&&r.loop>=0&&e.loopRemove(r.loop),i&&i.loop>=0&&e.loopRemove(i.loop)}}},{key:"invalidateBond",value:function(t,n){e.invalidateLoop(t,n);var r=t.bonds.get(n);r&&(e.invalidateAtom(t,r.b.begin,0),e.invalidateAtom(t,r.b.end,0))}},{key:"invalidateItem",value:function(t,n,r,i){if("atoms"!==n)return"bonds"===n?(e.invalidateBond(t,r),void(i>0&&e.invalidateLoop(t,r))):void t.markItem(n,r,i);e.invalidateAtom(t,r,i)}},{key:"invalidateEnhancedFlag",value:function(t,n){e.invalidateItem(t,"enhancedFlags",n,1)}}]),e}(),zi=Object.freeze({ATOM_ADD:"Add atom",ATOM_DELETE:"Delete atom",ATOM_ATTR:"Set atom attribute",ATOM_MOVE:"Move atom",CALC_IMPLICIT_H:"Calculate implicit hydrogen",BOND_ADD:"Add bond",BOND_DELETE:"Delete bond",BOND_ATTR:"Set bond attribute",BOND_MOVE:"Move bond",LOOP_MOVE:"Move loop",S_GROUP_ATOM_ADD:"Add atom to s-group",S_GROUP_ATOM_REMOVE:"Remove atom from s-group",S_GROUP_ATTR:"Set s-group attribute",S_GROUP_CREATE:"Create s-group",S_GROUP_DELETE:"Delete s-group",S_GROUP_ADD_TO_HIERACHY:"Add s-group to hierarchy",S_GROUP_REMOVE_FROM_HIERACHY:"Delete s-group from hierarchy",R_GROUP_ATTR:"Set r-group attribute",R_GROUP_FRAGMENT:"R-group fragment",UPDATE_IF_THEN:"Update",RESTORE_IF_THEN:"Restore",RXN_ARROW_ADD:"Add rxn arrow",RXN_ARROW_DELETE:"Delete rxn arrow",RXN_ARROW_MOVE:"Move rxn arrow",RXN_ARROW_RESIZE:"Resize rxn arrow",RXN_PLUS_ADD:"Add rxn plus",RXN_PLUS_DELETE:"Delete rxn plus",RXN_PLUS_MOVE:"Move rxn plus",S_GROUP_DATA_MOVE:"Move s-group data",CANVAS_LOAD:"Load canvas",ALIGN_DESCRIPTORS:"Align descriptors",SIMPLE_OBJECT_ADD:"Add simple object",SIMPLE_OBJECT_DELETE:"Delete simple object",SIMPLE_OBJECT_MOVE:"Move simple object",SIMPLE_OBJECT_RESIZE:"Resize simple object",RESTORE_DESCRIPTORS_POSITION:"Restore descriptors position",FRAGMENT_ADD:"Add fragment",FRAGMENT_DELETE:"Delete fragment",FRAGMENT_STEREO_FLAG:"Add fragment stereo flag",FRAGMENT_ADD_STEREO_ATOM:"Add stereo atom to fragment",FRAGMENT_DELETE_STEREO_ATOM:"Delete stereo atom from fragment",ENHANCED_FLAG_MOVE:"Move enhanced flag",TEXT_CREATE:"Add text",TEXT_UPDATE:"Edit text",TEXT_DELETE:"Delete text",TEXT_MOVE:"Move text",ADD_HIGHLIGHT:"Highlight",UPDATE_HIGHLIGHT:"Update highlight",REMOVE_HIGHLIGHT:"Remove highlight"});function Fi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Vi=function(e){p(n,e);var t=Fi(n);function n(e,r,i){var o;return(0,l.Z)(this,n),(o=t.call(this,zi.ATOM_ATTR,1)).data={aid:e,attribute:r,value:i},o.data2=null,o}return(0,c.Z)(n,[{key:"execute",value:function(e){if(this.data){var t=this.data,n=t.aid,r=t.attribute,i=t.value,o=e.molecule.atoms.get(n);this.data2||(this.data2={aid:n,attribute:r,value:o[r]}),o[r]=i,Bi.invalidateAtom(e,n)}}},{key:"invert",value:function(){var e=new n;return e.data=this.data2,e.data2=this.data,e}},{key:"isDummy",value:function(e){var t,n,r;return e.molecule.atoms.get(null===(t=this.data)||void 0===t?void 0:t.aid)[null===(n=this.data)||void 0===n?void 0:n.attribute]===(null===(r=this.data)||void 0===r?void 0:r.value)}}]),n}(Bi);function Ui(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Zi=function(e){p(n,e);var t=Ui(n);function n(e,r,i){var o;return(0,l.Z)(this,n),(o=t.call(this,zi.ATOM_MOVE,2)).data={aid:e,d:r,noinvalidate:i},o}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule,n=this.data,r=n.aid,i=n.d,o=t.atoms.get(r);if(o){o.pp.add_(i);var a=e.atoms.get(r);if(a){var s=fe.obj2scaled(i,e.render.options);a.visel.translate(s)}this.data.d=i.negated(),this.data.noinvalidate||Bi.invalidateAtom(e,r,1)}}},{key:"invert",value:function(){var e=new n;return e.data=this.data,e}},{key:"isDummy",value:function(){var e=this.data.d;return 0===e.x&&0===e.y}}]),n}(Bi);function Hi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Gi=function(e){p(n,e);var t=Hi(n);function n(e,r){var i;return(0,l.Z)(this,n),(i=t.call(this,zi.ATOM_ADD)).data={atom:e,pos:r,aid:null},i}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.data,n=t.atom,r=t.pos,i=e.molecule,o={label:""};n&&Object.keys(n).forEach((function(e){o[e]=n[e]})),o.label=o.label||"C","number"!==typeof this.data.aid?this.data.aid=i.atoms.add(new re(o)):i.atoms.set(this.data.aid,new re(o));var a=this.data.aid,s=new Or(i.atoms.get(a));s.component=e.connectedComponents.add(new ee([a])),e.atoms.set(a,s),e.markAtom(a,1),i.atomSetPos(a,new Y(r));var u=i.rxnArrows.get(0);u&&(i.atoms.get(a).rxnFragmentType=i.defineRxnFragmentTypeForAtomset(new ee([a]),u.pos[0].x))}},{key:"invert",value:function(){var e=new Wi;return e.data=this.data,e}}]),n}(Bi),Wi=function(e){p(n,e);var t=Hi(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,zi.ATOM_DELETE,5)).data={aid:e,atom:null,pos:null},r}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.data.aid,n=e.molecule;this.data.atom||(this.data.atom=n.atoms.get(t),this.data.pos=this.data.atom.pp);var r=e.atoms.get(t);if(r){var i=e.connectedComponents.get(r.component);i.delete(t),0===i.size&&e.connectedComponents.delete(r.component),e.clearVisel(r.visel),e.atoms.delete(t),e.markItemRemoved(),n.atoms.delete(t)}}},{key:"invert",value:function(){var e=new Gi;return e.data=this.data,e}}]),n}(Bi);function qi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Ki=function(e){p(n,e);var t=qi(n);function n(e,r,i){var o;return(0,l.Z)(this,n),(o=t.call(this,zi.BOND_ATTR,2)).data={bid:e,attribute:r,value:i},o.data2=null,o}return(0,c.Z)(n,[{key:"execute",value:function(e){if(this.data){var t=this.data,n=t.attribute,r=t.bid,i=t.value,o=e.molecule.bonds.get(r);this.data2||(this.data2={bid:r,attribute:n,value:o[n]}),o[n]=i,Bi.invalidateBond(e,r),"type"===n&&Bi.invalidateLoop(e,r)}}},{key:"isDummy",value:function(e){if(this.data){var t=this.data,n=t.attribute,r=t.bid,i=t.value;return e.molecule.bonds.get(r)[n]===i}return!1}},{key:"invert",value:function(){var e=new n;return e.data=this.data2,e.data2=this.data,e}}]),n}(Bi);function Yi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Xi=function(e){p(n,e);var t=Yi(n);function n(e,r){var i;return(0,l.Z)(this,n),(i=t.call(this,zi.BOND_MOVE,2)).data={bid:e,d:r},i}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.data,n=t.bid,r=t.d,i=e.bonds.get(n);if(i){var o=fe.obj2scaled(r,e.render.options);i.visel.translate(o),this.data.d=r.negated()}}},{key:"invert",value:function(){var e=new n;return e.data=this.data,e}}]),n}(Bi);function $i(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Ji=function(e){p(n,e);var t=$i(n);function n(e,r,i){var o;return(0,l.Z)(this,n),(o=t.call(this,zi.BOND_ADD,1)).data={bond:i,begin:e,end:r,bid:null},o}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.data,n=t.begin,r=t.bond,i=t.end,o=e.molecule;if(n===i)throw new Error("Distinct atoms expected");Bi.invalidateAtom(e,n,1),Bi.invalidateAtom(e,i,1);var a={type:0,begin:0,end:0};r&&Object.keys(r).forEach((function(e){a[e]=r[e]})),a.type=a.type||oe.PATTERN.TYPE.SINGLE,a.begin=n,a.end=i;var s=new oe(a);"number"===typeof this.data.bid?o.bonds.set(this.data.bid,s):this.data.bid=o.bonds.add(s);var u=this.data.bid,l=o.bonds.get(u);o.bondInitHalfBonds(u),o.atomAddNeighbor(l.hb1),o.atomAddNeighbor(l.hb2),e.bonds.set(u,new Rr(l)),e.markBond(u,1)}},{key:"invert",value:function(){var e=new Qi;return e.data=this.data,e}}]),n}(Bi),Qi=function(e){p(n,e);var t=$i(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,zi.BOND_DELETE,3)).data={bid:e,bond:null,begin:null,end:null},r}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.data.bid,n=e.molecule;this.data.bond||(this.data.bond=n.bonds.get(t),this.data.begin=this.data.bond.begin,this.data.end=this.data.bond.end),Bi.invalidateBond(e,t);var r=e.bonds.get(t);if(r){[r.b.hb1,r.b.hb2].forEach((function(t){if(void 0!==t){var n=e.molecule.halfBonds.get(t);n&&n.loop>=0&&e.loopRemove(n.loop)}}),e),e.clearVisel(r.visel),e.bonds.delete(t),e.markItemRemoved();var i=n.bonds.get(t);[i.hb1,i.hb2].forEach((function(e){var t=n.halfBonds.get(e);if(t){var r=n.atoms.get(t.begin),i=r.neighbors.indexOf(e),o=(i+r.neighbors.length-1)%r.neighbors.length,a=(i+1)%r.neighbors.length;n.setHbNext(r.neighbors[o],r.neighbors[a]),r.neighbors.splice(i,1)}})),n.halfBonds.delete(i.hb1),n.halfBonds.delete(i.hb2),n.bonds.delete(t)}}},{key:"invert",value:function(){var e=new Ji;return e.data=this.data,e}}]),n}(Bi);function eo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var to=function(e){p(n,e);var t=eo(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,zi.CANVAS_LOAD)).data={struct:e},r}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule;e.clearVisels(),e.render.setMolecule(this.data.struct),this.data.struct=t}},{key:"invert",value:function(){var e=new n;return e.data=this.data,e}}]),n}(Bi);function no(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var ro=function(e){p(n,e);var t=no(n);function n(){var e;return(0,l.Z)(this,n),(e=t.call(this,zi.ALIGN_DESCRIPTORS)).history={},e}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this,n=e.molecule,r=Array.from(n.sgroups.values()).reverse(),i=n.getCoordBoundingBoxObj(),o=new Y(i.max.x,i.min.y).add(new Y(2,-1));r.forEach((function(r){t.history[r.id]=new Y(r.pp),o=o.add(new Y(0,.5)),r.pp=o,n.sgroups.set(r.id,r),Bi.invalidateItem(e,"sgroupData",r.id,1)}))}},{key:"invert",value:function(){return new io(this.history)}}]),n}(Bi),io=function(e){p(n,e);var t=no(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,zi.RESTORE_DESCRIPTORS_POSITION)).history=e,r}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this,n=e.molecule;Array.from(n.sgroups.values()).forEach((function(r){r.pp=t.history[r.id],n.sgroups.set(r.id,r),Bi.invalidateItem(e,"sgroupData",r.id,1)}))}},{key:"invert",value:function(){return new ro}}]),n}(Bi);function oo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var ao=function(e){p(n,e);var t=oo(n);function n(e,r){var i;return(0,l.Z)(this,n),(i=t.call(this,zi.ENHANCED_FLAG_MOVE)).data={frid:e,p:r},i}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.data.frid,n=this.data.p,r=e.molecule.frags.get(t);if(r){var i=r.stereoFlagPosition?new Y(r.stereoFlagPosition.x,r.stereoFlagPosition.y):ce.getDefaultStereoFlagPosition(e.molecule,t),o=Y.sum(i,n);r.stereoFlagPosition=o,this.data.p=n.negated(),Bi.invalidateItem(e,"enhancedFlags",t,1)}}},{key:"invert",value:function(){var e=new n;return e.data=this.data,e}}]),n}(Bi);function so(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var uo=function(e){p(n,e);var t=so(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return(0,l.Z)(this,n),(i=t.call(this,zi.UPDATE_IF_THEN)).rgid_new=e,i.rgid_old=r,i.ifThenHistory=new Map,i.skipRgids=o||[],i}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this,n=e.molecule;n.rgroups.forEach((function(e,r){e.ifthen!==t.rgid_old||t.skipRgids.includes(r)||(e.ifthen=t.rgid_new,t.ifThenHistory.set(r,t.rgid_old),n.rgroups.set(r,e))}))}},{key:"invert",value:function(){return new lo(this.rgid_new,this.rgid_old,this.ifThenHistory)}}]),n}(Bi),lo=function(e){p(n,e);var t=so(n);function n(e,r,i){var o;return(0,l.Z)(this,n),(o=t.call(this,zi.RESTORE_IF_THEN)).rgid_new=e,o.rgid_old=r,o.ifThenHistory=i||new Map,o}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule;this.ifThenHistory.forEach((function(e,n){var r=t.rgroups.get(n);r.ifthen=e,t.rgroups.set(n,r)}))}},{key:"invert",value:function(){return new uo(this.rgid_old,this.rgid_new)}}]),n}(Bi);function co(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var fo=function(e){p(n,e);var t=co(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,zi.FRAGMENT_ADD)).frid="undefined"===typeof e?null:e,r}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule,n=new ce;null===this.frid?this.frid=t.frags.add(n):t.frags.set(this.frid,n),e.frags.set(this.frid,new Yr(n)),e.enhancedFlags.set(this.frid,new qr)}},{key:"invert",value:function(){return new ho(this.frid)}}]),n}(Bi),ho=function(e){p(n,e);var t=co(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,zi.FRAGMENT_DELETE,100)).frid=e,r}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule;if(t.frags.get(this.frid)){Bi.invalidateItem(e,"frags",this.frid,1),e.frags.delete(this.frid),t.frags.delete(this.frid);var n=e.enhancedFlags.get(this.frid);n&&(e.clearVisel(n.visel),e.enhancedFlags.delete(this.frid))}}},{key:"invert",value:function(){return new fo(this.frid)}}]),n}(Bi);function po(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var vo=function(e){p(n,e);var t=po(n);function n(e,r){var i;return(0,l.Z)(this,n),(i=t.call(this,zi.FRAGMENT_ADD_STEREO_ATOM,100)).data={frid:e,aid:r},i}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.data,n=t.aid,r=t.frid,i=e.molecule.frags.get(r);i&&(i.updateStereoAtom(e.molecule,n,r,!0),Bi.invalidateEnhancedFlag(e,r))}},{key:"invert",value:function(){return new mo(this.data.frid,this.data.aid)}}]),n}(Bi),mo=function(e){p(n,e);var t=po(n);function n(e,r){var i;return(0,l.Z)(this,n),(i=t.call(this,zi.FRAGMENT_DELETE_STEREO_ATOM,90)).data={frid:e,aid:r},i}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.data,n=t.aid,r=t.frid,i=e.molecule.frags.get(r);i&&(i.updateStereoAtom(e.molecule,n,r,!1),Bi.invalidateEnhancedFlag(e,r))}},{key:"invert",value:function(){var e=this.data,t=e.aid,n=e.frid;return new vo(n,t)}}]),n}(Bi);function go(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var yo=function(e){p(n,e);var t=go(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,zi.FRAGMENT_STEREO_FLAG,6)).frid=e,r}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule;t.frags.get(this.frid).updateStereoFlag(t),Bi.invalidateEnhancedFlag(e,this.frid)}},{key:"invert",value:function(){return new n(this.frid)}}]),n}(Bi);function bo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var xo=function(e){p(n,e);var t=bo(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,zi.CALC_IMPLICIT_H,10)).atomIds=e,r}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.atomIds;e.molecule.setImplicitHydrogen(t)}},{key:"invert",value:function(){return new n(this.atomIds)}}]),n}(Bi);function _o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var wo=function(e){p(n,e);var t=_o(n);function n(e,r){var i;return(0,l.Z)(this,n),(i=t.call(this,zi.LOOP_MOVE)).data={id:e,d:r},i}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.data,n=t.id,r=t.d,i=e.reloops.get(n);if(i&&i.visel){var o=fe.obj2scaled(r,e.render.options);i.visel.translate(o)}this.data.d=r.negated()}},{key:"invert",value:function(){var e=new n;return e.data=this.data,e}}]),n}(Bi);function So(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Eo=function(e){p(n,e);var t=So(n);function n(e,r,i){var o;return(0,l.Z)(this,n),(o=t.call(this,zi.R_GROUP_ATTR)).data={rgid:e,attribute:r,value:i},o.data2=null,o}return(0,c.Z)(n,[{key:"execute",value:function(e){if(this.data){var t=this.data,n=t.rgid,r=t.attribute,i=t.value,o=e.molecule.rgroups.get(n);if(!o)return;this.data2||(this.data2={rgid:n,attribute:r,value:o[r]}),o[r]=i,Bi.invalidateItem(e,"rgroups",n)}}},{key:"invert",value:function(){var e=new n;return e.data=this.data2,e.data2=this.data,e}},{key:"isDummy",value:function(e){if(this.data){var t=this.data,n=t.rgid,r=t.attribute,i=t.value;return e.molecule.rgroups.get(n)[r]===i}return!1}}]),n}(Bi);function ko(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Oo=function(e){p(n,e);var t=ko(n);function n(e,r,i){var o;return(0,l.Z)(this,n),(o=t.call(this,zi.R_GROUP_FRAGMENT)).rgid_new=e,o.rg_new=i,o.rgid_old=null,o.rg_old=null,o.frid=r,o}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule;this.rgid_old=this.rgid_old||Oe.findRGroupByFragment(t.rgroups,this.frid),this.rg_old=this.rgid_old?t.rgroups.get(this.rgid_old):null,this.removeOld(t,e),this.setNew(t,e)}},{key:"removeOld",value:function(e,t){this.rg_old&&(this.rg_old.frags.delete(this.frid),t.clearVisel(t.rgroups.get(this.rgid_old).visel),0===this.rg_old.frags.size?(t.rgroups.delete(this.rgid_old),e.rgroups.delete(this.rgid_old),t.markItemRemoved()):t.markItem("rgroups",this.rgid_old,1))}},{key:"setNew",value:function(e,t){if(this.rgid_new){var n=e.rgroups.get(this.rgid_new);n?t.markItem("rgroups",this.rgid_new,1):(n=this.rg_new||new Oe,e.rgroups.set(this.rgid_new,n),t.rgroups.set(this.rgid_new,new Jr(n))),n.frags.add(this.frid)}}},{key:"invert",value:function(){return new n(this.rgid_old,this.frid,this.rg_old)}}]),n}(Bi);function Ao(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Co=function(e){p(n,e);var t=Ao(n);function n(e,r,i){var o;return(0,l.Z)(this,n),(o=t.call(this,zi.RXN_ARROW_MOVE)).data={id:e,d:r,noinvalidate:i},o}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule,n=this.data.id,r=this.data.d;t.rxnArrows.get(n).pos.forEach((function(e){return e.add_(r)})),e.rxnArrows.get(n).visel.translate(fe.obj2scaled(r,e.render.options)),this.data.d=r.negated(),this.data.noinvalidate||Bi.invalidateItem(e,"rxnArrows",n,1)}},{key:"invert",value:function(){var e=new n(this.data.id,this.data.d,this.data.noinvalidate);return e.data=this.data,e}}]),n}(Bi);function Mo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var To=function(e){p(n,e);var t=Mo(n);function n(e,r,i,o,a){var s;return(0,l.Z)(this,n),(s=t.call(this,zi.RXN_ARROW_RESIZE)).data={id:e,d:r,current:i,anchor:o,noinvalidate:a},s}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule,n=this.data.id,r=this.data.d,i=this.data.current,o=t.rxnArrows.get(n),a=this.data.anchor;if(a){var s,u,l,c,f=o.pos[0].get_xy0(),h=o.pos[1].get_xy0();if(Ce.isElliptical(o)){var d=(c=e.rxnArrows.get(n)).getReferencePoints();l=(0,M.Z)(d,3)[2]}if(He(a.x)===He(o.pos[1].x)&&He(a.y)===He(o.pos[1].y)&&(o.pos[1].x=a.x=i.x,i.x=h.x,o.pos[1].y=a.y=i.y,i.y=h.y),He(a.x)===He(o.pos[0].x)&&He(a.y)===He(o.pos[0].y)&&(o.pos[0].x=a.x=i.x,i.x=f.x,o.pos[0].y=a.y=i.y,i.y=f.y),He(a.x)===He(null===(s=l)||void 0===s?void 0:s.x)&&He(a.y)===He(null===(u=l)||void 0===u?void 0:u.y)){var p=c.getArrowParams(o.pos[0].x,o.pos[0].y,o.pos[1].x,o.pos[1].y).angle*Math.PI/180,v=Math.cos(p),m=Math.sin(p),g=i.x-a.x,y=(i.y-a.y)*v-g*m;o.height-=y;var b=c.getReferencePoints(),x=(0,M.Z)(b,3)[2];a.y=x.y,a.x=x.x}}else o.pos[1].add_(r);e.rxnArrows.get(n).visel.translate(fe.obj2scaled(r,e.render.options)),this.data.d=r.negated(),this.data.noinvalidate||Bi.invalidateItem(e,"rxnArrows",n,1)}},{key:"invert",value:function(){return new n(this.data.id,this.data.d,this.data.current,this.data.anchor,this.data.noinvalidate)}}]),n}(Bi);function Po(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Ro=function(e){p(n,e);var t=Po(n);function n(e,r,i){var o;return(0,l.Z)(this,n),(o=t.call(this,zi.RXN_PLUS_MOVE)).data={id:e,d:r,noinvalidate:i},o}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.data,n=t.id,r=t.d,i=t.noinvalidate;e.molecule.rxnPluses.get(n).pp.add_(r);var o=e.rxnPluses.get(n),a=fe.obj2scaled(r,e.render.options);o.visel.translate(a),this.data.d=r.negated(),i||Bi.invalidateItem(e,"rxnPluses",n,1)}},{key:"invert",value:function(){var e=new n;return e.data=this.data,e}}]),n}(Bi);function Io(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Lo=function(e){p(n,e);var t=Io(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,zi.RXN_PLUS_ADD)).data={plid:null,pos:e},r}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule,n=new Me;"number"===typeof this.data.plid?t.rxnPluses.set(this.data.plid,n):this.data.plid=t.rxnPluses.add(n);var r=this.data,i=r.pos,o=r.plid,a=t.rxnPluses.get(o);e.rxnPluses.set(o,new si(a)),t.rxnPlusSetPos(o,new Y(i)),Bi.invalidateItem(e,"rxnPluses",o,1)}},{key:"invert",value:function(){var e=new No;return e.data=this.data,e}}]),n}(Bi),No=function(e){p(n,e);var t=Io(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,zi.RXN_PLUS_DELETE)).data={plid:e,pos:null},r}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.data.plid,n=e.molecule;this.data.pos||(this.data.pos=n.rxnPluses.get(t).pp),e.markItemRemoved();var r=e.rxnPluses.get(t);r&&(e.clearVisel(r.visel),e.rxnPluses.delete(t),n.rxnPluses.delete(t))}},{key:"invert",value:function(){var e=new Lo;return e.data=this.data,e}}]),n}(Bi);function jo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Do=function(e){p(n,e);var t=jo(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_e.OpenAngle,o=arguments.length>2?arguments[2]:void 0;return(0,l.Z)(this,n),(e=t.call(this,zi.RXN_ARROW_ADD)).data={pos:r,mode:i,id:o},e}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule,n=new Ce({mode:this.data.mode});if(null==this.data.id){var r=t.rxnArrows.add(n);this.data.id=r}else t.rxnArrows.set(this.data.id,n);var i=this.data.id;e.rxnArrows.set(i,new ii(n));var o=k(this.data.pos);t.rxnArrowSetPos(i,o.map((function(e){return new Y(e)}))),Bi.invalidateItem(e,"rxnArrows",i,1)}},{key:"invert",value:function(){return new Bo(this.data.id)}}]),n}(Bi),Bo=function(e){p(n,e);var t=jo(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,zi.RXN_ARROW_DELETE)).data={id:e,pos:[],mode:_e.OpenAngle},r.performed=!1,r}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule,n=t.rxnArrows.get(this.data.id);this.data.pos=n.pos,this.data.mode=n.mode,this.performed=!0,e.markItemRemoved(),e.clearVisel(e.rxnArrows.get(this.data.id).visel),e.rxnArrows.delete(this.data.id),t.rxnArrows.delete(this.data.id)}},{key:"invert",value:function(){return new Do(this.data.pos,this.data.mode,this.data.id)}}]),n}(Bi);function zo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Fo=function(e){p(n,e);var t=zo(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae.line,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0;return(0,l.Z)(this,n),(e=t.call(this,zi.SIMPLE_OBJECT_ADD)).data={pos:r,mode:i,toCircle:o,id:a},e}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule,n=new Pe({mode:this.data.mode});if(null==this.data.id){var r=t.simpleObjects.add(n);this.data.id=r}else t.simpleObjects.set(this.data.id,n);var i=this.data.id;e.simpleObjects.set(i,new yi(n));var o=k(this.data.pos);this.data.toCircle&&(o[1]=Go(o[0],o[1])),t.simpleObjectSetPos(i,o.map((function(e){return new Y(e)}))),Bi.invalidateItem(e,"simpleObjects",i,1)}},{key:"invert",value:function(){return new Vo(this.data.id)}}]),n}(Bi),Vo=function(e){p(n,e);var t=zo(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,zi.SIMPLE_OBJECT_DELETE)).data={id:e,pos:[],mode:Ae.line,toCircle:!1},r.performed=!1,r}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule,n=t.simpleObjects.get(this.data.id);this.data.pos=n.pos,this.data.mode=n.mode,this.data.toCircle=n.toCircle,this.performed=!0,e.markItemRemoved(),e.clearVisel(e.simpleObjects.get(this.data.id).visel),e.simpleObjects.delete(this.data.id),t.simpleObjects.delete(this.data.id)}},{key:"invert",value:function(){return new Fo(this.data.pos,this.data.mode,this.data.toCircle,this.data.id)}}]),n}(Bi),Uo=function(e){p(n,e);var t=zo(n);function n(e,r,i){var o;return(0,l.Z)(this,n),(o=t.call(this,zi.SIMPLE_OBJECT_MOVE)).data={id:e,d:r,noinvalidate:i},o}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule,n=this.data.id,r=this.data.d;t.simpleObjects.get(n).pos.forEach((function(e){return e.add_(r)})),e.simpleObjects.get(n).visel.translate(fe.obj2scaled(r,e.render.options)),this.data.d=r.negated(),this.data.noinvalidate||Bi.invalidateItem(e,"simpleObjects",n,1)}},{key:"invert",value:function(){var e=new n(this.data.id,this.data.d,this.data.noinvalidate);return e.data=this.data,e}}]),n}(Bi);function Zo(e,t,n){var r=e.pos[0].get_xy0(),i=e.pos[1].get_xy0();He(t.x)===He(e.pos[1].x)&&(e.pos[1].x=t.x=n.x,n.x=i.x),He(t.y)===He(e.pos[1].y)&&(e.pos[1].y=t.y=n.y,n.y=i.y),He(t.x)===He(e.pos[0].x)&&(e.pos[0].x=t.x=n.x,n.x=r.x),He(t.y)===He(e.pos[0].y)&&(e.pos[0].y=t.y=n.y,n.y=r.y)}var Ho=function(e){p(n,e);var t=zo(n);function n(e,r,i,o,a,s){var u;return(0,l.Z)(this,n),(u=t.call(this,zi.SIMPLE_OBJECT_RESIZE)).data={id:e,d:r,current:i,anchor:o,noinvalidate:a,toCircle:s},u}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule,n=this.data.id,r=this.data.d,i=this.data.current,o=t.simpleObjects.get(n),a=this.data.anchor;if(o.mode===Ae.ellipse)if(a)Zo(o,a,i);else if(this.data.toCircle){var s=o.pos[1].get_xy0(),u=Go(o.pos[0],i);o.pos[1].x=u.x,o.pos[1].y=u.y,this.data.current=s}else{var l=o.pos[1].get_xy0();o.pos[1].x=i.x,o.pos[1].y=i.y,this.data.current=l}else if(o.mode===Ae.line&&a){var c=o.pos[0].get_xy0(),f=o.pos[1].get_xy0();He(a.x)===He(o.pos[1].x)&&He(a.y)===He(o.pos[1].y)&&(o.pos[1].x=a.x=i.x,i.x=f.x,o.pos[1].y=a.y=i.y,i.y=f.y),He(a.x)===He(o.pos[0].x)&&He(a.y)===He(o.pos[0].y)&&(o.pos[0].x=a.x=i.x,i.x=c.x,o.pos[0].y=a.y=i.y,i.y=c.y)}else o.mode===Ae.rectangle&&a?Zo(o,a,i):o.pos[1].add_(r);e.simpleObjects.get(n).visel.translate(fe.obj2scaled(r,e.render.options)),this.data.d=r.negated(),this.data.noinvalidate||Bi.invalidateItem(e,"simpleObjects",n,1)}},{key:"invert",value:function(){return new n(this.data.id,this.data.d,this.data.current,this.data.anchor,this.data.noinvalidate,this.data.toCircle)}}]),n}(Bi);function Go(e,t){var n=Y.diff(t,e),r=Math.abs(n.x)<Math.abs(n.y)?n.x:n.y;return new Y(e.x+(n.x>0?1:-1)*Math.abs(r),e.y+(n.y>0?1:-1)*Math.abs(r),0)}function Wo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var qo=function(e){p(n,e);var t=Wo(n);function n(e,r){var i;return(0,l.Z)(this,n),(i=t.call(this,zi.S_GROUP_ATOM_ADD,3)).data={sgid:e,aid:r},i}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.data,n=t.aid,r=t.sgid,i=e.molecule,o=i.atoms.get(n);if(i.sgroups.get(r).atoms.indexOf(n)>=0)throw new Error("The same atom cannot be added to an S-group more than once");if(!o)throw new Error("OpSGroupAtomAdd: Atom "+n+" not found");i.atomAddToSGroup(r,n),Bi.invalidateAtom(e,n)}},{key:"invert",value:function(){var e=new Ko;return e.data=this.data,e}}]),n}(Bi),Ko=function(e){p(n,e);var t=Wo(n);function n(e,r){var i;return(0,l.Z)(this,n),(i=t.call(this,zi.S_GROUP_ATOM_REMOVE,4)).data={sgid:e,aid:r},i}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.data,n=t.aid,r=t.sgid,i=e.molecule,o=i.atoms.get(n),a=i.sgroups.get(r);me.removeAtom(a,n),o.sgs.delete(r),Bi.invalidateAtom(e,n)}},{key:"invert",value:function(){var e=new qo;return e.data=this.data,e}}]),n}(Bi);function Yo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Xo=function(e){p(n,e);var t=Yo(n);function n(e,r,i){var o;return(0,l.Z)(this,n),(o=t.call(this,zi.S_GROUP_ATTR,4)).data={sgid:e,attr:r,value:i},o}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule,n=this.data.sgid,r=t.sgroups.get(n),i=e.sgroupData.get(n);"DAT"===r.type&&i&&(e.clearVisel(i.visel),e.sgroupData.delete(n)),this.data.value=r.setAttr(this.data.attr,this.data.value)}},{key:"invert",value:function(){var e=new n;return e.data=this.data,e}}]),n}(Bi);function $o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Jo=function(e){p(n,e);var t=$o(n);function n(e,r){var i;return(0,l.Z)(this,n),(i=t.call(this,zi.S_GROUP_DATA_MOVE)).data={id:e,d:r},i}return(0,c.Z)(n,[{key:"execute",value:function(e){var t,n=this.data,r=n.d,i=n.id;null===(t=e.molecule.sgroups.get(i).pp)||void 0===t||t.add_(r),this.data.d=r.negated(),Bi.invalidateItem(e,"sgroupData",i,1)}},{key:"invert",value:function(){var e=new n;return e.data=this.data,e}}]),n}(Bi);function Qo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var ea=function(e){p(n,e);var t=Qo(n);function n(e,r,i){var o;return(0,l.Z)(this,n),(o=t.call(this,zi.S_GROUP_ADD_TO_HIERACHY,100)).data={sgid:e,parent:r,children:i},o}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.data,n=t.sgid,r=t.parent,i=t.children,o=e.molecule,a=o.sgroups.get(n),s=o.sGroupForest.insert(a,r,i);this.data.parent=s.parent,this.data.children=s.children}},{key:"invert",value:function(){var e=new ta;return e.data=this.data,e}}]),n}(Bi),ta=function(e){p(n,e);var t=Qo(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,zi.S_GROUP_REMOVE_FROM_HIERACHY,110)).data={sgid:e},r}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.data.sgid,n=e.molecule;this.data.parent=n.sGroupForest.parent.get(t),this.data.children=n.sGroupForest.children.get(t),n.sGroupForest.remove(t)}},{key:"invert",value:function(){var e=new ea;return e.data=this.data,e}}]),n}(Bi);function na(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var ra=function(e){p(n,e);var t=na(n);function n(e,r,i,o,a){var s;return(0,l.Z)(this,n),(s=t.call(this,zi.S_GROUP_CREATE)).data={sgid:e,type:r,pp:i,expanded:o,name:a},s}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule,n=new me(this.data.type),r=this.data,i=r.sgid,o=r.pp,a=r.expanded,s=r.name;n.id=i,t.sgroups.set(i,n),o&&(t.sgroups.get(i).pp=new Y(o)),a&&(n.data.expanded=a),s&&(n.data.name=s),e.sgroups.set(i,new hi(t.sgroups.get(i))),Se.isFunctionalGroup(n)&&e.molecule.functionalGroups.add(new Se(n)),this.data.sgid=i}},{key:"invert",value:function(){var e=new ia;return e.data=this.data,e}}]),n}(Bi),ia=function(e){p(n,e);var t=na(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,zi.S_GROUP_DELETE,95)).data={sgid:e},r}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule,n=this.data.sgid,r=e.sgroups.get(n),i=e.sgroupData.get(n);if(r){if(this.data.type=r.item.type,this.data.pp=r.item.pp,"DAT"===r.item.type&&i&&(e.clearVisel(i.visel),e.sgroupData.delete(n)),e.clearVisel(r.visel),0!==r.item.atoms.length)throw new Error("S-Group not empty!");var o;if(Se.isFunctionalGroup(r.item))this.data.name=r.item.data.name,this.data.expanded=r.item.expanded,e.molecule.functionalGroups.forEach((function(e,t){e.relatedSGroupId===n&&(o=t)})),e.molecule.functionalGroups.delete(o);e.sgroups.delete(n),t.sgroups.delete(n)}}},{key:"invert",value:function(){var e=new ra;return e.data=this.data,e}}]),n}(Bi);function oa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var aa=function(e){p(n,e);var t=oa(n);function n(e,r,i){var o;return(0,l.Z)(this,n),(o=t.call(this,zi.TEXT_CREATE)).data={content:e,position:r,id:i},o}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule,n=new ze(this.data);if(null==this.data.id){var r=t.texts.add(n);this.data.id=r}else t.texts.set(this.data.id,n);var i=this.data.id;e.texts.set(i,new Oi(n)),t.textSetPosition(i,new Y(this.data.position)),Bi.invalidateItem(e,"texts",i,1)}},{key:"invert",value:function(){return new sa(this.data.id)}}]),n}(Bi),sa=function(e){p(n,e);var t=oa(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,zi.TEXT_DELETE)).data={id:e},r}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=e.molecule,n=t.texts.get(this.data.id);n&&(this.data.content=n.content,this.data.position=n.position,e.markItemRemoved(),e.clearVisel(e.texts.get(this.data.id).visel),e.texts.delete(this.data.id),t.texts.delete(this.data.id))}},{key:"invert",value:function(){return new aa(this.data.content,this.data.position,this.data.id)}}]),n}(Bi);function ua(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var la=function(e){p(n,e);var t=ua(n);function n(e,r){var i;return(0,l.Z)(this,n),(i=t.call(this,zi.TEXT_UPDATE)).data={id:e,content:r},i}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.data,n=t.id,r=t.content,i=e.molecule.texts.get(n);i&&(this.data.previousContent=i.content,i.content=r),Bi.invalidateItem(e,"texts",n,1)}},{key:"invert",value:function(){var e=new n(this.data.id,this.data.previousContent);return e.data.previousContent=this.data.content,e}}]),n}(Bi);function ca(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var fa=function(e){p(n,e);var t=ca(n);function n(e,r,i){var o;return(0,l.Z)(this,n),(o=t.call(this,zi.TEXT_MOVE)).data={id:e,d:r,noinvalidate:i},o}return(0,c.Z)(n,[{key:"execute",value:function(e){var t,n,r=e.molecule,i=this.data.id,o=this.data.d,a=r.texts.get(i);null===a||void 0===a||null===(t=a.position)||void 0===t||t.add_(o),null===(n=e.texts.get(i))||void 0===n||n.visel.translate(fe.obj2scaled(o,e.render.options)),this.data.d=o.negated(),this.data.noinvalidate||Bi.invalidateItem(e,"texts",i,1)}},{key:"invert",value:function(){var e=new n(this.data.id,this.data.d,this.data.noinvalidate);return e.data=this.data,e}}]),n}(Bi),ha=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,l.Z)(this,e),this.operations=t}return(0,c.Z)(e,[{key:"addOp",value:function(e,t){return t&&e.isDummy(t)||this.operations.push(e),e}},{key:"mergeWith",value:function(e){return this.operations=this.operations.concat(e.operations),this}},{key:"perform",value:function(t){var n=new e,r=k(this.operations).sort((function(e,t){return e.priority-t.priority}));return r.forEach((function(e){var r=e.perform(t);n.addOp(r)})),n}},{key:"isDummy",value:function(e){return void 0===this.operations.find((function(t){return!e||!t.isDummy(e)}))}}]),e}();function da(e,t,n,r,i){t.molecule;var o=e.molecule,a=o.getBondFragment(n);!function(e,t){var n=e.getFragmentIds(t),r=Array.from(n),i=e.clone(n),o=new Map;i.bonds.forEach((function(t,n){o.set(n,e.findBondId(r[t.begin],r[t.end]))}))}(o,a);var s=new ha;return s=i(e,t,n),Promise.resolve(s)}var pa=["id","dist"];function va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ma=.4,ga={atoms:ya,bonds:ba,enhancedFlags:function(e,t,n,r,i){var o,a=null;return e.enhancedFlags.forEach((function(n,r){var s=e.molecule.frags.get(r);if(s&&s.enhancedStereoFlag&&i.showStereoFlags){var u=s.stereoFlagPosition?new Y(s.stereoFlagPosition.x,s.stereoFlagPosition.y):ce.getDefaultStereoFlagPosition(e.molecule,r);if(u&&!(Math.abs(t.x-u.x)>=1)){var l=Math.abs(t.y-u.y);l<.3&&(!a||l<o)&&(a={id:r,dist:o=l})}}})),a},sgroupData:function(e,t){var n=null,r=null;return e.sgroupData.forEach((function(e,i){if("DAT"!==e.sgroup.type)throw new Error("Data group expected");if("MRV_IMPLICIT_H"!==e.sgroup.data.fieldName){var o=e.sgroup.dataArea,a=o.p0.y<t.y&&o.p1.y>t.y&&o.p0.x<t.x&&o.p1.x>t.x,s=Math.min(Math.abs(o.p0.x-t.x),Math.abs(o.p1.x-t.x));a&&(null===r||s<n)&&(r={id:i,dist:s},n=s)}})),r},sgroups:function(e,t){var n=null,r=ma;if(e.molecule.sgroups.forEach((function(e,i){if(e.functionalGroup&&!e.expanded){var o=e.firstSgroupAtom.pp,a=e.bracketDir,s=a.rotateSC(1,0),u=new Y(Y.dot(t,a),Y.dot(t,s)),l=new Y(.625,.625),c={p0:Y.diff(o,l),p1:Y.sum(o,l)},f=c.p0.y<u.y&&c.p1.y>u.y&&c.p0.x<u.x&&c.p1.x>u.x,h=Math.min(Math.abs(c.p0.x-u.x),Math.abs(c.p1.x-u.x));f&&(null===n||h<r)&&(n=i,r=h)}else{var d=e.bracketDir,p=d.rotateSC(1,0),v=new Y(Y.dot(t,d),Y.dot(t,p));e.areas.forEach((function(e){var t=e.p0.y<v.y&&e.p1.y>v.y&&e.p0.x<v.x&&e.p1.x>v.x,o=Math.min(Math.abs(e.p0.x-v.x),Math.abs(e.p1.x-v.x));t&&(null===n||o<r)&&(n=i,r=o)}))}})),null!==n)return{id:n,dist:r};return null},rxnArrows:function(e,t){var n=null,r=null,i=null;return e.rxnArrows.forEach((function(o,a){var s=o.calcDistance(t,e.render.options.scale);s.minDist<.3&&(!i||s.minDist<n)&&(n=s.minDist,r=s.refPoint,i={id:a,dist:n,ref:r})})),i},rxnPluses:function(e,t){var n=null,r=null;return e.rxnPluses.forEach((function(e,i){var o=e.item.pp,a=Math.max(Math.abs(t.x-o.x),Math.abs(t.y-o.y));a<.3&&(!r||a<n)&&(r={id:i,dist:n=a})})),r},frags:function(e,t,n,r,i){r=Math.min(r||ma,ma);var o=e.molecule,a=ya(e,t,n,r);if(a)return{id:o.atoms.get(a.id).fragment,dist:a.dist};var s=ba(e,t,n,r,i);if(s){var u=o.bonds.get(s.id).begin;return{id:o.atoms.get(u).fragment,dist:s.dist}}return null},rgroups:function(e,t,n,r){r=Math.min(r||ma,ma);var i=null;return e.rgroups.forEach((function(e,o){if(o!==n&&e.labelBox&&e.labelBox.contains(t,.5)){var a=Y.dist(e.labelBox.centre(),t);(!i||a<r)&&(i={id:o,dist:r=a})}})),i},simpleObjects:function(e,t){var n=null,r=null,i=null;return e.simpleObjects.forEach((function(o,a){var s=o.calcDistance(t,e.render.options.scale);s.minDist<.3&&(!i||s.minDist<n)&&(n=s.minDist,r=s.refPoint,i={id:a,dist:n,ref:r})})),i},texts:function(e,t){var n=null,r=null;return e.texts.forEach((function(i,o){var a=i.getReferencePoints(e),s=a[0].x,u=a[0].y,l=a[2].x,c=a[2].y,f=[];t.x>=s&&t.x<=l&&(t.y<u?f.push(u-t.y):t.y>c?f.push(t.y-c):f.push(t.y-u,c-t.y)),t.x<s&&t.y<u&&f.push(Y.dist(new Y(s,u),t)),t.x>l&&t.y>c&&f.push(Y.dist(new Y(l,c),t)),t.x<s&&t.y>c&&f.push(Y.dist(new Y(s,c),t)),t.x>l&&t.y<u&&f.push(Y.dist(new Y(l,u),t)),t.y>=u&&t.y<=c&&(t.x<s?f.push(s-t.x):t.x>l?f.push(t.x-l):f.push(0));var h=Math.min.apply(Math,f);h<ma&&(!r||h<n)&&(r={id:o,dist:n=h})})),r}};function ya(e,t,n,r){var i=null,o=n&&"atoms"===n.map?n.id:null;return r=r||.4,r=Math.min(r,.4),e.atoms.forEach((function(e,n){if(n!==o){var a=Y.dist(t,e.a.pp);a<r&&(i=n,r=a)}})),null!==i?{id:i,dist:r}:null}function ba(e,t,n,r,i){var o=null,a=null,s=.32000000000000006,u=n&&"bonds"===n.map?n.id:null;r=r||s;var l=r=Math.min(r,s);return e.bonds.forEach((function(n,r){if(r!==u){var i=e.atoms.get(n.b.begin).a.pp,o=e.atoms.get(n.b.end).a.pp,s=Y.lc2(i,.5,o,.5),c=Y.dist(t,s);c<l&&(l=c,a=r)}})),e.bonds.forEach((function(n,i){if(i!==u){var a=e.molecule.halfBonds.get(n.b.hb1),s=a.dir,l=a.norm,c=e.atoms.get(n.b.begin).a.pp,f=e.atoms.get(n.b.end).a.pp;if(Y.dot(t.sub(c),s)*Y.dot(t.sub(f),s)<0){var h=Math.abs(Y.dot(t.sub(c),l));h<r&&(o=i,r=h)}}})),null!==a?{id:a,dist:l}:null!==o&&r>ma*i?{id:o,dist:r}:null}var xa={atom:ya,item:function(e,t,n,i,o){return(n=n||Object.keys(ga)).reduce((function(n,a){var s=n?n.dist:null,u=ga[a](e,t,i,s,o);return null!==u&&(null===n||u.dist<n.dist)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?va(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({map:a,id:u.id,dist:u.dist},(0,N.Z)(u,pa)):n}),null)},merge:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["atoms","bonds"],r=arguments.length>3?arguments[3]:void 0,i={atoms:new Map,bonds:new Map},o=e.molecule;t.atoms.forEach((function(e){i.atoms.set(e,o.atoms.get(e).pp)})),t.bonds.forEach((function(e){var t=o.bonds.get(e);i.bonds.set(e,Y.lc2(o.atoms.get(t.begin).pp,.5,o.atoms.get(t.end).pp,.5))}));var a={};return n.forEach((function(n){a[n]=Array.from(i[n].keys()).reduce((function(o,a){var s={map:n,id:a},u=ga[n](e,i[n].get(a),s,null,r);return u&&!t[n].includes(u.id)&&o.set(a,u.id),o}),new Map)})),a}};function _a(e,t,n){return e.molecule.atoms.get(t)[n]}function wa(e,t){return e.atoms.get(t).a.neighbors.length}function Sa(e,t){return Array.from(e.atoms.get(t).a.sgs)}function Ea(e,t){return e.molecule.atoms.get(t).pp}function ka(e,t){return t.filter((function(t){return null!==e.atoms.get(t).stereoLabel}))}function Oa(e){return["atoms","bonds","frags","sgroups","rgroups","rxnArrows","rxnPluses","simpleObjects","texts"].reduce((function(t,n){return t[n]=Array.from(e[n].keys()),t}),{})}function Aa(e,t,n){var r,i=[],o=Ea(e,t),a=e.molecule.findBondId(t,e.molecule.atomGetNeighbors(t)[0].aid),s=e.molecule.bonds.get(a).type;e.molecule.atomGetNeighbors(t).forEach((function(t){var n=Ea(e,t.aid);Y.dist(o,n)<.1||i.push({id:t.aid,v:Y.diff(n,o)})})),i.sort((function(e,t){return Math.atan2(e.v.y,e.v.x)-Math.atan2(t.v.y,t.v.x)}));var u,l=0,c=0;for(r=0;r<i.length;r++)(u=Y.angle(i[r].v,i[(r+1)%i.length].v))<0&&(u+=2*Math.PI),u>c&&(l=r,c=u);var f=new Y(1,0);if(i.length>0){if(1===i.length){c=-4*Math.PI/3;var h=e.molecule.atomGetNeighbors(t)[0];if(wa(e,h.aid)>1){var d=[],p=Ea(e,h.aid),v=Y.diff(o,p),m=Math.atan2(v.y,v.x);e.molecule.atomGetNeighbors(h.aid).forEach((function(t){var n=Ea(e,t.aid);if(!(t.bid===h.bid||Y.dist(p,n)<.1)){var r=Y.diff(n,p),i=Math.atan2(r.y,r.x)-m;i<0&&(i+=2*Math.PI),d.push(i)}})),d.sort((function(e,t){return e-t})),d[0]<=1.01*Math.PI&&d[d.length-1]<=1.01*Math.PI&&(c*=-1)}}if(1===i.length&&s===(null===n||void 0===n?void 0:n.type)&&((null===n||void 0===n?void 0:n.type)===oe.PATTERN.TYPE.DOUBLE||(null===n||void 0===n?void 0:n.type)===oe.PATTERN.TYPE.TRIPLE)||s===oe.PATTERN.TYPE.SINGLE&&(null===n||void 0===n?void 0:n.type)===oe.PATTERN.TYPE.TRIPLE||s===oe.PATTERN.TYPE.TRIPLE&&(null===n||void 0===n?void 0:n.type)===oe.PATTERN.TYPE.SINGLE){var g=e.molecule.bonds.get(a).angle;u=g>-90&&g<90&&i[0].v.x>0?g*Math.PI/180+Math.PI:g*Math.PI/180}else u=c/2+Math.atan2(i[l].v.y,i[l].v.x);f=f.rotate(u)}f.add_(o);var y=xa.atom(e,f,null,.1);return{atom:y=null===y?{label:"C"}:y.id,pos:f}}function Ca(e,t){return e.molecule.sgroups.filter((function(e,n){return!n.data.attached&&!n.data.absolute&&0===(0,R.difference)(n.atoms,t).length}))}function Ma(e,t,n){var r=new ha;return Object.keys(n).forEach((function(e){r.addOp(new Eo(t,e,n[e]))})),r.perform(e)}function Ta(e,t,n){var r=new ha;return r.addOp(new Oo(t,n)),r.perform(e)}function Pa(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=new ha;return e.molecule.rgroups.get(n)||i.addOp(new uo(t,n,r)),i.perform(e)}function Ra(e,t,n,r){var i=r.fieldValue;return"string"===typeof i||"DAT"!==t?Na(e,t,n,r,e.molecule.sgroups.newId()):i.reduce((function(i,o){var a=Object.assign({},r);return a.fieldValue=o,i.mergeWith(Na(e,t,n,a,e.molecule.sgroups.newId()))}),new ha)}function Ia(e,t){var n=new ha;return Object.keys(t).forEach((function(r){n.addOp(new Xo(e,r,t[r]))})),n}function La(e,t){var n=new ha,r=e.molecule,i=e.sgroups.get(t).item;"SRU"===i.type&&(r.sGroupsRecalcCrossBonds(),i.neiAtoms.forEach((function(t){"*"===_a(e,t,"label")&&n.addOp(new Vi(t,"label","C"))})));var o=r.sgroups.get(t),a=me.getAtoms(r,o),s=o.getAttrs();return n.addOp(new ta(t)),a.forEach((function(e){n.addOp(new Ko(t,e))})),n.addOp(new ia(t)),(n=n.perform(e)).mergeWith(Ia(t,s)),n}function Na(e,t,n,r,i,o,a,s){var u=new ha;if(i=i-0===i?i:e.molecule.sgroups.newId(),"SUP"===t?u.addOp(new ra(i,t,o,a,s)):u.addOp(new ra(i,t,o)),n.forEach((function(e){u.addOp(new qo(i,e))})),u.addOp("DAT"!==t?new ea(i):new ea(i,-1,[])),u=u.perform(e),"SRU"===t){e.molecule.sGroupsRecalcCrossBonds();var l=new ha;e.sgroups.get(i).item.neiAtoms.forEach((function(t){var n=e.atoms.get(t).a.isPlainCarbon();1===wa(e,t)&&n&&l.addOp(new Vi(t,"label","*"))})),(l=l.perform(e)).mergeWith(u),u=l}return function(e,t,n){var r=new ha;return Object.keys(n).forEach((function(e){r.addOp(new Xo(t,e,n[e]))})),r.perform(e)}(e,i,r).mergeWith(u)}function ja(e,t,n,r,i){if(e===Rs.Bond)return function(e,t,n,r){var i=e.molecule,o=Fa(i,n);r.bonds&&(o=(0,F.uniq)(o.concat(r.bonds)));return o.reduce((function(n,r){var o=i.bonds.get(r);return n.action=n.action.mergeWith(Ra(e,t.type,[o.begin,o.end],t.attrs)),n.selection.bonds.push(r),n}),{action:new ha,selection:{atoms:n,bonds:[]}})}(t,n,r,i);var o,a=(o=t.molecule,(i.bonds||[]).reduce((function(e,t){var n=o.bonds.get(t);return e=e.concat([n.begin,n.end])}),[])),s=(0,F.uniq)(r.concat(a));return e===Rs.Fragment?Da(t,n,s,Array.from(t.atoms.keys())):e===Rs.Multifragment?function(e,t,n){var r=Fa(e.molecule,n);return{action:Ra(e,t.type,n,t.attrs),selection:{atoms:n,bonds:r}}}(t,n,s):e===Rs.Group?Da(t,n,s,s):e===Rs.Atom?function(e,t,n){return n.reduce((function(n,r){return n.action=n.action.mergeWith(Ra(e,t.type,[r],t.attrs)),n}),{action:new ha,selection:{atoms:n,bonds:[]}})}(t,n,s):{action:Ra(t,n.type,r,n.attrs)}}function Da(e,t,n,r){var i=new ee(n.map((function(t){return e.atoms.get(t).a.fragment})));return Array.from(i).reduce((function(n,i){var o=r.reduce((function(t,n){var r=e.atoms.get(n).a;return i===r.fragment&&t.push(n),t}),[]),a=Fa(e.molecule,o);return n.action=n.action.mergeWith(Ra(e,t.type,o,t.attrs)),n.selection.atoms=n.selection.atoms.concat(o),n.selection.bonds=n.selection.bonds.concat(a),n}),{action:new ha,selection:{atoms:[],bonds:[]}})}function Ba(e,t,n){var r=Sa(t,n);return r.length>0&&(r.forEach((function(t){e.addOp(new Ko(t,n))})),!0)}function za(e,t,n){var r=t.molecule,i=new Map;n.forEach((function(e){Sa(t,e).forEach((function(e){i.set(e,i.has(e)?i.get(e)+1:1)}))})),i.forEach((function(n,i){var o=t.sgroups.get(i).item;if(me.getAtoms(t.molecule,o).length===n){var a=r.sgroups.get(i);e.mergeWith(Ia(i,a.getAttrs())),e.addOp(new ta(i)),e.addOp(new ia(i))}}))}function Fa(e,t){var n=new ee(t);return Array.from(e.bonds.keys()).filter((function(t){var r=e.bonds.get(t);return n.has(r.begin)&&n.has(r.end)}))}function Va(e,t,n,r,i,o){var a;if(void 0===r){var s=Aa(e,n,t);r=s.atom,i=s.pos}var u=new ha,l=e.molecule,c=!1,f=null;"number"!==typeof n?"number"===typeof r&&(f=_a(e,r,"fragment")):(f=_a(e,n,"fragment"),"number"===typeof r&&(c=!0)),null==f&&(f=u.addOp((new fo).perform(e)).frid),"number"!==typeof n?(n.fragment=f,n=u.addOp(new Gi(n,i).perform(e)).data.aid,"number"===typeof r&&Qa(u,e,[n],r),i=o):"*"===_a(e,n,"label")&&u.addOp(new Vi(n,"label","C").perform(e)),"number"!==typeof r?(r.fragment=f,r=u.addOp(new Gi(r,i).perform(e)).data.aid,"number"===typeof n&&Qa(u,e,[r],n)):"*"===_a(e,r,"label")&&u.addOp(new Vi(r,"label","C").perform(e));var h=u.addOp(new Ji(n,r,t).perform(e)).data.bid,d=l.bonds.get(h);return d&&(u.addOp(new xo([d.begin,d.end]).perform(e)),u.mergeWith(Za(e,d))),u.operations.reverse(),c&&Ja(u,e,n,r),null!==(a=l.frags.get(f||0))&&void 0!==a&&a.stereoAtoms&&!t.stereo&&u.addOp(new yo(f||0).perform(e)),[u,n,r,h]}function Ua(e,t,n,r){var i=e.molecule,o=new ha;return(Array.isArray(t)?t:[t]).forEach((function(t){Object.keys(oe.attrlist).forEach((function(a){if(a in n||r){var s=a in n?n[a]:oe.attrGetDefault(a);if(o.addOp(new Ki(t,a,s).perform(e)),"stereo"===a&&a in n){var u=i.bonds.get(t);u&&(o.addOp(new xo([u.begin,u.end]).perform(e)),o.mergeWith(Za(e,u)))}}}))})),o}function Za(e,t,n){var r,i,o=new ha,a=e.molecule,s=null===(r=a.atoms.get(null===t||void 0===t?void 0:t.begin))||void 0===r?void 0:r.fragment,u=null===(i=a.atoms.get(null===t||void 0===t?void 0:t.end))||void 0===i?void 0:i.fragment,l=[];return a.bonds.forEach((function(e){var t,n;(null===(t=a.atoms.get(e.begin))||void 0===t?void 0:t.fragment)===s&&l.push(e),s!==u&&(null===(n=a.atoms.get(e.begin))||void 0===n?void 0:n.fragment)===u&&l.push(e)})),Ha(a,l,t).forEach((function(t,r){var i;(null===(i=a.atoms.get(r))||void 0===i?void 0:i.stereoLabel)!==t.stereoLabel&&o.mergeWith(function(e,t,n,r){var i=new ha,o=e.molecule.atoms.get(t);if(o){var a=o.fragment;"stereoParity"in n&&i.addOp(new Vi(t,"stereoParity",n.stereoParity).perform(e)),"stereoLabel"in n&&(i.addOp(new Vi(t,"stereoLabel",n.stereoLabel).perform(e)),null===n.stereoLabel?i.addOp(new mo(a,t).perform(e)):i.addOp(new vo(a,t).perform(e))),r&&i.operations.reverse()}return i}(e,r,t,n))})),o}function Ha(e,t,n){var r=new Map,i=[];return t.forEach((function(t){if(t){var n=e.atomGetNeighbors(t.begin),o=e.atomGetNeighbors(t.end);if(he.isCorrectStereoCenter(t,n,o,e)){var a,s,u=null===(a=e.atoms.get(t.begin))||void 0===a?void 0:a.stereoLabel;null!=u&&null!=(null===(s=r.get(t.begin))||void 0===s?void 0:s.stereoLabel)||r.set(t.begin,{stereoParity:Ga(t.stereo),stereoLabel:u||"".concat(Q.Abs)}),i.push(t.begin)}else i.includes(t.begin)||r.set(t.begin,{stereoParity:re.PATTERN.STEREO_PARITY.NONE,stereoLabel:null}),i.includes(t.end)||r.set(t.end,{stereoParity:re.PATTERN.STEREO_PARITY.NONE,stereoLabel:null})}})),n&&(i.includes(n.begin)||r.set(n.begin,{stereoParity:re.PATTERN.STEREO_PARITY.NONE,stereoLabel:null}),i.includes(n.end)||r.set(n.end,{stereoParity:re.PATTERN.STEREO_PARITY.NONE,stereoLabel:null})),r}function Ga(e){var t=null;switch(e){case oe.PATTERN.STEREO.UP:t=re.PATTERN.STEREO_PARITY.ODD;break;case oe.PATTERN.STEREO.EITHER:t=re.PATTERN.STEREO_PARITY.EITHER;break;case oe.PATTERN.STEREO.DOWN:t=re.PATTERN.STEREO_PARITY.EVEN}return t}function Wa(e,t,n,r){var i=new ha,o=t;(r.stereo!==oe.PATTERN.STEREO.NONE&&r.type===oe.PATTERN.TYPE.SINGLE||n.type===oe.PATTERN.TYPE.DATIVE)&&n.type===r.type&&n.stereo===r.stereo&&(i.mergeWith(function(e,t){var n=e.molecule.bonds.get(t),r=new ha;return r.addOp(new Qi(t).perform(e)),Number.isInteger(null===n||void 0===n?void 0:n.end)&&Number.isInteger(null===n||void 0===n?void 0:n.begin)&&r.addOp(new Ji(null===n||void 0===n?void 0:n.end,null===n||void 0===n?void 0:n.begin,n).perform(e)),r}(e,t)),o=i.operations[1].data.bid);var a=qa.includes(r.type)?qa:null;return r.stereo===oe.PATTERN.STEREO.NONE&&r.type===oe.PATTERN.TYPE.SINGLE&&n.stereo===oe.PATTERN.STEREO.NONE&&a&&(r.type=a[(a.indexOf(n.type)+1)%a.length]),Ua(e,o,r).mergeWith(i)}var qa=[oe.PATTERN.TYPE.SINGLE,oe.PATTERN.TYPE.DOUBLE,oe.PATTERN.TYPE.TRIPLE];function Ka(e,t,n){n=Object.assign({},n);var r=new ha;n.fragment=r.addOp((new fo).perform(e)).frid;var i=r.addOp(new Gi(n,t).perform(e)).data.aid;return r.addOp(new xo([i]).perform(e)),r}function Ya(e,t,n,r){var i=new ha;return(Array.isArray(t)?t:[t]).forEach((function(t){var o;Object.keys(re.attrlist).forEach((function(o){if(("attpnt"!==o||o in n)&&(o in n||r)){var a=o in n?n[o]:re.attrGetDefault(o);switch(o){case"stereoLabel":case"stereoParity":o in n&&a&&i.addOp(new Vi(t,o,a).perform(e));break;default:i.addOp(new Vi(t,o,a).perform(e))}}})),r||!("label"in n)||null===n.label||"L#"===n.label||"atomList"in n||i.addOp(new Vi(t,"atomList",null).perform(e)),i.addOp(new xo([t]).perform(e));var a=e.molecule.atomGetNeighbors(t),s=e.molecule.bonds.get(null===(o=a[0])||void 0===o?void 0:o.bid);s&&i.mergeWith(Za(e,s))})),i}function Xa(e,t,n){var r=new ha;return t.forEach((function(t){var i=e.molecule.atoms.get(t),o=i.fragment;r.addOp(new Vi(t,"fragment",n)),null!==i.stereoLabel&&(r.addOp(new vo(n,t)),r.addOp(new mo(o,t)))})),r.perform(e)}function $a(e,t,n){var r,i;if(t===n)return new ha;var o=new ha;Ja(o,e,t,n);var a=new ha,s=e.molecule.atomGetNeighbors(t);s.forEach((function(t){var r=e.molecule.bonds.get(t.bid);if(n!==r.begin&&n!==r.end){var i=r.begin===t.aid?t.aid:n,o=r.begin===t.aid?n:t.aid,s=e.molecule.findBondId(i,o);if(null===s)a.addOp(new Ji(i,o,r));else{var u=oe.getAttrHash(r);Object.keys(u).forEach((function(e){a.addOp(new Ki(s,e,u[e]))}))}a.addOp(new Qi(t.bid))}else a.addOp(new Qi(t.bid))}));var u=re.getAttrHash(e.molecule.atoms.get(t));1===wa(e,t)&&"*"===u.label&&(u.label="C"),Object.keys(u).forEach((function(e){"stereoLabel"!==e&&"stereoParity"!==e&&a.addOp(new Vi(n,e,u[e]))})),Ba(a,e,t)&&za(a,e,[t]),a.addOp(new Wi(t)),a.addOp(new xo([n]));var l=e.molecule.atomGetNeighbors(n),c=e.molecule.bonds.get((null===(r=l[0])||void 0===r?void 0:r.bid)||(null===(i=s[0])||void 0===i?void 0:i.bid));return a.perform(e).mergeWith(o).mergeWith(Za(e,c))}function Ja(e,t,n,r){var i=_a(t,n,"fragment"),o=_a(t,r,"fragment");if(o!==i&&"number"===typeof o){var a=t.molecule,s=Oe.findRGroupByFragment(a.rgroups,o);"undefined"!==typeof s&&e.mergeWith(Ta(t,null,o)).mergeWith(Pa(t,0,s));var u=a.getFragmentIds(i),l=[];a.atoms.forEach((function(e,t){e.fragment===o&&l.push(t)}));var c=Xa(t,l,i);Qa(e,t,u,r),e.addOp(new ho(o).perform(t)),e.mergeWith(c)}}function Qa(e,t,n,r){Sa(t,r).forEach((function(r){var i=t.molecule.sgroups.get(r);"DAT"===i.type&&["Atom","Bond","Group"].includes(i.data.context)||(0,F.without)(i.atoms,n).forEach((function(n){return e.addOp(new qo(r,n).perform(t))}))}))}function es(e,t){var n=new ha;return n.addOp(new to(t)),n.perform(e)}function ts(e,t){var n=new ha;if(!t)return n;var r=new Set;return t.atoms.forEach((function(t,i){r.has(t)||r.has(i)||(n=$a(e,i,t).mergeWith(n),r.add(t).add(i))})),n=function(e,t){var n=e.molecule,r=new Map,i=new ha;return t.forEach((function(e,t){var i=n.bonds.get(t),o=n.bonds.get(e);if(i&&o){var a=ji.mergeBondsParams(n,i,n,o);a.merged&&(r.set(i.begin,a.cross?o.end:o.begin),r.set(i.end,a.cross?o.begin:o.end))}})),r.forEach((function(t,n){i=$a(e,n,t).mergeWith(i)})),i}(e,t.bonds).mergeWith(n),n}function ns(e,t){var n=e.render.ctab.molecule,r=t||{atoms:Array.from(n.atoms.keys()),bonds:Array.from(n.bonds.keys())};return function(e,t){var n={atoms:new Map(t.atoms),bonds:new Map(t.bonds)};return t.bonds.forEach((function(t,r){var i=e.bonds.get(r),o=e.bonds.get(t);ji.mergeBondsParams(e,i,e,o).merged?(n.atoms.delete(i.begin),n.atoms.delete(i.end)):n.bonds.delete(r)})),0===n.atoms.size&&0===n.bonds.size?null:n}(n,e.findMerge(r,["atoms","bonds"]))}function rs(e){if(!e)return null;var t={atoms:Array.from(e.atoms.values()),bonds:Array.from(e.bonds.values())};return{map:"merge",id:+Date.now(),items:t}}function is(e,t,n){n=new Y(n);var r=new ha,i=e.molecule,o=new ee,a=new ee;if(t.atoms){var s=new ee(t.atoms),u=[];if(e.bonds.forEach((function(e,t){if(s.has(e.b.begin)&&s.has(e.b.end))return u.push(t),void["hb1","hb2"].forEach((function(t){var n=i.halfBonds.get(e.b[t]).loop;n>=0&&o.add(n)}));s.has(e.b.begin)?a.add(e.b.begin):s.has(e.b.end)&&a.add(e.b.end)})),u.forEach((function(e){r.addOp(new Xi(e,n))})),o.forEach((function(t){e.reloops.get(t)&&e.reloops.get(t).visel&&r.addOp(new wo(t,n))})),t.atoms.forEach((function(e){r.addOp(new Zi(e,n,!a.has(e)))})),t.sgroupData&&0===t.sgroupData.length)Ca(e,t.atoms).forEach((function(e){r.addOp(new Jo(e.id,n))}))}return t.rxnArrows&&t.rxnArrows.forEach((function(e){r.addOp(new Co(e,n,!0))})),t.rxnPluses&&t.rxnPluses.forEach((function(e){r.addOp(new Ro(e,n,!0))})),t.simpleObjects&&t.simpleObjects.forEach((function(e){r.addOp(new Uo(e,n,!0))})),t.sgroupData&&t.sgroupData.forEach((function(e){r.addOp(new Jo(e,n))})),t.enhancedFlags&&t.enhancedFlags.forEach((function(e){r.addOp(new ao(e,n))})),t.texts&&t.texts.forEach((function(e){r.addOp(new fa(e,n,!0))})),r.perform(e)}function os(e,t,n,r){for(var i=[t],o=new ee(i);i.length>0;){var a=i.shift();e.molecule.atomGetNeighbors(a).forEach((function(t){e.molecule.atoms.get(t.aid).fragment!==n||o.has(t.aid)||(o.add(t.aid),i.push(t.aid))}))}return Xa(e,o,r)}function as(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=new ha,i=Oe.findRGroupByFragment(e.molecule.rgroups,t);return e.molecule.atoms.forEach((function(n,o){if(n.fragment===t){var a=r.addOp((new fo).perform(e)).frid;r.mergeWith(os(e,o,t,a)),i&&r.mergeWith(Ta(e,i,a))}})),-1!==t&&(r.mergeWith(Ta(e,0,t)),r.addOp(new ho(t).perform(e)),r.mergeWith(Pa(e,0,i,n))),r.operations.reverse(),r}function ss(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=new ha,i=e.molecule.bonds.get(t),o=[];return r.addOp(new Qi(t)),n.includes(i.begin)||1!==wa(e,i.begin)||(Ba(r,e,i.begin)&&o.push(i.begin),r.addOp(new Wi(i.begin))),n.includes(i.end)||1!==wa(e,i.end)||(Ba(r,e,i.end)&&o.push(i.end),r.addOp(new Wi(i.end))),za(r,e,o),(r=r.perform(e)).addOp(new xo([i.begin,i.end]).perform(e)),r.mergeWith(Za(e,i,!1)),r.operations.reverse(),r}function us(e,t){h()(null!=!!t);var n=new ha,r=[],i=[];t={atoms:t.atoms||[],bonds:t.bonds||[],rxnPluses:t.rxnPluses||[],rxnArrows:t.rxnArrows||[],sgroupData:t.sgroupData||[],simpleObjects:t.simpleObjects||[],texts:t.texts||[]};var o=new ha;e.molecule.sgroups.forEach((function(n,r){(t.sgroupData.includes(r)||new ee(t.atoms).isSuperset(new ee(n.atoms)))&&o.mergeWith(La(e,r))})),t.atoms.forEach((function(n){e.molecule.atomGetNeighbors(n).forEach((function(e){-1===t.bonds.indexOf(e.bid)&&(t.bonds=t.bonds.concat([e.bid]))}))}));var a=new ha;t.bonds.forEach((function(n){var r=e.molecule.getBondFragment(n);i.indexOf(r)<0&&i.push(r),a.mergeWith(ss(e,n,t.atoms))})),t.atoms.forEach((function(t){var o=e.molecule.atoms.get(t).fragment;i.indexOf(o)<0&&i.push(o),Ba(n,e,t)&&r.push(t),n.addOp(new Wi(t))})),za(n,e,r),t.rxnArrows.forEach((function(e){n.addOp(new Bo(e))})),t.rxnPluses.forEach((function(e){n.addOp(new No(e))})),t.simpleObjects.forEach((function(e){n.addOp(new Vo(e))})),t.texts.forEach((function(e){n.addOp(new sa(e))})),(n=n.perform(e)).mergeWith(a);for(var s=i.map((function(t){return Oe.findRGroupByFragment(e.molecule.rgroups,t)}));i.length>0;)n=as(e,i.pop(),s).mergeWith(n);return n.mergeWith(o),n}function ls(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=cs(t),o=Y.diff(n,i),a=new ha,s=new Map,u=new Map,l={atoms:[],bonds:[]};return t.atoms.forEach((function(t,o){u.has(t.fragment)||u.set(t.fragment,a.addOp((new fo).perform(e)).frid);var c=Object.assign(t.clone(),{fragment:u.get(t.fragment)}),f=new Gi(c,Y.diff(t.pp,i).rotate(r).add(n)).perform(e);a.addOp(f),s.set(o,f.data.aid),l.atoms.push(f.data.aid)})),t.frags.forEach((function(t,n){t&&t.stereoAtoms.forEach((function(t){return a.addOp(new vo(u.get(n),s.get(t)).perform(e))}))})),t.bonds.forEach((function(t){var n=new Ji(s.get(t.begin),s.get(t.end),t).perform(e);a.addOp(n),l.bonds.push(n.data.bid)})),l.atoms.forEach((function(t){a.addOp(new xo([t]).perform(e))})),t.sgroups.forEach((function(t){var n=e.molecule.sgroups.newId(),r=t.atoms.map((function(e){return s.get(e)}));Na(e,t.type,r,t.data,n,t.pp?t.pp.add(o):null,"SUP"===t.type?t.data.expanded:null,t.data.name).operations.reverse().forEach((function(e){a.addOp(e)}))})),t.rxnArrows.forEach((function(t){a.addOp(new Do(t.pos.map((function(e){return e.add(o)})),t.mode).perform(e))})),t.rxnPluses.forEach((function(t){a.addOp(new Lo(t.pp.add(o)).perform(e))})),t.simpleObjects.forEach((function(t){a.addOp(new Fo(t.pos.map((function(e){return e.add(o)})),t.mode).perform(e))})),t.texts.forEach((function(t){a.addOp(new aa(t.content,t.position.add(o)).perform(e))})),t.rgroups.forEach((function(n,r){n.frags.forEach((function(t,n){a.addOp(new Oo(r,u.get(n)).perform(e))}));var i=t.rgroups.get(r).ifthen,o=t.rgroups.get(i)?i:0;a.mergeWith(Ma(e,r,n.getAttrs())).mergeWith(Pa(e,o,n.ifthen))})),a.operations.reverse(),[a,l]}function cs(e){var t=e.sgroups.keys().next().value;if(1===e.sgroups.size&&!e.sgroups.get(t).data.expanded)return e.atoms.get(0).pp;if(e.atoms.size>0){var n=1e50,r=n,i=-n,o=-r;return e.atoms.forEach((function(e){n=Math.min(n,e.pp.x),r=Math.min(r,e.pp.y),i=Math.max(i,e.pp.x),o=Math.max(o,e.pp.y)})),new Y((n+i)/2,(r+o)/2)}return e.rxnArrows.size>0?e.rxnArrows.get(0).center():e.rxnPluses.size>0?e.rxnPluses.get(0).pp:e.simpleObjects.size>0?e.simpleObjects.get(0).center():e.texts.size>0?e.texts.get(0).position:null}function fs(e,t,n){var r=new ha;return r.addOp(new Do(t,n)),r.perform(e)}function hs(e,t,n,r,i){var o=new ha;return o.addOp(new To(t,n,r,i,!1)),o.perform(e)}function ds(e,t){var n=new ha;return n.addOp(new Bo(t)),n.perform(e)}function ps(e,t,n,r){var i=e.molecule,o=new ha;if(t||(t=Oa(i)),!t.atoms)return o.perform(e);var a=t.atoms.reduce((function(e,t){var n=i.atoms.get(t);return e[n.fragment]||(e[n.fragment]=[]),e[n.fragment].push(t),e}),{});return"number"===typeof Object.keys(a).map((function(e){return parseInt(e,10)})).find((function(e){var t=i.getFragmentIds(e),n=new ee(a[e]);return!t.equals(n)}))?o:(Object.keys(a).forEach((function(t){var s=new ee(a[t]),u=i.getCoordBoundingBox(s),l=r||new Y((u.max.x+u.min.x)/2,(u.max.y+u.min.y)/2);s.forEach((function(e){var t=vs(i.atoms.get(e),l,n);o.addOp(new Zi(e,t))})),Ca(e,Array.from(s)).forEach((function(e){var t=vs(e,l,n);o.addOp(new Jo(e.id,t))}))})),t.bonds&&t.bonds.forEach((function(e){var t=i.bonds.get(e);t.type===oe.PATTERN.TYPE.SINGLE&&(t.stereo!==oe.PATTERN.STEREO.UP?t.stereo===oe.PATTERN.STEREO.DOWN&&o.addOp(new Ki(e,"stereo",oe.PATTERN.STEREO.UP)):o.addOp(new Ki(e,"stereo",oe.PATTERN.STEREO.DOWN)))})),o.perform(e))}function vs(e,t,n){var r=new Y;return"horizontal"===n?r.x=t.x>e.pp.x?2*(t.x-e.pp.x):-2*(e.pp.x-t.x):r.y=t.y>e.pp.y?2*(t.y-e.pp.y):-2*(e.pp.y-t.y),r}function ms(e,t,n,r){var i=e.molecule,o=new ha;(t||(t=Oa(i)),t.atoms)&&(t.atoms.forEach((function(e){var t=i.atoms.get(e);o.addOp(new Zi(e,gs(t.pp,n,r)))})),t.sgroupData||Ca(e,t.atoms).forEach((function(e){o.addOp(new Jo(e.id,gs(e.pp,n,r)))})));t.rxnArrows&&t.rxnArrows.forEach((function(e){var t=i.rxnArrows.get(e);o.addOp(new Co(e,gs(t.center(),n,r)))})),t.rxnPluses&&t.rxnPluses.forEach((function(e){var t=i.rxnPluses.get(e);o.addOp(new Ro(e,gs(t.pp,n,r)))})),t.sgroupData&&t.sgroupData.forEach((function(e){var t=i.sgroups.get(e);o.addOp(new Jo(e,gs(t.pp,n,r)))}));var a=t.enhancedFlags||Array.from(e.enhancedFlags.keys());return a&&a.forEach((function(t){var i=t,a=e.molecule.frags.get(i);o.addOp(new ao(t,gs(a.stereoFlagPosition||ce.getDefaultStereoFlagPosition(e.molecule,i),n,r)))})),o.perform(e)}function gs(e,t,n){var r=e.sub(t);return(r=r.rotate(n)).add_(t),r.sub(e)}function ys(e,t){var n=new ha;return n.addOp(new Vo(t)),n.perform(e)}function bs(e,t,n,r){var i=new ha;return i.addOp(new Fo(t,n,r)),i.perform(e)}function xs(e,t,n,r,i,o){var a=new ha;return a.addOp(new Ho(t,n,r,i,!1,o)),a.perform(e)}function _s(e,t,n,r){var i=ls(e,t.molecule,n,r),o=(0,M.Z)(i,2),a=o[0],s=o[1];return a.addOp(new xo(s.atoms).perform(e)),[a,s]}function ws(e,t,n,r,i){var o=new ha,a=t.molecule,s=e.molecule,u=s.atoms.get(n),l=n,c=null;if(i){var f=function(e,t,n){var r=new ha,i=_a(e,t,"fragment"),o=null;if(null===n){var a=Aa(e,t),s=Va(e,{type:1},t,a.atom,a.pos.get_xy0());(r=s[0]).operations.reverse(),o=s[2]}else{var u=new Gi({label:"C",fragment:i},new Y(1,0).rotate(n).add(e.molecule.atoms.get(t).pp).get_xy0()).perform(e);r.addOp(u),r.addOp(new Ji(t,u.data.aid,{type:1}).perform(e)),o=u.data.aid}return{action:r,aid1:o}}(e,n,r);o=f.action,l=f.aid1,u=s.atoms.get(l),c=ji.calcAngle(s.atoms.get(n).pp,u.pp)-t.angle0}else null===r&&(r=ji.calcAngle(u.pp,Aa(e,n).pos)),c=r-t.angle0;var h=new Map,d=a.atoms.get(t.aid).pp,p=_a(e,n,"fragment"),v={atoms:[],bonds:[]};return a.atoms.forEach((function(n,r){var i=re.getAttrHash(n);if(i.fragment=p,r===t.aid)o.mergeWith(Ya(e,l,i,!0)),h.set(r,l),v.atoms.push(l);else{var a=Y.diff(n.pp,d).rotate(c).add(u.pp),s=new Gi(i,a.get_xy0()).perform(e);o.addOp(s),h.set(r,s.data.aid),v.atoms.push(s.data.aid)}})),Qa(o,e,v.atoms,n),a.bonds.forEach((function(t){var n=new Ji(h.get(t.begin),h.get(t.end),t).perform(e);o.addOp(n),v.bonds.push(n.data.bid)})),a.sgroups.forEach((function(t){var n=e.molecule.sgroups.newId(),r=t.atoms.map((function(e){return h.get(e)}));Na(e,t.type,r,t.data,n,u.pp,"SUP"===t.type?t.expanded:null,t.data.name).operations.reverse().forEach((function(e){o.addOp(e)}))})),o.operations.reverse(),o.addOp(new xo(v.atoms).perform(e)),o.mergeWith(Za(e,e.molecule.bonds.get(v.bonds[0]))),[o,v]}function Ss(e,t,n,r,i,o){if(!o)return Es(e,t,n,i);return da(e,t,n,0,(function(e,t,n){return Es(e,t,n,i)}))}function Es(e,t,n,r){var i=new ha,o=t.molecule,a=e.molecule,s=a.bonds.get(n),u=o.bonds.get(t.bid),l=o.atoms.get(r?u.end:u.begin),c=new Map([[u.begin,r?s.end:s.begin],[u.end,r?s.begin:s.end]]),f={begin:r?u.end:u.begin,end:r?u.begin:u.end},h=ji.mergeBondsParams(a,s,o,f),d=h.angle,p=h.scale,v=a.getBondFragment(n),m={atoms:[],bonds:[]};return o.atoms.forEach((function(t,n){var r=re.getAttrHash(t);if(r.fragment=v,n!==u.begin&&n!==u.end){var o=Y.diff(t.pp,l.pp).rotate(d).scaled(p).add(a.atoms.get(s.begin).pp),f=xa.atom(e,o,null,.1);if(null===f){var h=new Gi(r,o).perform(e);i.addOp(h),c.set(n,h.data.aid),m.atoms.push(h.data.aid)}else c.set(n,f.id),i.mergeWith(Ya(e,c.get(n),r,!0))}else i.mergeWith(Ya(e,c.get(n),r,!0))})),Qa(i,e,m.atoms,s.begin),o.bonds.forEach((function(t){var n=a.findBondId(c.get(t.begin),c.get(t.end));if(null===n){var r=new Ji(c.get(t.begin),c.get(t.end),t).perform(e);i.addOp(r),m.bonds.push(r.data.bid)}else i.mergeWith(Ua(e,n,u,!0))})),m.atoms.length&&i.addOp(new xo([s.begin,s.end].concat(k(m.atoms))).perform(e)),m.bonds.length&&i.mergeWith(Za(e,e.molecule.bonds.get(m.bonds[0]))),i.operations.reverse(),[i,m]}function ks(e,t,n){var r=new ha;return r.addOp(new la(t,n)),r.perform(e)}function Os(e,t){var n=new ha;return n.addOp(new sa(t)),n.perform(e)}function As(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var Cs=function(e){p(n,e);var t=As(n);function n(e,r,i,o){var a;return(0,l.Z)(this,n),(a=t.call(this,zi.ADD_HIGHLIGHT)).data={atoms:e,bonds:r,color:i,highlightId:o},a}return(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.data,n=t.atoms,r=t.bonds,i=t.color;if(i){var o=e.molecule,a=new Fe({atoms:n,bonds:r,color:i});"number"!==typeof this.data.highlightId?this.data.highlightId=o.highlights.add(a):o.highlights.set(this.data.highlightId,a),Ts(e,n,r)}}},{key:"invert",value:function(){var e=this.data,t=e.atoms,n=e.bonds,r=e.color,i=e.highlightId;return new Ms(i,t,n,r)}}]),n}(Bi),Ms=function(e){p(n,e);var t=As(n);function n(e,r,i,o){var a;return(0,l.Z)(this,n),(a=t.call(this,zi.REMOVE_HIGHLIGHT,5)).data={highlightId:e,atoms:r||[],bonds:i||[],color:o||"white"},a}return(0,c.Z)(n,[{key:"execute",value:function(e){if("number"===typeof this.data.highlightId){var t=e.molecule,n=t.highlights.get(this.data.highlightId);if("undefined"===typeof n)return;var r=n.atoms,i=n.bonds,o=n.color;this.data.atoms=r,this.data.bonds=i,this.data.color=o,t.highlights.delete(this.data.highlightId),Ts(e,r,i)}}},{key:"invert",value:function(){var e=this.data,t=e.atoms,n=e.bonds,r=e.color,i=e.highlightId,o=new Cs(t,n,r,i);return o.data=this.data,o}}]),n}(Bi);function Ts(e,t,n){var r=e.atoms,i=e.bonds;t&&t.forEach((function(t){"undefined"!==typeof r.get(t)&&e.markAtom(t,1)})),n&&n.forEach((function(t){"undefined"!==typeof i.get(t)&&e.markBond(t,1)}))}function Ps(e,t){var n=new ha;return t.forEach((function(e){var t=e.atoms,r=e.bonds,i=e.color;n.addOp(new Cs(t,r,i))})),n.perform(e)}!function(e){p(n,e);var t=As(n);function n(e,r,i,o){var a;return(0,l.Z)(this,n),(a=t.call(this,zi.UPDATE_HIGHLIGHT)).newData={atoms:r,bonds:i,color:o,highlightId:e},a.oldData={atoms:r,bonds:i,color:o,highlightId:e},a}(0,c.Z)(n,[{key:"execute",value:function(e){var t=this.newData,n=t.atoms,r=t.bonds,i=t.color;if(i){var o=this.newData.highlightId,a=e.molecule,s=a.highlights.get(o);if(s){var u=s.atoms,l=s.bonds,c=s.color;this.oldData={atoms:u,bonds:l,color:c,highlightId:o};var f=new Fe({atoms:n,bonds:r,color:i});a.highlights.set(this.newData.highlightId,f),Ts(e,[].concat(k(n),k(u)),[].concat(k(r),k(l)))}}}},{key:"invert",value:function(){var e=this.oldData,t=e.atoms,r=e.bonds,i=e.color;return new n(this.newData.highlightId,t,r,i)}}])}(Bi);var Rs={Fragment:"Fragment",Multifragment:"Multifragment",Bond:"Bond",Atom:"Atom",Group:"Group"},Is=ji.fracAngle;function Ls(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var Ns=["radicals","pseudoatoms","stereo","query","overlapping_atoms","overlapping_bonds","rgroups","chiral","3d"],js=["molecular-weight","most-abundant-mass","monoisotopic-mass","gross","mass-composition"];function Ds(e,t){if("string"!==typeof e){var n=new Map,r=e.clone(null,null,!1,n);return t.serialize(r)}return e}var Bs=new WeakMap,zs=new WeakMap,Fs=function(){function e(t){(0,l.Z)(this,e),Ls(this,Bs,{writable:!0,value:void 0}),Ls(this,zs,{writable:!0,value:void 0}),A(this,Bs,t),A(this,zs,new at)}return(0,c.Z)(e,[{key:"info",value:function(){return C(this,Bs).info()}},{key:"convert",value:function(e,t){var n=(null===t||void 0===t?void 0:t.outputFormat)||_n.KET;return C(this,Bs).convert({struct:Ds(e,C(this,zs)),output_format:n})}},{key:"layout",value:function(e){var t=this;return C(this,Bs).layout({struct:Ds(e,C(this,zs)),output_format:_n.KET}).then((function(e){return C(t,zs).deserialize(e.struct)}))}},{key:"clean",value:function(e){var t=this;return C(this,Bs).clean({struct:Ds(e,C(this,zs)),output_format:_n.KET}).then((function(e){return C(t,zs).deserialize(e.struct)}))}},{key:"aromatize",value:function(e){var t=this;return C(this,Bs).aromatize({struct:Ds(e,C(this,zs)),output_format:_n.KET}).then((function(e){return C(t,zs).deserialize(e.struct)}))}},{key:"dearomatize",value:function(e){var t=this;return C(this,Bs).dearomatize({struct:Ds(e,C(this,zs)),output_format:_n.KET}).then((function(e){return C(t,zs).deserialize(e.struct)}))}},{key:"calculateCip",value:function(e){var t=this;return C(this,Bs).calculateCip({struct:Ds(e,C(this,zs)),output_format:_n.KET}).then((function(e){return C(t,zs).deserialize(e.struct)}))}},{key:"automap",value:function(e,t){var n=this,r=(null===t||void 0===t?void 0:t.mode)||"discard";return C(this,Bs).automap({struct:Ds(e,C(this,zs)),output_format:_n.KET,mode:r}).then((function(e){return C(n,zs).deserialize(e.struct)}))}},{key:"check",value:function(e,t){var n=(null===t||void 0===t?void 0:t.types)||Ns;return C(this,Bs).check({struct:Ds(e,C(this,zs)),types:n})}},{key:"calculate",value:function(e,t){var n=(null===t||void 0===t?void 0:t.properties)||js;return C(this,Bs).calculate({struct:Ds(e,C(this,zs)),properties:n})}},{key:"recognize",value:function(e,t){var n=this,r=(null===t||void 0===t?void 0:t.version)||"";return C(this,Bs).recognize(e,r).then((function(e){return C(n,zs).deserialize(e.struct)}))}},{key:"generateImageAsBase64",value:function(e,t){var n=(null===t||void 0===t?void 0:t.outputFormat)||"png",r=(null===t||void 0===t?void 0:t.backgroundColor)||"";return C(this,Bs).generateImageAsBase64(Ds(e,C(this,zs)),{outputFormat:n,backgroundColor:r})}}]),e}();function Vs(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Us(e,t){var n=fr(e);return new cr(t).create(n).getStructureFromStringAsync(e)}function Zs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rxn",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=t.create(e);return r.getStructureFromStructAsync(n)}var Hs=new WeakMap,Gs=new WeakMap,Ws=new WeakMap,qs=new WeakMap,Ks=function(){function e(t,n,r){(0,l.Z)(this,e),Vs(this,Hs,{writable:!0,value:void 0}),Vs(this,Gs,{writable:!0,value:void 0}),Vs(this,Ws,{writable:!0,value:void 0}),Vs(this,qs,{writable:!0,value:void 0}),h()(null!=t),h()(null!=n),h()(null!=r),A(this,Ws,t),A(this,Hs,n),A(this,Gs,r),A(this,qs,new Fs(C(this,Hs)))}return(0,c.Z)(e,[{key:"editor",get:function(){return C(this,Ws)}},{key:"indigo",get:function(){return C(this,qs)}},{key:"getSmiles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?"smilesExt":"smiles";return Zs(t,C(this,Gs),this.editor.struct())}},{key:"getMolfile",value:function(){var e=a(u().mark((function e(){var t,n,r,i=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:"v2000",!this.containsReaction()){e.next=3;break}throw Error("The structure cannot be saved as *.MOL due to reaction arrrows.");case 3:return n="v3000"===t?"molV3000":"mol",e.next=6,Zs(n,C(this,Gs),C(this,Ws).struct());case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRxn",value:function(){var e=a(u().mark((function e(){var t,n,r,i=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:"v2000",this.containsReaction()){e.next=3;break}throw Error("The structure cannot be saved as *.RXN: there is no reaction arrows.");case 3:return n="v3000"===t?"rxnV3000":"rxn",e.next=6,Zs(n,C(this,Gs),C(this,Ws).struct());case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getKet",value:function(){return Zs("ket",C(this,Gs),C(this,Ws).struct())}},{key:"getSmarts",value:function(){return Zs("smarts",C(this,Gs),C(this,Ws).struct())}},{key:"getCml",value:function(){return Zs("cml",C(this,Gs),C(this,Ws).struct())}},{key:"getInchi",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Zs(e?"inChIAuxInfo":"inChI",C(this,Gs),C(this,Ws).struct())}},{key:"generateInchIKey",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zs("ket",C(this,Gs),C(this,Ws).struct());case 2:return t=e.sent,e.abrupt("return",C(this,Hs).generateInchIKey(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"containsReaction",value:function(){return this.editor.struct().hasRxnArrow()}},{key:"setMolecule",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h()("string"===typeof t),e.next=3,Us(t,C(this,Hs));case 3:(n=e.sent).initHalfBonds(),n.initNeighbors(),n.setImplicitHydrogen(),n.markFragments(),C(this,Ws).struct(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addFragment",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw h()("string"===typeof t),Error("not implemented yet");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"generateImage",value:function(){var e=a(u().mark((function e(t){var n,r,i,o,a,s,l,c,f=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=f.length>1&&void 0!==f[1]?f[1]:{outputFormat:"png"},r="",e.t0=n.outputFormat,e.next="svg"===e.t0?5:(e.t0,7);break;case 5:return r="image/svg+xml",e.abrupt("break",9);case 7:r="image/png",n.outputFormat="png";case 9:return e.next=11,C(this,Hs).generateImageAsBase64(t,n);case 11:for(i=e.sent,o=atob(i),a=new Array(o.length),s=0;s<o.length;s++)a[s]=o.charCodeAt(s);return l=new Uint8Array(a),c=new Blob([l],{type:r}),e.abrupt("return",c);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ys(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $s(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var Js={"smart-layout":!0,"ignore-stereochemistry-errors":!0,"mass-skip-error-on-pseudoatoms":!1,"gross-formula-add-rsites":!0,"aromatize-skip-superatoms":!0},Qs=new WeakMap,eu=(function(){function e(){(0,l.Z)(this,e),$s(this,Qs,{writable:!0,value:void 0})}(0,c.Z)(e,[{key:"withStructServiceProvider",value:function(e){return A(this,Qs,e),this}},{key:"build",value:function(e,t){h()(null!=e),h()(null!=C(this,Qs));var n=Xs(Xs({},Js),t),r=C(this,Qs).createStructService(n),i=new Ks(e,r,new cr(r));return i[C(this,Qs).mode]=!0,i}}])}(),n(47028)),tu=n(61205),nu=n(38002),ru=n(37936),iu=(n(65777),n(61640)),ou=n(57923),au=n.n(ou);function su(){return su=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},su.apply(this,arguments)}function uu(e,t){return uu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},uu(e,t)}var lu=new Map,cu=new WeakMap,fu=0,hu=void 0;function du(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return t+"_"+("root"===t?(n=e.root)?(cu.has(n)||(fu+=1,cu.set(n,fu.toString())),cu.get(n)):"0":e[t]);var n})).toString()}function pu(e,t,n,r){if(void 0===n&&(n={}),void 0===r&&(r=hu),"undefined"===typeof window.IntersectionObserver&&void 0!==r){var i=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"===typeof n.threshold?n.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),function(){}}var o=function(e){var t=du(e),n=lu.get(t);if(!n){var r,i=new Map,o=new IntersectionObserver((function(t){t.forEach((function(t){var n,o=t.isIntersecting&&r.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=o),null==(n=i.get(t.target))||n.forEach((function(e){e(o,t)}))}))}),e);r=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:o,elements:i},lu.set(t,n)}return n}(n),a=o.id,s=o.observer,u=o.elements,l=u.get(e)||[];return u.has(e)||u.set(e,l),l.push(t),s.observe(e),function(){l.splice(l.indexOf(t),1),0===l.length&&(u.delete(e),s.unobserve(e)),0===u.size&&(s.disconnect(),lu.delete(a))}}var vu=["children","as","tag","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function mu(e){return"function"!==typeof e.children}var gu=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).node=null,n._unobserveCb=null,n.handleNode=function(e){n.node&&(n.unobserve(),e||n.props.triggerOnce||n.props.skip||n.setState({inView:!!n.props.initialInView,entry:void 0})),n.node=e||null,n.observeNode()},n.handleChange=function(e,t){e&&n.props.triggerOnce&&n.unobserve(),mu(n.props)||n.setState({inView:e,entry:t}),n.props.onChange&&n.props.onChange(e,t)},n.state={inView:!!t.initialInView,entry:void 0},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,uu(t,n);var i=r.prototype;return i.componentDidUpdate=function(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())},i.componentWillUnmount=function(){this.unobserve(),this.node=null},i.observeNode=function(){if(this.node&&!this.props.skip){var e=this.props,t=e.threshold,n=e.root,r=e.rootMargin,i=e.trackVisibility,o=e.delay,a=e.fallbackInView;this._unobserveCb=pu(this.node,this.handleChange,{threshold:t,root:n,rootMargin:r,trackVisibility:i,delay:o},a)}},i.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},i.render=function(){if(!mu(this.props)){var e=this.state,t=e.inView,n=e.entry;return this.props.children({inView:t,entry:n,ref:this.handleNode})}var r=this.props,i=r.children,o=r.as,a=r.tag,s=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(r,vu);return eu.createElement(o||a||"div",su({ref:this.handleNode},s),i)},r}(eu.Component);function yu(e){var t=void 0===e?{}:e,n=t.threshold,r=t.delay,i=t.trackVisibility,o=t.rootMargin,a=t.root,s=t.triggerOnce,u=t.skip,l=t.initialInView,c=t.fallbackInView,f=eu.useRef(),h=eu.useState({inView:!!l}),d=h[0],p=h[1],v=eu.useCallback((function(e){void 0!==f.current&&(f.current(),f.current=void 0),u||e&&(f.current=pu(e,(function(e,t){p({inView:e,entry:t}),t.isIntersecting&&s&&f.current&&(f.current(),f.current=void 0)}),{root:a,rootMargin:o,threshold:n,trackVisibility:i,delay:r},c))}),[Array.isArray(n)?n.toString():n,a,o,s,u,i,c,r]);(0,eu.useEffect)((function(){f.current||!d.entry||s||u||p({inView:!!l})}));var m=[v,d.inView,d.entry];return m.ref=m[0],m.inView=m[1],m.entry=m[2],m}gu.displayName="InView",gu.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};var bu=n(17122);function xu(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _u=n(31435),wu=n(83826),Su=n(96541),Eu=n(45378),ku=n(79579),Ou=n(45752);function Au(){return Au=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Au.apply(this,arguments)}var Cu=n(56725),Mu=n(50189),Tu="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";var Pu=function(e){var t=e.children,n=e.theme,r=(0,Mu.Z)(),o=eu.useMemo((function(){var e=null===r?n:function(e,t){return"function"===typeof t?t(e):Au({},e,t)}(r,n);return null!=e&&(e[Tu]=null!==r),e}),[n,r]);return(0,i.jsx)(Cu.Z.Provider,{value:o,children:t})},Ru=n(60847),Iu=n(25789);function Lu(e){var t=(0,Iu.Z)();return(0,i.jsx)(Ru.T.Provider,{value:"object"===typeof t?t:{},children:e.children})}for(var Nu=function(e){var t=e.children,n=e.theme;return(0,i.jsx)(Pu,{theme:n,children:(0,i.jsx)(Lu,{children:t})})},ju={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Du={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Bu="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),zu="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),Fu="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),Vu="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Uu="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Zu=Bu&&(Vu||+Bu[1]<57)||Fu&&Vu,Hu=0;Hu<10;Hu++)ju[48+Hu]=ju[96+Hu]=String(Hu);for(Hu=1;Hu<=24;Hu++)ju[Hu+111]="F"+Hu;for(Hu=65;Hu<=90;Hu++)ju[Hu]=String.fromCharCode(Hu+32),Du[Hu]=String.fromCharCode(Hu);for(var Gu in ju)Du.hasOwnProperty(Gu)||(Du[Gu]=ju[Gu]);function Wu(e){var t=!(Zu&&(e.ctrlKey||e.altKey||e.metaKey)||(zu||Uu)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?Du:ju)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}var qu=n(92506),Ku=n.n(qu),Yu=n(34516),Xu=n.n(Yu),$u=n(46221),Ju=n.n($u);function Qu(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"===typeof e&&e.apply(void 0,n)}function el(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var tl="react-contextmenu",nl="react-contextmenu--visible",rl="react-contextmenu-wrapper",il="react-contextmenu-item",ol="react-contextmenu-item--active",al="react-contextmenu-item--disabled",sl="react-contextmenu-item--divider",ul="react-contextmenu-item--selected",ll="react-contextmenu-submenu",cl={},fl=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement),hl="REACT_CONTEXTMENU_SHOW",dl="REACT_CONTEXTMENU_HIDE";function pl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=void 0;"function"===typeof window.CustomEvent?r=new window.CustomEvent(e,{detail:t}):(r=document.createEvent("CustomEvent")).initCustomEvent(e,!1,!0,t),n&&(n.dispatchEvent(r),Ju()(cl,t))}function vl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];pl(hl,Ju()({},e,{type:hl}),t)}function ml(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];pl(dl,Ju()({},e,{type:dl}),t)}var gl=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handleShowEvent=function(e){for(var n in t.callbacks)el(t.callbacks,n)&&t.callbacks[n].show(e)},this.handleHideEvent=function(e){for(var n in t.callbacks)el(t.callbacks,n)&&t.callbacks[n].hide(e)},this.register=function(e,n){var r=Math.random().toString(36).substring(7);return t.callbacks[r]={show:e,hide:n},r},this.unregister=function(e){e&&t.callbacks[e]&&delete t.callbacks[e]},this.callbacks={},fl&&(window.addEventListener(hl,this.handleShowEvent),window.addEventListener(dl,this.handleHideEvent))},yl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bl=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function xl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wl(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Sl=function(e){function t(){var e,n,r;_l(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=wl(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleClick=function(e){0!==e.button&&1!==e.button&&e.preventDefault(),r.props.disabled||r.props.divider||(Qu(r.props.onClick,e,Ju()({},r.props.data,cl.data),cl.target),r.props.preventClose||ml())},wl(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),bl(t,[{key:"render",value:function(){var e,t=this,n=this.props,r=n.attributes,i=n.children,o=n.className,a=n.disabled,s=n.divider,u=n.selected,l=Xu()(o,il,r.className,(xl(e={},Xu()(al,r.disabledClassName),a),xl(e,Xu()(sl,r.dividerClassName),s),xl(e,Xu()(ul,r.selectedClassName),u),e));return eu.createElement("div",yl({},r,{className:l,role:"menuitem",tabIndex:"-1","aria-disabled":a?"true":"false","aria-orientation":s?"horizontal":null,ref:function(e){t.ref=e},onMouseMove:this.props.onMouseMove,onMouseLeave:this.props.onMouseLeave,onTouchEnd:this.handleClick,onClick:this.handleClick}),s?null:i)}}]),t}(eu.Component);Sl.propTypes={attributes:Ku().object,children:Ku().node,className:Ku().string,data:Ku().object,disabled:Ku().bool,divider:Ku().bool,onClick:Ku().func,onMouseLeave:Ku().func,onMouseMove:Ku().func,preventClose:Ku().bool,selected:Ku().bool},Sl.defaultProps={attributes:{},children:null,className:"",data:{},disabled:!1,divider:!1,onClick:function(){return null},onMouseMove:function(){return null},onMouseLeave:function(){return null},preventClose:!1,selected:!1};var El=Sl;var kl=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Ol.call(n),n.seletedItemRef=null,n.state={selectedItem:null,forceSubMenuOpen:!1},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(eu.Component);kl.propTypes={children:Ku().node.isRequired};var Ol=function(){var e=this;this.handleKeyNavigation=function(t){if(!1!==e.state.isVisible)switch(t.keyCode){case 37:case 27:t.preventDefault(),e.hideMenu(t);break;case 38:t.preventDefault(),e.selectChildren(!0);break;case 40:t.preventDefault(),e.selectChildren(!1);break;case 39:e.tryToOpenSubMenu(t);break;case 13:t.preventDefault(),e.tryToOpenSubMenu(t);var n=e.seletedItemRef&&e.seletedItemRef.props&&e.seletedItemRef.props.disabled;e.seletedItemRef&&e.seletedItemRef.ref instanceof HTMLElement&&!n?e.seletedItemRef.ref.click():e.hideMenu(t)}},this.handleForceClose=function(){e.setState({forceSubMenuOpen:!1})},this.tryToOpenSubMenu=function(t){e.state.selectedItem&&e.state.selectedItem.type===e.getSubMenuType()&&(t.preventDefault(),e.setState({forceSubMenuOpen:!0}))},this.selectChildren=function(t){var n=e.state.selectedItem,r=[],i=0,o={};if(eu.Children.forEach(e.props.children,(function t(n,a){n&&([El,e.getSubMenuType()].indexOf(n.type)<0?eu.Children.forEach(n.props.children,t):n.props.divider||(n.props.disabled&&(++i,o[a]=!0),r.push(n)))})),i!==r.length){var a=function(e){var n=e;do{t?--n:++n,n<0?n=r.length-1:n>=r.length&&(n=0)}while(n!==e&&o[n]);return n===e?null:n}(r.indexOf(n));null!==a&&e.setState({selectedItem:r[a],forceSubMenuOpen:!1})}},this.onChildMouseMove=function(t){e.state.selectedItem!==t&&e.setState({selectedItem:t,forceSubMenuOpen:!1})},this.onChildMouseLeave=function(){e.setState({selectedItem:null,forceSubMenuOpen:!1})},this.renderChildren=function(t){return eu.Children.map(t,(function(t){var n={};return eu.isValidElement(t)?[El,e.getSubMenuType()].indexOf(t.type)<0?(n.children=e.renderChildren(t.props.children),eu.cloneElement(t,n)):(n.onMouseLeave=e.onChildMouseLeave.bind(e),t.type===e.getSubMenuType()&&(n.forceOpen=e.state.forceSubMenuOpen&&e.state.selectedItem===t,n.forceClose=e.handleForceClose,n.parentKeyNavigationHandler=e.handleKeyNavigation),t.props.divider||e.state.selectedItem!==t?(n.onMouseMove=function(){return e.onChildMouseMove(t)},eu.cloneElement(t,n)):(n.selected=!0,n.ref=function(t){e.seletedItemRef=t},eu.cloneElement(t,n))):t}))}},Al=kl,Cl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ml=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Tl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pl=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getMenuPosition=function(){var e=window,t=e.innerWidth,r=e.innerHeight,i=n.subMenu.getBoundingClientRect(),o={};return i.bottom>r?o.bottom=0:o.top=0,i.right<t?o.left="100%":o.right="100%",o},n.getRTLMenuPosition=function(){var e=window.innerHeight,t=n.subMenu.getBoundingClientRect(),r={};return t.bottom>e?r.bottom=0:r.top=0,t.left<0?r.left="100%":r.right="100%",r},n.hideSubMenu=function(e){e.detail&&e.detail.id&&n.menu&&e.detail.id!==n.menu.id||(n.props.forceOpen&&n.props.forceClose(),n.setState({visible:!1,selectedItem:null}),n.unregisterHandlers())},n.handleClick=function(e){e.preventDefault(),n.props.disabled||(Qu(n.props.onClick,e,Ju()({},n.props.data,cl.data),cl.target),n.props.onClick&&!n.props.preventCloseOnClick&&ml())},n.handleMouseEnter=function(){n.closetimer&&clearTimeout(n.closetimer),n.props.disabled||n.state.visible||(n.opentimer=setTimeout((function(){return n.setState({visible:!0,selectedItem:null})}),n.props.hoverDelay))},n.handleMouseLeave=function(){n.opentimer&&clearTimeout(n.opentimer),n.state.visible&&(n.closetimer=setTimeout((function(){return n.setState({visible:!1,selectedItem:null})}),n.props.hoverDelay))},n.menuRef=function(e){n.menu=e},n.subMenuRef=function(e){n.subMenu=e},n.registerHandlers=function(){document.removeEventListener("keydown",n.props.parentKeyNavigationHandler),document.addEventListener("keydown",n.handleKeyNavigation)},n.unregisterHandlers=function(e){document.removeEventListener("keydown",n.handleKeyNavigation),e||document.addEventListener("keydown",n.props.parentKeyNavigationHandler)},n.state=Ju()({},n.state,{visible:!1}),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Ml(t,[{key:"componentDidMount",value:function(){this.listenId=gl.register((function(){}),this.hideSubMenu)}},{key:"getSubMenuType",value:function(){return t}},{key:"shouldComponentUpdate",value:function(e,t){return this.isVisibilityChange=(this.state.visible!==t.visible||this.props.forceOpen!==e.forceOpen)&&!(this.state.visible&&e.forceOpen)&&!(this.props.forceOpen&&t.visible),!0}},{key:"componentDidUpdate",value:function(){var e=this;if(this.isVisibilityChange)if(this.props.forceOpen||this.state.visible){(window.requestAnimationFrame||setTimeout)((function(){var t=e.props.rtl?e.getRTLMenuPosition():e.getMenuPosition();e.subMenu.style.removeProperty("top"),e.subMenu.style.removeProperty("bottom"),e.subMenu.style.removeProperty("left"),e.subMenu.style.removeProperty("right"),el(t,"top")&&(e.subMenu.style.top=t.top),el(t,"left")&&(e.subMenu.style.left=t.left),el(t,"bottom")&&(e.subMenu.style.bottom=t.bottom),el(t,"right")&&(e.subMenu.style.right=t.right),e.subMenu.classList.add(nl),e.registerHandlers(),e.setState({selectedItem:null})}))}else{this.subMenu.addEventListener("transitionend",(function t(){e.subMenu.removeEventListener("transitionend",t),e.subMenu.style.removeProperty("bottom"),e.subMenu.style.removeProperty("right"),e.subMenu.style.top=0,e.subMenu.style.left="100%",e.unregisterHandlers()})),this.subMenu.classList.remove(nl)}}},{key:"componentWillUnmount",value:function(){this.listenId&&gl.unregister(this.listenId),this.opentimer&&clearTimeout(this.opentimer),this.closetimer&&clearTimeout(this.closetimer),this.unregisterHandlers(!0)}},{key:"render",value:function(){var e,t=this.props,n=t.children,r=t.attributes,i=t.disabled,o=t.title,a=t.selected,s=this.state.visible,u={ref:this.menuRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,className:Xu()(il,ll,r.listClassName),style:{position:"relative"}},l={className:Xu()(il,r.className,(e={},Tl(e,Xu()(al,r.disabledClassName),i),Tl(e,Xu()(ol,r.visibleClassName),s),Tl(e,Xu()(ul,r.selectedClassName),a),e)),onMouseMove:this.props.onMouseMove,onMouseOut:this.props.onMouseOut,onClick:this.handleClick},c={ref:this.subMenuRef,style:{position:"absolute",transition:"opacity 1ms",top:0,left:"100%"},className:Xu()(tl,this.props.className)};return eu.createElement("nav",Cl({},u,{role:"menuitem",tabIndex:"-1","aria-haspopup":"true"}),eu.createElement("div",Cl({},r,l),o),eu.createElement("nav",Cl({},c,{role:"menu",tabIndex:"-1"}),this.renderChildren(n)))}}]),t}(Al);Pl.propTypes={children:Ku().node.isRequired,attributes:Ku().object,title:Ku().node.isRequired,className:Ku().string,disabled:Ku().bool,hoverDelay:Ku().number,rtl:Ku().bool,selected:Ku().bool,onMouseMove:Ku().func,onMouseOut:Ku().func,forceOpen:Ku().bool,forceClose:Ku().func,parentKeyNavigationHandler:Ku().func},Pl.defaultProps={disabled:!1,hoverDelay:500,attributes:{},className:"",rtl:!1,selected:!1,onMouseMove:function(){return null},onMouseOut:function(){return null},forceOpen:!1,forceClose:function(){return null},parentKeyNavigationHandler:function(){return null}};var Rl=Pl,Il=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ll=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.registerHandlers=function(){document.addEventListener("mousedown",n.handleOutsideClick),document.addEventListener("touchstart",n.handleOutsideClick),n.props.preventHideOnScroll||document.addEventListener("scroll",n.handleHide),n.props.preventHideOnContextMenu||document.addEventListener("contextmenu",n.handleHide),document.addEventListener("keydown",n.handleKeyNavigation),n.props.preventHideOnResize||window.addEventListener("resize",n.handleHide)},n.unregisterHandlers=function(){document.removeEventListener("mousedown",n.handleOutsideClick),document.removeEventListener("touchstart",n.handleOutsideClick),document.removeEventListener("scroll",n.handleHide),document.removeEventListener("contextmenu",n.handleHide),document.removeEventListener("keydown",n.handleKeyNavigation),window.removeEventListener("resize",n.handleHide)},n.handleShow=function(e){if(e.detail.id===n.props.id&&!n.state.isVisible){var t=e.detail.position,r=t.x,i=t.y;n.setState({isVisible:!0,x:r,y:i}),n.registerHandlers(),Qu(n.props.onShow,e)}},n.handleHide=function(e){!n.state.isVisible||e.detail&&e.detail.id&&e.detail.id!==n.props.id||(n.unregisterHandlers(),n.setState({isVisible:!1,selectedItem:null,forceSubMenuOpen:!1}),Qu(n.props.onHide,e))},n.handleOutsideClick=function(e){n.menu.contains(e.target)||ml()},n.handleMouseLeave=function(e){e.preventDefault(),Qu(n.props.onMouseLeave,e,Ju()({},n.props.data,cl.data),cl.target),n.props.hideOnLeave&&ml()},n.handleContextMenu=function(e){e.preventDefault(),n.handleHide(e)},n.hideMenu=function(e){27!==e.keyCode&&13!==e.keyCode||ml()},n.getMenuPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r={top:t,left:e};if(!n.menu)return r;var i=window,o=i.innerWidth,a=i.innerHeight,s=n.menu.getBoundingClientRect();return t+s.height>a&&(r.top-=s.height),e+s.width>o&&(r.left-=s.width),r.top<0&&(r.top=s.height<a?(a-s.height)/2:0),r.left<0&&(r.left=s.width<o?(o-s.width)/2:0),r},n.getRTLMenuPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r={top:t,left:e};if(!n.menu)return r;var i=window,o=i.innerWidth,a=i.innerHeight,s=n.menu.getBoundingClientRect();return r.left=e-s.width,t+s.height>a&&(r.top-=s.height),r.left<0&&(r.left+=s.width),r.top<0&&(r.top=s.height<a?(a-s.height)/2:0),r.left+s.width>o&&(r.left=s.width<o?(o-s.width)/2:0),r},n.menuRef=function(e){n.menu=e},n.state=Ju()({},n.state,{x:0,y:0,isVisible:!1}),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Il(t,[{key:"getSubMenuType",value:function(){return Rl}},{key:"componentDidMount",value:function(){this.listenId=gl.register(this.handleShow,this.handleHide)}},{key:"componentDidUpdate",value:function(){var e=this,t=window.requestAnimationFrame||setTimeout;this.state.isVisible?t((function(){var n=e.state,r=n.x,i=n.y,o=e.props.rtl?e.getRTLMenuPosition(r,i):e.getMenuPosition(r,i),a=o.top,s=o.left;t((function(){e.menu&&(e.menu.style.top=a+"px",e.menu.style.left=s+"px",e.menu.style.opacity=1,e.menu.style.pointerEvents="auto")}))})):t((function(){e.menu&&(e.menu.style.opacity=0,e.menu.style.pointerEvents="none")}))}},{key:"componentWillUnmount",value:function(){this.listenId&&gl.unregister(this.listenId),this.unregisterHandlers()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.style,i=this.state.isVisible,o=Ju()({},r,{position:"fixed",opacity:0,pointerEvents:"none"}),a=Xu()(tl,n,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},nl,i));return eu.createElement("nav",{role:"menu",tabIndex:"-1",ref:this.menuRef,style:o,className:a,onContextMenu:this.handleContextMenu,onMouseLeave:this.handleMouseLeave},this.renderChildren(t))}}]),t}(Al);Ll.propTypes={id:Ku().string.isRequired,children:Ku().node.isRequired,data:Ku().object,className:Ku().string,hideOnLeave:Ku().bool,rtl:Ku().bool,onHide:Ku().func,onMouseLeave:Ku().func,onShow:Ku().func,preventHideOnContextMenu:Ku().bool,preventHideOnResize:Ku().bool,preventHideOnScroll:Ku().bool,style:Ku().object},Ll.defaultProps={className:"",data:{},hideOnLeave:!1,rtl:!1,onHide:function(){return null},onMouseLeave:function(){return null},onShow:function(){return null},preventHideOnContextMenu:!1,preventHideOnResize:!1,preventHideOnScroll:!1,style:{}};var Nl=Ll,jl=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Dl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bl(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var zl=function(e){function t(){var e,n,r;Dl(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=Bl(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.touchHandled=!1,r.handleMouseDown=function(e){r.props.holdToDisplay>=0&&0===e.button&&(e.persist(),e.stopPropagation(),r.mouseDownTimeoutId=setTimeout((function(){return r.handleContextClick(e)}),r.props.holdToDisplay)),Qu(r.props.attributes.onMouseDown,e)},r.handleMouseUp=function(e){0===e.button&&clearTimeout(r.mouseDownTimeoutId),Qu(r.props.attributes.onMouseUp,e)},r.handleMouseOut=function(e){0===e.button&&clearTimeout(r.mouseDownTimeoutId),Qu(r.props.attributes.onMouseOut,e)},r.handleTouchstart=function(e){r.touchHandled=!1,r.props.holdToDisplay>=0&&(e.persist(),e.stopPropagation(),r.touchstartTimeoutId=setTimeout((function(){r.handleContextClick(e),r.touchHandled=!0}),r.props.holdToDisplay)),Qu(r.props.attributes.onTouchStart,e)},r.handleTouchEnd=function(e){r.touchHandled&&e.preventDefault(),clearTimeout(r.touchstartTimeoutId),Qu(r.props.attributes.onTouchEnd,e)},r.handleContextMenu=function(e){e.button===r.props.mouseButton&&r.handleContextClick(e),Qu(r.props.attributes.onContextMenu,e)},r.handleMouseClick=function(e){e.button===r.props.mouseButton&&r.handleContextClick(e),Qu(r.props.attributes.onClick,e)},r.handleContextClick=function(e){if(!r.props.disable&&(!r.props.disableIfShiftIsPressed||!e.shiftKey)){e.preventDefault(),e.stopPropagation();var t=e.clientX||e.touches&&e.touches[0].pageX,n=e.clientY||e.touches&&e.touches[0].pageY;r.props.posX&&(t-=r.props.posX),r.props.posY&&(n-=r.props.posY),ml();var i=Qu(r.props.collect,r.props),o={position:{x:t,y:n},target:r.elem,id:r.props.id};i&&"function"===typeof i.then?i.then((function(t){o.data=Ju()({},t,{target:e.target}),vl(o)})):(o.data=Ju()({},i,{target:e.target}),vl(o))}},r.elemRef=function(e){r.elem=e},Bl(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),jl(t,[{key:"render",value:function(){var e=this.props,t=e.renderTag,n=e.attributes,r=e.children,i=Ju()({},n,{className:Xu()(rl,n.className),onContextMenu:this.handleContextMenu,onClick:this.handleMouseClick,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onTouchStart:this.handleTouchstart,onTouchEnd:this.handleTouchEnd,onMouseOut:this.handleMouseOut,ref:this.elemRef});return eu.createElement(t,i,r)}}]),t}(eu.Component);zl.propTypes={id:Ku().string.isRequired,children:Ku().node.isRequired,attributes:Ku().object,collect:Ku().func,disable:Ku().bool,holdToDisplay:Ku().number,posX:Ku().number,posY:Ku().number,renderTag:Ku().elementType,mouseButton:Ku().number,disableIfShiftIsPressed:Ku().bool},zl.defaultProps={attributes:{},collect:function(){return null},disable:!1,holdToDisplay:1e3,renderTag:"div",posX:0,posY:0,mouseButton:2,disableIfShiftIsPressed:!1};var Fl=zl;Object.assign,function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}}();[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Object.keys(Fl.propTypes)),["children"]);var Vl=n(2147),Ul=n(66470),Zl=n(53764);var Hl=n(25526),Gl=n(90036);function Wl(){return(Wl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ql(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}function Kl(e){var t=(0,eu.useRef)(e),n=(0,eu.useRef)((function(e){t.current&&t.current(e)}));return t.current=e,n.current}var Yl=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e<t?t:e},Xl=function(e){return"touches"in e},$l=function(e){return e&&e.ownerDocument.defaultView||self},Jl=function(e,t,n){var r=e.getBoundingClientRect(),i=Xl(t)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return e[0]}(t.touches,n):t;return{left:Yl((i.pageX-(r.left+$l(e).pageXOffset))/r.width),top:Yl((i.pageY-(r.top+$l(e).pageYOffset))/r.height)}},Ql=function(e){!Xl(e)&&e.preventDefault()},ec=eu.memo((function(e){var t=e.onMove,n=e.onKey,r=ql(e,["onMove","onKey"]),i=(0,eu.useRef)(null),o=Kl(t),a=Kl(n),s=(0,eu.useRef)(null),u=(0,eu.useRef)(!1),l=(0,eu.useMemo)((function(){var e=function(e){Ql(e),(Xl(e)?e.touches.length>0:e.buttons>0)&&i.current?o(Jl(i.current,e,s.current)):n(!1)},t=function(){return n(!1)};function n(n){var r=u.current,o=$l(i.current),a=n?o.addEventListener:o.removeEventListener;a(r?"touchmove":"mousemove",e),a(r?"touchend":"mouseup",t)}return[function(e){var t=e.nativeEvent,r=i.current;if(r&&(Ql(t),!function(e,t){return t&&!Xl(e)}(t,u.current)&&r)){if(Xl(t)){u.current=!0;var a=t.changedTouches||[];a.length&&(s.current=a[0].identifier)}r.focus(),o(Jl(r,t,s.current)),n(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),a({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},n]}),[a,o]),c=l[0],f=l[1],h=l[2];return(0,eu.useEffect)((function(){return h}),[h]),eu.createElement("div",Wl({},r,{onTouchStart:c,onMouseDown:c,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"}))})),tc=function(e){return e.filter(Boolean).join(" ")},nc=function(e){var t=e.color,n=e.left,r=e.top,i=void 0===r?.5:r,o=tc(["react-colorful__pointer",e.className]);return eu.createElement("div",{className:o,style:{top:100*i+"%",left:100*n+"%"}},eu.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},rc=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n},ic=(Math.PI,function(e){return"#"===e[0]&&(e=e.substr(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:1}:{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:1}}),oc=function(e){var t=e.s,n=e.v,r=e.a,i=(200-t)*n/100;return{h:rc(e.h),s:rc(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:rc(i/2),a:rc(r,2)}},ac=function(e){var t=oc(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},sc=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var o=Math.floor(t),a=r*(1-n),s=r*(1-(t-o)*n),u=r*(1-(1-t+o)*n),l=o%6;return{r:rc(255*[r,s,a,a,u,r][l]),g:rc(255*[u,r,r,s,a,a][l]),b:rc(255*[a,a,u,r,r,s][l]),a:rc(i,2)}},uc=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},lc=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=Math.max(t,n,r),a=o-Math.min(t,n,r),s=a?o===t?(n-r)/a:o===n?2+(r-t)/a:4+(t-n)/a:0;return{h:rc(60*(s<0?s+6:s)),s:rc(o?a/o*100:0),v:rc(o/255*100),a:i}},cc=eu.memo((function(e){var t=e.hue,n=e.onChange,r=tc(["react-colorful__hue",e.className]);return eu.createElement("div",{className:r},eu.createElement(ec,{onMove:function(e){n({h:360*e.left})},onKey:function(e){n({h:Yl(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuetext":rc(t)},eu.createElement(nc,{className:"react-colorful__hue-pointer",left:t/360,color:ac({h:t,s:100,v:100,a:1})})))})),fc=eu.memo((function(e){var t=e.hsva,n=e.onChange,r={backgroundColor:ac({h:t.h,s:100,v:100,a:1})};return eu.createElement("div",{className:"react-colorful__saturation",style:r},eu.createElement(ec,{onMove:function(e){n({s:100*e.left,v:100-100*e.top})},onKey:function(e){n({s:Yl(t.s+100*e.left,0,100),v:Yl(t.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+rc(t.s)+"%, Brightness "+rc(t.v)+"%"},eu.createElement(nc,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:ac(t)})))})),hc=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0};function dc(e,t,n){var r=Kl(n),i=(0,eu.useState)((function(){return e.toHsva(t)})),o=i[0],a=i[1],s=(0,eu.useRef)({color:t,hsva:o});(0,eu.useEffect)((function(){if(!e.equal(t,s.current.color)){var n=e.toHsva(t);s.current={hsva:n,color:t},a(n)}}),[t,e]),(0,eu.useEffect)((function(){var t;hc(o,s.current.hsva)||e.equal(t=e.fromHsva(o),s.current.color)||(s.current={hsva:o,color:t},r(t))}),[o,e,r]);var u=(0,eu.useCallback)((function(e){a((function(t){return Object.assign({},t,e)}))}),[]);return[o,u]}var pc,vc="undefined"!=typeof window?eu.useLayoutEffect:eu.useEffect,mc=new Map,gc=function(e){vc((function(){var t=e.current?e.current.ownerDocument:document;if(void 0!==t&&!mc.has(t)){var r=t.createElement("style");r.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',mc.set(t,r);var i=pc||n.nc;i&&r.setAttribute("nonce",i),t.head.appendChild(r)}}),[])},yc=function(e){var t=e.className,n=e.colorModel,r=e.color,i=void 0===r?n.defaultColor:r,o=e.onChange,a=ql(e,["className","colorModel","color","onChange"]),s=(0,eu.useRef)(null);gc(s);var u=dc(n,i,o),l=u[0],c=u[1],f=tc(["react-colorful",t]);return eu.createElement("div",Wl({},a,{ref:s,className:f}),eu.createElement(fc,{hsva:l,onChange:c}),eu.createElement(cc,{hue:l.h,onChange:c,className:"react-colorful__last-control"}))},bc={defaultColor:"000",toHsva:function(e){return lc(ic(e))},fromHsva:function(e){return n=(t=sc(e)).g,r=t.b,"#"+uc(t.r)+uc(n)+uc(r);var t,n,r},equal:function(e,t){return e.toLowerCase()===t.toLowerCase()||hc(ic(e),ic(t))}},xc=function(e){return eu.createElement(yc,Wl({},e,{colorModel:bc}))},_c=/^#?([0-9A-F]{3,8})$/i,wc=function(e){var t=e.color,n=void 0===t?"":t,r=e.onChange,i=e.onBlur,o=e.escape,a=e.validate,s=e.format,u=e.process,l=ql(e,["color","onChange","onBlur","escape","validate","format","process"]),c=(0,eu.useState)((function(){return o(n)})),f=c[0],h=c[1],d=Kl(r),p=Kl(i),v=(0,eu.useCallback)((function(e){var t=o(e.target.value);h(t),a(t)&&d(u?u(t):t)}),[o,u,a,d]),m=(0,eu.useCallback)((function(e){a(e.target.value)||h(o(n)),p(e)}),[n,o,a,p]);return(0,eu.useEffect)((function(){h(o(n))}),[n,o]),eu.createElement("input",Wl({},l,{value:s?s(f):f,spellCheck:"false",onChange:v,onBlur:m}))},Sc=function(e){return"#"+e},Ec=function(e){var t=e.prefixed,n=e.alpha,r=ql(e,["prefixed","alpha"]),i=(0,eu.useCallback)((function(e){return e.replace(/([^0-9A-F]+)/gi,"").substr(0,n?8:6)}),[n]),o=(0,eu.useCallback)((function(e){return function(e,t){var n=_c.exec(e),r=n?n[1].length:0;return 3===r||6===r||!!t&&4===r||!!t&&8===r}(e,n)}),[n]);return eu.createElement(wc,Wl({},r,{escape:i,format:t?Sc:void 0,process:Sc,validate:o}))},kc=n(70387),Oc=n(27822),Ac=n.n(Oc);function Cc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mc=n(64179);function Tc(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}var Pc=n(77728);var Rc=n(29673);function Ic(e){return Ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ic(e)}function Lc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nc(e,t){if(t&&("object"===Ic(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Lc(e)}function jc(e){return jc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},jc(e)}function Dc(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jc(e)););return e}function Bc(){return Bc="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Dc(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Bc.apply(this,arguments)}function zc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fc(e,t){return Fc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Fc(e,t)}function Vc(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fc(e,t)}function Uc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jc(e);if(t){var i=jc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Nc(this,n)}}for(var Zc,Hc=n(75952),Gc=n(66107),Wc=n(96080),qc=n.n(Wc),Kc=100,Yc=300,Xc=301,$c=302,Jc=303,Qc=304,ef=306,tf=307,nf=1e3,rf=1001,of=1002,af=1003,sf=1004,uf=1005,lf=1006,cf=1008,ff=1009,hf=1012,df=1014,pf=1015,vf=1016,mf=1020,gf=1022,yf=1023,bf=1026,xf=1027,_f=2300,wf=2301,Sf=2302,Ef=2400,kf=2401,Of=2402,Af=2500,Cf=2501,Mf=3e3,Tf=3001,Pf=3007,Rf=3002,If=7680,Lf=35044,Nf=35048,jf="300 es",Df=function(){function e(){(0,Hc.Z)(this,e)}return(0,Gc.Z)(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}]),e}(),Bf=[],zf=0;zf<256;zf++)Bf[zf]=(zf<16?"0":"")+zf.toString(16);var Ff=1234567,Vf=Math.PI/180,Uf=180/Math.PI;function Zf(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Bf[255&e]+Bf[e>>8&255]+Bf[e>>16&255]+Bf[e>>24&255]+"-"+Bf[255&t]+Bf[t>>8&255]+"-"+Bf[t>>16&15|64]+Bf[t>>24&255]+"-"+Bf[63&n|128]+Bf[n>>8&255]+"-"+Bf[n>>16&255]+Bf[n>>24&255]+Bf[255&r]+Bf[r>>8&255]+Bf[r>>16&255]+Bf[r>>24&255]).toUpperCase()}function Hf(e,t,n){return Math.max(t,Math.min(n,e))}function Gf(e,t){return(e%t+t)%t}function Wf(e,t,n){return(1-n)*e+n*t}function qf(e){return 0===(e&e-1)&&0!==e}function Kf(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Yf(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var Xf=Object.freeze({__proto__:null,DEG2RAD:Vf,RAD2DEG:Uf,generateUUID:Zf,clamp:Hf,euclideanModulo:Gf,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Wf,damp:function(e,t,n,r){return Wf(e,t,1-Math.exp(-n*r))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(Gf(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(Ff=e%2147483647),((Ff=16807*Ff%2147483647)-1)/2147483646},degToRad:function(e){return e*Vf},radToDeg:function(e){return e*Uf},isPowerOfTwo:qf,ceilPowerOfTwo:Kf,floorPowerOfTwo:Yf,setQuaternionFromProperEuler:function(e,t,n,r,i){var o=Math.cos,a=Math.sin,s=o(n/2),u=a(n/2),l=o((t+r)/2),c=a((t+r)/2),f=o((t-r)/2),h=a((t-r)/2),d=o((r-t)/2),p=a((r-t)/2);switch(i){case"XYX":e.set(s*c,u*f,u*h,s*l);break;case"YZY":e.set(u*h,s*c,u*f,s*l);break;case"ZXZ":e.set(u*f,u*h,s*c,s*l);break;case"XZX":e.set(s*c,u*p,u*d,s*l);break;case"YXY":e.set(u*d,s*c,u*p,s*l);break;case"ZYZ":e.set(u*p,u*d,s*c,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}}),$f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,Hc.Z)(this,e),this.x=t,this.y=n}return(0,Gc.Z)(e,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}}]),e}();$f.prototype.isVector2=!0;var Jf,Qf=function(){function e(){(0,Hc.Z)(this,e),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return(0,Gc.Z)(e,[{key:"set",value:function(e,t,n,r,i,o,a,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=a,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],l=n[4],c=n[7],f=n[2],h=n[5],d=n[8],p=r[0],v=r[3],m=r[6],g=r[1],y=r[4],b=r[7],x=r[2],_=r[5],w=r[8];return i[0]=o*p+a*g+s*x,i[3]=o*v+a*y+s*_,i[6]=o*m+a*b+s*w,i[1]=u*p+l*g+c*x,i[4]=u*v+l*y+c*_,i[7]=u*m+l*b+c*w,i[2]=f*p+h*g+d*x,i[5]=f*v+h*y+d*_,i[8]=f*m+h*b+d*w,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8];return t*o*l-t*a*u-n*i*l+n*a*s+r*i*u-r*o*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=l*o-a*u,f=a*s-l*i,h=u*i-o*s,d=t*c+n*f+r*h;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);var p=1/d;return e[0]=c*p,e[1]=(r*u-l*n)*p,e[2]=(a*n-r*o)*p,e[3]=f*p,e[4]=(l*t-r*s)*p,e[5]=(r*i-a*t)*p,e[6]=h*p,e[7]=(n*s-u*t)*p,e[8]=(o*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*o+u*a)+o+e,-r*u,r*s,-r*(-u*o+s*a)+a+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],l=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*u,r[6]=t*a+n*l,r[1]=-n*i+t*s,r[4]=-n*o+t*u,r[7]=-n*a+t*l,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();Qf.prototype.isMatrix3=!0;var eh=function(){function e(){(0,Hc.Z)(this,e)}return(0,Gc.Z)(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Jf&&(Jf=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Jf.width=e.width,Jf.height=e.height;var n=Jf.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Jf}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}]),e}(),th=0,nh=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rf,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rf,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:lf,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:cf,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:yf,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:ff,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Mf;return(0,Hc.Z)(this,n),e=t.call(this),Object.defineProperty(Lc(e),"id",{value:th++}),e.uuid=Zf(),e.name="",e.image=r,e.mipmaps=[],e.mapping=i,e.wrapS=o,e.wrapT=a,e.magFilter=s,e.minFilter=u,e.anisotropy=f,e.format=l,e.internalFormat=null,e.type=c,e.offset=new $f(0,0),e.repeat=new $f(1,1),e.center=new $f(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new Qf,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=h,e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e}return(0,Gc.Z)(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=Zf()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)r[o].isDataTexture?i.push(rh(r[o].image)):i.push(rh(r[o]))}else i=rh(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==Yc)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case nf:e.x=e.x-Math.floor(e.x);break;case rf:e.x=e.x<0?0:1;break;case of:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case nf:e.y=e.y-Math.floor(e.y);break;case rf:e.y=e.y<0?0:1;break;case of:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(Df);function rh(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?eh.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}nh.DEFAULT_IMAGE=void 0,nh.DEFAULT_MAPPING=Yc,nh.prototype.isTexture=!0;var ih=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,Hc.Z)(this,e),this.x=t,this.y=n,this.z=r,this.w=i}return(0,Gc.Z)(e,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,o=.01,a=.1,s=e.elements,u=s[0],l=s[4],c=s[8],f=s[1],h=s[5],d=s[9],p=s[2],v=s[6],m=s[10];if(Math.abs(l-f)<o&&Math.abs(c-p)<o&&Math.abs(d-v)<o){if(Math.abs(l+f)<a&&Math.abs(c+p)<a&&Math.abs(d+v)<a&&Math.abs(u+h+m-3)<a)return this.set(1,0,0,0),this;t=Math.PI;var g=(u+1)/2,y=(h+1)/2,b=(m+1)/2,x=(l+f)/4,_=(c+p)/4,w=(d+v)/4;return g>y&&g>b?g<o?(n=0,r=.707106781,i=.707106781):(r=x/(n=Math.sqrt(g)),i=_/n):y>b?y<o?(n=.707106781,r=0,i=.707106781):(n=x/(r=Math.sqrt(y)),i=w/r):b<o?(n=.707106781,r=.707106781,i=0):(n=_/(i=Math.sqrt(b)),r=w/i),this.set(n,r,i,t),this}var S=Math.sqrt((v-d)*(v-d)+(c-p)*(c-p)+(f-l)*(f-l));return Math.abs(S)<.001&&(S=1),this.x=(v-d)/S,this.y=(c-p)/S,this.z=(f-l)/S,this.w=Math.acos((u+h+m-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}]),e}();ih.prototype.isVector4=!0;var oh=function(e){Vc(n,e);var t=Uc(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,Hc.Z)(this,n),(i=t.call(this)).width=e,i.height=r,i.depth=1,i.scissor=new ih(0,0,e,r),i.scissorTest=!1,i.viewport=new ih(0,0,e,r),i.texture=new nh(void 0,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.encoding),i.texture.isRenderTargetTexture=!0,i.texture.image={width:e,height:r,depth:1},i.texture.generateMipmaps=void 0!==o.generateMipmaps&&o.generateMipmaps,i.texture.minFilter=void 0!==o.minFilter?o.minFilter:lf,i.depthBuffer=void 0===o.depthBuffer||o.depthBuffer,i.stencilBuffer=void 0!==o.stencilBuffer&&o.stencilBuffer,i.depthTexture=void 0!==o.depthTexture?o.depthTexture:null,i}return(0,Gc.Z)(n,[{key:"setTexture",value:function(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}},{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zc(Object(n),!0).forEach((function(t){(0,Rc.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Df);oh.prototype.isWebGLRenderTarget=!0;var ah=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i){var o;(0,Hc.Z)(this,n);var a=(o=t.call(this,e,r)).texture;o.texture=[];for(var s=0;s<i;s++)o.texture[s]=a.clone();return o}return(0,Gc.Z)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}]),n}(oh);ah.prototype.isWebGLMultipleRenderTargets=!0;var sh=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i){var o;return(0,Hc.Z)(this,n),(o=t.call(this,e,r,i)).samples=4,o}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.samples=e.samples,this}}]),n}(oh);sh.prototype.isWebGLMultisampleRenderTarget=!0;var uh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,Hc.Z)(this,e),this._x=t,this._y=n,this._z=r,this._w=i}return(0,Gc.Z)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,u=a(n/2),l=a(r/2),c=a(i/2),f=s(n/2),h=s(r/2),d=s(i/2);switch(o){case"XYZ":this._x=f*l*c+u*h*d,this._y=u*h*c-f*l*d,this._z=u*l*d+f*h*c,this._w=u*l*c-f*h*d;break;case"YXZ":this._x=f*l*c+u*h*d,this._y=u*h*c-f*l*d,this._z=u*l*d-f*h*c,this._w=u*l*c+f*h*d;break;case"ZXY":this._x=f*l*c-u*h*d,this._y=u*h*c+f*l*d,this._z=u*l*d+f*h*c,this._w=u*l*c-f*h*d;break;case"ZYX":this._x=f*l*c-u*h*d,this._y=u*h*c+f*l*d,this._z=u*l*d-f*h*c,this._w=u*l*c+f*h*d;break;case"YZX":this._x=f*l*c+u*h*d,this._y=u*h*c+f*l*d,this._z=u*l*d-f*h*c,this._w=u*l*c-f*h*d;break;case"XZY":this._x=f*l*c-u*h*d,this._y=u*h*c-f*l*d,this._z=u*l*d+f*h*c,this._w=u*l*c+f*h*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],u=t[2],l=t[6],c=t[10],f=n+a+c;if(f>0){var h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(l-s)*h,this._y=(i-u)*h,this._z=(o-r)*h}else if(n>a&&n>c){var d=2*Math.sqrt(1+n-a-c);this._w=(l-s)/d,this._x=.25*d,this._y=(r+o)/d,this._z=(i+u)/d}else if(a>c){var p=2*Math.sqrt(1+a-n-c);this._w=(i-u)/p,this._x=(r+o)/p,this._y=.25*p,this._z=(s+l)/p}else{var v=2*Math.sqrt(1+c-n-a);this._w=(o-r)/v,this._x=(i+u)/v,this._y=(s+l)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(Hf(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+o*a+r*u-i*s,this._y=r*l+o*s+i*a-n*u,this._z=i*l+o*u+n*s-r*a,this._w=o*l-n*a-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-t;return this._w=u*o+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),c=Math.atan2(l,a),f=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=o*f+this._w*h,this._x=n*f+this._x*h,this._y=r*f+this._y*h,this._z=i*f+this._z*h,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){this.copy(e).slerp(t,n)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}},{key:"slerpFlat",value:function(e,t,n,r,i,o,a){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],f=i[o+0],h=i[o+1],d=i[o+2],p=i[o+3];if(0===a)return e[t+0]=s,e[t+1]=u,e[t+2]=l,void(e[t+3]=c);if(1===a)return e[t+0]=f,e[t+1]=h,e[t+2]=d,void(e[t+3]=p);if(c!==p||s!==f||u!==h||l!==d){var v=1-a,m=s*f+u*h+l*d+c*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,m*g);v=Math.sin(v*x)/b,a=Math.sin(a*x)/b}var _=a*g;if(s=s*v+f*_,u=u*v+h*_,l=l*v+d*_,c=c*v+p*_,v===1-a){var w=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=w,u*=w,l*=w,c*=w}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,o){var a=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[o],f=i[o+1],h=i[o+2],d=i[o+3];return e[t]=a*d+l*c+s*h-u*f,e[t+1]=s*d+l*f+u*c-a*h,e[t+2]=u*d+l*h+a*f-s*c,e[t+3]=l*d-a*c-s*f-u*h,e}}]),e}();uh.prototype.isQuaternion=!0;var lh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,Hc.Z)(this,e),this.x=t,this.y=n,this.z=r}return(0,Gc.Z)(e,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(fh.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(fh.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*r-a*n,l=s*n+a*t-i*r,c=s*r+i*n-o*t,f=-i*t-o*n-a*r;return this.x=u*s+f*-i+l*-a-c*-o,this.y=l*s+f*-o+c*-i-u*-a,this.z=c*s+f*-a+u*-o-l*-i,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return ch.copy(this).projectOnVector(e),this.sub(ch)}},{key:"reflect",value:function(e){return this.sub(ch.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Hf(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}]),e}();lh.prototype.isVector3=!0;var ch=new lh,fh=new uh,hh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new lh(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lh(-1/0,-1/0,-1/0);(0,Hc.Z)(this,e),this.min=t,this.max=n}return(0,Gc.Z)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],f=e[s+2];l<t&&(t=l),c<n&&(n=c),f<r&&(r=f),l>i&&(i=l),c>o&&(o=c),f>a&&(a=f)}return this.min.set(t,n,r),this.max.set(i,o,a),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.count;s<u;s++){var l=e.getX(s),c=e.getY(s),f=e.getZ(s);l<t&&(t=l),c<n&&(n=c),f<r&&(r=f),l>i&&(i=l),c>o&&(o=c),f>a&&(a=f)}return this.min.set(t,n,r),this.max.set(i,o,a),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=ph.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){return this.makeEmpty(),this.expandByObject(e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),vh.copy(t.boundingBox),vh.applyMatrix4(e.matrixWorld),this.union(vh));for(var n=e.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,ph),ph.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(wh),Sh.subVectors(this.max,wh),mh.subVectors(e.a,wh),gh.subVectors(e.b,wh),yh.subVectors(e.c,wh),bh.subVectors(gh,mh),xh.subVectors(yh,gh),_h.subVectors(mh,yh);var t=[0,-bh.z,bh.y,0,-xh.z,xh.y,0,-_h.z,_h.y,bh.z,0,-bh.x,xh.z,0,-xh.x,_h.z,0,-_h.x,-bh.y,bh.x,0,-xh.y,xh.x,0,-_h.y,_h.x,0];return!!Oh(t,mh,gh,yh,Sh)&&(!!Oh(t=[1,0,0,0,1,0,0,0,1],mh,gh,yh,Sh)&&(Eh.crossVectors(bh,xh),Oh(t=[Eh.x,Eh.y,Eh.z],mh,gh,yh,Sh)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return ph.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(ph).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(dh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),dh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),dh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),dh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),dh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),dh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),dh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),dh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(dh)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();hh.prototype.isBox3=!0;var dh=[new lh,new lh,new lh,new lh,new lh,new lh,new lh,new lh],ph=new lh,vh=new hh,mh=new lh,gh=new lh,yh=new lh,bh=new lh,xh=new lh,_h=new lh,wh=new lh,Sh=new lh,Eh=new lh,kh=new lh;function Oh(e,t,n,r,i){for(var o=0,a=e.length-3;o<=a;o+=3){kh.fromArray(e,o);var s=i.x*Math.abs(kh.x)+i.y*Math.abs(kh.y)+i.z*Math.abs(kh.z),u=t.dot(kh),l=n.dot(kh),c=r.dot(kh);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}var Ah=new hh,Ch=new lh,Mh=new lh,Th=new lh,Ph=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new lh,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,Hc.Z)(this,e),this.center=t,this.radius=n}return(0,Gc.Z)(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):Ah.setFromPoints(e).getCenter(n);for(var r=0,i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){Th.subVectors(e,this.center);var t=Th.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.add(Th.multiplyScalar(r/n)),this.radius+=r}return this}},{key:"union",value:function(e){return Mh.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Ch.copy(e.center).add(Mh)),this.expandByPoint(Ch.copy(e.center).sub(Mh)),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Rh=new lh,Ih=new lh,Lh=new lh,Nh=new lh,jh=new lh,Dh=new lh,Bh=new lh,zh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new lh,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lh(0,0,-1);(0,Hc.Z)(this,e),this.origin=t,this.direction=n}return(0,Gc.Z)(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,Rh)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=Rh.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Rh.copy(this.direction).multiplyScalar(t).add(this.origin),Rh.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){Ih.copy(e).add(t).multiplyScalar(.5),Lh.copy(t).sub(e).normalize(),Nh.copy(this.origin).sub(Ih);var i,o,a,s,u=.5*e.distanceTo(t),l=-this.direction.dot(Lh),c=Nh.dot(this.direction),f=-Nh.dot(Lh),h=Nh.lengthSq(),d=Math.abs(1-l*l);if(d>0)if(o=l*c-f,s=u*d,(i=l*f-c)>=0)if(o>=-s)if(o<=s){var p=1/d;a=(i*=p)*(i+l*(o*=p)+2*c)+o*(l*i+o+2*f)+h}else o=u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*f)+h;else o=-u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*f)+h;else o<=-s?a=-(i=Math.max(0,-(-l*u+c)))*i+(o=i>0?-u:Math.min(Math.max(-u,-f),u))*(o+2*f)+h:o<=s?(i=0,a=(o=Math.min(Math.max(-u,-f),u))*(o+2*f)+h):a=-(i=Math.max(0,-(l*u+c)))*i+(o=i>0?u:Math.min(Math.max(-u,-f),u))*(o+2*f)+h;else o=l>0?-u:u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*f)+h;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(Lh).multiplyScalar(o).add(Ih),a}},{key:"intersectSphere",value:function(e,t){Rh.subVectors(e.center,this.origin);var n=Rh.dot(this.direction),r=Rh.dot(Rh)-n*n,i=e.radius*e.radius;if(r>i)return null;var o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,o,a,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,f=this.origin;return u>=0?(n=(e.min.x-f.x)*u,r=(e.max.x-f.x)*u):(n=(e.max.x-f.x)*u,r=(e.min.x-f.x)*u),l>=0?(i=(e.min.y-f.y)*l,o=(e.max.y-f.y)*l):(i=(e.max.y-f.y)*l,o=(e.min.y-f.y)*l),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),c>=0?(a=(e.min.z-f.z)*c,s=(e.max.z-f.z)*c):(a=(e.max.z-f.z)*c,s=(e.min.z-f.z)*c),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,Rh)}},{key:"intersectTriangle",value:function(e,t,n,r,i){jh.subVectors(t,e),Dh.subVectors(n,e),Bh.crossVectors(jh,Dh);var o,a=this.direction.dot(Bh);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Nh.subVectors(this.origin,e);var s=o*this.direction.dot(Dh.crossVectors(Nh,Dh));if(s<0)return null;var u=o*this.direction.dot(jh.cross(Nh));if(u<0)return null;if(s+u>a)return null;var l=-o*Nh.dot(Bh);return l<0?null:this.at(l/a,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Fh=function(){function e(){(0,Hc.Z)(this,e),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return(0,Gc.Z)(e,[{key:"set",value:function(e,t,n,r,i,o,a,s,u,l,c,f,h,d,p,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=o,m[9]=a,m[13]=s,m[2]=u,m[6]=l,m[10]=c,m[14]=f,m[3]=h,m[7]=d,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/Vh.setFromMatrixColumn(e,0).length(),i=1/Vh.setFromMatrixColumn(e,1).length(),o=1/Vh.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var f=o*l,h=o*c,d=a*l,p=a*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=h+d*u,t[5]=f-p*u,t[9]=-a*s,t[2]=p-f*u,t[6]=d+h*u,t[10]=o*s}else if("YXZ"===e.order){var v=s*l,m=s*c,g=u*l,y=u*c;t[0]=v+y*a,t[4]=g*a-m,t[8]=o*u,t[1]=o*c,t[5]=o*l,t[9]=-a,t[2]=m*a-g,t[6]=y+v*a,t[10]=o*s}else if("ZXY"===e.order){var b=s*l,x=s*c,_=u*l,w=u*c;t[0]=b-w*a,t[4]=-o*c,t[8]=_+x*a,t[1]=x+_*a,t[5]=o*l,t[9]=w-b*a,t[2]=-o*u,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){var S=o*l,E=o*c,k=a*l,O=a*c;t[0]=s*l,t[4]=k*u-E,t[8]=S*u+O,t[1]=s*c,t[5]=O*u+S,t[9]=E*u-k,t[2]=-u,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var A=o*s,C=o*u,M=a*s,T=a*u;t[0]=s*l,t[4]=T-A*c,t[8]=M*c+C,t[1]=c,t[5]=o*l,t[9]=-a*l,t[2]=-u*l,t[6]=C*c+M,t[10]=A-T*c}else if("XZY"===e.order){var P=o*s,R=o*u,I=a*s,L=a*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=P*c+L,t[5]=o*l,t[9]=R*c-I,t[2]=I*c-R,t[6]=a*l,t[10]=L*c+P}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(Zh,e,Hh)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return qh.subVectors(e,t),0===qh.lengthSq()&&(qh.z=1),qh.normalize(),Gh.crossVectors(n,qh),0===Gh.lengthSq()&&(1===Math.abs(n.z)?qh.x+=1e-4:qh.z+=1e-4,qh.normalize(),Gh.crossVectors(n,qh)),Gh.normalize(),Wh.crossVectors(qh,Gh),r[0]=Gh.x,r[4]=Wh.x,r[8]=qh.x,r[1]=Gh.y,r[5]=Wh.y,r[9]=qh.y,r[2]=Gh.z,r[6]=Wh.z,r[10]=qh.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],f=n[9],h=n[13],d=n[2],p=n[6],v=n[10],m=n[14],g=n[3],y=n[7],b=n[11],x=n[15],_=r[0],w=r[4],S=r[8],E=r[12],k=r[1],O=r[5],A=r[9],C=r[13],M=r[2],T=r[6],P=r[10],R=r[14],I=r[3],L=r[7],N=r[11],j=r[15];return i[0]=o*_+a*k+s*M+u*I,i[4]=o*w+a*O+s*T+u*L,i[8]=o*S+a*A+s*P+u*N,i[12]=o*E+a*C+s*R+u*j,i[1]=l*_+c*k+f*M+h*I,i[5]=l*w+c*O+f*T+h*L,i[9]=l*S+c*A+f*P+h*N,i[13]=l*E+c*C+f*R+h*j,i[2]=d*_+p*k+v*M+m*I,i[6]=d*w+p*O+v*T+m*L,i[10]=d*S+p*A+v*P+m*N,i[14]=d*E+p*C+v*R+m*j,i[3]=g*_+y*k+b*M+x*I,i[7]=g*w+y*O+b*T+x*L,i[11]=g*S+y*A+b*P+x*N,i[15]=g*E+y*C+b*R+x*j,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],u=e[13],l=e[2],c=e[6],f=e[10],h=e[14];return e[3]*(+i*s*c-r*u*c-i*a*f+n*u*f+r*a*h-n*s*h)+e[7]*(+t*s*h-t*u*f+i*o*f-r*o*h+r*u*l-i*s*l)+e[11]*(+t*u*c-t*a*h-i*o*c+n*o*h+i*a*l-n*u*l)+e[15]*(-r*a*l-t*s*c+t*a*f+r*o*c-n*o*f+n*s*l)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],m=e[15],g=c*v*u-p*f*u+p*s*h-a*v*h-c*s*m+a*f*m,y=d*f*u-l*v*u-d*s*h+o*v*h+l*s*m-o*f*m,b=l*p*u-d*c*u+d*a*h-o*p*h-l*a*m+o*c*m,x=d*c*s-l*p*s-d*a*f+o*p*f+l*a*v-o*c*v,_=t*g+n*y+r*b+i*x;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var w=1/_;return e[0]=g*w,e[1]=(p*f*i-c*v*i-p*r*h+n*v*h+c*r*m-n*f*m)*w,e[2]=(a*v*i-p*s*i+p*r*u-n*v*u-a*r*m+n*s*m)*w,e[3]=(c*s*i-a*f*i-c*r*u+n*f*u+a*r*h-n*s*h)*w,e[4]=y*w,e[5]=(l*v*i-d*f*i+d*r*h-t*v*h-l*r*m+t*f*m)*w,e[6]=(d*s*i-o*v*i-d*r*u+t*v*u+o*r*m-t*s*m)*w,e[7]=(o*f*i-l*s*i+l*r*u-t*f*u-o*r*h+t*s*h)*w,e[8]=b*w,e[9]=(d*c*i-l*p*i-d*n*h+t*p*h+l*n*m-t*c*m)*w,e[10]=(o*p*i-d*a*i+d*n*u-t*p*u-o*n*m+t*a*m)*w,e[11]=(l*a*i-o*c*i-l*n*u+t*c*u+o*n*h-t*a*h)*w,e[12]=x*w,e[13]=(l*p*r-d*c*r+d*n*f-t*p*f-l*n*v+t*c*v)*w,e[14]=(d*a*r-o*p*r-d*n*s+t*p*s+o*n*v-t*a*v)*w,e[15]=(o*c*r-l*a*r+l*n*s-t*c*s-o*n*f+t*a*f)*w,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,u=i*o,l=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*o,0,u*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,u=i+i,l=o+o,c=a+a,f=i*u,h=i*l,d=i*c,p=o*l,v=o*c,m=a*c,g=s*u,y=s*l,b=s*c,x=n.x,_=n.y,w=n.z;return r[0]=(1-(p+m))*x,r[1]=(h+b)*x,r[2]=(d-y)*x,r[3]=0,r[4]=(h-b)*_,r[5]=(1-(f+m))*_,r[6]=(v+g)*_,r[7]=0,r[8]=(d+y)*w,r[9]=(v-g)*w,r[10]=(1-(f+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=Vh.set(r[0],r[1],r[2]).length(),o=Vh.set(r[4],r[5],r[6]).length(),a=Vh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Uh.copy(this);var s=1/i,u=1/o,l=1/a;return Uh.elements[0]*=s,Uh.elements[1]*=s,Uh.elements[2]*=s,Uh.elements[4]*=u,Uh.elements[5]*=u,Uh.elements[6]*=u,Uh.elements[8]*=l,Uh.elements[9]*=l,Uh.elements[10]*=l,t.setFromRotationMatrix(Uh),n.x=i,n.y=o,n.z=a,this}},{key:"makePerspective",value:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),u=2*i/(n-r),l=(t+e)/(t-e),c=(n+r)/(n-r),f=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=u,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),u=1/(n-r),l=1/(o-i),c=(t+e)*s,f=(n+r)*u,h=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}();Fh.prototype.isMatrix4=!0;var Vh=new lh,Uh=new Fh,Zh=new lh(0,0,0),Hh=new lh(1,1,1),Gh=new lh,Wh=new lh,qh=new lh,Kh=new Fh,Yh=new uh,Xh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;(0,Hc.Z)(this,e),this._x=t,this._y=n,this._z=r,this._order=i}return(0,Gc.Z)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],l=r[9],c=r[2],f=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(Hf(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,h),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Hf(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(Hf(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-Hf(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Hf(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-Hf(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-l,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return Kh.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Kh,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return Yh.setFromEuler(this),this.setFromQuaternion(Yh,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"toVector3",value:function(e){return e?e.set(this._x,this._y,this._z):new lh(this._x,this._y,this._z)}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}]),e}();Xh.prototype.isEuler=!0,Xh.DefaultOrder="XYZ",Xh.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var $h=function(){function e(){(0,Hc.Z)(this,e),this.mask=1}return(0,Gc.Z)(e,[{key:"set",value:function(e){this.mask=1<<e|0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}}]),e}(),Jh=0,Qh=new lh,ed=new uh,td=new Fh,nd=new lh,rd=new lh,id=new lh,od=new uh,ad=new lh(1,0,0),sd=new lh(0,1,0),ud=new lh(0,0,1),ld={type:"added"},cd={type:"removed"},fd=function(e){Vc(n,e);var t=Uc(n);function n(){var e;(0,Hc.Z)(this,n),e=t.call(this),Object.defineProperty(Lc(e),"id",{value:Jh++}),e.uuid=Zf(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var r=new lh,i=new Xh,o=new uh,a=new lh(1,1,1);return i._onChange((function(){o.setFromEuler(i,!1)})),o._onChange((function(){i.setFromQuaternion(o,void 0,!1)})),Object.defineProperties(Lc(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:o},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Fh},normalMatrix:{value:new Qf}}),e.matrix=new Fh,e.matrixWorld=new Fh,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.layers=new $h,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return(0,Gc.Z)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return ed.setFromAxisAngle(e,t),this.quaternion.multiply(ed),this}},{key:"rotateOnWorldAxis",value:function(e,t){return ed.setFromAxisAngle(e,t),this.quaternion.premultiply(ed),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(ad,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(sd,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(ud,e)}},{key:"translateOnAxis",value:function(e,t){return Qh.copy(e).applyQuaternion(this.quaternion),this.position.add(Qh.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(ad,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(sd,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(ud,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(td.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?nd.copy(e):nd.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),rd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?td.lookAt(rd,nd,this.up):td.lookAt(nd,rd,this.up),this.quaternion.setFromRotationMatrix(td),r&&(td.extractRotation(r.matrixWorld),ed.setFromRotationMatrix(td),this.quaternion.premultiply(ed.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ld)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(cd)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(cd)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),td.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),td.multiply(e.parent.matrixWorld)),e.applyMatrix4(td),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rd,e,id),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rd,od,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++){var l=a[s];i(e.shapes,l)}else i(e.shapes,a)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],f=0,h=this.material.length;f<h;f++)c.push(i(e.materials,this.material[f]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var d=0;d<this.children.length;d++)r.children.push(this.children[d].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var v=this.animations[p];r.animations.push(i(e.animations,v))}}if(t){var m=S(e.geometries),g=S(e.materials),y=S(e.textures),b=S(e.images),x=S(e.shapes),_=S(e.skeletons),w=S(e.animations);m.length>0&&(n.geometries=m),g.length>0&&(n.materials=g),y.length>0&&(n.textures=y),b.length>0&&(n.images=b),x.length>0&&(n.shapes=x),_.length>0&&(n.skeletons=_),w.length>0&&(n.animations=w)}return n.object=r,n;function S(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(Df);fd.DefaultUp=new lh(0,1,0),fd.DefaultMatrixAutoUpdate=!0,fd.prototype.isObject3D=!0;var hd=new lh,dd=new lh,pd=new lh,vd=new lh,md=new lh,gd=new lh,yd=new lh,bd=new lh,xd=new lh,_d=new lh,wd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new lh,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lh,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new lh;(0,Hc.Z)(this,e),this.a=t,this.b=n,this.c=r}return(0,Gc.Z)(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return hd.subVectors(this.c,this.b),dd.subVectors(this.a,this.b),.5*hd.cross(dd).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,i,o){return e.getUV(t,this.a,this.b,this.c,n,r,i,o)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,i=this.a,o=this.b,a=this.c;md.subVectors(o,i),gd.subVectors(a,i),bd.subVectors(e,i);var s=md.dot(bd),u=gd.dot(bd);if(s<=0&&u<=0)return t.copy(i);xd.subVectors(e,o);var l=md.dot(xd),c=gd.dot(xd);if(l>=0&&c<=l)return t.copy(o);var f=s*c-l*u;if(f<=0&&s>=0&&l<=0)return n=s/(s-l),t.copy(i).addScaledVector(md,n);_d.subVectors(e,a);var h=md.dot(_d),d=gd.dot(_d);if(d>=0&&h<=d)return t.copy(a);var p=h*u-s*d;if(p<=0&&u>=0&&d<=0)return r=u/(u-d),t.copy(i).addScaledVector(gd,r);var v=l*d-h*c;if(v<=0&&c-l>=0&&h-d>=0)return yd.subVectors(a,o),r=(c-l)/(c-l+(h-d)),t.copy(o).addScaledVector(yd,r);var m=1/(v+p+f);return n=p*m,r=f*m,t.copy(i).addScaledVector(md,n).addScaledVector(gd,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),hd.subVectors(e,t),r.cross(hd);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){hd.subVectors(r,t),dd.subVectors(n,t),pd.subVectors(e,t);var o=hd.dot(hd),a=hd.dot(dd),s=hd.dot(pd),u=dd.dot(dd),l=dd.dot(pd),c=o*u-a*a;if(0===c)return i.set(-2,-1,-1);var f=1/c,h=(u*s-a*l)*f,d=(o*l-a*s)*f;return i.set(1-h-d,d,h)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,vd),vd.x>=0&&vd.y>=0&&vd.x+vd.y<=1}},{key:"getUV",value:function(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,vd),s.set(0,0),s.addScaledVector(i,vd.x),s.addScaledVector(o,vd.y),s.addScaledVector(a,vd.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return hd.subVectors(n,t),dd.subVectors(e,t),hd.cross(dd).dot(r)<0}}]),e}(),Sd=0,Ed=function(e){Vc(n,e);var t=Uc(n);function n(){var e;return(0,Hc.Z)(this,n),e=t.call(this),Object.defineProperty(Lc(e),"id",{value:Sd++}),e.uuid=Zf(),e.name="",e.type="Material",e.fog=!0,e.blending=1,e.side=0,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=204,e.blendDst=205,e.blendEquation=Kc,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=3,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=519,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=If,e.stencilZFail=If,e.stencilZPass=If,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaTest=0,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e}return(0,Gc.Z)(n,[{key:"onBuild",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(n.specularTint=this.specularTint.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(n.specularTintMap=this.specularTintMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationTint&&(n.attenuationTint=this.attenuationTint.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(Df);Ed.prototype.isMaterial=!0;var kd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Od={h:0,s:0,l:0},Ad={h:0,s:0,l:0};function Cd(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Md(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Td(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var Pd=function(){function e(t,n,r){return(0,Hc.Z)(this,e),void 0===n&&void 0===r?this.set(t):this.setRGB(t,n,r)}return(0,Gc.Z)(e,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}},{key:"setRGB",value:function(e,t,n){return this.r=e,this.g=t,this.b=n,this}},{key:"setHSL",value:function(e,t,n){if(e=Gf(e,1),t=Hf(t,0,1),n=Hf(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Cd(i,r,e+1/3),this.g=Cd(i,r,e),this.b=Cd(i,r,e-1/3)}return this}},{key:"setStyle",value:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(a,s,u)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){var l=n[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}},{key:"setColorName",value:function(e){var t=kd[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copyGammaToLinear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}},{key:"copyLinearToGamma",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}},{key:"convertGammaToLinear",value:function(e){return this.copyGammaToLinear(this,e),this}},{key:"convertLinearToGamma",value:function(e){return this.copyLinearToGamma(this,e),this}},{key:"copySRGBToLinear",value:function(e){return this.r=Md(e.r),this.g=Md(e.g),this.b=Md(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=Td(e.r),this.g=Td(e.g),this.b=Td(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)t=0,n=0;else{var l=a-s;switch(n=u<=.5?l/(a+s):l/(2-a-s),a){case r:t=(i-o)/l+(i<o?6:0);break;case i:t=(o-r)/l+2;break;case o:t=(r-i)/l+4}t/=6}return e.h=t,e.s=n,e.l=u,e}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(Od),Od.h+=e,Od.s+=t,Od.l+=n,this.setHSL(Od.h,Od.s,Od.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(Od),e.getHSL(Ad);var n=Wf(Od.h,Ad.h,t),r=Wf(Od.s,Ad.s,t),i=Wf(Od.l,Ad.l,t);return this.setHSL(n,r,i),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),e}();Pd.NAMES=kd,Pd.prototype.isColor=!0,Pd.prototype.r=1,Pd.prototype.g=1,Pd.prototype.b=1;var Rd=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).type="MeshBasicMaterial",r.color=new Pd(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(Ed);Rd.prototype.isMeshBasicMaterial=!0;var Id=new lh,Ld=new $f,Nd=function(){function e(t,n,r){if((0,Hc.Z)(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===r,this.usage=Lf,this.updateRange={offset:0,count:-1},this.version=0}return(0,Gc.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"copyColorsArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new Pd),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this}},{key:"copyVector2sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new $f),t[n++]=o.x,t[n++]=o.y}return this}},{key:"copyVector3sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new lh),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this}},{key:"copyVector4sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new ih),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)Ld.fromBufferAttribute(this,t),Ld.applyMatrix3(e),this.setXY(t,Ld.x,Ld.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)Id.fromBufferAttribute(this,r),Id.applyMatrix3(e),this.setXYZ(r,Id.x,Id.y,Id.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)Id.x=this.getX(t),Id.y=this.getY(t),Id.z=this.getZ(t),Id.applyMatrix4(e),this.setXYZ(t,Id.x,Id.y,Id.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Id.x=this.getX(t),Id.y=this.getY(t),Id.z=this.getZ(t),Id.applyNormalMatrix(e),this.setXYZ(t,Id.x,Id.y,Id.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Id.x=this.getX(t),Id.y=this.getY(t),Id.z=this.getZ(t),Id.transformDirection(e),this.setXYZ(t,Id.x,Id.y,Id.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){return this.array[e*this.itemSize]}},{key:"setX",value:function(e,t){return this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){return this.array[e*this.itemSize+1]}},{key:"setY",value:function(e,t){return this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){return this.array[e*this.itemSize+2]}},{key:"setZ",value:function(e,t){return this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){return this.array[e*this.itemSize+3]}},{key:"setW",value:function(e,t){return this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Lf&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),e}();Nd.prototype.isBufferAttribute=!0;var jd=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i){return(0,Hc.Z)(this,n),t.call(this,new Uint16Array(e),r,i)}return(0,Gc.Z)(n)}(Nd),Dd=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i){return(0,Hc.Z)(this,n),t.call(this,new Uint32Array(e),r,i)}return(0,Gc.Z)(n)}(Nd);(function(e){Vc(n,e);var t=Uc(n);function n(e,r,i){return(0,Hc.Z)(this,n),t.call(this,new Uint16Array(e),r,i)}return(0,Gc.Z)(n)})(Nd).prototype.isFloat16BufferAttribute=!0;var Bd=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i){return(0,Hc.Z)(this,n),t.call(this,new Float32Array(e),r,i)}return(0,Gc.Z)(n)}(Nd);function zd(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;var Fd=0,Vd=new Fh,Ud=new fd,Zd=new lh,Hd=new hh,Gd=new hh,Wd=new lh,qd=function(e){Vc(n,e);var t=Uc(n);function n(){var e;return(0,Hc.Z)(this,n),e=t.call(this),Object.defineProperty(Lc(e),"id",{value:Fd++}),e.uuid=Zf(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return(0,Gc.Z)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(zd(e)>65535?Dd:jd)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new Qf).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return Vd.makeRotationFromQuaternion(e),this.applyMatrix4(Vd),this}},{key:"rotateX",value:function(e){return Vd.makeRotationX(e),this.applyMatrix4(Vd),this}},{key:"rotateY",value:function(e){return Vd.makeRotationY(e),this.applyMatrix4(Vd),this}},{key:"rotateZ",value:function(e){return Vd.makeRotationZ(e),this.applyMatrix4(Vd),this}},{key:"translate",value:function(e,t,n){return Vd.makeTranslation(e,t,n),this.applyMatrix4(Vd),this}},{key:"scale",value:function(e,t,n){return Vd.makeScale(e,t,n),this.applyMatrix4(Vd),this}},{key:"lookAt",value:function(e){return Ud.lookAt(e),Ud.updateMatrix(),this.applyMatrix4(Ud.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Zd).negate(),this.translate(Zd.x,Zd.y,Zd.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Bd(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new hh);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new lh(-1/0,-1/0,-1/0),new lh(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];Hd.setFromBufferAttribute(i),this.morphTargetsRelative?(Wd.addVectors(this.boundingBox.min,Hd.min),this.boundingBox.expandByPoint(Wd),Wd.addVectors(this.boundingBox.max,Hd.max),this.boundingBox.expandByPoint(Wd)):(this.boundingBox.expandByPoint(Hd.min),this.boundingBox.expandByPoint(Hd.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new Ph);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new lh,1/0);if(e){var n=this.boundingSphere.center;if(Hd.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var o=t[r];Gd.setFromBufferAttribute(o),this.morphTargetsRelative?(Wd.addVectors(Hd.min,Gd.min),Hd.expandByPoint(Wd),Wd.addVectors(Hd.max,Gd.max),Hd.expandByPoint(Wd)):(Hd.expandByPoint(Gd.min),Hd.expandByPoint(Gd.max))}Hd.getCenter(n);for(var a=0,s=0,u=e.count;s<u;s++)Wd.fromBufferAttribute(e,s),a=Math.max(a,n.distanceToSquared(Wd));if(t)for(var l=0,c=t.length;l<c;l++)for(var f=t[l],h=this.morphTargetsRelative,d=0,p=f.count;d<p;d++)Wd.fromBufferAttribute(f,d),h&&(Zd.fromBufferAttribute(e,d),Wd.add(Zd)),a=Math.max(a,n.distanceToSquared(Wd));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeFaceNormals",value:function(){}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,a=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new Nd(new Float32Array(4*a),4));for(var s=t.tangent.array,u=[],l=[],c=0;c<a;c++)u[c]=new lh,l[c]=new lh;var f=new lh,h=new lh,d=new lh,p=new $f,v=new $f,m=new $f,g=new lh,y=new lh,b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(var x=0,_=b.length;x<_;++x)for(var w=b[x],S=w.start,E=S,k=S+w.count;E<k;E+=3)j(n[E+0],n[E+1],n[E+2]);for(var O=new lh,A=new lh,C=new lh,M=new lh,T=0,P=b.length;T<P;++T)for(var R=b[T],I=R.start,L=I,N=I+R.count;L<N;L+=3)D(n[L+0]),D(n[L+1]),D(n[L+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function j(e,t,n){f.fromArray(r,3*e),h.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(o,2*e),v.fromArray(o,2*t),m.fromArray(o,2*n),h.sub(f),d.sub(f),v.sub(p),m.sub(p);var i=1/(v.x*m.y-m.x*v.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-v.y).multiplyScalar(i),y.copy(d).multiplyScalar(v.x).addScaledVector(h,-m.x).multiplyScalar(i),u[e].add(g),u[t].add(g),u[n].add(g),l[e].add(y),l[t].add(y),l[n].add(y))}function D(e){C.fromArray(i,3*e),M.copy(C);var t=u[e];O.copy(t),O.sub(C.multiplyScalar(C.dot(t))).normalize(),A.crossVectors(M,t);var n=A.dot(l[e])<0?-1:1;s[4*e]=O.x,s[4*e+1]=O.y,s[4*e+2]=O.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new Nd(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var o=new lh,a=new lh,s=new lh,u=new lh,l=new lh,c=new lh,f=new lh,h=new lh;if(e)for(var d=0,p=e.count;d<p;d+=3){var v=e.getX(d+0),m=e.getX(d+1),g=e.getX(d+2);o.fromBufferAttribute(t,v),a.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),f.subVectors(s,a),h.subVectors(o,a),f.cross(h),u.fromBufferAttribute(n,v),l.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),u.add(f),l.add(f),c.add(f),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var y=0,b=t.count;y<b;y+=3)o.fromBufferAttribute(t,y+0),a.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),f.subVectors(s,a),h.subVectors(o,a),f.cross(h),n.setXYZ(y+0,f.x,f.y,f.z),n.setXYZ(y+1,f.x,f.y,f.z),n.setXYZ(y+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,o=e.attributes[r],a=o.array,s=o.itemSize*t,u=Math.min(a.length,i.length-s),l=0,c=s;l<u;l++,c++)i[c]=a[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)Wd.fromBufferAttribute(e,t),Wd.normalize(),e.setXYZ(t,Wd.x,Wd.y,Wd.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r),a=0,s=0,u=0,l=t.length;u<l;u++){a=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(var c=0;c<r;c++)o[s++]=n[a++]}return new Nd(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,i=this.attributes;for(var o in i){var a=e(i[o],r);t.setAttribute(o,a)}var s=this.morphAttributes;for(var u in s){for(var l=[],c=s[u],f=0,h=c.length;f<h;f++){var d=e(c[f],r);l.push(d)}t.morphAttributes[u]=l}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,v=0,m=p.length;v<m;v++){var g=p[v];t.addGroup(g.start,g.count,g.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var o in i){var a=i[o];e.data.attributes[o]=a.toJSON(e.data)}var s={},u=!1;for(var l in this.morphAttributes){for(var c=this.morphAttributes[l],f=[],h=0,d=c.length;h<d;h++){var p=c[h];f.push(p.toJSON(e.data))}f.length>0&&(s[l]=f,u=!0)}u&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(e.data.groups=JSON.parse(JSON.stringify(v)));var m=this.boundingSphere;return null!==m&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}},{key:"clone",value:function(){return(new n).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var o=r[i];this.setAttribute(i,o.clone(t))}var a=e.morphAttributes;for(var s in a){for(var u=[],l=a[s],c=0,f=l.length;c<f;c++)u.push(l[c].clone(t));this.morphAttributes[s]=u}this.morphTargetsRelative=e.morphTargetsRelative;for(var h=e.groups,d=0,p=h.length;d<p;d++){var v=h[d];this.addGroup(v.start,v.count,v.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Df);qd.prototype.isBufferGeometry=!0;var Kd=new Fh,Yd=new zh,Xd=new Ph,$d=new lh,Jd=new lh,Qd=new lh,ep=new lh,tp=new lh,np=new lh,rp=new lh,ip=new lh,op=new lh,ap=new $f,sp=new $f,up=new $f,lp=new lh,cp=new lh,fp=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new qd,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rd;return(0,Hc.Z)(this,n),(e=t.call(this)).type="Mesh",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(e,t){var n,r=this.geometry,i=this.material,o=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),Xd.copy(r.boundingSphere),Xd.applyMatrix4(o),!1!==e.ray.intersectsSphere(Xd)&&(Kd.copy(o).invert(),Yd.copy(e.ray).applyMatrix4(Kd),null===r.boundingBox||!1!==Yd.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var a=r.index,s=r.attributes.position,u=r.morphAttributes.position,l=r.morphTargetsRelative,c=r.attributes.uv,f=r.attributes.uv2,h=r.groups,d=r.drawRange;if(null!==a)if(Array.isArray(i))for(var p=0,v=h.length;p<v;p++)for(var m=h[p],g=i[m.materialIndex],y=Math.max(m.start,d.start),b=Math.min(m.start+m.count,d.start+d.count);y<b;y+=3){var x=a.getX(y),_=a.getX(y+1),w=a.getX(y+2);(n=hp(this,g,e,Yd,s,u,l,c,f,x,_,w))&&(n.faceIndex=Math.floor(y/3),n.face.materialIndex=m.materialIndex,t.push(n))}else for(var S=Math.max(0,d.start),E=Math.min(a.count,d.start+d.count);S<E;S+=3){var k=a.getX(S),O=a.getX(S+1),A=a.getX(S+2);(n=hp(this,i,e,Yd,s,u,l,c,f,k,O,A))&&(n.faceIndex=Math.floor(S/3),t.push(n))}else if(void 0!==s)if(Array.isArray(i))for(var C=0,M=h.length;C<M;C++)for(var T=h[C],P=i[T.materialIndex],R=Math.max(T.start,d.start),I=Math.min(T.start+T.count,d.start+d.count);R<I;R+=3){(n=hp(this,P,e,Yd,s,u,l,c,f,R,R+1,R+2))&&(n.faceIndex=Math.floor(R/3),n.face.materialIndex=T.materialIndex,t.push(n))}else for(var L=Math.max(0,d.start),N=Math.min(s.count,d.start+d.count);L<N;L+=3){(n=hp(this,i,e,Yd,s,u,l,c,f,L,L+1,L+2))&&(n.faceIndex=Math.floor(L/3),t.push(n))}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(fd);function hp(e,t,n,r,i,o,a,s,u,l,c,f){$d.fromBufferAttribute(i,l),Jd.fromBufferAttribute(i,c),Qd.fromBufferAttribute(i,f);var h=e.morphTargetInfluences;if(o&&h){rp.set(0,0,0),ip.set(0,0,0),op.set(0,0,0);for(var d=0,p=o.length;d<p;d++){var v=h[d],m=o[d];0!==v&&(ep.fromBufferAttribute(m,l),tp.fromBufferAttribute(m,c),np.fromBufferAttribute(m,f),a?(rp.addScaledVector(ep,v),ip.addScaledVector(tp,v),op.addScaledVector(np,v)):(rp.addScaledVector(ep.sub($d),v),ip.addScaledVector(tp.sub(Jd),v),op.addScaledVector(np.sub(Qd),v)))}$d.add(rp),Jd.add(ip),Qd.add(op)}e.isSkinnedMesh&&(e.boneTransform(l,$d),e.boneTransform(c,Jd),e.boneTransform(f,Qd));var g=function(e,t,n,r,i,o,a,s){if(null===(1===t.side?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,2!==t.side,s)))return null;cp.copy(s),cp.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(cp);return u<n.near||u>n.far?null:{distance:u,point:cp.clone(),object:e}}(e,t,n,r,$d,Jd,Qd,lp);if(g){s&&(ap.fromBufferAttribute(s,l),sp.fromBufferAttribute(s,c),up.fromBufferAttribute(s,f),g.uv=wd.getUV(lp,$d,Jd,Qd,ap,sp,up,new $f)),u&&(ap.fromBufferAttribute(u,l),sp.fromBufferAttribute(u,c),up.fromBufferAttribute(u,f),g.uv2=wd.getUV(lp,$d,Jd,Qd,ap,sp,up,new $f));var y={a:l,b:c,c:f,normal:new lh,materialIndex:0};wd.getNormal($d,Jd,Qd,y.normal),g.face=y}return g}fp.prototype.isMesh=!0;var dp=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;(0,Hc.Z)(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:i,depth:o,widthSegments:a,heightSegments:s,depthSegments:u};var l=Lc(e);a=Math.floor(a),s=Math.floor(s),u=Math.floor(u);var c=[],f=[],h=[],d=[],p=0,v=0;function m(e,t,n,r,i,o,a,s,u,m,g){for(var y=o/u,b=a/m,x=o/2,_=a/2,w=s/2,S=u+1,E=m+1,k=0,O=0,A=new lh,C=0;C<E;C++)for(var M=C*b-_,T=0;T<S;T++){var P=T*y-x;A[e]=P*r,A[t]=M*i,A[n]=w,f.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=s>0?1:-1,h.push(A.x,A.y,A.z),d.push(T/u),d.push(1-C/m),k+=1}for(var R=0;R<m;R++)for(var I=0;I<u;I++){var L=p+I+S*R,N=p+I+S*(R+1),j=p+(I+1)+S*(R+1),D=p+(I+1)+S*R;c.push(L,N,D),c.push(N,j,D),O+=6}l.addGroup(v,O,g),v+=O,p+=k}return m("z","y","x",-1,-1,o,i,r,u,s,0),m("z","y","x",1,-1,o,i,-r,u,s,1),m("x","z","y",1,1,r,o,i,a,u,2),m("x","z","y",1,-1,r,o,-i,a,u,3),m("x","y","z",1,-1,r,i,o,a,s,4),m("x","y","z",-1,-1,r,i,-o,a,s,5),e.setIndex(c),e.setAttribute("position",new Bd(f,3)),e.setAttribute("normal",new Bd(h,3)),e.setAttribute("uv",new Bd(d,2)),e}return(0,Gc.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(qd);function pp(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function vp(e){for(var t={},n=0;n<e.length;n++){var r=pp(e[n]);for(var i in r)t[i]=r[i]}return t}var mp={clone:pp,merge:vp},gp=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).type="ShaderMaterial",r.defines={},r.uniforms={},r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),r.setValues(e)),r}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=pp(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=Bc(jc(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var o={};for(var a in this.extensions)!0===this.extensions[a]&&(o[a]=!0);return Object.keys(o).length>0&&(t.extensions=o),t}}]),n}(Ed);gp.prototype.isShaderMaterial=!0;var yp=function(e){Vc(n,e);var t=Uc(n);function n(){var e;return(0,Hc.Z)(this,n),(e=t.call(this)).type="Camera",e.matrixWorldInverse=new Fh,e.projectionMatrix=new Fh,e.projectionMatrixInverse=new Fh,e}return(0,Gc.Z)(n,[{key:"copy",value:function(e,t){return Bc(jc(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){Bc(jc(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){Bc(jc(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(fd);yp.prototype.isCamera=!0;var bp=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return(0,Hc.Z)(this,n),(e=t.call(this)).type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=o,e.far=a,e.focus=10,e.aspect=i,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return(0,Gc.Z)(n,[{key:"copy",value:function(e,t){return Bc(jc(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Uf*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Vf*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*Uf*Math.atan(Math.tan(.5*Vf*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*Vf*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=Bc(jc(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(yp);bp.prototype.isPerspectiveCamera=!0;var xp=90,_p=function(e){Vc(r,e);var n=Uc(r);function r(e,t,i){var o;if((0,Hc.Z)(this,r),(o=n.call(this)).type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),Nc(o);o.renderTarget=i;var a=new bp(xp,1,e,t);a.layers=o.layers,a.up.set(0,-1,0),a.lookAt(new lh(1,0,0)),o.add(a);var s=new bp(xp,1,e,t);s.layers=o.layers,s.up.set(0,-1,0),s.lookAt(new lh(-1,0,0)),o.add(s);var u=new bp(xp,1,e,t);u.layers=o.layers,u.up.set(0,0,1),u.lookAt(new lh(0,1,0)),o.add(u);var l=new bp(xp,1,e,t);l.layers=o.layers,l.up.set(0,0,-1),l.lookAt(new lh(0,-1,0)),o.add(l);var c=new bp(xp,1,e,t);c.layers=o.layers,c.up.set(0,-1,0),c.lookAt(new lh(0,0,1)),o.add(c);var f=new bp(xp,1,e,t);return f.layers=o.layers,f.up.set(0,-1,0),f.lookAt(new lh(0,0,-1)),o.add(f),o}return(0,Gc.Z)(r,[{key:"update",value:function(e,n){null===this.parent&&this.updateMatrixWorld();var r=this.renderTarget,i=(0,t.Z)(this.children,6),o=i[0],a=i[1],s=i[2],u=i[3],l=i[4],c=i[5],f=e.xr.enabled,h=e.getRenderTarget();e.xr.enabled=!1;var d=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(n,o),e.setRenderTarget(r,1),e.render(n,a),e.setRenderTarget(r,2),e.render(n,s),e.setRenderTarget(r,3),e.render(n,u),e.setRenderTarget(r,4),e.render(n,l),r.texture.generateMipmaps=d,e.setRenderTarget(r,5),e.render(n,c),e.setRenderTarget(h),e.xr.enabled=f}}]),r}(fd),wp=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i,o,a,s,u,l,c,f){var h;return(0,Hc.Z)(this,n),e=void 0!==e?e:[],r=void 0!==r?r:Xc,u=void 0!==u?u:gf,(h=t.call(this,e,r,i,o,a,s,u,l,c,f)).flipY=!1,h}return(0,Gc.Z)(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(nh);wp.prototype.isCubeTexture=!0;var Sp=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i){var o;return(0,Hc.Z)(this,n),Number.isInteger(r)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),r=i),o=t.call(this,e,e,r),r=r||{},o.texture=new wp(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),o.texture.isRenderTargetTexture=!0,o.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,o.texture.minFilter=void 0!==r.minFilter?r.minFilter:lf,o.texture._needsFlipEnvMap=!1,o}return(0,Gc.Z)(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.format=yf,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new dp(5,5,5),a=new gp({name:"CubemapFromEquirect",uniforms:pp(n),vertexShader:r,fragmentShader:i,side:1,blending:0});a.uniforms.tEquirect.value=t;var s=new fp(o,a),u=t.minFilter;return t.minFilter===cf&&(t.minFilter=lf),new _p(1,10,this).update(e,s),t.minFilter=u,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(i)}}]),n}(oh);Sp.prototype.isWebGLCubeRenderTarget=!0;var Ep=new lh,kp=new lh,Op=new Qf,Ap=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new lh(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,Hc.Z)(this,e),this.normal=t,this.constant=n}return(0,Gc.Z)(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=Ep.subVectors(n,t).cross(kp.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(Ep),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||Op.getNormalMatrix(e),r=this.coplanarPoint(Ep).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();Ap.prototype.isPlane=!0;var Cp=new Ph,Mp=new lh,Tp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ap,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ap,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ap,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ap,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Ap,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Ap;(0,Hc.Z)(this,e),this.planes=[t,n,r,i,o,a]}return(0,Gc.Z)(e,[{key:"set",value:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],f=n[8],h=n[9],d=n[10],p=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,c-s,p-f,y-v).normalize(),t[1].setComponents(a+r,c+s,p+f,y+v).normalize(),t[2].setComponents(a+i,c+u,p+h,y+m).normalize(),t[3].setComponents(a-i,c-u,p-h,y-m).normalize(),t[4].setComponents(a-o,c-l,p-d,y-g).normalize(),t[5].setComponents(a+o,c+l,p+d,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Cp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Cp)}},{key:"intersectsSprite",value:function(e){return Cp.center.set(0,0,0),Cp.radius=.7071067811865476,Cp.applyMatrix4(e.matrixWorld),this.intersectsSphere(Cp)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(Mp.x=r.normal.x>0?e.max.x:e.min.x,Mp.y=r.normal.y>0?e.max.y:e.min.y,Mp.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Mp)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function Pp(){var e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Rp(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){var o=r.get(t);(!o||o.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var a=r.get(t);void 0===a?r.set(t,function(t,r){var i=t.array,o=t.usage,a=e.createBuffer();e.bindBuffer(r,a),e.bufferData(r,i,o),t.onUploadCallback();var s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(s=5121),{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):a.version<t.version&&(!function(t,r,i){var o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(a.buffer,t,i),a.version=t.version)}}}}var Ip=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,Hc.Z)(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:i,widthSegments:o,heightSegments:a};for(var s=r/2,u=i/2,l=Math.floor(o),c=Math.floor(a),f=l+1,h=c+1,d=r/l,p=i/c,v=[],m=[],g=[],y=[],b=0;b<h;b++)for(var x=b*p-u,_=0;_<f;_++){var w=_*d-s;m.push(w,-x,0),g.push(0,0,1),y.push(_/l),y.push(1-b/c)}for(var S=0;S<c;S++)for(var E=0;E<l;E++){var k=E+f*S,O=E+f*(S+1),A=E+1+f*(S+1),C=E+1+f*S;v.push(k,O,C),v.push(O,A,C)}return e.setIndex(v),e.setAttribute("position",new Bd(m,3)),e.setAttribute("normal",new Bd(g,3)),e.setAttribute("uv",new Bd(y,2)),e}return(0,Gc.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(qd),Lp={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in vec3 f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn ( f90 - f0 ) * fresnel + f0;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in vec3 f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, vec3( 1.0 ), dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\t#ifdef SPECULAR\n\t\tvec3 specularIntensityFactor = vec3( specularIntensity );\n\t\tvec3 specularTintFactor = specularTint;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARTINTMAP\n\t\t\tspecularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularColorF90 = mix( specularIntensityFactor, vec3( 1.0 ), metalnessFactor );\n\t#else\n\t\tvec3 specularIntensityFactor = vec3( 1.0 );\n\t\tvec3 specularTintFactor = vec3( 1.0 );\n\t\tmaterial.specularColorF90 = vec3( 1.0 );\n\t#endif\n\tmaterial.specularColor = mix( min( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularColorF90 = vec3( 1.0 );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n\tvec3 specularColorF90;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), vec3( 1.0 ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularColorF90, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition.xyz / vWorldPosition.w;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tfloat ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );\n\tvec3 transmission = transmissionFactor * getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationTint, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec4 vWorldPosition;\n\tvec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {\n\t\tvec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length(vec3(modelMatrix[0].xyz));\n\t\tmodelScale.y = length(vec3(modelMatrix[1].xyz));\n\t\tmodelScale.z = length(vec3(modelMatrix[2].xyz));\n\t\treturn normalize(refractionVector) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness(float roughness, float ior) {\n\t\treturn roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n\t}\n\tvec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {\n\t\tfloat framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);\n\t\treturn texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;\n\t}\n\tvec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {\n\t\tif (attenuationDistance == 0.0) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;\n\t\t\tvec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec3 getIBLVolumeRefraction(vec3 n, vec3 v, float perceptualRoughness, vec3 baseColor, vec3 specularColor,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);\n\t\tvec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);\n\t\treturn (1.0 - specularColor) * attenuatedColor * baseColor;\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t\t#ifdef USE_TANGENT\n\t\t\tvTangent = normalize( transformedTangent );\n\t\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t\t#endif\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationTint;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularTint;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARTINTMAP\n\t\tuniform sampler2D specularTintMap;\n\t#endif\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <transmission_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#ifdef USE_TRANSMISSION\n\tvarying vec4 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition;\n#endif\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Np={common:{diffuse:{value:new Pd(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Qf},uv2Transform:{value:new Qf},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new $f(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Pd(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Pd(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Qf}},sprite:{diffuse:{value:new Pd(16777215)},opacity:{value:1},center:{value:new $f(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Qf}}},jp={basic:{uniforms:vp([Np.common,Np.specularmap,Np.envmap,Np.aomap,Np.lightmap,Np.fog]),vertexShader:Lp.meshbasic_vert,fragmentShader:Lp.meshbasic_frag},lambert:{uniforms:vp([Np.common,Np.specularmap,Np.envmap,Np.aomap,Np.lightmap,Np.emissivemap,Np.fog,Np.lights,{emissive:{value:new Pd(0)}}]),vertexShader:Lp.meshlambert_vert,fragmentShader:Lp.meshlambert_frag},phong:{uniforms:vp([Np.common,Np.specularmap,Np.envmap,Np.aomap,Np.lightmap,Np.emissivemap,Np.bumpmap,Np.normalmap,Np.displacementmap,Np.fog,Np.lights,{emissive:{value:new Pd(0)},specular:{value:new Pd(1118481)},shininess:{value:30}}]),vertexShader:Lp.meshphong_vert,fragmentShader:Lp.meshphong_frag},standard:{uniforms:vp([Np.common,Np.envmap,Np.aomap,Np.lightmap,Np.emissivemap,Np.bumpmap,Np.normalmap,Np.displacementmap,Np.roughnessmap,Np.metalnessmap,Np.fog,Np.lights,{emissive:{value:new Pd(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Lp.meshphysical_vert,fragmentShader:Lp.meshphysical_frag},toon:{uniforms:vp([Np.common,Np.aomap,Np.lightmap,Np.emissivemap,Np.bumpmap,Np.normalmap,Np.displacementmap,Np.gradientmap,Np.fog,Np.lights,{emissive:{value:new Pd(0)}}]),vertexShader:Lp.meshtoon_vert,fragmentShader:Lp.meshtoon_frag},matcap:{uniforms:vp([Np.common,Np.bumpmap,Np.normalmap,Np.displacementmap,Np.fog,{matcap:{value:null}}]),vertexShader:Lp.meshmatcap_vert,fragmentShader:Lp.meshmatcap_frag},points:{uniforms:vp([Np.points,Np.fog]),vertexShader:Lp.points_vert,fragmentShader:Lp.points_frag},dashed:{uniforms:vp([Np.common,Np.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Lp.linedashed_vert,fragmentShader:Lp.linedashed_frag},depth:{uniforms:vp([Np.common,Np.displacementmap]),vertexShader:Lp.depth_vert,fragmentShader:Lp.depth_frag},normal:{uniforms:vp([Np.common,Np.bumpmap,Np.normalmap,Np.displacementmap,{opacity:{value:1}}]),vertexShader:Lp.normal_vert,fragmentShader:Lp.normal_frag},sprite:{uniforms:vp([Np.sprite,Np.fog]),vertexShader:Lp.sprite_vert,fragmentShader:Lp.sprite_frag},background:{uniforms:{uvTransform:{value:new Qf},t2D:{value:null}},vertexShader:Lp.background_vert,fragmentShader:Lp.background_frag},cube:{uniforms:vp([Np.envmap,{opacity:{value:1}}]),vertexShader:Lp.cube_vert,fragmentShader:Lp.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Lp.equirect_vert,fragmentShader:Lp.equirect_frag},distanceRGBA:{uniforms:vp([Np.common,Np.displacementmap,{referencePosition:{value:new lh},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Lp.distanceRGBA_vert,fragmentShader:Lp.distanceRGBA_frag},shadow:{uniforms:vp([Np.lights,Np.fog,{color:{value:new Pd(0)},opacity:{value:1}}]),vertexShader:Lp.shadow_vert,fragmentShader:Lp.shadow_frag}};function Dp(e,t,n,r,i){var o,a,s=new Pd(0),u=0,l=null,c=0,f=null;function h(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return s},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(e),h(s,u=t)},getClearAlpha:function(){return u},setClearAlpha:function(e){h(s,u=e)},render:function(n,i){var d=!1,p=!0===i.isScene?i.background:null;p&&p.isTexture&&(p=t.get(p));var v=e.xr,m=v.getSession&&v.getSession();m&&"additive"===m.environmentBlendMode&&(p=null),null===p?h(s,u):p&&p.isColor&&(h(p,1),d=!0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.mapping===ef)?(void 0===a&&((a=new fp(new dp(1,1,1),new gp({name:"BackgroundCubeMaterial",uniforms:pp(jp.cube.uniforms),vertexShader:jp.cube.vertexShader,fragmentShader:jp.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(a)),a.material.uniforms.envMap.value=p,a.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,l===p&&c===p.version&&f===e.toneMapping||(a.material.needsUpdate=!0,l=p,c=p.version,f=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null)):p&&p.isTexture&&(void 0===o&&((o=new fp(new Ip(2,2),new gp({name:"BackgroundMaterial",uniforms:pp(jp.background.uniforms),vertexShader:jp.background.vertexShader,fragmentShader:jp.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(o)),o.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),o.material.uniforms.uvTransform.value.copy(p.matrix),l===p&&c===p.version&&f===e.toneMapping||(o.material.needsUpdate=!0,l=p,c=p.version,f=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null))}}}function Bp(e,t,n,r){var i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},u=h(null),l=u;function c(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function f(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function h(e){for(var t=[],n=[],r=[],o=0;o<i;o++)t[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function d(){for(var e=l.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function p(e){v(e,0)}function v(n,i){var o=l.newAttributes,a=l.enabledAttributes,s=l.attributeDivisors;(o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==i)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function m(){for(var t=l.newAttributes,n=l.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function g(t,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,o,a,s):e.vertexAttribIPointer(t,n,i,a,s)}function y(){b(),l!==u&&c((l=u).object)}function b(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,f,y,b){var x=!1;if(a){var _=function(t,n,i){var a=!0===i.wireframe,u=s[t.id];void 0===u&&(u={},s[t.id]=u);var l=u[n.id];void 0===l&&(l={},u[n.id]=l);var c=l[a];void 0===c&&(c=h(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),l[a]=c);return c}(y,f,u);l!==_&&c((l=_).object),x=function(e,t){var n=l.attributes,r=e.attributes,i=0;for(var o in r){var a=n[o],s=r[o];if(void 0===a)return!0;if(a.attribute!==s)return!0;if(a.data!==s.data)return!0;i++}return l.attributesNum!==i||l.index!==t}(y,b),x&&function(e,t){var n={},r=e.attributes,i=0;for(var o in r){var a=r[o],s={};s.attribute=a,a.data&&(s.data=a.data),n[o]=s,i++}l.attributes=n,l.attributesNum=i,l.index=t}(y,b)}else{var w=!0===u.wireframe;l.geometry===y.id&&l.program===f.id&&l.wireframe===w||(l.geometry=y.id,l.program=f.id,l.wireframe=w,x=!0)}!0===i.isInstancedMesh&&(x=!0),null!==b&&n.update(b,34963),x&&(!function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;d();var u=s.attributes,l=a.getAttributes(),c=o.defaultAttributeValues;for(var f in l){var h=l[f];if(h>=0){var y=u[f];if(void 0!==y){var b=y.normalized,x=y.itemSize,_=n.get(y);if(void 0===_)continue;var w=_.buffer,S=_.type,E=_.bytesPerElement;if(y.isInterleavedBufferAttribute){var k=y.data,O=k.stride,A=y.offset;k&&k.isInstancedInterleavedBuffer?(v(h,k.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=k.meshPerAttribute*k.count)):p(h),e.bindBuffer(34962,w),g(h,x,S,b,O*E,A*E)}else y.isInstancedBufferAttribute?(v(h,y.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=y.meshPerAttribute*y.count)):p(h),e.bindBuffer(34962,w),g(h,x,S,b,0,0)}else if("instanceMatrix"===f){var C=n.get(i.instanceMatrix);if(void 0===C)continue;var M=C.buffer,T=C.type;v(h+0,1),v(h+1,1),v(h+2,1),v(h+3,1),e.bindBuffer(34962,M),e.vertexAttribPointer(h+0,4,T,!1,64,0),e.vertexAttribPointer(h+1,4,T,!1,64,16),e.vertexAttribPointer(h+2,4,T,!1,64,32),e.vertexAttribPointer(h+3,4,T,!1,64,48)}else if("instanceColor"===f){var P=n.get(i.instanceColor);if(void 0===P)continue;var R=P.buffer,I=P.type;v(h,1),e.bindBuffer(34962,R),e.vertexAttribPointer(h,3,I,!1,12,0)}else if(void 0!==c){var L=c[f];if(void 0!==L)switch(L.length){case 2:e.vertexAttrib2fv(h,L);break;case 3:e.vertexAttrib3fv(h,L);break;case 4:e.vertexAttrib4fv(h,L);break;default:e.vertexAttrib1fv(h,L)}}}}m()}(i,u,f,y),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){for(var e in y(),s){var t=s[e];for(var n in t){var r=t[n];for(var i in r)f(r[i].object),delete r[i];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var i in r)f(r[i].object),delete r[i];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)f(r[i].object),delete r[i];delete n[e.id]}}},initAttributes:d,enableAttribute:p,disableUnusedAttributes:m}}function zp(e,t,n,r){var i,o=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,a,s){if(0!==s){var u,l;if(o)u=e,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](i,r,a,s),n.update(a,i,s)}}}function Fp(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=o||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),f=e.getParameter(35660),h=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),v=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),y=f>0,b=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?e.getParameter(36183):0}}function Vp(e){var t=this,n=null,r=0,i=!1,o=!1,a=new Ap,s=new Qf,u={value:null,needsUpdate:!1};function l(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(e,n,r,i){var o=null!==e?e.length:0,l=null;if(0!==o){if(l=u.value,!0!==i||null===l){var c=r+4*o,f=n.matrixWorldInverse;s.getNormalMatrix(f),(null===l||l.length<c)&&(l=new Float32Array(c));for(var h=0,d=r;h!==o;++h,d+=4)a.copy(e[h]).applyMatrix4(f,s),a.normal.toArray(l,d),l[d+3]=a.constant}u.value=l,u.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){var a=0!==e.length||t||0!==r||i;return i=t,n=c(e,o,0),r=e.length,a},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1,l()},this.setState=function(t,a,s){var f=t.clippingPlanes,h=t.clipIntersection,d=t.clipShadows,p=e.get(t);if(!i||null===f||0===f.length||o&&!d)o?c(null):l();else{var v=o?0:r,m=4*v,g=p.clippingState||null;u.value=g,g=c(f,a,m,s);for(var y=0;y!==m;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=v}}}function Up(e){var t=new WeakMap;function n(e,t){return t===Jc?e.mapping=Xc:t===Qc&&(e.mapping=$c),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var o=i.mapping;if(o===Jc||o===Qc){if(t.has(i))return n(t.get(i).texture,i.mapping);var a=i.image;if(a&&a.height>0){var s=e.getRenderTarget(),u=new Sp(a.height/2);return u.fromEquirectangularTexture(e,i),t.set(i,u),e.setRenderTarget(s),i.addEventListener("dispose",r),n(u.texture,i.mapping)}return null}}return i},dispose:function(){t=new WeakMap}}}jp.physical={uniforms:vp([jp.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new $f(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Pd(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new $f},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new Pd(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new Pd(1,1,1)},specularTintMap:{value:null}}]),vertexShader:Lp.meshphysical_vert,fragmentShader:Lp.meshphysical_frag};var Zp=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return(0,Hc.Z)(this,n),(e=t.call(this)).type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=i,e.top=o,e.bottom=a,e.near=s,e.far=u,e.updateProjectionMatrix(),e}return(0,Gc.Z)(n,[{key:"copy",value:function(e,t){return Bc(jc(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o=(i+=u*this.view.offsetX)+u*this.view.width,s=(a-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=Bc(jc(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(yp);Zp.prototype.isOrthographicCamera=!0;var Hp=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this,e)).type="RawShaderMaterial",r}return(0,Gc.Z)(n)}(gp);Hp.prototype.isRawShaderMaterial=!0;var Gp=Math.pow(2,8),Wp=[.125,.215,.35,.446,.526,.582],qp=5+Wp.length,Kp=20,Yp=(Zc={},(0,Rc.Z)(Zc,Mf,0),(0,Rc.Z)(Zc,Tf,1),(0,Rc.Z)(Zc,Rf,2),(0,Rc.Z)(Zc,3004,3),(0,Rc.Z)(Zc,3005,4),(0,Rc.Z)(Zc,3006,5),(0,Rc.Z)(Zc,Pf,6),Zc),Xp=new Rd({side:1,depthWrite:!1,depthTest:!1}),$p=new fp(new dp,Xp),Jp=new Zp,Qp=fv(),ev=Qp._lodPlanes,tv=Qp._sizeLods,nv=Qp._sigmas,rv=new Pd,iv=null,ov=(1+Math.sqrt(5))/2,av=1/ov,sv=[new lh(1,1,1),new lh(-1,1,1),new lh(1,1,-1),new lh(-1,1,-1),new lh(0,ov,av),new lh(0,ov,-av),new lh(av,0,ov),new lh(-av,0,ov),new lh(ov,av,0),new lh(-ov,av,0)];function uv(e){var t=Math.max(e.r,e.g,e.b),n=Math.min(Math.max(Math.ceil(Math.log2(t)),-128),127);return e.multiplyScalar(Math.pow(2,-n)),(n+128)/255}var lv=function(){function e(t){(0,Hc.Z)(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(e){var t=new Float32Array(e),n=new lh(0,1,0);return new Hp({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Yp[3e3]},outputEncoding:{value:Yp[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}(Kp),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return(0,Gc.Z)(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;iv=this._renderer.getRenderTarget();var i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){return this._fromTexture(e)}},{key:"fromCubemap",value:function(e){return this._fromTexture(e)}},{key:"compileCubemapShader",value:function(){null===this._cubemapShader&&(this._cubemapShader=vv(),this._compileMaterial(this._cubemapShader))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectShader&&(this._equirectShader=pv(),this._compileMaterial(this._equirectShader))}},{key:"dispose",value:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var e=0;e<ev.length;e++)ev[e].dispose()}},{key:"_cleanup",value:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(iv),e.scissorTest=!1,dv(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e){iv=this._renderer.getRenderTarget();var t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}},{key:"_allocateTargets",value:function(e){var t={magFilter:af,minFilter:af,generateMipmaps:!1,type:ff,format:1023,encoding:cv(e)?e.encoding:Rf,depthBuffer:!1},n=hv(t);return n.depthBuffer=!e,this._pingPongRenderTarget=hv(t),n}},{key:"_compileMaterial",value:function(e){var t=new fp(ev[0],e);this._renderer.compile(t,Jp)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=new bp(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,u=s.autoClear,l=s.outputEncoding,c=s.toneMapping;s.getClearColor(rv),s.toneMapping=0,s.outputEncoding=Mf,s.autoClear=!1;var f=!1,h=e.background;if(h){if(h.isColor){Xp.color.copy(h).convertSRGBToLinear(),e.background=null;var d=uv(Xp.color);Xp.opacity=d,f=!0}}else{Xp.color.copy(rv).convertSRGBToLinear();var p=uv(Xp.color);Xp.opacity=p,f=!0}for(var v=0;v<6;v++){var m=v%3;0==m?(i.up.set(0,o[v],0),i.lookAt(a[v],0,0)):1==m?(i.up.set(0,0,o[v]),i.lookAt(0,a[v],0)):(i.up.set(0,o[v],0),i.lookAt(0,0,a[v])),dv(r,m*Gp,v>2?Gp:0,Gp,Gp),s.setRenderTarget(r),f&&s.render($p,i),s.render(e,i)}s.toneMapping=c,s.outputEncoding=l,s.autoClear=u}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=vv()):null==this._equirectShader&&(this._equirectShader=pv());var r=e.isCubeTexture?this._cubemapShader:this._equirectShader,i=new fp(ev[0],r),o=r.uniforms;o.envMap.value=e,e.isCubeTexture||o.texelSize.value.set(1/e.image.width,1/e.image.height),o.inputEncoding.value=Yp[e.encoding],o.outputEncoding.value=Yp[t.texture.encoding],dv(t,0,0,3*Gp,2*Gp),n.setRenderTarget(t),n.render(i,Jp)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<qp;r++){var i=Math.sqrt(nv[r]*nv[r]-nv[r-1]*nv[r-1]),o=sv[(r-1)%sv.length];this._blur(e,r-1,r,i,o)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,o,a){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");var l=new fp(ev[r],u),c=u.uniforms,f=tv[n]-1,h=isFinite(i)?Math.PI/(2*f):2*Math.PI/39,d=i/h,p=isFinite(i)?1+Math.floor(3*d):Kp;p>Kp&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(Kp));for(var v=[],m=0,g=0;g<Kp;++g){var y=g/d,b=Math.exp(-y*y/2);v.push(b),0==g?m+=b:g<p&&(m+=2*b)}for(var x=0;x<v.length;x++)v[x]=v[x]/m;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=v,c.latitudinal.value="latitudinal"===o,a&&(c.poleAxis.value=a),c.dTheta.value=h,c.mipInt.value=8-n,c.inputEncoding.value=Yp[e.texture.encoding],c.outputEncoding.value=Yp[e.texture.encoding];var _=tv[r];dv(t,3*Math.max(0,Gp-2*_),(0===r?0:2*Gp)+2*_*(r>4?r-8+4:0),3*_,2*_),s.setRenderTarget(t),s.render(l,Jp)}}]),e}();function cv(e){return void 0!==e&&e.type===ff&&(e.encoding===Mf||e.encoding===Tf||e.encoding===Pf)}function fv(){for(var e=[],t=[],n=[],r=8,i=0;i<qp;i++){var o=Math.pow(2,r);t.push(o);var a=1/o;i>4?a=Wp[i-8+4-1]:0==i&&(a=0),n.push(a);for(var s=1/(o-1),u=-s/2,l=1+s/2,c=[u,u,l,u,l,l,u,u,l,l,u,l],f=new Float32Array(108),h=new Float32Array(72),d=new Float32Array(36),p=0;p<6;p++){var v=p%3*2/3-1,m=p>2?0:-1,g=[v,m,0,v+2/3,m,0,v+2/3,m+1,0,v,m,0,v+2/3,m+1,0,v,m+1,0];f.set(g,18*p),h.set(c,12*p);var y=[p,p,p,p,p,p];d.set(y,6*p)}var b=new qd;b.setAttribute("position",new Nd(f,3)),b.setAttribute("uv",new Nd(h,2)),b.setAttribute("faceIndex",new Nd(d,1)),e.push(b),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function hv(e){var t=new oh(3*Gp,3*Gp,e);return t.texture.mapping=ef,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function dv(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function pv(){var e=new $f(1,1);return new Hp({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:Yp[3e3]},outputEncoding:{value:Yp[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}function vv(){return new Hp({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Yp[3e3]},outputEncoding:{value:Yp[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}function mv(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(i.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var o=i.mapping,a=o===Jc||o===Qc,s=o===Xc||o===$c;if(a||s){if(t.has(i))return t.get(i).texture;var u=i.image;if(a&&u&&u.height>0||s&&u&&function(e){for(var t=0,n=6,r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(u)){var l=e.getRenderTarget();null===n&&(n=new lv(e));var c=a?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,c),e.setRenderTarget(l),i.addEventListener("dispose",r),c.texture}return null}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function gv(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function yv(e,t,n,r){var i={},o=new WeakMap;function a(e){var s=e.target;for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);s.removeEventListener("dispose",a),delete i[s.id];var l=o.get(s);l&&(t.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,i=e.attributes.position,a=0;if(null!==r){var s=r.array;a=r.version;for(var u=0,l=s.length;u<l;u+=3){var c=s[u+0],f=s[u+1],h=s[u+2];n.push(c,f,f,h,h,c)}}else{var d=i.array;a=i.version;for(var p=0,v=d.length/3-1;p<v;p+=3){var m=p+0,g=p+1,y=p+2;n.push(m,g,g,y,y,m)}}var b=new(zd(n)>65535?Dd:jd)(n,1);b.version=a;var x=o.get(e);x&&t.remove(x),o.set(e,b)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var i=e.morphAttributes;for(var o in i)for(var a=i[o],s=0,u=a.length;s<u;s++)t.update(a[s],34962)},getWireframeAttribute:function(e){var t=o.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function bv(e,t,n,r){var i,o,a,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,o,t*a),n.update(r,i,1)},this.renderInstances=function(r,u,l){if(0!==l){var c,f;if(s)c=e,f="drawElementsInstanced";else if(f="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[f](i,u,o,r*a,l),n.update(u,i,l)}}}function xv(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function _v(e,t){return e[0]-t[0]}function wv(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Sv(e){for(var t={},n=new Float32Array(8),r=[],i=0;i<8;i++)r[i]=[i,0];return{update:function(i,o,a,s){var u=i.morphTargetInfluences,l=void 0===u?0:u.length,c=t[o.id];if(void 0===c||c.length!==l){c=[];for(var f=0;f<l;f++)c[f]=[f,0];t[o.id]=c}for(var h=0;h<l;h++){var d=c[h];d[0]=h,d[1]=u[h]}c.sort(wv);for(var p=0;p<8;p++)p<l&&c[p][1]?(r[p][0]=c[p][0],r[p][1]=c[p][1]):(r[p][0]=Number.MAX_SAFE_INTEGER,r[p][1]=0);r.sort(_v);for(var v=o.morphAttributes.position,m=o.morphAttributes.normal,g=0,y=0;y<8;y++){var b=r[y],x=b[0],_=b[1];x!==Number.MAX_SAFE_INTEGER&&_?(v&&o.getAttribute("morphTarget"+y)!==v[x]&&o.setAttribute("morphTarget"+y,v[x]),m&&o.getAttribute("morphNormal"+y)!==m[x]&&o.setAttribute("morphNormal"+y,m[x]),n[y]=_,g+=_):(v&&!0===o.hasAttribute("morphTarget"+y)&&o.deleteAttribute("morphTarget"+y),m&&!0===o.hasAttribute("morphNormal"+y)&&o.deleteAttribute("morphNormal"+y),n[y]=0)}var w=o.morphTargetsRelative?1:1-g;s.getUniforms().setValue(e,"morphTargetBaseInfluence",w),s.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function Ev(e,t,n,r){var i=new WeakMap;function o(e){var t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var a=r.render.frame,s=e.geometry,u=t.get(e,s);return i.get(u)!==a&&(t.update(u),i.set(u,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),u},dispose:function(){i=new WeakMap}}}var kv=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,Hc.Z)(this,n),(e=t.call(this,null)).image={data:r,width:i,height:o,depth:a},e.magFilter=af,e.minFilter=af,e.wrapR=rf,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return(0,Gc.Z)(n)}(nh);kv.prototype.isDataTexture2DArray=!0;var Ov=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,Hc.Z)(this,n),(e=t.call(this,null)).image={data:r,width:i,height:o,depth:a},e.magFilter=af,e.minFilter=af,e.wrapR=rf,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return(0,Gc.Z)(n)}(nh);Ov.prototype.isDataTexture3D=!0;var Av=new nh,Cv=new kv,Mv=new Ov,Tv=new wp,Pv=[],Rv=[],Iv=new Float32Array(16),Lv=new Float32Array(9),Nv=new Float32Array(4);function jv(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=Pv[i];if(void 0===o&&(o=new Float32Array(i),Pv[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function Dv(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Bv(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function zv(e,t){var n=Rv[t];void 0===n&&(n=new Int32Array(t),Rv[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Fv(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Vv(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Dv(n,t))return;e.uniform2fv(this.addr,t),Bv(n,t)}}function Uv(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Dv(n,t))return;e.uniform3fv(this.addr,t),Bv(n,t)}}function Zv(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Dv(n,t))return;e.uniform4fv(this.addr,t),Bv(n,t)}}function Hv(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Dv(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Bv(n,t)}else{if(Dv(n,r))return;Nv.set(r),e.uniformMatrix2fv(this.addr,!1,Nv),Bv(n,r)}}function Gv(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Dv(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Bv(n,t)}else{if(Dv(n,r))return;Lv.set(r),e.uniformMatrix3fv(this.addr,!1,Lv),Bv(n,r)}}function Wv(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Dv(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Bv(n,t)}else{if(Dv(n,r))return;Iv.set(r),e.uniformMatrix4fv(this.addr,!1,Iv),Bv(n,r)}}function qv(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Kv(e,t){var n=this.cache;Dv(n,t)||(e.uniform2iv(this.addr,t),Bv(n,t))}function Yv(e,t){var n=this.cache;Dv(n,t)||(e.uniform3iv(this.addr,t),Bv(n,t))}function Xv(e,t){var n=this.cache;Dv(n,t)||(e.uniform4iv(this.addr,t),Bv(n,t))}function $v(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Jv(e,t){var n=this.cache;Dv(n,t)||(e.uniform2uiv(this.addr,t),Bv(n,t))}function Qv(e,t){var n=this.cache;Dv(n,t)||(e.uniform3uiv(this.addr,t),Bv(n,t))}function em(e,t){var n=this.cache;Dv(n,t)||(e.uniform4uiv(this.addr,t),Bv(n,t))}function tm(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Av,i)}function nm(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Mv,i)}function rm(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Tv,i)}function im(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Cv,i)}function om(e,t){e.uniform1fv(this.addr,t)}function am(e,t){var n=jv(t,this.size,2);e.uniform2fv(this.addr,n)}function sm(e,t){var n=jv(t,this.size,3);e.uniform3fv(this.addr,n)}function um(e,t){var n=jv(t,this.size,4);e.uniform4fv(this.addr,n)}function lm(e,t){var n=jv(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function cm(e,t){var n=jv(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function fm(e,t){var n=jv(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function hm(e,t){e.uniform1iv(this.addr,t)}function dm(e,t){e.uniform2iv(this.addr,t)}function pm(e,t){e.uniform3iv(this.addr,t)}function vm(e,t){e.uniform4iv(this.addr,t)}function mm(e,t){e.uniform1uiv(this.addr,t)}function gm(e,t){e.uniform2uiv(this.addr,t)}function ym(e,t){e.uniform3uiv(this.addr,t)}function bm(e,t){e.uniform4uiv(this.addr,t)}function xm(e,t,n){var r=t.length,i=zv(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTexture2D(t[o]||Av,i[o])}function _m(e,t,n){var r=t.length,i=zv(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTextureCube(t[o]||Tv,i[o])}function wm(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Fv;case 35664:return Vv;case 35665:return Uv;case 35666:return Zv;case 35674:return Hv;case 35675:return Gv;case 35676:return Wv;case 5124:case 35670:return qv;case 35667:case 35671:return Kv;case 35668:case 35672:return Yv;case 35669:case 35673:return Xv;case 5125:return $v;case 36294:return Jv;case 36295:return Qv;case 36296:return em;case 35678:case 36198:case 36298:case 36306:case 35682:return tm;case 35679:case 36299:case 36307:return nm;case 35680:case 36300:case 36308:case 36293:return rm;case 36289:case 36303:case 36311:case 36292:return im}}(t.type)}function Sm(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return om;case 35664:return am;case 35665:return sm;case 35666:return um;case 35674:return lm;case 35675:return cm;case 35676:return fm;case 5124:case 35670:return hm;case 35667:case 35671:return dm;case 35668:case 35672:return pm;case 35669:case 35673:return vm;case 5125:return mm;case 36294:return gm;case 36295:return ym;case 36296:return bm;case 35678:case 36198:case 36298:case 36306:case 35682:return xm;case 35680:case 36300:case 36308:case 36293:return _m}}(t.type)}function Em(e){this.id=e,this.seq=[],this.map={}}Sm.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Bv(t,e)},Em.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(e,t[a.id],n)}};var km=/(\w+)(\])?(\[|\.)?/g;function Om(e,t){e.seq.push(t),e.map[t.id]=t}function Am(e,t,n){var r=e.name,i=r.length;for(km.lastIndex=0;;){var o=km.exec(r),a=km.lastIndex,s=o[1],u="]"===o[2],l=o[3];if(u&&(s|=0),void 0===l||"["===l&&a+2===i){Om(n,void 0===l?new wm(s,e,t):new Sm(s,e,t));break}var c=n.map[s];void 0===c&&Om(n,c=new Em(s)),n=c}}function Cm(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r);Am(i,e.getUniformLocation(t,i.name),this)}}function Mm(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}Cm.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)},Cm.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},Cm.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},Cm.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var Tm=0;function Pm(e){switch(e){case Mf:return["Linear","( value )"];case Tf:return["sRGB","( value )"];case Rf:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case Pf:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Rm(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function Im(e,t){var n=Pm(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Lm(e,t){var n=Pm(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Nm(e,t){var n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function jm(e){return""!==e}function Dm(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Bm(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var zm=/^[ \t]*#include +<([\w\d./]+)>/gm;function Fm(e){return e.replace(zm,Vm)}function Vm(e,t){var n=Lp[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Fm(n)}var Um=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Zm=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Hm(e){return e.replace(Zm,Wm).replace(Um,Gm)}function Gm(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Wm(e,t,n,r)}function Wm(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function qm(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Km(e,t,n,r){var i,o,a=e.getContext(),s=n.defines,u=n.vertexShader,l=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),f=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Xc:case $c:t="ENVMAP_TYPE_CUBE";break;case ef:case tf:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),h=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case $c:case tf:t="ENVMAP_MODE_REFRACTION"}return t}(n),d=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),p=e.gammaFactor>0?e.gammaFactor:1,v=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission>0)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(jm).join("\n")}(n),m=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),g=a.createProgram(),y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=[m].filter(jm).join("\n")).length>0&&(i+="\n"),(o=[v,m].filter(jm).join("\n")).length>0&&(o+="\n")):(i=[qm(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(jm).join("\n"),o=[v,qm(n),"#define SHADER_NAME "+n.shaderName,m,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Lp.tonemapping_pars_fragment:"",0!==n.toneMapping?Nm("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",Lp.encodings_pars_fragment,n.map?Im("mapTexelToLinear",n.mapEncoding):"",n.matcap?Im("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Im("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Im("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularTintMap?Im("specularTintMapTexelToLinear",n.specularTintMapEncoding):"",n.lightMap?Im("lightMapTexelToLinear",n.lightMapEncoding):"",Lm("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(jm).join("\n")),u=Bm(u=Dm(u=Fm(u),n),n),l=Bm(l=Dm(l=Fm(l),n),n),u=Hm(u),l=Hm(l),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",i=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,o=["#define varying in",n.glslVersion===jf?"":"out highp vec4 pc_fragColor;",n.glslVersion===jf?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+o);var b,x,_=y+o+l,w=Mm(a,35633,y+i+u),S=Mm(a,35632,_);if(a.attachShader(g,w),a.attachShader(g,S),void 0!==n.index0AttributeName?a.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&a.bindAttribLocation(g,0,"position"),a.linkProgram(g),e.debug.checkShaderErrors){var E=a.getProgramInfoLog(g).trim(),k=a.getShaderInfoLog(w).trim(),O=a.getShaderInfoLog(S).trim(),A=!0,C=!0;if(!1===a.getProgramParameter(g,35714)){A=!1;var M=Rm(a,w,"vertex"),T=Rm(a,S,"fragment");console.error("THREE.WebGLProgram: shader error: ",a.getError(),"35715",a.getProgramParameter(g,35715),"gl.getProgramInfoLog",E,M,T)}else""!==E?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",E):""!==k&&""!==O||(C=!1);C&&(this.diagnostics={runnable:A,programLog:E,vertexShader:{log:k,prefix:i},fragmentShader:{log:O,prefix:o}})}return a.deleteShader(w),a.deleteShader(S),this.getUniforms=function(){return void 0===b&&(b=new Cm(a,g)),b},this.getAttributes=function(){return void 0===x&&(x=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var o=e.getActiveAttrib(t,i).name;n[o]=e.getAttribLocation(t,o)}return n}(a,g)),x},this.destroy=function(){r.releaseStatesOfProgram(this),a.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=Tm++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=w,this.fragmentShader=S,this}function Ym(e,t,n,r,i,o,a){var s=[],u=i.isWebGL2,l=i.logarithmicDepthBuffer,c=i.floatVertexTextures,f=i.maxVertexUniforms,h=i.vertexTextures,d=i.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},v=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmission","transmissionMap","thicknessMap"];function m(e){var t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=Mf,t}return{getParameters:function(o,s,v,g,y){var b,x,_=g.fog,w=o.isMeshStandardMaterial?g.environment:null,S=(o.isMeshStandardMaterial?n:t).get(o.envMap||w),E=p[o.type],k=y.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(c)return 1024;var n=f,r=Math.floor((n-20)/4),i=Math.min(r,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}(y):0;if(null!==o.precision&&(d=i.getMaxPrecision(o.precision))!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",d,"instead."),E){var O=jp[E];b=O.vertexShader,x=O.fragmentShader}else b=o.vertexShader,x=o.fragmentShader;var A=e.getRenderTarget();return{isWebGL2:u,shaderID:E,shaderName:o.type,vertexShader:b,fragmentShader:x,defines:o.defines,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:d,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:h,outputEncoding:null!==A?m(A.texture):e.outputEncoding,map:!!o.map,mapEncoding:m(o.map),matcap:!!o.matcap,matcapEncoding:m(o.matcap),envMap:!!S,envMapMode:S&&S.mapping,envMapEncoding:m(S),envMapCubeUV:!!S&&(S.mapping===ef||S.mapping===tf),lightMap:!!o.lightMap,lightMapEncoding:m(o.lightMap),aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,emissiveMapEncoding:m(o.emissiveMap),bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:1===o.normalMapType,tangentSpaceNormalMap:0===o.normalMapType,clearcoatMap:!!o.clearcoatMap,clearcoatRoughnessMap:!!o.clearcoatRoughnessMap,clearcoatNormalMap:!!o.clearcoatNormalMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularTintMap:!!o.specularTintMap,specularTintMapEncoding:m(o.specularTintMap),alphaMap:!!o.alphaMap,gradientMap:!!o.gradientMap,sheen:!!o.sheen,transmission:!!o.transmission,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!y.geometry&&!!y.geometry.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!y.geometry&&!!y.geometry.attributes.color&&4===y.geometry.attributes.color.itemSize,vertexUvs:!!o.map||!!o.bumpMap||!!o.normalMap||!!o.specularMap||!!o.alphaMap||!!o.emissiveMap||!!o.roughnessMap||!!o.metalnessMap||!!o.clearcoatMap||!!o.clearcoatRoughnessMap||!!o.clearcoatNormalMap||!!o.displacementMap||!!o.transmissionMap||!!o.thicknessMap||!!o.specularIntensityMap||!!o.specularTintMap,uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.transmission||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularTintMap)&&!!o.displacementMap,fog:!!_,useFog:o.fog,fogExp2:_&&_.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:l,skinning:!0===y.isSkinnedMesh&&k>0,maxBones:k,useVertexTexture:c,morphTargets:!!y.geometry&&!!y.geometry.morphAttributes.position,morphNormals:!!y.geometry&&!!y.geometry.morphAttributes.normal,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&v.length>0,shadowMapType:e.shadowMap.type,toneMapping:o.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,alphaTest:o.alphaTest,doubleSided:2===o.side,flipSided:1===o.side,depthPacking:void 0!==o.depthPacking&&o.depthPacking,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);if(!1===t.isRawShaderMaterial){for(var i=0;i<v.length;i++)n.push(t[v[i]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=p[e.type];if(n){var r=jp[n];t=mp.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,i=0,a=s.length;i<a;i++){var u=s[i];if(u.cacheKey===n){++(r=u).usedTimes;break}}return void 0===r&&(r=new Km(e,n,t,o),s.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){var t=s.indexOf(e);s[t]=s[s.length-1],s.pop(),e.destroy()}},programs:s}}function Xm(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function $m(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Jm(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Qm(e){var t=[],n=0,r=[],i=[],o=[],a={id:-1};function s(r,i,o,s,u,l){var c=t[n],f=e.get(o);return void 0===c?(c={id:r.id,object:r,geometry:i,material:o,program:f.program||a,groupOrder:s,renderOrder:r.renderOrder,z:u,group:l},t[n]=c):(c.id=r.id,c.object=r,c.geometry=i,c.material=o,c.program=f.program||a,c.groupOrder=s,c.renderOrder=r.renderOrder,c.z=u,c.group=l),n++,c}return{opaque:r,transmissive:i,transparent:o,init:function(){n=0,r.length=0,i.length=0,o.length=0},push:function(e,t,n,a,u,l){var c=s(e,t,n,a,u,l);n.transmission>0?i.push(c):!0===n.transparent?o.push(c):r.push(c)},unshift:function(e,t,n,a,u,l){var c=s(e,t,n,a,u,l);n.transmission>0?i.unshift(c):!0===n.transparent?o.unshift(c):r.unshift(c)},finish:function(){for(var e=n,r=t.length;e<r;e++){var i=t[e];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(e,t){r.length>1&&r.sort(e||$m),i.length>1&&i.sort(t||Jm),o.length>1&&o.sort(t||Jm)}}}function eg(e){var t=new WeakMap;return{get:function(n,r){var i;return!1===t.has(n)?(i=new Qm(e),t.set(n,[i])):r>=t.get(n).length?(i=new Qm(e),t.get(n).push(i)):i=t.get(n)[r],i},dispose:function(){t=new WeakMap}}}function tg(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new lh,color:new Pd};break;case"SpotLight":n={position:new lh,direction:new lh,color:new Pd,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new lh,color:new Pd,distance:0,decay:0};break;case"HemisphereLight":n={direction:new lh,skyColor:new Pd,groundColor:new Pd};break;case"RectAreaLight":n={color:new Pd,position:new lh,halfWidth:new lh,halfHeight:new lh}}return e[t.id]=n,n}}}var ng=0;function rg(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function ig(e,t){for(var n=new tg,r=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $f};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $f,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},o=0;o<9;o++)i.probe.push(new lh);var a=new lh,s=new Fh,u=new Fh;return{setup:function(o){for(var a=0,s=0,u=0,l=0;l<9;l++)i.probe[l].set(0,0,0);var c=0,f=0,h=0,d=0,p=0,v=0,m=0,g=0;o.sort(rg);for(var y=0,b=o.length;y<b;y++){var x=o[y],_=x.color,w=x.intensity,S=x.distance,E=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)a+=_.r*w,s+=_.g*w,u+=_.b*w;else if(x.isLightProbe)for(var k=0;k<9;k++)i.probe[k].addScaledVector(x.sh.coefficients[k],w);else if(x.isDirectionalLight){var O=n.get(x);if(O.color.copy(x.color).multiplyScalar(x.intensity),x.castShadow){var A=x.shadow,C=r.get(x);C.shadowBias=A.bias,C.shadowNormalBias=A.normalBias,C.shadowRadius=A.radius,C.shadowMapSize=A.mapSize,i.directionalShadow[c]=C,i.directionalShadowMap[c]=E,i.directionalShadowMatrix[c]=x.shadow.matrix,v++}i.directional[c]=O,c++}else if(x.isSpotLight){var M=n.get(x);if(M.position.setFromMatrixPosition(x.matrixWorld),M.color.copy(_).multiplyScalar(w),M.distance=S,M.coneCos=Math.cos(x.angle),M.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),M.decay=x.decay,x.castShadow){var T=x.shadow,P=r.get(x);P.shadowBias=T.bias,P.shadowNormalBias=T.normalBias,P.shadowRadius=T.radius,P.shadowMapSize=T.mapSize,i.spotShadow[h]=P,i.spotShadowMap[h]=E,i.spotShadowMatrix[h]=x.shadow.matrix,g++}i.spot[h]=M,h++}else if(x.isRectAreaLight){var R=n.get(x);R.color.copy(_).multiplyScalar(w),R.halfWidth.set(.5*x.width,0,0),R.halfHeight.set(0,.5*x.height,0),i.rectArea[d]=R,d++}else if(x.isPointLight){var I=n.get(x);if(I.color.copy(x.color).multiplyScalar(x.intensity),I.distance=x.distance,I.decay=x.decay,x.castShadow){var L=x.shadow,N=r.get(x);N.shadowBias=L.bias,N.shadowNormalBias=L.normalBias,N.shadowRadius=L.radius,N.shadowMapSize=L.mapSize,N.shadowCameraNear=L.camera.near,N.shadowCameraFar=L.camera.far,i.pointShadow[f]=N,i.pointShadowMap[f]=E,i.pointShadowMatrix[f]=x.shadow.matrix,m++}i.point[f]=I,f++}else if(x.isHemisphereLight){var j=n.get(x);j.skyColor.copy(x.color).multiplyScalar(w),j.groundColor.copy(x.groundColor).multiplyScalar(w),i.hemi[p]=j,p++}}d>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Np.LTC_FLOAT_1,i.rectAreaLTC2=Np.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Np.LTC_HALF_1,i.rectAreaLTC2=Np.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=s,i.ambient[2]=u;var D=i.hash;D.directionalLength===c&&D.pointLength===f&&D.spotLength===h&&D.rectAreaLength===d&&D.hemiLength===p&&D.numDirectionalShadows===v&&D.numPointShadows===m&&D.numSpotShadows===g||(i.directional.length=c,i.spot.length=h,i.rectArea.length=d,i.point.length=f,i.hemi.length=p,i.directionalShadow.length=v,i.directionalShadowMap.length=v,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=v,i.pointShadowMatrix.length=m,i.spotShadowMatrix.length=g,D.directionalLength=c,D.pointLength=f,D.spotLength=h,D.rectAreaLength=d,D.hemiLength=p,D.numDirectionalShadows=v,D.numPointShadows=m,D.numSpotShadows=g,i.version=ng++)},setupView:function(e,t){for(var n=0,r=0,o=0,l=0,c=0,f=t.matrixWorldInverse,h=0,d=e.length;h<d;h++){var p=e[h];if(p.isDirectionalLight){var v=i.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),a.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(a),v.direction.transformDirection(f),n++}else if(p.isSpotLight){var m=i.spot[o];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(f),m.direction.setFromMatrixPosition(p.matrixWorld),a.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(a),m.direction.transformDirection(f),o++}else if(p.isRectAreaLight){var g=i.rectArea[l];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(f),u.identity(),s.copy(p.matrixWorld),s.premultiply(f),u.extractRotation(s),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(u),g.halfHeight.applyMatrix4(u),l++}else if(p.isPointLight){var y=i.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(f),r++}else if(p.isHemisphereLight){var b=i.hemi[c];b.direction.setFromMatrixPosition(p.matrixWorld),b.direction.transformDirection(f),b.direction.normalize(),c++}}},state:i}}function og(e,t){var n=new ig(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(){n.setup(r)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function ag(e,t){var n=new WeakMap;return{get:function(r){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(i=new og(e,t),n.set(r,[i])):o>=n.get(r).length?(i=new og(e,t),n.get(r).push(i)):i=n.get(r)[o],i},dispose:function(){n=new WeakMap}}}var sg=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).type="MeshDepthMaterial",r.depthPacking=3200,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.setValues(e),r}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(Ed);sg.prototype.isMeshDepthMaterial=!0;var ug=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).type="MeshDistanceMaterial",r.referencePosition=new lh,r.nearDistance=1,r.farDistance=1e3,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.fog=!1,r.setValues(e),r}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(Ed);ug.prototype.isMeshDistanceMaterial=!0;function lg(e,t,n){var r=new Tp,i=new $f,o=new $f,a=new ih,s=new sg({depthPacking:3201}),u=new ug,l={},c=n.maxTextureSize,f={0:1,1:0,2:2},h=new gp({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new $f},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=h.clone();d.defines.HORIZONTAL_PASS=1;var p=new qd;p.setAttribute("position",new Nd(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var v=new fp(p,h),m=this;function g(n,r){var i=t.update(v);h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,h,v,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,d,v,null)}function y(t,n,r,i,o,a,c){var h=null,d=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(h=void 0!==d?d:!0===i.isPointLight?u:s,e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var p=h.uuid,v=r.uuid,m=l[p];void 0===m&&(m={},l[p]=m);var g=m[v];void 0===g&&(g=h.clone(),m[v]=g),h=g}return h.visible=r.visible,h.wireframe=r.wireframe,h.side=3===c?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:f[r.side],h.clipShadows=r.clipShadows,h.clippingPlanes=r.clippingPlanes,h.clipIntersection=r.clipIntersection,h.wireframeLinewidth=r.wireframeLinewidth,h.linewidth=r.linewidth,!0===i.isPointLight&&!0===h.isMeshDistanceMaterial&&(h.referencePosition.setFromMatrixPosition(i.matrixWorld),h.nearDistance=o,h.farDistance=a),h}function b(n,i,o,a,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var u=t.update(n),l=n.material;if(Array.isArray(l))for(var c=u.groups,f=0,h=c.length;f<h;f++){var d=c[f],p=l[d.materialIndex];if(p&&p.visible){var v=y(n,0,p,a,o.near,o.far,s);e.renderBufferDirect(o,null,u,v,n,d)}}else if(l.visible){var m=y(n,0,l,a,o.near,o.far,s);e.renderBufferDirect(o,null,u,m,n,null)}}for(var g=n.children,x=0,_=g.length;x<_;x++)b(g[x],i,o,a,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,s){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),l=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),h=e.state;h.setBlending(0),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var d=0,p=t.length;d<p;d++){var v=t[d],y=v.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){i.copy(y.mapSize);var x=y.getFrameExtents();if(i.multiply(x),o.copy(y.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(o.x=Math.floor(c/x.x),i.x=o.x*x.x,y.mapSize.x=o.x),i.y>c&&(o.y=Math.floor(c/x.y),i.y=o.y*x.y,y.mapSize.y=o.y)),null===y.map&&!y.isPointLightShadow&&3===this.type){var _={minFilter:lf,magFilter:lf,format:yf};y.map=new oh(i.x,i.y,_),y.map.texture.name=v.name+".shadowMap",y.mapPass=new oh(i.x,i.y,_),y.camera.updateProjectionMatrix()}if(null===y.map){var w={minFilter:af,magFilter:af,format:yf};y.map=new oh(i.x,i.y,w),y.map.texture.name=v.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var S=y.getViewportCount(),E=0;E<S;E++){var k=y.getViewport(E);a.set(o.x*k.x,o.y*k.y,o.x*k.z,o.y*k.w),h.viewport(a),y.updateMatrices(v,E),r=y.getFrustum(),b(n,s,y.camera,v,this.type)}y.isPointLightShadow||3!==this.type||g(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(u,l,f)}}}function cg(e,t,n){var r,i,o=n.isWebGL2;var a=new function(){var t=!1,n=new ih,r=null,i=new ih(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?z(2929):F(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:default:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},u=new function(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null;return{setTest:function(e){t||(e?z(2960):F(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&u===r||(e.stencilOp(t,n,r),a=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null}}},l={},c=null,f={},h=null,d=!1,p=null,v=null,m=null,g=null,y=null,b=null,x=null,_=!1,w=null,S=null,E=null,k=null,O=null,A=e.getParameter(35661),C=!1,M=0,T=e.getParameter(7938);-1!==T.indexOf("WebGL")?(M=parseFloat(/^WebGL (\d)/.exec(T)[1]),C=M>=1):-1!==T.indexOf("OpenGL ES")&&(M=parseFloat(/^OpenGL ES (\d)/.exec(T)[1]),C=M>=2);var P=null,R={},I=e.getParameter(3088),L=e.getParameter(2978),N=(new ih).fromArray(I),j=(new ih).fromArray(L);function D(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}var B={};function z(t){!0!==l[t]&&(e.enable(t),l[t]=!0)}function F(t){!1!==l[t]&&(e.disable(t),l[t]=!1)}B[3553]=D(3553,3553,1),B[34067]=D(34067,34069,6),a.setClear(0,0,0,1),s.setClear(1),u.setClear(0),z(2929),s.setFunc(3),G(!1),W(1),z(2884),H(0);var V=(r={},(0,Rc.Z)(r,Kc,32774),(0,Rc.Z)(r,101,32778),(0,Rc.Z)(r,102,32779),r);if(o)V[103]=32775,V[104]=32776;else{var U=t.get("EXT_blend_minmax");null!==U&&(V[103]=U.MIN_EXT,V[104]=U.MAX_EXT)}var Z=(i={},(0,Rc.Z)(i,200,0),(0,Rc.Z)(i,201,1),(0,Rc.Z)(i,202,768),(0,Rc.Z)(i,204,770),(0,Rc.Z)(i,210,776),(0,Rc.Z)(i,208,774),(0,Rc.Z)(i,206,772),(0,Rc.Z)(i,203,769),(0,Rc.Z)(i,205,771),(0,Rc.Z)(i,209,775),(0,Rc.Z)(i,207,773),i);function H(t,n,r,i,o,a,s,u){if(0!==t){if(!1===d&&(z(3042),d=!0),5===t)o=o||n,a=a||r,s=s||i,n===v&&o===y||(e.blendEquationSeparate(V[n],V[o]),v=n,y=o),r===m&&i===g&&a===b&&s===x||(e.blendFuncSeparate(Z[r],Z[i],Z[a],Z[s]),m=r,g=i,b=a,x=s),p=t,_=null;else if(t!==p||u!==_){if(v===Kc&&y===Kc||(e.blendEquation(32774),v=Kc,y=Kc),u)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,b=null,x=null,p=t,_=u}}else!0===d&&(F(3042),d=!1)}function G(t){w!==t&&(t?e.frontFace(2304):e.frontFace(2305),w=t)}function W(t){0!==t?(z(2884),t!==S&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):F(2884),S=t}function q(t,n,r){t?(z(32823),k===n&&O===r||(e.polygonOffset(n,r),k=n,O=r)):F(32823)}function K(t){void 0===t&&(t=33984+A-1),P!==t&&(e.activeTexture(t),P=t)}return{buffers:{color:a,depth:s,stencil:u},enable:z,disable:F,bindFramebuffer:function(t,n){return null===n&&null!==c&&(n=c),f[t]!==n&&(e.bindFramebuffer(t,n),f[t]=n,o&&(36009===t&&(f[36160]=n),36160===t&&(f[36009]=n)),!0)},bindXRFramebuffer:function(t){t!==c&&(e.bindFramebuffer(36160,t),c=t)},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:H,setMaterial:function(e,t){2===e.side?F(2884):z(2884);var n=1===e.side;t&&(n=!n),G(n),1===e.blending&&!1===e.transparent?H(0):H(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),a.setMask(e.colorWrite);var r=e.stencilWrite;u.setTest(r),r&&(u.setMask(e.stencilWriteMask),u.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),u.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),q(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?z(32926):F(32926)},setFlipSided:G,setCullFace:W,setLineWidth:function(t){t!==E&&(C&&e.lineWidth(t),E=t)},setPolygonOffset:q,setScissorTest:function(e){e?z(3089):F(3089)},activeTexture:K,bindTexture:function(t,n){null===P&&K();var r=R[P];void 0===r&&(r={type:void 0,texture:void 0},R[P]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||B[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=R[P];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===N.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),N.copy(t))},viewport:function(t){!1===j.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),j.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===o&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),l={},P=null,R={},c=null,f={},h=null,d=!1,p=null,v=null,m=null,g=null,y=null,b=null,x=null,_=!1,w=null,S=null,E=null,k=null,O=null,N.set(0,0,e.canvas.width,e.canvas.height),j.set(0,0,e.canvas.width,e.canvas.height),a.reset(),s.reset(),u.reset()}}}function fg(e,t,n,r,i,o,a){var s,u,l,c=i.isWebGL2,f=i.maxTextures,h=i.maxCubemapSize,d=i.maxTextureSize,p=i.maxSamples,v=new WeakMap,m=!1;try{m="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(F){}function g(e,t){return m?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function y(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var o=t?Yf:Math.floor,a=o(i*e.width),s=o(i*e.height);void 0===l&&(l=g(a,s));var u=n?g(a,s):l;return u.width=a,u.height=s,u.getContext("2d").drawImage(e,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+s+")."),u}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return qf(e.width)&&qf(e.height)}function x(e,t){return e.generateMipmaps&&t&&e.minFilter!==af&&e.minFilter!==lf}function _(t,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;e.generateMipmap(t);var s=r.get(n);s.__maxMipLevel=Math.log2(Math.max(i,o,a))}function w(n,r,i){if(!1===c)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function S(e){return e===af||e===sf||e===uf?9728:9729}function E(t){var n=t.target;n.removeEventListener("dispose",E),function(t){var n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&v.delete(n),a.memory.textures--}function k(t){var n=t.target;n.removeEventListener("dispose",k),function(t){var n=t.texture,i=r.get(t),o=r.get(n);if(!t)return;void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),a.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(i.__webglFramebuffer[s]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[s]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(var u=0,l=n.length;u<l;u++){var c=r.get(n[u]);c.__webglTexture&&(e.deleteTexture(c.__webglTexture),a.memory.textures--),r.remove(n[u])}r.remove(n),r.remove(t)}(n)}var O=0;function A(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=a.render.frame;v.get(e)!==t&&(v.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void I(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function C(t,i){var a=r.get(t);t.version>0&&a.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;R(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);for(var a=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),s=r.image[0]&&r.image[0].isDataTexture,u=[],l=0;l<6;l++)u[l]=a||s?s?r.image[l].image:r.image[l]:y(r.image[l],!1,!0,h);var f,d=u[0],p=b(d)||c,v=o.convert(r.format),m=o.convert(r.type),g=w(r.internalFormat,v,m);if(P(34067,r,p),a){for(var S=0;S<6;S++){f=u[S].mipmaps;for(var E=0;E<f.length;E++){var k=f[E];r.format!==yf&&r.format!==gf?null!==v?n.compressedTexImage2D(34069+S,E,g,k.width,k.height,0,k.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+S,E,g,k.width,k.height,0,v,m,k.data)}}t.__maxMipLevel=f.length-1}else{f=r.mipmaps;for(var O=0;O<6;O++)if(s){n.texImage2D(34069+O,0,g,u[O].width,u[O].height,0,v,m,u[O].data);for(var A=0;A<f.length;A++){var C=f[A].image[O].image;n.texImage2D(34069+O,A+1,g,C.width,C.height,0,v,m,C.data)}}else{n.texImage2D(34069+O,0,g,v,m,u[O]);for(var M=0;M<f.length;M++){var T=f[M];n.texImage2D(34069+O,M+1,g,v,m,T.image[O])}}t.__maxMipLevel=f.length}x(r,p)&&_(34067,r,d.width,d.height);t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(a,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))}var M=(s={},(0,Rc.Z)(s,nf,10497),(0,Rc.Z)(s,rf,33071),(0,Rc.Z)(s,of,33648),s),T=(u={},(0,Rc.Z)(u,af,9728),(0,Rc.Z)(u,sf,9984),(0,Rc.Z)(u,uf,9986),(0,Rc.Z)(u,lf,9729),(0,Rc.Z)(u,1007,9985),(0,Rc.Z)(u,cf,9987),u);function P(n,o,a){if(a?(e.texParameteri(n,10242,M[o.wrapS]),e.texParameteri(n,10243,M[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,M[o.wrapR]),e.texParameteri(n,10240,T[o.magFilter]),e.texParameteri(n,10241,T[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===rf&&o.wrapT===rf||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,S(o.magFilter)),e.texParameteri(n,10241,S(o.minFilter)),o.minFilter!==af&&o.minFilter!==lf&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(o.type===pf&&!1===t.has("OES_texture_float_linear"))return;if(!1===c&&o.type===vf&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function R(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",E),t.__webglTexture=e.createTexture(),a.memory.textures++)}function I(t,r,i){var a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),R(t,r),n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);var s,u=function(e){return!c&&(e.wrapS!==rf||e.wrapT!==rf||e.minFilter!==af&&e.minFilter!==lf)}(r)&&!1===b(r.image),l=y(r.image,u,!1,d),f=b(l)||c,h=o.convert(r.format),p=o.convert(r.type),v=w(r.internalFormat,h,p);P(a,r,f);var m=r.mipmaps;if(r.isDepthTexture)v=6402,c?v=r.type===pf?36012:r.type===df?33190:r.type===mf?35056:33189:r.type===pf&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===bf&&6402===v&&r.type!==hf&&r.type!==df&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=hf,p=o.convert(r.type)),r.format===xf&&6402===v&&(v=34041,r.type!==mf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=mf,p=o.convert(r.type))),n.texImage2D(3553,0,v,l.width,l.height,0,h,p,null);else if(r.isDataTexture)if(m.length>0&&f){for(var g=0,S=m.length;g<S;g++)s=m[g],n.texImage2D(3553,g,v,s.width,s.height,0,h,p,s.data);r.generateMipmaps=!1,t.__maxMipLevel=m.length-1}else n.texImage2D(3553,0,v,l.width,l.height,0,h,p,l.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(var E=0,k=m.length;E<k;E++)s=m[E],r.format!==yf&&r.format!==gf?null!==h?n.compressedTexImage2D(3553,E,v,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,E,v,s.width,s.height,0,h,p,s.data);t.__maxMipLevel=m.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,v,l.width,l.height,l.depth,0,h,p,l.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,v,l.width,l.height,l.depth,0,h,p,l.data),t.__maxMipLevel=0;else if(m.length>0&&f){for(var O=0,A=m.length;O<A;O++)s=m[O],n.texImage2D(3553,O,v,h,p,s);r.generateMipmaps=!1,t.__maxMipLevel=m.length-1}else n.texImage2D(3553,0,v,h,p,l),t.__maxMipLevel=0;x(r,f)&&_(a,r,l.width,l.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function L(t,i,a,s,u){var l=o.convert(a.format),c=o.convert(a.type),f=w(a.internalFormat,l,c);32879===u||35866===u?n.texImage3D(u,0,f,i.width,i.height,i.depth,0,l,c,null):n.texImage2D(u,0,f,i.width,i.height,0,l,c,null),n.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,u,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function N(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r){var a=n.depthTexture;a&&a.isDepthTexture&&(a.type===pf?i=36012:a.type===df&&(i=33190));var s=D(n);e.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){var u=D(n);e.renderbufferStorageMultisample(36161,u,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var l=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,c=o.convert(l.format),f=o.convert(l.type),h=w(l.internalFormat,c,f);if(r){var d=D(n);e.renderbufferStorageMultisample(36161,d,h,n.width,n.height)}else e.renderbufferStorage(36161,h,n.width,n.height)}e.bindRenderbuffer(36161,null)}function j(t){var i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),A(i.depthTexture,0);var o=r.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===bf)e.framebufferTexture2D(36160,36096,3553,o,0);else{if(i.depthTexture.format!==xf)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(var a=0;a<6;a++)n.bindFramebuffer(36160,i.__webglFramebuffer[a]),i.__webglDepthbuffer[a]=e.createRenderbuffer(),N(i.__webglDepthbuffer[a],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),N(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function D(e){return c&&e.isWebGLMultisampleRenderTarget?Math.min(p,e.samples):0}var B=!1,z=!1;this.allocateTextureUnit=function(){var e=O;return e>=f&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+f),O+=1,e},this.resetTextureUnits=function(){O=0},this.setTexture2D=A,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?I(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?I(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=C,this.setupRenderTarget=function(t){var s=t.texture,u=r.get(t),l=r.get(s);t.addEventListener("dispose",k),!0!==t.isWebGLMultipleRenderTargets&&(l.__webglTexture=e.createTexture(),l.__version=s.version,a.memory.textures++);var f=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,d=!0===t.isWebGLMultisampleRenderTarget,p=s.isDataTexture3D||s.isDataTexture2DArray,v=b(t)||c;if(!c||s.format!==gf||s.type!==pf&&s.type!==vf||(s.format=yf,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),f){u.__webglFramebuffer=[];for(var m=0;m<6;m++)u.__webglFramebuffer[m]=e.createFramebuffer()}else if(u.__webglFramebuffer=e.createFramebuffer(),h)if(i.drawBuffers)for(var g=t.texture,y=0,S=g.length;y<S;y++){var E=r.get(g[y]);void 0===E.__webglTexture&&(E.__webglTexture=e.createTexture(),a.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(d)if(c){u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,u.__webglColorRenderbuffer);var O=o.convert(s.format),A=o.convert(s.type),C=w(s.internalFormat,O,A),M=D(t);e.renderbufferStorageMultisample(36161,M,C,t.width,t.height),n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,u.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),N(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(f){n.bindTexture(34067,l.__webglTexture),P(34067,s,v);for(var T=0;T<6;T++)L(u.__webglFramebuffer[T],t,s,36064,34069+T);x(s,v)&&_(34067,s,t.width,t.height),n.bindTexture(34067,null)}else if(h){for(var R=t.texture,I=0,B=R.length;I<B;I++){var z=R[I],F=r.get(z);n.bindTexture(3553,F.__webglTexture),P(3553,z,v),L(u.__webglFramebuffer,t,z,36064+I,3553),x(z,v)&&_(3553,z,t.width,t.height)}n.bindTexture(3553,null)}else{var V=3553;if(p)if(c)V=s.isDataTexture3D?32879:35866;else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(V,l.__webglTexture),P(V,s,v),L(u.__webglFramebuffer,t,s,36064,V),x(s,v)&&_(V,s,t.width,t.height,t.depth),n.bindTexture(V,null)}t.depthBuffer&&j(t)},this.updateRenderTargetMipmap=function(e){for(var t=b(e)||c,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],o=0,a=i.length;o<a;o++){var s=i[o];if(x(s,t)){var u=e.isWebGLCubeRenderTarget?34067:3553,l=r.get(s).__webglTexture;n.bindTexture(u,l),_(u,s,e.width,e.height),n.bindTexture(u,null)}}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(c){var i=t.width,o=t.height,a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024);var s=r.get(t);n.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,s.__webglFramebuffer),e.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),A(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===z&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),z=!0),e=e.texture),C(e,t)}}function hg(e,t,n){var r=n.isWebGL2;return{convert:function(e){var n;if(e===ff)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(e===hf)return 5123;if(1013===e)return 5124;if(e===df)return 5125;if(e===pf)return 5126;if(e===vf)return r?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(1021===e)return 6406;if(e===gf)return 6407;if(e===yf)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(e===bf)return 6402;if(e===xf)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===e||37496===e)&&null!==(n=t.get("WEBGL_compressed_texture_etc"))){if(37492===e)return n.COMPRESSED_RGB8_ETC2;if(37496===e)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?null!==(n=t.get("WEBGL_compressed_texture_astc"))?e:null:36492===e?null!==(n=t.get("EXT_texture_compression_bptc"))?e:null:e===mf?r?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}var dg=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,Hc.Z)(this,n),(e=t.call(this)).cameras=r,e}return(0,Gc.Z)(n)}(bp);dg.prototype.isArrayCamera=!0;var pg=function(e){Vc(n,e);var t=Uc(n);function n(){var e;return(0,Hc.Z)(this,n),(e=t.call(this)).type="Group",e}return(0,Gc.Z)(n)}(fd);pg.prototype.isGroup=!0;var vg={type:"move"},mg=function(){function e(){(0,Hc.Z)(this,e),this._targetRay=null,this._grip=null,this._hand=null}return(0,Gc.Z)(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new pg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new pg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new lh,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new lh),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new pg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new lh,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new lh),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,i=null,o=null,a=this._targetRay,s=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&null!==(r=t.getPose(e.targetRaySpace,n))&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(vg)),u&&e.hand){o=!0;var l,c=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,Pc.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e.hand.values());try{for(c.s();!(l=c.n()).done;){var f=l.value,h=t.getJointPose(f,n);if(void 0===u.joints[f.jointName]){var d=new pg;d.matrixAutoUpdate=!1,d.visible=!1,u.joints[f.jointName]=d,u.add(d)}var p=u.joints[f.jointName];null!==h&&(p.matrix.fromArray(h.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.jointRadius=h.radius),p.visible=null!==h}}catch(y){c.e(y)}finally{c.f()}var v=u.joints["index-finger-tip"],m=u.joints["thumb-tip"],g=v.position.distanceTo(m.position);u.inputState.pinching&&g>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&g<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1);return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==o),this}}]),e}(),gg=function(e){Vc(n,e);var t=Uc(n);function n(e,r){var i;(0,Hc.Z)(this,n);var o=Lc(i=t.call(this)),a=e.state,s=null,u=1,l=null,c="local-floor",f=null,h=null,d=null,p=null,v=null,m=[],g=new Map,y=new bp;y.layers.enable(1),y.viewport=new ih;var b=new bp;b.layers.enable(2),b.viewport=new ih;var x=[y,b],_=new dg;_.layers.enable(1),_.layers.enable(2);var w=null,S=null;function E(e){var t=g.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function k(){g.forEach((function(e,t){e.disconnect(t)})),g.clear(),w=null,S=null,a.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),P.stop(),o.isPresenting=!1,o.dispatchEvent({type:"sessionend"})}function O(e){for(var t=s.inputSources,n=0;n<m.length;n++)g.set(t[n],m[n]);for(var r=0;r<e.removed.length;r++){var i=e.removed[r],o=g.get(i);o&&(o.dispatchEvent({type:"disconnected",data:i}),g.delete(i))}for(var a=0;a<e.added.length;a++){var u=e.added[a],l=g.get(u);l&&l.dispatchEvent({type:"connected",data:u})}}i.cameraAutoUpdate=!0,i.enabled=!1,i.isPresenting=!1,i.getController=function(e){var t=m[e];return void 0===t&&(t=new mg,m[e]=t),t.getTargetRaySpace()},i.getControllerGrip=function(e){var t=m[e];return void 0===t&&(t=new mg,m[e]=t),t.getGripSpace()},i.getHand=function(e){var t=m[e];return void 0===t&&(t=new mg,m[e]=t),t.getHandSpace()},i.setFramebufferScaleFactor=function(e){u=e,!0===o.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},i.setReferenceSpaceType=function(e){c=e,!0===o.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},i.getReferenceSpace=function(){return l},i.getSession=function(){return s},i.setSession=function(){var e,t=(e=qc().mark((function e(t){var n,i,a,f,m;return qc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(s=t)){e.next=22;break}if(s.addEventListener("select",E),s.addEventListener("selectstart",E),s.addEventListener("selectend",E),s.addEventListener("squeeze",E),s.addEventListener("squeezestart",E),s.addEventListener("squeezeend",E),s.addEventListener("end",k),s.addEventListener("inputsourceschange",O),!0===(n=r.getContextAttributes()).xrCompatible){e.next=14;break}return e.next=14,r.makeXRCompatible();case 14:return void 0===s.renderState.layers?(i={antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:u},v=new XRWebGLLayer(s,r,i),s.updateRenderState({baseLayer:v})):(a=0,n.antialias?(f={antialias:!0,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:u},v=new XRWebGLLayer(s,r,f),s.updateRenderState({layers:[v]})):(n.depth&&(a=n.stencil?34041:6402),m={colorFormat:n.alpha?6408:6407,depthFormat:a,scaleFactor:u},h=new XRWebGLBinding(s,r),p=h.createProjectionLayer(m),d=r.createFramebuffer(),s.updateRenderState({layers:[p]}))),e.next=17,s.requestReferenceSpace(c);case 17:l=e.sent,P.setContext(s),P.start(),o.isPresenting=!0,o.dispatchEvent({type:"sessionstart"});case 22:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Tc(o,r,i,a,s,"next",e)}function s(e){Tc(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();var A=new lh,C=new lh;function M(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}i.updateCamera=function(e){if(null!==s){_.near=b.near=y.near=e.near,_.far=b.far=y.far=e.far,w===_.near&&S===_.far||(s.updateRenderState({depthNear:_.near,depthFar:_.far}),w=_.near,S=_.far);var t=e.parent,n=_.cameras;M(_,t);for(var r=0;r<n.length;r++)M(n[r],t);_.matrixWorld.decompose(_.position,_.quaternion,_.scale),e.position.copy(_.position),e.quaternion.copy(_.quaternion),e.scale.copy(_.scale),e.matrix.copy(_.matrix),e.matrixWorld.copy(_.matrixWorld);for(var i=e.children,o=0,a=i.length;o<a;o++)i[o].updateMatrixWorld(!0);2===n.length?function(e,t,n){A.setFromMatrixPosition(t.matrixWorld),C.setFromMatrixPosition(n.matrixWorld);var r=A.distanceTo(C),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],f=(o[8]+1)/o[0],h=a*c,d=a*f,p=r/(-c+f),v=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var m=a+p,g=s+p,y=h-v,b=d+(r-v),x=u*s/g*m,_=l*s/g*m;e.projectionMatrix.makePerspective(y,b,x,_,m,g)}(_,y,b):_.projectionMatrix.copy(y.projectionMatrix)}},i.getCamera=function(){return _},i.getFoveation=function(){return null!==p?p.fixedFoveation:null!==v?v.fixedFoveation:void 0},i.setFoveation=function(e){null!==p&&(p.fixedFoveation=e),null!==v&&void 0!==v.fixedFoveation&&(v.fixedFoveation=e)};var T=null;var P=new Pp;return P.setAnimationLoop((function(e,t){if(null!==(f=t.getViewerPose(l))){var n=f.views;null!==v&&a.bindXRFramebuffer(v.framebuffer);var i=!1;n.length!==_.cameras.length&&(_.cameras.length=0,i=!0);for(var o=0;o<n.length;o++){var u=n[o],c=null;if(null!==v)c=v.getViewport(u);else{var g=h.getViewSubImage(p,u);a.bindXRFramebuffer(d),void 0!==g.depthStencilTexture&&r.framebufferTexture2D(36160,36096,3553,g.depthStencilTexture,0),r.framebufferTexture2D(36160,36064,3553,g.colorTexture,0),c=g.viewport}var y=x[o];y.matrix.fromArray(u.transform.matrix),y.projectionMatrix.fromArray(u.projectionMatrix),y.viewport.set(c.x,c.y,c.width,c.height),0===o&&_.matrix.copy(y.matrix),!0===i&&_.cameras.push(y)}}for(var b=s.inputSources,w=0;w<m.length;w++){var S=m[w],E=b[w];S.update(E,t,l)}T&&T(e,t)})),i.setAnimationLoop=function(e){T=e},i.dispose=function(){},i}return(0,Gc.Z)(n)}(Df);function yg(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);var r,i,o=e.get(n).envMap;if(o){t.envMap.value=o,t.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;var a=e.get(o).__maxMipLevel;void 0!==a&&(t.maxMipLevel.value=a)}n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularTintMap&&(r=n.specularTintMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?i=n.aoMap:n.lightMap&&(i=n.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uv2Transform.value.copy(i.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,1===n.side&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),1===n.side&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,o,a){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap);t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate());e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap);t.transmission>0&&(e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height));e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap);e.attenuationDistance.value=t.attenuationDistance,e.attenuationTint.value.copy(t.attenuationTint),e.specularIntensity.value=t.specularIntensity,e.specularTint.value.copy(t.specularTint),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularTintMap&&(e.specularTintMap.value=t.specularTintMap)}(e,r,a):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,o):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function bg(){var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}function xg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0!==e.canvas?e.canvas:bg(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,f=null,h=null,d=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Mf,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;var v=this,m=!1,g=0,y=0,b=null,x=-1,_=null,w=new ih,S=new ih,E=null,k=t.width,O=t.height,A=1,C=null,M=null,T=new ih(0,0,k,O),P=new ih(0,0,k,O),R=!1,I=[],L=new Tp,N=!1,j=!1,D=null,B=new Fh,z=new lh,F={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function V(){return null===b?A:1}var U,Z,H,G,W,q,K,Y,X,$,J,Q,ee,te,ne,re,ie,oe,ae,se,ue,le,ce,fe=n;function he(e,n){for(var r=0;r<e.length;r++){var i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{var de={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l,failIfMajorPerformanceCaveat:c};if(t.addEventListener("webglcontextlost",ge,!1),t.addEventListener("webglcontextrestored",ye,!1),null===fe){var pe=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&pe.shift(),null===(fe=he(pe,de)))throw he(pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===fe.getShaderPrecisionFormat&&(fe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(De){throw console.error("THREE.WebGLRenderer: "+De.message),De}function ve(){U=new gv(fe),Z=new Fp(fe,U,e),U.init(Z),le=new hg(fe,U,Z),H=new cg(fe,U,Z),I[0]=1029,G=new xv(fe),W=new Xm,q=new fg(fe,U,H,W,Z,le,G),K=new Up(v),Y=new mv(v),X=new Rp(fe,Z),ce=new Bp(fe,U,X,Z),$=new yv(fe,X,G,ce),J=new Ev(fe,$,X,G),ae=new Sv(fe),re=new Vp(W),Q=new Ym(v,K,Y,U,Z,ce,re),ee=new yg(W),te=new eg(W),ne=new ag(U,Z),oe=new Dp(v,K,H,J,s),ie=new lg(v,J,Z),se=new zp(fe,U,G,Z),ue=new bv(fe,U,G,Z),G.programs=Q.programs,v.capabilities=Z,v.extensions=U,v.properties=W,v.renderLists=te,v.shadowMap=ie,v.state=H,v.info=G}ve();var me=new gg(v,fe);function ge(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function ye(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;var e=G.autoReset,t=ie.enabled,n=ie.autoUpdate,r=ie.needsUpdate,i=ie.type;ve(),G.autoReset=e,ie.enabled=t,ie.autoUpdate=n,ie.needsUpdate=r,ie.type=i}function be(e){var t=e.target;t.removeEventListener("dispose",be),xe(t)}function xe(e){_e(e),W.remove(e)}function _e(e){var t=W.get(e).programs;void 0!==t&&t.forEach((function(e){Q.releaseProgram(e)}))}function we(e,t){e.render((function(e){v.renderBufferImmediate(e,t)}))}this.xr=me,this.getContext=function(){return fe},this.getContextAttributes=function(){return fe.getContextAttributes()},this.forceContextLoss=function(){var e=U.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=U.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return A},this.setPixelRatio=function(e){void 0!==e&&(A=e,this.setSize(k,O,!1))},this.getSize=function(e){return e.set(k,O)},this.setSize=function(e,n,r){me.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(k=e,O=n,t.width=Math.floor(e*A),t.height=Math.floor(n*A),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(k*A,O*A).floor()},this.setDrawingBufferSize=function(e,n,r){k=e,O=n,A=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(w)},this.getViewport=function(e){return e.copy(T)},this.setViewport=function(e,t,n,r){e.isVector4?T.set(e.x,e.y,e.z,e.w):T.set(e,t,n,r),H.viewport(w.copy(T).multiplyScalar(A).floor())},this.getScissor=function(e){return e.copy(P)},this.setScissor=function(e,t,n,r){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,r),H.scissor(S.copy(P).multiplyScalar(A).floor())},this.getScissorTest=function(){return R},this.setScissorTest=function(e){H.setScissorTest(R=e)},this.setOpaqueSort=function(e){C=e},this.setTransparentSort=function(e){M=e},this.getClearColor=function(e){return e.copy(oe.getClearColor())},this.setClearColor=function(){oe.setClearColor.apply(oe,arguments)},this.getClearAlpha=function(){return oe.getClearAlpha()},this.setClearAlpha=function(){oe.setClearAlpha.apply(oe,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),fe.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ge,!1),t.removeEventListener("webglcontextrestored",ye,!1),te.dispose(),ne.dispose(),W.dispose(),K.dispose(),Y.dispose(),J.dispose(),ce.dispose(),me.dispose(),me.removeEventListener("sessionstart",ke),me.removeEventListener("sessionend",Oe),D&&(D.dispose(),D=null),Ae.stop()},this.renderBufferImmediate=function(e,t){ce.initAttributes();var n=W.get(e);e.hasPositions&&!n.position&&(n.position=fe.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=fe.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=fe.createBuffer()),e.hasColors&&!n.color&&(n.color=fe.createBuffer());var r=t.getAttributes();e.hasPositions&&(fe.bindBuffer(34962,n.position),fe.bufferData(34962,e.positionArray,35048),ce.enableAttribute(r.position),fe.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(fe.bindBuffer(34962,n.normal),fe.bufferData(34962,e.normalArray,35048),ce.enableAttribute(r.normal),fe.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(fe.bindBuffer(34962,n.uv),fe.bufferData(34962,e.uvArray,35048),ce.enableAttribute(r.uv),fe.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(fe.bindBuffer(34962,n.color),fe.bufferData(34962,e.colorArray,35048),ce.enableAttribute(r.color),fe.vertexAttribPointer(r.color,3,5126,!1,0,0)),ce.disableUnusedAttributes(),fe.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=F);var a=i.isMesh&&i.matrixWorld.determinant()<0,s=Le(e,t,r,i);H.setMaterial(r,a);var u=n.index,l=n.attributes.position;if(null===u){if(void 0===l||0===l.count)return}else if(0===u.count)return;var c,f=1;!0===r.wireframe&&(u=$.getWireframeAttribute(n),f=2),void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||ae.update(i,n,r,s),ce.setup(i,r,s,n,u);var h=se;null!==u&&(c=X.get(u),(h=ue).setIndex(c));var d=null!==u?u.count:l.count,p=n.drawRange.start*f,v=n.drawRange.count*f,m=null!==o?o.start*f:0,g=null!==o?o.count*f:1/0,y=Math.max(p,m),b=Math.min(d,p+v,m+g)-1,x=Math.max(0,b-y+1);if(0!==x){if(i.isMesh)!0===r.wireframe?(H.setLineWidth(r.wireframeLinewidth*V()),h.setMode(1)):h.setMode(4);else if(i.isLine){var _=r.linewidth;void 0===_&&(_=1),H.setLineWidth(_*V()),i.isLineSegments?h.setMode(1):i.isLineLoop?h.setMode(2):h.setMode(3)}else i.isPoints?h.setMode(0):i.isSprite&&h.setMode(4);if(i.isInstancedMesh)h.renderInstances(y,x,i.count);else if(n.isInstancedBufferGeometry){var w=Math.min(n.instanceCount,n._maxInstanceCount);h.renderInstances(y,x,w)}else h.render(y,x)}},this.compile=function(e,t){(h=ne.get(e)).init(),p.push(h),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(),e.traverse((function(t){var n=t.material;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++){Re(n[r],e,t)}else Re(n,e,t)})),p.pop(),h=null};var Se=null;function Ee(e){Se&&Se(e)}function ke(){Ae.stop()}function Oe(){Ae.start()}var Ae=new Pp;function Ce(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||L.intersectsSprite(e)){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B);var i=J.update(e),o=e.material;o.visible&&f.push(e,i,o,n,z.z,null)}}else if(e.isImmediateRenderObject)r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B),f.push(e,null,e.material,n,z.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==G.render.frame&&(e.skeleton.update(),e.skeleton.frame=G.render.frame),!e.frustumCulled||L.intersectsObject(e))){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B);var a=J.update(e),s=e.material;if(Array.isArray(s))for(var u=a.groups,l=0,c=u.length;l<c;l++){var d=u[l],p=s[d.materialIndex];p&&p.visible&&f.push(e,a,p,n,z.z,d)}else s.visible&&f.push(e,a,s,n,z.z,null)}for(var v=e.children,m=0,g=v.length;m<g;m++)Ce(v[m],t,n,r)}}function Me(e,t,n,r){if(null===D){var i=!0===a&&!0===Z.isWebGL2;D=new(i?sh:oh)(1024,1024,{generateMipmaps:!0,type:null!==le.convert(vf)?vf:ff,minFilter:cf,magFilter:af,wrapS:rf,wrapT:rf})}var o=v.getRenderTarget();v.setRenderTarget(D),v.clear();var s=v.toneMapping;v.toneMapping=0,Te(e,n,r),v.toneMapping=s,q.updateMultisampleRenderTarget(D),q.updateRenderTargetMipmap(D),v.setRenderTarget(o),Te(t,n,r)}function Te(e,t,n){var r=!0===t.isScene?t.overrideMaterial:null;if(n.isArrayCamera)for(var i=n.cameras,o=0,a=i.length;o<a;o++){var s=i[o];H.viewport(w.copy(s.viewport)),h.setupLightsView(s);for(var u=0,l=e.length;u<l;u++){var c=e[u],f=c.object,d=c.geometry,p=null===r?c.material:r,v=c.group;f.layers.test(s.layers)&&Pe(f,t,s,d,p,v)}}else for(var m=0,g=e.length;m<g;m++){var y=e[m];Pe(y.object,t,n,y.geometry,null===r?y.material:r,y.group)}}function Pe(e,t,n,r,i,o){if(e.onBeforeRender(v,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var a=Le(n,t,i,e);H.setMaterial(i),ce.reset(),we(e,a)}else!0===i.transparent&&2===i.side?(i.side=1,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,o),i.side=0,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,o),i.side=2):v.renderBufferDirect(n,t,r,i,e,o);e.onAfterRender(v,t,n,r,i,o)}function Re(e,t,n){!0!==t.isScene&&(t=F);var r=W.get(e),i=h.state.lights,o=h.state.shadowsArray,a=i.state.version,s=Q.getParameters(e,i.state,o,t,n),u=Q.getProgramCacheKey(s),l=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?Y:K).get(e.envMap||r.environment),void 0===l&&(e.addEventListener("dispose",be),l=new Map,r.programs=l);var c=l.get(u);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===a)return Ie(e,s),c}else s.uniforms=Q.getUniforms(e),e.onBuild(s,v),e.onBeforeCompile(s,v),c=Q.acquireProgram(s,u),l.set(u,c),r.uniforms=s.uniforms;var f=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(f.clippingPlanes=re.uniform),Ie(e,s),r.needsLights=je(e),r.lightsStateVersion=a,r.needsLights&&(f.ambientLightColor.value=i.state.ambient,f.lightProbe.value=i.state.probe,f.directionalLights.value=i.state.directional,f.directionalLightShadows.value=i.state.directionalShadow,f.spotLights.value=i.state.spot,f.spotLightShadows.value=i.state.spotShadow,f.rectAreaLights.value=i.state.rectArea,f.ltc_1.value=i.state.rectAreaLTC1,f.ltc_2.value=i.state.rectAreaLTC2,f.pointLights.value=i.state.point,f.pointLightShadows.value=i.state.pointShadow,f.hemisphereLights.value=i.state.hemi,f.directionalShadowMap.value=i.state.directionalShadowMap,f.directionalShadowMatrix.value=i.state.directionalShadowMatrix,f.spotShadowMap.value=i.state.spotShadowMap,f.spotShadowMatrix.value=i.state.spotShadowMatrix,f.pointShadowMap.value=i.state.pointShadowMap,f.pointShadowMatrix.value=i.state.pointShadowMatrix);var d=c.getUniforms(),p=Cm.seqWithValue(d.seq,f);return r.currentProgram=c,r.uniformsList=p,c}function Ie(e,t){var n=W.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents}function Le(e,t,n,r){!0!==t.isScene&&(t=F),q.resetTextureUnits();var i=t.fog,o=n.isMeshStandardMaterial?t.environment:null,a=null===b?v.outputEncoding:b.texture.encoding,s=(n.isMeshStandardMaterial?Y:K).get(n.envMap||o),u=!0===n.vertexColors&&!!r.geometry&&!!r.geometry.attributes.color&&4===r.geometry.attributes.color.itemSize,l=!!r.geometry&&!!r.geometry.attributes.tangent,c=!!r.geometry&&!!r.geometry.morphAttributes.position,f=!!r.geometry&&!!r.geometry.morphAttributes.normal,d=W.get(n),p=h.state.lights;if(!0===N&&(!0===j||e!==_)){var m=e===_&&n.id===x;re.setState(n,e,m)}var g=!1;n.version===d.__version?d.needsLights&&d.lightsStateVersion!==p.state.version||d.outputEncoding!==a||r.isInstancedMesh&&!1===d.instancing?g=!0:r.isInstancedMesh||!0!==d.instancing?r.isSkinnedMesh&&!1===d.skinning?g=!0:r.isSkinnedMesh||!0!==d.skinning?d.envMap!==s||n.fog&&d.fog!==i?g=!0:void 0===d.numClippingPlanes||d.numClippingPlanes===re.numPlanes&&d.numIntersection===re.numIntersection?(d.vertexAlphas!==u||d.vertexTangents!==l||d.morphTargets!==c||d.morphNormals!==f)&&(g=!0):g=!0:g=!0:g=!0:(g=!0,d.__version=n.version);var y=d.currentProgram;!0===g&&(y=Re(n,t,r));var w=!1,S=!1,E=!1,k=y.getUniforms(),C=d.uniforms;if(H.useProgram(y.program)&&(w=!0,S=!0,E=!0),n.id!==x&&(x=n.id,S=!0),w||_!==e){if(k.setValue(fe,"projectionMatrix",e.projectionMatrix),Z.logarithmicDepthBuffer&&k.setValue(fe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),_!==e&&(_=e,S=!0,E=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var M=k.map.cameraPosition;void 0!==M&&M.setValue(fe,z.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&k.setValue(fe,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||r.isSkinnedMesh)&&k.setValue(fe,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){k.setOptional(fe,r,"bindMatrix"),k.setOptional(fe,r,"bindMatrixInverse");var T=r.skeleton;T&&(Z.floatVertexTextures?(null===T.boneTexture&&T.computeBoneTexture(),k.setValue(fe,"boneTexture",T.boneTexture,q),k.setValue(fe,"boneTextureSize",T.boneTextureSize)):k.setOptional(fe,T,"boneMatrices"))}return(S||d.receiveShadow!==r.receiveShadow)&&(d.receiveShadow=r.receiveShadow,k.setValue(fe,"receiveShadow",r.receiveShadow)),S&&(k.setValue(fe,"toneMappingExposure",v.toneMappingExposure),d.needsLights&&Ne(C,E),i&&n.fog&&ee.refreshFogUniforms(C,i),ee.refreshMaterialUniforms(C,n,A,O,D),Cm.upload(fe,d.uniformsList,C,q)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Cm.upload(fe,d.uniformsList,C,q),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&k.setValue(fe,"center",r.center),k.setValue(fe,"modelViewMatrix",r.modelViewMatrix),k.setValue(fe,"normalMatrix",r.normalMatrix),k.setValue(fe,"modelMatrix",r.matrixWorld),y}function Ne(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function je(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Ae.setAnimationLoop(Ee),"undefined"!==typeof window&&Ae.setContext(window),this.setAnimationLoop=function(e){Se=e,me.setAnimationLoop(e),null===e?Ae.stop():Ae.start()},me.addEventListener("sessionstart",ke),me.addEventListener("sessionend",Oe),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==m){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===me.enabled&&!0===me.isPresenting&&(!0===me.cameraAutoUpdate&&me.updateCamera(t),t=me.getCamera()),!0===e.isScene&&e.onBeforeRender(v,e,t,b),(h=ne.get(e,p.length)).init(),p.push(h),B.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),L.setFromProjectionMatrix(B),j=this.localClippingEnabled,N=re.init(this.clippingPlanes,j,t),(f=te.get(e,d.length)).init(),d.push(f),Ce(e,t,0,v.sortObjects),f.finish(),!0===v.sortObjects&&f.sort(C,M),!0===N&&re.beginShadows();var n=h.state.shadowsArray;ie.render(n,e,t),h.setupLights(),h.setupLightsView(t),!0===N&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),oe.render(f,e);var r=f.opaque,i=f.transmissive,o=f.transparent;r.length>0&&Te(r,e,t),i.length>0&&Me(r,i,e,t),o.length>0&&Te(o,e,t),null!==b&&(q.updateMultisampleRenderTarget(b),q.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(v,e,t),H.buffers.depth.setTest(!0),H.buffers.depth.setMask(!0),H.buffers.color.setMask(!0),H.setPolygonOffset(!1),ce.resetDefaultState(),x=-1,_=null,p.pop(),h=p.length>0?p[p.length-1]:null,d.pop(),f=d.length>0?d[d.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;b=e,g=t,y=n,e&&void 0===W.get(e).__webglFramebuffer&&q.setupRenderTarget(e);var r=null,i=!1,o=!1;if(e){var a=e.texture;(a.isDataTexture3D||a.isDataTexture2DArray)&&(o=!0);var s=W.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=s[t],i=!0):r=e.isWebGLMultisampleRenderTarget?W.get(e).__webglMultisampledFramebuffer:s,w.copy(e.viewport),S.copy(e.scissor),E=e.scissorTest}else w.copy(T).multiplyScalar(A).floor(),S.copy(P).multiplyScalar(A).floor(),E=R;var u=H.bindFramebuffer(36160,r);if(u&&Z.drawBuffers){var l=!1;if(e)if(e.isWebGLMultipleRenderTargets){var c=e.texture;if(I.length!==c.length||36064!==I[0]){for(var f=0,h=c.length;f<h;f++)I[f]=36064+f;I.length=c.length,l=!0}}else 1===I.length&&36064===I[0]||(I[0]=36064,I.length=1,l=!0);else 1===I.length&&1029===I[0]||(I[0]=1029,I.length=1,l=!0);l&&(Z.isWebGL2?fe.drawBuffers(I):U.get("WEBGL_draw_buffers").drawBuffersWEBGL(I))}if(H.viewport(w),H.scissor(S),H.setScissorTest(E),i){var d=W.get(e.texture);fe.framebufferTexture2D(36160,36064,34069+t,d.__webglTexture,n)}else if(o){var p=W.get(e.texture),v=t||0;fe.framebufferTextureLayer(36160,36064,p.__webglTexture,n||0,v)}},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(e&&e.isWebGLRenderTarget){var s=W.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){H.bindFramebuffer(36160,s);try{var u=e.texture,l=u.format,c=u.type;if(l!==yf&&le.convert(l)!==fe.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var f=c===vf&&(U.has("EXT_color_buffer_half_float")||Z.isWebGL2&&U.has("EXT_color_buffer_float"));if(c!==ff&&le.convert(c)!==fe.getParameter(35738)&&(c!==pf||!(Z.isWebGL2||U.has("OES_texture_float")||U.has("WEBGL_color_buffer_float")))&&!f)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===fe.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&fe.readPixels(t,n,r,i,le.convert(l),le.convert(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var h=null!==b?W.get(b).__webglFramebuffer:null;H.bindFramebuffer(36160,h)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r),a=le.convert(t.format);Z.isWebGL2&&(6407===a&&(a=32849),6408===a&&(a=32856)),q.setTexture2D(t,0),fe.copyTexImage2D(3553,n,a,e.x,e.y,i,o,0),H.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,o=t.image.height,a=le.convert(n.format),s=le.convert(n.type);q.setTexture2D(n,0),fe.pixelStorei(37440,n.flipY),fe.pixelStorei(37441,n.premultiplyAlpha),fe.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?fe.texSubImage2D(3553,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?fe.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):fe.texSubImage2D(3553,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&fe.generateMipmap(3553),H.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(v.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var o,a=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,u=e.max.z-e.min.z+1,l=le.convert(r.format),c=le.convert(r.type);if(r.isDataTexture3D)q.setTexture3D(r,0),o=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(r,0),o=35866}fe.pixelStorei(37440,r.flipY),fe.pixelStorei(37441,r.premultiplyAlpha),fe.pixelStorei(3317,r.unpackAlignment);var f=fe.getParameter(3314),h=fe.getParameter(32878),d=fe.getParameter(3316),p=fe.getParameter(3315),m=fe.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;fe.pixelStorei(3314,g.width),fe.pixelStorei(32878,g.height),fe.pixelStorei(3316,e.min.x),fe.pixelStorei(3315,e.min.y),fe.pixelStorei(32877,e.min.z),n.isDataTexture||n.isDataTexture3D?fe.texSubImage3D(o,i,t.x,t.y,t.z,a,s,u,l,c,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),fe.compressedTexSubImage3D(o,i,t.x,t.y,t.z,a,s,u,l,g.data)):fe.texSubImage3D(o,i,t.x,t.y,t.z,a,s,u,l,c,g),fe.pixelStorei(3314,f),fe.pixelStorei(32878,h),fe.pixelStorei(3316,d),fe.pixelStorei(3315,p),fe.pixelStorei(32877,m),0===i&&r.generateMipmaps&&fe.generateMipmap(o),H.unbindTexture()}},this.initTexture=function(e){q.setTexture2D(e,0),H.unbindTexture()},this.resetState=function(){g=0,y=0,b=null,H.reset(),ce.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var _g=function(e){Vc(n,e);var t=Uc(n);function n(){return(0,Hc.Z)(this,n),t.apply(this,arguments)}return(0,Gc.Z)(n)}(xg);_g.prototype.isWebGL1Renderer=!0;var wg=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;(0,Hc.Z)(this,e),this.name="",this.color=new Pd(t),this.density=n}return(0,Gc.Z)(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}();wg.prototype.isFogExp2=!0;var Sg=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;(0,Hc.Z)(this,e),this.name="",this.color=new Pd(t),this.near=n,this.far=r}return(0,Gc.Z)(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}();Sg.prototype.isFog=!0;var Eg=function(e){Vc(n,e);var t=Uc(n);function n(){var e;return(0,Hc.Z)(this,n),(e=t.call(this)).type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:Lc(e)})),e}return(0,Gc.Z)(n,[{key:"copy",value:function(e,t){return Bc(jc(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=Bc(jc(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}]),n}(fd);Eg.prototype.isScene=!0;var kg=function(){function e(t,n){(0,Hc.Z)(this,e),this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=Lf,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Zf()}return(0,Gc.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Zf()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Zf()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}();kg.prototype.isInterleavedBuffer=!0;var Og=new lh,Ag=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,Hc.Z)(this,e),this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=!0===i}return(0,Gc.Z)(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)Og.x=this.getX(t),Og.y=this.getY(t),Og.z=this.getZ(t),Og.applyMatrix4(e),this.setXYZ(t,Og.x,Og.y,Og.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Og.x=this.getX(t),Og.y=this.getY(t),Og.z=this.getZ(t),Og.applyNormalMatrix(e),this.setXYZ(t,Og.x,Og.y,Og.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Og.x=this.getX(t),Og.y=this.getY(t),Og.z=this.getZ(t),Og.transformDirection(e),this.setXYZ(t,Og.x,Og.y,Og.z);return this}},{key:"setX",value:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){return this.data.array[e*this.data.stride+this.offset]}},{key:"getY",value:function(e){return this.data.array[e*this.data.stride+this.offset+1]}},{key:"getZ",value:function(e){return this.data.array[e*this.data.stride+this.offset+2]}},{key:"getW",value:function(e){return this.data.array[e*this.data.stride+this.offset+3]}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,o=0;o<this.itemSize;o++)n.push(this.data.array[i+o]);return new Nd(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}();Ag.prototype.isInterleavedBufferAttribute=!0;var Cg,Mg=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).type="SpriteMaterial",r.color=new Pd(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.setValues(e),r}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(Ed);Mg.prototype.isSpriteMaterial=!0;var Tg=new lh,Pg=new lh,Rg=new lh,Ig=new $f,Lg=new $f,Ng=new Fh,jg=new lh,Dg=new lh,Bg=new lh,zg=new $f,Fg=new $f,Vg=new $f,Ug=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;if((0,Hc.Z)(this,n),(r=t.call(this)).type="Sprite",void 0===Cg){Cg=new qd;var i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),o=new kg(i,5);Cg.setIndex([0,1,2,0,2,3]),Cg.setAttribute("position",new Ag(o,3,0,!1)),Cg.setAttribute("uv",new Ag(o,2,3,!1))}return r.geometry=Cg,r.material=void 0!==e?e:new Mg,r.center=new $f(.5,.5),r}return(0,Gc.Z)(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Pg.setFromMatrixScale(this.matrixWorld),Ng.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Rg.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Pg.multiplyScalar(-Rg.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var o=this.center;Zg(jg.set(-.5,-.5,0),Rg,o,Pg,n,r),Zg(Dg.set(.5,-.5,0),Rg,o,Pg,n,r),Zg(Bg.set(.5,.5,0),Rg,o,Pg,n,r),zg.set(0,0),Fg.set(1,0),Vg.set(1,1);var a=e.ray.intersectTriangle(jg,Dg,Bg,!1,Tg);if(null!==a||(Zg(Dg.set(-.5,.5,0),Rg,o,Pg,n,r),Fg.set(0,1),null!==(a=e.ray.intersectTriangle(jg,Bg,Dg,!1,Tg)))){var s=e.ray.origin.distanceTo(Tg);s<e.near||s>e.far||t.push({distance:s,point:Tg.clone(),uv:wd.getUV(Tg,jg,Dg,Bg,zg,Fg,Vg,new $f),face:null,object:this})}}},{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(fd);function Zg(e,t,n,r,i,o){Ig.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Lg.x=o*Ig.x-i*Ig.y,Lg.y=i*Ig.x+o*Ig.y):Lg.copy(Ig),e.copy(t),e.x+=Lg.x,e.y+=Lg.y,e.applyMatrix4(Ng)}Ug.prototype.isSprite=!0;var Hg=new lh,Gg=new ih,Wg=new ih,qg=new lh,Kg=new Fh,Yg=function(e){Vc(n,e);var t=Uc(n);function n(e,r){var i;return(0,Hc.Z)(this,n),(i=t.call(this,e,r)).type="SkinnedMesh",i.bindMode="attached",i.bindMatrix=new Fh,i.bindMatrixInverse=new Fh,i}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new ih,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){Bc(jc(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;Gg.fromBufferAttribute(r.attributes.skinIndex,e),Wg.fromBufferAttribute(r.attributes.skinWeight,e),Hg.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var i=0;i<4;i++){var o=Wg.getComponent(i);if(0!==o){var a=Gg.getComponent(i);Kg.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(qg.copy(Hg).applyMatrix4(Kg),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(fp);Yg.prototype.isSkinnedMesh=!0;var Xg=function(e){Vc(n,e);var t=Uc(n);function n(){var e;return(0,Hc.Z)(this,n),(e=t.call(this)).type="Bone",e}return(0,Gc.Z)(n)}(fd);Xg.prototype.isBone=!0;var $g=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:af,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:af,d=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0;return(0,Hc.Z)(this,n),(e=t.call(this,null,u,l,c,f,h,a,s,d,p)).image={data:r,width:i,height:o},e.magFilter=f,e.minFilter=h,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return(0,Gc.Z)(n)}(nh);$g.prototype.isDataTexture=!0;var Jg=new Fh,Qg=new Fh,ey=[],ty=new fp,ny=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i){var o;return(0,Hc.Z)(this,n),(o=t.call(this,e,r)).instanceMatrix=new Nd(new Float32Array(16*i),16),o.instanceColor=null,o.count=i,o.frustumCulled=!1,o}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(ty.geometry=this.geometry,ty.material=this.material,void 0!==ty.material)for(var i=0;i<r;i++){this.getMatrixAt(i,Jg),Qg.multiplyMatrices(n,Jg),ty.matrixWorld=Qg,ty.raycast(e,ey);for(var o=0,a=ey.length;o<a;o++){var s=ey[o];s.instanceId=i,s.object=this,t.push(s)}ey.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new Nd(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(fp);ny.prototype.isInstancedMesh=!0;var ry=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).type="LineBasicMaterial",r.color=new Pd(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.setValues(e),r}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}]),n}(Ed);ry.prototype.isLineBasicMaterial=!0;var iy=new lh,oy=new lh,ay=new Fh,sy=new zh,uy=new Ph,ly=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new qd,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ry;return(0,Hc.Z)(this,n),(e=t.call(this)).type="Line",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)iy.fromBufferAttribute(t,r-1),oy.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=iy.distanceTo(oy);e.setAttribute("lineDistance",new Bd(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),uy.copy(n.boundingSphere),uy.applyMatrix4(r),uy.radius+=i,!1!==e.ray.intersectsSphere(uy)){ay.copy(r).invert(),sy.copy(e.ray).applyMatrix4(ay);var a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,u=new lh,l=new lh,c=new lh,f=new lh,h=this.isLineSegments?2:1;if(n.isBufferGeometry){var d=n.index,p=n.attributes.position;if(null!==d)for(var v=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count)-1;v<m;v+=h){var g=d.getX(v),y=d.getX(v+1);if(u.fromBufferAttribute(p,g),l.fromBufferAttribute(p,y),!(sy.distanceSqToSegment(u,l,f,c)>s)){f.applyMatrix4(this.matrixWorld);var b=e.ray.origin.distanceTo(f);b<e.near||b>e.far||t.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(var x=Math.max(0,o.start),_=Math.min(p.count,o.start+o.count)-1;x<_;x+=h){if(u.fromBufferAttribute(p,x),l.fromBufferAttribute(p,x+1),!(sy.distanceSqToSegment(u,l,f,c)>s)){f.applyMatrix4(this.matrixWorld);var w=e.ray.origin.distanceTo(f);w<e.near||w>e.far||t.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(fd);ly.prototype.isLine=!0;var cy=new lh,fy=new lh,hy=function(e){Vc(n,e);var t=Uc(n);function n(e,r){var i;return(0,Hc.Z)(this,n),(i=t.call(this,e,r)).type="LineSegments",i}return(0,Gc.Z)(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)cy.fromBufferAttribute(t,r),fy.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+cy.distanceTo(fy);e.setAttribute("lineDistance",new Bd(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(ly);hy.prototype.isLineSegments=!0;var dy=function(e){Vc(n,e);var t=Uc(n);function n(e,r){var i;return(0,Hc.Z)(this,n),(i=t.call(this,e,r)).type="LineLoop",i}return(0,Gc.Z)(n)}(ly);dy.prototype.isLineLoop=!0;var py=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).type="PointsMaterial",r.color=new Pd(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.setValues(e),r}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(Ed);py.prototype.isPointsMaterial=!0;var vy=new Fh,my=new zh,gy=new Ph,yy=new lh,by=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new qd,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new py;return(0,Hc.Z)(this,n),(e=t.call(this)).type="Points",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),gy.copy(n.boundingSphere),gy.applyMatrix4(r),gy.radius+=i,!1!==e.ray.intersectsSphere(gy)){vy.copy(r).invert(),my.copy(e.ray).applyMatrix4(vy);var a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(n.isBufferGeometry){var u=n.index,l=n.attributes.position;if(null!==u)for(var c=Math.max(0,o.start),f=Math.min(u.count,o.start+o.count);c<f;c++){var h=u.getX(c);yy.fromBufferAttribute(l,h),xy(yy,h,s,r,e,t,this)}else for(var d=Math.max(0,o.start),p=Math.min(l.count,o.start+o.count);d<p;d++)yy.fromBufferAttribute(l,d),xy(yy,d,s,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(fd);function xy(e,t,n,r,i,o,a){var s=my.distanceSqToPoint(e);if(s<n){var u=new lh;my.closestPointToPoint(e,u),u.applyMatrix4(r);var l=i.ray.origin.distanceTo(u);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:u,index:t,face:null,object:a})}}by.prototype.isPoints=!0;var _y=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i,o,a,s,u,l,c){var f;(0,Hc.Z)(this,n),(f=t.call(this,e,r,i,o,a,s,u,l,c)).format=void 0!==u?u:gf,f.minFilter=void 0!==s?s:lf,f.magFilter=void 0!==a?a:lf,f.generateMipmaps=!1;var h=Lc(f);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){h.needsUpdate=!0,e.requestVideoFrameCallback(t)})),f}return(0,Gc.Z)(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(nh);_y.prototype.isVideoTexture=!0;var wy=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i,o,a,s,u,l,c,f,h,d){var p;return(0,Hc.Z)(this,n),(p=t.call(this,null,s,u,l,c,f,o,a,h,d)).image={width:r,height:i},p.mipmaps=e,p.flipY=!1,p.generateMipmaps=!1,p}return(0,Gc.Z)(n)}(nh);wy.prototype.isCompressedTexture=!0;var Sy=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i,o,a,s,u,l,c){var f;return(0,Hc.Z)(this,n),(f=t.call(this,e,r,i,o,a,s,u,l,c)).needsUpdate=!0,f}return(0,Gc.Z)(n)}(nh);Sy.prototype.isCanvasTexture=!0;var Ey=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i,o,a,s,u,l,c,f){var h;if((0,Hc.Z)(this,n),(f=void 0!==f?f:bf)!==bf&&f!==xf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&f===bf&&(i=hf),void 0===i&&f===xf&&(i=mf),(h=t.call(this,null,o,a,s,u,l,f,i,c)).image={width:e,height:r},h.magFilter=void 0!==u?u:af,h.minFilter=void 0!==l?l:af,h.flipY=!1,h.generateMipmaps=!1,h}return(0,Gc.Z)(n)}(nh);Ey.prototype.isDepthTexture=!0;var ky=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;(0,Hc.Z)(this,n),(e=t.call(this)).type="CylinderGeometry",e.parameters={radiusTop:r,radiusBottom:i,height:o,radialSegments:a,heightSegments:s,openEnded:u,thetaStart:l,thetaLength:c};var f=Lc(e);a=Math.floor(a),s=Math.floor(s);var h=[],d=[],p=[],v=[],m=0,g=[],y=o/2,b=0;function x(){for(var e=new lh,t=new lh,n=0,u=(i-r)/o,x=0;x<=s;x++){for(var _=[],w=x/s,S=w*(i-r)+r,E=0;E<=a;E++){var k=E/a,O=k*c+l,A=Math.sin(O),C=Math.cos(O);t.x=S*A,t.y=-w*o+y,t.z=S*C,d.push(t.x,t.y,t.z),e.set(A,u,C).normalize(),p.push(e.x,e.y,e.z),v.push(k,1-w),_.push(m++)}g.push(_)}for(var M=0;M<a;M++)for(var T=0;T<s;T++){var P=g[T][M],R=g[T+1][M],I=g[T+1][M+1],L=g[T][M+1];h.push(P,R,L),h.push(R,I,L),n+=6}f.addGroup(b,n,0),b+=n}function _(e){for(var t=m,n=new $f,o=new lh,s=0,u=!0===e?r:i,g=!0===e?1:-1,x=1;x<=a;x++)d.push(0,y*g,0),p.push(0,g,0),v.push(.5,.5),m++;for(var _=m,w=0;w<=a;w++){var S=w/a*c+l,E=Math.cos(S),k=Math.sin(S);o.x=u*k,o.y=y*g,o.z=u*E,d.push(o.x,o.y,o.z),p.push(0,g,0),n.x=.5*E+.5,n.y=.5*k*g+.5,v.push(n.x,n.y),m++}for(var O=0;O<a;O++){var A=t+O,C=_+O;!0===e?h.push(C,C+1,A):h.push(C+1,C,A),s+=3}f.addGroup(b,s,!0===e?1:2),b+=s}return x(),!1===u&&(r>0&&_(!0),i>0&&_(!1)),e.setIndex(h),e.setAttribute("position",new Bd(d,3)),e.setAttribute("normal",new Bd(p,3)),e.setAttribute("uv",new Bd(v,2)),e}return(0,Gc.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(qd),Oy=(new lh,new lh,new lh,new wd,function(){function e(){(0,Hc.Z)(this,e),this.type="Curve",this.arcLengthDivisions=200}return(0,Gc.Z)(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;n.push(0);for(var o=1;o<=e;o++)i+=(t=this.getPoint(o/e)).distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,u=o-1;s<=u;)if((a=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(o-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(o-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);var o=this.getPoint(r),a=this.getPoint(i),s=t||(o.isVector2?new $f:new lh);return s.copy(a).sub(o).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new lh,r=[],i=[],o=[],a=new lh,s=new Fh,u=0;u<=e;u++){var l=u/e;r[u]=this.getTangentAt(l,new lh),r[u].normalize()}i[0]=new lh,o[0]=new lh;var c=Number.MAX_VALUE,f=Math.abs(r[0].x),h=Math.abs(r[0].y),d=Math.abs(r[0].z);f<=c&&(c=f,n.set(1,0,0)),h<=c&&(c=h,n.set(0,1,0)),d<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(var p=1;p<=e;p++){if(i[p]=i[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(r[p-1],r[p]),a.length()>Number.EPSILON){a.normalize();var v=Math.acos(Hf(r[p-1].dot(r[p]),-1,1));i[p].applyMatrix4(s.makeRotationAxis(a,v))}o[p].crossVectors(r[p],i[p])}if(!0===t){var m=Math.acos(Hf(i[0].dot(i[e]),-1,1));m/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(m=-m);for(var g=1;g<=e;g++)i[g].applyMatrix4(s.makeRotationAxis(r[g],m*g)),o[g].crossVectors(r[g],i[g])}return{tangents:r,normals:i,binormals:o}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}()),Ay=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return(0,Hc.Z)(this,n),(e=t.call(this)).type="EllipseCurve",e.aX=r,e.aY=i,e.xRadius=o,e.yRadius=a,e.aStartAngle=s,e.aEndAngle=u,e.aClockwise=l,e.aRotation=c,e}return(0,Gc.Z)(n,[{key:"getPoint",value:function(e,t){for(var n=t||new $f,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),f=s-this.aX,h=u-this.aY;s=f*l-h*c+this.aX,u=f*c+h*l+this.aY}return n.set(s,u)}},{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=Bc(jc(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return Bc(jc(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(Oy);Ay.prototype.isEllipseCurve=!0;var Cy=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i,o,a,s){var u;return(0,Hc.Z)(this,n),(u=t.call(this,e,r,i,i,o,a,s)).type="ArcCurve",u}return(0,Gc.Z)(n)}(Ay);function My(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var u=(t-e)/o-(n-e)/(o+a)+(n-t)/a,l=(n-t)/a-(r-t)/(a+s)+(r-n)/s;i(t,n,u*=a,l*=a)},calc:function(i){var o=i*i;return e+t*i+n*o+r*(o*i)}}}Cy.prototype.isArcCurve=!0;var Ty=new lh,Py=new My,Ry=new My,Iy=new My,Ly=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return(0,Hc.Z)(this,n),(e=t.call(this)).type="CatmullRomCurve3",e.points=r,e.closed=i,e.curveType=o,e.tension=a,e}return(0,Gc.Z)(n,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lh,i=r,o=this.points,a=o.length,s=(a-(this.closed?0:1))*e,u=Math.floor(s),l=s-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/a)+1)*a:0===l&&u===a-1&&(u=a-2,l=1),this.closed||u>0?t=o[(u-1)%a]:(Ty.subVectors(o[0],o[1]).add(o[0]),t=Ty);var c=o[u%a],f=o[(u+1)%a];if(this.closed||u+2<a?n=o[(u+2)%a]:(Ty.subVectors(o[a-1],o[a-2]).add(o[a-1]),n=Ty),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,d=Math.pow(t.distanceToSquared(c),h),p=Math.pow(c.distanceToSquared(f),h),v=Math.pow(f.distanceToSquared(n),h);p<1e-4&&(p=1),d<1e-4&&(d=p),v<1e-4&&(v=p),Py.initNonuniformCatmullRom(t.x,c.x,f.x,n.x,d,p,v),Ry.initNonuniformCatmullRom(t.y,c.y,f.y,n.y,d,p,v),Iy.initNonuniformCatmullRom(t.z,c.z,f.z,n.z,d,p,v)}else"catmullrom"===this.curveType&&(Py.initCatmullRom(t.x,c.x,f.x,n.x,this.tension),Ry.initCatmullRom(t.y,c.y,f.y,n.y,this.tension),Iy.initCatmullRom(t.z,c.z,f.z,n.z,this.tension));return i.set(Py.calc(l),Ry.calc(l),Iy.calc(l)),i}},{key:"copy",value:function(e){Bc(jc(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=Bc(jc(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){Bc(jc(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new lh).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(Oy);function Ny(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function jy(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Dy(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}Ly.prototype.isCatmullRomCurve3=!0;var By=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $f,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $f,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new $f,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new $f;return(0,Hc.Z)(this,n),(e=t.call(this)).type="CubicBezierCurve",e.v0=r,e.v1=i,e.v2=o,e.v3=a,e}return(0,Gc.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $f,n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Dy(e,r.x,i.x,o.x,a.x),Dy(e,r.y,i.y,o.y,a.y)),n}},{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=Bc(jc(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return Bc(jc(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Oy);By.prototype.isCubicBezierCurve=!0;var zy=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new lh,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lh,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new lh,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new lh;return(0,Hc.Z)(this,n),(e=t.call(this)).type="CubicBezierCurve3",e.v0=r,e.v1=i,e.v2=o,e.v3=a,e}return(0,Gc.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lh,n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Dy(e,r.x,i.x,o.x,a.x),Dy(e,r.y,i.y,o.y,a.y),Dy(e,r.z,i.z,o.z,a.z)),n}},{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=Bc(jc(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return Bc(jc(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Oy);zy.prototype.isCubicBezierCurve3=!0;var Fy=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $f,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $f;return(0,Hc.Z)(this,n),(e=t.call(this)).type="LineCurve",e.v1=r,e.v2=i,e}return(0,Gc.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $f,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new $f;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Bc(jc(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Bc(jc(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Oy);Fy.prototype.isLineCurve=!0;var Vy=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new lh,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lh;return(0,Hc.Z)(this,n),(e=t.call(this)).type="LineCurve3",e.isLineCurve3=!0,e.v1=r,e.v2=i,e}return(0,Gc.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lh,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Bc(jc(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Bc(jc(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Oy),Uy=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $f,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $f,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new $f;return(0,Hc.Z)(this,n),(e=t.call(this)).type="QuadraticBezierCurve",e.v0=r,e.v1=i,e.v2=o,e}return(0,Gc.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $f,n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(jy(e,r.x,i.x,o.x),jy(e,r.y,i.y,o.y)),n}},{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Bc(jc(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Bc(jc(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Oy);Uy.prototype.isQuadraticBezierCurve=!0;var Zy=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new lh,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lh,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new lh;return(0,Hc.Z)(this,n),(e=t.call(this)).type="QuadraticBezierCurve3",e.v0=r,e.v1=i,e.v2=o,e}return(0,Gc.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lh,n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(jy(e,r.x,i.x,o.x),jy(e,r.y,i.y,o.y),jy(e,r.z,i.z,o.z)),n}},{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Bc(jc(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Bc(jc(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Oy);Zy.prototype.isQuadraticBezierCurve3=!0;var Hy=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,Hc.Z)(this,n),(e=t.call(this)).type="SplineCurve",e.points=r,e}return(0,Gc.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $f,n=t,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],l=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(Ny(a,s.x,u.x,l.x,c.x),Ny(a,s.y,u.y,l.y,c.y)),n}},{key:"copy",value:function(e){Bc(jc(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=Bc(jc(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e}},{key:"fromJSON",value:function(e){Bc(jc(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new $f).fromArray(i))}return this}}]),n}(Oy);Hy.prototype.isSplineCurve=!0;var Gy=Object.freeze({__proto__:null,ArcCurve:Cy,CatmullRomCurve3:Ly,CubicBezierCurve:By,CubicBezierCurve3:zy,EllipseCurve:Ay,LineCurve:Fy,LineCurve3:Vy,QuadraticBezierCurve:Uy,QuadraticBezierCurve3:Zy,SplineCurve:Hy}),Wy=function(e,t){var n,r,i,o,a,s,u,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=t&&t.length,f=c?t[0]*l:e.length,h=qy(e,0,f,l,!0),d=[];if(!h||h.next===h.prev)return d;if(c&&(h=eb(e,t,h,l)),e.length>80*l){n=i=e[0],r=o=e[1];for(var p=l;p<f;p+=l)(a=e[p])<n&&(n=a),(s=e[p+1])<r&&(r=s),a>i&&(i=a),s>o&&(o=s);u=0!==(u=Math.max(i-n,o-r))?1/u:0}return Yy(h,d,l,n,r,u),d};function qy(e,t,n,r,i){var o,a;if(i===function(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=vb(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=vb(o,e[o],e[o+1],a);return a&&lb(a,a.next)&&(mb(a),a=a.next),a}function Ky(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!lb(r,r.next)&&0!==ub(r.prev,r,r.next))r=r.next;else{if(mb(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Yy(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=ib(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,u,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(e,r,i,o);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?$y(e,r,i,o):Xy(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),mb(e),e=u.next,l=u.next;else if((e=u)===l){a?1===a?Yy(e=Jy(Ky(e),t,n),t,n,r,i,o,2):2===a&&Qy(e,t,n,r,i,o):Yy(Ky(e),t,n,r,i,o,1);break}}}function Xy(e){var t=e.prev,n=e,r=e.next;if(ub(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(ab(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&ub(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function $y(e,t,n,r){var i=e.prev,o=e,a=e.next;if(ub(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=ib(s,u,t,n,r),h=ib(l,c,t,n,r),d=e.prevZ,p=e.nextZ;d&&d.z>=f&&p&&p.z<=h;){if(d!==e.prev&&d!==e.next&&ab(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&ub(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==e.prev&&p!==e.next&&ab(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&ub(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=f;){if(d!==e.prev&&d!==e.next&&ab(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&ub(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&ab(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&ub(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Jy(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!lb(i,o)&&cb(i,r,r.next,o)&&db(i,o)&&db(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),mb(r),mb(r.next),r=e=o),r=r.next}while(r!==e);return Ky(r)}function Qy(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&sb(a,s)){var u=pb(a,s);return a=Ky(a,a.next),u=Ky(u,u.next),Yy(a,t,n,r,i,o),void Yy(u,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function eb(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=qy(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(ob(a));for(s.sort(tb),i=0;i<s.length;i++)nb(s[i],n),n=Ky(n,n.next);return n}function tb(e,t){return e.x-t.x}function nb(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n;var u,l=n,c=n.x,f=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&ab(o<f?i:a,o,c,f,o<f?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),db(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&rb(n,r)))&&(n=r,h=u)),r=r.next}while(r!==l);return n}(e,t),t){var n=pb(t,e);Ky(t,t.next),Ky(n,n.next)}}function rb(e,t){return ub(e.prev,e,t.prev)<0&&ub(t.next,e,e.next)<0}function ib(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ob(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function ab(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function sb(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&cb(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(db(e,t)&&db(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(ub(e.prev,e,t.prev)||ub(e,t.prev,t))||lb(e,t)&&ub(e.prev,e,e.next)>0&&ub(t.prev,t,t.next)>0)}function ub(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function lb(e,t){return e.x===t.x&&e.y===t.y}function cb(e,t,n,r){var i=hb(ub(e,t,n)),o=hb(ub(e,t,r)),a=hb(ub(n,r,e)),s=hb(ub(n,r,t));return i!==o&&a!==s||(!(0!==i||!fb(e,n,t))||(!(0!==o||!fb(e,r,t))||(!(0!==a||!fb(n,e,r))||!(0!==s||!fb(n,t,r)))))}function fb(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function hb(e){return e>0?1:e<0?-1:0}function db(e,t){return ub(e.prev,e,e.next)<0?ub(e,t,e.next)>=0&&ub(e,e.prev,t)>=0:ub(e,t,e.prev)<0||ub(e,e.next,t)<0}function pb(e,t){var n=new gb(e.i,e.x,e.y),r=new gb(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function vb(e,t,n,r){var i=new gb(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function mb(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function gb(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var yb=function(){function e(){(0,Hc.Z)(this,e)}return(0,Gc.Z)(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],i=[];bb(e),xb(n,e);var o=e.length;t.forEach(bb);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,xb(n,t[a]);for(var s=Wy(n,r),u=0;u<s.length;u+=3)i.push(s.slice(u,u+3));return i}}]),e}();function bb(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function xb(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var _b=function(e){Vc(n,e);var t=Uc(n);function n(e,r){var i;(0,Hc.Z)(this,n),(i=t.call(this)).type="ExtrudeGeometry",i.parameters={shapes:e,options:r},e=Array.isArray(e)?e:[e];for(var o=Lc(i),a=[],s=[],u=0,l=e.length;u<l;u++){c(e[u])}function c(e){var t=[],n=void 0!==r.curveSegments?r.curveSegments:12,i=void 0!==r.steps?r.steps:1,u=void 0!==r.depth?r.depth:100,l=void 0===r.bevelEnabled||r.bevelEnabled,c=void 0!==r.bevelThickness?r.bevelThickness:6,f=void 0!==r.bevelSize?r.bevelSize:c-2,h=void 0!==r.bevelOffset?r.bevelOffset:0,d=void 0!==r.bevelSegments?r.bevelSegments:3,p=r.extrudePath,v=void 0!==r.UVGenerator?r.UVGenerator:wb;void 0!==r.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=r.amount);var m,g,y,b,x,_=!1;p&&(m=p.getSpacedPoints(i),_=!0,l=!1,g=p.computeFrenetFrames(i,!1),y=new lh,b=new lh,x=new lh),l||(d=0,c=0,f=0,h=0);var w=e.extractPoints(n),S=w.shape,E=w.holes;if(!yb.isClockWise(S)){S=S.reverse();for(var k=0,O=E.length;k<O;k++){var A=E[k];yb.isClockWise(A)&&(E[k]=A.reverse())}}for(var C=yb.triangulateShape(S,E),M=S,T=0,P=E.length;T<P;T++){var R=E[T];S=S.concat(R)}function I(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var L=S.length,N=C.length;function j(e,t,n){var r,i,o,a=e.x-t.x,s=e.y-t.y,u=n.x-e.x,l=n.y-e.y,c=a*a+s*s,f=a*l-s*u;if(Math.abs(f)>Number.EPSILON){var h=Math.sqrt(c),d=Math.sqrt(u*u+l*l),p=t.x-s/h,v=t.y+a/h,m=((n.x-l/d-p)*l-(n.y+u/d-v)*u)/(a*l-s*u),g=(r=p+a*m-e.x)*r+(i=v+s*m-e.y)*i;if(g<=2)return new $f(r,i);o=Math.sqrt(g/2)}else{var y=!1;a>Number.EPSILON?u>Number.EPSILON&&(y=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new $f(r/o,i/o)}for(var D=[],B=0,z=M.length,F=z-1,V=B+1;B<z;B++,F++,V++)F===z&&(F=0),V===z&&(V=0),D[B]=j(M[B],M[F],M[V]);for(var U,Z=[],H=D.concat(),G=0,W=E.length;G<W;G++){var q=E[G];U=[];for(var K=0,Y=q.length,X=Y-1,$=K+1;K<Y;K++,X++,$++)X===Y&&(X=0),$===Y&&($=0),U[K]=j(q[K],q[X],q[$]);Z.push(U),H=H.concat(U)}for(var J=0;J<d;J++){for(var Q=J/d,ee=c*Math.cos(Q*Math.PI/2),te=f*Math.sin(Q*Math.PI/2)+h,ne=0,re=M.length;ne<re;ne++){var ie=I(M[ne],D[ne],te);Pe(ie.x,ie.y,-ee)}for(var oe=0,ae=E.length;oe<ae;oe++){var se=E[oe];U=Z[oe];for(var ue=0,le=se.length;ue<le;ue++){var ce=I(se[ue],U[ue],te);Pe(ce.x,ce.y,-ee)}}}for(var fe=f+h,he=0;he<L;he++){var de=l?I(S[he],H[he],fe):S[he];_?(b.copy(g.normals[0]).multiplyScalar(de.x),y.copy(g.binormals[0]).multiplyScalar(de.y),x.copy(m[0]).add(b).add(y),Pe(x.x,x.y,x.z)):Pe(de.x,de.y,0)}for(var pe=1;pe<=i;pe++)for(var ve=0;ve<L;ve++){var me=l?I(S[ve],H[ve],fe):S[ve];_?(b.copy(g.normals[pe]).multiplyScalar(me.x),y.copy(g.binormals[pe]).multiplyScalar(me.y),x.copy(m[pe]).add(b).add(y),Pe(x.x,x.y,x.z)):Pe(me.x,me.y,u/i*pe)}for(var ge=d-1;ge>=0;ge--){for(var ye=ge/d,be=c*Math.cos(ye*Math.PI/2),xe=f*Math.sin(ye*Math.PI/2)+h,_e=0,we=M.length;_e<we;_e++){var Se=I(M[_e],D[_e],xe);Pe(Se.x,Se.y,u+be)}for(var Ee=0,ke=E.length;Ee<ke;Ee++){var Oe=E[Ee];U=Z[Ee];for(var Ae=0,Ce=Oe.length;Ae<Ce;Ae++){var Me=I(Oe[Ae],U[Ae],xe);_?Pe(Me.x,Me.y+m[i-1].y,m[i-1].x+be):Pe(Me.x,Me.y,u+be)}}}function Te(e,t){for(var n=e.length;--n>=0;){var r=n,o=n-1;o<0&&(o=e.length-1);for(var a=0,s=i+2*d;a<s;a++){var u=L*a,l=L*(a+1);Ie(t+r+u,t+o+u,t+o+l,t+r+l)}}}function Pe(e,n,r){t.push(e),t.push(n),t.push(r)}function Re(e,t,n){Le(e),Le(t),Le(n);var r=a.length/3,i=v.generateTopUV(o,a,r-3,r-2,r-1);Ne(i[0]),Ne(i[1]),Ne(i[2])}function Ie(e,t,n,r){Le(e),Le(t),Le(r),Le(t),Le(n),Le(r);var i=a.length/3,s=v.generateSideWallUV(o,a,i-6,i-3,i-2,i-1);Ne(s[0]),Ne(s[1]),Ne(s[3]),Ne(s[1]),Ne(s[2]),Ne(s[3])}function Le(e){a.push(t[3*e+0]),a.push(t[3*e+1]),a.push(t[3*e+2])}function Ne(e){s.push(e.x),s.push(e.y)}!function(){var e=a.length/3;if(l){for(var t=0,n=L*t,r=0;r<N;r++){var s=C[r];Re(s[2]+n,s[1]+n,s[0]+n)}n=L*(t=i+2*d);for(var u=0;u<N;u++){var c=C[u];Re(c[0]+n,c[1]+n,c[2]+n)}}else{for(var f=0;f<N;f++){var h=C[f];Re(h[2],h[1],h[0])}for(var p=0;p<N;p++){var v=C[p];Re(v[0]+L*i,v[1]+L*i,v[2]+L*i)}}o.addGroup(e,a.length/3-e,0)}(),function(){var e=a.length/3,t=0;Te(M,t),t+=M.length;for(var n=0,r=E.length;n<r;n++){var i=E[n];Te(i,t),t+=i.length}o.addGroup(e,a.length/3-e,1)}()}return i.setAttribute("position",new Bd(a,3)),i.setAttribute("uv",new Bd(s,2)),i.computeVertexNormals(),i}return(0,Gc.Z)(n,[{key:"toJSON",value:function(){var e=Bc(jc(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,o=e.shapes.length;i<o;i++){var a=t[e.shapes[i]];r.push(a)}var s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new Gy[s.type]).fromJSON(s)),new n(r,e.options)}}]),n}(qd),wb={generateTopUV:function(e,t,n,r,i){var o=t[3*n],a=t[3*n+1],s=t[3*r],u=t[3*r+1],l=t[3*i],c=t[3*i+1];return[new $f(o,a),new $f(s,u),new $f(l,c)]},generateSideWallUV:function(e,t,n,r,i,o){var a=t[3*n],s=t[3*n+1],u=t[3*n+2],l=t[3*r],c=t[3*r+1],f=t[3*r+2],h=t[3*i],d=t[3*i+1],p=t[3*i+2],v=t[3*o],m=t[3*o+1],g=t[3*o+2];return Math.abs(s-c)<Math.abs(a-l)?[new $f(a,1-u),new $f(l,1-f),new $f(h,1-p),new $f(v,1-g)]:[new $f(s,1-u),new $f(c,1-f),new $f(d,1-p),new $f(m,1-g)]}};var Sb=function(e){Vc(n,e);var t=Uc(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;(0,Hc.Z)(this,n),(r=t.call(this)).type="ShapeGeometry",r.parameters={shapes:e,curveSegments:i};var o=[],a=[],s=[],u=[],l=0,c=0;if(!1===Array.isArray(e))h(e);else for(var f=0;f<e.length;f++)h(e[f]),r.addGroup(l,c,f),l+=c,c=0;function h(e){var t=a.length/3,n=e.extractPoints(i),r=n.shape,l=n.holes;!1===yb.isClockWise(r)&&(r=r.reverse());for(var f=0,h=l.length;f<h;f++){var d=l[f];!0===yb.isClockWise(d)&&(l[f]=d.reverse())}for(var p=yb.triangulateShape(r,l),v=0,m=l.length;v<m;v++){var g=l[v];r=r.concat(g)}for(var y=0,b=r.length;y<b;y++){var x=r[y];a.push(x.x,x.y,0),s.push(0,0,1),u.push(x.x,x.y)}for(var _=0,w=p.length;_<w;_++){var S=p[_],E=S[0]+t,k=S[1]+t,O=S[2]+t;o.push(E,k,O),c+=3}}return r.setIndex(o),r.setAttribute("position",new Bd(a,3)),r.setAttribute("normal",new Bd(s,3)),r.setAttribute("uv",new Bd(u,2)),r}return(0,Gc.Z)(n,[{key:"toJSON",value:function(){var e=Bc(jc(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,o=e.shapes.length;i<o;i++){var a=t[e.shapes[i]];r.push(a)}return new n(r,e.curveSegments)}}]),n}(qd);var Eb=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;(0,Hc.Z)(this,n),(e=t.call(this)).type="SphereGeometry",e.parameters={radius:r,widthSegments:i,heightSegments:o,phiStart:a,phiLength:s,thetaStart:u,thetaLength:l},i=Math.max(3,Math.floor(i)),o=Math.max(2,Math.floor(o));for(var c=Math.min(u+l,Math.PI),f=0,h=[],d=new lh,p=new lh,v=[],m=[],g=[],y=[],b=0;b<=o;b++){var x=[],_=b/o,w=0;0==b&&0==u?w=.5/i:b==o&&c==Math.PI&&(w=-.5/i);for(var S=0;S<=i;S++){var E=S/i;d.x=-r*Math.cos(a+E*s)*Math.sin(u+_*l),d.y=r*Math.cos(u+_*l),d.z=r*Math.sin(a+E*s)*Math.sin(u+_*l),m.push(d.x,d.y,d.z),p.copy(d).normalize(),g.push(p.x,p.y,p.z),y.push(E+w,1-_),x.push(f++)}h.push(x)}for(var k=0;k<o;k++)for(var O=0;O<i;O++){var A=h[k][O+1],C=h[k][O],M=h[k+1][O],T=h[k+1][O+1];(0!==k||u>0)&&v.push(A,C,T),(k!==o-1||c<Math.PI)&&v.push(C,M,T)}return e.setIndex(v),e.setAttribute("position",new Bd(m,3)),e.setAttribute("normal",new Bd(g,3)),e.setAttribute("uv",new Bd(y,2)),e}return(0,Gc.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(qd);var kb=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).type="ShadowMaterial",r.color=new Pd(0),r.transparent=!0,r.setValues(e),r}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this}}]),n}(Ed);kb.prototype.isShadowMaterial=!0;var Ob=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new Pd(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Pd(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new $f(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(e),r}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}(Ed);Ob.prototype.isMeshStandardMaterial=!0;var Ab=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoat=0,r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new $f(1,1),r.clearcoatNormalMap=null,r.reflectivity=.5,Object.defineProperty(Lc(r),"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=Hf(2.5*(e-1)/(e+1),0,1)}}),r.sheen=null,r.transmission=0,r.transmissionMap=null,r.thickness=.01,r.thicknessMap=null,r.attenuationDistance=0,r.attenuationTint=new Pd(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularTint=new Pd(1,1,1),r.specularTintMap=null,r.setValues(e),r}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new Pd).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationTint.copy(e.attenuationTint),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularTint.copy(e.specularTint),this.specularTintMap=e.specularTintMap,this}}]),n}(Ob);Ab.prototype.isMeshPhysicalMaterial=!0;var Cb=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).type="MeshPhongMaterial",r.color=new Pd(16777215),r.specular=new Pd(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Pd(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new $f(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(e),r}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}(Ed);Cb.prototype.isMeshPhongMaterial=!0;var Mb=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).defines={TOON:""},r.type="MeshToonMaterial",r.color=new Pd(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Pd(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new $f(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(Ed);Mb.prototype.isMeshToonMaterial=!0;var Tb=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new $f(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.flatShading=!1,r.setValues(e),r}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(Ed);Tb.prototype.isMeshNormalMaterial=!0;var Pb=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).type="MeshLambertMaterial",r.color=new Pd(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Pd(0),r.emissiveIntensity=1,r.emissiveMap=null,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(Ed);Pb.prototype.isMeshLambertMaterial=!0;var Rb=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new Pd(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new $f(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.flatShading=!1,r.setValues(e),r}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}]),n}(Ed);Rb.prototype.isMeshMatcapMaterial=!0;var Ib=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(e),r}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(ry);Ib.prototype.isLineDashedMaterial=!0;var Lb={arraySlice:function(e,t,n){return Lb.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,u=0;u!==t;++u)i[a++]=e[s+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}},subclip:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,o=e.clone();o.name=t;for(var a=[],s=0;s<o.tracks.length;++s){for(var u=o.tracks[s],l=u.getValueSize(),c=[],f=[],h=0;h<u.times.length;++h){var d=u.times[h]*i;if(!(d<n||d>=r)){c.push(u.times[h]);for(var p=0;p<l;++p)f.push(u.values[h*l+p])}}0!==c.length&&(u.times=Lb.convertArray(c,u.times.constructor),u.values=Lb.convertArray(f,u.values.constructor),a.push(u))}o.tracks=a;for(var v=1/0,m=0;m<o.tracks.length;++m)v>o.tracks[m].times[0]&&(v=o.tracks[m].times[0]);for(var g=0;g<o.tracks.length;++g)o.tracks[g].shift(-1*v);return o.resetDuration(),o},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var i=n.tracks.length,o=t/r,a=function(t){var r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)return"continue";var a=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===a)return"continue";var s=0,u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);var l=0,c=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);var f=r.times.length-1,h=void 0;if(o<=r.times[0]){var d=s,p=u-s;h=Lb.arraySlice(r.values,d,p)}else if(o>=r.times[f]){var v=f*u+s,m=v+u-s;h=Lb.arraySlice(r.values,v,m)}else{var g=r.createInterpolant(),y=s,b=u-s;g.evaluate(o),h=Lb.arraySlice(g.resultBuffer,y,b)}"quaternion"===i&&(new uh).fromArray(h).normalize().conjugate().toArray(h);for(var x=a.times.length,_=0;_<x;++_){var w=_*c+l;if("quaternion"===i)uh.multiplyQuaternionsFlat(a.values,w,h,0,a.values,w);else for(var S=c-2*l,E=0;E<S;++E)a.values[w+E]-=h[E]}},s=0;s<i;++s)a(s);return e.blendMode=Cf,e}},Nb=function(){function e(t,n,r,i){(0,Hc.Z)(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return(0,Gc.Z)(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,e<(r=t[++n]))break t}o=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===u)break;if(r=i,e>=(i=t[--n-1]))break t}o=n,n=0}for(;n<o;){var l=n+o>>>1;e<t[l]?o=l:n=l+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}();Nb.prototype.beforeStart_=Nb.prototype.copySampleValue_,Nb.prototype.afterEnd_=Nb.prototype.copySampleValue_;var jb=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i,o){var a;return(0,Hc.Z)(this,n),(a=t.call(this,e,r,i,o))._weightPrev=-0,a._offsetPrev=-0,a._weightNext=-0,a._offsetNext=-0,a.DefaultSettings_={endingStart:Ef,endingEnd:Ef},a}return(0,Gc.Z)(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case kf:i=e,a=2*t-n;break;case Of:a=t+r[i=r.length-2]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case kf:o=e,s=2*n-t;break;case Of:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,f=this._weightPrev,h=this._weightNext,d=(n-t)/(r-t),p=d*d,v=p*d,m=-f*v+2*f*p-f*d,g=(1+f)*v+(-1.5-2*f)*p+(-.5+f)*d+1,y=(-1-h)*v+(1.5+h)*p+.5*d,b=h*v-h*p,x=0;x!==a;++x)i[x]=m*o[l+x]+g*o[u+x]+y*o[s+x]+b*o[c+x];return i}}]),n}(Nb),Db=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i,o){return(0,Hc.Z)(this,n),t.call(this,e,r,i,o)}return(0,Gc.Z)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=(n-t)/(r-t),c=1-l,f=0;f!==a;++f)i[f]=o[u+f]*c+o[s+f]*l;return i}}]),n}(Nb),Bb=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i,o){return(0,Hc.Z)(this,n),t.call(this,e,r,i,o)}return(0,Gc.Z)(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(Nb),zb=function(){function e(t,n,r,i){if((0,Hc.Z)(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Lb.convertArray(n,this.TimeBufferType),this.values=Lb.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return(0,Gc.Z)(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new Bb(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new Db(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new jb(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case _f:t=this.InterpolantFactoryMethodDiscrete;break;case wf:t=this.InterpolantFactoryMethodLinear;break;case Sf:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return _f;case this.InterpolantFactoryMethodLinear:return wf;case this.InterpolantFactoryMethodSmooth:return Sf}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=Lb.arraySlice(n,i,o),this.values=Lb.arraySlice(this.values,i*a,o*a)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&Lb.isTypedArray(r))for(var u=0,l=r.length;u!==l;++u){var c=r[u];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=Lb.arraySlice(this.times),t=Lb.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===Sf,i=e.length-1,o=1,a=1;a<i;++a){var s=!1,u=e[a];if(u!==e[a+1]&&(1!==a||u!==e[0]))if(r)s=!0;else for(var l=a*n,c=l-n,f=l+n,h=0;h!==n;++h){var d=t[l+h];if(d!==t[c+h]||d!==t[f+h]){s=!0;break}}if(s){if(a!==o){e[o]=e[a];for(var p=a*n,v=o*n,m=0;m!==n;++m)t[v+m]=t[p+m]}++o}}if(i>0){e[o]=e[i];for(var g=i*n,y=o*n,b=0;b!==n;++b)t[y+b]=t[g+b];++o}return o!==e.length?(this.times=Lb.arraySlice(e,0,o),this.values=Lb.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=Lb.arraySlice(this.times,0),t=Lb.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Lb.convertArray(e.times,Array),values:Lb.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();zb.prototype.TimeBufferType=Float32Array,zb.prototype.ValueBufferType=Float32Array,zb.prototype.DefaultInterpolation=wf;var Fb=function(e){Vc(n,e);var t=Uc(n);function n(){return(0,Hc.Z)(this,n),t.apply(this,arguments)}return(0,Gc.Z)(n)}(zb);Fb.prototype.ValueTypeName="bool",Fb.prototype.ValueBufferType=Array,Fb.prototype.DefaultInterpolation=_f,Fb.prototype.InterpolantFactoryMethodLinear=void 0,Fb.prototype.InterpolantFactoryMethodSmooth=void 0;var Vb=function(e){Vc(n,e);var t=Uc(n);function n(){return(0,Hc.Z)(this,n),t.apply(this,arguments)}return(0,Gc.Z)(n)}(zb);Vb.prototype.ValueTypeName="color";var Ub=function(e){Vc(n,e);var t=Uc(n);function n(){return(0,Hc.Z)(this,n),t.apply(this,arguments)}return(0,Gc.Z)(n)}(zb);Ub.prototype.ValueTypeName="number";var Zb=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i,o){return(0,Hc.Z)(this,n),t.call(this,e,r,i,o)}return(0,Gc.Z)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t),u=e*a,l=u+a;u!==l;u+=4)uh.slerpFlat(i,0,o,u-a,o,u,s);return i}}]),n}(Nb),Hb=function(e){Vc(n,e);var t=Uc(n);function n(){return(0,Hc.Z)(this,n),t.apply(this,arguments)}return(0,Gc.Z)(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new Zb(this.times,this.values,this.getValueSize(),e)}}]),n}(zb);Hb.prototype.ValueTypeName="quaternion",Hb.prototype.DefaultInterpolation=wf,Hb.prototype.InterpolantFactoryMethodSmooth=void 0;var Gb=function(e){Vc(n,e);var t=Uc(n);function n(){return(0,Hc.Z)(this,n),t.apply(this,arguments)}return(0,Gc.Z)(n)}(zb);Gb.prototype.ValueTypeName="string",Gb.prototype.ValueBufferType=Array,Gb.prototype.DefaultInterpolation=_f,Gb.prototype.InterpolantFactoryMethodLinear=void 0,Gb.prototype.InterpolantFactoryMethodSmooth=void 0;var Wb=function(e){Vc(n,e);var t=Uc(n);function n(){return(0,Hc.Z)(this,n),t.apply(this,arguments)}return(0,Gc.Z)(n)}(zb);Wb.prototype.ValueTypeName="vector";var qb=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Af;(0,Hc.Z)(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Zf(),this.duration<0&&this.resetDuration()}return(0,Gc.Z)(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(Kb(n[i]).scale(r));var a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,o=n.length;i!==o;++i)t.push(zb.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var l=Lb.getKeyframeOrder(s);s=Lb.sortedArray(s,1,l),u=Lb.sortedArray(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new Ub(".morphTargetInfluences["+t[a].name+"]",s,u).scale(1/n))}return new this(e,-1,o)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],u=s.name.match(i);if(u&&u.length>1){var l=u[1],c=r[l];c||(r[l]=c=[]),c.push(s)}}var f=[];for(var h in r)f.push(this.CreateFromMorphTargetSequence(h,r[h],t,n));return f}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];Lb.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.fps||30,a=e.blendMode,s=e.length||-1,u=e.hierarchy||[],l=0;l<u.length;l++){var c=u[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){var f={},h=void 0;for(h=0;h<c.length;h++)if(c[h].morphTargets)for(var d=0;d<c[h].morphTargets.length;d++)f[c[h].morphTargets[d]]=-1;for(var p in f){for(var v=[],m=[],g=0;g!==c[h].morphTargets.length;++g){var y=c[h];v.push(y.time),m.push(y.morphTarget===p?1:0)}r.push(new Ub(".morphTargetInfluence["+p+"]",v,m))}s=f.length*(o||1)}else{var b=".bones["+t[l].name+"]";n(Wb,b+".position",c,"pos",r),n(Hb,b+".quaternion",c,"rot",r),n(Wb,b+".scale",c,"scl",r)}}return 0===r.length?null:new this(i,s,r,a)}}]),e}();function Kb(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ub;case"vector":case"vector2":case"vector3":case"vector4":return Wb;case"color":return Vb;case"quaternion":return Hb;case"bool":case"boolean":return Fb;case"string":return Gb}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];Lb.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var Yb={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Xb=(0,Gc.Z)((function e(t,n,r){(0,Hc.Z)(this,e);var i=this,o=!1,a=0,s=0,u=void 0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===o&&void 0!==i.onStart&&i.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,s),a===s&&(o=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return u?u(e):e},this.setURLModifier=function(e){return u=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var r=l[t],i=l[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}})),$b=new Xb,Jb=function(){function e(t){(0,Hc.Z)(this,e),this.manager=void 0!==t?t:$b,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return(0,Gc.Z)(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),Qb={},ex=function(e){Vc(n,e);var t=Uc(n);function n(e){return(0,Hc.Z)(this,n),t.call(this,e)}return(0,Gc.Z)(n,[{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=Yb.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0===Qb[e]){var a,s=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var u=s[1],l=!!s[2],c=s[3];c=decodeURIComponent(c),l&&(c=atob(c));try{var f,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var d=new Uint8Array(c.length),p=0;p<c.length;p++)d[p]=c.charCodeAt(p);f="blob"===h?new Blob([d.buffer],{type:u}):d.buffer;break;case"document":var v=new DOMParser;f=v.parseFromString(c,u);break;case"json":f=JSON.parse(c);break;default:f=c}setTimeout((function(){t&&t(f),i.manager.itemEnd(e)}),0)}catch(g){setTimeout((function(){r&&r(g),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{for(var m in Qb[e]=[],Qb[e].push({onLoad:t,onProgress:n,onError:r}),(a=new XMLHttpRequest).open("GET",e,!0),a.addEventListener("load",(function(t){var n=this.response,r=Qb[e];if(delete Qb[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Yb.add(e,n);for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(var u=0,l=r.length;u<l;u++){var c=r[u];c.onError&&c.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),a.addEventListener("progress",(function(t){for(var n=Qb[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}}),!1),a.addEventListener("error",(function(t){var n=Qb[e];delete Qb[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),a.addEventListener("abort",(function(t){var n=Qb[e];delete Qb[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(a.responseType=this.responseType),void 0!==this.withCredentials&&(a.withCredentials=this.withCredentials),a.overrideMimeType&&a.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)a.setRequestHeader(m,this.requestHeader[m]);a.send(null)}return i.manager.itemStart(e),a}Qb[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(Jb),tx=function(e){Vc(n,e);var t=Uc(n);function n(e){return(0,Hc.Z)(this,n),t.call(this,e)}return(0,Gc.Z)(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=Yb.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),Yb.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}]),n}(Jb),nx=function(e){Vc(n,e);var t=Uc(n);function n(e){return(0,Hc.Z)(this,n),t.call(this,e)}return(0,Gc.Z)(n,[{key:"load",value:function(e,t,n,r){var i=new wp,o=new tx(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,6===++a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var u=0;u<e.length;++u)s(u);return i}}]),n}(Jb),rx=function(e){Vc(n,e);var t=Uc(n);function n(e){return(0,Hc.Z)(this,n),t.call(this,e)}return(0,Gc.Z)(n,[{key:"load",value:function(e,t,n,r){var i=new nh,o=new tx(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){i.image=n;var r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?gf:yf,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}]),n}(Jb),ix=function(e){Vc(n,e);var t=Uc(n);function n(){var e;return(0,Hc.Z)(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return(0,Gc.Z)(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Fy(t,e))}},{key:"getPoint",value:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a),u=0;u<s.length;u++){var l=s[u];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){Bc(jc(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=Bc(jc(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){Bc(jc(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push((new Gy[i.type]).fromJSON(i))}return this}}]),n}(Oy),ox=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).type="Path",r.currentPoint=new $f,e&&r.setFromPoints(e),r}return(0,Gc.Z)(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new Fy(this.currentPoint.clone(),new $f(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var i=new Uy(this.currentPoint.clone(),new $f(e,t),new $f(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,o){var a=new By(this.currentPoint.clone(),new $f(e,t),new $f(n,r),new $f(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new Hy(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this}},{key:"absarc",value:function(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this}},{key:"ellipse",value:function(e,t,n,r,i,o,a,s){var u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+u,t+l,n,r,i,o,a,s),this}},{key:"absellipse",value:function(e,t,n,r,i,o,a,s){var u=new Ay(e,t,n,r,i,o,a,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=Bc(jc(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return Bc(jc(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(ix),ax=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this,e)).uuid=Zf(),r.type="Shape",r.holes=[],r}return(0,Gc.Z)(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){Bc(jc(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=Bc(jc(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){Bc(jc(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push((new ox).fromJSON(i))}return this}}]),n}(ox),sx=function(e){Vc(n,e);var t=Uc(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,Hc.Z)(this,n),(r=t.call(this)).type="Light",r.color=new Pd(e),r.intensity=i,r}return(0,Gc.Z)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=Bc(jc(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(fd);sx.prototype.isLight=!0;var ux=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i){var o;return(0,Hc.Z)(this,n),(o=t.call(this,e,i)).type="HemisphereLight",o.position.copy(fd.DefaultUp),o.updateMatrix(),o.groundColor=new Pd(r),o}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return sx.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}]),n}(sx);ux.prototype.isHemisphereLight=!0;var lx=new Fh,cx=new lh,fx=new lh,hx=function(){function e(t){(0,Hc.Z)(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new $f(512,512),this.map=null,this.mapPass=null,this.matrix=new Fh,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Tp,this._frameExtents=new $f(1,1),this._viewportCount=1,this._viewports=[new ih(0,0,1,1)]}return(0,Gc.Z)(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;cx.setFromMatrixPosition(e.matrixWorld),t.position.copy(cx),fx.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(fx),t.updateMatrixWorld(),lx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lx),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),dx=function(e){Vc(n,e);var t=Uc(n);function n(){var e;return(0,Hc.Z)(this,n),(e=t.call(this,new bp(50,1,.5,500))).focus=1,e}return(0,Gc.Z)(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*Uf*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;r===t.fov&&i===t.aspect&&o===t.far||(t.fov=r,t.aspect=i,t.far=o,t.updateProjectionMatrix()),Bc(jc(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(hx);dx.prototype.isSpotLightShadow=!0;var px=function(e){Vc(n,e);var t=Uc(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(0,Hc.Z)(this,n),(i=t.call(this,e,r)).type="SpotLight",i.position.copy(fd.DefaultUp),i.updateMatrix(),i.target=new fd,i.distance=o,i.angle=a,i.penumbra=s,i.decay=u,i.shadow=new dx,i}return(0,Gc.Z)(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(sx);px.prototype.isSpotLight=!0;var vx=new Fh,mx=new lh,gx=new lh,yx=function(e){Vc(n,e);var t=Uc(n);function n(){var e;return(0,Hc.Z)(this,n),(e=t.call(this,new bp(90,1,.5,500)))._frameExtents=new $f(4,2),e._viewportCount=6,e._viewports=[new ih(2,1,1,1),new ih(0,1,1,1),new ih(3,1,1,1),new ih(1,1,1,1),new ih(3,0,1,1),new ih(1,0,1,1)],e._cubeDirections=[new lh(1,0,0),new lh(-1,0,0),new lh(0,0,1),new lh(0,0,-1),new lh(0,1,0),new lh(0,-1,0)],e._cubeUps=[new lh(0,1,0),new lh(0,1,0),new lh(0,1,0),new lh(0,1,0),new lh(0,0,1),new lh(0,0,-1)],e}return(0,Gc.Z)(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),mx.setFromMatrixPosition(e.matrixWorld),n.position.copy(mx),gx.copy(n.position),gx.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(gx),n.updateMatrixWorld(),r.makeTranslation(-mx.x,-mx.y,-mx.z),vx.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(vx)}}]),n}(hx);yx.prototype.isPointLightShadow=!0;var bx=function(e){Vc(n,e);var t=Uc(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,Hc.Z)(this,n),(i=t.call(this,e,r)).type="PointLight",i.distance=o,i.decay=a,i.shadow=new yx,i}return(0,Gc.Z)(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(sx);bx.prototype.isPointLight=!0;var xx=function(e){Vc(n,e);var t=Uc(n);function n(){return(0,Hc.Z)(this,n),t.call(this,new Zp(-5,5,5,-5,.5,500))}return(0,Gc.Z)(n)}(hx);xx.prototype.isDirectionalLightShadow=!0;var _x=function(e){Vc(n,e);var t=Uc(n);function n(e,r){var i;return(0,Hc.Z)(this,n),(i=t.call(this,e,r)).type="DirectionalLight",i.position.copy(fd.DefaultUp),i.updateMatrix(),i.target=new fd,i.shadow=new xx,i}return(0,Gc.Z)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(sx);_x.prototype.isDirectionalLight=!0;var wx=function(e){Vc(n,e);var t=Uc(n);function n(e,r){var i;return(0,Hc.Z)(this,n),(i=t.call(this,e,r)).type="AmbientLight",i}return(0,Gc.Z)(n)}(sx);wx.prototype.isAmbientLight=!0;var Sx=function(e){Vc(n,e);var t=Uc(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return(0,Hc.Z)(this,n),(i=t.call(this,e,r)).type="RectAreaLight",i.width=o,i.height=a,i}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=Bc(jc(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(sx);Sx.prototype.isRectAreaLight=!0;var Ex=function(){function e(){(0,Hc.Z)(this,e),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new lh)}return(0,Gc.Z)(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*i*1.092548),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],n*i*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*i),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],.858086*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}]),e}();Ex.prototype.isSphericalHarmonics3=!0;var kx=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ex,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,Hc.Z)(this,n),(e=t.call(this,void 0,i)).sh=r,e}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=Bc(jc(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(sx);kx.prototype.isLightProbe=!0;var Ox=function(){function e(){(0,Hc.Z)(this,e)}return(0,Gc.Z)(e,null,[{key:"decodeText",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(i){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}}]),e}(),Ax=function(e){Vc(n,e);var t=Uc(n);function n(){var e;return(0,Hc.Z)(this,n),(e=t.call(this)).type="InstancedBufferGeometry",e.instanceCount=1/0,e}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e=Bc(jc(n.prototype),"toJSON",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(qd);Ax.prototype.isInstancedBufferGeometry=!0;var Cx=function(e){Vc(n,e);var t=Uc(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,Hc.Z)(this,n),"number"===typeof i&&(a=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(o=t.call(this,e,r,i)).meshPerAttribute=a,o}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=Bc(jc(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(Nd);Cx.prototype.isInstancedBufferAttribute=!0;var Mx=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),r=t.call(this,e),"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return(0,Gc.Z)(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=Yb.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;var a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Yb.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}]),n}(Jb);Mx.prototype.isImageBitmapLoader=!0;var Tx=function(){function e(){(0,Hc.Z)(this,e),this.type="ShapePath",this.color=new Pd,this.subPaths=[],this.currentPath=null}return(0,Gc.Z)(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new ox,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new ax;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],u=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=t[o],u=-u,s=t[i],l=-l),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var c=l*(e.x-a.x)-u*(e.y-a.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i,o,a,s=yb.isClockWise,u=this.subPaths;if(0===u.length)return[];if(!0===t)return n(u);var l=[];if(1===u.length)return o=u[0],(a=new ax).curves=o.curves,l.push(a),l;var c=!s(u[0].getPoints());c=e?!c:c;var f,h,d=[],p=[],v=[],m=0;p[m]=void 0,v[m]=[];for(var g=0,y=u.length;g<y;g++)i=s(f=(o=u[g]).getPoints()),(i=e?!i:i)?(!c&&p[m]&&m++,p[m]={s:new ax,p:f},p[m].s.curves=o.curves,c&&m++,v[m]=[]):v[m].push({h:o,p:f[0]});if(!p[0])return n(u);if(p.length>1){for(var b=!1,x=[],_=0,w=p.length;_<w;_++)d[_]=[];for(var S=0,E=p.length;S<E;S++)for(var k=v[S],O=0;O<k.length;O++){for(var A=k[O],C=!0,M=0;M<p.length;M++)r(A.p,p[M].p)&&(S!==M&&x.push({froms:S,tos:M,hole:O}),C?(C=!1,d[M].push(A)):b=!0);C&&d[S].push(A)}x.length>0&&(b||(v=d))}for(var T=0,P=p.length;T<P;T++){a=p[T].s,l.push(a);for(var R=0,I=(h=v[T]).length;R<I;R++)a.holes.push(h[R].h)}return l}}]),e}(),Px=function(){function e(t){(0,Hc.Z)(this,e),this.type="Font",this.data=t}return(0,Gc.Z)(e,[{key:"generateShapes",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=[],r=Rx(e,t,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}]),e}();function Rx(e,t,n){for(var r=Array.from(e),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,u=0,l=0;l<r.length;l++){var c=r[l];if("\n"===c)s=0,u-=o;else{var f=Ix(c,i,s,u,n);s+=f.offsetX,a.push(f.path)}}return a}function Ix(e,t,n,r,i){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,u,l,c,f,h,d,p=new Tx;if(o.o)for(var v=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),m=0,g=v.length;m<g;){switch(v[m++]){case"m":a=v[m++]*t+n,s=v[m++]*t+r,p.moveTo(a,s);break;case"l":a=v[m++]*t+n,s=v[m++]*t+r,p.lineTo(a,s);break;case"q":u=v[m++]*t+n,l=v[m++]*t+r,c=v[m++]*t+n,f=v[m++]*t+r,p.quadraticCurveTo(c,f,u,l);break;case"b":u=v[m++]*t+n,l=v[m++]*t+r,c=v[m++]*t+n,f=v[m++]*t+r,h=v[m++]*t+n,d=v[m++]*t+r,p.bezierCurveTo(c,f,h,d,u,l)}}return{offsetX:o.ha*t,path:p}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".")}Px.prototype.isFont=!0;var Lx,Nx=function(){return void 0===Lx&&(Lx=new(window.AudioContext||window.webkitAudioContext)),Lx},jx=function(e){Vc(n,e);var t=Uc(n);function n(e){return(0,Hc.Z)(this,n),t.call(this,e)}return(0,Gc.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,o=new ex(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{var o=n.slice(0);Nx().decodeAudioData(o,(function(e){t(e)}))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)}}]),n}(Jb),Dx=function(e){Vc(n,e);var t=Uc(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(0,Hc.Z)(this,n),i=t.call(this,void 0,o);var a=(new Pd).set(e),s=(new Pd).set(r),u=new lh(a.r,a.g,a.b),l=new lh(s.r,s.g,s.b),c=Math.sqrt(Math.PI),f=c*Math.sqrt(.75);return i.sh.coefficients[0].copy(u).add(l).multiplyScalar(c),i.sh.coefficients[1].copy(u).sub(l).multiplyScalar(f),i}return(0,Gc.Z)(n)}(kx);Dx.prototype.isHemisphereLightProbe=!0;var Bx=function(e){Vc(n,e);var t=Uc(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,Hc.Z)(this,n),r=t.call(this,void 0,i);var o=(new Pd).set(e);return r.sh.coefficients[0].set(o.r,o.g,o.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return(0,Gc.Z)(n)}(kx);Bx.prototype.isAmbientLightProbe=!0;var zx=new Fh,Fx=new Fh,Vx=function(){function e(){(0,Hc.Z)(this,e),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new bp,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new bp,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return(0,Gc.Z)(e,[{key:"update",value:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var n,r,i=e.projectionMatrix.clone(),o=t.eyeSep/2,a=o*t.near/t.focus,s=t.near*Math.tan(Vf*t.fov*.5)/t.zoom;Fx.elements[12]=-o,zx.elements[12]=o,n=-s*t.aspect+a,r=s*t.aspect+a,i.elements[0]=2*t.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(i),n=-s*t.aspect-a,r=s*t.aspect-a,i.elements[0]=2*t.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Fx),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(zx)}}]),e}();var Ux=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).type="Audio",r.listener=e,r.context=e.context,r.gain=r.context.createGain(),r.gain.connect(e.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return(0,Gc.Z)(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(fd),Zx=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;(0,Hc.Z)(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return(0,Gc.Z)(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),Hx=function(){function e(t,n,r){var i,o,a;switch((0,Hc.Z)(this,e),this.binding=t,this.valueSize=r,n){case"quaternion":i=this._slerp,o=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:i=this._lerp,o=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return(0,Gc.Z)(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var u=t,l=t+t;u!==l;++u)if(n[u]!==n[u+t]){a.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]}},{key:"_slerp",value:function(e,t,n,r){uh.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,i){var o=this._workIndex*i;uh.multiplyQuaternionsFlat(e,o,e,t,e,n),uh.slerpFlat(e,t,e,t,e,o,r)}},{key:"_lerp",value:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,i){for(var o=0;o!==i;++o){var a=t+o;e[a]=e[a]+e[n+o]*r}}}]),e}(),Gx="\\[\\]\\.:\\/",Wx=new RegExp("[\\[\\]\\.:\\/]","g"),qx="[^\\[\\]\\.:\\/]",Kx="[^"+Gx.replace("\\.","")+"]",Yx=/((?:WC+[\/:])*)/.source.replace("WC",qx),Xx=/(WCOD+)?/.source.replace("WCOD",Kx),$x=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",qx),Jx=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",qx),Qx=new RegExp("^"+Yx+Xx+$x+Jx+"$"),e_=["material","materials","bones"],t_=function(){function e(t,n,r){(0,Hc.Z)(this,e);var i=r||n_.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,i)}return(0,Gc.Z)(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),n_=function(){function e(t,n,r){(0,Hc.Z)(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return(0,Gc.Z)(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.node[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,o=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var a=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===a){a=s;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==a){if(void 0===t[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[a]}}var u=t[i];if(void 0!==u){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=o}else void 0!==u.fromArray&&void 0!==u.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(c=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var f=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(Wx,"")}},{key:"parseTrackName",value:function(e){var t=Qx.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==e_.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var o=e(i.children);if(o)return o}return null}(e.children);if(r)return r}return null}}]),e}();n_.Composite=t_,n_.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},n_.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},n_.prototype.GetterByBindingType=[n_.prototype._getValue_direct,n_.prototype._getValue_array,n_.prototype._getValue_arrayElement,n_.prototype._getValue_toArray],n_.prototype.SetterByBindingTypeAndVersioning=[[n_.prototype._setValue_direct,n_.prototype._setValue_direct_setNeedsUpdate,n_.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[n_.prototype._setValue_array,n_.prototype._setValue_array_setNeedsUpdate,n_.prototype._setValue_array_setMatrixWorldNeedsUpdate],[n_.prototype._setValue_arrayElement,n_.prototype._setValue_arrayElement_setNeedsUpdate,n_.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[n_.prototype._setValue_fromArray,n_.prototype._setValue_fromArray_setNeedsUpdate,n_.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var r_=function(){function e(){(0,Hc.Z)(this,e),this.uuid=Zf(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}return(0,Gc.Z)(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length,a=void 0,s=e.length,u=this.nCachedObjects_,l=0,c=arguments.length;l!==c;++l){var f=arguments[l],h=f.uuid,d=t[h];if(void 0===d){d=s++,t[h]=d,e.push(f);for(var p=0,v=o;p!==v;++p)i[p].push(new n_(f,n[p],r[p]))}else if(d<u){a=e[d];var m=--u,g=e[m];t[g.uuid]=d,e[d]=g,t[h]=m,e[m]=f;for(var y=0,b=o;y!==b;++y){var x=i[y],_=x[m],w=x[d];x[d]=_,void 0===w&&(w=new n_(f,n[y],r[y])),x[m]=w}}else e[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,l=t[u];if(void 0!==l&&l>=i){var c=i++,f=e[c];t[f.uuid]=l,e[l]=f,t[u]=c,e[c]=s;for(var h=0,d=r;h!==d;++h){var p=n[h],v=p[c],m=p[l];p[l]=v,p[c]=m}}}this.nCachedObjects_=i}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,o=e.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],l=u.uuid,c=t[l];if(void 0!==c)if(delete t[l],c<i){var f=--i,h=e[f],d=--o,p=e[d];t[h.uuid]=c,e[c]=h,t[p.uuid]=f,e[f]=p,e.pop();for(var v=0,m=r;v!==m;++v){var g=n[v],y=g[f],b=g[d];g[c]=y,g[f]=b,g.pop()}}else{var x=--o,_=e[x];x>0&&(t[_.uuid]=c),e[c]=_,e.pop();for(var w=0,S=r;w!==S;++w){var E=n[w];E[c]=E[x],E.pop()}}}this.nCachedObjects_=i}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,l=this.nCachedObjects_,c=new Array(u);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(c);for(var f=l,h=s.length;f!==h;++f){var d=s[f];c[f]=new n_(d,e,t)}return c}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}]),e}();r_.prototype.isAnimationObjectGroup=!0;var i_=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;(0,Hc.Z)(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=i;for(var o=n.tracks,a=o.length,s=new Array(a),u={endingStart:Ef,endingEnd:Ef},l=0;l!==a;++l){var c=o[l].createInterpolant(null);s[l]=c,c.settings=u}this._interpolantSettings=u,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return(0,Gc.Z)(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,i=r.time,o=this.timeScale,a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,u=a.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/o,u[1]=t/o,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0){var u=this._interpolants,l=this._propertyBindings;if(this.blendMode===Cf)for(var c=0,f=u.length;c!==f;++c)u[c].evaluate(a),l[c].accumulateAdditive(s);else for(var h=0,d=u.length;h!==d;++h)u[h].evaluate(a),l[h].accumulate(r,s)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,o=2202===n;if(0===e)return-1===i?r:o&&1===(1&i)?t-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){var a=Math.floor(r/t);r-=t*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1===(1&i))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=kf,r.endingEnd=kf):(r.endingStart=e?this.zeroSlopeAtStart?kf:Ef:Of,r.endingEnd=t?this.zeroSlopeAtEnd?kf:Ef:Of)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}]),e}(),o_=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this))._root=e,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return(0,Gc.Z)(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==i;++c){var f=r[c],h=f.name,d=l[h];if(void 0!==d)o[c]=d;else{if(void 0!==(d=o[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,h));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;++(d=new Hx(n_.create(n,h,p),f.ValueTypeName,f.getValueSize())).referenceCount,this._addInactiveBinding(d,s,h),o[c]=d}a[c].resultBuffer=d.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings,o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Db(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,i=r.uuid,o="string"===typeof e?qb.findByName(r,e):e,a=null!==o?o.uuid:e,s=this._actionsByClip[a],u=null;if(void 0===n&&(n=null!==o?o.blendMode:Af),void 0!==s){var l=s.actionByRoot[i];if(void 0!==l&&l.blendMode===n)return l;u=s.knownActions[0],null===o&&(o=u._clip)}if(null===o)return null;var c=new i_(this,o,t,n);return this._bindAction(c,u),this._addInactiveAction(c,a,i),c}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?qb.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){t[a]._update(r,e,i,o)}for(var s=this._bindings,u=this._nActiveBindings,l=0;l!==u;++l)s[l].apply(o);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(Df);o_.prototype._controlInterpolantsResultBuffer=new Float32Array(1);var a_=function(){function e(t){(0,Hc.Z)(this,e),"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}return(0,Gc.Z)(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}(),s_=function(e){Vc(n,e);var t=Uc(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,Hc.Z)(this,n),(i=t.call(this,e,r)).meshPerAttribute=o,i}return(0,Gc.Z)(n,[{key:"copy",value:function(e){return Bc(jc(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=Bc(jc(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=Bc(jc(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(kg);s_.prototype.isInstancedInterleavedBuffer=!0;var u_=function(){function e(t,n,r,i,o){(0,Hc.Z)(this,e),this.buffer=t,this.type=n,this.itemSize=r,this.elementSize=i,this.count=o,this.version=0}return(0,Gc.Z)(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}();u_.prototype.isGLBufferAttribute=!0;var l_=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;(0,Hc.Z)(this,e),this.ray=new zh(t,n),this.near=r,this.far=i,this.camera=null,this.layers=new $h,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return(0,Gc.Z)(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return f_(e,this,n,t),n.sort(c_),n}},{key:"intersectObjects",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,i=e.length;r<i;r++)f_(e[r],this,n,t);return n.sort(c_),n}}]),e}();function c_(e,t){return e.distance-t.distance}function f_(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var i=e.children,o=0,a=i.length;o<a;o++)f_(i[o],t,n,!0)}var h_=new $f,d_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $f(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $f(-1/0,-1/0);(0,Hc.Z)(this,e),this.min=t,this.max=n}return(0,Gc.Z)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=h_.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return h_.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();d_.prototype.isBox2=!0;var p_=new lh,v_=new lh,m_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new lh,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lh;(0,Hc.Z)(this,e),this.start=t,this.end=n}return(0,Gc.Z)(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){p_.subVectors(e,this.start),v_.subVectors(this.end,this.start);var n=v_.dot(v_),r=v_.dot(p_)/n;return t&&(r=Hf(r,0,1)),r}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();(function(e){Vc(n,e);var t=Uc(n);function n(e){var r;return(0,Hc.Z)(this,n),(r=t.call(this)).material=e,r.render=function(){},r.hasPositions=!1,r.hasNormals=!1,r.hasColors=!1,r.hasUvs=!1,r.positionArray=null,r.normalArray=null,r.colorArray=null,r.uvArray=null,r.count=0,r}return(0,Gc.Z)(n)})(fd).prototype.isImmediateRenderObject=!0;var g_=new lh,y_=new Fh,b_=new Fh,x_=function(e){Vc(n,e);var t=Uc(n);function n(e){var r;(0,Hc.Z)(this,n);for(var i=__(e),o=new qd,a=[],s=[],u=new Pd(0,0,1),l=new Pd(0,1,0),c=0;c<i.length;c++){var f=i[c];f.parent&&f.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),s.push(u.r,u.g,u.b),s.push(l.r,l.g,l.b))}o.setAttribute("position",new Bd(a,3)),o.setAttribute("color",new Bd(s,3));var h=new ry({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(r=t.call(this,o,h)).type="SkeletonHelper",r.isSkeletonHelper=!0,r.root=e,r.bones=i,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r}return(0,Gc.Z)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,r=this.geometry,i=r.getAttribute("position");b_.copy(this.root.matrixWorld).invert();for(var o=0,a=0;o<t.length;o++){var s=t[o];s.parent&&s.parent.isBone&&(y_.multiplyMatrices(b_,s.matrixWorld),g_.setFromMatrixPosition(y_),i.setXYZ(a,g_.x,g_.y,g_.z),y_.multiplyMatrices(b_,s.parent.matrixWorld),g_.setFromMatrixPosition(y_),i.setXYZ(a+1,g_.x,g_.y,g_.z),a+=2)}r.getAttribute("position").needsUpdate=!0,Bc(jc(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(hy);function __(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,__(e.children[n]));return t}var w_=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;(0,Hc.Z)(this,n),o=new Pd(o),a=new Pd(a);for(var s=i/2,u=r/i,l=r/2,c=[],f=[],h=0,d=0,p=-l;h<=i;h++,p+=u){c.push(-l,0,p,l,0,p),c.push(p,0,-l,p,0,l);var v=h===s?o:a;v.toArray(f,d),d+=3,v.toArray(f,d),d+=3,v.toArray(f,d),d+=3,v.toArray(f,d),d+=3}var m=new qd;m.setAttribute("position",new Bd(c,3)),m.setAttribute("color",new Bd(f,3));var g=new ry({vertexColors:!0,toneMapped:!1});return(e=t.call(this,m,g)).type="GridHelper",e}return(0,Gc.Z)(n)}(hy);var S_=function(e){Vc(n,e);var t=Uc(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,Hc.Z)(this,n);var i=[0,0,0,r,0,0,0,0,0,0,r,0,0,0,0,0,0,r],o=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new qd;a.setAttribute("position",new Bd(i,3)),a.setAttribute("color",new Bd(o,3));var s=new ry({vertexColors:!0,toneMapped:!1});return(e=t.call(this,a,s)).type="AxesHelper",e}return(0,Gc.Z)(n,[{key:"setColors",value:function(e,t,n){var r=new Pd,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(hy),E_=new Float32Array(1);new Int32Array(E_.buffer);Oy.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Oy.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},ox.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},w_.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},x_.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Jb.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Ox.extractUrlBase(e)},Jb.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},d_.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},d_.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},d_.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},d_.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},hh.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},hh.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},hh.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},hh.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},hh.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},Ph.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Tp.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},m_.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Qf.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Qf.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},Qf.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Qf.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},Qf.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Qf.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Fh.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},Fh.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Fh.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new lh).setFromMatrixColumn(this,3)},Fh.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},Fh.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Fh.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Fh.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Fh.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Fh.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},Fh.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Fh.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Fh.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Fh.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Fh.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Fh.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Fh.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Fh.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Fh.prototype.makeFrustum=function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)},Fh.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Ap.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},uh.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},uh.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},zh.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},zh.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},zh.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},wd.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},wd.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},wd.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},wd.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},wd.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},wd.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),wd.getBarycoord(e,t,n,r,i)},wd.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),wd.getNormal(e,t,n,r)},ax.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},ax.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new _b(this,e)},ax.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Sb(this,e)},$f.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},$f.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},$f.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},lh.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},lh.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},lh.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},lh.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},lh.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},lh.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},lh.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lh.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lh.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ih.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},ih.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},fd.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},fd.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},fd.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},fd.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},fd.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(fd.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),fp.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(fp.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Yg.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},bp.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(sx.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Nd.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Nf},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Nf)}}}),Nd.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Nf:Lf),this},Nd.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Nd.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},qd.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},qd.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Nd(arguments[1],arguments[2])))},qd.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},qd.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},qd.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},qd.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},qd.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(qd.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),kg.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Nf:Lf),this},kg.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},_b.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},_b.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},_b.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Eg.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},a_.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Ed.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Pd}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(gp.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),xg.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},xg.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},xg.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},xg.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},xg.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},xg.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},xg.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},xg.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},xg.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},xg.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},xg.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},xg.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},xg.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},xg.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},xg.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},xg.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},xg.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},xg.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},xg.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},xg.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},xg.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},xg.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},xg.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},xg.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},xg.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(xg.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?Tf:Mf}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(lg.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(oh.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Ux.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new jx).load(e,(function(e){t.setBuffer(e)})),this},Zx.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},_p.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},_p.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},eh.crossOrigin=void 0,eh.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new rx;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},eh.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new nx;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},eh.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},eh.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function k_(e){return k_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k_(e)}function O_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C_(e,t,n){return t&&A_(e.prototype,t),n&&A_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function M_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T_(e,t){return T_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},T_(e,t)}function P_(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&T_(e,t)}function R_(e,t){if(t&&("object"===k_(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return M_(e)}function I_(e){return I_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},I_(e)}function L_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N_(e,t){if(e){if("string"===typeof e)return L_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L_(e,t):void 0}}function j_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||N_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"131"}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="131");var D_=function(){return D_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},D_.apply(this,arguments)},B_={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},z_=function(){function e(e){void 0===e&&(e={}),this.opts=D_(D_({},B_),e)}return e.prototype.spin=function(e){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),F_(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),e&&e.insertBefore(this.el,e.firstChild||null),function(e,t){var n=Math.round(t.corners*t.width*500)/1e3+"px",r="none";!0===t.shadow?r="0 2px 4px #000":"string"===typeof t.shadow&&(r=t.shadow);for(var i=function(e){for(var t=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,n=[],r=0,i=e.split(",");r<i.length;r++){var o=i[r].match(t);if(null!==o){var a=+o[2],s=+o[5],u=o[4],l=o[7];0!==a||u||(u=l),0!==s||l||(l=u),u===l&&n.push({prefix:o[1]||"",x:a,y:s,xUnits:u,yUnits:l,end:o[8]})}}return n}(r),o=0;o<t.lines;o++){var a=~~(360/t.lines*o+t.rotate),s=F_(document.createElement("div"),{position:"absolute",top:-t.width/2+"px",width:t.length+t.width+"px",height:t.width+"px",background:V_(t.fadeColor,o),borderRadius:n,transformOrigin:"left",transform:"rotate("+a+"deg) translateX("+t.radius+"px)"}),u=o*t.direction/t.lines/t.speed;u-=1/t.speed;var l=F_(document.createElement("div"),{width:"100%",height:"100%",background:V_(t.color,o),borderRadius:n,boxShadow:U_(i,a),animation:1/t.speed+"s linear "+u+"s infinite "+t.animation});s.appendChild(l),e.appendChild(s)}}(this.el,this.opts),this},e.prototype.stop=function(){return this.el&&("undefined"!==typeof requestAnimationFrame?cancelAnimationFrame(this.animateId):clearTimeout(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},e}();function F_(e,t){for(var n in t)e.style[n]=t[n];return e}function V_(e,t){return"string"==typeof e?e:e[t%e.length]}function U_(e,t){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r],a=Z_(o.x,o.y,t);n.push(o.prefix+a[0]+o.xUnits+" "+a[1]+o.yUnits+o.end)}return n.join(", ")}function Z_(e,t,n){var r=n*Math.PI/180,i=Math.sin(r),o=Math.cos(r);return[Math.round(1e3*(e*o+t*i))/1e3,Math.round(1e3*(-e*i+t*o))/1e3]}var H_=function(){function e(){O_(this,e),this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return C_(e,[{key:"start",value:function(){this.startTime=e.now(),this.oldTime=this.startTime,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1}},{key:"getElapsedTime",value:function(){return this.update(),this.elapsedTime}},{key:"update",value:function(){var t=0;if(this.running){var n=e.now();t=.001*(n-this.oldTime),this.oldTime=n,this.elapsedTime+=t}return t}}]),e}();H_.now=function(){var e="undefined"!==typeof window&&window.performance;return e&&e.now?e.now.bind(e):Date.now}();var G_=H_.now;function W_(e,t,n){var r=document.createElement(e);return r.id=t,r.style.cssText=n,r}var q_=function(){function e(){O_(this,e),this.domElement=W_("div","stats","padding:8px"),this._text=W_("p","fps","margin:0;color:silver;font-size:large"),this.domElement.appendChild(this._text),this._startTime=G_(),this._prevTime=this._startTime,this._deltas=new Array(20),this._index=0,this._total=0,this._count=0}return C_(e,[{key:"end",value:function(){var e=G_(),t=e-this._startTime;return this._count<this._deltas.length?this._count++:this._total-=this._deltas[this._index],this._total+=t,this._deltas[this._index]=t,this._index=(this._index+1)%this._deltas.length,this.ms=this._total/this._count,this.fps=1e3/this.ms,e>this._prevTime+1e3&&(this._text.textContent=this.fps.toPrecision(2),this._prevTime=e),e}},{key:"update",value:function(){this._startTime=this.end()}},{key:"show",value:function(e){void 0===e&&(e=!0),this.domElement.style.display=e?"block":"none"}}]),e}();function K_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Y_(e,t,n){return Y_=K_()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&T_(i,n.prototype),i},Y_.apply(null,arguments)}function X_(e){var t="function"===typeof Map?new Map:void 0;return X_=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Y_(e,arguments,I_(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),T_(r,e)},X_(e)}function $_(e,t){return!e||e===t}function J_(){this._handlers={}}J_.prototype.addEventListener=function(e,t,n){var r=this._handlers[e];r||(this._handlers[e]=[],r=this._handlers[e]);var i=[t,n];void 0===(0,R.find)(r,(function(e){return e[0]===i[0]&&e[1]===i[1]}))&&r.push(i)},J_.prototype.removeEventListener=function(e,t,n){var r=this;(0,R.forEach)(r._handlers,(function(i,o){(0,R.remove)(i,(function(i){return $_(e,o)&&$_(t,i[0])&&$_(n,i[1]||r)}))})),this._handlers=(0,R.omitBy)(r._handlers,(function(e){return 0===e.length}))},J_.prototype.dispatchEvent=function(e){var t=this;(0,R.forEach)(this._handlers[e.type],(function(n){var r=n[1]||t;n[0].apply(r,[e])}))};var Q_={debug:0,info:1,report:2,warn:3,error:4};function ew(){J_.call(this),this.console=!1,this._priority=Q_.warn}function tw(e){if(!(0,R.isNumber)(e))throw new Error("Wrong log level specified!");return e}ew.prototype=Object.create(J_.prototype),ew.prototype.constructor=ew,ew.prototype.instantiate=function(){return new ew},Object.defineProperty(ew.prototype,"level",{get:function(){var e=this;return(0,R.findKey)(Q_,(function(t){return t===e._priority}))},set:function(e){this._priority=tw(Q_[e])}}),ew.prototype.levels=function(){return Object.keys(Q_)},ew.prototype.message=function(e,t){var n=tw(Q_[e]);this._message(n,t)},ew.prototype.debug=function(e){this._message(Q_.debug,e)},ew.prototype.info=function(e){this._message(Q_.info,e)},ew.prototype.report=function(e){this._message(Q_.report,e)},ew.prototype.warn=function(e){this._message(Q_.warn,e)},ew.prototype.error=function(e){this._message(Q_.error,e)},ew.prototype._message=function(e,t){if(!(e<this._priority)){var n=(0,R.findKey)(Q_,(function(t){return t===e}));if(t=String(t),this.console){var r="miew:".concat(n,": ").concat(t);"error"===n?console.error(r):"warn"===n?console.warn(r):console.log(r)}this.dispatchEvent({type:"message",level:n,message:t})}};var nw=new ew;function rw(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var iw={DEFAULT:0,SAFARI:1};function ow(e){return decodeURIComponent(e.replace(/\+/g," "))}function aw(e){for(var t,n=(e=e||window.location.search).substring(e.indexOf("?")+1),r=/([^&=]+)=?([^&]*)/g,i=[];null!==(t=r.exec(n));)i.push([ow(t[1]),ow(t[2])]);return i}function sw(e){var t=!1;this.enable=function(e){t=e};var n=0,r=Object.keys(e);function i(e,r){return function(){var i=sw.spaces.substr(0,2*n);t&&nw.debug("".concat(i+r," {")),n++;for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=e.apply(this,a);return n--,t&&nw.debug("".concat(i,"} // ").concat(r)),u}}for(var o=0,a=r.length;o<a;++o){var s=r[o],u=e[s];u instanceof Function&&"constructor"!==s&&(e[s]=i(u,s))}}sw.spaces="                                                                                          ";var uw=function(e){P_(n,e);var t=rw(n);function n(e){var r;return O_(this,n),(r=t.call(this)).name="OutOfMemoryError",r.message=e,r}return C_(n)}(X_(Error));function lw(e){for(var t=new Uint8Array(e),n="",r=0;r<t.byteLength;r++)n+=String.fromCharCode(t[r]);return window.btoa(n)}function cw(e){for(var t=window.atob(e),n=new Uint8Array(t.length),r=0;r<n.length;++r)n[r]=t[r].charCodeAt(0);return n.buffer}function fw(e){if((0,R.isPlainObject)(e))return!0;var t=e&&Object.getPrototypeOf(e);return!!t&&!t.hasOwnProperty("constructor")&&fw(t)}function hw(e){return e.slice(Math.max(0,e.lastIndexOf("."))||1/0)}function dw(e){var t=e.split(/[:;,]/),n=t.length;return n>=3&&"base64"===t[n-2]?new Blob([cw(t[n-1])]):null}var pw=/^[a-zA-Z0-9_]*$/,vw=['"',"",'"'];var mw={browserType:iw,encodeQueryComponent:function(e,t){return encodeURIComponent(e).replace(t,(function(e){return String.fromCharCode(parseInt(e.substr(1),16))})).replace(/%20/g,"+")},decodeQueryComponent:ow,getUrlParameters:aw,getUrlParametersAsDict:function(e){for(var t={},n=aw(e),r=0;r<n.length;++r){var i=j_(n[r],2),o=i[0],a=i[1];t[o]=a}return t},resolveURL:function(e){if("undefined"!==typeof URL)try{return"undefined"!==typeof window?new URL(e,window.location).href:new URL(e).href}catch(n){}if("undefined"!==typeof document){var t=document.createElement("a");return t.href=e,t.href}return e},generateRegExp:function(e){for(var t=[],n=0,r=e.length;n<r;++n)t[t.length]=e[n].charCodeAt(0).toString(16);var i=t.join("|");return new RegExp("%(?:".concat(i,")"),"gi")},createElement:function(e,t,n){var r,i,o=document.createElement(e);if(t){var a=Object.keys(t);for(r=0,i=a.length;r<i;++r){var s=a[r];o.setAttribute(s,t[s])}}if(n)for(n instanceof Array||(n=[n]),r=0,i=n.length;r<i;++r){var u=n[r];"string"===typeof u?o.appendChild(document.createTextNode(u)):u instanceof HTMLElement&&o.appendChild(u)}return o},deriveClass:function(e,t,n,r){return e.prototype=(0,R.assign)(Object.create(t.prototype),{constructor:e},n),r&&(0,R.assign)(e,r),e},deriveDeep:function e(t,n){var r,i,o=t;if(t instanceof Array)for(o=new Array(t.length),r=0,i=t.length;r<i;++r)o[r]=e(t[r]);else if(t instanceof Object){o=Object.create(t);var a=Object.keys(t);for(r=0,i=a.length;r<i;++r){var s=a[r],u=t[s],l=e(u);l!==u&&(o[s]=l)}n&&Object.keys(o).length>0&&(o=Object.create(o))}return o},hexColor:function(e){var t="0000000".concat(e.toString(16)).substr(-6);return"#".concat(t)},DebugTracer:sw,OutOfMemoryError:uw,allocateTyped:function(e,t){var n=null;try{n=new e(t)}catch(r){throw r instanceof RangeError?new uw(r.message):r}return n},bytesFromBase64:cw,bytesToBase64:lw,arrayFromBase64:function(e,t){return Array.prototype.slice.call(new t(cw(e)))},arrayToBase64:function(e,t){return lw(new t(e).buffer)},compareOptionsWithDefaults:function(e,t){var n=[];if(t&&e){for(var r=Object.keys(e),i=0;i<r.length;++i){var o=r[i],a=e[o];a instanceof Object||"undefined"===typeof t[o]||t[o]===a||n.push("".concat(o,":").concat(a))}if(n.length>0)return"!".concat(n.join())}return""},objectsDiff:function e(t,n){var r={};return(0,R.forIn)(t,(function(t,i){var o=n[i];if(fw(t)&&fw(o)){var a=e(t,o);(0,R.isEmpty)(a)||(r[i]=a)}else(0,R.isEqual)(t,o)||(r[i]=t)})),r},forInRecursive:function(e,t){!function e(n,r){(0,R.forIn)(n,(function(n,i){var o=r+(r.length>0?".":"");n instanceof Object?e(n,o+i):void 0!==n&&t(n,o+i)}))}(e,"")},enquoteString:function(e){return(0,R.isString)(e)?'"'.concat(e.replace(/"/g,'\\"'),'"'):e},unquoteString:function(e){if(!(0,R.isString)(e))return e;if('"'===e[0]&&'"'===e[e.length-1])return(e=e.slice(1,e.length-1)).replace(/\\"/g,'"');if("'"===e[0]&&"'"===e[e.length-1])return(e=e.slice(1,e.length-1)).replace(/\\'/g,"'");throw new SyntaxError("Incorrect string format, can't unqute it")},getBrowser:function(){return navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1===navigator.userAgent.indexOf("CriOS")&&-1===navigator.userAgent.indexOf("FxiOS")?iw.SAFARI:iw.DEFAULT},shotOpen:function(e){"undefined"!==typeof window&&window.open().document.write('<body style="margin:0"><img src="'.concat(e,'" /></body>'))},shotDownload:function(e,t){if(e&&"data:"===e.substr(0,5))if(t||(t=["screenshot-",+new Date,".png"].join("")),"undefined"!==typeof window&&window.navigator&&window.navigator.msSaveBlob)window.navigator.msSaveBlob(dw(e),t);else if("undefined"!==typeof document){var n=document.createElement("a");n.download=t,n.innerHTML="download",n.href=window.URL.createObjectURL(dw(e)),document.body.appendChild(n),n.click(),document.body.removeChild(n)}},copySubArrays:function(e,t,n,r){for(var i=0,o=n.length;i<o;++i)for(var a=0;a<r;++a)t[i*r+a]=e[n[i]*r+a]},shallowCloneNode:function(e){var t=e.cloneNode(!0);return t.worldPos=e.worldPos,t},correctSelectorIdentifier:function(e){return pw.test(e)?e:(vw[1]=e,vw.join(""))},getFileExtension:hw,splitFileName:function(e){var t=hw(e);return[e.slice(0,e.length-t.length),t]},download:function(e,t,n){var r=new Blob([e]);if(t||(t=["data",+new Date].join("")),t+=n?".".concat(n):r.type||".bin","undefined"!==typeof window&&window.navigator&&window.navigator.msSaveBlob)window.navigator.msSaveBlob(r,t);else if("undefined"!==typeof document){var i=document.createElement("a");i.download=t,i.innerHTML="download",i.href=window.URL.createObjectURL(r),document.body.appendChild(i),i.click(),document.body.removeChild(i)}},concatTypedArraysUnsafe:function(e,t){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n},mergeTypedArraysUnsafe:function(e){if(e.length<=0)return null;for(var t=e.reduce((function(e,t){return e+t.length}),0),n=new e[0].constructor(t),r=0,i=0;r<e.length;r++){var o=e[r].length;n.set(e[r],i),i+=o}return n}};function gw(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var yw=function(e){P_(n,e);var t=gw(n);function n(){var e;return O_(this,n),(e=t.call(this))._shouldCancel=!1,e}return C_(n,[{key:"cancel",value:function(){this._shouldCancel=!0,this.dispatchEvent({type:"cancel"})}},{key:"shouldCancel",value:function(){return this._shouldCancel}},{key:"notify",value:function(e){this.dispatchEvent({type:"notification",slaveEvent:e})}}]),n}(J_),bw={modes:{BS:{atom:.23,bond:.15,space:.5,multibond:!0,aromrad:.1,showarom:!0,polyComplexity:{poor:3,low:4,medium:6,high:12,ultra:32}},VW:{polyComplexity:{poor:4,low:6,medium:8,high:16,ultra:32}},LN:{multibond:!0,showarom:!0,offsarom:.2,chunkarom:10,atom:.23,lineWidth:2},LC:{bond:.2,space:0,multibond:!0,aromrad:.1,showarom:!0,polyComplexity:{poor:3,low:4,medium:6,high:12,ultra:32}},SA:{zClip:!1,probeRadius:1.5,subset:"",wireframe:!1,polyComplexity:{poor:6,low:8,medium:16,high:30,ultra:60}},SE:{zClip:!1,probeRadius:1.5,subset:"",wireframe:!1,polyComplexity:{poor:6,low:8,medium:16,high:30,ultra:60}},QS:{isoValue:.5,gaussLim:{poor:1.5,low:2,medium:2.5,high:3,ultra:4},scale:1,wireframe:!1,gridSpacing:{poor:2,low:1.5,medium:1,high:.5,ultra:.25},subset:"",zClip:!1},CS:{probeRadius:1.4,isoValue:1.5,wireframe:!1,probePositions:30,polyComplexity:{poor:.5,low:1,medium:1.5,high:1.75,ultra:2},subset:"",zClip:!1},TR:{radius:.3,polyComplexity:{poor:12,low:16,medium:32,high:64,ultra:64}},TU:{radius:.3,heightSegmentsRatio:1.5,tension:-.7,polyComplexity:{poor:4,low:6,medium:10,high:18,ultra:34}},CA:{radius:.3,depth:.25,ss:{helix:{width:1,arrow:2},strand:{width:1,arrow:2}},heightSegmentsRatio:1.5,tension:-.7,polyComplexity:{poor:4,low:6,medium:10,high:18,ultra:34}},TX:{template:"{{Chain}}.{{Residue}}{{Sequence}}.{{Name}}",horizontalAlign:"center",verticalAlign:"middle",dx:0,dy:0,dz:1,fg:"none",bg:"0x202020",showBg:!0},VD:{kSigma:1,kSigmaMed:2,kSigmaMax:4,frame:!0,isoMode:!1,polyComplexity:{poor:2,low:3,medium:4,high:8,ultra:10}}},colorers:{EL:{carbon:-1},UN:{color:16777215},CO:{subset:"charged",color:16711680,baseColor:16777215},CB:{color:9474192,factor:.6},SQ:{gradient:"rainbow"},TM:{gradient:"temp",min:5,max:40},OC:{gradient:"reds"},HY:{gradient:"blue-red"},MO:{gradient:"rainbow"}},antialias:!0,camFov:45,camNear:.5,camFar:100,camDistance:2.5,radiusToFit:1,fogNearFactor:.5,fogFarFactor:1,fogAlpha:1,fogColor:0,fogColorEnable:!1,palette:"JM",resolution:"medium",autoResolution:!1,autoPreset:!0,preset:"default",presets:{default:[{mode:"BS",colorer:"EL",selector:"all",material:"SF"}],empty:[],wire:[{mode:"LN",colorer:"EL",selector:"all",material:"SF"}],small:[{mode:"BS",colorer:"EL",selector:"all",material:"SF"}],macro:[{mode:"CA",colorer:"SS",selector:"not hetatm",material:"SF"},{mode:"BS",colorer:"EL",selector:"hetatm and not water",material:"SF"}]},objects:{line:{color:4294967295,dashSize:.3,gapSize:.05}},bg:{color:2105376,transparent:!1},draft:{clipPlane:!1,clipPlaneFactor:.5,clipPlaneSpeed:3e-5},plugins:{},axes:!0,fog:!0,fps:!0,zSprites:!0,isoSurfaceFakeOpacity:!0,suspendRender:!0,nowater:!1,autobuild:!0,fxaa:!0,outline:{on:!1,color:0,threshold:.1,thickness:1},ao:!1,shadow:{on:!1,type:"random",radius:1},autoRotation:0,maxfps:30,fbxprec:4,autoRotationAxisFixed:!0,zooming:!0,picking:!0,pick:"atom",editing:!1,aromatic:!1,singleUnit:!0,stereo:"NONE",interpolateViews:!0,transparency:"prepass",translationSpeed:2,debug:{example:3.5,text:"hello!",good:!0,ssaoKernelRadius:.7,ssaoFactor:.7,stereoBarrel:.25},use:{multiFile:!1}};function xw(){J_.call(this),this.old=null,this.now={},this._changed={},this.reset()}mw.deriveClass(xw,J_,{defaults:bw,set:function(e,t){if((0,R.isString)(e)){(0,R.get)(this.now,e)!==t&&((0,R.set)(this.now,e,t),this._notifyChange(e,t))}else{var n=mw.objectsDiff(e,this.now);(0,R.isEmpty)(n)||((0,R.merge)(this.now,n),this._notifyChanges(n))}},get:function(e,t){return(0,R.get)(this.now,e,t)},reset:function(){var e=mw.objectsDiff(bw,this.now);this.now=(0,R.cloneDeep)(bw),this.old=null,this._notifyChanges(e),this._changed={}},checkpoint:function(){this.old=(0,R.cloneDeep)(this.now),this._changed={}},_notifyChange:function(e,t){this._changed[e]=!0,this.dispatchEvent({type:"change:".concat(e),value:t})},_notifyChanges:function(e){var t=this;mw.forInRecursive(e,(function(e,n){t._notifyChange(n,e)}))},changed:function(){if(!this.old)return[];var e=this.old,t=this.now;return(0,R.filter)(Object.keys(this._changed),(function(n){return(0,R.get)(e,n)!==(0,R.get)(t,n)}))},applyDiffs:function(e){if(e.hasOwnProperty("VERSION")&&0!==e.VERSION)throw new Error("Settings version does not match!");delete e.VERSION,this.reset(),this.set(e)},getDiffs:function(e){var t=mw.objectsDiff(this.now,bw);return e&&(t.VERSION=0),t},setPluginOpts:function(e,t){bw.plugins[e]=(0,R.cloneDeep)(t),this.now.plugins[e]=(0,R.cloneDeep)(t)}});var _w=new xw,ww=0;function Sw(e){return!(!e||"0"===e||(0,R.isString)(e)&&"false"===e.toLowerCase())}var Ew={string:String,number:Number,boolean:Sw};var kw=mw.generateRegExp("$;@/?:,");function Ow(e){return mw.encodeQueryComponent(e,kw)}var Aw=mw.generateRegExp("$;@/? ");function Cw(e){return mw.encodeQueryComponent(e,Aw)}function Mw(e){var t=e.reps;if(!t){var n=_w.now.presets,r=e.preset||_w.now.preset;if(!(t=n[r]))nw.warn('Unknown preset "'.concat(r,'"')),t=n[r=j_(Object.keys(n),1)[0]];e.preset=r,e.reps=mw.deriveDeep(t,!0)}}function Tw(e,t,n){Mw(e);var r=e.reps[ww];r.hasOwnProperty(t)&&(ww=e.reps.length,e.reps[ww]=mw.deriveDeep(r,!0)),void 0!==n&&(e.reps[ww][t]=n)}function Pw(e,t,n){if(e){var r=e.indexOf("!"),i=function(e,t){var n=e.indexOf(",");return n>=0?(t.push(e.substr(n+1).split(",")),e.substr(0,n)):e}(e.substr(0,r>=0?r:void 0),n);if(r>=0){var o=e.substr(r+1).split(",");if(e=i,t){var a=t[e],s=mw.deriveDeep(a,!0);o.forEach((function(t){var n=t.split(":",2),r=decodeURIComponent(n[0]),i=decodeURIComponent(n[1]),o=Ew[k_((0,R.get)(a,r))];o?(0,R.set)(s,r,o(i)):nw.warn('Unknown argument "'.concat(r,'" for option "').concat(e,'"'))})),Object.keys(s).length>0&&(e=[e,s])}}else e=i}return e}var Rw={l:"load",load:String,t:"type",type:String,v:"view",view:String,u:"unit",unit:Number,menu:Sw,o:"object",object:function(e,t){var n=[],r=Pw(e,_w.defaults.objects,n);Array.isArray(r)||(r=[r]),function(e,t,n){void 0===e._objects&&(e._objects=[]);var r=j_(n,2),i=r[0],o=r[1],a={type:i,params:t};void 0!==o&&(a.opts=o),e._objects[e._objects.length]=a}(t,n[0],r)},p:"preset",preset:function(e,t){t.preset=e,t.reps=null,Mw(t)},r:"rep",rep:function(e,t){Mw(t),(ww=(ww=Number(e))<=t.reps.length?ww<0?0:ww:t.reps.length)===t.reps.length&&(t.reps[ww]=ww>0?mw.deriveDeep(t.reps[ww-1],!0):mw.deriveDeep(_w.defaults.presets.default[0],!0))},s:"select",select:function(e,t){Tw(t,"selector",e)},m:"mode",mode:function(e,t){Tw(t,"mode",Pw(e,_w.defaults.modes))},c:"color",color:function(e,t){Tw(t,"colorer",Pw(e,_w.defaults.colorers))},mt:"material",material:function(e,t){Tw(t,"material",Pw(e,_w.defaults.materials))},dup:function(e,t){Mw(t);var n=t.reps,r=n[ww];n[ww=n.length]=mw.deriveDeep(r,!0)},ar:"autoResolution"};function Iw(e){ww=0;for(var t={},n=0,r=e.length;n<r;++n){var i=e[n],o=i[0],a=i[1];if(Rw.hasOwnProperty(o)){for(var s=Rw[o];(0,R.isString)(s);)s=Rw[o=s];if("function"===typeof s){var u=s(a,t);void 0!==u&&(t[o]=u)}}else{var l=Ew[k_((0,R.get)(_w.defaults,o))];l?(0,R.set)(t,"settings.".concat(o),l(a)):nw.warn('Unknown option "'.concat(o,'"'))}}return t}function Lw(e){var t=[],n=0;return mw.forInRecursive(e,(function(e,r){t[n++]=Cw(r)+":"+Cw(e)})),t.join(",")}function Nw(e){return(0,R.isArray)(e)?e.length<2?e[0]:"".concat(e[0]).concat("!").concat(Lw(e[1])):e}function jw(e){if(e&&e.type){var t=e.type;return(0,R.isArray)(e.params)&&e.params.length>0&&(t+=",".concat(e.params.join(","))),e.opts&&(t+="!"+Lw(e.opts)),t}}function Dw(e){var t=[],n=0;return mw.forInRecursive(e,(function(e,r){t[n++]="".concat(r,"=").concat(mw.enquoteString(e))})),t.join(" ")}function Bw(e){return(0,R.isArray)(e)?e.length<2?e[0]:"".concat(e[0]," ").concat(Dw(e[1])):e}function zw(e){if(e&&e.type){var t=e.type;return(0,R.isArray)(e.params)&&e.params.length>0&&(t+=" ".concat(e.params.map(mw.enquoteString).join(" "))),e.opts&&(t+=" ".concat(Dw(e.opts))),t}}function Fw(e,t){var n=[],r=0;function i(e,t){null!==t&&void 0!==t&&(n[r++]=e+t)}return(0,R.isEmpty)(e)?null:(i("",t),i("s=",mw.enquoteString(e.selector)),i("m=",Bw(e.mode)),i("c=",Bw(e.colorer)),i("mt=",Bw(e.material)),n.join(" "))}var Vw={fromURL:function(e){return Iw(mw.getUrlParameters(e))},fromAttr:function(e){return Iw(mw.getUrlParameters("?".concat(e||"")))},adapters:Ew,toURL:function(e){var t=[],n=0;function r(e,r){null!==r&&void 0!==r&&(t[n++]=Ow(e)+"="+Ow(r))}r("l",e.load),r("u",e.unit),r("p",e.preset),function(e){if(e)for(var t=0,n=e.length;t<n;++t)(0,R.isEmpty)(e[t])||(r("r",t),r("s",e[t].selector),r("m",Nw(e[t].mode)),r("c",Nw(e[t].colorer)),r("mt",Nw(e[t].material)))}(e.reps),function(e){if(e)for(var t=0,n=e.length;t<n;++t)r("o",jw(e[t]))}(e._objects),r("v",e.view),mw.forInRecursive(e.settings,(function(e,t){"preset"!==t&&r(t,e)}));var i="";if("undefined"!==typeof window){var o=window.location;i="".concat(o.protocol,"//").concat(o.host).concat(o.pathname)}return t.length>0&&(i+="?".concat(t.join("&"))),i},toScript:function(e){var t=[],n=0;function r(e,r,i){if(null!==r&&void 0!==r){var o="string"===typeof r&&i?'"':"";t[n++]="".concat(e," ").concat(o).concat(r).concat(o).trim()}}return r("set","autobuild false"),r("load",e.load,!0),r("unit",e.unit),r("preset",e.preset),function(e){if(e)for(var t=0,n=e.length;t<n;++t)r("rep",Fw(e[t],t))}(e.reps),function(e){if(e)for(var t=0,n=e.length;t<n;++t)r("",zw(e[t]))}(e._objects),mw.forInRecursive(e.settings,(function(e,t){"preset"!==t&&r("set ".concat(t),e,!0)})),r("view",e.view),r("set","autobuild true"),t.join("\n")}};function Uw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zw=function(){function e(t,n,r,i,o,a,s,u,l,c,f){O_(this,e),this.index=-1,this.residue=t,this.name=n,this.element=r,this.position=i,this.role=o,this.mask=1,this.het=a,this.serial=s,this.location=(u||" ").charCodeAt(0),this.occupancy=l||1,this.temperature=c,this.charge=f,this.hydrogenCount=-1,this.radicalCount=0,this.valence=-1,this.bonds=[],this.flags=0,"H"===r.name?this.flags|=e.Flags.HYDROGEN:"C"===r.name&&(this.flags|=e.Flags.CARBON)}return C_(e,[{key:"isHet",value:function(){return this.het}},{key:"isHydrogen",value:function(){return 1===this.element.number}},{key:"getVisualName",value:function(){var e=this.name;return e.length>0?e:this.element.name.trim()}},{key:"forEachBond",value:function(e){for(var t=this.bonds,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"getFullName",value:function(){var e="";return null!==this.residue&&(null!==this.residue._chain&&(e+="".concat(this.residue._chain.getName(),".")),e+="".concat(this.residue._sequence,".")),e+=this.name}}]),e}();Uw(Zw,"Flags",{CARBON:1,HYDROGEN:8,NONPOLARH:4104});var Hw=C_((function e(t,n,r,i,o,a,s){O_(this,e),this.number=t,this.name=n,this.fullName=r,this.weight=i,this.radius=o,this.radiusBonding=a,this.hydrogenValency=s}));Uw(Hw,"Constants",{U1:1,Lead:2,U2:3,Wing:4,U18:18}),Uw(Hw,"Role",{N:Hw.Constants.U1,CA:Hw.Constants.Lead,C:Hw.Constants.U2,O:Hw.Constants.Wing,SG:Hw.Constants.U18}),Uw(Hw,"ByAtomicNumber",[null,new Hw(1,"H","Hydrogen",1.008,1.2,.23,[1]),new Hw(2,"HE","Helium",4.003,1.4,.93,[0]),new Hw(3,"LI","Lithium",6.941,1.82,.68,[1]),new Hw(4,"BE","Beryllium",9.012,1.7,.35,[2]),new Hw(5,"B","Boron",10.81,2.08,.83,[3]),new Hw(6,"C","Carbon",12.011,1.95,.68,[4]),new Hw(7,"N","Nitrogen",14.007,1.85,.68,[3,5]),new Hw(8,"O","Oxygen",15.999,1.7,.68,[2,4]),new Hw(9,"F","Fluorine",18.998,1.73,.64,[1]),new Hw(10,"NE","Neon",20.18,1.54,1.12,[0]),new Hw(11,"NA","Sodium",22.99,2.27,.97,[1]),new Hw(12,"MG","Magnesium",24.305,1.73,1.1,[2]),new Hw(13,"AL","Aluminum",26.981,2.05,1.35,[3]),new Hw(14,"SI","Silicon",28.086,2.1,1.2,[4]),new Hw(15,"P","Phosphorus",30.974,2.08,.75,[3,5]),new Hw(16,"S","Sulfur",32.07,2,1.02,[2,4,6]),new Hw(17,"CL","Chlorine",35.453,1.97,.99,[1,3,5,7]),new Hw(18,"AR","Argon",39.948,1.88,1.57,[0]),new Hw(19,"K","Potassium",39.1,2.75,1.33,[1]),new Hw(20,"CA","Calcium",40.08,1.973,.99,[2]),new Hw(21,"SC","Scandium",44.956,1.7,1.44,[0]),new Hw(22,"TI","Titanium",47.88,1.7,1.47,[0]),new Hw(23,"V","Vanadium",50.941,1.7,1.33,[0]),new Hw(24,"CR","Chromium",52,1.7,1.35,[0]),new Hw(25,"MN","Manganese",54.938,1.7,1.35,[0]),new Hw(26,"FE","Iron",55.847,1.7,1.34,[0]),new Hw(27,"CO","Cobalt",58.93,1.7,1.33,[0]),new Hw(28,"NI","Nickel",58.69,1.63,1.5,[0]),new Hw(29,"CU","Copper",63.55,1.4,1.52,[0]),new Hw(30,"ZN","Zinc",65.39,1.39,1.45,[0]),new Hw(31,"GA","Gallium",69.72,1.87,1.22,[3]),new Hw(32,"GE","Germanium",72.61,1.7,1.17,[4]),new Hw(33,"AS","Arsenic",74.92,1.85,1.21,[3,5]),new Hw(34,"SE","Selenium",78.96,1.9,1.22,[2,4,6]),new Hw(35,"BR","Bromine",79.9,2.1,1.21,[1,3,5,7]),new Hw(36,"KR","Krypton",83.8,2.02,1.91,[0]),new Hw(37,"RB","Rubidium",85.47,1.7,1.47,[1]),new Hw(38,"SR","Strontium",87.62,1.7,1.12,[2]),new Hw(39,"Y","Yttrium",88.91,1.7,1.78,[0]),new Hw(40,"ZR","Zirconium",91.22,1.7,1.56,[0]),new Hw(41,"NB","Niobium",92.91,1.7,1.48,[0]),new Hw(42,"MO","Molybdenum",95.94,1.7,1.47,[0]),new Hw(43,"TC","Technetium",98.91,1.7,1.35,[0]),new Hw(44,"RU","Ruthenium",101.07,1.7,1.4,[0]),new Hw(45,"RH","Rhodium",102.91,1.7,1.45,[0]),new Hw(46,"PD","Palladium",106.42,1.63,1.5,[0]),new Hw(47,"AG","Silver",107.87,1.72,1.59,[0]),new Hw(48,"CD","Cadmium",112.41,1.58,1.69,[0]),new Hw(49,"IN","Indium",114.82,1.93,1.63,[3]),new Hw(50,"SN","Tin",118.71,2.17,1.46,[2,4]),new Hw(51,"SB","Antimony",121.75,2.2,1.46,[3,5]),new Hw(52,"TE","Tellurium",127.6,2.06,1.47,[2,4,6]),new Hw(53,"I","Iodine",126.91,2.15,1.4,[1,3,5,7]),new Hw(54,"XE","Xenon",131.29,2.16,1.98,[0]),new Hw(55,"CS","Cesium",132.91,1.7,1.67,[1]),new Hw(56,"BA","Barium",137.33,1.7,1.34,[2]),new Hw(57,"LA","Lanthanum",138.91,1.7,1.87,[0]),new Hw(58,"CE","Cerium",140.12,1.7,1.83,[0]),new Hw(59,"PR","Praseodymium",140.91,1.7,1.82,[0]),new Hw(60,"ND","Neodymium",144.24,1.7,1.81,[0]),new Hw(61,"PM","Promethium",144.9,1.7,1.8,[0]),new Hw(62,"SM","Samarium",150.36,1.7,1.8,[0]),new Hw(63,"EU","Europium",151.96,1.7,1.99,[0]),new Hw(64,"GD","Gadolinium",157.25,1.7,1.79,[0]),new Hw(65,"TB","Terbium",158.93,1.7,1.76,[0]),new Hw(66,"DY","Dysprosium",162.5,1.7,1.75,[0]),new Hw(67,"HO","Holmium",164.93,1.7,1.74,[0]),new Hw(68,"ER","Erbium",167.26,1.7,1.73,[0]),new Hw(69,"TM","Thulium",168.93,1.7,1.72,[0]),new Hw(70,"YB","Ytterbium",173.04,1.7,1.94,[0]),new Hw(71,"LU","Lutetium",174.97,1.7,1.72,[0]),new Hw(72,"HF","Hafnium",178.49,1.7,1.57,[0]),new Hw(73,"TA","Tantalum",180.95,1.7,1.43,[0]),new Hw(74,"W","Tungsten",183.85,1.7,1.37,[0]),new Hw(75,"RE","Rhenium",186.21,1.7,1.35,[0]),new Hw(76,"OS","Osmium",190.2,1.7,1.37,[0]),new Hw(77,"IR","Iridium",192.22,1.7,1.32,[0]),new Hw(78,"PT","Platinum",195.08,1.72,1.5,[0]),new Hw(79,"AU","Gold",196.97,1.66,1.5,[0]),new Hw(80,"HG","Mercury",200.59,1.55,1.7,[0]),new Hw(81,"TL","Thallium",204.38,1.96,1.55,[1,3]),new Hw(82,"PB","Lead",207.2,2.02,1.54,[2,4]),new Hw(83,"BI","Bismuth",208.98,1.7,1.54,[3,5]),new Hw(84,"PO","Polonium",210,1.7,1.68,[2,4,6]),new Hw(85,"AT","Astatine",210,1.7,1.7,[1,3,5,7]),new Hw(86,"RN","Radon",222,1.7,2.4,[0]),new Hw(87,"FR","Francium",223,1.7,2,[1]),new Hw(88,"RA","Radium",226.03,1.7,1.9,[2]),new Hw(89,"AC","Actinium",227.03,1.7,1.88,[0]),new Hw(90,"TH","Thorium",232.04,1.7,1.79,[0]),new Hw(91,"PA","Protactinium",231.04,1.7,1.61,[0]),new Hw(92,"U","Uranium",238.03,1.86,1.58,[0]),new Hw(93,"NP","Neptunium",237.05,1.7,1.55,[0]),new Hw(94,"PU","Plutonium",239.1,1.7,1.53,[0]),new Hw(95,"AM","Americium",243.1,1.7,1.51,[0]),new Hw(96,"CM","Curium",247.1,1.7,1.5,[0]),new Hw(97,"BK","Berkelium",247.1,1.7,1.5,[0]),new Hw(98,"CF","Californium",252.1,1.7,1.5,[0]),new Hw(99,"ES","Einsteinium",252.1,1.7,1.5,[0]),new Hw(100,"FM","Fermium",257.1,1.7,1.5,[0]),new Hw(101,"MD","Mendelevium",256.1,1.7,1.5,[0]),new Hw(102,"NO","Nobelium",259.1,1.7,1.5,[0]),new Hw(103,"LR","Lawrencium",260.1,1.7,1.5,[0]),new Hw(104,"RF","Rutherfordium",261,1.7,1.6,[0]),new Hw(105,"DB","Dubnium",262,1.7,1.6,[0]),new Hw(106,"SG","Seaborgium",263,1.7,1.6,[0]),new Hw(107,"BH","Bohrium",262,1.7,1.6,[0]),new Hw(108,"HS","Hassium",265,1.7,1.6,[0]),new Hw(109,"MT","Meitnerium",268,1.7,1.6,[0])]),Uw(Hw,"ByName",{D:new Hw(1,"D","Deuterium",2.014,1.2,.23,[1]),T:new Hw(1,"T","Tritium",3.016,1.2,.23,[1])}),function(){for(var e=Hw.ByAtomicNumber,t=Hw.ByName,n=0,r=e.length;n<r;++n){var i=e[n];i&&(t[i.name]=i)}}(),Hw.getByName=function(e){var t=Hw.ByName[e];return t||(t=Hw.ByName[e]=new Hw(0,e,"Unknown",0,1,.01,[0])),t};var Gw={UNKNOWN:0,COVALENT:1,AROMATIC:2};function Ww(e){return e.position}var qw=function(){function e(t,n,r,i,o){if(O_(this,e),this._left=t,this._right=n,this._fixed=o,this._index=-1,t>n)throw new Error("In a bond atom indices must be in increasing order");this._order=r,this._type=i}return C_(e,[{key:"getLeft",value:function(){return this._left}},{key:"getRight",value:function(){return this._right}},{key:"getOrder",value:function(){return this._order}},{key:"calcLength",value:function(){return this._left.position.distanceTo(this._right.position)}},{key:"_forEachNeighbour",value:function(e,t){for(var n=e.bonds,r=0,i=n.length;r<i;++r)t(n[r]._left!==e?n[r]._left:n[r]._right)}},{key:"forEachLevelOne",value:function(e){var t=this._left,n=this._right;this._forEachNeighbour(t,(function(t){t!==n&&e(t)})),this._forEachNeighbour(n,(function(n){n!==t&&e(n)}))}},{key:"forEachLevelTwo",value:function(e){var t=this._left,n=this._right,r=this;r._forEachNeighbour(t,(function(i){i!==n&&r._forEachNeighbour(i,(function(n){n!==t&&e(n)}))})),r._forEachNeighbour(n,(function(i){i!==t&&r._forEachNeighbour(i,(function(t){t!==n&&e(t)}))}))}},{key:"_fixDir",value:function(e,t,n){var r=0,i=0,o=e.clone();function a(a){o.copy(n(a)),o.sub(e),t.dot(o)>0?++r:++i}function s(e){"C"===e.element.name&&a(e)}for(var u=[[this.forEachLevelOne,s],[this.forEachLevelOne,a],[this.forEachLevelTwo,s],[this.forEachLevelTwo,a]],l=0;l<u.length;++l){if(u[l][0].call(this,u[l][1]),i>r)return t.multiplyScalar(-1);if(i<r)return t}return t}},{key:"calcNormalDir",value:function(e){var t=this._left,n=this._right,r=t,i=n;e=void 0===e?Ww:e,t.bonds.length>n.bonds.length&&(r=n,i=t);for(var o=r,a=0,s=i.bonds,u=0,l=s.length;u<l;++u){var c=s[u]._left;s[u]._left===i&&(c=s[u]._right),c.bonds.length>a&&c!==r&&(o=c,a=c.bonds.length)}var f=e(i),h=e(r).clone().sub(f),d=e(o).clone().sub(f);return d.crossVectors(h,d),d.lengthSq()<1e-4&&d.set(0,1,0),h.normalize(),d.normalize(),h.crossVectors(d,h),h.lengthSq()<1e-4&&h.set(0,1,0),h.normalize(),this._fixDir(f,h,e)}}]),e}();Uw(qw,"BondType",Gw),qw.prototype.BondType=Gw;var Kw=["C3'","C3*","P","H5T","H3T"],Yw=["OP1","O1P"],Xw=["OP2","O2P"],$w=["C3'","C3*","C1","C1'","C1*","P"],Jw=[{types:["A","DA","G","DG"],atoms:["N1"]},{types:["C","DC"],atoms:["N3"]},{types:["T","DT","U","DU"],atoms:["O4"]}],Qw=function(){function e(t,n,r,i){O_(this,e),this._chain=t,this._component=null,this._type=n,this._sequence=r,this._icode=i,this._mask=1,this._index=-1,this._atoms=[],this._secondary=null,this._firstAtom=null,this._leadAtom=null,this._wingAtom=null,this._lastAtom=null,this._controlPoint=null,this._midPoint=null,this._wingVector=null,this._cylinders=null,this._isValid=!0,this._het=!1,this._molecule=null,this.temperature=null,this.occupancy=null}return C_(e,[{key:"getChain",value:function(){return this._chain}},{key:"getMolecule",value:function(){return this._molecule}},{key:"getType",value:function(){return this._type}},{key:"getSequence",value:function(){return this._sequence}},{key:"getSecondary",value:function(){return this._secondary}},{key:"getICode",value:function(){return this._icode}},{key:"addAtom",value:function(e,t,n,r,i,o,a,s,u,l){var c=new Zw(this,e,t,n,r,i,o,a,s,u,l);return this._chain.getComplex().addAtom(c),this._atoms.push(c),this._het=this._het||i,c}},{key:"getAtomCount",value:function(){return this._atoms.length}},{key:"forEachAtom",value:function(e){for(var t=this._atoms,n=0,r=t.length;n<r&&!e(t[n]);++n);}},{key:"_findAtomByName",value:function(e){var t=null;return this.forEachAtom((function(n){return n.name===e&&(t=n,!0)})),t}},{key:"_findFirstAtomInList",value:function(e){for(var t=null,n=0;n<e.length;++n)if(null!==(t=this._findAtomByName(e[n])))return t;return t}},{key:"collectMask",value:function(){for(var e=4294967295,t=this._atoms,n=0,r=t.length;n<r;++n)e&=t[n].mask;this._mask=e}},{key:"getCylinderTargetList",value:function(){for(var e=this._type._name,t=0,n=Jw.length;t<n;++t)for(var r=0,i=Jw[t].types.length;r<i;++r)if(e===Jw[t].types[r])return Jw[t].atoms;return null}},{key:"_detectLeadWing",value:function(e,t,n){var r=this._findFirstAtomInList(Kw),i=this._findFirstAtomInList(Yw),o=this._findFirstAtomInList(Xw);if(null===i&&null!==t&&(i=t._findFirstAtomInList(Yw)),null===o&&null!==t&&(o=t._findFirstAtomInList(Xw)),null!==r&&null!==i&&null!==o){e._leadAtom=r,e._controlPoint=n(r),e._wingVector=n(o).clone().sub(n(i)),e._isValid=!0;var a=this._findFirstAtomInList($w),s=this.getCylinderTargetList(),u=null!==s?this._findFirstAtomInList(s):null;null!==a&&null!==u&&(e._cylinders=[n(a),n(u)])}}},{key:"calcWing",value:function(e,t,n,r){var i=t.clone().sub(e),o=e.clone().sub(n);(o.crossVectors(i,o),o.crossVectors(i,o).normalize(),null!==r&&r.length()>1e-4)&&(o.length()>1e-4&&Math.abs(r.angleTo(o))>Math.PI/2&&o.negate());return o}},{key:"_innerFinalize",value:function(e,t,n,r,i,o){var a=null===t,s=o(this._leadAtom),u=new lh(s.x,s.y,s.z);if(i)this._detectLeadWing(r,n,o);else{if(a)r._midPoint=o(this._firstAtom).clone();else{var l=t._controlPoint;r._midPoint=l.clone().lerp(u,.5),r._wingVector=this.calcWing(l,u,o(e._wingAtom),t._wingVector)}r._controlPoint=u}}},{key:"_finalize2",value:function(e,t,n){this._innerFinalize(e,e,t,this,n,(function(e){return e.position}))}},{key:"isConnected",value:function(e){if(this._chain!==e._chain)return!1;if(this===e)return!0;var t=!1;return this.forEachAtom((function(n){for(var r=n.bonds,i=0,o=r.length;i<o;++i){var a=r[i];if(a._left.residue===e||a._right.residue===e)return t=!0,!0}return!1})),t}},{key:"_finalize",value:function(){var e=this,t=j_(this._atoms,1);this._firstAtom=t[0],this._lastAtom=this._atoms[this._atoms.length-1],this._leadAtom=null,this._wingAtom=null;var n=0,r=0,i=0,o=0;this.forEachAtom((function(t){return null===e._leadAtom&&t.role===Hw.Constants.Lead&&(e._leadAtom=t),null===e._wingAtom&&t.role===Hw.Constants.Wing&&(e._wingAtom=t),t.temperature&&(r+=t.temperature,n++),t.occupancy&&(o+=t.occupancy,i++),null!==e._leadAtom&&null!==e._wingAtom})),n>0&&(this.temperature=r/n),i>0&&(this.occupancy=o/i),null!==this._leadAtom&&null!==this._wingAtom||(this._isValid=!1),null===this._leadAtom&&(this._leadAtom=this._firstAtom),null===this._wingAtom&&(this._wingAtom=this._lastAtom)}}]),e}(),eS=function(){function e(t,n,r){O_(this,e),this._name=t,this._fullName=n,this.letterCode=r,this.flags=0}return C_(e,[{key:"getName",value:function(){return this._name}}]),e}();function tS(e,t){for(var n=0,r=t.length;n<r;++n){var i=eS.StandardTypes[t[n]];i&&(i.flags|=e)}}Uw(eS,"StandardTypes",{ALA:new eS("ALA","Alanine","A"),ARG:new eS("ARG","Arginine","R"),ASN:new eS("ASN","Asparagine","N"),ASP:new eS("ASP","Aspartic Acid","D"),CYS:new eS("CYS","Cysteine","C"),GLN:new eS("GLN","Glutamine","Q"),GLU:new eS("GLU","Glutamic Acid","E"),GLY:new eS("GLY","Glycine","G"),HIS:new eS("HIS","Histidine","H"),ILE:new eS("ILE","Isoleucine","I"),LEU:new eS("LEU","Leucine","L"),LYS:new eS("LYS","Lysine","K"),MET:new eS("MET","Methionine","M"),PHE:new eS("PHE","Phenylalanine","F"),PRO:new eS("PRO","Proline","P"),PYL:new eS("PYL","Pyrrolysine","O"),SEC:new eS("SEC","Selenocysteine","U"),SER:new eS("SER","Serine","S"),THR:new eS("THR","Threonine","T"),TRP:new eS("TRP","Tryptophan","W"),TYR:new eS("TYR","Tyrosine","Y"),VAL:new eS("VAL","Valine","V"),A:new eS("A","Adenine","A"),C:new eS("C","Cytosine","C"),G:new eS("G","Guanine","G"),I:new eS("I","Inosine","I"),T:new eS("T","Thymine","T"),U:new eS("U","Uracil","U"),DA:new eS("DA","Adenine","A"),DC:new eS("DC","Cytosine","C"),DG:new eS("DG","Guanine","G"),DI:new eS("DI","Inosine","I"),DT:new eS("DT","Thymine","T"),DU:new eS("DU","Uracil","U"),"+A":new eS("+A","Adenine","A"),"+C":new eS("+C","Cytosine","C"),"+G":new eS("+G","Guanine","G"),"+I":new eS("+I","Inosine","I"),"+T":new eS("+T","Thymine","T"),"+U":new eS("+U","Uracil","U"),WAT:new eS("WAT","Water",""),H2O:new eS("H2O","Water",""),HOH:new eS("HOH","Water",""),DOD:new eS("DOD","Water",""),UNK:new eS("UNK","Unknown",""),UNL:new eS("UNL","Unknown Ligand","")}),Uw(eS,"Flags",{PROTEIN:1,BASIC:2,ACIDIC:4,POLAR:8,NONPOLAR:16,AROMATIC:32,NUCLEIC:256,PURINE:512,PYRIMIDINE:1024,DNA:2048,RNA:4096,WATER:65536});var nS=eS.Flags;tS(nS.WATER,["WAT","H2O","HOH","DOD"]),tS(nS.PROTEIN,["ALA","ARG","ASN","ASP","CYS","GLY","GLU","GLN","HIS","ILE","LEU","LYS","MET","PHE","PRO","PYL","SEC","SER","THR","TRP","TYR","VAL"]),tS(nS.BASIC,["ARG","HIS","LYS"]),tS(nS.ACIDIC,["ASP","GLU"]),tS(nS.POLAR,["ASN","CYS","GLN","SER","THR","TYR"]),tS(nS.NONPOLAR,["ALA","ILE","LEU","MET","PHE","PRO","TRP","VAL","GLY"]),tS(nS.AROMATIC,["PHE","TRP","TYR"]),tS(nS.NUCLEIC,["A","G","I","DA","DG","DI","+A","+G","+I","C","T","U","DC","DT","DU","+C","+T","+U"]),tS(nS.PURINE,["A","G","I","DA","DG","DI","+A","+G","+I"]),tS(nS.PYRIMIDINE,["C","T","U","DC","DT","DU","+C","+T","+U"]),tS(nS.DNA,["DA","DG","DI","DC","DT","DU"]),tS(nS.RNA,["A","G","I","C","T","U"]);!function(e,t){for(var n=Object.keys(t),r=0,i=n.length;r<i;++r){var o=n[r],a=t[o];eS.StandardTypes[o][e]=a}}("hydrophobicity",{ILE:4.5,VAL:4.2,LEU:3.8,PHE:2.8,CYS:2.5,MET:1.9,ALA:1.8,GLY:-.4,THR:-.7,SER:-.8,TRP:-.9,TYR:-1.3,PRO:-1.6,HIS:-3.2,GLU:-3.5,GLN:-3.5,ASP:-3.5,ASN:-3.5,LYS:-3.9,ARG:-4.5});var rS,iS=0,oS=1,aS=2,sS=function(){function e(t,n){O_(this,e),this._complex=t,this._name=n,this._mask=1,this._index=-1,this._residues=[],this.minSequence=Number.POSITIVE_INFINITY,this.maxSequence=Number.NEGATIVE_INFINITY}return C_(e,[{key:"getComplex",value:function(){return this._complex}},{key:"getName",value:function(){return this._name}},{key:"getResidues",value:function(){return this._residues}},{key:"_determineType",value:function(){var e=this._residues,t=eS.Flags,n=t.PROTEIN,r=t.NUCLEIC;this.type=iS;for(var i=0,o=e.length;i<o;++i){var a=e[i]._type.flags;if(0!==(a&r)){this.type=aS;break}if(0!==(a&n)){this.type=oS;break}}}},{key:"findResidue",value:function(e,t){for(var n=this._residues,r=0,i=n.length;r<i;++r){var o=n[r];if(o._sequence===e&&o._icode===t)return[o,r]}return null}},{key:"_finalize",value:function(){this._determineType();for(var e=this._residues,t=null,n=0,r=e.length;n<r;++n){var i=n+1<r?e[n+1]:null,o=e[n];o._finalize2(t,i,this.type===aS),t=o}if(e.length>1&&e[1]._wingVector){var a=e[1]._wingVector;e[0]._wingVector=new lh(a.x,a.y,a.z)}else e.length>0&&(e[0]._wingVector=new lh(1,0,0))}},{key:"updateToFrame",value:function(e){var t=this._residues,n=null,r=null,i=e._residues,o=t.length;function a(t){return e.getAtomPos(t.index)}for(var s=0;s<o;++s){var u=t[s],l=i[u._index],c=s+1<o?t[s+1]:null;u._innerFinalize(n,r,c,l,this.type===aS,a),n=u,r=l}i[t[0]._index]._wingVector=o>1?i[t[1]._index]._wingVector:new lh(1,0,0)}},{key:"addResidue",value:function(e,t,n){var r=this._complex.getResidueType(e);null===r&&(r=this._complex.addResidueType(e));var i=new Qw(this,r,t,n);return this._complex.addResidue(i),this._residues.push(i),r.flags&(eS.Flags.NUCLEIC|eS.Flags.PROTEIN)&&(this.maxSequence<t&&(this.maxSequence=t),this.minSequence>t&&(this.minSequence=t)),i}},{key:"getResidueCount",value:function(){return this._residues.length}},{key:"forEachResidue",value:function(e){for(var t=this._residues,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"collectMask",value:function(){for(var e=4294967295,t=this._residues,n=0,r=t.length;n<r;++n)e&=t[n]._mask;this._mask=e}}]),e}(),uS=function(){function e(t,n,r){O_(this,e),this.type=t,this.generic=e.genericByType[this.type]||"loop",this.init=n,this.term=r}return C_(e,[{key:"_finalize",value:function(e,t,n){if(!(this.init instanceof Qw&&this.term instanceof Qw)){for(var r=n.splitUnifiedSerial(this.init),i=n.splitUnifiedSerial(this.term),o=r.chain;o<=i.chain;o++)for(var a=r.serial;a<=i.serial;a++)for(var s=r.iCode;s<=i.iCode;s++){var u=n.getUnifiedSerial(o,a,s);t[u]&&(t[u]._secondary=this)}this.init=t[this.init],this.term=t[this.term]}}}]),e}();uS.Type={STRAND:"E",BRIDGE:"B",HELIX_310:"G",HELIX_ALPHA:"H",HELIX_PI:"I",HELIX:"X",TURN_310:"3",TURN_ALPHA:"4",TURN_PI:"5",TURN:"T",BEND:"S",COIL:"C"},uS.Generic={STRAND:"strand",HELIX:"helix",LOOP:"loop"};var lS=uS.Type,cS=uS.Generic;function fS(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}uS.genericByType=(Uw(rS={},lS.STRAND,cS.STRAND),Uw(rS,lS.HELIX_310,cS.HELIX),Uw(rS,lS.HELIX_ALPHA,cS.HELIX),Uw(rS,lS.HELIX_PI,cS.HELIX),Uw(rS,lS.HELIX,cS.HELIX),rS);var hS=uS.Type,dS={1:hS.HELIX_ALPHA,3:hS.HELIX_PI,5:hS.HELIX_310},pS=function(e){P_(n,e);var t=fS(n);function n(e,r,i,o,a,s,u){var l;return O_(this,n),(l=t.call(this,dS[e]||uS.Type.HELIX,r,i)).serial=o,l.name=a,l.comment=s,l.length=u,l}return C_(n)}(uS);function vS(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I_(e)););return e}function mS(){return mS="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=vS(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},mS.apply(this,arguments)}function gS(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var yS=function(e){P_(n,e);var t=gS(n);function n(e,r,i,o,a,s){var u;return O_(this,n),(u=t.call(this,uS.Type.STRAND,r,i)).sheet=e,u.sense=o,u.atomCur=a,u.atomPrev=s,u}return C_(n,[{key:"_finalize",value:function(e,t,r){mS(I_(n.prototype),"_finalize",this).call(this,e,t,r);var i=this.atomCur;null===i||Number.isNaN(i)||(this.atomCur=e[i]),null===(i=this.atomPrev)||Number.isNaN(i)||(this.atomPrev=e[i])}}]),n}(uS),bS=function(){function e(t,n){O_(this,e),this._name=t,this._width=n,this._strands=[]}return C_(e,[{key:"getName",value:function(){return this._name}},{key:"getWidth",value:function(){return this._width}},{key:"addStrand",value:function(e){this._strands.push(e),this._width=this._strands.length}},{key:"addEmptyStrand",value:function(){this._strands.push(new yS(null,null,null,null,null,null))}},{key:"_finalize",value:function(e,t,n){for(var r=this._strands,i=0,o=r.length;i<o;++i)r[i]._finalize(e,t,n);if(this._width||(this._width=r.length),r.length!==this._width)throw new Error("Sheet ".concat(this._name," is inconsistent."))}}]),e}(),xS=function(){function e(t,n,r,i,o){O_(this,e),this._id=t,this._name=n,this._position=r||new lh,this._atoms=i||[],this._charge=0,this._repeat=1,this._center=null,this.xmlNodeRef=o||null}return C_(e,[{key:"getName",value:function(){return this._name}},{key:"getPosition",value:function(){return this._position}},{key:"getCentralPoint",value:function(){return this._center}},{key:"_rebuildSGroupOnAtomChange",value:function(){var e=1e8;if(null!==this._center){for(var t=new lh(e,e,e),n=new lh(-e,-e,-e),r=0,i=this._atoms.length;r<i;r++){var o=this._atoms[r].position;t.set(Math.min(t.x,o.x),Math.min(t.y,o.y),Math.min(t.z,o.z)),n.set(Math.max(n.x,o.x),Math.max(n.y,o.y),Math.max(n.z,o.z))}this._center.addVectors(t,n),this._center.multiplyScalar(.5)}}}]),e}(),_S="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},wS=function(){var e=function(e,t,n,r){for(n=n||{},r=e.length;r--;n[e[r]]=t);return n},t=[1,4],n=[1,5],r=[1,6],i=[1,7],o=[1,8],a=[1,9],s=[1,11],u=[1,12],l=[5,7,8,11],c=[1,17],f=[1,22],h=[1,20],d=[1,21],p=[5,7,8,11,19],v={trace:function(){},yy:{},symbols_:{error:2,Program:3,Expression:4,EOF:5,Selector:6,OR:7,AND:8,NOT:9,"(":10,")":11,SELECTOR:12,NAMED_SELECTOR:13,SELECTOR_RANGED:14,RangeList:15,SELECTOR_NAMED:16,NameList:17,Range:18,",":19,NUMBER:20,":":21,Name:22,IDENTIFIER:23,STRING:24,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"OR",8:"AND",9:"NOT",10:"(",11:")",12:"SELECTOR",13:"NAMED_SELECTOR",14:"SELECTOR_RANGED",16:"SELECTOR_NAMED",19:",",20:"NUMBER",21:":",23:"IDENTIFIER",24:"STRING"},productions_:[0,[3,2],[4,1],[4,3],[4,3],[4,2],[4,3],[6,1],[6,1],[6,2],[6,2],[15,1],[15,3],[18,1],[18,3],[17,1],[17,3],[22,1],[22,1],[22,1]],performAction:function(e,t,n,r,i,o,a){var s=o.length-1;switch(i){case 1:return o[s-1];case 3:this.$=r.keyword("or")(o[s-2],o[s]);break;case 4:this.$=r.keyword("and")(o[s-2],o[s]);break;case 5:this.$=r.keyword("not")(o[s]);break;case 6:this.$=o[s-1];break;case 7:this.$=r.keyword(o[s])();break;case 8:this.$=r.GetSelector(o[s].toLowerCase().slice(1,o[s].length));break;case 9:case 10:this.$=r.keyword(o[s-1])(o[s]);break;case 11:this.$=new r.RangeList(o[s]);break;case 12:case 16:this.$=o[s-2].append(o[s]);break;case 13:this.$=new r.Range(Number(o[s]));break;case 14:this.$=new r.Range(Number(o[s-2]),Number(o[s]));break;case 15:this.$=new r.ValueList(o[s])}},table:[{3:1,4:2,6:3,9:t,10:n,12:r,13:i,14:o,16:a},{1:[3]},{5:[1,10],7:s,8:u},e(l,[2,2]),{4:13,6:3,9:t,10:n,12:r,13:i,14:o,16:a},{4:14,6:3,9:t,10:n,12:r,13:i,14:o,16:a},e(l,[2,7]),e(l,[2,8]),{15:15,18:16,20:c},{17:18,20:f,22:19,23:h,24:d},{1:[2,1]},{4:23,6:3,9:t,10:n,12:r,13:i,14:o,16:a},{4:24,6:3,9:t,10:n,12:r,13:i,14:o,16:a},e(l,[2,5]),{7:s,8:u,11:[1,25]},e(l,[2,9],{19:[1,26]}),e(p,[2,11]),e(p,[2,13],{21:[1,27]}),e(l,[2,10],{19:[1,28]}),e(p,[2,15]),e(p,[2,17]),e(p,[2,18]),e(p,[2,19]),e([5,7,11],[2,3],{8:u}),e(l,[2,4]),e(l,[2,6]),{18:29,20:c},{20:[1,30]},{20:f,22:31,23:h,24:d},e(p,[2,12]),e(p,[2,14]),e(p,[2,16])],defaultActions:{10:[2,1]},parseError:function(e,t){if(!t.recoverable){var n=new Error(e);throw n.hash=t,n}this.trace(e)},parse:function(e){var t=this,n=[0],r=[],i=[null],o=[],a=this.table,s="",u=0,l=0,c=2,f=1,h=o.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var v in this.yy)Object.prototype.hasOwnProperty.call(this.yy,v)&&(p.yy[v]=this.yy[v]);d.setInput(e,p.yy),p.yy.lexer=d,p.yy.parser=this,"undefined"==typeof d.yylloc&&(d.yylloc={});var m=d.yylloc;o.push(m);var g=d.options&&d.options.ranges;function y(){var e;return"number"!==typeof(e=r.pop()||d.lex()||f)&&(e instanceof Array&&(e=(r=e).pop()),e=t.symbols_[e]||e),e}"function"===typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,x,_,w,S,E,k,O,A={};;){if(x=n[n.length-1],this.defaultActions[x]?_=this.defaultActions[x]:(null!==b&&"undefined"!=typeof b||(b=y()),_=a[x]&&a[x][b]),"undefined"===typeof _||!_.length||!_[0]){var C="";for(S in O=[],a[x])this.terminals_[S]&&S>c&&O.push("'"+this.terminals_[S]+"'");C=d.showPosition?"Parse error on line "+(u+1)+":\n"+d.showPosition()+"\nExpecting "+O.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(u+1)+": Unexpected "+(b==f?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(C,{text:d.match,token:this.terminals_[b]||b,line:d.yylineno,loc:m,expected:O})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+b);switch(_[0]){case 1:n.push(b),i.push(d.yytext),o.push(d.yylloc),n.push(_[1]),b=null,l=d.yyleng,s=d.yytext,u=d.yylineno,m=d.yylloc;break;case 2:if(E=this.productions_[_[1]][1],A.$=i[i.length-E],A._$={first_line:o[o.length-(E||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(E||1)].first_column,last_column:o[o.length-1].last_column},g&&(A._$.range=[o[o.length-(E||1)].range[0],o[o.length-1].range[1]]),"undefined"!==typeof(w=this.performAction.apply(A,[s,l,u,p.yy,_[1],i,o].concat(h))))return w;E&&(n=n.slice(0,-1*E*2),i=i.slice(0,-1*E),o=o.slice(0,-1*E)),n.push(this.productions_[_[1]][0]),i.push(A.$),o.push(A._$),k=a[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}},m=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!t||n[0].length>t[0].length)){if(t=n,r=o,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,i[o])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,i[r]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(e,t,n,r){switch(n){case 0:break;case 1:return 20;case 2:return 7;case 3:return 8;case 4:return 9;case 5:return 12;case 6:return 16;case 7:return 14;case 8:return 10;case 9:return 11;case 10:return 19;case 11:return 21;case 12:return"<=";case 13:return">=";case 14:return"<";case 15:return">";case 16:return t.yytext=t.yytext.substr(1,t.yyleng-2),24;case 17:return 13;case 18:return 23;case 19:return 5;case 20:return"INVALID"}},rules:[/^(?:\s+)/i,/^(?:(-?(?:[1-9][0-9]+|[0-9]))\b)/i,/^(?:OR\b)/i,/^(?:AND\b)/i,/^(?:NOT\b)/i,/^(?:((ALL|NONE|HETATM|PROTEIN|BASIC|ACIDIC|CHARGED|POLAR|NONPOLAR|AROMATIC|NUCLEIC|PURINE|PYRIMIDINE|WATER|POLARH|NONPOLARH))\b)/i,/^(?:((NAME|ELEM|TYPE|RESIDUE|ICODE|CHAIN|ALTLOC))\b)/i,/^(?:((SERIAL|SEQUENCE|RESIDX))\b)/i,/^(?:\()/i,/^(?:\))/i,/^(?:,)/i,/^(?::)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:((?:"(?:\\.|[^\\"])*"|'(?:\\.|[^\\'])*')))/i,/^(?:(@[_A-Z0-9]+))/i,/^(?:([_A-Z0-9]+))/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};return e}();function g(){this.yy={}}return v.lexer=m,g.prototype=v,v.Parser=g,new g}(),SS={parser:wS};function ES(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var kS=function(){function e(t,n){O_(this,e),this.min=t,this.max="undefined"===typeof n?t:n}return C_(e,[{key:"includes",value:function(e){return this.min<=e&&e<=this.max}},{key:"toString",value:function(){var e=this.min,t=this.max;return e===t?String(e):[e,t].join(":")}},{key:"toJSON",value:function(){return[this.min,this.max]}}]),e}(),OS=function(){function e(t){if(O_(this,e),t instanceof this.constructor)return t;this._values=t instanceof Array?t.slice(0):t?[t]:[]}return C_(e,[{key:"append",value:function(e){var t=this._values;return t[t.length]=e,this}},{key:"remove",value:function(e){var t=this._values,n=t.indexOf(e);return n>=0&&t.splice(n,1),this}},{key:"toString",value:function(){return this._values.join(",")}},{key:"toJSON",value:function(){for(var e=this._values,t=[],n=0,r=e.length;n<r;++n){var i=e[n];t[n]=i.toJSON?i.toJSON():i}return t}}]),e}(),AS=function(e){P_(n,e);var t=ES(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"includes",value:function(e){for(var t=this._values,n=0,r=t.length;n<r;++n)if(t[n].includes(e))return!0;return!1}}]),n}(OS),CS=[],MS=function(e){P_(n,e);var t=ES(n);function n(e,r){var i;O_(this,n);var o=i=t.call(this,e);if(r){i.upperOnly=!0;for(var a=o._values,s=0,u=a.length;s<u;++s){var l=a[s];"string"===typeof l&&(a[s]=l.toUpperCase())}}else i.upperOnly=!1;return R_(i,o)}return C_(n,[{key:"includes",value:function(e){return-1!==this._values.indexOf(e)}},{key:"toString",value:function(){var e=this._values;CS.length=0;for(var t=0,n=e.length;t<n;++t)CS[t]=mw.correctSelectorIdentifier(String(e[t]));return CS.join(",")}},{key:"_validate",value:function(e){return this.upperOnly&&"string"===typeof e?e.toUpperCase():e}},{key:"append",value:function(e){return mS(I_(n.prototype),"append",this).call(this,this._validate(e)),this}},{key:"remove",value:function(e){return mS(I_(n.prototype),"remove",this).call(this,this._validate(e)),this}}]),n}(OS);function TS(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var PS=function(){function e(){O_(this,e)}return C_(e,[{key:"toString",value:function(){return this.keyword}},{key:"toJSON",value:function(){return[this.name]}}]),e}();PS.prototype.name="Error",PS.prototype.keyword="error";var RS=function(e){P_(n,e);var t=TS(n);function n(e){var r;return O_(this,n),(r=t.call(this)).list=e,r}return C_(n,[{key:"toString",value:function(){return"".concat(this.keyword," ").concat(this.list)}},{key:"toJSON",value:function(){return[this.name,this.list.toJSON()]}}]),n}(PS),IS=function(e){P_(n,e);var t=TS(n);function n(e){return O_(this,n),t.call(this,new AS(e))}return C_(n)}(RS),LS=function(e){P_(n,e);var t=TS(n);function n(e,r){return O_(this,n),t.call(this,new MS(e,!r))}return C_(n)}(RS),NS=function(e){P_(n,e);var t=TS(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"includesAtom",value:function(e){return!1}}]),n}(PS);NS.prototype.name="None",NS.prototype.keyword="none";var jS=function(e){P_(n,e);var t=TS(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"includesAtom",value:function(e){return!0}}]),n}(PS);function DS(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}jS.prototype.name="All",jS.prototype.keyword="all";var BS=new NS,zS=function(e){P_(n,e);var t=DS(n);function n(e){var r;return O_(this,n),(r=t.call(this)).rhs=e||BS,r}return C_(n,[{key:"toString",value:function(){var e=this.rhs.priority&&this.rhs.priority>this.priority?"(".concat(this.rhs,")"):this.rhs;return"".concat(this.keyword," ").concat(e)}},{key:"toJSON",value:function(){return[this.name,this.rhs.toJSON()]}}]),n}(PS);zS.prototype.priority=1;var FS=function(e){P_(n,e);var t=DS(n);function n(e,r){var i;return O_(this,n),(i=t.call(this)).lhs=e||BS,i.rhs=r||BS,i}return C_(n,[{key:"toString",value:function(){var e=this.lhs.priority&&this.lhs.priority>this.priority?"(".concat(this.lhs,")"):this.lhs,t=this.rhs.priority&&this.rhs.priority>this.priority?"(".concat(this.rhs,")"):this.rhs;return"".concat(e," ").concat(this.keyword," ").concat(t)}},{key:"toJSON",value:function(){return[this.name,this.lhs.toJSON(),this.rhs.toJSON()]}}]),n}(PS);function VS(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}FS.prototype.priority=1e3;var US={};function ZS(e,t){var n=e.toLowerCase();t.prototype.keyword=n,t.prototype.name=e;var r=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Y_(t,n)};return r.SelectorClass=t,US[n]=r,t}ZS("Serial",function(e){P_(n,e);var t=VS(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"includesAtom",value:function(e){return this.list.includes(e.serial)}}]),n}(IS)),ZS("Name",function(e){P_(n,e);var t=VS(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"includesAtom",value:function(e){return this.list.includes(e.name)}}]),n}(LS)),ZS("AltLoc",function(e){P_(n,e);var t=VS(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"includesAtom",value:function(e){return this.list.includes(String.fromCharCode(e.location))}}]),n}(LS)),ZS("Elem",function(e){P_(n,e);var t=VS(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"includesAtom",value:function(e){return this.list.includes(e.element.name)}}]),n}(LS)),ZS("Residue",function(e){P_(n,e);var t=VS(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"includesAtom",value:function(e){return this.list.includes(e.residue._type._name)}}]),n}(LS)),ZS("Sequence",function(e){P_(n,e);var t=VS(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"includesAtom",value:function(e){return this.list.includes(e.residue._sequence)}}]),n}(IS)),ZS("ICode",function(e){P_(n,e);var t=VS(n);function n(e){return O_(this,n),t.call(this,e,!0)}return C_(n,[{key:"includesAtom",value:function(e){return this.list.includes(e.residue._icode)}}]),n}(LS)),ZS("ResIdx",function(e){P_(n,e);var t=VS(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"includesAtom",value:function(e){return this.list.includes(e.residue._index)}}]),n}(IS)),ZS("Chain",function(e){P_(n,e);var t=VS(n);function n(e){return O_(this,n),t.call(this,e,!0)}return C_(n,[{key:"includesAtom",value:function(e){return this.list.includes(e.residue._chain._name)}}]),n}(LS)),ZS("Hetatm",function(e){P_(n,e);var t=VS(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"includesAtom",value:function(e){return e.het}}]),n}(PS)),ZS("PolarH",function(e){P_(n,e);var t=VS(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"includesAtom",value:function(e){return(e.flags&Zw.Flags.NONPOLARH)===Zw.Flags.HYDROGEN}}]),n}(PS)),ZS("NonPolarH",function(e){P_(n,e);var t=VS(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"includesAtom",value:function(e){return(e.flags&Zw.Flags.NONPOLARH)===Zw.Flags.NONPOLARH}}]),n}(PS)),ZS("All",jS),ZS("None",NS);var HS=US.none();function GS(e,t,n){return n.prototype.priority=t,ZS(e,n)}function WS(e,t){return ZS(t,function(t){P_(r,t);var n=VS(r);function r(){return O_(this,r),n.apply(this,arguments)}return C_(r,[{key:"includesAtom",value:function(t){return 0!==(t.residue._type.flags&e)}}]),r}(PS))}GS("Not",1,function(e){P_(n,e);var t=VS(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"includesAtom",value:function(e){return!this.rhs.includesAtom(e)}}]),n}(zS)),GS("And",2,function(e){P_(n,e);var t=VS(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"includesAtom",value:function(e){return this.lhs.includesAtom(e)&&this.rhs.includesAtom(e)}}]),n}(FS)),GS("Or",3,function(e){P_(n,e);var t=VS(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"includesAtom",value:function(e){return this.lhs.includesAtom(e)||this.rhs.includesAtom(e)}}]),n}(FS)),WS(eS.Flags.PROTEIN,"Protein"),WS(eS.Flags.BASIC,"Basic"),WS(eS.Flags.ACIDIC,"Acidic"),WS(eS.Flags.BASIC|eS.Flags.ACIDIC,"Charged"),WS(eS.Flags.POLAR,"Polar"),WS(eS.Flags.NONPOLAR,"NonPolar"),WS(eS.Flags.AROMATIC,"Aromatic"),WS(eS.Flags.NUCLEIC,"Nucleic"),WS(eS.Flags.PURINE,"Purine"),WS(eS.Flags.PYRIMIDINE,"Pyrimidine"),WS(eS.Flags.WATER,"Water");var qS=Object.create(US);qS.Selector=PS,qS.RangeListSelector=IS,qS.ValueListSelector=LS,qS.Range=kS,qS.RangeList=AS,qS.ValueList=MS,qS.PrefixOperator=zS,qS.InfixOperator=FS,qS.Context=Object.create({}),qS.GetSelector=function(e){if(!qS.Context.hasOwnProperty(e))throw{message:"selector ".concat(e," is not registered")};return qS.Context[e]||HS},qS.ClearContext=function(){Object.keys(qS.Context).forEach((function(e){delete qS.Context[e]}))},qS.keyword=function(e){return US[e.toLowerCase()]||US.none},qS.parse=function(e){var t={};try{t.selector=SS.parser.parse(e)}catch(n){t.selector=HS,t.error=n.message}return t},SS.parser.yy=qS,SS.parser.yy.parseError=SS.parser.parseError;var KS=function(){function e(t){O_(this,e),this._complex=t,this._selector=qS.keyword("All")(),this._boundaries={boundingBox:new hh,boundingSphere:new Ph}}return C_(e,[{key:"computeBoundaries",value:function(){var e=this._complex._atoms,t=e.length,n=this._selector,r=this._boundaries.boundingBox;if(r.makeEmpty(),1===t){r.expandByPoint(e[0].position);var i=new lh;r.getCenter(i);var o=2*e[0].element.radius;r.setFromCenterAndSize(i,new lh(o,o,o))}else for(var a=0;a<t;++a)n.includesAtom(e[a])&&r.expandByPoint(e[a].position);var s=0,u=new lh;if(r.getCenter(u),1===t)this._boundaries.boundingSphere.set(u,e[0].element.radius);else{for(var l=0;l<t;++l)if(n.includesAtom(e[l])){var c=e[l].position,f=u.distanceToSquared(c);s<f&&(s=f)}this._boundaries.boundingSphere.set(u,Math.sqrt(s))}}},{key:"getTransforms",value:function(){return[]}},{key:"getSelector",value:function(){return this._selector}},{key:"getBoundaries",value:function(){return this._boundaries}},{key:"finalize",value:function(){}}]),e}();function YS(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var XS=function(e){P_(n,e);var t=YS(n);function n(e){var r;return O_(this,n),(r=t.call(this,e)).chains=[],r.matrices=[],r}return C_(n,[{key:"computeBoundaries",value:function(){mS(I_(n.prototype),"computeBoundaries",this).call(this);var e=this.matrices,t=this._boundaries.boundingSphere.center,r=this._boundaries.boundingSphere.radius,i=this._boundaries.boundingBox=new hh;i.makeEmpty();for(var o=0,a=e.length;o<a;++o)i.expandByPoint(t.clone().applyMatrix4(e[o]));var s=i.max.distanceTo(i.min)/2+r,u=new lh;i.getCenter(u),this._boundaries.boundingSphere=(new Ph).set(u,s),i.max.addScalar(r),i.min.subScalar(r)}},{key:"addChain",value:function(e){this.chains[this.chains.length]=e}},{key:"addMatrix",value:function(e){this.matrices[this.matrices.length]=e}},{key:"getTransforms",value:function(){return this.matrices}},{key:"finalize",value:function(){this.chains.length>0?this._selector=qS.keyword("Chain")(this.chains):this._selector=qS.keyword("None")()}}]),n}(KS),$S=function(){function e(t){O_(this,e),this._complex=t,this._index=-1,this._residueIndices=[],this._cycles=[],this._subDivs=[],this._residueCount=0}return C_(e,[{key:"getResidues",value:function(){return this._complex._residues}},{key:"getResidueCount",value:function(){return this._residueCount}},{key:"forEachResidue",value:function(e){for(var t=this._complex._residues,n=this._residueIndices,r=0,i=n.length;r<i;++r)for(var o=n[r].start,a=n[r].end;o<=a;++o)e(t[o])}},{key:"setSubDivs",value:function(e){this._subDivs=e;for(var t=0,n=[],r=0,i=0,o=e.length;i<o;++i)if(i===o-1||e[i].end+1!==e[i+1].start){var a=e[t].start,s=e[i].end;n[n.length]={start:a,end:s},r+=s-a+1,t=i+1}this._residueIndices=n,this._residueCount=r}},{key:"getComplex",value:function(){return this._complex}},{key:"forEachBond",value:function(e){for(var t=this._complex._bonds,n=0,r=t.length;n<r;++n){var i=t[n];i._left.residue._component===this&&e(i)}}},{key:"update",value:function(){this.forEachCycle((function(e){e.update()}))}},{key:"forEachAtom",value:function(e){this.forEachResidue((function(t){t.forEachAtom(e)}))}},{key:"addCycle",value:function(e){this._cycles.push(e)}},{key:"forEachCycle",value:function(e){for(var t=this._cycles,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"markResidues",value:function(){var e=this;e.forEachResidue((function(t){t._component=e}))}},{key:"_forEachSubChain",value:function(e,t){for(var n=this._complex._residues,r=this._subDivs,i=0,o=r.length;i<o;++i)for(var a=r[i].start,s=r[i].end;a<=s;++a){var u=n[a];if(e&u._mask&&u._isValid){for(var l=a+1;l<=s;++l){var c=n[l];if(!(e&c._mask&&c._isValid))break}t(i,a,l-1),a=l}}}},{key:"getMaskedSequences",value:function(e){var t=[],n=0;return this._forEachSubChain(e,(function(e,r,i){t[n++]={start:r,end:i}})),t}},{key:"getMaskedSubdivSequences",value:function(e){var t=[],n=-1,r=-1,i=this._subDivs;return this._forEachSubChain(e,(function(e,o,a){r!==e&&(++n,t[n]={arr:[],boundaries:i[e]},r=e),t[n].arr[t[n].arr.length]={start:o,end:a}})),t}}]),e}(),JS=function(){function e(t){O_(this,e),this.numPairs=0,this.numMaxPairs=t,this.intBuffer=mw.allocateTyped(Int32Array,4*t);for(var n=0;n<4*t;n++)this.intBuffer[n]=-1;this.hashBuffer=mw.allocateTyped(Int32Array,33554432);for(var r=0;r<33554432;r++)this.hashBuffer[r]=-1}return C_(e,[{key:"destroy",value:function(){this.intBuffer=null,this.hashBuffer=null}},{key:"addPair",value:function(e,t){for(var n=e<t?e:t,r=e>t?e:t,i=n+(r<<14),o=32*(n+89237*r&1048575),a=0;a<32;a++){var s=this.hashBuffer[o+a];if(-1===s)break;if(s===i)return!1}if(a>=32)throw new Error("addPair: increase cMaxPairsForHashCode");if(this.hashBuffer[o+a]=i,this.numPairs>=this.numMaxPairs)throw new Error("addPair: increase num pairs");return o=4*this.numPairs,this.intBuffer[o]=n,this.intBuffer[o+1]=r,this.intBuffer[o+2]=i,this.numPairs++,!0}}]),e}();function QS(e){var t=e.element;if(t)return t.radiusBonding;throw new Error("_getBondingRadius: Logic error.")}function eE(e){return!e.isHet()||e.bonds&&0===e.bonds.length}var tE=function(){function e(t){O_(this,e),this._complex=t,this._maxRad=1.8;var n=this._complex.getDefaultBoundaries().boundingBox;this._vBoxMin=n.min.clone(),this._vBoxMax=n.max.clone(),this._pairCollection=null}return C_(e,[{key:"_addExistingPairs",value:function(){for(var e=this._complex.getAtoms(),t=e.length,n=0,r=this._pairCollection;n<t;n++)for(var i=e[n].bonds,o=i.length,a=0;a<o;a++){var s=i[a];s._left.index===n&&r.addPair(n,s._right.index)}return 0}},{key:"_findPairs",value:function(){var e=this._complex.getVoxelWorld();if(null!==e)for(var t,n,r,i,o,a=this._complex._atoms,s=a.length,u=this,l=function(e){if(!n||!e.isHydrogen()){var a=e.location;if(32===i||32===a||i===a){var s=r.distanceToSquared(e.position),l=e.element.radiusBonding,c=t+l+.45;s>c*c||s<.001||u._pairCollection.addPair(o.index,e.index)}}},c=0;c<s;++c)eE(o=a[c])&&(t=o.element.radiusBonding,n=o.isHydrogen(),r=o.position,i=o.location,e.forEachAtomWithinRadius(r,2*this._maxRad+.45,l))}},{key:"_addPairs",value:function(){for(var e=this._complex._atoms,t=0,n=0;t<this._pairCollection.numPairs;t++,n+=4){var r=this._pairCollection.intBuffer[n],i=this._pairCollection.intBuffer[n+1];this._addPair(e[r],e[i])}}},{key:"_addPair",value:function(e,t){for(var n=e.bonds,r=e.index,i=t.index,o=0,a=n.length;o<a;++o){var s=n[o];if(s._left.index===i||s._right.index===i)return}var u=r<i?e:t,l=r<i?t:e,c=this._complex.addBond(u,l,0,qw.BondType.UNKNOWN,!1);n.push(c),t.bonds.push(c)}},{key:"build",value:function(){this._buildInner()}},{key:"_buildInner",value:function(){var e=this._complex._atoms;if(!(e.length<2)){if(e[0].index<0)throw new Error("AutoBond: Atoms in complex were not indexed.");this._calcBoundingBox(),this._pairCollection=new JS(4*e.length),this._addExistingPairs(),this._findPairs(),this._addPairs()}}},{key:"_calcBoundingBox",value:function(){for(var e=this._complex._atoms,t=e.length,n=QS(e[0]),r=1;r<t;++r)n=Math.max(n,QS(e[r]));this._vBoxMax.addScalar(n),this._vBoxMin.addScalar(-n),this._maxRad=1.2*n}},{key:"destroy",value:function(){this._pairCollection&&this._pairCollection.destroy()}}]),e}(),nE=qw.BondType.AROMATIC,rE=[Hw.ByName.C.number,Hw.ByName.N.number],iE=function(){var e=new lh,t=new lh,n=new lh;return function(r,i){return e.copy(r).normalize(),t.copy(i).normalize(),n.crossVectors(e,t),!(n.length()>.1)&&e.dot(t)>=0}}();function oE(e,t){for(var n=0;n<e.length&&e[n]<t;)++n;e.splice(n,0,t)}function aE(e,t){return e._left===t?e._right:e._left}function sE(e){e._type=nE}var uE=function(){function e(t){O_(this,e),this.atoms=t,this.update()}return C_(e,[{key:"update",value:function(){for(var e=this.atoms,t=new lh,n=e.length,r=0;r<n;++r)t.add(e[r].position);t.multiplyScalar(1/n),this.center=t,this.radius=t.distanceTo(e[0].position.clone().lerp(e[1].position,.5))}},{key:"forEachBond",value:function(e){var t,n=this.atoms,r=n.length,i=n[0];function o(n){n._left!==t&&n._right!==t||e(n)}for(var a=0;a<r;++a)t=n[(a+1)%r],i.forEachBond(o),i=t}}]),e}();function lE(e){return e._type===nE}function cE(e){if(e.type===nE)return!0;var t=rE.indexOf(e._right.element.number),n=rE.indexOf(e._left.element.number);return-1!==t&&-1!==n}function fE(e){return e.length>3}function hE(e){return console.assert(e.length>2),!0}var dE=function(){function e(t){O_(this,e),this._complex=t;for(var n=new Array(t._bonds.length),r=new Array(t._bonds.length),i=0,o=n.length;i<o;++i)n[i]=[],r[i]=!1;this._bondsData=n,this._bondMarks=r,this._resetCycles()}return C_(e,[{key:"_resetCycles",value:function(){this._cycles=[],this._currIdx=-1}},{key:"_haveSameCycle",value:function(e,t,n){for(var r=e[t._index],i=e[n._index],o=r.length,a=i.length,s=0,u=0;s<o&&u<a;){if(r[s]===i[u])return!0;r[s]>i[u]?++u:++s}return!1}},{key:"_tryBond",value:function(e,t,n){var r=[],i=this._bondsData,o=aE(e,t),a=t.position.clone().sub(o.position),s=this._currStart,u=this,l=this._bondMarks,c=this._checkBond;l[e._index]=!0,c=void 0===c?lE:c,t.forEachBond((function(o){if(c(o)&&o!==e&&!l[o._index]&&!u._haveSameCycle(i,e,o)){var f=aE(o,t),h=f.position.clone().sub(t.position),d=f===s?-2:1-function(e,t){var n=e.dot(t)/Math.sqrt(e.lengthSq()*t.lengthSq());return Xf.clamp(n,-1,1)}(a,h),p=h.cross(a);if(iE(p,n)){for(var v=0;v<r.length&&r[v].val<d;)++v;r.splice(v,0,{bond:o,val:d,dir:p})}}}));for(var f=0,h=r.length;f<h;++f){var d=r[f].bond,p=d._left===t?d._right:d._left;if(p===s)return++this._currIdx,this._cycles.push([t]),l[e._index]=!1,!0;if(this._tryBond(d,p,r[f].dir))return oE(i[d._index],this._currIdx),this._cycles[this._currIdx].push(t),l[e._index]=!1,!0}return l[e._index]=!1,!1}},{key:"_startCycle",value:function(e){this._currStart=e._left,this._tryBond(e,e._right,new lh)&&(oE(this._bondsData[e._index],this._currIdx),this._cycles[this._currIdx].push(e._left))}},{key:"_findLoops",value:function(e,t){this._checkBond=e;var n=this._complex,r=this;n.forEachComponent((function(n){r._resetCycles(),n.forEachBond((function(t){e(t)&&r._startCycle(t)}));for(var i=r._cycles,o=0,a=i.length;o<a;++o){var s=i[o];if(t(s)){var u=new uE(s);u.forEachBond(sE),n.addCycle(u)}}}))}},{key:"markCycles",value:function(){this._findLoops(lE,fE)}},{key:"detectCycles",value:function(){this._findLoops(cE,hE)}}]),e}();function pE(e,t,n,r){var i=n-e.z,o=r-e.z,a=Math.sqrt(Math.max(t*t-i*i,0)),s=Math.sqrt(Math.max(t*t-o*o,0));return[Math.min(a,s),n<=e.z&&r>=e.z?t:Math.max(a,s)]}function vE(e,t,n,r){var i=n-e.y,o=r-e.y,a=Math.sqrt(Math.max(t*t-i*i,0)),s=Math.sqrt(Math.max(t*t-o*o,0));return[Math.min(a,s),n<=e.y&&r>=e.y?t:Math.max(a,s)]}var mE=function(){function e(t,n){O_(this,e),this._box=t.clone();var r=new lh;t.getSize(r),this._count=r.clone().divide(n).floor().max(new lh(1,1,1)),this._last=this._count.clone().subScalar(1),this._cellSize=r.clone().divide(this._count),this._cellInnerR=.5*Math.min(Math.min(this._cellSize.x,this._cellSize.y),this._cellSize.z),this._cellOuterR=.5*Math.sqrt(this._cellSize.dot(this._cellSize));var i=this._count.x*this._count.y*this._count.z;this._voxels=mw.allocateTyped(Int32Array,i);for(var o=0;o<i;++o)this._voxels[o]=-1;this._atoms=[]}return C_(e,[{key:"addAtoms",value:function(e){var t=this,n=this._atoms.length;this._atoms.length+=2*e.getAtomCount(),e.forEachAtom((function(e){var r=t._findVoxel(e.position);t._atoms[n]=e,t._atoms[n+1]=t._voxels[r],t._voxels[r]=n,n+=2}))}},{key:"_findVoxel",value:function(t){var n=e._zero,r=e._voxel;return r.copy(t).sub(this._box.min).divide(this._cellSize).floor().clamp(n,this._last),r.x+this._count.x*(r.y+this._count.y*r.z)}},{key:"_forEachAtomInVoxel",value:function(e,t){for(var n=this._voxels[e];n>=0;n=this._atoms[n+1])t(this._atoms[n])}},{key:"_forEachVoxelWithinRadius",value:function(t,n,r){var i=e._xRange,o=e._yRange,a=e._zRange;if(n/this._cellInnerR<10)this._forEachVoxelWithinRadiusSimple(t,n,r);else{var s,u,l,c,f,h,d,p;a.set(t.z-n,t.z+n),a.subScalar(this._box.min.z).divideScalar(this._cellSize.z).floor().clampScalar(0,this._count.z-1);for(var v=a.x;v<=a.y;++v){f=[this._box.min.z+v*this._cellSize.z,this._box.min.z+(v+1)*this._cellSize.z],p=t.z-n<=f[0]&&f[1]<=t.z+n,s=pE(t,n,f[0],f[1]),o.set(t.y-s[1],t.y+s[1]),o.subScalar(this._box.min.y).divideScalar(this._cellSize.y).floor().clampScalar(0,this._count.y-1);for(var m=o.x;m<=o.y;++m){c=[this._box.min.y+m*this._cellSize.y,this._box.min.y+(m+1)*this._cellSize.y],d=t.y-s[0]<=c[0]&&c[1]<=t.y+s[0],u=vE(t,s[1],c[0],c[1]),i.set(t.x-u[1],t.x+u[1]),i.subScalar(this._box.min.x).divideScalar(this._cellSize.x).floor().clampScalar(0,this._count.x-1);for(var g=i.x;g<=i.y;++g)l=[this._box.min.x+g*this._cellSize.x,this._box.min.x+(g+1)*this._cellSize.x],h=t.x-u[0]<=l[0]&&l[1]<=t.x+u[0],r(g+this._count.x*(m+this._count.y*v),h&&d&&p)}}}}},{key:"_forEachVoxelWithinRadiusSimple",value:function(t,n,r){var i=e._xRange,o=e._yRange,a=e._zRange,s=e._vCenter,u=(n+this._cellOuterR)*(n+this._cellOuterR),l=-1;n>this._cellOuterR&&(l=(n-this._cellOuterR)*(n-this._cellOuterR)),i.set(t.x-n,t.x+n),i.subScalar(this._box.min.x).divideScalar(this._cellSize.x).floor(),i.x=Math.min(Math.max(i.x,0),this._count.x-1),i.y=Math.min(Math.max(i.y,0),this._count.x-1),o.set(t.y-n,t.y+n),o.subScalar(this._box.min.y).divideScalar(this._cellSize.y).floor(),o.x=Math.min(Math.max(o.x,0),this._count.y-1),o.y=Math.min(Math.max(o.y,0),this._count.y-1),a.set(t.z-n,t.z+n),a.subScalar(this._box.min.z).divideScalar(this._cellSize.z).floor(),a.x=Math.min(Math.max(a.x,0),this._count.z-1),a.y=Math.min(Math.max(a.y,0),this._count.z-1);for(var c=a.x;c<=a.y;++c){var f=[this._box.min.z+c*this._cellSize.z,this._box.min.z+(c+1)*this._cellSize.z];s.z=.5*(f[0]+f[1]);for(var h=o.x;h<=o.y;++h){var d=[this._box.min.y+h*this._cellSize.y,this._box.min.y+(h+1)*this._cellSize.y];s.y=.5*(d[0]+d[1]);for(var p=i.x;p<=i.y;++p){var v=[this._box.min.x+p*this._cellSize.x,this._box.min.x+(p+1)*this._cellSize.x];s.x=.5*(v[0]+v[1]);var m=t.distanceToSquared(s);m<=u&&r(p+this._count.x*(h+this._count.y*c),m<=l)}}}}},{key:"forEachAtomWithinRadius",value:function(e,t,n){var r=this,i=t*t;r._forEachVoxelWithinRadius(e,t,(function(t,o){o?r._forEachAtomInVoxel(t,n):r._forEachAtomInVoxel(t,(function(t){e.distanceToSquared(t.position)<=i&&n(t)}))}))}},{key:"forEachAtomWithinDistFromMasked",value:function(e,t,n,r){this._forEachAtomWithinDistFromGroup((function(n){e.forEachAtom((function(e){0!==(e.mask&t)&&n(e)}))}),n,r)}},{key:"forEachAtomWithinDistFromSelected",value:function(e,t,n,r){this._forEachAtomWithinDistFromGroup((function(n){e.forEachAtom((function(e){t.includesAtom(e)&&n(e)}))}),n,r)}},{key:"_forEachAtomWithinDistFromGroup",value:function(e,t,n){var r,i=this,o=t*t,a=[],s=[],u=0;e((function(e){i._forEachVoxelWithinRadius(e.position,t,(function(t,n){n?a[t]=-1:"undefined"===typeof a[t]?(s.push(e),s.push(-1),a[t]=u,u+=2):-1!==a[t]&&(s.push(e),s.push(a[t]),a[t]=u,u+=2)}))}));var l=function(e){if("undefined"!==typeof a[r])if(-1!==(u=a[r])){for(;u>=0;u=s[u+1])if(e.position.distanceToSquared(s[u].position)<o){n(e);break}}else n(e)};for(r in a)a.hasOwnProperty(r)&&i._forEachAtomInVoxel(r,l)}}]),e}();Uw(mE,"_zero",new lh(0,0,0)),Uw(mE,"_voxel",new lh),Uw(mE,"_xRange",new $f),Uw(mE,"_yRange",new $f),Uw(mE,"_zRange",new $f),Uw(mE,"_vCenter",new lh);var gE=.5,yE=-9.9,bE=-27.888,xE=function(){function e(t){O_(this,e),this._complex=t,this._hbonds=[],this._complex._residues.length>1e3?this._buildVW():this._build()}return C_(e,[{key:"isBond",value:function(e,t){if(this._hbonds[e]){var n=j_(this._hbonds[e].acceptor,2),r=n[0],i=n[1];if(r&&r.residue===t&&r.energy<-.5)return!0;if(i&&i.residue===t&&i.energy<-.5)return!0}return!1}},{key:"_build",value:function(){for(var e=0;e<this._complex._residues.length-1;++e){var t=this._complex._residues[e];if(0!==(t.getType().flags&eS.Flags.PROTEIN)){var n=null;e>0&&this._complex._residues[e-1].getType().flags&eS.Flags.PROTEIN&&t._sequence===this._complex._residues[e-1]._sequence+1&&(n=this._complex._residues[e-1]);for(var r=e+1;r<this._complex._residues.length;++r){var i=this._complex._residues[r];if(0!==(i.getType().flags&eS.Flags.PROTEIN)){var o=null;this._complex._residues[r-1].getType().flags&eS.Flags.PROTEIN&&i._sequence===this._complex._residues[r-1]._sequence+1&&(o=this._complex._residues[r-1]),this._calcHBondEnergy(n,t,i),r!==e+1&&this._calcHBondEnergy(o,i,t)}}}}}},{key:"_buildVW",value:function(){var e,t,n=this,r=this._complex._residues,i=this._complex.getVoxelWorld();if(null!==i)for(var o=new JS(this._complex._residues.length*this._complex._residues.length/2),a=0;a<r.length-1;++a)0!==((e=r[a]).getType().flags&eS.Flags.PROTEIN)&&(!(t=a>0?r[a-1]:null)||0!==(t.getType().flags&eS.Flags.PROTEIN)&&e._sequence===t._sequence+1||(t=null),i.forEachAtomWithinRadius(this._residueGetCAlpha(e),5,s));function s(i){var a=i.residue;if(a._index!==e._index&&0!==(a.getType().flags&eS.Flags.PROTEIN)&&o.addPair(e._index,a._index)){var s=a._index>0?r[a._index-1]:null;!s||0!==(s.getType().flags&eS.Flags.PROTEIN)&&a._sequence===s._sequence+1||(s=null),n._calcHBondEnergy(t,e,a),a._index!==e._index+1&&n._calcHBondEnergy(s,a,e)}}}},{key:"_residueGetCAlpha",value:function(e){for(var t=0;t<e._atoms.length;++t){var n=e._atoms[t].name;if("CA"===n||"C1"===n)return e._atoms[t].position}return null}},{key:"_residueGetCO",value:function(e){var t=null,n=null;return e.forEachAtom((function(e){"C"===e.name?t=e.position:"O"===e.name&&(n=e.position)})),[t,n]}},{key:"_residueGetNH",value:function(e,t){var n,r=j_(this._residueGetCO(e),2),i=r[0],o=r[1];if(t.forEachAtom((function(e){"N"===e.name&&(n=e.position)})),i&&o&&n){var a=i.clone();return a.sub(o),a.multiplyScalar(1/a.length()),a.add(n),[n,a]}return[null,null]}},{key:"_calcHBondEnergy",value:function(e,t,n){var r=0;if(null===e)return r;if("PRO"!==t.getType().getName()){var i=j_(this._residueGetNH(e,t),2),o=i[0],a=i[1],s=j_(this._residueGetCO(n),2),u=s[0],l=s[1];if(null===o||null===a||null===u||null===l)return r;var c=a.distanceTo(l),f=a.distanceTo(u),h=o.distanceTo(u),d=o.distanceTo(l);r=c<gE||f<gE||h<gE||d<gE?yE:bE/c-bE/f+bE/h-bE/d,(r=Math.round(1e3*r)/1e3)<yE&&(r=yE)}"undefined"===typeof this._hbonds[t._index]&&(this._hbonds[t._index]={donor:[],acceptor:[]});var p=this._hbonds[t._index];p.acceptor.length<2&&p.acceptor.push({residue:n._index,energy:r}),p.acceptor.length>1&&(r<p.acceptor[0].energy?(p.acceptor[1].residue=p.acceptor[0].residue,p.acceptor[1].energy=p.acceptor[0].energy,p.acceptor[0].residue=n._index,p.acceptor[0].energy=r):r<p.acceptor[1].energy&&(p.acceptor[1].residue=n._index,p.acceptor[1].energy=r)),"undefined"===typeof this._hbonds[n._index]&&(this._hbonds[n._index]={donor:[],acceptor:[]});var v=this._hbonds[n._index];return v.donor.length<2&&v.donor.push({residue:t._index,energy:r}),v.donor.length>1&&(r<v.donor[0].energy?(v.donor[1].residue=v.donor[0].residue,v.donor[1].energy=v.donor[0].energy,v.donor[0].residue=t._index,v.donor[0].energy=r):r<v.donor[1].energy&&(v.donor[1].residue=t._index,v.donor[1].energy=r)),r}}]),e}();function _E(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return wE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wE(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function wE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var SE,EE,kE=Object.freeze({NO_BRIDGE:0,PARALLEL:1,ANTI_PARALLEL:2}),OE=Object.freeze({START:1,MIDDLE:2,END:3,START_AND_END:4}),AE=Object.freeze({STRAND:"E",BRIDGE:"B",HELIX_310:"G",HELIX_ALPHA:"H",HELIX_PI:"I",TURN:"T",BEND:"S",LOOP:" "}),CE=function(){function e(t){O_(this,e),this._complex=t,this._build()}return C_(e,[{key:"_build",value:function(){this._hbonds=new xE(this._complex),this._ss=[],this._sheet=[],this._betaPartners=[],this._bend=[];for(var e=0;e<this._complex.getResidues().length;++e)this._betaPartners[e]=[];this._helixFlags=[],this._helixFlags[3]=[],this._helixFlags[4]=[],this._helixFlags[5]=[],this._chainLengths=[];for(var t=0;t<this._complex._chains.length;++t){for(var n=this._complex._chains[t].getResidues(),r=0;r<n.length&&0!==(n[r].getType().flags&eS.Flags.PROTEIN);++r);this._chainLengths[t]=r}this._buildBetaSheets();for(var i=0;i<this._complex._chains.length;++i)this._buildAlphaHelices(this._complex._chains[i].getResidues(),this._chainLengths[i],!1)}},{key:"_buildAlphaHelices",value:function(e,t,n){for(var r=3;r<=5&&!(e.length<r);++r)for(var i=0;i+r<t;++i)if(this._hbonds.isBond(e[i+r]._index,e[i]._index)){this._helixFlags[r][e[i+r]._index]=OE.END;for(var o=i+1;o<i+r;++o)"undefined"===typeof this._helixFlags[r][e[o]._index]&&(this._helixFlags[r][e[o]._index]=OE.MIDDLE);this._helixFlags[r][e[i]._index]===OE.END?this._helixFlags[r][e[i]._index]=OE.START_AND_END:this._helixFlags[r][e[i]._index]=OE.START}for(var a=2;a<t-2;++a){var s=this._kappa(e[a-2],e[a],e[a+2]);this._bend[e[a]._index]=360!==s&&s>70}for(var u=1;u+4<t;++u)if(this._isHelixStart(e[u]._index,4)&&this._isHelixStart(e[u-1]._index,4))for(var l=u;l<=u+3;++l)this._ss[e[l]._index]=AE.HELIX_ALPHA;for(var c=1;c+3<t;++c)if(this._isHelixStart(e[c]._index,3)&&this._isHelixStart(e[c-1]._index,3)){for(var f=!0,h=c;f&&h<=c+2;++h)f="undefined"===typeof this._ss[e[h]._index]||this._ss[e[h]._index]===AE.HELIX_310;if(f)for(var d=c;d<=c+2;++d)this._ss[e[d]._index]=AE.HELIX_310}for(var p=1;p+5<t;++p)if(this._isHelixStart(e[p]._index,5)&&this._isHelixStart(e[p-1]._index,5)){for(var v=!0,m=p;v&&m<=p+4;++m)v="undefined"===typeof this._ss[e[m]._index]||this._ss[e[m]._index]===AE.HELIX_PI||n&&this._ss[e[m]._index]===AE.HELIX_ALPHA;if(v)for(var g=p;g<=p+4;++g)this._ss[e[g]._index]=AE.HELIX_PI}for(var y=1;y+1<t;++y)if("undefined"===typeof this._ss[e[y]._index]){for(var b=!1,x=3;x<=5&&!b;++x)for(var _=1;_<x&&!b;++_)b=y>=_&&this._isHelixStart(e[y-_]._index,x);b?this._ss[e[y]._index]=AE.TURN:this._bend[e[y]._index]&&(this._ss[e[y]._index]=AE.BEND)}}},{key:"_residueGetCAlpha",value:function(e){for(var t=0;t<e._atoms.length;++t){var n=e._atoms[t].name;if("CA"===n||"C1"===n)return e._atoms[t].position}return null}},{key:"_cosinusAngle",value:function(e,t,n,r){var i=e.clone().sub(t),o=n.clone().sub(r),a=0,s=i.dot(i)*o.dot(o);return s>0&&(a=i.dot(o)/Math.sqrt(s)),a}},{key:"_kappa",value:function(e,t,n){var r=this._residueGetCAlpha(t),i=this._residueGetCAlpha(e),o=this._residueGetCAlpha(n);if(null===r||null===i||null===o)return 180;var a=this._cosinusAngle(r,i,o,r),s=Math.sqrt(1-a*a);return 180*Math.atan2(s,a)/Math.PI}},{key:"_isHelixStart",value:function(e,t){return this._helixFlags[t][e]===OE.START||this._helixFlags[t][e]===OE.START_AND_END}},{key:"_buildBetaSheets",value:function(){for(var e=[],t=0;t<this._complex._chains.length;++t){var n=this._chainLengths[t];if(!(n<=4))for(var r=this._complex._chains[t].getResidues(),i=t;i<this._complex._chains.length;++i){var o=this._chainLengths[i];if(!(o<=4))for(var a=this._complex._chains[i].getResidues(),s=1;s+1<n;++s){var u=r[s],l=1;for(i===t&&(l=s+3);l+1<o;++l){var c=a[l],f=this._testBridge(r,s,a,l);if(f!==kE.NO_BRIDGE){var h,d=!1,p=_E(e);try{for(p.s();!(h=p.n()).done;){var v=h.value;if(f===v.type&&u._index===v.i[v.i.length-1]+1){if(f===kE.PARALLEL&&v.j[v.j.length-1]+1===c._index){v.i.push(u._index),v.j.push(c._index),d=!0;break}if(f===kE.ANTI_PARALLEL&&v.j[0]-1===c._index){v.i.push(u._index),v.j.unshift(c._index),d=!0;break}}}}catch(ie){p.e(ie)}finally{p.f()}d||e.push({type:f,i:[u._index],chainI:u.getChain()._index,j:[c._index],chainJ:c.getChain()._index})}}}}}e.sort((function(e,t){return e.chainI<t.chainI||e.chainI===t.chainI&&e.i[0]<t.i[0]?-1:1}));for(var m=0;m<e.length;++m)for(var g=m+1;g<e.length;++g){var y=e[m].i[0],b=e[m].i[e[m].i.length-1],x=e[m].j[0],_=e[m].j[e[m].j.length-1],w=e[g].i[0],S=e[g].i[e[g].i.length-1],E=e[g].j[0],k=e[g].j[e[g].j.length-1];if(!(e[m].type!==e[g].type||this._hasChainBreak(Math.min(y,w),Math.max(b,S))||this._hasChainBreak(Math.min(x,E),Math.max(_,k))||w-b>=6||b>=w&&y<=S)){(e[m].type===kE.PARALLEL?E-_<6&&w-b<3||E-_<3:x-k<6&&w-b<3||x-k<3)&&(e[m].i=e[m].i.concat(e[g].i),e[m].type===kE.PARALLEL?e[m].j=e[m].j.concat(e[g].j):e[m].j=e[g].j.concat(e[m].j),e.splice(g--,1))}}for(var O=new Set,A=0;A<e.length;++A)O.add(e[A]);for(var C=1,M=0;O.size>0;){var T=O.values().next().value;O.delete(T);var P=new Set;P.add(T);var R=void 0;do{R=new Set;var I,L=_E(P.values());try{for(L.s();!(I=L.n()).done;){var N,j=I.value,D=_E(O.values());try{for(D.s();!(N=D.n()).done;){var B=N.value;this._areBridgesLinked(j,B)&&R.add(B)}}catch(ie){D.e(ie)}finally{D.f()}}}catch(ie){L.e(ie)}finally{L.f()}var z,F=_E(R.values());try{for(F.s();!(z=F.n()).done;)T=z.value,P.add(T),O.delete(T)}catch(ie){F.e(ie)}finally{F.f()}}while(R.size>0);var V,U=_E(P.values());try{for(U.s();!(V=U.n()).done;)(T=V.value).ladder=M,T.sheet=C,T.link=P,++M}catch(ie){U.e(ie)}finally{U.f()}++C}for(var Z=0;Z<e.length;++Z){for(var H=e[Z],G=0,W=0,q=0;q<H.i.length;++q)if(this._betaPartners[H.i[q]][0]){G=1;break}for(var K=0;K<H.j.length;++K)if(this._betaPartners[H.j[K]][0]){W=1;break}var Y=AE.BRIDGE;if(H.i.length>1&&(Y=AE.STRAND),H.type===kE.PARALLEL){for(var X=0,$=0;$<H.i.length;++$)this._betaPartners[H.i[$]][G]={residue:H.j[X++],ladder:H.ladder,parallel:!0};X=0;for(var J=0;J<H.j.length;++J)this._betaPartners[H.j[J]][W]={residue:H.i[X++],ladder:H.ladder,parallel:!0}}else{for(var Q=H.j.length-1,ee=0;ee<H.i.length;++ee)this._betaPartners[H.i[ee]][G]={residue:H.j[Q--],ladder:H.ladder,parallel:!1};Q=H.i.length-1;for(var te=0;te<H.j.length;++te)this._betaPartners[H.j[te]][W]={residue:H.i[Q--],ladder:H.ladder,parallel:!1}}for(var ne=H.i[0];ne<=H.i[H.i.length-1];++ne)this._ss[ne]!==AE.STRAND&&(this._ss[ne]=Y,this._sheet[ne]=H.sheet);for(var re=H.j[0];re<=H.j[H.j.length-1];++re)this._ss[re]!==AE.STRAND&&(this._ss[re]=Y,this._sheet[re]=H.sheet)}}},{key:"_testBridge",value:function(e,t,n,r){var i=kE.NO_BRIDGE,o=e[t-1]._index,a=e[t]._index,s=e[t+1]._index,u=n[r-1]._index,l=n[r]._index,c=n[r+1]._index,f=this._hbonds.isBond.bind(this._hbonds);return f(s,l)&&f(l,o)||f(c,a)&&f(a,u)?i=kE.PARALLEL:(f(s,u)&&f(c,o)||f(l,a)&&f(a,l))&&(i=kE.ANTI_PARALLEL),i}},{key:"_areBridgesLinked",value:function(e,t){var n,r=new Set(e.i),i=new Set(e.j),o=_E(t.i);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(r.has(a)||i.has(a))return!0}}catch(c){o.e(c)}finally{o.f()}var s,u=_E(t.j);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(r.has(l)||i.has(l))return!0}}catch(c){u.e(c)}finally{u.f()}return!1}},{key:"_hasChainBreak",value:function(e,t){for(var n=e+1;n<=t;++n)if(this._complex._residues[n]._sequence!==this._complex._residues[n-1]._sequence+1)return!0;return!1}}]),e}();CE.StructureType=AE;var ME=CE.StructureType,TE=uS.Type,PE=(Uw(SE={},ME.HELIX_ALPHA,1),Uw(SE,ME.HELIX_PI,3),Uw(SE,ME.HELIX_310,5),SE),RE=(Uw(EE={},ME.BRIDGE,TE.BRIDGE),Uw(EE,ME.TURN,TE.TURN),Uw(EE,ME.BEND,TE.BEND),Uw(EE,ME.LOOP,TE.COIL),EE),IE=function(){function e(){O_(this,e),this._chains=[],this._components=[],this._helices=[],this._sheets=[],this.structures=[],this._residueTypes=Object.create(eS.StandardTypes),this._atoms=[],this._residues=[],this._bonds=[],this._sgroups=[],this._molecules=[],this._maskNeedsUpdate=!1,this.metadata={},this.symmetry=[],this.units=[new KS(this)],this._currentUnit=0}return C_(e,[{key:"addAtom",value:function(e){var t=this._atoms.length;return this._atoms.push(e),t}},{key:"addSheet",value:function(e){var t=this._sheets.length;return this._sheets.push(e),t}},{key:"addHelix",value:function(e){var t=this._helices.length;return this._helices.push(e),t}},{key:"getAtoms",value:function(){return this._atoms}},{key:"getBonds",value:function(){return this._bonds}},{key:"getAtomCount",value:function(){return this._atoms.length}},{key:"addResidue",value:function(e){var t=this._residues.length;return this._residues.push(e),t}},{key:"updateToFrame",value:function(e){this.forEachChain((function(t){t.updateToFrame(e)}))}},{key:"addResidueType",value:function(e){return this._residueTypes[e]=new eS(e,"Unknown","")}},{key:"getResidueCount",value:function(){return this._residues.length}},{key:"getResidues",value:function(){return this._residues}},{key:"getSGroupCount",value:function(){return this._sgroups.length}},{key:"getSGroups",value:function(){return this._sgroups}},{key:"getAtomByFullname",value:function(e){var t=e.split(".");if(3!==t.length)return null;var n=t[0],r=parseInt(t[1],10);if(Number.isNaN(r))return null;var i=t[2].toUpperCase(),o=null;return this.forEachChain((function(e){o||0===e._name.localeCompare(n)&&e.forEachResidue((function(e){o||e._sequence===r&&e.forEachAtom((function(e){o||0===i.localeCompare(e.name)&&(o=e)}))}))})),o}},{key:"addChain",value:function(e){var t=new sS(this,e);return this._chains.push(t),t}},{key:"getChain",value:function(e){for(var t=0,n=this._chains.length;t<n;++t){var r=this._chains[t];if(r.getName()===e)return r}return null}},{key:"getChainCount",value:function(){return this._chains.length}},{key:"getMolecules",value:function(){return this._molecules}},{key:"getMoleculeCount",value:function(){return this._molecules.length}},{key:"forEachAtom",value:function(e){for(var t=this._atoms,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"forEachBond",value:function(e){for(var t=this._bonds,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"forEachResidue",value:function(e){for(var t=this._residues,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"forEachChain",value:function(e){for(var t=this._chains,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"forEachMolecule",value:function(e){for(var t=this._molecules,n=t.length,r=0;r<n;++r)e(t[r])}},{key:"forEachSGroup",value:function(e){for(var t=this._sgroups,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"forEachComponent",value:function(e){for(var t=this._components,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"forEachVisibleComponent",value:function(e){for(var t=this._components,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"addBond",value:function(e,t,n,r,i){var o=new qw(e,t,n,r,i);return this._bonds.push(o),o}},{key:"getBondCount",value:function(){return this._bonds.length}},{key:"getResidueType",value:function(e){return this._residueTypes[e]||null}},{key:"getUnifiedSerial",value:function(e,t,n){return t+65536*n+16777216*e}},{key:"splitUnifiedSerial",value:function(e){var t=65536,n=16777216,r=Math.floor(e/n),i=e-r*n,o=Math.floor(i/t);return{chain:r,serial:i-o*t,iCode:o}}},{key:"_fillCmpEdit",value:function(){var e=this,t=this._components;function n(){var n=new $S(e);return n._index=t.length,t[n._index]=n,n}this.forEachChain((function(e){var t=e._residues,r=t.length;if(!(r<1))for(var i=n(),o=t[0]._index,a=0;a<r;++a){var s=t[a];s._component=i;var u=a===r-1?null:t[a+1];u&&s.isConnected(u)&&s._index===u._index-1||(i.setSubDivs([{start:o,end:s._index}]),u&&(o=u._index,i=n()))}}))}},{key:"_fillCmpNoedit",value:function(){var e=new $S(this);e._index=0;var t=this._residues,n=t.length;if(0!==n){for(var r=[],i=0,o=0;o<n;++o){var a=t[o];a._component=e;var s=o===n-1?null:t[o+1];s&&a.isConnected(s)||(r[r.length]={start:i,end:o},s&&(i=o+1))}e.setSubDivs(r),this._components[e._index]=e}}},{key:"_fillComponents",value:function(e){e?this._fillCmpEdit():this._fillCmpNoedit()}},{key:"getCurrentUnit",value:function(){return this._currentUnit}},{key:"getDefaultBoundaries",value:function(){return this.units[0].getBoundaries()}},{key:"getBoundaries",value:function(){return this.units[this._currentUnit].getBoundaries()}},{key:"getTransforms",value:function(){return this.units[this._currentUnit].getTransforms()}},{key:"getSelector",value:function(){return this.units[this._currentUnit].getSelector()}},{key:"resetCurrentUnit",value:function(){this._currentUnit=0,this.setCurrentUnit(1)}},{key:"setCurrentUnit",value:function(e){return null!==e&&void 0!==e&&e!==this._currentUnit&&e>=0&&e<this.units.length&&(this._currentUnit=e,!0)}},{key:"_computeBounds",value:function(){for(var e=this.units,t=0,n=e.length;t<n;++t)e[t].computeBoundaries()}},{key:"onAtomPositionChanged",value:function(){this.forEachChain((function(e){e._finalize()})),this.forEachComponent((function(e){e.update()})),this._computeBounds(),this._finalizeBonds(),this.forEachSGroup((function(e){e._rebuildSGroupOnAtomChange()}))}},{key:"update",value:function(){this._maskNeedsUpdate&&(this.updateStructuresMask(),this._maskNeedsUpdate=!1)}},{key:"_finalizeBonds",value:function(){for(var e=this.getBonds(),t=e.length,n=0;n<t;++n)e[n]._index=n}},{key:"finalize",value:function(e){e=e||{};var t,n,r=this._bonds;for(t=r.length-1;t>=0;t--){var i=r[t];null===i._left||null===i._right?r.splice(t,1):(i._left.bonds.push(i),i._right.bonds.push(i))}var o=this._residues;for(t=0,n=o.length;t<n;++t)o[t]._finalize();this.forEachChain((function(e){e._finalize()}));var a=this.units;for(t=0,n=a.length;t<n;++t)a[t].finalize();this.setCurrentUnit(1);var s={};for(t=0,n=o.length;t<n;++t){var u=o[t];s[this.getUnifiedSerial(u.getChain().getName().charCodeAt(0),u.getSequence(),u.getICode().charCodeAt(0))]=u}var l=this.structures;for(t=0,n=l.length;t<n;++t)l[t]._finalize(e.serialAtomMap,s,this);var c=this._helices;for(t=0,n=c.length;t<n;++t)c[t]._finalize(e.serialAtomMap,s,this);var f=this._sheets;for(t=0,n=f.length;t<n;++t)f[t]._finalize(e.serialAtomMap,s,this);this._computeBounds();var h=this._atoms;for(t=0,n=h.length;t<n;++t){h[t].index=t}if(e.needAutoBonding){var d=new tE(this);d.build(),d.destroy()}var p=this._chains;for(t=0,n=p.length;t<n;++t)p[t]._index=t;for(t=0,n=o.length;t<n;++t)o[t]._index=t;for(t=0,n=h.length;t<n;++t){var v=h[t];if(v.flags&Zw.Flags.HYDROGEN&&1===v.bonds.length){var m=v.bonds[0];(m._left!==v&&m._left||m._right).flags&Zw.Flags.CARBON&&(v.flags|=Zw.Flags.NONPOLARH)}}this._finalizeBonds(),this._fillComponents(e.enableEditing);var g=new dE(this);g.markCycles(),e.detectAromaticLoops&&g.detectCycles(),this._finalizeMolecules()}},{key:"_finalizeMolecules",value:function(){for(var e=0;e<this._molecules.length;e++)for(var t=this._molecules[e],n=t.residues.length,r=0;r<n;r++){t.residues[r]._molecule=t}}},{key:"updateStructuresMask",value:function(){var e=function(e){return e.collectMask()};this.forEachResidue(e),this.forEachChain(e),this.forEachMolecule(e)}},{key:"countAtomsByMask",value:function(e){var t=0;return this.forEachAtom((function(n){0!==(n.mask&e)&&t++})),t}},{key:"getNumAtomsBySelector",value:function(e){var t=0;return this.forEachAtom((function(n){e.includesAtom(n)&&t++})),t}},{key:"resetAtomMask",value:function(e){this.forEachAtom((function(t){t.mask=e}))}},{key:"markAtoms",value:function(e,t){var n=t,r=~n,i=0,o=qS.keyword("And")(e,this.getSelector());return this.forEachAtom((function(e){o.includesAtom(e)?(e.mask|=n,i++):e.mask&=r})),this._maskNeedsUpdate=!0,i}},{key:"markAtomsAdditionally",value:function(e,t){var n=t,r=0;return this.forEachAtom((function(i){e.includesAtom(i)&&(i.mask&t)!==t&&(i.mask|=n,r++)})),r}},{key:"clearAtomBits",value:function(e){var t=~e;this.forEachAtom((function(e){e.mask&=t}));var n=function(e){e._mask&=t};this.forEachAtom(n),this.forEachResidue(n),this.forEachChain(n),this.forEachMolecule(n)}},{key:"getAtomNames",value:function(){if(this.hasOwnProperty("_atomNames"))return this._atomNames;var e={};return this.forEachAtom((function(t){e[t.name]=1})),this._atomNames=Object.keys(e),this._atomNames}},{key:"getElements",value:function(){if(this.hasOwnProperty("_elements"))return this._elements;var e={};return this.forEachAtom((function(t){e[t.element.name]=1})),this._elements=Object.keys(e),this._elements}},{key:"getResidueNames",value:function(){if(this.hasOwnProperty("_residueNames"))return this._residueNames;var e={};return this.forEachResidue((function(t){e[t._type._name]=1})),this._residueNames=Object.keys(e),this._residueNames}},{key:"getChainNames",value:function(){if(this.hasOwnProperty("_chainNames"))return this._chainNames;var e={};return this.forEachChain((function(t){e[t._name]=1})),this._chainNames=Object.keys(e),this._chainNames}},{key:"getAltLocNames",value:function(){if(this.hasOwnProperty("_altlocNames"))return this._altlocNames;var e={};return this.forEachAtom((function(t){e[String.fromCharCode(t.location)]=1})),this._altlocNames=Object.keys(e),this._altlocNames}},{key:"getVoxelWorld",value:function(){if(!this.hasOwnProperty("_voxelWorld"))try{this._voxelWorld=new mE(this.getDefaultBoundaries().boundingBox,new lh(5,5,5)),this._voxelWorld.addAtoms(this)}catch(e){nw.warn("Unable to create voxel world"),this._voxelWorld=null}return this._voxelWorld}},{key:"addElement",value:function(e,t,n,r){for(var i=e.length,o=0;o<i;++o){var a=e[o];r(a,n),t.push(a)}}},{key:"joinComplexes",value:function(e){this._chains=[],this._components=[],this._helices=[],this._sheets=[],this.structures=[],this._atoms=[],this._residues=[],this._bonds=[],this._sgroups=[];var t=this,n=0,r=0,i=0,o=0,a=0;function s(e,t){e.serial+=t,e.index+=t}function u(e,t){e._index+=t}function l(e,t){e._index+=t}function c(e,n){e._complex=t,e._index+=n}function f(e,n){e._complex=t,e._index+=n}function h(){}for(var d=0;d<e.length;++d){var p=e[d];for(var v in this.addElement(p._atoms,this._atoms,n,s),this.addElement(p._bonds,this._bonds,r,u),this.addElement(p._residues,this._residues,i,l),this.addElement(p._chains,this._chains,o,c),this.addElement(p._sheets,this._sheets,0,h),this.addElement(p._helices,this._helices,0,h),this.addElement(p._sgroups,this._sgroups,0,h),this.addElement(p._components,this._components,a,f),this.addElement(p.structures,this.structures,0,h),p._residueTypes)p._residueTypes.hasOwnProperty(v)&&(this._residueTypes[v]=p._residueTypes[v]);n+=p._atoms.length,r+=p._bonds.length,i+=p._residues.length,o+=p._chains.length,a+=p._components.length}this._computeBounds()}},{key:"dssp",value:function(){for(var e,t,n=new CE(this),r=this.structures=[],i=this._helices=[],o=this._sheets=[],a=function(e){var t=o[e];return t||(t=o[e]=new bS(String(e),0)),t},s=0,u=null,l=0,c=this._residues.length;l<c;++l){var f=n._ss[l],h=this._residues[l],d=n._sheet[l];if(f!==e||d!==t){var p=PE[f],v=RE[f];if(f===ME.STRAND){var m=a(d);u=new yS(m,h,h,0,null,null),m.addStrand(u)}else void 0!==p?(s++,u=new pS(p,h,h,s,String(s),"",1),i.push(u)):u=void 0!==v?new uS(v,h,h):null;u&&r.push(u),h._secondary=u,e=f,t=d}else h._secondary=u,u&&(u.term=h),u instanceof pS&&u.length++}this._sheets=o.filter((function(e){return!0}))}}]),e}();function LE(e){var t=2;for(e=e-1>>1;e;)t<<=1,e>>=1;return t}IE.prototype.id="Complex",IE.prototype.name="";var NE=function(){function e(t,n,r,i,o,a){if(O_(this,e),this._box=r.clone(),this._dimVec=Math.max(Math.floor(i||1),1),this._volumeInfo=a,n instanceof Array){var s=j_(n,3);this._dimX=s[0],this._dimY=s[1],this._dimZ=s[2]}else this._dimX=n.x,this._dimY=n.y,this._dimZ=n.z;switch(this._dimX=Math.max(Math.floor(this._dimX),1),this._dimY=Math.max(Math.floor(this._dimY),1),this._dimZ=Math.max(Math.floor(this._dimZ),1),this._rowElements=this._dimVec*this._dimX,this._planeElements=this._rowElements*this._dimY,this._totalElements=this._planeElements*this._dimZ,this._data=o||mw.allocateTyped(t,this._totalElements),this._dimVec){case 1:break;case 2:this.getValue=function(e,t,n){var r=e*this._dimVec+t*this._rowElements+n*this._planeElements;return[this._data[r],this._data[r+1]]},this.setValue=function(e,t,n,r,i){var o=e*this._dimVec+t*this._rowElements+n*this._planeElements;this._data[o]=r,this._data[o+1]=i},this.addValue=function(e,t,n,r,i){var o=e*this._dimVec+t*this._rowElements+n*this._planeElements;this._data[o]+=r,this._data[o+1]+=i};break;case 3:this.getValue=function(e,t,n){var r=e*this._dimVec+t*this._rowElements+n*this._planeElements;return[this._data[r],this._data[r+1],this._data[r+2]]},this.setValue=function(e,t,n,r,i,o){var a=e*this._dimVec+t*this._rowElements+n*this._planeElements;this._data[a]=r,this._data[a+1]=i,this._data[a+2]=o},this.addValue=function(e,t,n,r,i,o){var a=e*this._dimVec+t*this._rowElements+n*this._planeElements;this._data[a]+=r,this._data[a+1]+=i,this._data[a+2]+=o};break;default:throw new Error("Volume: invalid vector dimension")}}return C_(e,[{key:"getValue",value:function(e,t,n){return this._data[e+t*this._rowElements+n*this._planeElements]}},{key:"setValue",value:function(e,t,n,r){this._data[e+t*this._rowElements+n*this._planeElements]=r}},{key:"addValue",value:function(e,t,n,r){this._data[e+t*this._rowElements+n*this._planeElements]+=r}},{key:"getDimensions",value:function(){return[this._dimX,this._dimY,this._dimZ]}},{key:"getBox",value:function(){return this._box}},{key:"getVolumeInfo",value:function(){return this._volumeInfo}},{key:"getCellSize",value:function(){var e=new lh;this._box.getSize(e);var t=new lh;return t.x=this._dimX>1?e.x/(this._dimX-1):0,t.y=this._dimY>1?e.y/(this._dimY-1):0,t.z=this._dimZ>1?e.z/(this._dimZ-1):0,t}},{key:"computeGradient",value:function(){if(1!==this._dimVec)return null;var t=new e(Float32Array,[this._dimX,this._dimY,this._dimZ],this._box,3),n=this.getCellSize(),r=new lh(-.5/n.x,-.5/n.y,-.5/n.z);function i(e,t,n){return Math.min(n,Math.max(t,e))}var o=this._dimX,a=this._dimY,s=this._dimZ,u=this._data;function l(e,t,n){return u[n*o*a+t*o+e]}for(var c=0;c<s;++c)for(var f=i(c-1,0,s-1),h=i(c+1,0,s-1),d=0;d<a;++d)for(var p=i(d-1,0,a-1),v=i(d+1,0,a-1),m=0;m<o;++m){var g=i(m-1,0,o-1),y=i(m+1,0,o-1);t.setValue(m,d,c,(l(y,d,c)-l(g,d,c))*r.x,(l(m,v,c)-l(m,p,c))*r.y,(l(m,d,h)-l(m,d,f))*r.z)}return t}},{key:"normalize",value:function(){for(var e=this._data,t=e[0],n=e[0],r=1;r<e.length;++r)t=Math.min(t,e[r]),n=Math.max(n,e[r]);var i=1/(n-t);if(0!==i)for(var o=0;o<e.length;++o)e[o]=i*(e[o]-t)}},{key:"getTiledTextureStride",value:function(){return[this._dimX+2,this._dimY+2]}},{key:"buildTiledTexture",value:function(){var e=Math.ceil(Math.sqrt(this._dimZ*this._dimY/this._dimX)),t=e*(this._dimX+2)-1;t=LE(t),e=Math.floor(t/(this._dimX+2));var n=Math.ceil(this._dimZ/e),r=n*(this._dimY+2)-1;r=LE(r);for(var i,o,a=new Uint8Array(t*r),s=0;s<n;++s)for(var u=0;u<this._dimY;++u){i=s*e*this._planeElements+u*this._rowElements,o=t*(s*(this._dimY+2)+u);for(var l=0;l<e;++l){for(var c=0;c<this._dimX;++c)a[o++]=255*this._data[i++];a[o++]=255*this._data[i-1],l<e-1&&(i+=this._planeElements-this._rowElements,a[o++]=255*this._data[i])}}for(var f=0;f<n;++f){o=(i=t*(f*(this._dimY+2)+this._dimY-1))+t;for(var h=0;h<t;++h)a[o++]=a[i++];if(f<n-1){o=(i=t*(f+1)*(this._dimY+2))-t;for(var d=0;d<t;++d)a[o++]=a[i++]}}var p=new $g(a,t,r,1024,ff,Yc,rf,rf,lf,lf);return p.needsUpdate=!0,p}},{key:"getData",value:function(){return this._data}},{key:"getDirectIdx",value:function(e,t,n){return e*this._dimVec+t*this._rowElements+n*this._planeElements}},{key:"getStrideX",value:function(){return this._dimVec}},{key:"getStrideY",value:function(){return this._rowElements}},{key:"getStrideZ",value:function(){return this._planeElements}}]),e}();NE.prototype.id="Volume";var jE=function(){function e(t,n,r){O_(this,e),this.complex=t,this.name=n||"",this.residues=[],this.mask=1,this.index=r||-1}return C_(e,[{key:"forEachResidue",value:function(e){for(var t=this.residues,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"collectMask",value:function(){for(var e=4294967295,t=this.residues,n=0,r=t.length;n<r;++n)e&=t[n]._mask;this.mask=e}}]),e}(),DE={Atom:Zw,Element:Hw,Bond:qw,Residue:Qw,ResidueType:eS,Chain:sS,Helix:pS,Strand:yS,Sheet:bS,SGroup:xS,Assembly:XS,Complex:IE,Volume:NE,VoxelWorld:mE,selectors:qS,Molecule:jE};function BE(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var zE=function(e){P_(n,e);var t=BE(n);function n(e){var r;O_(this,n);var i=M_(r=t.call(this));return r._element=e,r._element.style.position="absolute",r.addEventListener("removed",(function(){null!==i._element.parentNode&&i._element.parentNode.removeChild(i._element)})),r}return C_(n,[{key:"getElement",value:function(){return this._element}},{key:"setTransparency",value:function(e){var t=this.getElement();if(null!==t)if(1!==e){t.style.display="inline";var n=1-e,r=n.toString(),i=100*n;t.style.opacity=r,t.style.filter="alpha(opacity=".concat(i,")")}else t.style.display="none"}},{key:"clone",value:function(){var e=new n(this._element);return e.copy(this),e}}]),n}(fd);function FE(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var VE=function(e){P_(n,e);var t=FE(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"raycast",value:function(e,t){if(this.visible)for(var n=this.children,r=0,i=n.length;r<i;++r)n[r].raycast(e,t)}},{key:"enableSubset",value:function(e,t){for(var n=this.children,r=0,i=n.length;r<i;++r)n[r].enableSubset&&n[r].enableSubset(e,t)}},{key:"disableSubset",value:function(e,t){for(var n=this.children,r=0,i=n.length;r<i;++r)n[r].disableSubset&&n[r].disableSubset(e,t)}},{key:"isEmpty",value:function(){return 0===this.children.length}},{key:"updateToFrame",value:function(e){for(var t=this.children,n=0,r=t.length;n<r;++n)t[n].updateToFrame&&t[n].updateToFrame(e)}},{key:"getSubset",value:function(e,t){for(var n=[],r=this.children,i=0,o=r.length;i<o;++i)r[i].getSubset&&Array.prototype.push.apply(n,r[i].getSubset(e,t));return n}}]),n}(pg),UE="uniform mat4 projectionMatrix;\r\nuniform mat4 modelViewMatrix;\r\n\r\nattribute vec2 uv;\r\nattribute vec3 position;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n  vUv = uv;\r\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n}\r\n";function ZE(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var HE={DEFAULT:0,VOLUME:1,TRANSPARENT:2,PREPASS_TRANSPARENT:3,VOLUME_BFPLANE:4,COLOR_FROM_POSITION:5,SHADOWMAP:6},GE=[HE.DEFAULT,HE.TRANSPARENT];fd.prototype.resetTransform=function(){this.position.set(0,0,0),this.quaternion.set(0,0,0,1),this.scale.set(1,1,1)},fd.prototype.updateMatrixWorldRecursive=function(){null!=this.parent&&this.parent.updateMatrixWorldRecursive(),this.updateMatrixWorld()},fd.prototype.addSavingWorldTransform=function(){var e=new Fh;return function(t){t instanceof fd&&(e.copy(this.matrixWorld).invert(),e.multiply(t.matrixWorld),t.matrix.copy(e),t.matrix.decompose(t.position,t.quaternion,t.scale),this.add(t))}}(),xg.prototype.renderDummyQuad=function(){var e=new Rd({transparent:!0,opacity:0,depthWrite:!1}),t=new Eg,n=new fp(new Ip(.01,.01),e);t.add(n);var r=new Zp(-.5,.5,.5,-.5,-1e4,1e4);return r.position.z=100,function(){this.render(t,r)}}(),xg.prototype.renderScreenQuad=function(){var e=new Eg,t=new fp(new Ip(1,1));e.add(t);var n=new Zp(-.5,.5,.5,-.5,-1e4,1e4);return n.position.z=100,function(r){t.material=r,this.render(e,n)}}(),Fh.prototype.isIdentity=function(){var e=new Fh;return function(){return e.equals(this)}}(),Fh.prototype.applyToPointsArray=function(e,t,n){if(!e||!t||t<3)return e;n=n||0;for(var r=this.elements,i=0;i<e.length;i+=t){var o=e[i],a=e[i+1],s=e[i+2],u=1/(r[3]*o+r[7]*a+r[11]*s+r[15]);e[i]=(r[0]*o+r[4]*a+r[8]*s+r[12]*n)*u,e[i+1]=(r[1]*o+r[5]*a+r[9]*s+r[13]*n)*u,e[i+2]=(r[2]*o+r[6]*a+r[10]*s+r[14]*n)*u}return e};var WE=function(e){P_(n,e);var t=ZE(n);function n(e){return O_(this,n),void 0===e.uniforms&&(e.uniforms={}),e.uniforms.srcTex={type:"t",value:null},e.vertexShader=UE,e.transparent=!1,e.depthTest=!1,e.depthWrite=!1,t.call(this,e)}return C_(n)}(Hp);function qE(e){e.traverse((function(e){(e instanceof fp||e instanceof hy||e instanceof ly)&&e.geometry.dispose()})),function(e){for(var t=e.children,n=0,r=t.length;n<r;++n){var i=t[n];i.parent=null,i.dispatchEvent({type:"removed"})}e.children=[]}(e)}xg.prototype.renderScreenQuadFromTex=function(){var e=new WE({uniforms:{opacity:{type:"f",value:1}},fragmentShader:"precision highp float;\r\n\r\nvarying vec2 vUv;\r\nuniform sampler2D srcTex;\r\nuniform float opacity;\r\n\r\nvoid main() {\r\n  vec4 color = texture2D(srcTex, vUv);\r\n  gl_FragColor = vec4(color.xyz, color.a * opacity);\r\n}\r\n",transparent:!0});return function(t,n){e.uniforms.srcTex.value=t,e.transparent=n<1,e.uniforms.opacity.value=n,this.renderScreenQuad(e)}}(),xg.prototype.renderScreenQuadFromTexWithDistortion=function(){var e=new WE({uniforms:{coef:{type:"f",value:1}},fragmentShader:"precision highp float;\r\n\r\nvarying vec2 vUv;\r\nuniform sampler2D srcTex;\r\nuniform float coef;\r\n\r\nvoid main() {\r\n  vec2 uv = vUv * 2.0 - 1.0;\r\n  float r2 = dot(uv, uv);\r\n  vec2 tc = uv * (1.0 + coef * r2);\r\n  if (!all(lessThan(abs(tc), vec2(1.0))))\r\n    discard;\r\n  tc = 0.5 * (tc + 1.0);\r\n  gl_FragColor = texture2D(srcTex, tc);\r\n}\r\n"});return function(t,n){e.uniforms.srcTex.value=t,e.uniforms.coef.value=n,this.renderScreenQuad(e)}}(),bp.prototype.setMinimalFov=function(e){this.aspect>=1?this.fov=e:this.fov=Xf.radToDeg(2*Math.atan(Math.tan(.5*Xf.degToRad(e))/this.aspect))},Vx.prototype.updateHalfSized=function(e,t){var n=e.aspect,r=e.fov;e.aspect=n/2,e.setMinimalFov(t),e.updateProjectionMatrix(),this.update(e),e.aspect=n,e.fov=r,e.updateProjectionMatrix()},bp.prototype.setDistanceToFit=function(e,t){this.position.z=e/Math.sin(.5*Xf.degToRad(t))},l_.prototype.intersectVisibleObject=function(e,t,n,r){var i=this.intersectObject(e,!1);if(0===i.length)return null;var o,a=Math.min(t.near,n),s=i[0],u=new lh;for(o=0;o<i.length&&(s=i[o],u.copy(s.point),u.applyMatrix4(t.matrixWorldInverse),!(u.z<=-a));++o);if(o===i.length)return null;var l=Math.min(t.far,r);return u.copy(s.point),u.applyMatrix4(t.matrixWorldInverse),u.z<=-l?null:s},Fh.prototype.extractScale=function(){var e=new lh;return function(t){void 0===t&&(nw.debug("extractScale(): new is too expensive operation to do it on-the-fly"),t=e.clone());var n=this.elements;return t.x=e.set(n[0],n[1],n[2]).length(),t.y=e.set(n[4],n[5],n[6]).length(),t.z=e.set(n[8],n[9],n[10]).length(),this.determinant()<0&&(t.x=-t.x),t}}(),Nd.prototype.copyAtList=function(e,t){console.assert(this.itemSize===e.itemSize,"false: BufferAttribute.copyAtList buffers have different item size.");for(var n=this.itemSize,r=0,i=t.length;r<i;++r)for(var o=0;o<n;++o)this.array[r*n+o]=e.array[t[r]*n+o];return this};var KE=Ax.prototype.copy;Ax.prototype.copy=function(e){KE.call(this,e),void 0===this.instanceCount&&(this.instanceCount=1/0)};var YE={calcCylinderMatrix:function(e,t,n){var r=e.clone().lerp(t,.5),i=new Fh;i.makeScale(n,e.distanceTo(t),n);var o=new Fh;o.makeRotationX(Math.PI/2);var a=new Fh,s=new lh(0,1,0);return a.lookAt(r,t,s),a.multiply(o),a.multiply(i),a.setPosition(r),a},calcChunkMatrix:function(e,t,n,r){var i=new Fh;i.makeScale(r.x,r.y,0);var o=new Fh;return o.lookAt(e,t,n),o.multiply(i),o.setPosition(e),o},groupHasGeometryToRender:function(e){var t=!1;return e.traverse((function(e){(e.hasOwnProperty("geometry")||e instanceof zE)&&(t=!0)})),t},buildDistorionMesh:function(e,t,n){function r(e){for(var t=0,r=e,i=1;Math.abs(r-t)>1e-5;)t=r,r=e/((i=1+n*r)*i);return 1/i}for(var i=new Ip(2,2,e,t),o=i.getAttribute("position"),a=0;a<o.count;++a){var s=o.array[3*a],u=o.array[3*a+1],l=r(s*s+u*u);o.setXY(a,l*s,l*u)}return i},RCGroup:VE,fillArray:function(e,t,n,r){n="undefined"!==typeof n?n:0,r="undefined"!==typeof r?r:e.length;for(var i=n;i<r;++i)e[i]=t},clearTree:qE,destroyObject:function(e){qE(e),e.parent?e.parent.remove(e):e.dispatchEvent({type:"removed"})},belongToSelectLayers:function(e){for(var t=0;t<GE.length;t++)if(1===(e.layers.mask>>GE[t]&1))return!0;return!1},processObjRenderOrder:function(e,t){var n=+("BA"!==t);e.traverse((function(e){e.isGroup&&(e.renderOrder=n)}))},applySelectionMaterial:function(e){e.traverse((function(e){"material"in e&&(e.material=e.material.clone(!0),e.material.setValues({depthFunc:3,overrideColor:!0,fog:!1,lights:!1,shadowmap:!1}),e.material.setUberOptions({fixedColor:new Pd(16776960),zOffset:-1e-6}))}))},getMiddlePoint:function(e,t,n){var r=n||new lh;return r.set(0,0,0),r.addScaledVector(e,.5),r.addScaledVector(t,.5),r},LAYERS:HE};function XE(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var $E={boundingBox:new hh(new lh(-1,-1,-1),new lh(1,1,1)),boundingSphere:new Ph(new lh(0,0,0),1)},JE=function(e){P_(n,e);var t=XE(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,e,r)).name=e,i._dataSource=r,i}return C_(n,[{key:"release",value:function(){this.parent&&this.parent.remove(this)}},{key:"getDataSource",value:function(){return this._dataSource}},{key:"getBoundaries",value:function(){return $E}}]),n}(YE.RCGroup);function QE(e){return function(e){if(Array.isArray(e))return L_(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ek(e){return null===e||void 0===e||Array.isArray(e)?e:[e]}var tk=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["id"];O_(this,e),this._list=[],this._dict={},this._indices=QE(r),this._indices.forEach((function(e){t._dict[e]={}})),n.forEach((function(e){return t.register(e)}))}return C_(e,[{key:"register",value:function(t){var n=this;e.registerInList(this._list,t),this._indices.forEach((function(r){e.registerInDict(n._dict[r],ek(t[r]),t)}))}},{key:"unregister",value:function(t){var n=this;e.unregisterFromList(this._list,t),this._indices.forEach((function(r){e.unregisterFromDict(n._dict[r],ek(t[r]),t)}))}},{key:"all",get:function(){return QE(this._list)}},{key:"first",get:function(){return this._list[0]}},{key:"keys",value:function(e){return Object.keys(this._dict[e||this._indices[0]])}},{key:"get",value:function(e,t){var n=this._dict[t||this._indices[0]];if(n){var r=n[e&&e.toLowerCase()];return r&&r.length>0?r[0]:void 0}}}],[{key:"registerInList",value:function(e,t){e.includes(t)||e.push(t)}},{key:"unregisterFromList",value:function(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},{key:"registerInDict",value:function(e,t,n){t.forEach((function(t){t=t.toLowerCase();var r=e[t]=e[t]||[];r.includes(n)||r.push(n)}))}},{key:"unregisterFromDict",value:function(e,t,n){t.forEach((function(t){t=t.toLowerCase();var r=e[t];if(r){var i=r.indexOf(n);-1!==i&&r.splice(i,1),0===r.length&&delete e[t]}}))}}]),e}();function nk(e){Object.defineProperties(e,{logger:{get:function(){return this.context&&this.context.logger?this.context.logger:nw}},settings:{get:function(){return this.context&&this.context.settings?this.context.settings:_w}}})}function rk(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var ik=function(){function e(t,n){O_(this,e),this._position=t,this._radius=n}return C_(e,[{key:"raycast",value:function(t){var n=e._sphere;n.set(this._position,this._radius);var r=new lh;return t.ray.intersectSphere(n,r)?{distance:t.ray.origin.distanceTo(r),point:r}:null}}]),e}();Uw(ik,"_sphere",new Ph);var ok=function(e){return function(e){P_(n,e);var t=rk(n);function n(e){var r;O_(this,n);for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return(r=t.call.apply(t,[this].concat(o)))._objects=new Array(e),r.boundingSphere=null,r.boundingBox=null,r}return C_(n,[{key:"setSphere",value:function(e,t,n){this._objects[e]=new ik(t,n)}},{key:"raycast",value:function(e,t){for(var n=0,r=this._objects.length;n<r;++n){var i=this._objects[n].raycast(e);i&&(i.chunkIdx=n,t.push(i))}}},{key:"computeBoundingBox",value:function(){var e=this._objects,t=this.boundingBox;null===t&&(this.boundingBox=t=new hh),t.makeEmpty();for(var n=0,r=e.length;n<r;++n)t.expandByPoint(e[n]._position)}},{key:"computeBoundingSphere",value:function(){this.computeBoundingBox();var e=this._objects,t=this.boundingBox,n=0,r=new lh;t.getCenter(r);for(var i=0,o=e.length;i<o;++i){var a=e[i]._position,s=r.distanceToSquared(a);n<s&&(n=s)}null===this.boundingSphere&&(this.boundingSphere=new Ph),this.boundingSphere.set(r,Math.sqrt(n))}}]),n}(e)};function ak(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var sk=new Pd,uk=mw.copySubArrays;var lk=function(e){P_(n,e);var t=ak(n);function n(e,r,i){var o;return O_(this,n),(o=t.call(this,e))._sphGeometry=i?new Ip(2,2,1,1):new Eb(1,2*r,r,0,2*Math.PI,0,Math.PI),o._init(e,o._sphGeometry),o}return C_(n,[{key:"setItem",value:function(e,t,n){!function(e,t,n,r,i,o){e[t]=n,e[t+1]=r,e[t+2]=i,e[t+3]=o}(this._offsets,4*e,t.x,t.y,t.z,n),this.setSphere(e,t,n)}},{key:"setColor",value:function(e,t){sk.set(t),function(e,t,n,r,i){e[t]=n,e[t+1]=r,e[t+2]=i}(this._colors,3*e,sk.r,sk.g,sk.b)}},{key:"startUpdate",value:function(){return!0}},{key:"finishUpdate",value:function(){this.getAttribute("offset").needsUpdate=!0,this.getAttribute("color").needsUpdate=!0}},{key:"finalize",value:function(){this.finishUpdate(),this.computeBoundingSphere()}},{key:"setOpacity",value:function(e,t){for(var n=this._alpha,r=0,i=e.length;r<i;++r)n[e[r]]=t;this.getAttribute("alphaColor").needsUpdate=!0}},{key:"getSubset",value:function(e){var t=e.length,n=new Ax;return this._init.call(n,t,this._sphGeometry),uk(this._offsets,n._offsets,e,4),uk(this._colors,n._colors,e,3),n.boundingSphere=this.boundingSphere,n.boundingBox=this.boundingBox,[n]}},{key:"_init",value:function(e,t){this.copy(t),this._offsets=mw.allocateTyped(Float32Array,4*e),this._colors=mw.allocateTyped(Float32Array,3*e);var n=this._alpha=mw.allocateTyped(Float32Array,e);(0,R.fill)(n,1),this.setAttribute("offset",new Cx(this._offsets,4,!1,1)),this.setAttribute("color",new Cx(this._colors,3,!1,1)),this.setAttribute("alphaColor",new Cx(n,1,!1,1))}}]),n}(ok(Ax));function ck(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var fk=new Pd,hk=function(e){P_(n,e);var t=ck(n);function n(e,r){var i;if(O_(this,n),(i=t.call(this)).constructor===n)throw new Error("Can not instantiate abstract class!");return i._chunkGeo=e,i._init(e,r),i}return C_(n,[{key:"startUpdate",value:function(){return!0}},{key:"finishUpdate",value:function(){this.getAttribute("position").needsUpdate=!0,this.getAttribute("normal").needsUpdate=!0,this.getAttribute("color").needsUpdate=!0}},{key:"setColor",value:function(e,t){fk.set(t);for(var n=this._colors,r=this._chunkSize,i=e*r,o=i+r;i<o;++i){var a=3*i;n[a]=fk.r,n[a+1]=fk.g,n[a+2]=fk.b}}},{key:"finalize",value:function(){this.finishUpdate(),this.computeBoundingSphere()}},{key:"setOpacity",value:function(e,t){for(var n=this._alpha,r=this._chunkSize,i=0,o=e.length;i<o;++i){var a=e[i]*r;(0,R.fill)(n,t,a,a+r)}this.getAttribute("alphaColor").needsUpdate=!0}},{key:"raycast",value:function(e,t){var n=[],r=new fp;r.geometry=this,r.raycast(e,n);for(var i=this._chunkGeo.index.count/3,o=0,a=n.length;o<a;++o)n[o].hasOwnProperty("faceIndex")&&(n[o].chunkIdx=Math.floor(n[o].faceIndex/i),t.push(n[o]))}},{key:"getSubset",value:function(e){var t=e.length,n=new qd;this._init.call(n,this._chunkGeo,t);for(var r=this._positions,i=this._normals,o=this._colors,a=n._positions,s=n._normals,u=n._colors,l=3*this._chunkSize,c=0,f=e.length;c<f;++c){var h=c*l,d=e[c]*l,p=d+l;a.set(r.subarray(d,p),h),s.set(i.subarray(d,p),h),u.set(o.subarray(d,p),h)}return n.boundingSphere=this.boundingSphere,n.boundingBox=this.boundingBox,[n]}},{key:"_init",value:function(e,t){var n=this._chunkSize=e.attributes.position.count,r=e.index.array,i=r.length,o=this._chunkSize*t,a=o>65535,s=i*t,u=this._index=mw.allocateTyped(a?Uint32Array:Uint16Array,s);this._positions=mw.allocateTyped(Float32Array,3*o),this._normals=mw.allocateTyped(Float32Array,3*o),this._colors=mw.allocateTyped(Float32Array,3*o);var l=this._alpha=mw.allocateTyped(Float32Array,o);(0,R.fill)(l,1);for(var c=0;c<t;++c){var f=c*i,h=c*n;u.set(r,f);for(var d=0;d<i;++d)u[f+d]+=h}this.setIndex(new Nd(this._index,1)),this.setAttribute("position",new Nd(this._positions,3)),this.setAttribute("normal",new Nd(this._normals,3)),this.setAttribute("color",new Nd(this._colors,3)),this.setAttribute("alphaColor",new Nd(l,1))}}]),n}(qd);function dk(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var pk=function(e){P_(n,e);var t=dk(n);function n(e,r){var i;O_(this,n);var o=new Eb(1,2*r,r,0,2*Math.PI,0,Math.PI),a=(i=t.call(this,e,o,e))._normals,s=o.attributes.normal.array,u=i._chunkSize;i._chunkPos=i._chunkGeo.attributes.position.array,i._tmpPositions=mw.allocateTyped(Float32Array,3*u);for(var l=0;l<e;++l)a.set(s,3*u*l);return i}return C_(n,[{key:"setItem",value:function(e,t,n){for(var r=this._tmpPositions,i=this._chunkSize,o=this._chunkPos,a=0;a<i;++a){var s=3*a;r[s]=t.x+o[s]*n,r[s+1]=t.y+o[s+1]*n,r[s+2]=t.z+o[s+2]*n}this._positions.set(r,i*e*3),this.setSphere(e,t,n)}}]),n}(ok(hk));function vk(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var mk=new lh,gk=new lh,yk=new Qf,bk=function(e){P_(n,e);var t=vk(n);function n(e,r){var i;O_(this,n);var o=new ky(1,1,1,Math.max(3,r),2,!0),a=(i=t.call(this,o,2*e))._chunkSize;return i._chunkPos=i._chunkGeo.attributes.position.array,i._chunkNorms=i._chunkGeo.attributes.normal.array,i._tmpVector=mw.allocateTyped(Float32Array,3*a),i}return C_(n,[{key:"setItem",value:function(e,t,n,r){var i=this._chunkSize,o=2*i*e*3,a=o+3*i,s=this._tmpVector,u=this._chunkPos,l=this._chunkNorms;mk.lerpVectors(t,n,.5);var c,f=YE.calcCylinderMatrix(t,mk,r);yk.getNormalMatrix(f);for(var h=0;h<i;++h)c=3*h,gk.fromArray(u,c),gk.applyMatrix4(f),gk.toArray(s,c);this._positions.set(s,o),mk.sub(t);for(var d=0;d<i;++d)s[c=3*d]+=mk.x,s[c+1]+=mk.y,s[c+2]+=mk.z;this._positions.set(s,a);for(var p=0;p<i;++p)c=3*p,gk.fromArray(l,c),gk.applyMatrix3(yk),gk.toArray(s,c);this._normals.set(s,o),this._normals.set(s,a)}},{key:"setColor",value:function(e,t,r){var i=2*e;mS(I_(n.prototype),"setColor",this).call(this,i,t);var o=i+1;mS(I_(n.prototype),"setColor",this).call(this,o,r)}}]),n}(hk);function xk(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var _k=function(e){P_(n,e);var t=xk(n);function n(e,r,i,o,a,s){var u;O_(this,n),u=t.call(this);var l=2*Math.PI;u.type="CylinderBufferGeometry",u.parameters={radiusTop:e,radiusBottom:r,height:i,radialSegments:o,heightSegments:a,openEnded:s};var c=!1===s&&e>0,f=!1===s&&r>0,h=(a+1)*o+c*(o+1)+f*(o+1),d=(2*a+c+f)*o,p=i/2,v=new Nd(mw.allocateTyped(Float32Array,3*h),3),m=new Nd(mw.allocateTyped(Float32Array,3*h),3),g=new jd(mw.allocateTyped(Uint16Array,3*d),1),y=new Nd(mw.allocateTyped(Float32Array,2*h),2);console.assert(h<65536,"false: Cylinder Geometry has too many vertices (65536 max).");for(var b=0,x=0,_=-(r-e)/i,w=0;w<=a;w++){if(w!==a)for(var S=0;S<o;S++){var E=b+S,k=b+o+S,O=b+o+(S+1)%o,A=b+(S+1)%o;g.setXYZ(3*x,E,A,k),x++,g.setXYZ(3*x,k,A,O),x++}for(var C=w/a,M=C*(r-e)+e,T=0;T<o;T++){var P=T/o,R=M*Math.sin(P*l+0),I=C*i-p,L=M*Math.cos(P*l+0),N=new lh(R,Math.sqrt(R*R+L*L)*_,L).normalize();v.setXYZ(b,R,I,L),m.setXYZ(b,N.x,N.y,N.z),y.setXY(b,P,C),++b}}if(c){for(var j=b,D=b+o,B=0;B<o;++B){var z=b-o;v.setXYZ(b,v.getX(z),v.getY(z),v.getZ(z)),m.setXYZ(b,0,1,0),y.setXY(b,1,1);var F=j+(B+1)%o;g.setXYZ(3*x,b,F,D),x++,b++}v.setXYZ(b,0,p,0),m.setXYZ(b,0,1,0),y.setXY(b,1,1),++b}if(f){for(var V=b,U=b+o,Z=0;Z<o;++Z){var H=Z;v.setXYZ(b,v.getX(H),v.getY(H),v.getZ(H)),m.setXYZ(b,0,-1,0),y.setXY(b,0,0);var G=V+(Z+1)%o;g.setXYZ(3*x,G,b,U),x++,b++}v.setXYZ(b,0,-p,0),m.setXYZ(b,0,-1,0),y.setXY(b,0,0)}return u.setIndex(g),u.setAttribute("position",v),u.setAttribute("normal",m),u.setAttribute("uv",y),u}return C_(n,[{key:"clone",value:function(){var e=this.parameters;return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded)}}]),n}(qd);function wk(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var Sk=new Pd,Ek=new Fh,kk=mw.copySubArrays;function Ok(e,t,n,r,i){e[t]=n,e[t+1]=r,e[t+2]=i}function Ak(e,t,n,r,i,o){e[t]=n,e[t+1]=r,e[t+2]=i,e[t+3]=o}function Ck(e,t){return e-t}var Mk=function(e){P_(n,e);var t=wk(n);function n(e,r,i,o){var a;return O_(this,n),(a=t.call(this))._useZSprites=i,a._cylGeometry=i?new Ip(2,2,1,1):new _k(1,1,1,Math.max(3,r),2,o),a._init(e,a._cylGeometry,a._useZSprites),a._collisionGeo=new bk(e,3),a}return C_(n,[{key:"setItem",value:function(e,t,n,r){var i=YE.calcCylinderMatrix(t,n,r),o=i.elements,a=4*e;this._collisionGeo.setItem(e,t,n,r),Ak(this._matVector1,a,o[0],o[4],o[8],o[12]),Ak(this._matVector2,a,o[1],o[5],o[9],o[13]),Ak(this._matVector3,a,o[2],o[6],o[10],o[14]),this._useZSprites&&(Ek.copy(i).invert(),o=Ek.elements,Ak(this._invmatVector1,a,o[0],o[4],o[8],o[12]),Ak(this._invmatVector2,a,o[1],o[5],o[9],o[13]),Ak(this._invmatVector3,a,o[2],o[6],o[10],o[14]))}},{key:"setColor",value:function(e,t,n){var r=3*e;Sk.set(t),Ok(this._color1,r,Sk.r,Sk.g,Sk.b),Sk.set(n),Ok(this._color2,r,Sk.r,Sk.g,Sk.b)}},{key:"computeBoundingSphere",value:function(){this._collisionGeo.computeBoundingSphere(),this.boundingSphere=this._collisionGeo.boundingSphere}},{key:"computeBoundingBox",value:function(){this._collisionGeo.computeBoundingBox(),this.boundingBox=this._collisionGeo.boundingBox}},{key:"raycast",value:function(e,t){this._collisionGeo.raycast(e,t)}},{key:"startUpdate",value:function(){return!0}},{key:"finishUpdate",value:function(){this.getAttribute("matVector1").needsUpdate=!0,this.getAttribute("matVector2").needsUpdate=!0,this.getAttribute("matVector3").needsUpdate=!0,this.getAttribute("color").needsUpdate=!0,this.getAttribute("color2").needsUpdate=!0,this.getAttribute("alphaColor").needsUpdate=!0,this._useZSprites&&(this.getAttribute("invmatVector1").needsUpdate=!0,this.getAttribute("invmatVector2").needsUpdate=!0,this.getAttribute("invmatVector3").needsUpdate=!0),this._collisionGeo.finishUpdate()}},{key:"finalize",value:function(){this.finishUpdate(),this.computeBoundingSphere()}},{key:"setOpacity",value:function(e,t){for(var n=this._alpha,r=0,i=e.length;r<i;++r)n[Math.floor(e[r]/2)]=t;this.getAttribute("alphaColor").needsUpdate=!0}},{key:"getSubset",value:function(e){var t=function(e){e.sort(Ck);for(var t=[],n=[],r=0,i=e.length;r<i;++r){var o=e[r],a={first:!1,second:!1};(0|o)%2===0?(a.first=!0,a.second=r+1<i&&e[r+1]===e[r]+1,a.second&&++r):a.second=!0,t.push(Math.floor(o/2)),n.push(a)}return{indices:t,cylinderInfo:n}}(e),n=t.indices,r=n.length,i=new Ax;return this._init.call(i,r,this._cylGeometry,this._useZSprites),kk(this._matVector1,i._matVector1,n,4),kk(this._matVector2,i._matVector2,n,4),kk(this._matVector3,i._matVector3,n,4),this._useZSprites&&(kk(this._invmatVector1,i._invmatVector1,n,4),kk(this._invmatVector2,i._invmatVector2,n,4),kk(this._invmatVector3,i._invmatVector3,n,4)),kk(this._color1,i._color1,n,3),kk(this._color2,i._color2,n,3),function(e,t,n){for(var r=0,i=e.length;r<i;++r){var o=e[r];o.first||(t[3*r]=-.5),o.second||(n[3*r]=-.5)}}(t.cylinderInfo,i._color1,i._color2),i.boundingSphere=this.boundingSphere,i.boundingBox=this.boundingBox,[i]}},{key:"getGeoParams",value:function(){return this._cylGeometry.parameters}},{key:"_init",value:function(e,t,n){this.copy(t),this._matVector1=mw.allocateTyped(Float32Array,4*e),this._matVector2=mw.allocateTyped(Float32Array,4*e),this._matVector3=mw.allocateTyped(Float32Array,4*e),this._color1=mw.allocateTyped(Float32Array,3*e),this._color2=mw.allocateTyped(Float32Array,3*e);var r=this._alpha=mw.allocateTyped(Float32Array,e);(0,R.fill)(r,1),this.setAttribute("matVector1",new Cx(this._matVector1,4,!1,1)),this.setAttribute("matVector2",new Cx(this._matVector2,4,!1,1)),this.setAttribute("matVector3",new Cx(this._matVector3,4,!1,1)),this.setAttribute("color",new Cx(this._color1,3,!1,1)),this.setAttribute("color2",new Cx(this._color2,3,!1,1)),this.setAttribute("alphaColor",new Cx(this._alpha,1,!1,1)),n&&(this._invmatVector1=mw.allocateTyped(Float32Array,4*e),this._invmatVector2=mw.allocateTyped(Float32Array,4*e),this._invmatVector3=mw.allocateTyped(Float32Array,4*e),this.setAttribute("invmatVector1",new Cx(this._invmatVector1,4,!1,1)),this.setAttribute("invmatVector2",new Cx(this._invmatVector2,4,!1,1)),this.setAttribute("invmatVector3",new Cx(this._invmatVector3,4,!1,1)))}}]),n}(Ax);function Tk(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var Pk=new lh,Rk=new lh,Ik=new lh,Lk=new lh(1,0,0),Nk=new lh,jk=new lh;var Dk=function(e){P_(n,e);var t=Tk(n);function n(e,r,i){var o;O_(this,n);var a=function(e,t){for(var n=new qd,r=e.length,i=r*t,o=i<=65536?Uint16Array:Uint32Array,a=(t-1)*r*2,s=new Nd(mw.allocateTyped(o,3*a),1),u=0,l=0,c=0;c<t;c++){if(c!==t-1)for(var f=0;f<r;f++){var h=u+f,d=u+r+f,p=u+r+(f+1)%r,v=u+(f+1)%r;s.setXYZ(3*l,h,v,d),l++,s.setXYZ(3*l,d,v,p),l++}u+=r}n.setIndex(s);var m=mw.allocateTyped(Float32Array,3*i);return n.setAttribute("position",new Nd(m,3)),n._positions=e,n}(e,r);(o=t.call(this,a,i))._ringsCount=r;for(var s=o._tmpShape=[],u=0;u<e.length;++u)s[u]=new lh;return o}return C_(n,[{key:"setItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this._chunkGeo._positions.length,o=this._ringsCount,a=i*this._ringsCount*e*3;this._setPoints(t,i,o,a),n?this._setSlopeNormals(i,o,a):this._setBaseNormals(i,o,a),r&&this._addCut(i,o,a)}},{key:"_setPoints",value:function(e,t,n,r){for(var i=this._tmpShape,o=this._positions,a=this._chunkGeo._positions,s=0,u=r;s<n;++s)for(var l=e[s],c=0;c<t;++c,u+=3)i[c].copy(a[c]).applyMatrix4(l).toArray(o,u)}},{key:"_setBaseNormals",value:function(e,t,n){for(var r=3*e,i=0,o=n;i<t;++i,o+=r)this._countNormalsInRing(e,o,!1)}},{key:"_setSlopeNormals",value:function(e,t,n){for(var r=this._normals,i=3*e,o=n,a=0;a<e;++a,o+=3)Lk.toArray(r,o);if(o-2*i>0)for(var s=0;s<e;++s,o+=3)Ik.fromArray(r,o-2*i).toArray(r,o);else this._countNormalsInRing(e,o,!0,+i),o+=i;for(var u=2;u<t;++u,o+=i)this._countNormalsInRing(e,o,!0,-i)}},{key:"_countNormalsInRing",value:function(e,t,n,r){var i=this._tmpShape,o=this._normals;i[0].fromArray(this._positions,t),i[e-1].fromArray(this._positions,t+3*(e-1));for(var a=0;a<e;++a,t+=3)a<e-1&&i[a+1].fromArray(this._positions,t+3),n?(jk.fromArray(this._positions,t+r),Pk.subVectors(i[(a+e-1)%e],i[(a+1)%e]).normalize(),Rk.subVectors(i[a],jk).normalize(),Ik.crossVectors(Rk,Pk).normalize().toArray(o,t)):(Pk.subVectors(i[a],i[(a+e-1)%e]).normalize(),Rk.subVectors(i[a],i[(a+1)%e]).normalize(),Ik.addVectors(Pk,Rk).normalize().toArray(o,t))}},{key:"_addCut",value:function(e,t,n){if(!(e<3||t<2)){var r=this._positions,i=this._normals,o=this._tmpShape,a=3*e;o[0].fromArray(r,n),o[1].fromArray(r,n+3),o[2].fromArray(r,n+6),Pk.subVectors(o[1],o[0]).normalize(),Rk.subVectors(o[1],o[2]).normalize(),Nk.crossVectors(Pk,Rk).normalize();for(var s=n,u=0;u<2*e;++u,s+=3)Nk.toArray(i,s);if(t>2)for(var l=0;l<e;++l,s+=3)Ik.fromArray(r,s-a).toArray(r,s)}}}]),n}(hk);function Bk(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var zk=new Pd,Fk=new lh;function Vk(e,t,n,r,i){e[t]=n,e[t+1]=r,e[t+2]=i}function Uk(e,t,n,r,i,o){e[t]=n,e[t+1]=r,e[t+2]=i,e[t+3]=o}function Zk(e,t,n,r){var i=4*t,o=i+4*n;return e.subarray(i*r,o*r)}var Hk=function(e){P_(n,e);var t=Bk(n);function n(e){var r;return O_(this,n),(r=t.call(this))._initVertices(e),r}return C_(n,[{key:"startUpdate",value:function(){return!0}},{key:"finishUpdate",value:function(){this.getAttribute("position").needsUpdate=!0,this.getAttribute("color").needsUpdate=!0,this.getAttribute("alphaColor").needsUpdate=!0,this.getAttribute("direction").needsUpdate=!0}},{key:"setColor",value:function(e,t){zk.set(t);var n=4*e*3;Vk(this._colors,n,zk.r,zk.g,zk.b),n+=3,Vk(this._colors,n,zk.r,zk.g,zk.b),n+=3,Vk(this._colors,n,zk.r,zk.g,zk.b),n+=3,Vk(this._colors,n,zk.r,zk.g,zk.b)}},{key:"setSegment",value:function(e,t,n){Fk.subVectors(t,n),Fk.normalize();var r=this._positions,i=this._directions,o=4*e*4,a=4*e*3;Uk(r,o,t.x,t.y,t.z,.5),Vk(i,a,Fk.x,Fk.y,Fk.z),a+=3,Uk(r,o+=4,t.x,t.y,t.z,-.5),Vk(i,a,Fk.x,Fk.y,Fk.z),a+=3,Uk(r,o+=4,n.x,n.y,n.z,.5),Vk(i,a,Fk.x,Fk.y,Fk.z),a+=3,Uk(r,o+=4,n.x,n.y,n.z,-.5),Vk(i,a,Fk.x,Fk.y,Fk.z)}},{key:"setOpacity",value:function(e,t,n){var r=4*e,i=4*t;(0,R.fill)(this.alpha,n,i,r),this.getAttribute("alphaColor").needsUpdate=!0}},{key:"getSubsetSegments",value:function(e,t){return[Zk(this._positions,e,t,4),Zk(this._directions,e,t,3)]}},{key:"getSubsetColors",value:function(e,t){return Zk(this._colors,e,t,3)}},{key:"getSubsetOpacities",value:function(e,t){return Zk(this._alpha,e,t,1)}},{key:"getNumVertexPerSegment",value:function(){return 4}},{key:"getPositionSize",value:function(){return 4}},{key:"setSegments",value:function(e,t){var n=4*e*4;if(t instanceof Array&&2===t.length){this._positions.set(t[0],n);var r=4*e*3;this._directions.set(t[1],r)}else this._positions.set(t,n)}},{key:"setColors",value:function(e,t){var n=4*e*3;this._colors.set(t,n)}},{key:"_initVertices",value:function(e){this._buffersSize=4*e;var t=this._buffersSize,n=t>65535;this._index=mw.allocateTyped(n?Uint32Array:Uint16Array,6*e),this._positions=mw.allocateTyped(Float32Array,4*t),this._colors=mw.allocateTyped(Float32Array,3*t),this._directions=mw.allocateTyped(Float32Array,3*t);var r=this._alpha=mw.allocateTyped(Float32Array,t);(0,R.fill)(r,1);for(var i=this._index,o=0,a=0,s=0;s<e;s++,o+=6,a+=4)i[o]=a,i[o+1]=a+1,i[o+2]=a+3,i[o+3]=a,i[o+4]=a+2,i[o+5]=a+3;this.setIndex(new Nd(this._index,1)),this.setAttribute("position",new Nd(this._positions,4)),this.setAttribute("color",new Nd(this._colors,3)),this.setAttribute("alphaColor",new Nd(r,1)),this.setAttribute("direction",new Nd(this._directions,3))}}]),n}(qd);function Gk(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var Wk=function(e){P_(n,e);var t=Gk(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"startUpdate",value:function(){return!0}},{key:"computeBoundingSphere",value:function(){var e=this.boundingBox,t=0,n=new lh;e&&e.getCenter(n);for(var r=this._positions,i=this.boundingSphere||new Ph,o=this._positions.length,a=new lh,s=this.getPositionSize(),u=0;u<o;u+=s){a.set(r[u],r[u+1],r[u+2]);var l=n.distanceToSquared(a);t<l&&(t=l)}i.set(n,Math.sqrt(t)),this.boundingSphere=i}},{key:"computeBoundingBox",value:function(){for(var e=this._positions,t=new hh,n=this._positions.length,r=new lh,i=this.getPositionSize(),o=0;o<n;o+=i)r.set(e[o],e[o+1],e[o+2]),t.expandByPoint(r);this.boundingBox=t}},{key:"finalize",value:function(){this.finishUpdate(),this.computeBoundingSphere()}}]),n}(Hk);function qk(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var Kk=new lh,Yk=new Qf,Xk=function(e){P_(n,e);var t=qk(n);function n(e,r){var i;O_(this,n);var o=new ky(1,1,1,Math.max(3,r),2,!0),a=(i=t.call(this,o,e))._chunkSize;return i._chunkPos=i._chunkGeo.attributes.position.array,i._chunkNorms=i._chunkGeo.attributes.normal.array,i._tmpVector=mw.allocateTyped(Float32Array,3*a),i}return C_(n,[{key:"setItem",value:function(e,t,n,r){var i,o=this._chunkSize,a=o*e*3,s=this._tmpVector,u=this._chunkPos,l=this._chunkNorms,c=YE.calcCylinderMatrix(t,n,r);Yk.getNormalMatrix(c);for(var f=0;f<o;++f)i=3*f,Kk.fromArray(u,i),Kk.applyMatrix4(c),Kk.toArray(s,i);this._positions.set(s,a);for(var h=0;h<o;++h)i=3*h,Kk.fromArray(l,i),Kk.applyMatrix3(Yk),Kk.toArray(s,i);this._normals.set(s,a)}}]),n}(hk);function $k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var Jk=function(e){P_(n,e);var t=$k(n);function n(e,r,i){var o;return O_(this,n),(o=t.call(this,e*r))._init(r),o._collisionGeo=i?new Xk(e*r,3):null,o}return C_(n,[{key:"startUpdate",value:function(){return!0}},{key:"computeBoundingSphere",value:function(){var e=this._collisionGeo;if(e)return e.computeBoundingSphere(),void(this.boundingSphere=e.boundingSphere);mS(I_(n.prototype),"computeBoundingSphere",this).call(this)}},{key:"computeBoundingBox",value:function(){var e=this._collisionGeo;if(e)return e.computeBoundingBox(),void(this.boundingBox=e.boundingBox);mS(I_(n.prototype),"computeBoundingBox",this).call(this)}},{key:"raycast",value:function(e,t){if(this._collisionGeo){var n=this._chunkSize;this._collisionGeo.raycast(e,t);for(var r=0,i=t.length;r<i;++r){var o=t[r].chunkIdx;void 0!==o&&(o=o/n|0,t[r].chunkIdx=o)}}}},{key:"setColor",value:function(e,t){for(var r=this._chunkSize,i=e*r,o=i+r;i<o;++i)mS(I_(n.prototype),"setColor",this).call(this,i,t)}},{key:"setSegment",value:function(e,t,r,i){var o=this._chunkSize,a=e*o+t;mS(I_(n.prototype),"setSegment",this).call(this,a,r,i),this._collisionGeo&&this._collisionGeo.setItem(e*o+t,r,i,.1)}},{key:"finalize",value:function(){this.finishUpdate(),this.computeBoundingSphere()}},{key:"setOpacity",value:function(e,t){for(var r=this._chunkSize,i=0,o=e.length;i<o;++i){var a=e[i]*r;mS(I_(n.prototype),"setOpacity",this).call(this,a,a+r-1,t)}}},{key:"getSubset",value:function(e){for(var t=e.length,r=this._chunkSize,i=new n(t,r,!1),o=0,a=e.length;o<a;++o){var s=o*r,u=e[o]*r;i.setSegments(s,this.getSubsetSegments(u,r)),i.setColors(s,this.getSubsetColors(u,r))}return i.boundingSphere=this.boundingSphere,i.boundingBox=this.boundingBox,[i]}},{key:"_init",value:function(e){this._chunkSize=e}}]),n}(Wk);function Qk(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var eO=new lh,tO=function(e){P_(n,e);var t=Qk(n);function n(e){var r;return O_(this,n),(r=t.call(this,2*e))._init(e),r._collisionGeo=new bk(e,3),r}return C_(n,[{key:"setItem",value:function(e,t,r){this._collisionGeo.setItem(e,t,r,.3);var i=2*e;eO.lerpVectors(t,r,.5),mS(I_(n.prototype),"setSegment",this).call(this,i,t,eO),mS(I_(n.prototype),"setSegment",this).call(this,i+1,eO,r)}},{key:"setColor",value:function(e,t,r){var i=2*e;mS(I_(n.prototype),"setColor",this).call(this,i,t),mS(I_(n.prototype),"setColor",this).call(this,i+1,r)}},{key:"raycast",value:function(e,t){this._collisionGeo&&this._collisionGeo.raycast(e,t)}},{key:"getSubset",value:function(e){for(var t=e.length,r=new n(t,!1),i=0,o=t;i<o;++i){var a=e[i];r.setSegments(i,this.getSubsetSegments(a,1)),r.setColors(i,this.getSubsetColors(a,1))}return r.boundingSphere=this.boundingSphere,r.boundingBox=this.boundingBox,[r]}},{key:"_init",value:function(e){this._segCounts=2*e}}]),n}(Wk);function nO(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var rO=[new lh(1,0,0),new lh(-1,0,0),new lh(0,1,0),new lh(0,-1,0),new lh(0,0,1),new lh(0,0,-1)],iO=rO.length,oO=new lh,aO=new lh,sO=function(e){P_(n,e);var t=nO(n);function n(e){return O_(this,n),t.call(this,e,e,iO/2|0,!1)}return C_(n,[{key:"setItem",value:function(e,t,n){this.setSphere(e,t,n);for(var r=0;r<iO/2;++r){var i=2*r;oO.x=t.x+rO[i].x*n,oO.y=t.y+rO[i].y*n,oO.z=t.z+rO[i].z*n;var o=i+1;aO.x=t.x+rO[o].x*n,aO.y=t.y+rO[o].y*n,aO.z=t.z+rO[o].z*n,this.setSegment(e,r,oO,aO)}}}]),n}(ok(Jk));function uO(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var lO=new Pd,cO=function(e){P_(n,e);var t=uO(n);function n(e,r){var i;return O_(this,n),(i=t.call(this))._opts=r,i.zClip=i._opts.zClip,i._posRad=mw.allocateTyped(Float32Array,4*e),i._colors=mw.allocateTyped(Float32Array,3*e),i}return C_(n,[{key:"setItem",value:function(e,t,n){var r=this._posRad,i=4*e;r[i++]=t.x,r[i++]=t.y,r[i++]=t.z,r[i]=n}},{key:"setColor",value:function(e,t){lO.set(t);var n=this._colors,r=3*e;n[r++]=lO.r,n[r++]=lO.g,n[r]=lO.b}},{key:"finalize",value:function(){this.finishUpdate(),this.computeBoundingSphere()}},{key:"finishUpdate",value:function(){this._build()}},{key:"setOpacity",value:function(){}},{key:"raycast",value:function(){}},{key:"getSubset",value:function(){return[]}}]),n}(qd),fO=function(){function e(){O_(this,e),this.pointsValuesLinear=null,this.hasIntersection=null,this.bitsInside=null}return C_(e,[{key:"create",value:function(e){var t=e*e*e;if(t>117440512)throw new Error("Too large cube dimension: lead to memory huge uasge");return this.pointsValuesLinear=mw.allocateTyped(Float32Array,32*t),this.hasIntersection=mw.allocateTyped(Int32Array,t),this.bitsInside=mw.allocateTyped(Int32Array,t),0}},{key:"destroy",value:function(){this.bitsInside=null,this.hasIntersection=null,this.pointsValuesLinear=null}}]),e}();fO.prototype.striIndicesMarchCube=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];var hO=[0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0];function dO(e,t,n){var r=e.getValue(t.x,t.y,t.z);n.set(r[0],r[1],r[2])}var pO=C_((function e(){O_(this,e),this._arrSize=8,this.p=new Array(this._arrSize),this.g=new Array(this._arrSize),this.val=new Array(this._arrSize);for(var t=0;t<this._arrSize;++t)this.p[t]=new lh,this.g[t]=new lh;this.cubeIndex=0})),vO=C_((function e(){O_(this,e),this.a={p:new lh,n:new lh},this.b={p:new lh,n:new lh},this.c={p:new lh,n:new lh}}));function mO(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=new lh;return t}var gO=function(){function e(){O_(this,e),this._numTriangles=0,this._numVertices=0,this._position=[],this._normals=[],this._colors=null,this._indices=[],this._volumetricData=null,this._xAxis=new lh,this._yAxis=new lh,this._zAxis=new lh,this._xDir=new lh,this._yDir=new lh,this._zDir=new lh}return C_(e,[{key:"_prepareAxesAndDirs",value:function(){var e=this._volumetricData.getCellSize(),t=this._xAxis,n=this._yAxis,r=this._zAxis,i=this._xDir,o=this._yDir,a=this._zDir;t.set(e.x,0,0),n.set(0,e.y,0),r.set(0,0,e.z),i.set(1,0,0),o.set(0,1,0),a.set(0,0,1);var s=new lh;if(s.crossVectors(i,o),s.dot(a)<0&&(i.negate(),o.negate(),a.negate()),i.x<0||i.y<0||i.z<0||o.x<0||o.y<0||o.z<0||a.x<0||a.y<0||a.z<0)return!1;var u=function(e){return Math.abs(e)>Number.EPSILON};return!(u(t.y)||u(t.z)||u(n.x)||u(n.z)||u(r.x)||u(r.y))}},{key:"_vertexInterp",value:function(e,t,n,r,i,o){var a=t.p[n],s=t.p[r],u=t.g[n],l=t.g[r],c=t.val[n],f=e-c,h=t.val[r]-c,d=0;Math.abs(h)>0&&(d=f/h),d=d>1?1:d,i.lerpVectors(a,s,d),o.lerpVectors(u,l,d)}},{key:"_polygonize",value:function(t,n,r){for(var i=t.cubeIndex,o=0,a=e._arrSize,s=e._firstIndices,u=e._secondIndices,l=e._vertexList,c=e._normalList;o<a;++o)hO[i]&1<<o&&this._vertexInterp(n,t,s[o],u[o],l[o],c[o]);var f=0,h=16*i,d=e._triTable;for(o=0;-1!==d[h+o];o+=3)r[f].a.p.copy(l[d[h+o]]),r[f].a.n.copy(c[d[h+o]]),r[f].b.p.copy(l[d[h+o+1]]),r[f].b.n.copy(c[d[h+o+1]]),r[f].c.p.copy(l[d[h+o+2]]),r[f].c.n.copy(c[d[h+o+2]]),++f;return f}},{key:"_doGridPosNorms",value:function(e,t,n){for(var r,i=this._volumetricData,o=this._volumetricData.getData(),a=i.getDimensions(),s=a[0],u=a[1],l=a[2],c=t*i.getStrideX(),f=t*i.getStrideY(),h=t*i.getStrideZ(),d=new pO,p=d.val,v=d.val.length,m=[new lh(0,0,0),new lh(t,0,0),new lh(t,t,0),new lh(0,t,0),new lh(0,0,t),new lh(t,0,t),new lh(t,t,t),new lh(0,t,t)],g=new Array(5),y=0;y<5;++y)g[y]=new vO;var b=this,x=this._position,_=this._normals;r=n?function(){var e=new lh(b._xAxis.x,b._yAxis.y,b._zAxis.z);return function(t){var n=t.p.clone();n.multiply(e),x.push(n.add(b._origin)),_.push(t.n.clone())}}():function(){var e=new Qf;e.set(b._xAxis.x,b._yAxis.x,b._zAxis.x,b._xAxis.y,b._yAxis.y,b._zAxis.y,b._xAxis.z,b._yAxis.z,b._zAxis.z);var t=new Qf;return t.set(b._xDir.x,b._yDir.x,b._zDir.x,b._xDir.y,b._yDir.y,b._zDir.y,b._xDir.z,b._yDir.z,b._zDir.z),function(n){x.push(n.p.clone().applyMatrix3(e).add(b._origin)),_.push(n.n.clone().applyMatrix3(t))}}();for(var w=this._indices,S=0,E=0;E<l-t;E+=t)for(var k=0;k<u-t;k+=t)for(var O=i.getDirectIdx(0,k,E),A=0;A<s-t;A+=t,O+=c){p[0]=o[O],p[1]=o[O+c],p[3]=o[O+f],p[2]=o[O+c+f],p[4]=o[O+h],p[5]=o[O+c+h],p[7]=o[O+f+h],p[6]=o[O+c+f+h];for(var C=0,M=0;M<v;++M)p[M]<e&&(C|=1<<M);if(0!==hO[C]){for(d.cubeIndex=C,M=0;M<v;++M)d.p[M].set(A+m[M].x,k+m[M].y,E+m[M].z),dO(this._gradient,d.p[M],d.g[M]);var T=this._polygonize(d,e,g);for(S+=T,M=0;M<T;++M)w.push(3*this._numTriangles),w.push(3*this._numTriangles+1),w.push(3*this._numTriangles+2),++this._numTriangles,r(g[M].a),r(g[M].b),r(g[M].c)}}return S}},{key:"compute",value:function(e,t,n,r){this._volumetricData=e,this._origin=t,this._gradient=e.computeGradient(),this._doGridPosNorms(n,r,this._prepareAxesAndDirs())}},{key:"_remapIndices",value:function(e,t){for(var n=this._indices,r=mw.allocateTyped(Uint32Array,t),i=0;i<t;++i)n[i]=e[n[i]],r[i]=n[i];this._indices=r}},{key:"_remapVertices",value:function(e,t,n){for(var r=mw.allocateTyped(Float32Array,3*n),i=mw.allocateTyped(Float32Array,3*n),o=0;o<n;++o){var a=e[o];r[3*o]=a.x,r[3*o+1]=a.y,r[3*o+2]=a.z;var s=t[o].normalize();i[3*o]=s.x,i[3*o+1]=s.y,i[3*o+2]=s.z}this._position=r,this._normals=i}},{key:"vertexFusion",value:function(e,t){var n=this._indices.length,r=this._position,i=this._normals,o=0|r.length;if(0!==n&&0!==o){var a=mw.allocateTyped(Uint32Array,o);a[0]=0;for(var s=1,u=1;u<o;++u){for(var l=s-e<0?0:s-e,c=l+t>s?s:l+t,f=-1,h=l;h<c;++h)if(Math.abs(r[u]-r[h])<Number.EPSILON){f=h;break}-1!==f?a[u]=f:(r[s].copy(r[u]),i[s].copy(i[u]),a[u]=s,++s)}this._remapIndices(a,n),this._remapVertices(r,i,s)}}},{key:"setColorVolTex",value:function(e,t,n,r){var i,o,a,s,u,l,c=this._position.length/3,f=this._position,h=this._origin,d=this._volumetricData.getDimensions(),p=d[0]-1,v=d[1]-1,m=d[2]-1,g=e.getData(),y=e.getStrideX(),b=e.getStrideY(),x=e.getStrideZ();null!==r&&(a=n.getData(),s=n.getStrideX(),u=n.getStrideY(),l=n.getStrideZ());var _=1/this._xAxis.x,w=1/this._yAxis.y,S=1/this._zAxis.z,E=[],k=[],O=mw.allocateTyped(Float32Array,3*c);function A(e,t,n,r){r[0]=(1-e)*g[t]+e*g[n],r[1]=(1-e)*g[t+1]+e*g[n+1],r[2]=(1-e)*g[t+2]+e*g[n+2]}function C(e,n,r,i){var o=t[e];if(null!=o){E[o.index]=o;var s=n*r*i*a[e];"undefined"===typeof k[o.index]?k[o.index]=s:k[o.index]+=s}}var M=mw.allocateTyped(Int32Array,c),T=0;for(i=0;i<c;i++){var P=3*i,R=(f[P]-h.x)*_,I=(f[P+1]-h.y)*w,L=(f[P+2]-h.z)*S,N=0|Math.min(Math.max(R,0),p),j=0|Math.min(Math.max(I,0),v),D=0|Math.min(Math.max(L,0),m),B=R-N,z=I-j,F=L-D;if(null!=r){E=[],k=[],C(o=n.getDirectIdx(N,j,D),1-B,1-z,1-F),C(o+s,B,1-z,1-F),C(o+u,1-B,z,1-F),C(o+s+u,B,z,1-F),C(o+l,1-B,1-z,F),C(o+s+l,B,1-z,F),C(o+u+l,1-B,z,F),C(o+s+u+l,B,z,F);var V=0,U=-1;for(var Z in k)k[Z]>V&&(U=Z,V=k[Z]);if(U<0||!r.includesAtom(E[U])){M[i]=-1;continue}}M[i]=T++;var H=N<p?y:0,G=j<v?b:0,W=D<m?x:0,q=[0,0,0],K=[0,0,0],Y=[0,0,0],X=[0,0,0];A(B,o=e.getDirectIdx(N,j,D),o+H,q),A(B,o+G,o+H+G,K),A(B,o+W,o+H+W,Y),A(B,o+G+W,o+H+G+W,X);var $=[0,0,0];$[0]=(1-z)*q[0]+z*K[0],$[1]=(1-z)*q[1]+z*K[1],$[2]=(1-z)*q[2]+z*K[2];var J=[0,0,0];J[0]=(1-z)*Y[0]+z*X[0],J[1]=(1-z)*Y[1]+z*X[1],J[2]=(1-z)*Y[2]+z*X[2],O[P]=(1-F)*$[0]+F*J[0],O[P+1]=(1-F)*$[1]+F*J[1],O[P+2]=(1-F)*$[2]+F*J[2]}if(this._colors=O,null!=r){for(i=0;i<c;++i){var Q=M[i];Q<0||(this._position[3*Q]=this._position[3*i],this._position[3*Q+1]=this._position[3*i+1],this._position[3*Q+2]=this._position[3*i+2],this._normals[3*Q]=this._normals[3*i],this._normals[3*Q+1]=this._normals[3*i+1],this._normals[3*Q+2]=this._normals[3*i+2],this._colors[3*Q]=this._colors[3*i],this._colors[3*Q+1]=this._colors[3*i+1],this._colors[3*Q+2]=this._colors[3*i+2])}var ee=this._indices.length/3,te=0;for(i=0;i<ee;++i){var ne=M[this._indices[3*i]],re=M[this._indices[3*i+1]],ie=M[this._indices[3*i+2]];ne>=0&&re>=0&&ie>=0&&(this._indices[3*te]=ne,this._indices[3*te+1]=re,this._indices[3*te+2]=ie,++te)}this._position=new Float32Array(this._position.buffer.slice(0,3*T*4)),this._normals=new Float32Array(this._normals.buffer.slice(0,3*T*4)),this._colors=new Float32Array(this._colors.buffer.slice(0,3*T*4)),this._indices=new Uint32Array(this._indices.buffer.slice(0,3*te*4))}}},{key:"toMesh",value:function(){var e=new qd;return e.setIndex(new Nd(this._indices,1)),e.setAttribute("position",new Nd(this._position,3)),e.setAttribute("normal",new Nd(this._normals,3)),e.setAttribute("color",new Nd(this._colors,3)),e.computeBoundingSphere(),e}}]),e}();function yO(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(gO,"_triTable",fO.prototype.striIndicesMarchCube),Uw(gO,"_arrSize",12),Uw(gO,"_firstIndices",[0,1,2,3,4,5,6,7,0,1,2,3]),Uw(gO,"_secondIndices",[1,2,3,0,5,6,7,4,4,5,6,7]),Uw(gO,"_vertexList",mO(gO._arrSize)),Uw(gO,"_normalList",mO(gO._arrSize));var bO=function(e){P_(n,e);var t=yO(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_build",value:function(){var e=this._opts;this.numVoxels=[128,128,128],this.xAxis=new lh(1,0,0),this.yAxis=new lh(0,1,0),this.zAxis=new lh(0,0,1),this.origin=new lh(0,0,0),this._visibilitySelector=e.visibilitySelector,this._calcSurface(e)}},{key:"_findMinMax",value:function(e){for(var t=e.length/4,n=[e[0],e[1],e[2],e[3]],r=[e[0],e[1],e[2],e[3]],i=1;i<t;++i)for(var o=4*i,a=0;a<4;++a){var s=e[o+a];n[a]=Math.max(s,n[a]),r[a]=Math.min(s,r[a])}return{maxPosRad:n,minPosRad:r}}},{key:"_findNumVoxels",value:function(e,t){var n=this.numVoxels,r=this._findMinMax(e),i=r.minPosRad,o=r.maxPosRad;i[3]>4&&(t.gridSpacing*=i[3]);var a=t.radScale*o[3]*1.7,s=a;s=.65*Math.sqrt(4/3*Math.PI*s*s*s),a=Math.max(a,s);for(var u=0;u<3;++u)i[u]-=a,o[u]+=a;for(u=0;u<3;++u)n[u]=Math.ceil((o[u]-i[u])/t.gridSpacing);this.xAxis.x=(n[0]-1)*t.gridSpacing,this.yAxis.y=(n[1]-1)*t.gridSpacing,this.zAxis.z=(n[2]-1)*t.gridSpacing;var l=j_(i,3);return this.origin.x=l[0],this.origin.y=l[1],this.origin.z=l[2],{bbox:r,dim:n}}},{key:"_makeSurface",value:function(e,t){var n=new gO;n.compute(e.volMap,this.origin,t.isoValue,1),n.vertexFusion(9,9),n._numTriangles>0?(n.setColorVolTex(e.volTexMap,e.atomMap,e.atomWeightMap,this._visibilitySelector),this.setIndex(new Nd(n._indices,1)),this.setAttribute("position",new Nd(n._position,3)),this.setAttribute("normal",new Nd(n._normals,3)),this.setAttribute("color",new Nd(n._colors,3))):this.setAttribute("position",new Nd(mw.allocateTyped(Float32Array,0),3))}},{key:"_calcSurface",value:function(e){var t={posRad:this._posRad,colors:this._colors,atoms:this._opts.atoms};if(0!==t.posRad.length){var n=this._findNumVoxels(t.posRad,e),r=new hh(this.origin,new lh(this.xAxis.x,this.yAxis.y,this.zAxis.z).add(this.origin)),i=this._computeSurface(t,r,n,e);this._makeSurface(i,e)}}}]),n}(cO);function xO(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var _O=DE.Volume,wO=function(e){P_(n,e);var t=xO(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_computeSurface",value:function(e,t,n,r){this._shiftByOrigin(e.posRad);var i={volMap:new _O(Float32Array,this.numVoxels,t),volTexMap:new _O(Float32Array,this.numVoxels,t,3)};return null!=this._visibilitySelector&&(i.atomMap=[],i.atomWeightMap=new _O(Float32Array,this.numVoxels,t)),this.gaussdensity(i,e,null,r),i}},{key:"gaussdensity",value:function(e,t,n,r){var i,o=t.posRad.length/4,a=t.posRad,s=t.colors,u=this.numVoxels,l=r.radScale,c=r.gaussLim,f=r.gridSpacing,h=1/r.isoValue,d=1/f,p=u[0]-1,v=u[1]-1,m=u[2]-1,g=e.volMap,y=e.volTexMap,b=g.getData(),x=g.getStrideX(),_=y.getData(),w=y.getStrideX();null!=this._visibilitySelector&&(i=e.atomWeightMap.getData());for(var S=e.atomMap,E=0;E<o;++E){var k=4*E,O=a[k+3]*l,A=null===n?1:n[E],C=1/(2*O*O),M=c*O,T=M*M;M*=d;var P=a[k]*d,R=Math.max(P-M|0,0),I=Math.min(P+M|0,p);P=a[k+1]*d;var L=Math.max(P-M|0,0),N=Math.min(P+M|0,v);P=a[k+2]*d;for(var j=Math.max(P-M|0,0),D=Math.min(P+M|0,m),B=j*f-a[k+2],z=j;z<=D;++z,B+=f)for(var F=L*f-a[k+1],V=L;V<=N;++V,F+=f){var U=F*F+B*B;if(!(U>=T))for(var Z=g.getDirectIdx(R,V,z),H=y.getDirectIdx(R,V,z),G=R*f-a[k],W=R;W<=I;++W,G+=f,Z+=x,H+=w){var q=-(G*G+U)*C,K=Math.exp(q)*A;null!=this._visibilitySelector&&K>i[Z]&&(i[Z]=K,S[Z]=t.atoms[E]),b[Z]+=K,K*=h;var Y=3*E;_[H]+=K*s[Y],_[H+1]+=K*s[Y+1],_[H+2]+=K*s[Y+2]}}}}},{key:"_shiftByOrigin",value:function(e){for(var t=this.origin.x,n=this.origin.y,r=this.origin.z,i=e.length/4,o=0;o<i;++o){var a=4*o;e[a]-=t,e[a+1]-=n,e[a+2]-=r}}}]),n}(bO);function SO(e,t,n,r){var i=e.length/4,o=t[0],a=t[1],s=t[2],u=n[0],l=n[1],c=n[2];function f(e,t){return Math.floor((e-t)/r)}var h,d,p=f(u,o)+1,v=f(l,a)+1,m=f(c,s)+1,g=p*v*m,y=v*m,b=function(e,t,n){return(f(e,o)*v+f(t,a))*m+f(n,s)},x=[];for(h=0;h<i;h++){var _=4*h;void 0===x[d=b(e[_],e[_+1],e[_+2])]?x[d]=[h]:x[d].push(h)}var w,S=mw.allocateTyped(Uint32Array,g),E=mw.allocateTyped(Uint16Array,g),k=mw.allocateTyped(Uint32Array,i),O=0,A=0;for(h=0;h<g;h++){var C=S[h]=O,M=x[h];if(void 0!==M)for(w=0;w<M.length;w++)k[O]=M[w],O++;var T=O-C;E[h]=T,T>A&&(A=T)}this.neighbourListLength=27*A+1,this.withinRadii=function(t,n,r,i,u){var l=0,c=f(t,o),g=f(n,a),b=f(r,s),x=Math.max(0,c-1),_=Math.max(0,g-1),O=Math.max(0,b-1),A=Math.min(p-1,c+1),C=Math.min(v-1,g+1),M=Math.min(m-1,b+1);for(h=x;h<=A;++h){var T=h*y;for(w=_;w<=C;++w)for(var P=w*m,R=O;R<=M;++R)for(var I=S[d=T+P+R],L=I+E[d],N=I;N<L;N++){var j=4*k[N],D=e[j]-t,B=e[j+1]-n,z=e[j+2]-r,F=e[j+3]+i;D*D+B*B+z*z<=F*F&&(u[l++]=k[N])}}u[l]=-1}}function EO(e,t,n,r){var i,o,a,s,u,l,c,f,h,d,p,v,m,g,y,b,x,_=e.posRad,w=e.colors,S=e.atoms,E=_.length/4,k=t.bbox,O=k.minPosRad,A=k.maxPosRad,C=-1,M=null,T=null,P=null,R=new lh(0,0,0),I=new lh(0,0,0),L=new lh(0,0,0);function N(e,t,n){for(var r=0;r<e.length;r++)e[r]=t+n*r}function j(){s=n.scaleFactor,l=t.dim,x=Math.min(5,2+Math.floor(a*s));var e=l[0]*l[1]*l[2];c=function(e,t,n){for(var r=mw.allocateTyped(e,t),i=0;i<t;++i)r[i]=n;return r}(Float32Array,e,-1001),f=mw.allocateTyped(Float32Array,3*e),h=mw.allocateTyped(Float32Array,e),P&&(M=mw.allocateTyped(Float32Array,e),T=[]),d=mw.allocateTyped(Float32Array,l[0]),p=mw.allocateTyped(Float32Array,l[1]),v=mw.allocateTyped(Float32Array,l[2]),N(d,O[0],1/s),N(p,O[1],1/s),N(v,O[2],1/s)}function D(){a=n.probeRadius,s=n.scaleFactor,u=n.probePositions,P=n.visibilitySelector,i=mw.allocateTyped(Float32Array,E),o=0;for(var e=0;e<E;++e){var t=_[4*e+3]+=a;t>o&&(o=t),i[e]=t*t}j(),function(){var e=0,t=2*Math.PI/u;g=mw.allocateTyped(Float32Array,u),m=mw.allocateTyped(Float32Array,u);for(var n=0;n<u;n++)g[n]=Math.cos(e),m[n]=Math.sin(e),e+=t}(),y=new SO(_,O,A,2.01*o),b=new Int32Array(y.neighbourListLength),C=-1}function B(e,t,n,r){var o=4*e,a=i[e],s=_[o]-t,u=_[o+1]-n,l=_[o+2]-r;return s*s+u*u+l*l<a}function z(e,t,n,r,i){var o;if(-1!==C){if((o=C)!==r&&o!==i&&B(o,e,t,n))return o;C=-1}var a=0;for(o=b[a];o>=0;){if(o!==r&&o!==i&&B(o,e,t,n))return C=o,o;o=b[++a]}return C=-1,-1}function F(e,t){var n=4*e,r=4*t,i=_[n],o=_[n+1],a=_[n+2],f=_[n+3],h=R.x=_[r]-i,y=R.y=_[r+1]-o,b=R.z=_[r+2]-a,w=_[r+3],S=h*h+y*y+b*b,E=Math.sqrt(S),k=f*((f*f+E*E-w*w)/(2*f*E));R.normalize(),function(e,t){e.x=e.y=e.z=1,0!==t.x?e.x=(t.y+t.z)/-t.x:0!==t.y?e.y=(t.x+t.z)/-t.y:0!==t.z&&(e.z=(t.x+t.y)/-t.z)}(I,R),I.normalize(),L.crossVectors(R,I),L.normalize();var A=Math.sqrt(f*f-k*k);I.multiplyScalar(A),L.multiplyScalar(A),R.multiplyScalar(k),R.x+=i,R.y+=o,R.z+=a,C=-1;for(var M=x,T=0;T<u;T++){var P=g[T],N=m[T],j=R.x+P*I.x+N*L.x,D=R.y+P*I.y+N*L.y,B=R.z+P*I.z+N*L.z;if(-1===z(j,D,B,e,t))for(var F=Math.floor(s*(j-O[0])),V=Math.floor(s*(D-O[1])),U=Math.floor(s*(B-O[2])),Z=Math.max(0,F-M),H=Math.max(0,V-M),G=Math.max(0,U-M),W=Math.min(l[0],F+M+2),q=Math.min(l[1],V+M+2),K=Math.min(l[2],U+M+2),Y=G;Y<K;Y++){b=B-v[Y];for(var X=l[1]*l[0]*Y,$=H;$<q;$++)for(var J=b*b+(y=D-p[$])*y,Q=X+l[0]*$,ee=Z;ee<W;ee++){S=J+(h=j-d[ee])*h;var te=ee+Q,ne=c[te];ne>0&&S<ne*ne&&(c[te]=Math.sqrt(S))}}}}function V(){console.time("ContactSurface.getVolume"),console.time("ContactSurface.init"),D(),console.timeEnd("ContactSurface.init"),console.time("ContactSurface.projectPoints"),function(){for(var e=0;e<E;e++){var t=4*e,n=_[t],r=_[t+1],o=_[t+2],a=_[t+3],u=i[e];y.withinRadii(n,r,o,a,b);for(var m=Math.ceil(a*s),g=Math.floor(s*(n-O[0])),x=Math.floor(s*(r-O[1])),k=Math.floor(s*(o-O[2])),A=Math.max(0,g-m),C=Math.max(0,x-m),R=Math.max(0,k-m),I=Math.min(l[0],g+m+2),L=Math.min(l[1],x+m+2),N=Math.min(l[2],k+m+2),j=3*e,D=w[j],B=w[j+1],F=w[j+2],V=R;V<N;V++)for(var U=v[V]-o,Z=l[1]*l[0]*V,H=C;H<L;H++)for(var G=p[H]-r,W=U*U+G*G,q=Z+l[0]*H,K=A;K<I;K++){var Y=K+q,X=d[K]-n,$=W+X*X;if($<u){var J=Math.exp(.28125*-$),Q=3*Y;f[Q]+=D*J,f[Q+1]+=B*J,f[Q+2]+=F*J,h[Y]+=J,null!==P&&J>M[Y]&&(M[Y]=J,T[Y]=S[e]),c[Y]<0&&(c[Y]=-c[Y]);var ee=Math.sqrt($),te=a/ee,ne=X*te,re=G*te,ie=U*te;if(-1===z(ne+=n,re+=r,ie+=o,e,-1)){var oe=a-ee;oe<c[Y]&&(c[Y]=oe)}}}}}(),console.timeEnd("ContactSurface.projectPoints"),console.time("ContactSurface.projectTorii"),function(){for(var e=0;e<E;e++){var t=4*e;y.withinRadii(_[t],_[t+1],_[t+2],_[t+3],b);for(var n=0,r=b[n];r>=0;)e<r&&F(e,r),r=b[++n]}}(),console.timeEnd("ContactSurface.projectTorii"),function(){for(var e=0,t=c.length;e<t;e++){c[e]<0&&(c[e]=0);var n=h[e];if(n>0){n=1/n;var r=3*e;f[r]*=n,f[r+1]*=n,f[r+2]*=n}}}(),console.timeEnd("ContactSurface.getVolume")}this.build=function(){V(),this.volTexMap=f,this.weightsMap=M,this.atomMap=T,this.volMap=c}}function kO(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var OO=DE.Volume,AO=function(e){P_(n,e);var t=kO(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_computeSurface",value:function(e,t,n,r){var i=new EO(e,n,r);return i.build(),{volMap:new OO(Float32Array,this.numVoxels,t,1,i.volMap),volTexMap:new OO(Float32Array,this.numVoxels,t,3,i.volTexMap),atomMap:i.atomMap,atomWeightMap:new OO(Float32Array,this.numVoxels,t,1,i.weightsMap)}}}]),n}(bO),CO=C_((function e(t,n){O_(this,e),this.coord=new lh,this.coord.copy(t),this.radius=n,this.colorX=.99999,this.colorY=0,this.colorZ=0,this.atomType=0,this.srcAtom=null})),MO=function(){function e(t,n,r,i,o){O_(this,e),this._numAtoms=t,this._atoms=n,this._vBoxMin=new lh,this._vBoxMax=new lh,this._vBoxMin.copy(r),this._vBoxMax.copy(i),this._probeRadius=o,this._atomsList=null,this._voxelList=null}return C_(e,[{key:"createVoxels",value:function(){var e,t,n=0|this._numAtoms,r=this._atoms,i=this._vBoxMax.x-this._vBoxMin.x,o=this._vBoxMax.y-this._vBoxMin.y,a=this._vBoxMax.z-this._vBoxMin.z,s=i<o?i:o;s=a<s?a:s;var u,l=0,c=0;for(u=0;u<n;u++)l=(t=2*(r[u].radius+this._probeRadius))>l?t:l,c+=t;var f=Math.floor(s/l);f<2&&(f=2),c/=n,this._numCells=f,this._aveRad=c,this._maxRad=l;var h=f,d=f*f,p=f*f*f,v=this._xScale=1/(this._vBoxMax.x-this._vBoxMin.x),m=this._yScale=1/(this._vBoxMax.y-this._vBoxMin.y),g=this._zScale=1/(this._vBoxMax.z-this._vBoxMin.z),y=0,b=v*f,x=m*f,_=g*f;for(u=0;u<n;u++){var w=2*(4.5*(r[u].radius+this._probeRadius)),S=Math.floor(b*w+.8),E=Math.floor(x*w+.8),k=Math.floor(_*w+.8);y+=++S*++E*++k}this._voxelList=mw.allocateTyped(Int32Array,p);var O=[];if(O.length=y,null===this._voxelList||null===O)return-1;for(u=0;u<p;u++)this._voxelList[u]=-1;for(e=0,u=0;u<n;u++){t=4.5*(r[u].radius+this._probeRadius);var A=Math.floor((r[u].coord.x-this._vBoxMin.x-t)*f*v),C=Math.floor((r[u].coord.y-this._vBoxMin.y-t)*f*m),M=Math.floor((r[u].coord.z-this._vBoxMin.z-t)*f*g),T=Math.floor((r[u].coord.x-this._vBoxMin.x+t)*f*v),P=Math.floor((r[u].coord.y-this._vBoxMin.y+t)*f*m),R=Math.floor((r[u].coord.z-this._vBoxMin.z+t)*f*g);A=A>=0?A:0,C=C>=0?C:0,T=T<f?T:f-1,P=P<f?P:f-1,R=R<f?R:f-1;for(var I=M=M>=0?M:0;I<=R;I++)for(var L=C;L<=P;L++)for(var N=A;N<=T;N++){var j=N+L*h+I*d;if(this._voxelList[j]<0)O[2*e+0]=u,O[2*e+1]=-1,this._voxelList[j]=e,e++;else{var D=this._voxelList[j];this._voxelList[j]=e,O[2*e+0]=u,O[2*e+1]=D,e++}}}return this._atomsList=Int32Array.from(O),0}},{key:"destroyVoxels",value:function(){this._atomsList=null,this._voxelList=null,this._atoms=null,this._vertices=null,this._vBoxMin=null,this._vBoxMax=null}},{key:"forEachRelatedAtom",value:function(e,t){for(var n=Math.floor((e.x-this._vBoxMin.x)*this._numCells*this._xScale),r=Math.floor((e.y-this._vBoxMin.y)*this._numCells*this._yScale),i=Math.floor((e.z-this._vBoxMin.z)*this._numCells*this._zScale),o=n+r*this._numCells+i*this._numCells*this._numCells,a=this._atoms,s=this._voxelList[o];s>=0;s=this._atomsList[2*s+1]){t(a[this._atomsList[2*s]])}}},{key:"getClosestAtom",value:function(e){var t=null,n=Number.MAX_VALUE;return this.forEachRelatedAtom(e,(function(r){var i=e.distanceToSquared(r.coord);i<n&&(n=i,t=r)})),t}},{key:"buildNormals",value:function(e,t,n){for(var r,i=this,o=0,a=0,s=0,u=0,l=0,c=0,f=0,h=0,d=0,p=2.5*this._aveRad,v=p*p,m=.1*-this._aveRad,g=function(e){var t=a-e.coord.x,n=s-e.coord.y,p=u-e.coord.z;if(!((r=t*t+n*n+p*p)>v)){var g=e.radius+i._probeRadius;(h=r-g*g)<0&&(h=-h),d=Math.exp(m*h),l+=t*d,c+=n*d,f+=p*d,o++}},y=0;y<e;y++)a=t[y].x,s=t[y].y,u=t[y].z,o=0,l=c=f=0,this.forEachRelatedAtom(t[y],g),r=l*l+c*c+f*f,o>0&&(h=1/Math.sqrt(r),l*=h,c*=h,f*=h),n[y].x=l,n[y].y=c,n[y].z=f;return 0}},{key:"buildColors",value:function(e,t,n,r){for(var i=this,o=0,a=0,s=0,u=0,l=0,c=r*r,f=[],h=[],d=0,p=function(e){var t=o-e.coord.x,n=a-e.coord.y,r=s-e.coord.z,p=t*t+n*n+r*r;if(!(p>c)){var v=e.radius+i._probeRadius;(u=p-v*v)<0&&(u=-u),l=1/(.8+u),f.push([e.colorX,e.colorY,e.colorZ]),h.push(l),d+=l}},v=0;v<e;v++){o=t[v].x,a=t[v].y,s=t[v].z,f=[],h=[],d=0,this.forEachRelatedAtom(t[v],p);for(var m=0;m<f.length;++m){var g=h[m]/d;n[v].x+=f[m][0]*g,n[v].y+=f[m][1]*g,n[v].z+=f[m][2]*g}}return 0}}]),e}(),TO=function(){function e(t,n,r){var i;for(O_(this,e),this._maxNumVertices=t,this._maxNumTriangles=n,this._vertices=new Array(t),this._normals=new Array(t),this._colors=null,r&&(this._colors=new Array(t)),this._indices=new Array(3*n),this._numVertices=0,this._numTriangles=0,i=0;i<t;i++)this._vertices[i]=new lh,this._normals[i]=new lh;for(i=0;i<3*n;i++)this._indices[i]=-1;if(r)for(i=0;i<t;i++)this._colors[i]=new lh}return C_(e,[{key:"destroy",value:function(){this._vertices=null,this._normals=null,this._indices=null}}]),e}();function PO(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var RO=32768,IO=DE.Element,LO=function(e){P_(n,e);var t=PO(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_build",value:function(){this._innerBuild();var e=this.getGeo();this.destroy(),this._fromGeo(e)}},{key:"_fromGeo",value:function(e){var t=null,n=mw.allocateTyped(Float32Array,3*e._numVertices),r=mw.allocateTyped(Float32Array,3*e._numVertices);null!==e._colors&&(t=mw.allocateTyped(Float32Array,3*e._numVertices));for(var i=mw.allocateTyped(Uint32Array,3*e._numTriangles),o=0,a=0;o<e._numVertices;o++)n[a+0]=e._vertices[o].x,n[a+1]=e._vertices[o].y,n[a+2]=e._vertices[o].z,r[a+0]=e._normals[o].x,r[a+1]=e._normals[o].y,r[a+2]=e._normals[o].z,a+=3;if(null!==t)for(var s=0,u=0;s<e._numVertices;s++,u+=3)t[u+0]=e._colors[s].x,t[u+1]=e._colors[s].y,t[u+2]=e._colors[s].z;for(var l=3*e._numTriangles,c=0;c<l;c++)i[c]=e._indices[c];this.setIndex(new Nd(i,1)),this.setAttribute("position",new Nd(n,3)),this.setAttribute("normal",new Nd(r,3)),this.setAttribute("color",new Nd(t,3)),this.computeBoundingBox(),this.computeBoundingSphere(),e.destroy()}},{key:"convertToAtomsColored",value:function(e,t){for(var n=e.atoms,r=e.colors,i=0,o=n.length;i<o;i++){var a=n[i].position,s=n[i].element.radius;t[i]=new CO(a,s);var u=n[i].element.number;t[i].atomType=this.getType(u);var l=3*i;t[i].colorX=r[l++],t[i].colorY=r[l++],t[i].colorZ=r[l],t[i].srcAtom=n[i]}}},{key:"getGeo",value:function(){return this.geoOut}},{key:"destroy",value:function(){this.atoms=null,this.hashLines=null,this.hashEntries=null}},{key:"getBoundingBox",value:function(e,t,n){var r=1e7;t.x=t.y=t.z=r,n.x=n.y=n.z=0-r;for(var i=this.probeRadius*this.atomRadiusScale,o=0,a=0,s=e.length;a<s;a++){var u=e[a].coord,l=e[a].radius+i;o=l>o?l:o,u.x-l<t.x&&(t.x=u.x-l),u.y-l<t.y&&(t.y=u.y-l),u.z-l<t.z&&(t.z=u.z-l),u.x+l>n.x&&(n.x=u.x+l),u.y+l>n.y&&(n.y=u.y+l),u.z+l>n.z&&(n.z=u.z+l)}t.x-=o,t.y-=o,t.z-=o,n.x+=o,n.y+=o,n.z+=o}},{key:"getCornerCoord",value:function(e,t,n,r,i,o,a){var s=1/(o-1),u=n*s,l=r*s,c=i*s;a.x=e.x*(1-u)+t.x*u,a.y=e.y*(1-l)+t.y*l,a.z=e.z*(1-c)+t.z*c}},{key:"buildEdgePoint",value:function(e,t,n,r,i,o){if(n[e]^n[t]){var a=(0-r.pointsValuesLinear[i+24+e])/(r.pointsValuesLinear[i+24+t]-r.pointsValuesLinear[i+24+e]),s=r.pointsValuesLinear[i+3*e+0],u=r.pointsValuesLinear[i+3*e+1],l=r.pointsValuesLinear[i+3*e+2],c=r.pointsValuesLinear[i+3*t+0],f=r.pointsValuesLinear[i+3*t+1],h=r.pointsValuesLinear[i+3*t+2];o.x=s*(1-a)+c*a,o.y=u*(1-a)+f*a,o.z=l*(1-a)+h*a}}},{key:"isTriangleVisible",value:function(e,t,n){var r=this.voxelWorld.getClosestAtom(e),i=this.voxelWorld.getClosestAtom(t),o=this.voxelWorld.getClosestAtom(n);return null!==r&&null!==i&&null!==o&&null!==r.srcAtom&&null!==i.srcAtom&&null!==o.srcAtom&&(this.visibilitySelector.includesAtom(r.srcAtom)&&this.visibilitySelector.includesAtom(i.srcAtom)&&this.visibilitySelector.includesAtom(o.srcAtom))}},{key:"addTriangle",value:function(e,t,n){if(this.visibilitySelector&&!this.isTriangleVisible(e,t,n))return!0;var r=this.geoOut;if(r._numTriangles>=this.maxNumTriangles)return!1;var i=this.addVertexToGeo(r,e),o=this.addVertexToGeo(r,t),a=this.addVertexToGeo(r,n);if((i|o|a)<0)return!1;var s=3*r._numTriangles;return r._indices[s+0]=i,r._indices[s+1]=o,r._indices[s+2]=a,r._numTriangles++,!0}},{key:"buildGeoFromCorners",value:function(e,t,n,r,i,o){for(var a=e-1,s=e,u=e*e,l=new Array(12),c=0;c<12;c++)l[c]=new lh;for(var f=[],h=0;h<8;h++)f[h]=1;for(var d=new lh,p=0,v=0,m=0;m<a;m++,v+=u)for(var g=0,y=0;y<a;y++,g+=s)for(var b=0;b<a;b++)if(o.hasIntersection[p]){var x=o.bitsInside[p];this.getCornerCoord(t,n,b,m,y,e,d);for(var _=32*p,w=0,S=0;w<8;w++)o.pointsValuesLinear[_+S++]=d.x,o.pointsValuesLinear[_+S++]=d.y,o.pointsValuesLinear[_+S++]=d.z;o.pointsValuesLinear[_+3]+=i.x,o.pointsValuesLinear[_+6]+=i.x,o.pointsValuesLinear[_+15]+=i.x,o.pointsValuesLinear[_+18]+=i.x,o.pointsValuesLinear[_+6+2]+=i.z,o.pointsValuesLinear[_+9+2]+=i.z,o.pointsValuesLinear[_+18+2]+=i.z,o.pointsValuesLinear[_+21+2]+=i.z,o.pointsValuesLinear[_+12+1]+=i.y,o.pointsValuesLinear[_+15+1]+=i.y,o.pointsValuesLinear[_+18+1]+=i.y,o.pointsValuesLinear[_+21+1]+=i.y;for(var E=_+24,k=0;k<8;++k)f[k]=o.pointsValuesLinear[E+k]<0?1:0;this.buildEdgePoint(0,1,f,o,_,l[0]),this.buildEdgePoint(1,2,f,o,_,l[1]),this.buildEdgePoint(2,3,f,o,_,l[2]),this.buildEdgePoint(3,0,f,o,_,l[3]),this.buildEdgePoint(4,5,f,o,_,l[4]),this.buildEdgePoint(5,6,f,o,_,l[5]),this.buildEdgePoint(6,7,f,o,_,l[6]),this.buildEdgePoint(7,4,f,o,_,l[7]),this.buildEdgePoint(0,4,f,o,_,l[8]),this.buildEdgePoint(1,5,f,o,_,l[9]),this.buildEdgePoint(2,6,f,o,_,l[10]),this.buildEdgePoint(3,7,f,o,_,l[11]);for(var O=16*x,A=0,C=0;A<6;A++,C+=3){var M=o.striIndicesMarchCube[O+C];if(M<0)break;var T=o.striIndicesMarchCube[O+C+1],P=o.striIndicesMarchCube[O+C+2];if(!this.addTriangle(l[M],l[T],l[P]))return-2}p++}else p++;return 0}},{key:"getNumIntersectedCells",value:function(e,t,n,r){for(var i=e*e,o=0,a=0,s=0,u=0;u<t;u++,s+=i)for(var l=0,c=0;c<t;c++,l+=e)for(var f=0;f<t;f++){var h=32*a+24,d=f+l+s;r.pointsValuesLinear[h]=n[d],r.pointsValuesLinear[h+1]=n[d+1],r.pointsValuesLinear[h+2]=n[d+e+1],r.pointsValuesLinear[h+3]=n[d+e],r.pointsValuesLinear[h+4]=n[i+d],r.pointsValuesLinear[h+5]=n[i+d+1],r.pointsValuesLinear[h+6]=n[i+d+e+1],r.pointsValuesLinear[h+7]=n[i+d+e];for(var p=0,v=0;v<8;++v)r.pointsValuesLinear[h+v]<0&&(p|=1<<v);0===p||255===p?r.hasIntersection[a]=!1:(r.hasIntersection[a]=!0,o++),r.bitsInside[a]=p,a++}return o}},{key:"getType",value:function(e){var t=[0,0,1,1,2,6,3,6,4,6,5,6,6,0,7,3,8,2,9,6,10,6,11,6,12,6,13,6,14,6,15,4,16,5,17,6,18,6,19,6,20,6,21,6,22,6,23,6,24,6,25,6,26,6,27,6,28,6,29,6,30,6,31,6,32,6,33,6,34,6,35,6,36,6,37,6,38,6,39,6,40,6,41,6,42,6,43,6,44,6,45,6,46,6,47,6,48,6,49,6,50,6,51,6,52,6,53,6,54,6,55,6,56,6,57,6,58,6,59,6,60,6,61,6,62,6,63,6,64,6,65,6,66,6,67,6,68,6,69,6,70,6,71,6,72,6,73,6,74,6,75,6,76,6,77,6,78,6,79,6,80,6,81,6,82,6,83,6,84,6,85,6,86,6,87,6,88,6,89,6,90,6,91,6,92,6,93,6,94,6,95,6,96,6,97,6,98,6,99,6,100,6,101,6,102,6,103,6,104,6,105,6,106,6,107,6,108,6,109,6];if(e<1||e>t.length/2||2*Object.keys(IO.ByAtomicNumber).length!==t.length)throw new Error("atomT.length  should be equal Element.ByAtomicNumber.length * 2");return t[2*e]}},{key:"calculateGridCorners",value:function(e,t,n,r,i,o){for(var a=t*t,s=a*t,u=new lh,l=new lh,c=0;c<s;c++)e[c]=1e12;for(var f=(t-1)/(r.x-n.x),h=(t-1)/(r.y-n.y),d=(t-1)/(r.z-n.z),p=0,v=i.length;p<v;p++){var m=i[p],g=m.radius+o,y=(m.coord.x-g-n.x)*f,b=(m.coord.y-g-n.y)*h,x=(m.coord.z-g-n.z)*d,_=Math.floor(y),w=Math.floor(b),S=Math.floor(x),E=Math.floor((m.coord.x+g-n.x)*f),k=Math.floor((m.coord.y+g-n.y)*h),O=Math.floor((m.coord.z+g-n.z)*d);E=++E<=t-1?E:t-1,k=++k<=t-1?k:t-1,O=++O<=t-1?O:t-1;for(var A=w;A<=k;A++)for(var C=A*a,M=S;M<=O;M++)for(var T=M*t,P=_;P<=E;P++){var R=C+T+P;this.getCornerCoord(n,r,P,A,M,t,u),l.x=u.x-m.coord.x,l.y=u.y-m.coord.y,l.z=u.z-m.coord.z;var I=Math.sqrt(l.x*l.x+l.y*l.y+l.z*l.z)-g;I<e[R]&&(e[R]=I)}}}},{key:"createVertexHash",value:function(e,t){if(this.hashLines=mw.allocateTyped(Int32Array,65536),null===this.hashLines)return-1;for(var n=0,r=0;n<RO;n++)this.hashLines[r++]=0,this.hashLines[r++]=-1;if(this.maxNumVertices=e,this.maxNumTriangles=t,this.numHashEtriesAllocated=e,this.hashEntries=mw.allocateTyped(Int32Array,2*this.numHashEtriesAllocated),null===this.hashEntries)return-1;for(var i=0,o=0;i<this.numHashEtriesAllocated;i++)this.hashEntries[o++]=-1,this.hashEntries[o++]=-1;return this.numHashEntryIndex=0,0}},{key:"getNewHashEntry",value:function(){if(this.numHashEntryIndex<this.numHashEtriesAllocated){var e=this.numHashEntryIndex;return this.numHashEntryIndex++,e}return-1}},{key:"addVertexToGeo",value:function(e,t){var n,r=.01,i=this.marCubeResoultion<<2,o=new lh,a=Math.floor(i*(t.x-this.vBoxMin.x)/(this.vBoxMax.x+r-this.vBoxMin.x)),s=Math.floor(i*(t.y-this.vBoxMin.y)/(this.vBoxMax.y+r-this.vBoxMin.y)),u=815851*a+37633*Math.floor(i*(t.z-this.vBoxMin.z)/(this.vBoxMax.z+r-this.vBoxMin.z))+2453543*s,l=(u&=32767)+u;if(null!==this.vBoxMin&&null!==this.vBoxMax)for(n=this.hashLines[l+1];n>=0;n=this.hashEntries[2*n+1]){var c=this.hashEntries[2*n+0];if(o.copy(e._vertices[c]),o.x-=t.x,o.y-=t.y,o.z-=t.z,o.x*o.x+o.y*o.y+o.z*o.z<1e-6)return c}if(e._numVertices>=this.maxNumVertices)return-1;var f=e._numVertices;if(e._vertices[f].copy(t),null!==this.vBoxMin&&null!==this.vBoxMax){if((n=this.getNewHashEntry())<0)return-1;var h=this.hashLines[l+1];this.hashLines[l+1]=n,this.hashEntries[2*n+0]=f,this.hashEntries[2*n+1]=h,this.hashLines[l+0]++}return e._numVertices++,f}},{key:"modifyExcludedFromGeo",value:function(e,t,n,r,i,o){var a,s,u;for(var l=e*e,c=(e-1)/(r.x-n.x),f=(e-1)/(r.y-n.y),h=(e-1)/(r.z-n.z),d=2*t*(2*t),p=1/(e-1),v=0;v<i._numVertices;v++){var m=i._vertices[v],g=1.1*t,y=Math.floor((m.x-g-n.x)*c),b=Math.floor((m.y-g-n.y)*f),x=Math.floor((m.z-g-n.z)*h),_=Math.floor((m.x+g-n.x)*c),w=Math.floor((m.y+g-n.y)*f),S=Math.floor((m.z+g-n.z)*h);y=y>=0?y:0,x=x>=0?x:0,_=_<=e-1?_:e-1,w=w<=e-1?w:e-1,S=S<=e-1?S:e-1;for(var E=b=b>=0?b:0;E<=w;E++)for(var k=E*l,O=x;O<=S;O++)for(var A=O*e,C=y;C<=_;C++){a=k+A+C;var M=C*p,T=n.x*(1-M)+r.x*M;M=E*p;var P=n.y*(1-M)+r.y*M;M=O*p;var R=n.z*(1-M)+r.z*M,I=T-m.x,L=P-m.y,N=R-m.z,j=I*I+L*L+N*N;j<d&&(s=Math.sqrt(j),(u=-(s-t))>0?(o[a]<0&&(o[a]=u),u>o[a]&&(o[a]=u)):u>o[a]&&(o[a]=u))}}return 0}},{key:"_innerBuild",value:function(){var e,t=1.2,n={posRad:this._posRad,colors:this._colors,atoms:this._opts.atoms};this.complex=this._opts.parent,this.atoms=n.atoms,this.meshResolution=this._opts.gridSpacing,this.atomRadiusScale=this._opts.radScale,this.colorMode=this._opts.colorMode,this.probeRadius=this._opts.probeRadius,this.useVertexColors=!0,this.excludeProbe=this._opts.excludeProbe,this.visibilitySelector=this._opts.visibilitySelector,this.geoOut=null,this.hashLines=null,this.hashEntries=null,this.numHashEtriesAllocated=0,this.numHashEntryIndex=0,this.maxNumVertices=0,this.maxNumTriangles=0;var r=new Array(this.atoms.length);this.convertToAtomsColored(n,r);var i=this.vBoxMin=new lh,o=this.vBoxMax=new lh;this.getBoundingBox(r,i,o);var a=this.marCubeResoultion=4*this.meshResolution,s=a,u=s*s*s,l=mw.allocateTyped(Float32Array,u),c=this.probeRadius*this.atomRadiusScale;this.calculateGridCorners(l,s,i,o,r,c);var f=a-1,h=new fO;if((e=h.create(f))<0)return e;var d=new lh;d.x=(o.x-i.x)/f,d.y=(o.y-i.y)/f,d.z=(o.z-i.z)/f;var p=this.getNumIntersectedCells(s,f,l,h),v=Math.floor(p*t),m=Math.floor(p*t*2);if(this.geoOut=new TO(v,m,this.useVertexColors),(e=this.createVertexHash(v,m))<0)return e;var g=c;if(this.excludeProbe&&(g=.01),this.voxelWorld=new MO(r.length,r,i,o,g),this.voxelWorld.createVoxels(),e=this.buildGeoFromCorners(a,i,o,l,d,h),this.excludeProbe){if(this.modifyExcludedFromGeo(s,c,i,o,this.geoOut,l),this.geoOut._vertices=null,this.geoOut._colors=null,this.geoOut._indices=null,this.geoOut._normals=null,this.geoOut._numVertices=0,this.geoOut._numTriangles=0,this.geoOut=null,p=this.getNumIntersectedCells(s,f,l,h),v=Math.floor(p*t),m=Math.floor(p*t*2),this.geoOut=new TO(v,m,this.useVertexColors),(e=this.createVertexHash(v,m))<0)return e;e=this.buildGeoFromCorners(s,i,o,l,d,h)}this.voxelWorld.buildNormals(this.geoOut._vertices.length,this.geoOut._vertices,this.geoOut._normals);var y=6.5;return this.excludeProbe&&(y-=1.5),this.useVertexColors&&this.voxelWorld.buildColors(this.geoOut._vertices.length,this.geoOut._vertices,this.geoOut._colors,y),this.voxelWorld.destroyVoxels(),this.voxelWorld=null,h.destroy(),e}}]),n}(cO);function NO(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var jO=function(e){P_(n,e);var t=NO(n);function n(e,r){var i;O_(this,n),(i=t.call(this))._opts=r,i.items=[],i.needsUpdate=!1;var o=-50,a=-50;switch(r.horizontalAlign){case"left":o=0;break;case"right":o=-100}switch(r.verticalAlign){case"top":a=-100;break;case"bottom":a=0}var s=new lh(r.dx||0,r.dy||0,r.dz||0);return i.userData={translation:"translate(".concat(o,"%, ").concat(a,"%)"),offset:s},i}return C_(n,[{key:"setItem",value:function(e,t,n){var r=this._opts,i=this.items[e]||function(e,t){var n=document.createElement("div");if(n.className=t,"string"===typeof e){var r=document.createElement("span");r.style.fontSize="150%";for(var i=e.split("\n"),o=0,a=i.length;o<a;++o){var s=document.createElement("span"),u=document.createTextNode(i[o]);s.appendChild(u),r.appendChild(s),o<a-1&&r.appendChild(document.createElement("br"))}n.appendChild(r)}else n.appendChild(e);return n.worldPos=new lh,n}(n,"label");i.worldPos.copy(t),i.style.textAlign=r.horizontalAlign,i.style.verticalAlign=r.verticalAlign,this.items[e]=i}},{key:"setColor",value:function(e,t,n){this.items[e].opts={color:t,background:n}}},{key:"startUpdate",value:function(){return!0}},{key:"finishUpdate",value:function(){this.needsUpdate=!0,this.dispatchEvent({type:"update"})}},{key:"finalize",value:function(){this.finishUpdate()}},{key:"raycast",value:function(){}},{key:"setOpacity",value:function(){}},{key:"getSubset",value:function(){return[]}}]),n}(J_),DO={InstancedSpheresGeometry:lk,SimpleSpheresGeometry:pk,Simple2CCylindersGeometry:bk,Instanced2CCylindersGeometry:Mk,ExtrudedObjectsGeometry:Dk,ChunkedLinesGeometry:Jk,TwoColorLinesGeometry:tO,CrossGeometry:sO,QuickSurfGeometry:wO,ContactSurfaceGeometry:AO,SSIsosurfaceGeometry:LO,LabelsGeometry:jO},BO={precision:"mediump",init:function(e){this.precision=e.capabilities.getMaxPrecision("highp")}},zO=new Uint8Array([24,52,0,254,145,0,122,0,0,7,170,0,34,214,0,173,8,0,86,249,0,160,4,0,226,46,0,224,211,0,3,157,0,174,247,0,12,182,0,220,216,0,1,109,0,253,154,0]),FO=new $g(zO,4,4,gf,ff,300,1e3,1e3,1003,1003,1);FO.needsUpdate=!0;var VO={noiseWidth:4,noiseHeight:4,noiseTexture:FO};function UO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UO(Object(n),!0).forEach((function(t){Uw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HO(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var GO=[new $f(-.541978,.840393),new $f(.125533,-.992089),new $f(.374329,.927296),new $f(-.105475,.994422)],WO=mp.merge([Np.fog,Np.lights,{diffuse:{value:new Pd(15658734)},opacity:{value:1},specular:{type:"c",value:new Pd(1118481)},shininess:{type:"f",value:30},fixedColor:{type:"c",value:new Pd(16777215)},zOffset:{type:"f",value:0},zClipValue:{type:"f",value:0},clipPlaneValue:{type:"f",value:0},nearPlaneValue:{type:"f",value:-.5},invModelViewMatrix:{type:"4fv",value:new Fh},world2colorMatrix:{type:"4fv",value:new Fh},dashedLineSize:{type:"f",value:.1},dashedLinePeriod:{type:"f",value:.2},projMatrixInv:{type:"4fv",value:new Fh},viewport:{type:"v2",value:new $f},lineWidth:{type:"f",value:2},fogAlpha:{type:"f",value:1},samplesKernel:{type:"v2v",value:null},noiseTex:{type:"t",value:null},noiseTexelSize:{type:"v2",value:null},srcTexelSize:{type:"v2",value:null}}]),qO=["shininess","opacity","zOffset","diffuse","specular","fixedColor","zClipCoef","zClipValue","clipPlaneValue","world2colorMatrix","dashedLineSize","dashedLinePeriod","projMatrixInv","viewport","lineWidth","fogAlpha","samplesKernel","noiseTex","noiseTexelSize","srcTexelSize"],KO={diffuse:new Pd(16777215),specular:new Pd(1118481),shininess:30,opacity:1,fixedColor:new Pd(16777215),zOffset:0,zClipCoef:2,zClipValue:0,clipPlaneValue:0,world2colorMatrix:new Fh,dashedLineSize:.1,dashedLinePeriod:.3,projMatrixInv:new Fh,viewport:new $f(800,600),lineWidth:2,fogAlpha:1,samplesKernel:GO,noiseTex:VO.noiseTexture,noiseTexelSize:new $f(1/VO.noiseWidth,1/VO.noiseHeight),srcTexelSize:new $f(1/800,1/600),copy:function(e){this.diffuse.copy(e.diffuse),this.specular.copy(e.specular),this.shininess=e.shininess,this.opacity=e.opacity,this.fixedColor.copy(e.fixedColor),this.zOffset=e.zOffset,this.zClipCoef=e.zClipCoef,this.zClipValue=e.zClipValue,this.clipPlaneValue=e.clipPlaneValue,this.world2colorMatrix.copy(e.world2colorMatrix),this.dashedLineSize=e.dashedLineSize,this.dashedLinePeriod=e.dashedLinePeriod,this.projMatrixInv=e.projMatrixInv,this.viewport=e.viewport,this.lineWidth=e.lineWidth,this.toonShading=e.toonShading,this.fogAlpha=e.fogAlpha,this.samplesKernel=e.samplesKernel,this.noiseTex=e.noiseTex,this.noiseTexelSize=e.noiseTexelSize,this.srcTexelSize=e.srcTexelSize}},YO=function(e){P_(n,e);var t=HO(n);function n(e){var r;return O_(this,n),(r=t.call(this,e)).fog=!0,r.instancedPos=!1,r.instancedMatrix=!1,r.attrColor=!1,r.attrColor2=!1,r.attrAlphaColor=!1,r.overrideColor=!1,r.sphereSprite=!1,r.cylinderSprite=!1,r.zClip=!1,r.clipPlane=!1,r.fakeOpacity=!1,r.prepassTransparancy=!1,r.colorFromPos=!1,r.shadowmap=!1,r.shadowmapType="random",r.colorFromDepth=!1,r.orthoCam=!1,r.dashedLine=!1,r.transparent=!0,r.thickLine=!1,r.fogTransparent=!1,r.normalsToGBuffer=!1,r.toonShading=!1,r.uberOptions=KO,r.setValues(ZO({uniforms:mp.clone(WO),vertexShader:r.precisionString()+"float INSTANCED_SPRITE_OVERSCALE = 1.3;\r\n\r\nattribute vec3 normal;\r\n\r\n#ifdef NORMALS_TO_G_BUFFER\r\n  varying vec3 viewNormal;\r\n#endif\r\n#if !defined (SPHERE_SPRITE) && !defined (CYLINDER_SPRITE)\r\n  varying vec3 vNormal;\r\n#endif\r\n\r\n#ifdef THICK_LINE\r\n  attribute vec4 position; // W contains vert pos or neg offset\r\n#else\r\n  attribute vec3 position;\r\n#endif\r\n\r\nvarying vec3 vWorldPosition;\r\nvarying vec3 vViewPosition;\r\n\r\n#ifdef ATTR_ALPHA_COLOR\r\n  attribute float alphaColor;\r\n  varying float alphaCol;\r\n#endif\r\n\r\n#if defined(USE_LIGHTS) && defined(SHADOWMAP)\r\n\t#if NUM_DIR_LIGHTS > 0\r\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\r\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\r\n\t\tvarying vec3 vDirectionalShadowNormal[ NUM_DIR_LIGHTS ];\r\n\t#endif\r\n#endif\r\n\r\n#ifdef ATTR_COLOR\r\n  attribute vec3 color;\r\n  varying vec3 vColor;\r\n#endif\r\n\r\n#ifdef ATTR_COLOR2\r\n  attribute vec3 color2;\r\n  varying vec3 vColor2;\r\n  attribute vec2 uv;\r\n  #ifndef CYLINDER_SPRITE\r\n    varying vec2 vUv;\r\n  #endif\r\n#endif\r\n\r\n#ifdef INSTANCED_POS\r\n  attribute vec4 offset;\r\n  #ifdef SPHERE_SPRITE\r\n    varying vec4 instOffset;\r\n  varying vec4 spritePosEye;\r\n  #endif\r\n#endif\r\n\r\n#ifdef INSTANCED_MATRIX\r\n  attribute vec4 matVector1;\r\n  attribute vec4 matVector2;\r\n  attribute vec4 matVector3;\r\n  attribute vec4 invmatVector1;\r\n  attribute vec4 invmatVector2;\r\n  attribute vec4 invmatVector3;\r\n\r\n  #ifdef CYLINDER_SPRITE\r\n    varying vec4 matVec1;\r\n    varying vec4 matVec2;\r\n    varying vec4 matVec3;\r\n    varying vec4 invmatVec1;\r\n    varying vec4 invmatVec2;\r\n    varying vec4 invmatVec3;\r\n    varying vec4 spritePosEye;\r\n  #endif\r\n#endif\r\n\r\nuniform mat4 modelViewMatrix; // optional\r\nuniform mat4 projectionMatrix; // optional\r\nuniform mat3 normalMatrix; // optional\r\nuniform mat4 modelMatrix; // optional\r\n\r\n#ifdef DASHED_LINE\r\n  attribute float lineDistance;\r\n  varying float vLineDistance;\r\n#endif\r\n\r\n#ifdef THICK_LINE\r\n  attribute vec3 direction;\r\n  uniform mat4 projMatrixInv;\r\n  uniform vec2 viewport;\r\n  uniform float lineWidth;\r\n\r\n  vec4 transform(vec4 coord){\r\n    return projectionMatrix * modelViewMatrix * coord;\r\n  }\r\n\r\n  vec2 project(vec4 device){\r\n    vec3 device_normal = device.xyz/device.w;\r\n    vec2 clip_pos = (device_normal*0.5+0.5).xy;\r\n    return clip_pos * viewport;\r\n  }\r\n\r\n  vec4 unproject(vec2 screen, float z, float w){\r\n    vec2 clip_pos = screen/viewport;\r\n    vec2 device_normal = clip_pos*2.0-1.0;\r\n    return vec4(device_normal*w, z, w);\r\n  }\r\n#endif\r\n\r\n\r\n/////////////////////////////////////////// Main ///////////////////////////////////////////////\r\nvoid main() {\r\n\r\n#ifdef ATTR_ALPHA_COLOR\r\n  alphaCol = alphaColor;\r\n#endif\r\n\r\n#ifdef INSTANCED_MATRIX\r\n  vec3 objectNormal = vec3(\r\n    dot(normal, matVector1.xyz),\r\n    dot(normal, matVector2.xyz),\r\n    dot(normal, matVector3.xyz));\r\n#else\r\n  vec3 objectNormal = vec3( normal );\r\n#endif\r\n\r\nvec3 transformedNormal = normalMatrix * objectNormal;\r\n\r\n#if !defined (SPHERE_SPRITE) && !defined (CYLINDER_SPRITE)\r\n  vNormal = normalize(transformedNormal);\r\n#endif\r\n\r\n#ifdef NORMALS_TO_G_BUFFER\r\n  viewNormal = normalize(mat3(modelViewMatrix)*objectNormal);\r\n#endif\r\n\r\n  vec4 localPos = vec4(position.xyz, 1.0);\r\n  vec4 worldPos = modelMatrix * localPos;\r\n  vec4 mvPosition = modelViewMatrix * localPos;\r\n\r\n// make thick line offset\r\n#ifdef THICK_LINE\r\n   // get screen pos\r\n   vec4 dPos = transform(vec4(position.xyz, 1.0));\r\n   vec2 sPos = project(dPos);\r\n   // move pos forward\r\n   vec3 position2 = position.xyz + direction.xyz * 0.5;\r\n   // get screen offset pos\r\n   vec4 dPos2 = transform(vec4(position2.xyz, 1.0));\r\n   vec2 sPos2 = project(dPos2);\r\n   // screen line direction\r\n   vec2 sDir = normalize(sPos2 - sPos);\r\n   // vertex offset (orthogonal to line direction)\r\n   vec2 offset1 = vec2(-sDir.y, sDir.x);\r\n   // move screen vertex\r\n   vec2 newPos = sPos + offset1 * position.w * lineWidth;\r\n   // get moved pos in view space\r\n   vec4 dNewPos =  unproject(newPos, dPos.z, dPos.w);\r\n   mvPosition.xyz = (projMatrixInv * dNewPos).xyz;\r\n#endif // THICK_LINE\r\n\r\n#ifdef INSTANCED_POS\r\n  #ifdef SPHERE_SPRITE\r\n    instOffset = offset;\r\n\r\n    vec4 posEye = modelViewMatrix * vec4( offset.xyz, 1.0 );\r\n    float scale = length(modelViewMatrix[0]);\r\n    mvPosition = posEye + vec4( position.xyz * offset.w * scale * INSTANCED_SPRITE_OVERSCALE, 0.0 );\r\n    posEye.w = offset.w * scale;\r\n\r\n    spritePosEye = posEye;\r\n #else\r\n    localPos = vec4( offset.xyz + position.xyz * offset.w, 1.0 );\r\n    worldPos = modelMatrix * localPos;\r\n    mvPosition = modelViewMatrix * localPos;\r\n  #endif\r\n#endif\r\n\r\n#ifdef INSTANCED_MATRIX\r\n  #ifdef CYLINDER_SPRITE\r\n    matVec1 = matVector1;\r\n    matVec2 = matVector2;\r\n    matVec3 = matVector3;\r\n    invmatVec1 = invmatVector1;\r\n    invmatVec2 = invmatVector2;\r\n    invmatVec3 = invmatVector3;\r\n\r\n    // calculate eye coords of cylinder endpoints\r\n    vec4 v = vec4(0, -0.5, 0, 1);\r\n    vec4 p1 = modelViewMatrix * vec4(dot(v, matVector1), dot(v, matVector2), dot(v, matVector3), 1.0);\r\n    v.y = 0.5;\r\n    vec4 p2 = modelViewMatrix * vec4(dot(v, matVector1), dot(v, matVector2), dot(v, matVector3), 1.0);\r\n\r\n    // sprite is placed at the center of cylinder\r\n    vec4 posEye;\r\n    posEye.xyz = mix(p1.xyz, p2.xyz, 0.5);\r\n    posEye.w = 1.0;\r\n    spritePosEye = posEye;\r\n\r\n    // cylinder radius in eye space\r\n    float rad = length(modelViewMatrix[0]) * length(vec3(matVector1.x, matVector2.x, matVector3.x));\r\n    vec2 spriteSize;\r\n    #ifdef ORTHOGRAPHIC_CAMERA\r\n      // In ortho projection we skip z coordinate\r\n      // basic sprite size at screen plane (covers only cylinder axis)\r\n      vec2 spriteSizeScreen = abs(p2.xy - p1.xy);\r\n\r\n      spriteSize = vec2(1.0, 1.0) * INSTANCED_SPRITE_OVERSCALE * (spriteSizeScreen + 2.0 * rad);\r\n    #else\r\n      // basic sprite size at screen plane (covers only cylinder axis)\r\n      vec2 spriteSizeScreen = abs(p2.xy / p2.z - p1.xy / p1.z);\r\n\r\n      // full sprite size in eye coords\r\n      float minZ = min(abs(p1.z), abs(p2.z));\r\n      spriteSize = vec2(1.0, 1.0) * INSTANCED_SPRITE_OVERSCALE * abs(posEye.z) * (spriteSizeScreen + 2.0 * rad / minZ);\r\n    #endif\r\n\r\n    mvPosition = posEye + vec4( position.xy * 0.5 * spriteSize, 0, 0 );\r\n  #else\r\n    localPos = vec4(dot(localPos, matVector1), dot(localPos, matVector2), dot(localPos, matVector3), 1.0);\r\n    worldPos = modelMatrix * localPos;\r\n    mvPosition = modelViewMatrix * localPos;\r\n  #endif\r\n#endif\r\n\r\n  gl_Position = projectionMatrix * mvPosition;\r\n\r\n  vWorldPosition = worldPos.xyz;\r\n  vViewPosition = - mvPosition.xyz;\r\n\r\n#if defined(USE_LIGHTS) && defined(SHADOWMAP)\r\n\t#if NUM_DIR_LIGHTS > 0\r\n\t  vec4 worldPosition;\r\n\t  // see THREE.WebGLProgram.unrollLoops\r\n\t  #pragma unroll_loop_start\r\n\t  for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\r\n      vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * vec4(vWorldPosition, 1.0);\r\n      vDirectionalShadowNormal[ i ] = (directionalShadowMatrix[ i ] * (modelMatrix * vec4(objectNormal, 0.0))).xyz;\r\n\t  }\r\n\t  #pragma unroll_loop_end\r\n\t#endif\r\n#endif\r\n\r\n#ifdef ATTR_COLOR\r\n  vColor = color.xyz;\r\n#endif\r\n\r\n#ifdef ATTR_COLOR2\r\n  vColor2 = color2;\r\n  #ifndef CYLINDER_SPRITE\r\n    vUv = uv;\r\n  #endif\r\n#endif\r\n\r\n#ifdef DASHED_LINE\r\n  vLineDistance = lineDistance;\r\n#endif\r\n}\r\n",fragmentShader:r.precisionString()+"#if defined (NORMALS_TO_G_BUFFER)\r\n  #define fragColor gl_FragData[0]\r\n#else\r\n  #define fragColor gl_FragColor\r\n#endif\r\n\r\n#ifdef ATTR_ALPHA_COLOR\r\n  varying float alphaCol;\r\n#endif\r\n\r\n#ifdef COLOR_FROM_POS\r\n  uniform mat4 world2colorMatrix;\r\n#endif\r\n\r\n#if defined(USE_LIGHTS) && defined(SHADOWMAP)\r\n\t#if NUM_DIR_LIGHTS > 0\r\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\r\n    uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ]; //only for sprites\r\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\r\n\t\tvarying vec3 vDirectionalShadowNormal[ NUM_DIR_LIGHTS ];\r\n    vec4 vDirLightWorldCoord[ NUM_DIR_LIGHTS ];\r\n    vec3 vDirLightWorldNormal[ NUM_DIR_LIGHTS ];\r\n\r\n    #ifdef SHADOWMAP_PCF_RAND\r\n      // We use 4 instead uniform variable or define because this value is used in for(... i < value; ...) with\r\n      // unroll_loop and unroll_loop has pattern:\r\n      // /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g\r\n      uniform vec2 samplesKernel[4]; // 4 is length of _samplesKernel which is defined in UberMaterial.js\r\n      uniform sampler2D noiseTex;\r\n      uniform vec2 noiseTexelSize;\r\n      uniform vec2 srcTexelSize;\r\n      uniform mat4 projectionMatrix;\r\n    #endif\r\n\t#endif\r\n#endif\r\n\r\n#ifdef ATTR_COLOR\r\n  varying vec3 vColor;\r\n#endif\r\n\r\n#ifdef ATTR_COLOR2\r\n  varying vec3 vColor2;\r\n  #ifndef CYLINDER_SPRITE\r\n    varying vec2 vUv;\r\n  #endif\r\n#endif\r\n\r\nuniform vec3 diffuse;\r\nuniform vec3 emissive;\r\nuniform vec3 specular;\r\nuniform float shininess;\r\nuniform vec3 fixedColor;\r\nuniform float opacity;\r\nuniform float zClipValue;\r\nuniform float clipPlaneValue;\r\n\r\n#ifdef NORMALS_TO_G_BUFFER\r\n  varying vec3 viewNormal;\r\n#endif\r\n\r\n#define PI 3.14159265359\r\n#define RECIPROCAL_PI 0.31830988618\r\n#define saturate(a) clamp( a, 0.0, 1.0 )\r\n\r\n#ifdef USE_FOG\r\n  uniform vec3 fogColor;\r\n  uniform float fogAlpha;\r\n  uniform float fogNear;\r\n  uniform float fogFar;\r\n#endif\r\n\r\nvarying vec3 vWorldPosition; // world position of the pixel (invalid when INSTANCED_SPRITE is defined)\r\nvarying vec3 vViewPosition;\r\n\r\n#if !defined (SPHERE_SPRITE) && !defined (CYLINDER_SPRITE)\r\n  varying vec3 vNormal;\r\n#endif\r\n\r\n/////////////////////////////////////////// ZSprites ////////////////////////////////////////////////\r\n#if defined (SPHERE_SPRITE) || defined (CYLINDER_SPRITE)\r\n  uniform float nearPlaneValue;\r\n#endif\r\n\r\n#ifdef SPHERE_SPRITE\r\n  varying vec4 spritePosEye;\r\n#endif\r\n\r\n#if defined(SPHERE_SPRITE) || defined(CYLINDER_SPRITE)\r\n  uniform float zOffset;\r\n\r\n  #if !defined(USE_LIGHTS) || !defined(SHADOWMAP) || !defined(SHADOWMAP_PCF_RAND) || !(NUM_DIR_LIGHTS > 0)\r\n    uniform mat4 projectionMatrix;\r\n  #endif\r\n\r\n  float calcDepthForSprites(vec4 pixelPosEye, float zOffset, mat4 projMatrix) {\r\n    vec4 pixelPosScreen = projMatrix * pixelPosEye;\r\n    return 0.5 * (pixelPosScreen.z / pixelPosScreen.w + 1.0) + zOffset;\r\n  }\r\n#endif\r\n\r\n#ifdef SPHERE_SPRITE\r\n  varying vec4 instOffset;\r\n  uniform mat4 modelMatrix;\r\n  uniform mat4 modelViewMatrix;\r\n  uniform mat4 invModelViewMatrix;\r\n  uniform mat3 normalMatrix;\r\n\r\n\r\n  bool intersect_ray_sphere(in vec3 origin, in vec3 ray, out vec3 point, out float frontFaced) {\r\n\r\n    // intersect XZ-projected ray with circle\r\n    float a = dot(ray, ray);\r\n    float b = dot(ray, origin);\r\n    float c = dot(origin, origin) - 1.0;\r\n    float det = b * b - a * c;\r\n    if (det < 0.0) return false;\r\n    float t1 = (-b - sqrt(det)) / a;\r\n    float t2 = (-b + sqrt(det)) / a;\r\n\r\n    // calculate both intersection points\r\n    vec3 p1 = origin + ray * t1;\r\n    vec3 p2 = origin + ray * t2;\r\n\r\n    // choose nearest point inside frustum\r\n    #ifdef ORTHOGRAPHIC_CAMERA\r\n      // orthografic camera is used for dirLight sources. So in it for all spheres the point with smaller 't' is visible\r\n      // t1 is always smaller than t2 (from calculations)\r\n      point = p1;\r\n      frontFaced = 1.0;\r\n      return true;\r\n    #else\r\n      // for perspective camera first intersection can be in front of near plane. If not intersection is p1 else - p2\r\n      // t* = 0.0 corresponds to point of intersection near plane by the ray from camera to curPixel\r\n      if (t1 >= 0.0) {\r\n        point = p1;\r\n        frontFaced = 1.0;\r\n        return true;\r\n      }\r\n      if (t2 >= 0.0) {\r\n        point = p2;\r\n        frontFaced = -1.0;\r\n        return true;\r\n      }\r\n    #endif\r\n\r\n    return false;\r\n  }\r\n\r\n  bool get_sphere_point(in vec3 pixelPosEye, out vec3 point, out float frontFaced) {\r\n    vec3 origin, ray;\r\n\r\n    #ifdef ORTHOGRAPHIC_CAMERA\r\n      // transform vector from sprite center to curPixel into sphere local coords\r\n      origin = pixelPosEye.xyz - spritePosEye.xyz;\r\n      origin = (invModelViewMatrix * vec4(origin, 0.0)).xyz / instOffset.w;\r\n\r\n      // transform camera orientation vector into sphere local coords\r\n      ray = (invModelViewMatrix * vec4(0.0, 0.0, -1.0, 0.0)).xyz;\r\n    #else\r\n      // find point of intersection near plane by the ray from camera to curPixel\r\n      vec4 v = vec4(-(nearPlaneValue / pixelPosEye.z) * pixelPosEye, 1.0);\r\n\r\n      // transform intersection point into sphere local coords\r\n      v = invModelViewMatrix * v;\r\n      origin = (v.xyz - instOffset.xyz) / instOffset.w;\r\n\r\n      // transform vector from camera pos to curPixel into sphere local coords\r\n      ray = (invModelViewMatrix * vec4(pixelPosEye, 0.0)).xyz;\r\n    #endif\r\n    ray = normalize(ray);\r\n\r\n    return intersect_ray_sphere(origin, ray, point, frontFaced);\r\n  }\r\n#endif\r\n\r\n#ifdef CYLINDER_SPRITE\r\n  varying vec4 matVec1;\r\n  varying vec4 matVec2;\r\n  varying vec4 matVec3;\r\n  varying vec4 invmatVec1;\r\n  varying vec4 invmatVec2;\r\n  varying vec4 invmatVec3;\r\n\r\n  uniform mat4 modelMatrix;\r\n  uniform mat4 modelViewMatrix;\r\n  uniform mat4 invModelViewMatrix;\r\n  uniform mat3 normalMatrix;\r\n\r\n  varying vec4 spritePosEye;\r\n\r\n  bool intersect_ray_cylinder(in vec3 origin, in vec3 ray, out vec3 point, out float frontFaced) {\r\n\r\n    // intersect XZ-projected ray with circle\r\n    float a = dot(ray.xz, ray.xz);\r\n    float b = dot(ray.xz, origin.xz);\r\n    float c = dot(origin.xz, origin.xz) - 1.0;\r\n    float det = b * b - a * c;\r\n    if (det < 0.0) return false;\r\n    float t1 = (-b - sqrt(det)) / a;\r\n    float t2 = (-b + sqrt(det)) / a;\r\n\r\n    // calculate both intersection points\r\n    vec3 p1 = origin + ray * t1;\r\n    vec3 p2 = origin + ray * t2;\r\n\r\n    float halfHeight = 0.5;\r\n\r\n    // choose nearest point\r\n    #ifdef ORTHOGRAPHIC_CAMERA\r\n      // orthografic camera is used for dirLight sources. So in it for all cylinders the point with smaller 't' is visible\r\n      // if it is not outside of cylinnder (t1 is always smaller than t2).\r\n      if (p1.y >= -halfHeight && p1.y <= halfHeight) {\r\n        point = p1;\r\n        frontFaced = 1.0;\r\n        return true;\r\n      }\r\n      if (p2.y >= -halfHeight && p2.y <= halfHeight) {\r\n        point = p2;\r\n        frontFaced = -1.0;\r\n        return true;\r\n      }\r\n    #else\r\n      // for perspective camera first intersection can be in front of near plane. If not intersection is p1 else - p2\r\n      // t* = 0.0 corresponds to point of intersection near plane by the ray from camera to curPixel\r\n      if (t1 >= 0.0 && p1.y >= -halfHeight && p1.y <= halfHeight) {\r\n        point = p1;\r\n        frontFaced = 1.0;\r\n        return true;\r\n      }\r\n      if (t2 >= 0.0 && p2.y >= -halfHeight && p2.y <= halfHeight) {\r\n        point = p2;\r\n        frontFaced = -1.0;\r\n        return true;\r\n      }\r\n    #endif\r\n\r\n    return false;\r\n  }\r\n\r\n  bool get_cylinder_point(in vec3 pixelPosEye, out vec3 point, out float frontFaced) {\r\n    vec3 origin, ray;\r\n    vec4 v;\r\n\r\n    #ifdef ORTHOGRAPHIC_CAMERA\r\n      // transform vector from sprite center to curPixel into cylinder local coords\r\n      v = invModelViewMatrix * vec4(pixelPosEye.xyz - spritePosEye.xyz, 0.0);\r\n      origin = vec3(dot(v, invmatVec1), dot(v, invmatVec2), dot(v, invmatVec3));\r\n\r\n      // transform camera orientation vector into cylinder local coords\r\n      v = invModelViewMatrix * vec4(0.0, 0.0, -1.0, 0.0);\r\n      ray = vec3(dot(v, invmatVec1), dot(v, invmatVec2), dot(v, invmatVec3));\r\n    #else\r\n      // find point of intersection near plane by the ray from camera to curPixel\r\n      v = vec4(-(nearPlaneValue / pixelPosEye.z) * pixelPosEye, 1.0);\r\n\r\n      // transform intersection point into cylinder local coords\r\n      v = invModelViewMatrix * v;\r\n      origin = vec3(dot(v, invmatVec1), dot(v, invmatVec2), dot(v, invmatVec3));\r\n\r\n      // transform vector from camera pos to curPixel into cylinder local coords\r\n      v = invModelViewMatrix * vec4(pixelPosEye, 0.0);\r\n      ray = vec3(dot(v, invmatVec1), dot(v, invmatVec2), dot(v, invmatVec3));\r\n    #endif\r\n    ray = normalize(ray);\r\n\r\n    return intersect_ray_cylinder(origin, ray, point, frontFaced);\r\n  }\r\n#endif\r\n\r\n///////////////////////////////////// Pack and unpack ///////////////////////////////////////////////\r\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\r\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\r\n\r\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\r\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\r\n\r\n\r\nconst float ShiftRight8 = 1. / 256.;\r\n\r\nvec4 packDepthToRGBA( const in float v ) {\r\n  vec4 r = vec4( fract( v * PackFactors ), v );\r\n  r.yzw -= r.xyz * ShiftRight8; // tidy overflow\r\n  return r * PackUpscale;\r\n}\r\n\r\nfloat unpackRGBAToDepth( const in vec4 v ) {\r\n  return dot( v, UnpackFactors );\r\n}\r\n\r\n////////////////////////////////////////// All Lighting /////////////////////////////////////////////////\r\n#ifdef TOON_SHADING\r\n  #define LOW_TOON_BORDER 0.0\r\n  #define MEDIUM_TOON_BORDER 0.7\r\n  #define HIGH_TOON_BORDER 1.0\r\n\r\n  #define MEDIUM_TOON_RANGE 0.5\r\n  #define HIGH_TOON_RANGE 0.95\r\n#endif\r\n#if defined(USE_LIGHTS) && NUM_DIR_LIGHTS > 0\r\n  struct ReflectedLight {\r\n    vec3 directDiffuse;\r\n    vec3 directSpecular;\r\n    vec3 indirectDiffuse;\r\n  };\r\n\r\n  struct BlinnPhongMaterial {\r\n    vec3  diffuseColor;\r\n    vec3  specularColor;\r\n    float specularShininess;\r\n  };\r\n\r\n  struct GeometricContext {\r\n    vec3 normal;\r\n    vec3 viewDir;\r\n  };\r\n\r\n  struct DirectionalLight {\r\n    vec3 direction;\r\n    vec3 color;\r\n  };\r\n  uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\r\n\r\n  struct DirectionalLightShadow {\r\n     vec2 shadowMapSize;\r\n     float shadowBias;\r\n     float shadowRadius;\r\n   };\r\n  uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHTS ];\r\n\r\n  uniform vec3 ambientLightColor;\r\n\r\n  /////////////////////////////////////////// Shadowmap ////////////////////////////////////////////////\r\n\r\n  #if defined(SHADOWMAP)\r\n  \tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\r\n  \t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\r\n  \t}\r\n\r\n    float getShadow( sampler2D shadowMap, DirectionalLightShadow dirLight, vec4 shadowCoord, vec3 vViewPosition, vec3 vNormal ) {\r\n   \t  float shadow = 0.0;\r\n\r\n      // When shadows for sprites will appear use here for them normals as it done for G-buffer\r\n      shadowCoord.xyz += dirLight.shadowBias * vNormal;\r\n      shadowCoord.xyz /= shadowCoord.w;\r\n\r\n      bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\r\n      bool inFrustum = all( inFrustumVec );\r\n      bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\r\n      bool frustumTest = all( frustumTestVec );\r\n\r\n      if ( frustumTest ) {\r\n        #ifdef SHADOWMAP_BASIC\r\n      \t  shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\r\n      \t#endif\r\n\r\n      \t#ifdef SHADOWMAP_PCF_SHARP\r\n      \t  vec2 texelSize = vec2( 1.0 ) / dirLight.shadowMapSize;\r\n\r\n            float dx0 = - texelSize.x * dirLight.shadowRadius;\r\n            float dy0 = - texelSize.y * dirLight.shadowRadius;\r\n            float dx1 = + texelSize.x * dirLight.shadowRadius;\r\n            float dy1 = + texelSize.y * dirLight.shadowRadius;\r\n\r\n            shadow = (\r\n            \ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\r\n            \ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\r\n            \ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\r\n            \ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\r\n            \ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\r\n            \ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\r\n            \ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\r\n            \ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\r\n            \ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\r\n            ) * ( 1.0 / 9.0 );\r\n        #endif\r\n\r\n        #ifdef SHADOWMAP_PCF_RAND\r\n          vec2 texelSize = vec2( 1.0 ) / dirLight.shadowMapSize;\r\n\r\n          vec4 vUv = ((projectionMatrix * vec4(vViewPosition, 1.0)) + 1.0) / 2.0;\r\n          vec2 vUvNoise = vUv.xy / srcTexelSize * noiseTexelSize;\r\n\r\n          vec2 noiseVec = normalize(texture2D(noiseTex, vUvNoise).rg);\r\n          mat2 mNoise = mat2(noiseVec.x, noiseVec.y, -noiseVec.y, noiseVec.x);\r\n\r\n          vec2 offset;\r\n          #pragma unroll_loop_start\r\n          for ( int i = 0; i < 4; i ++ ) { // 4 is length of _samplesKernel which is defined in UberMaterial.js\r\n            offset = mNoise * ( normalize( samplesKernel[ i ]) * texelSize * dirLight.shadowRadius );\r\n            shadow +=  texture2DCompare( shadowMap, shadowCoord.xy + offset, shadowCoord.z );\r\n          }\r\n          #pragma unroll_loop_end\r\n          shadow /= float( 4 ); // 4 is length of _samplesKernel which is defined in UberMaterial.js\r\n        #endif\r\n      }\r\n      return shadow;//(shadow != 1.0) ? 0.5 : 1.0;//vec4(shadow, shadow, shadow, 1.0);\r\n   }\r\n  #endif\r\n\r\n  /////////////////////////////////////////// Lighting /////////////////////////////////////////////////\r\n\r\n  vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\r\n    return RECIPROCAL_PI * diffuseColor;\r\n  } // validated\r\n\r\n  vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\r\n    // Original approximation by Christophe Schlick '94\r\n    //;float fresnel = pow( 1.0 - dotLH, 5.0 );\r\n    // Optimized variant (presented by Epic at SIGGRAPH '13)\r\n    float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\r\n    return ( 1.0 - specularColor ) * fresnel + specularColor;\r\n  } // validated\r\n\r\n  float G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\r\n    // geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\r\n    return 0.25;\r\n  }\r\n\r\n  float D_BlinnPhong( const in float shininess, const in float dotNH ) {\r\n    return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\r\n  }\r\n\r\n  vec3 BRDF_Specular_BlinnPhong( const in DirectionalLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\r\n    vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\r\n    float dotNH = saturate(dot( geometry.normal, halfDir ));\r\n    float dotLH = saturate(dot( incidentLight.direction, halfDir ));\r\n\r\n    vec3 F = F_Schlick( specularColor, dotLH );\r\n    float G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\r\n    float D = D_BlinnPhong( shininess, dotNH );\r\n\r\n    return F * ( G * D );\r\n  } // validated\r\n\r\n  void RE_Direct_BlinnPhong( const in DirectionalLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight, float penumbra ) {\r\n\r\n    float dotNL = saturate( dot( geometry.normal, directLight.direction ));\r\n    #ifdef TOON_SHADING\r\n      if(dotNL < MEDIUM_TOON_RANGE){\r\n        dotNL = LOW_TOON_BORDER;\r\n      }\r\n      else if(dotNL < HIGH_TOON_RANGE){\r\n        dotNL = MEDIUM_TOON_BORDER;\r\n      }\r\n      else{\r\n        dotNL = HIGH_TOON_BORDER;\r\n      }\r\n    #endif\r\n\r\n    vec3 irradiance = dotNL * directLight.color * PI;\r\n    reflectedLight.directDiffuse += penumbra * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\r\n    reflectedLight.directSpecular += penumbra * irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess );\r\n  }\r\n\r\n  void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\r\n    reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\r\n  }\r\n\r\n  vec3 calcLighting(const in GeometricContext geometry, const in BlinnPhongMaterial material, vec3 vViewPosition) {\r\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ));\r\n    vec3 irradiance = ambientLightColor * PI;\r\n\r\n    float shadowMask = 1.0;\r\n    // see THREE.WebGLProgram.unrollLoops\r\n  \t#pragma unroll_loop_start\r\n  \t  for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\r\n  \t    #ifdef SHADOWMAP\r\n  \t      shadowMask = getShadow( directionalShadowMap[ i ], directionalLightShadows[ i ], vDirLightWorldCoord[ i ], vViewPosition, vDirLightWorldNormal[ i ] );\r\n        #endif\r\n\r\n  \t\t  if ( shadowMask > 0.0 ) RE_Direct_BlinnPhong( directionalLights[ i ], geometry, material, reflectedLight, shadowMask );\r\n  \t\t}\r\n  \t\t#pragma unroll_loop_end\r\n\r\n    RE_IndirectDiffuse_BlinnPhong(irradiance, material, reflectedLight);\r\n\r\n    return saturate(reflectedLight.indirectDiffuse + reflectedLight.directDiffuse + reflectedLight.directSpecular);\r\n  }\r\n#endif\r\n\r\n/////////////////////////////////////////// Dashed Line ///////////////////////////////////////////////\r\n#ifdef DASHED_LINE\r\n  uniform float dashedLineSize;\r\n  uniform float dashedLinePeriod;\r\n  varying float vLineDistance;\r\n#endif\r\n\r\n/////////////////////////////////////////// Main ///////////////////////////////////////////////\r\nvoid main() {\r\n\r\n#ifdef CLIP_PLANE\r\n  if (vViewPosition.z < clipPlaneValue) discard;\r\n#endif\r\n\r\n#ifdef ZCLIP\r\n  if (vViewPosition.z < zClipValue) discard;\r\n#endif\r\n\r\n#if defined(USE_LIGHTS) && defined(SHADOWMAP)\r\n  #if NUM_DIR_LIGHTS > 0\r\n    // see THREE.WebGLProgram.unrollLoops\r\n    #pragma unroll_loop_start\r\n    for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\r\n      vDirLightWorldCoord[ i ] = vDirectionalShadowCoord[ i ];\r\n      vDirLightWorldNormal[ i ] = vDirectionalShadowNormal[ i ];\r\n    }\r\n    #pragma unroll_loop_end\r\n  #endif\r\n#endif\r\n\r\n  vec4 pixelPosWorld = vec4(vWorldPosition, 1.0);\r\n  vec4 pixelPosEye;\r\n\r\n#ifdef SPHERE_SPRITE\r\n\r\n  vec3 viewNormalSprites;\r\n  float frontFaced = 1.0;\r\n  vec3 normal;\r\n\r\n/* quick-and-dirty method\r\n  normal.xy = ' + INSTANCED_SPRITE_OVERSCALE + ' * (2.0 * vUv - 1.0);\r\n  float r2 = dot(normal.xy, normal.xy);\r\n  if (r2 > 1.0) discard;\r\n  float normalZ = sqrt(1.0 - r2);\r\n  normal.z = normalZ;\r\n  normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\r\n  pixelPosEye = vec4(spritePosEye.xyz, 1.0);\r\n  pixelPosEye.z += spritePosEye.w * normalZ;\r\n*/\r\n\r\n  // ray-trace sphere surface\r\n  {\r\n    vec3 p;\r\n    if (!get_sphere_point(-vViewPosition, p, frontFaced)) discard;\r\n    vec4 v = vec4(instOffset.xyz + p * instOffset.w, 1.0);\r\n    pixelPosWorld = modelMatrix * v;\r\n    pixelPosEye = modelViewMatrix * v;\r\n    normal = normalize(normalMatrix * p);\r\n    #ifdef NORMALS_TO_G_BUFFER\r\n      viewNormalSprites = normalize(mat3(modelViewMatrix)*p);\r\n    #endif\r\n\r\n    #if defined(USE_LIGHTS) && defined(SHADOWMAP)\r\n      #if NUM_DIR_LIGHTS > 0\r\n        // see THREE.WebGLProgram.unrollLoops\r\n        #pragma unroll_loop_start\r\n          for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\r\n            vDirLightWorldCoord[ i ] = directionalShadowMatrix[ i ] * pixelPosWorld;\r\n            vDirLightWorldNormal[ i ] = (directionalShadowMatrix[ i ] * (modelMatrix * vec4(p, 0.0))).xyz;\r\n          }\r\n        #pragma unroll_loop_end\r\n      #endif\r\n    #endif\r\n  }\r\n#endif\r\n\r\n#ifdef CYLINDER_SPRITE\r\n  vec3 normal;\r\n  vec3 viewNormalSprites;\r\n  float frontFaced = 1.0;\r\n  float cylinderY = 0.0;\r\n\r\n  // ray-trace cylinder surface\r\n  {\r\n    vec3 p;\r\n    if (!get_cylinder_point(-vViewPosition, p, frontFaced)) discard;\r\n\r\n    cylinderY = 0.5 * (p.y + 1.0);\r\n\r\n    vec4 v = vec4(p, 1.0);\r\n    v = vec4(dot(v, matVec1), dot(v, matVec2), dot(v, matVec3), 1.0);\r\n    pixelPosWorld = modelMatrix * v;\r\n    pixelPosEye = modelViewMatrix * v;\r\n\r\n    vec3 localNormal = normalize(vec3(p.x, 0.0, p.z));\r\n    normal = vec3(\r\n      dot(localNormal, matVec1.xyz),\r\n      dot(localNormal, matVec2.xyz),\r\n      dot(localNormal, matVec3.xyz));\r\n    #ifdef NORMALS_TO_G_BUFFER\r\n      viewNormalSprites = normalize(mat3(modelViewMatrix)*normal);\r\n    #endif\r\n\r\n    #if defined(USE_LIGHTS) && defined(SHADOWMAP)\r\n      #if NUM_DIR_LIGHTS > 0\r\n        // see THREE.WebGLProgram.unrollLoops\r\n        #pragma unroll_loop_start\r\n          for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\r\n            vDirLightWorldCoord[ i ] = directionalShadowMatrix[ i ] * pixelPosWorld;\r\n            vDirLightWorldNormal[ i ] = (directionalShadowMatrix[ i ] * (modelMatrix * vec4(normal, 0.0))).xyz;\r\n          }\r\n        #pragma unroll_loop_end\r\n      #endif\r\n    #endif\r\n\r\n    normal = normalize(normalMatrix * normal);\r\n  }\r\n#endif\r\n\r\n  #ifdef ATTR_COLOR\r\n    vec3 vertexColor = vColor;\r\n  #else\r\n    vec3 vertexColor = vec3(1.0, 1.0, 1.0);\r\n  #endif\r\n\r\n  #ifdef ATTR_COLOR2\r\n    #ifdef CYLINDER_SPRITE\r\n      float colorCoef = cylinderY; // cylinder parameter is calculated from ray-tracing\r\n    #else\r\n      float colorCoef = vUv.y; // cylinder parameter is interpolated as tex coord\r\n    #endif\r\n      // choose either color or color2\r\n    vertexColor = mix(vColor2, vColor, step(0.5, colorCoef));\r\n  #endif\r\n\r\n  // negative red component is a special condition\r\n  if (vertexColor.x < 0.0) discard;\r\n\r\n  #ifdef DASHED_LINE\r\n    if ( mod( vLineDistance, dashedLinePeriod ) > dashedLineSize ) discard;\r\n  #endif\r\n\r\n  // transparency prepass writes only z, so we don't need to calc the color\r\n  #ifdef PREPASS_TRANSP\r\n    fragColor = vec4(1.0, 1.0, 1.0, 1.0);\r\n    #if defined(SPHERE_SPRITE) || defined(CYLINDER_SPRITE)\r\n      gl_FragDepthEXT = calcDepthForSprites(pixelPosEye, zOffset, projectionMatrix);\r\n    #endif\r\n    return;\r\n  #endif\r\n\r\n    float totalOpacity = opacity;\r\n\r\n  #ifdef ATTR_ALPHA_COLOR\r\n    totalOpacity *= alphaCol;\r\n  #endif\r\n\r\n  // discard fully transparent pixels\r\n  if (totalOpacity == 0.0) discard;\r\n\r\n  #ifdef FAKE_OPACITY\r\n    // discard pixels in checker pattern\r\n    vec2 dm_coord = floor(gl_FragCoord.xy);\r\n    dm_coord = fract(dm_coord * 0.5);\r\n    if (totalOpacity < 1.0 && (dm_coord.x < 0.5 ^^ dm_coord.y < 0.5)) discard;\r\n    vec4 diffuseColor = vec4(diffuse, 1.0);\r\n  #else\r\n    vec4 diffuseColor = vec4(diffuse, totalOpacity);\r\n  #endif\r\n\r\n  float flipNormal;\r\n  #if !defined (SPHERE_SPRITE) && !defined (CYLINDER_SPRITE)\r\n    flipNormal = 1.0;\r\n    #ifdef DOUBLE_SIDED\r\n      flipNormal = float( gl_FrontFacing );\r\n    #endif\r\n    vec3 normal = normalize( vNormal ) * flipNormal;\r\n  #endif\r\n\r\n    diffuseColor.rgb *= vertexColor;\r\n\r\n  #if defined(SPHERE_SPRITE) || defined(CYLINDER_SPRITE)\r\n    gl_FragDepthEXT = calcDepthForSprites(pixelPosEye, zOffset, projectionMatrix);\r\n  #endif\r\n\r\n  #ifdef NORMALS_TO_G_BUFFER\r\n    #if defined (SPHERE_SPRITE) || defined (CYLINDER_SPRITE)\r\n      vec3 viewNormaInColor = viewNormalSprites;\r\n    #else\r\n      vec3 viewNormaInColor = viewNormal;\r\n      float frontFaced = float( gl_FrontFacing );\r\n    #endif\r\n    // [-1, 1] -> [0, 1]\r\n    viewNormaInColor = 0.5 * viewNormaInColor + 0.5;\r\n    gl_FragData[1] = vec4(viewNormaInColor, frontFaced);\r\n  #endif\r\n\r\n  #if defined(USE_LIGHTS) && NUM_DIR_LIGHTS > 0\r\n    vec3 viewDir;\r\n    #if defined(SPHERE_SPRITE) || defined(CYLINDER_SPRITE)\r\n      viewDir = -pixelPosEye.xyz;\r\n    #else\r\n      viewDir = vViewPosition;\r\n    #endif\r\n    GeometricContext geometry = GeometricContext(normal, normalize( viewDir ));\r\n    BlinnPhongMaterial material = BlinnPhongMaterial(diffuseColor.rgb, specular, shininess);\r\n    vec3 outgoingLight = calcLighting(geometry, material, viewDir);\r\n  #else\r\n    vec3 outgoingLight = diffuseColor.rgb;\r\n  #endif\r\n\r\n  #ifdef COLOR_FROM_DEPTH\r\n    float depth = 0.0;\r\n    #if defined(SPHERE_SPRITE) || defined(CYLINDER_SPRITE)\r\n      gl_FragDepthEXT = calcDepthForSprites(pixelPosEye, zOffset, projectionMatrix);\r\n      depth = gl_FragDepthEXT;\r\n    #else\r\n      depth = gl_FragCoord.z;\r\n    #endif\r\n    fragColor = packDepthToRGBA(depth);\r\n    return;\r\n  #endif\r\n\r\n  #ifdef COLOR_FROM_POS\r\n    fragColor = world2colorMatrix * pixelPosWorld;\r\n  #else\r\n    #ifdef OVERRIDE_COLOR\r\n      fragColor = vec4(fixedColor, diffuseColor.a);\r\n    #else\r\n      fragColor = vec4(outgoingLight, diffuseColor.a);//vec4(vNormal, 1.0);\r\n    #endif\r\n\r\n    #ifdef USE_FOG\r\n      float viewDistance;\r\n      #if defined(SPHERE_SPRITE) || defined(CYLINDER_SPRITE)\r\n        viewDistance = abs(pixelPosEye.z);\r\n      #else\r\n        viewDistance = vViewPosition.z;\r\n      #endif\r\n      float fogFactor = smoothstep( fogNear, fogFar, viewDistance) * fogAlpha;\r\n      #ifdef FOG_TRANSPARENT\r\n        fragColor.a = fragColor.a * (1.0 - fogFactor);\r\n      #else\r\n        fragColor.rgb = mix( fragColor.rgb, fogColor, fogFactor );\r\n      #endif\r\n    #endif\r\n\r\n  #endif\r\n}\r\n",lights:!0,fog:!0,side:2},e)),r}return C_(n,[{key:"precisionString",value:function(){var e=BO.precision;return"precision ".concat(e," float;\n")+"precision ".concat(e," int;\n\n")}},{key:"copy",value:function(e){return mS(I_(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=mp.clone(e.uniforms),this.defines=ZO({},e.defines),this.extensions=e.extensions,this.fog=e.fog,this.instancedPos=e.instancedPos,this.instancedMatrix=e.instancedMatrix,this.attrColor=e.attrColor,this.attrColor2=e.attrColor2,this.attrAlphaColor=e.attrAlphaColor,this.overrideColor=e.overrideColor,this.sphereSprite=e.sphereSprite,this.cylinderSprite=e.cylinderSprite,this.zClip=e.zClip,this.clipPlane=e.clipPlane,this.fakeOpacity=e.fakeOpacity,this.colorFromPos=e.colorFromPos,this.shadowmap=e.shadowmap,this.shadowmapType=e.shadowmapType,this.colorFromDepth=e.colorFromDepth,this.orthoCam=e.orthoCam,this.prepassTransparancy=e.prepassTransparancy,this.dashedLine=e.dashedLine,this.thickLine=e.thickLine,this.fogTransparent=e.fogTransparent,this.normalsToGBuffer=e.normalsToGBuffer,this.toonShading=e.toonShading,this.uberOptions.copy(e.uberOptions),this}},{key:"createInstance",value:function(){var e=new n;return e.copy(this),e.uberOptions=Object.create(this.uberOptions),e}},{key:"setValues",value:function(e){if("undefined"!==typeof e){mS(I_(n.prototype),"setValues",this).call(this,e);var t={},r={};this.fog&&(t.USE_FOG=1),this.instancedPos&&(t.INSTANCED_POS=1),this.instancedMatrix&&(t.INSTANCED_MATRIX=1),this.attrColor&&(t.ATTR_COLOR=1),this.attrColor2&&(t.ATTR_COLOR2=1),this.attrAlphaColor&&(t.ATTR_ALPHA_COLOR=1),this.overrideColor&&(t.OVERRIDE_COLOR=1),this.sphereSprite&&(t.SPHERE_SPRITE=1,r.fragDepth=1),this.cylinderSprite&&(t.CYLINDER_SPRITE=1,r.fragDepth=1),this.zClip&&(t.ZCLIP=1),this.clipPlane&&(t.CLIP_PLANE=1),this.fakeOpacity&&(t.FAKE_OPACITY=1),this.lights&&(t.USE_LIGHTS=1),this.colorFromPos&&(t.COLOR_FROM_POS=1),this.shadowmap&&(t.SHADOWMAP=1,"pcf"===this.shadowmapType?t.SHADOWMAP_PCF_SHARP=1:"random"===this.shadowmapType?t.SHADOWMAP_PCF_RAND=1:t.SHADOWMAP_BASIC=1),this.colorFromDepth&&(t.COLOR_FROM_DEPTH=1),this.orthoCam&&(t.ORTHOGRAPHIC_CAMERA=1),this.prepassTransparancy&&(t.PREPASS_TRANSP=1),this.dashedLine&&(t.DASHED_LINE=1),this.thickLine&&(t.THICK_LINE=1),this.fogTransparent&&(t.FOG_TRANSPARENT=1),this.normalsToGBuffer&&(r.drawBuffers=1,t.NORMALS_TO_G_BUFFER=1),this.toonShading&&(t.TOON_SHADING=1),this.defines=t,this.extensions=r}}},{key:"setUberOptions",value:function(e){if("undefined"!==typeof e)for(var t in e)e.hasOwnProperty(t)&&(this.uberOptions[t]instanceof Pd?this.uberOptions[t]=e[t].clone():this.uberOptions[t]=e[t])}},{key:"clone",value:function(e){return e?this.createInstance():Ed.prototype.clone.call(this)}},{key:"updateUniforms",value:function(){var e=this;qO.forEach((function(t){e.uniforms.hasOwnProperty(t)&&(e.uberOptions[t]instanceof Pd||e.uberOptions[t]instanceof Fh?e.uniforms[t].value=e.uberOptions[t].clone():e.uniforms[t].value=e.uberOptions[t])}))}}]),n}(Hp);function XO(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}function $O(e){var t=function(e){P_(n,e);var t=XO(n);function n(){var e;O_(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onBeforeRender=n.prototype.onBeforeRender,e}return C_(n,[{key:"onBeforeRender",value:function(e,t,n,r,i,o){this._onBeforeRender(e,t,n,r,i,o),this._update()}},{key:"_onBeforeRender",value:function(){}},{key:"_update",value:function(){var e=this.material;e&&e instanceof YO&&e.updateUniforms()}}]),n}(e);return t}function JO(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var QO=$O(fp),eA=function(e){P_(n,e);var t=JO(n);function n(){var e;O_(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).castShadow=!0,e.receiveShadow=!0,e}return C_(n,[{key:"_onBeforeRender",value:function(e,t,n,r,i,o){QO.prototype._onBeforeRender.call(this,e,t,n);var a=this.material;a&&a.uniforms.invModelViewMatrix&&(this.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,this.matrixWorld),a.uniforms.invModelViewMatrix.value.copy(this.modelViewMatrix).invert(),a.uniforms.nearPlaneValue.value=n.near,a.uniformsNeedUpdate=!0)}}]),n}(QO);function tA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var nA=$O(fp),rA=function(e){P_(n,e);var t=tA(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,e,r)).castShadow=!0,i.receiveShadow=!0,i}return C_(n,[{key:"_onBeforeRender",value:function(e,t,r){nA.prototype._onBeforeRender.call(this,e,t,r);var i=this.geometry,o=this.material;if(i.zClip&&o.uberOptions){var a=n._modelView,s=n._mvLength,u=n._center;a.multiplyMatrices(this.matrixWorld,r.matrixWorldInverse);var l=s.setFromMatrixColumn(a,0).length();u.copy(i.boundingSphere.center),this.localToWorld(u),o.uberOptions.zClipValue=r.position.z-u.z-l*(.5*i.boundingSphere.radius)}}}]),n}(nA);function iA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(rA,"_mvLength",new lh),Uw(rA,"_center",new lh),Uw(rA,"_modelView",new Fh);var oA=function(e){P_(n,e);var t=iA(n);function n(e,r){var i;O_(this,n),(i=t.call(this)).geometry=e;var o=M_(i);return o.initialized=!1,i.geometry.addEventListener("update",(function(){o.update()})),i}return C_(n,[{key:"init",value:function(){for(var e=this.children,t=e.length-1;t>=0;--t)this.remove(e[t]);for(var n=this.geometry,r=n.items,i=n.userData,o=0,a=r.length;o<a;++o){var s=r[o];if(s){var u=mw.shallowCloneNode(s),l=new zE(u);l.userData=(0,R.clone)(i),l.getElement().style.visibility="visible",l.source=s,this.add(l)}}this.initialized=!0}},{key:"update",value:function(){if(this.geometry.needsUpdate){var e=this.children;this.initialized||this.init();for(var t=0,n=e.length;t<n;++t){var r=e[t],i=r.source;r.position.copy(i.worldPos),r.userData.color=i.opts.color,r.userData.background=i.opts.background}}}}]),n}(pg);function aA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var sA=function(e){P_(n,e);var t=aA(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,e,r)).castShadow=!0,i.receiveShadow=!0,i}return C_(n)}($O(fp));function uA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var lA=$O(fp),cA=new $f,fA=function(e){P_(n,e);var t=uA(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_onBeforeRender",value:function(e,t,n,r,i,o){var a=this.material;a.uberOptions&&(a.uberOptions.projMatrixInv.copy(n.projectionMatrix).invert(),e.getSize(cA),a.uberOptions.viewport.set(cA.width,cA.height))}}]),n}(lA);function hA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var dA=function(e){P_(n,e);var t=hA(n);function n(){var e;O_(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).castShadow=!0,e.receiveShadow=!0,e}return C_(n)}($O(fp)),pA={ZClipped:rA,ZSprite:eA,Text:oA,Line:$O(ly),LineSegments:$O(hy),Mesh:sA,ThickLineMesh:fA,Instanced:dA};function vA(e,t){return function(n){n.setValues(e),n.setUberOptions(t)}}function mA(e,t){return{Geometry:function(n,r){return new DO.Instanced2CCylindersGeometry(n,r,e,t)},Object:e?pA.ZSprite:pA.Instanced,initMaterial:vA({instancedMatrix:!0,attrColor:!0,attrColor2:!0,attrAlphaColor:!0,cylinderSprite:e})}}function gA(e,t){var n=e.prototype instanceof Hk,r=t.lineWidth||0;return{Geometry:e,Object:n?pA.ThickLineMesh:pA.LineSegments,initMaterial:vA({lights:!1,attrColor:!0,attrAlphaColor:!0,thickLine:n},{lineWidth:r})}}function yA(e,t,n,r){var i={wireframe:!!r.wireframe,fakeOpacity:n.now.isoSurfaceFakeOpacity,zClip:r.zClip};return{Geometry:e,Object:pA.ZClipped,initMaterial:vA({attrColor:!0,attrAlphaColor:!1,wireframe:i.wireframe,fakeOpacity:i.fakeOpacity,zClip:i.zClip})}}var bA=function(){function e(){O_(this,e)}return C_(e,null,[{key:"createSpheres",value:function(e,t){var n=t.now.zSprites;return{Geometry:function(e,t){return new DO.InstancedSpheresGeometry(e,t,n)},Object:n?pA.ZSprite:pA.Instanced,initMaterial:vA({instancedPos:!0,attrColor:!0,attrAlphaColor:!0,sphereSprite:n})}}},{key:"create2CClosedCylinders",value:function(e,t){return mA(!1,!1)}},{key:"create2CCylinders",value:function(e,t){return mA(t.now.zSprites,!0)}},{key:"create2CLines",value:function(e,t,n){return gA(DO.TwoColorLinesGeometry,n)}},{key:"createCrosses",value:function(e,t,n){return gA(DO.CrossGeometry,n)}},{key:"createExtrudedChains",value:function(e,t){return{Geometry:DO.ExtrudedObjectsGeometry,Object:pA.Mesh,initMaterial:vA({attrColor:!0,attrAlphaColor:!0})}}},{key:"createChunkedLines",value:function(e,t,n){return gA(DO.ChunkedLinesGeometry,n)}},{key:"createQuickSurface",value:function(e,t,n){return yA(DO.QuickSurfGeometry,0,t,n)}},{key:"createContactSurface",value:function(e,t,n){return yA(DO.ContactSurfaceGeometry,0,t,n)}},{key:"createSASSES",value:function(e,t,n){return yA(DO.SSIsosurfaceGeometry,0,t,n)}},{key:"createLabels",value:function(e,t){return{Geometry:DO.LabelsGeometry,Object:pA.Text,initMaterial:function(){}}}}]),e}();function xA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var _A=function(e){P_(n,e);var t=xA(n);function n(e,r,i,o){var a;O_(this,n),(a=t.call(this))._geometry=e,a._geoParams=r;var s=i.createInstance();r.initMaterial(s),a._material=s,a._transforms=o.length>0?o:[new Fh];for(var u=a._createMeshes(e),l=0,c=u.length;l<c;++l)a.add(u[l]);return a}return C_(n,[{key:"raycast",value:function(e,t){var r=n._ray,i=n._inverseMatrix,o=this.children;r.copy(e.ray);for(var a=0,s=o.length;a<s;++a){var u=o[a];if(YE.belongToSelectLayers(u)){u.updateMatrixWorld();var l=u.matrixWorld;i.copy(l).invert(),e.ray.copy(r).applyMatrix4(i);var c=[];this._geometry.raycast(e,c);for(var f=0,h=c.length;f<h;++f){var d=c[f];d.point&&(d.point.applyMatrix4(l),d.distance=r.origin.distanceTo(d.point)),d.object=u,t[t.length]=d}}}e.ray.copy(r)}},{key:"getSubset",value:function(e){for(var t=this._geometry.getSubset(e),n=[],r=0,i=0,o=t.length;i<o;++i)for(var a=this._createMeshes(t[i]),s=0,u=a.length;s<u;++s)n[r++]=a[s];return n}},{key:"_createMeshes",value:function(e){for(var t=this._transforms,n=this._geoParams.Object,r=this._material,i=[],o=0,a=t.length;o<a;++o){var s=new n(e,r);s.applyMatrix4(t[o]),i[o]=s}return i}}]),n}(fd);function wA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(_A,"_inverseMatrix",new Fh),Uw(_A,"_ray",new zh);var SA=function(e){P_(n,e);var t=wA(n);function n(e,r,i,o,a,s,u){var l;if(O_(this,n),(l=t.call(this)).constructor===n)throw new Error("Can not instantiate abstract class!");return l._selection=r,l._mode=o,l._colorer=i,l._chunksIdc=r.chunks,l._polyComplexity=s,l._geo=new(function(e,t){var n=[e].concat(t);return e.bind.apply(e,QE(n))}(e.Geometry,l._makeGeoArgs())),l._mesh=new _A(l._geo,e,u,a),l.add(l._mesh),l._build(),l}return C_(n,[{key:"_makeGeoArgs",value:function(){throw new Error("ChemGroup subclass must override _makeGeoArgs() method")}},{key:"getSubset",value:function(e,t){t=void 0!==t&&t;var n=this._calcChunksList(e,t);return 0===n.length?[]:this._mesh.getSubset(n)}},{key:"_changeSubsetOpacity",value:function(e,t,n){var r=this._calcChunksList(e,n);0!==r.length&&this._geo.setOpacity(r,t)}},{key:"enableSubset",value:function(e,t){t=void 0===t||t,this._changeSubsetOpacity(e,1,t)}},{key:"disableSubset",value:function(e,t){t=void 0===t||t,this._changeSubsetOpacity(e,0,t)}}]),n}(VE);function EA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var kA=function(e){P_(n,e);var t=EA(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"raycast",value:function(e,t){var n=this._selection.atoms,r=[];this._mesh.raycast(e,r);for(var i=this._chunksIdc,o=0,a=r.length;o<a;++o)if(r[o].hasOwnProperty("chunkIdx")){var s=i[r[o].chunkIdx];s<n.length&&(r[o].atom=n[s],t.push(r[o]))}}},{key:"_calcChunksList",value:function(e){for(var t=[],n=this._selection.atoms,r=this._chunksIdc,i=0,o=r.length;i<o;++i){0!==(n[r[i]].mask&e)&&t.push(i)}return t}}]),n}(SA);function OA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var AA=function(e){P_(n,e);var t=OA(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_makeGeoArgs",value:function(){return[this._selection.chunks.length,this._polyComplexity]}},{key:"_build",value:function(){for(var e=this._selection.chunks,t=this._selection,n=t.atoms,r=t.parent,i=this._mode,o=this._colorer,a=this._geo,s=0,u=e.length;s<u;++s){var l=n[e[s]];a.setItem(s,l.position,i.calcAtomRadius(l)),a.setColor(s,o.getAtomColor(l,r))}a.finalize()}},{key:"updateToFrame",value:function(e){for(var t=this._selection.chunks,n=this._selection.atoms,r=this._mode,i=this._colorer,o=e.needsColorUpdate(i),a=this._geo,s=0,u=t.length;s<u;++s){var l=n[t[s]];a.setItem(s,e.getAtomPos(t[s]),r.calcAtomRadius(l)),o&&a.setColor(s,e.getAtomColor(i,l))}a.finalize()}}]),n}(kA);function CA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var MA=function(e){P_(n,e);var t=CA(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_makeGeoArgs",value:function(){for(var e=[],t=this._selection,n=t.atoms,r=t.chunks,i=r.length,o=0;o<i;++o)e[o]=n[r[o]];var a=this._mode.getSurfaceOpts();return a.atoms=e,[i,a]}}]),n}(AA);function TA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var PA=function(e){P_(n,e);var t=TA(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_makeGeoArgs",value:function(){for(var e=[],t=this._selection,n=t.atoms,r=t.chunks,i=r.length,o=0;o<i;++o)e[o]=n[r[o]];var a=this._mode.getSurfaceOpts();return a.atoms=e,a.selection=this._selection,a.colorMode=this._colorer,[i,a]}}]),n}(AA);function RA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}function IA(e){return null!==e.name.getNode()?e.name.getNode():e.getVisualName()}var LA={none:function(e){return e},adjust:function(e){var t=e>>16&255,n=e>>8&255,r=255&e;return.2126*t+.7152*n+.0722*r>127?(t=3*t/10,n=3*n/10,r=3*r/10):(t=255-3*(255-t)/10,n=255-3*(255-n)/10,r=255-3*(255-r)/10),t<<16|n<<8|r},inverse:function(e){return 255-(e>>16&255)<<16|255-(e>>8&255)<<8|255-(255&e)}};function NA(e,t){var n;if(LA.hasOwnProperty(t))n=mw.hexColor(LA[t](e));else{var r=parseInt(t,16);n=!Number.isNaN(r)&&t.toLowerCase().startsWith("0x")?mw.hexColor(r):"#000000"}return n}var jA={serial:function(e){return e.serial},name:function(e){return e.getVisualName()},elem:function(e){return e.element.name},residue:function(e){return e.residue.getType().getName()},sequence:function(e){return e.residue.getSequence()},chain:function(e){return e.residue.getChain().getName()},hetatm:function(e){return e.isHet()},water:function(e){return"HOH"===e.residue.getType().getName()||"WAT"===e.residue.getType().getName()}},DA=function(e,t){return t.replace(/\{\{(\s*\w+\s*)\}\}/g,(function(t){var n=t.replace(/\s+/g,"");return n=n.substring(2,n.length-2).toLowerCase(),jA.hasOwnProperty(n)?jA[n](e):"null"}))},BA=function(e){P_(n,e);var t=RA(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_makeGeoArgs",value:function(){var e=this._mode.getLabelOpts();return[this._selection.chunks.length,e]}},{key:"_build",value:function(){for(var e=this._mode.getLabelOpts(),t=this._selection.chunks,n=this._selection,r=n.atoms,i=n.parent,o=this._colorer,a=this._geo,s=0,u=t.length;s<u;++s){var l=r[t[s]],c=e.template?DA(l,e.template):IA(l);if(c){var f=o.getAtomColor(l,i),h=parseInt(NA(f,e.fg).substring(1),16),d=e.showBg?parseInt(NA(f,e.bg).substring(1),16):"transparent";a.setItem(s,l.position,c),a.setColor(s,h,d)}}a.finalize()}},{key:"updateToFrame",value:function(e){for(var t=this._mode.getLabelOpts(),n=this._selection.chunks,r=this._selection.atoms,i=this._colorer,o=this._geo,a=e.needsColorUpdate(i),s=0,u=n.length;s<u;++s){var l=r[n[s]],c=t.template?DA(l,t.template):IA(l);if(c){var f=e.getAtomColor(i,l),h=parseInt(NA(f,t.fg).substring(1),16),d=t.showBg?parseInt(NA(f,t.bg).substring(1),16):"transparent";o.setItem(s,e.getAtomPos(n[s]),c),a&&o.setColor(s,h,d)}}o.finalize()}}]),n}(kA);function zA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}function FA(e,t,n,r){var i=Math.sin(e);return t.clone().multiplyScalar(Math.sin((1-r)*e)/i).addScaledVector(n,Math.sin(r*e)/i)}var VA=function(e){P_(n,e);var t=zA(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_buildInner",value:function(e,t){for(var n=this._selection.chunks,r=new lh,i=new lh,o=this._segmentsHeight,a=1/o,s=this._colorer,u=this._selection,l=u.cycles,c=u.parent,f=0,h=n[f],d=0,p=l.length;d<p;++d){var v=l[d],m=v.atoms,g=[],y=[],b=v.center,x=v.radius-e,_=m.length,w=0,S=m[_-1].position,E=m[w].position;r.subVectors(S,b),i.subVectors(E,b);for(var k=i.clone().cross(r).normalize();w<_;++w){var O=r.angleTo(i);y[w]=FA(O,r,i,.5).normalize(),E=m[(w+1)%_].position,r.copy(i),i.subVectors(E,b)}for(w=0;w<_;++w)if(m[w].index===h){for(var A=y[w],C=y[(w+1)%_],M=s.getAtomColor(m[w],c),T=A.angleTo(C),P=0;P<=o;++P)g[P]=FA(T,A,C,P*a).multiplyScalar(x).add(b);t(f++,M,g,b,k),h=n[f]}}}}]),n}(kA);function UA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}function ZA(e,t){for(var n=[],r=0;r<t;++r){var i=-2*r/t*Math.PI;n.push(new lh(Math.cos(i)*e,Math.sin(i)*e,0))}return n}var HA=YE.calcChunkMatrix,GA=function(e){P_(n,e);var t=UA(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_build",value:function(){var e=this._segmentsHeight,t=this._mode.getAromRadius(),n=new $f(t,t),r=this._mode.calcStickRadius()+2*t,i=new lh,o=[],a=this._geo;this._buildInner(r,(function(t,r,s,u,l){for(var c=0;c<=e;++c){var f=s[c],h=f.clone().sub(u).cross(l);i.addVectors(f,h),o[c]=HA(f,i,l,n)}a.setItem(t,o),a.setColor(t,r)})),a.finalize()}},{key:"_makeGeoArgs",value:function(){return this._segmentsHeight=this._polyComplexity,[ZA(1,this._polyComplexity),this._segmentsHeight+1,this._selection.chunks.length]}}]),n}(VA);function WA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var qA=function(e){P_(n,e);var t=WA(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_build",value:function(){var e=this,t=this._geo,n=this._mode.getAromaticOffset();this._buildInner(n,(function(n,r,i){for(var o=i[0],a=1;a<=e._segmentsHeight;++a){var s=i[a];t.setSegment(n,a-1,o,s),o=s}t.setColor(n,r)})),t.finalize()}},{key:"_makeGeoArgs",value:function(){return this._segmentsHeight=this._mode.getAromaticArcChunks(),[this._selection.chunks.length,this._segmentsHeight,!0]}}]),n}(VA);function KA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var YA=function(e){P_(n,e);var t=KA(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"raycast",value:function(e,t){var n=this._selection.residues,r=[];this._mesh.raycast(e,r);for(var i=this._chunksIdc,o=0,a=r.length;o<a;++o)if(r[o].hasOwnProperty("chunkIdx")){var s=i[r[o].chunkIdx];s<n.length&&(r[o].residue=n[s],t.push(r[o]))}}},{key:"_calcChunksList",value:function(e){for(var t=[],n=this._selection.residues,r=this._chunksIdc,i=0,o=r.length;i<o;++i){0!==(n[r[i]]._mask&e)&&t.push(i)}return t}}]),n}(SA);function XA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var $A=function(e){P_(n,e);var t=XA(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"raycast",value:function(e,t){var n=this._selection.residues,r=[];this._mesh.raycast(e,r);for(var i=this._chunksIdc,o=0,a=r.length;o<a;++o)if(r[o].hasOwnProperty("chunkIdx")){var s=i[Math.floor(r[o].chunkIdx/2)];s<n.length&&(r[o].residue=n[s],t.push(r[o]))}}},{key:"_build",value:function(){for(var e=this._selection,t=e.residues,n=e.parent,r=this._colorer,i=this._geo,o=this._mode.calcStickRadius(),a=0,s=this._selection.chunks,u=0,l=s.length;u<l;++u){var c=t[s[u]],f=r.getResidueColor(c,n);this._processItem(a++,c._cylinders[0],c._cylinders[1],o,f)}i.finalize()}},{key:"_calcChunksList",value:function(e){for(var t=[],n=0,r=this._selection.residues,i=this._chunksIdc,o=0,a=i.length;o<a;++o){0!==(r[i[o]]._mask&e)&&(t[n++]=2*o,t[n++]=2*o+1)}return t}},{key:"updateToFrame",value:function(e){for(var t=e.getResidues(),n=this._selection.parent,r=this._colorer,i=this._geo,o=this._mode.calcStickRadius(),a=0,s=this._selection.chunks,u=0,l=s.length;u<l;++u){var c=t[s[u]],f=r.getResidueColor(c,n);this._processItem(a++,c._cylinders[0],c._cylinders[1],o,f)}i.finishUpdate()}}]),n}(YA);function JA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var QA=function(e){P_(n,e);var t=JA(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_makeGeoArgs",value:function(){return[this._selection.chunks.length,this._polyComplexity]}},{key:"_processItem",value:function(e,t,n,r,i){var o=this._geo;o.setItem(e,t,n,r),o.setColor(e,i,i)}}]),n}($A);function eC(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var tC,nC=function(e){P_(n,e);var t=eC(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_makeGeoArgs",value:function(){return[2*this._selection.chunks.length,this._polyComplexity]}},{key:"_processItem",value:function(e,t,n,r,i){var o=this._geo,a=2*e;o.setItem(a,t,r),o.setColor(a,i),a++,o.setItem(a,n,r),o.setColor(a,i)}}]),n}($A),rC={};tC=rC,function(){var e,t,n,r,i,o,a,s,u,l,c,f,h,d,p,v,m,g,y,b,x,_,w,S,E,k,O=Object.prototype.hasOwnProperty,A=function(e,t){for(var n in t)O.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};for(v in f={method:(n={METHOD_NEAREST:"nearest",METHOD_LINEAR:"linear",METHOD_CUBIC:"cubic",METHOD_LANCZOS:"lanczos",METHOD_SINC:"sinc",CLIP_CLAMP:"clamp",CLIP_ZERO:"zero",CLIP_PERIODIC:"periodic",CLIP_MIRROR:"mirror",CUBIC_TENSION_DEFAULT:0,CUBIC_TENSION_CATMULL_ROM:0}).METHOD_CUBIC,cubicTension:n.CUBIC_TENSION_DEFAULT,clip:n.CLIP_CLAMP,scaleTo:0,sincFilterSize:2,sincWindow:void 0},u=function(e,t){return Math.max(0,Math.min(e,t-1))},c=function(e,t){return(e%=t)<0&&(e+=t),e},l=function(e,t){var n;return(e=c(e,n=2*(t-1)))>t-1&&(e=n-e),e},e=function(){function e(e,t){if(this.array=e.slice(0),this.length=this.array.length,!(this.clipHelper={clamp:this.clipHelperClamp,zero:this.clipHelperZero,periodic:this.clipHelperPeriodic,mirror:this.clipHelperMirror}[t.clip]))throw"Invalid clip: "+t.clip}return e.prototype.getClippedInput=function(e){return 0<=e&&e<this.length?this.array[e]:this.clipHelper(e)},e.prototype.clipHelperClamp=function(e){return this.array[u(e,this.length)]},e.prototype.clipHelperZero=function(e){return 0},e.prototype.clipHelperPeriodic=function(e){return this.array[c(e,this.length)]},e.prototype.clipHelperMirror=function(e){return this.array[l(e,this.length)]},e.prototype.interpolate=function(e){throw"Subclasses of AbstractInterpolator must override the interpolate() method."},e}(),i=function(e){function t(){t.__super__.constructor.apply(this,arguments)}return A(t,e),t.prototype.interpolate=function(e){return this.getClippedInput(Math.round(e))},t}(e),r=function(e){function t(){t.__super__.constructor.apply(this,arguments)}return A(t,e),t.prototype.interpolate=function(e){var t;return(1-(e-=t=Math.floor(e)))*this.getClippedInput(t)+e*this.getClippedInput(t+1)},t}(e),t=function(e){function t(e,n){this.tangentFactor=1-Math.max(-1,Math.min(1,n.cubicTension)),t.__super__.constructor.apply(this,arguments)}return A(t,e),t.prototype.getTangent=function(e){return this.tangentFactor*(this.getClippedInput(e+1)-this.getClippedInput(e-1))/2},t.prototype.interpolate=function(e){var t,n,r,i,o;return t=Math.floor(e),n=[this.getTangent(t),this.getTangent(t+1)],(2*(o=(e-=t)*(i=e*e))-3*i+1)*(r=[this.getClippedInput(t),this.getClippedInput(t+1)])[0]+(o-2*i+e)*n[0]+(-2*o+3*i)*r[1]+(o-i)*n[1]},t}(e),_=Math.sin,o=Math.PI,w=function(e){return 0===e?1:_(o*e)/(o*e)},m=function(e){return function(t){return w(t/e)}},y=function(e){return function(t){return w(t)*e(t)}},a=function(e){function t(e,n){if(t.__super__.constructor.apply(this,arguments),this.a=n.sincFilterSize,!n.sincWindow)throw"No sincWindow provided";this.kernel=y(n.sincWindow)}return A(t,e),t.prototype.interpolate=function(e){var t,n,r,i,o;for(r=0,n=i=(t=Math.floor(e))-this.a+1,o=t+this.a;i<=o?n<=o:n>=o;i<=o?n++:n--)r+=this.kernel(e-n)*this.getClippedInput(n);return r},t}(e),h=function(e,t){var n,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)n=e[r],o.push(n[t]);return o},g=function(e,t,n){var r,i;return"0,1"===n.join?e:(r=t/(n[1]-n[0]),i=n[0],function(t){return e(r*(t-i))})},d=function(e){return Object.prototype.toString.call(e).slice("[object ".length,-1)},E=function(e){if(isNaN(e))throw"NaN in Smooth() input";if("Number"!==d(e))throw"Non-number in Smooth() input";if(!isFinite(e))throw"Infinity in Smooth() input"},k=function(e,t){var n,r,i;if("Array"!==d(e))throw"Non-vector in Smooth() input";if(e.length!==t)throw"Inconsistent dimension in Smooth() input";for(r=0,i=e.length;r<i;r++)n=e[r],E(n)},p=function(e){return"Number"===d(e)&&isFinite(e)&&!isNaN(e)},b=function(e){var t;switch(t="scaleTo param must be number or array of two numbers",d(e)){case"Number":if(!p(e))throw t;e=[0,e];break;case"Array":if(2!==e.length)throw t;if(!p(e[0])||!p(e[1]))throw t;break;default:throw t}return e},x=function(e){var t,n,r;for(n in t={},e)O.call(e,n)&&(r=e[n],t[n]=r);return t},s=function(e,n){var o,u,l,c,p,v,y,_,w,S,A;for(y in null==n&&(n={}),w={},n=x(n),w.config=x(n),null==n.scaleTo&&(n.scaleTo=n.period),null==n.sincFilterSize&&(n.sincFilterSize=n.lanczosFilterSize),f)O.call(f,y)&&(A=f[y],null==n[y]&&(n[y]=A));if(!(p={nearest:i,linear:r,cubic:t,lanczos:a,sinc:a}[n.method]))throw"Invalid method: "+n.method;if("lanczos"===n.method&&(n.sincWindow=m(n.sincFilterSize)),e.length<2)throw"Array must have at least two elements";for(y in w.count=e.length,S=function(){var t,r,i,o;switch(d(e[0])){case"Number":if(w.dimension="scalar",s.deepValidation)for(t=0,i=e.length;t<i;t++)_=e[t],E(_);return c=new p(e,n),function(e){return c.interpolate(e)};case"Array":if(w.dimension=u=e[0].length,!u)throw"Vectors must be non-empty";if(s.deepValidation)for(r=0,o=e.length;r<o;r++)A=e[r],k(A,u);return v=function(){var t;for(t=[],l=0;0<=u?l<u:l>u;0<=u?l++:l--)t.push(new p(h(e,l),n));return t}(),function(e){var t,n,r,i;for(i=[],n=0,r=v.length;n<r;n++)t=v[n],i.push(t.interpolate(e));return i};default:throw"Invalid element type: "+d(e[0])}}(),o="periodic"===n.clip?e.length:e.length-1,n.scaleTo||(n.scaleTo=o),w.domain=b(n.scaleTo),S=g(S,o,w.domain),w.domain.sort(),w)O.call(w,y)&&(A=w[y],S[y]=A);return S},n)O.call(n,v)&&(S=n[v],s[v]=S);s.deepValidation=!0,(null!==tC?tC:window).Smooth=s}.call(_S);var iC=DE.ResidueType,oC=YE.calcChunkMatrix;function aC(e,t){var n=rC.Smooth(e,{method:rC.Smooth.METHOD_CUBIC,clip:rC.Smooth.CLIP_CLAMP,cubicTension:t,scaleTo:1});return function(t,r){var i=r;null===i&&(i=function(t){return(t*(e.length-1-2)+1)/(e.length-1)});var o=i(t),a=n(o);return new lh(a[0],a[1],a[2])}}function sC(e,t,n,r){if(!r._isValid)return e[n]=e[n-1],void(t[n]=t[n-1]);var i=r._controlPoint;e[n]=[i.x,i.y,i.z];var o=i.clone().add(r._wingVector);t[n]=[o.x,o.y,o.z]}function uC(e,t,n,r){var i=r.start,o=r.end;function a(t){return t>i&&e[t-1]._isValid?t-1:t}function s(t){return t<o&&e[t+1]._isValid?t+1:t}var u=[],l=[],c=0;function f(t,n){var r=e[t]._controlPoint.clone().lerp(e[n]._controlPoint,-.25),i=r.clone().add(e[t]._wingVector);l[c]=[r.x,r.y,r.z],u[c++]=[i.x,i.y,i.z],l[c]=[r.x,r.y,r.z],u[c++]=[i.x,i.y,i.z]}var h=a(t),d=s(n);if(h===d)return function(e,t,n,r){var i,o,a=0!==(r._type.flags&iC.Flags.NUCLEIC),s=a?"C5'":"N",u=a?"C3'":"C";if(r.forEachAtom((function(e){var t=e.getVisualName();i||t!==s?o||t!==u||(o=e.position):i=e.position})),i&&o||(i=r._firstAtom.position,o=r._lastAtom.position),i&&o){var l=o.clone().sub(i),c=r._wingVector,f=r._controlPoint,h=f.clone().add(c),d=f.clone().sub(l),p=d.clone().add(c);e[n]=[d.x,d.y,d.z],t[n]=[p.x,p.y,p.z],e[++n]=[d.x,d.y,d.z],t[n]=[p.x,p.y,p.z],e[++n]=[f.x,f.y,f.z],t[n]=[h.x,h.y,h.z],++n;var v=f.clone().add(l),m=v.clone().add(c);e[n]=[v.x,v.y,v.z],t[n]=[m.x,m.y,m.z],e[++n]=[v.x,v.y,v.z],t[n]=[m.x,m.y,m.z]}}(l,u,c,e[t]),{centerPoints:l,topPoints:u};t===h?f(t,s(t)):(sC(l,u,c++,e[a(h)]),sC(l,u,c++,e[h]));for(var p=t;p<=n;++p)sC(l,u,c++,e[p]);return d===s(d)?f(n,a(n)):(sC(l,u,c++,e[d]),sC(l,u,c,e[s(d)])),{centerPoints:l,topPoints:u}}var lC=function(){function e(t,n,r,i,o,a){O_(this,e);var s=uC(t,n,r,a);this._topInterp=aC(s.topPoints,o),this._centerInterp=aC(s.centerPoints,o),this._shift=.5/(r-n+2),this._valueStep=(1-2*this._shift)/(2*(r-n+1)*(i-1)),this._segmentsCount=i}return C_(e,[{key:"prepareMatrices",value:function(e,t,n){for(var r=this._segmentsCount,i=new Array(r),o=new $f(0,0),a=this._topInterp,s=this._centerInterp,u=this._shift+this._valueStep*(r-1)*e,l=0;l<r;++l){var c=Math.min(1,l/(r-1));o.lerpVectors(t,n,c);var f=a(u,null),h=s(u,null),d=s(u+=this._valueStep,null);i[l]=oC(h.clone(),d.clone(),f.clone().sub(h),o)}return i}}]),e}();function cC(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}function fC(e,t){for(var n=[],r=0;r<t;++r){var i=Math.PI/2-2*Math.PI*r/t;n.push(new lh(Math.cos(i)*e,Math.sin(i)*e,0))}return n}function hC(e,t,n,r,i,o){for(var a=0,s=e.length;a<s;++a)for(var u=e[a].arr,l=e[a].boundaries,c=0,f=u.length;c<f;++c)for(var h=[u[c].start,u[c].end],d=new lC(t,h[0],h[1],n,r,l),p=null,v=2*u[c].start,m=2*u[c].end+1,g=i.getResidueRadius(t[0],0),y=v;y<=m;++y){var b=t[y/2|0],x=i.getResidueRadius(b,y%2),_=i.getResidueRadius(b,1+y%2),w=d.prepareMatrices(y-2*h[0],x,_);w.unshift(null===p?w[0]:p),o(b,w,x.x!==_.x||x.y!==_.y,x.x!==g.x||x.y!==g.y),p=w[n],g=_}}var dC=function(e){P_(n,e);var t=cC(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_makeGeoArgs",value:function(){var e=this._mode.getHeightSegmentsRatio();return this._segmentsHeight=this._polyComplexity*e|0,[fC(1,this._polyComplexity),this._segmentsHeight+1,2*this._selection.chunks.length]}},{key:"_build",value:function(){var e=this._selection,t=e.residues,n=e.parent,r=this._mode,i=this._colorer,o=r.getTension(),a=this._geo,s=0,u=[];hC(this._selection.subdivs,t,this._segmentsHeight,o,r,(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=i.getResidueColor(e,n);u[s]=e._index,a.setItem(s,t,r,o),a.setColor(s++,l)})),this._chunksIdc=u,a.finalize()}},{key:"updateToFrame",value:function(e){var t=this._selection.parent,n=this._mode,r=this._colorer,i=n.getTension(),o=this._geo,a=e.getResidues(),s=0,u=e.needsColorUpdate(r);hC(this._selection.subdivs,a,this._segmentsHeight,i,n,(function(e,n){o.setItem(s,n),u&&o.setColor(s,r.getResidueColor(e,t)),s++})),o.finalize()}}]),n}(YA);function pC(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var vC=function(e){P_(n,e);var t=pC(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_makeGeoArgs",value:function(){for(var e=this._selection.subdivs,t=0,n=0,r=e.length;n<r;++n)for(var i=e[n].arr,o=0,a=i.length;o<a;++o)t+=i[o].end-i[o].start;return[t,this._polyComplexity]}},{key:"_build",value:function(){for(var e=this._selection,t=e.residues,n=e.parent,r=this._mode,i=this._colorer,o=this._geo,a=0,s=[],u=this._selection.subdivs,l=r.calcStickRadius(),c=0,f=u.length;c<f;++c)for(var h=u[c].arr,d=0,p=h.length;d<p;++d)for(var v=h[d].start,m=h[d].end,g=t[v],y=v+1;y<=m;++y){var b=t[y];s[a]={first:g._index,second:b._index},o.setItem(a,g._controlPoint,b._controlPoint,l),o.setColor(a,i.getResidueColor(g,n),i.getResidueColor(b,n)),a++,g=b}this._chunksIdc=s,o.finalize()}},{key:"updateToFrame",value:function(e){for(var t=e.getResidues(),n=this._selection.parent,r=this._mode,i=this._colorer,o=this._geo,a=0,s=this._selection.subdivs,u=r.calcStickRadius(),l=e.needsColorUpdate(i),c=0,f=s.length;c<f;++c)for(var h=s[c].arr,d=0,p=h.length;d<p;++d)for(var v=h[d].start,m=h[d].end,g=t[v],y=v+1;y<=m;++y){var b=t[y];o.setItem(a,g._controlPoint,b._controlPoint,u),l&&o.setColor(a,i.getResidueColor(g,n),i.getResidueColor(b,n)),a++,g=b}o.finalize()}},{key:"raycast",value:function(e,t){var n=[],r=this._selection.residues;this._mesh.raycast(e,n);for(var i=this._chunksIdc,o=0,a=n.length;o<a;++o)if(n[o].hasOwnProperty("chunkIdx")){var s=n[o].chunkIdx,u=i[Math.floor(s/2)],l=s%2===0?u.first:u.second;l<r.length&&(n[o].residue=r[l],t.push(n[o]))}}},{key:"_calcChunksList",value:function(e){for(var t=[],n=this._chunksIdc,r=this._selection.residues,i=0,o=n.length;i<o;++i){var a=n[i];r[a.first]._mask&e&&t.push(2*i),r[a.second]._mask&e&&t.push(2*i+1)}return t}}]),n}(SA);function mC(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var gC=function(e){P_(n,e);var t=mC(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_makeGeoArgs",value:function(){for(var e=this._mode.drawMultiorderBonds(),t=this._mode.showAromaticLoops(),n=this._selection.chunks,r=this._selection.bonds,i=0,o=0,a=n.length;o<a;++o)i+=this.getBondOrder(r[n[o]],e,t);return[i,this._polyComplexity]}},{key:"getBondOrder",value:function(e,t,n){var r=1;return!t||n&&e._type===qw.BondType.AROMATIC||(r=function(e){return e<2?1:e}(e._order)),r}},{key:"raycast",value:function(e,t){var n=this._selection.bonds,r=[];this._mesh.raycast(e,r);for(var i=this._chunksIdc,o=0,a=r.length;o<a;++o)if(r[o].hasOwnProperty("chunkIdx")){var s=r[o].chunkIdx,u=i[Math.floor(s/2)];if(u<n.length){var l=n[u];r[o].atom=s%2===0?l._left:l._right,t.push(r[o])}}}},{key:"_calcChunksList",value:function(e,t){for(var n=[],r=this._selection.bonds,i=this._chunksIdc,o=0,a=i.length;o<a;++o){var s=r[i[o]];s._left.mask&e&&(!t||s._right.mask&e)&&n.push(2*o),s._right.mask&e&&(!t||s._left.mask&e)&&n.push(2*o+1)}return n}}]),n}(SA);function yC(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var bC=function(e){P_(n,e);var t=yC(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_build",value:function(){for(var e,t=this._selection.chunks,n=this._selection,r=n.bonds,i=n.parent,o=this._mode,a=this._colorer,s=this._geo,u=o.drawMultiorderBonds(),l=o.showAromaticLoops(),c=o.calcStickRadius(),f=o.calcSpaceFraction(),h=new lh,d=new lh,p=0,v=[],m=0,g=t.length;m<g;++m){var y=r[t[m]],b=y._left,x=y._right,_=b.position,w=x.position;e=y.calcNormalDir();for(var S=this.getBondOrder(y,u,l),E=2*Math.min(o.calcAtomRadius(b),o.calcAtomRadius(x))/S,k=u?Math.min(c,.5*E*(1-f)):c,O=0;O<S;++O){var A=E*(S%2===0?(.5+(O/2|0))*(1-O%2*2):((O+1)/2|0)*(O%2*2-1));v[p]=y._index,h.copy(_),h.addScaledVector(e,A),d.copy(w),d.addScaledVector(e,A),s.setItem(p,h,d,k),s.setColor(p++,a.getAtomColor(b,i),a.getAtomColor(x,i))}}s.finalize(),this._chunksIdc=v}},{key:"updateToFrame",value:function(e){for(var t,n=this._selection.chunks,r=this._selection.bonds,i=this._mode,o=this._colorer,a=this._geo,s=i.drawMultiorderBonds(),u=i.showAromaticLoops(),l=i.calcStickRadius(),c=i.calcSpaceFraction(),f=new lh,h=new lh,d=0,p=e.needsColorUpdate(o),v=0,m=n.length;v<m;++v){var g=r[n[v]],y=g._left,b=g._right,x=e.getAtomPos(y.index).clone(),_=e.getAtomPos(b.index);t=g.calcNormalDir();for(var w=this.getBondOrder(g,s,u),S=2*Math.min(i.calcAtomRadius(y),i.calcAtomRadius(b))/w,E=s?Math.min(l,.5*S*(1-c)):l,k=0;k<w;++k){var O=S*(w%2===0?(.5+(k/2|0))*(1-k%2*2):((k+1)/2|0)*(k%2*2-1));f.copy(x),f.addScaledVector(t,O),h.copy(_),h.addScaledVector(t,O),a.setItem(d,f,h,E),p&&a.setColor(d,e.getAtomColor(o,y),e.getAtomColor(o,b)),d++}}a.finalize()}}]),n}(gC);function xC(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var _C=.15,wC=function(e){P_(n,e);var t=xC(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_build",value:function(){for(var e=this._selection.chunks,t=this._selection,n=t.bonds,r=t.parent,i=this._mode,o=this._colorer,a=this._geo,s=i.drawMultiorderBonds(),u=i.showAromaticLoops(),l=new lh,c=new lh,f=new lh,h=0,d=[],p=0,v=e.length;p<v;++p){var m=n[e[p]],g=m._left,y=m._right,b=g.position,x=y.position,_=1===g.bonds.length,w=1===y.bonds.length;l.subVectors(x,b);for(var S=l.length(),E=m.calcNormalDir(),k=this.getBondOrder(m,s,u),O=0;O<k;++O){c.copy(b),f.copy(x);var A=k%2===0?(.5+(O/2|0))*(1-O%2*2):((O+1)/2|0)*(O%2*2-1);d[h]=m._index,2!==k||_||w||(A-=.5,A*=-1),!_&&!w&&k>1&&0!==A&&(c.lerpVectors(b,x,_C/S),f.lerpVectors(b,x,1-_C/S)),A*=_C,c.addScaledVector(E,A),f.addScaledVector(E,A),a.setItem(h,c,f),a.setColor(h++,o.getAtomColor(g,r),o.getAtomColor(y,r))}}a.finalize(),this._chunksIdc=d}},{key:"updateToFrame",value:function(e){for(var t=this._selection.chunks,n=this._selection.bonds,r=this._mode,i=this._colorer,o=this._geo,a=r.drawMultiorderBonds(),s=r.showAromaticLoops(),u=new lh,l=new lh,c=new lh,f=0,h=e.needsColorUpdate(i),d=0,p=t.length;d<p;++d){var v=n[t[d]],m=v._left,g=v._right,y=e.getAtomPos(m.index).clone(),b=e.getAtomPos(g.index),x=1===m.bonds.length,_=1===g.bonds.length;u.subVectors(b,y);for(var w=u.length(),S=v.calcNormalDir(),E=this.getBondOrder(v,a,s),k=0;k<E;++k){l.copy(y),c.copy(b);var O=E%2===0?(.5+(k/2|0))*(1-k%2*2):((k+1)/2|0)*(k%2*2-1);2!==E||x||_||(O-=.5,O*=-1),!x&&!_&&E>1&&0!==O&&(l.lerpVectors(y,b,_C/w),c.lerpVectors(y,b,1-_C/w)),O*=_C,l.addScaledVector(S,O),c.addScaledVector(S,O),o.setItem(f,l,c),h&&o.setColor(f,e.getAtomColor(i,m),e.getAtomColor(i,g)),f++}}o.finalize()}}]),n}(gC),SC={AtomsSphereGroup:AA,AtomsSurfaceGroup:MA,AtomsSASSESGroupStub:PA,AtomsTextGroup:BA,AromaticTorusGroup:GA,AromaticLinesGroup:qA,NucleicCylindersGroup:QA,NucleicSpheresGroup:nC,ResiduesSubseqGroup:dC,ResiduesTraceGroup:vC,BondsCylinderGroup:bC,BondsLinesGroup:wC};function EC(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var kC=function(e){P_(n,e);var t=EC(n);function n(e,r,i,o,a,s,u,l){var c;O_(this,n);var f=M_(c=t.call(this));c._complex=i,c._mode=a;var h=i.getAtoms(),d=i.getTransforms();return i.forEachComponent((function(t){var n=[],c=0;if(t.forEachAtom((function(e){f._checkAtom(e,u)&&(n[c++]=e.index)})),0!==c){var p=new e(r,{atoms:h,chunks:n,parent:i},o,a,d,s,l);p._component=t,f.add(p)}})),c}return C_(n,[{key:"_checkAtom",value:function(e,t){return e.mask&t}},{key:"getSubset",value:function(e,t){for(var n=[],r=this.children,i=0,o=0,a=r.length;o<a;++o)if(r[o].getSubset)for(var s=r[o].getSubset(e,t),u=0,l=s.length;u<l;++u){var c=s[u];c._component=r[o]._component,n[i++]=c}return n}}]),n}(VE);function OC(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var AC=function(e){P_(n,e);var t=OC(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_checkAtom",value:function(e,t){if(!(e.mask&t))return!1;for(var n=e.bonds,r=0,i=n.length;r<i;++r)if(n[r]._left.mask&t&&n[r]._right.mask&t)return!1;return!0}}]),n}(kC);function CC(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var MC=function(e){P_(n,e);var t=CC(n);function n(e,r,i,o,a,s,u,l){var c;O_(this,n);var f=M_(c=t.call(this));c._complex=i;var h=i.getResidues(),d=i.getTransforms();return i.forEachComponent((function(t){var n=0,c=[];if(t.forEachResidue((function(e){f._checkResidue(e,u)&&(c[n++]=e._index)})),0!==n){var p=new e(r,{residues:h,chunks:c,parent:i},o,a,d,s,l);p._component=t,f.add(p)}})),c}return C_(n,[{key:"checkResidue",value:function(e,t){return e._mask&t}},{key:"getSubset",value:function(e,t){for(var n=[],r=this.children,i=0,o=0,a=r.length;o<a;++o)if(r[o].getSubset)for(var s=r[o].getSubset(e,t),u=0,l=s.length;u<l;++u){var c=s[u];c._component=r[o]._component,n[i++]=c}return n}}]),n}(VE);function TC(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var PC=function(e){P_(n,e);var t=TC(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_checkResidue",value:function(e,t){return t&e._mask&&null!==e._cylinders}}]),n}(MC);function RC(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var IC=function(e){P_(n,e);var t=RC(n);function n(e,r,i,o,a,s,u,l){var c;O_(this,n);var f=M_(c=t.call(this));c._complex=i;var h=i.getResidues(),d=i.getTransforms();return i.forEachComponent((function(t){for(var n=t.getMaskedSubdivSequences(u),c=0,p=[],v=0,m=n.length;v<m;++v)for(var g=n[v].arr,y=0,b=g.length;y<b;++y)for(var x=g[y].start,_=g[y].end;x<=_;++x)p[c++]=h[x]._index;if(0!==c){var w=new e(r,{residues:h,chunks:p,subdivs:n,parent:i},o,a,d,s,l);w._component=t,f.add(w)}})),c}return C_(n,[{key:"getSubset",value:function(e,t){for(var n=[],r=this.children,i=0,o=0,a=r.length;o<a;++o)if(r[o].getSubset)for(var s=r[o].getSubset(e,t),u=0,l=s.length;u<l;++u){var c=s[u];c._component=r[o]._component,n[i++]=c}return n}}]),n}(VE);function LC(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var NC=function(e){P_(n,e);var t=LC(n);function n(e,r,i,o,a,s,u,l){var c;O_(this,n);var f=M_(c=t.call(this));c._complex=i;var h=i.getBonds(),d=i.getTransforms();return i.forEachComponent((function(t){var n=[],c=0;if(t.forEachBond((function(e){var t=e._left,r=e._right;t.mask&u&&r.mask&u&&(n[c++]=e._index)})),0!==c){var p=new e(r,{bonds:h,chunks:n,parent:i},o,a,d,s,l);p._component=t,f.add(p)}})),c}return C_(n,[{key:"getSubset",value:function(e,t){for(var n=[],r=this.children,i=0,o=0,a=r.length;o<a;++o)if(r[o].getSubset)for(var s=r[o].getSubset(e,t),u=0,l=s.length;u<l;++u){var c=s[u];c._component=r[o]._component,n[i++]=c}return n}}]),n}(VE);function jC(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var DC=function(e){P_(n,e);var t=jC(n);function n(e,r,i,o,a,s,u,l){var c;O_(this,n);var f=M_(c=t.call(this));c._complex=i;var h=i.getAtoms(),d=i.getTransforms();return a.showAromaticLoops()?(i.forEachComponent((function(t){var n=[],c=0,p=[],v=0;t.forEachCycle((function(e){for(var t=e.atoms,r=0,i=0,o=t.length;i<o;++i)0!==(t[i].mask&u)&&(++r,n[c++]=t[i].index);r>0&&(p[v++]=e)}));var m=new e(r,{cycles:p,atoms:h,chunks:n,parent:i},o,a,d,s,l);m._component=t,f.add(m)})),c):R_(c)}return C_(n,[{key:"getSubset",value:function(e,t){for(var n=[],r=this.children,i=0,o=0,a=r.length;o<a;++o)if(r[o].getSubset)for(var s=r[o].getSubset(e,t),u=0,l=s.length;u<l;++u){var c=s[u];c._component=r[o]._component,n[i++]=c}return n}}]),n}(VE),BC={Atoms:kC,OrphanAtoms:AC,Residues:MC,Nucleic:PC,Subseqs:IC,Bonds:NC,Aromatic:DC};function zC(e,t,n){return function(r,i,o,a,s,u){return new t(n,e,r,i,o,a,s,u)}}var FC=function(){function e(){O_(this,e)}return C_(e,null,[{key:"AtomsSpheres",value:function(e,t){return zC(bA.createSpheres(e,t),BC.Atoms,SC.AtomsSphereGroup)}},{key:"OrphanedAtomsCrosses",value:function(e,t,n){return zC(bA.createCrosses(e,t,n),BC.OrphanAtoms,SC.AtomsSphereGroup)}},{key:"BondsCylinders",value:function(e,t){return zC(bA.create2CCylinders(e,t),BC.Bonds,SC.BondsCylinderGroup)}},{key:"BondsLines",value:function(e,t,n){return zC(bA.create2CLines(e,t,n),BC.Bonds,SC.BondsLinesGroup)}},{key:"CartoonChains",value:function(e,t){return zC(bA.createExtrudedChains(e,t),BC.Subseqs,SC.ResiduesSubseqGroup)}},{key:"TraceChains",value:function(e,t){return zC(bA.create2CClosedCylinders(e,t),BC.Subseqs,SC.ResiduesTraceGroup)}},{key:"NucleicSpheres",value:function(e,t){return zC(bA.createSpheres(e,t),BC.Nucleic,SC.NucleicSpheresGroup)}},{key:"NucleicCylinders",value:function(e,t){return zC(bA.create2CCylinders(e,t),BC.Nucleic,SC.NucleicCylindersGroup)}},{key:"ALoopsTorus",value:function(e,t){return zC(bA.createExtrudedChains(e,t),BC.Aromatic,SC.AromaticTorusGroup)}},{key:"ALoopsLines",value:function(e,t,n){return zC(bA.createChunkedLines(e,t,n),BC.Aromatic,SC.AromaticLinesGroup)}},{key:"QuickSurfGeo",value:function(e,t,n){return zC(bA.createQuickSurface(e,t,n),BC.Atoms,SC.AtomsSurfaceGroup)}},{key:"ContactSurfaceGeo",value:function(e,t,n){return zC(bA.createContactSurface(e,t,n),BC.Atoms,SC.AtomsSurfaceGroup)}},{key:"SASSESSurfaceGeo",value:function(e,t,n){return zC(bA.createSASSES(e,t,n),BC.Atoms,SC.AtomsSASSESGroupStub)}},{key:"TextLabelsGeo",value:function(e,t){return zC(bA.createLabels(e,t),BC.Atoms,SC.AtomsTextGroup)}}]),e}(),VC=function(){function e(t){if(O_(this,e),this.constructor===e)throw new Error("Can not instantiate abstract class!");this.opts=(0,R.merge)(mw.deriveDeep(this.settings.now.modes[this.id],!0),t)}return C_(e,[{key:"identify",value:function(){var e=mw.objectsDiff(this.opts,this.settings.now.modes[this.id]);return(0,R.isEmpty)(e)?this.id:[this.id,e]}},{key:"buildGeometry",value:function(e,t,n,r){for(var i=this.opts.polyComplexity?this.opts.polyComplexity[this.settings.now.resolution]:0,o=this.depGroups,a=o.length,s=new YE.RCGroup,u=0;u<a;++u){var l=o[u],c={};if((0,R.isArray)(l))c=l[1].call(this),l=j_(l,1)[0];var f=new(FC[l](null,this.settings,c))(e,t,this,i,n,r);f.children.length>0&&s.add(f)}return s}}]),e}();function UC(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}function ZC(){return{lineWidth:this.opts.lineWidth}}nk(VC.prototype),VC.prototype.id="__",VC.prototype.depGroups=[];var HC=function(e){P_(n,e);var t=UC(n);function n(e){var r;O_(this,n),(r=t.call(this,e)).depGroups=r.depGroups.slice(0);for(var i=r.depGroups,o=0,a=i.length;o<a;++o)i[o]=[i[o],ZC];return r}return C_(n,[{key:"drawMultiorderBonds",value:function(){return this.opts.multibond}},{key:"calcAtomRadius",value:function(){return this.opts.atom}},{key:"getAromaticOffset",value:function(){return this.opts.offsarom}},{key:"getAromaticArcChunks",value:function(){return this.opts.chunkarom}},{key:"showAromaticLoops",value:function(){return this.opts.showarom}}]),n}(VC);function GC(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(HC,"id","LN"),HC.prototype.id="LN",HC.prototype.name="Lines",HC.prototype.shortName="Lines",HC.prototype.depGroups=["ALoopsLines","BondsLines","OrphanedAtomsCrosses"];var WC=function(e){P_(n,e);var t=GC(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"calcAtomRadius",value:function(e){return this.opts.bond}},{key:"calcStickRadius",value:function(){return this.opts.bond}},{key:"calcSpaceFraction",value:function(){return this.opts.space}},{key:"getAromRadius",value:function(){return this.opts.aromrad}},{key:"showAromaticLoops",value:function(){return this.opts.showarom}},{key:"drawMultiorderBonds",value:function(){return this.opts.multibond}}]),n}(VC);function qC(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(WC,"id","LC"),WC.prototype.id="LC",WC.prototype.name="Licorice",WC.prototype.shortName="Licorice",WC.prototype.depGroups=["AtomsSpheres","BondsCylinders","ALoopsTorus"];var KC=function(e){P_(n,e);var t=qC(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"calcAtomRadius",value:function(e){return e.element.radius*this.opts.atom}},{key:"calcStickRadius",value:function(){return this.opts.bond}},{key:"getAromRadius",value:function(){return this.opts.aromrad}},{key:"showAromaticLoops",value:function(){return this.opts.showarom}},{key:"calcSpaceFraction",value:function(){return this.opts.space}},{key:"drawMultiorderBonds",value:function(){return this.opts.multibond}}]),n}(VC);function YC(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(KC,"id","BS"),KC.prototype.id="BS",KC.prototype.name="Balls and Sticks",KC.prototype.shortName="Balls",KC.prototype.depGroups=["AtomsSpheres","BondsCylinders","ALoopsTorus"];var XC=function(e){P_(n,e);var t=YC(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"calcAtomRadius",value:function(e){return e.element.radius}}]),n}(VC);function $C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(XC,"id","VW"),XC.prototype.id="VW",XC.prototype.name="Van der Waals",XC.prototype.shortName="VDW",XC.prototype.depGroups=["AtomsSpheres"];var JC=function(e){P_(n,e);var t=$C(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"calcStickRadius",value:function(){return this.opts.radius}}]),n}(VC);function QC(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(JC,"id","TR"),JC.prototype.id="TR",JC.prototype.name="Trace",JC.prototype.shortName="Trace",JC.prototype.depGroups=["TraceChains"];var eM=function(e){P_(n,e);var t=QC(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"getResidueRadius",value:function(e){return this.TUBE_RADIUS}},{key:"getHeightSegmentsRatio",value:function(){return this.opts.heightSegmentsRatio}},{key:"getTension",value:function(){return this.opts.tension}},{key:"buildGeometry",value:function(e,t,n,r){var i=this.opts.radius;return this.TUBE_RADIUS=new $f(i,i),VC.prototype.buildGeometry.call(this,e,t,n,r)}}]),n}(VC);function tM(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(eM,"id","TU"),eM.prototype.id="TU",eM.prototype.name="Tube",eM.prototype.shortName="Tube",eM.prototype.depGroups=["CartoonChains"];var nM=function(e){P_(n,e);var t=tM(n);function n(e){var r;return O_(this,n),(r=t.call(this,e)).secCache={},r}return C_(n,[{key:"getResidueStartRadius",value:function(e){var t=e.getSecondary();if(!t||!t.generic)return this.TUBE_RADIUS;var n=this.secCache[t.generic];return n?t.term===e?n.start:n.center:this.TUBE_RADIUS}},{key:"getResidueEndRadius",value:function(e){var t=e.getSecondary();if(null===t||!t.generic)return this.TUBE_RADIUS;var n=this.secCache[t.generic];return n?t.term===e?this.ARROW_END:n.center:this.TUBE_RADIUS}},{key:"getResidueRadius",value:function(e,t){var n=this.getResidueStartRadius(e);if(0===t)return n;var r=this.getResidueEndRadius(e);return 2===t?r:n.clone().lerp(r,t/2)}},{key:"calcStickRadius",value:function(e){return this.opts.radius}},{key:"getHeightSegmentsRatio",value:function(){return this.opts.heightSegmentsRatio}},{key:"getTension",value:function(){return this.opts.tension}},{key:"buildGeometry",value:function(e,t,n,r){var i=this.opts.radius,o=this.opts.depth;this.TUBE_RADIUS=new $f(i,i),this.ARROW_END=new $f(o,i);var a={},s=this.opts.ss;for(var u in s)a[u]={center:new $f(o,s[u].width),start:new $f(o,s[u].arrow)};return this.secCache=a,VC.prototype.buildGeometry.call(this,e,t,n,r)}}]),n}(VC);function rM(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(nM,"id","CA"),nM.prototype.id="CA",nM.prototype.name="Cartoon",nM.prototype.shortName="Cartoon",nM.prototype.depGroups=["CartoonChains","NucleicSpheres","NucleicCylinders"];var iM=DE.selectors;function oM(){return{wireframe:this.opts.wireframe,zClip:this.opts.zClip}}var aM=function(e){P_(n,e);var t=rM(n);function n(e){var r;O_(this,n),(r=t.call(this,e)).depGroups=r.depGroups.slice(0);for(var i=r.surfaceNames,o=r.depGroups,a=0,s=i.length;a<s;++a)o[o.length]=[i[a],oM];return r}return C_(n,[{key:"calcAtomRadius",value:function(e){return e.element.radius}},{key:"getVisibilitySelector",value:function(){var e=null;if(""!==this.opts.subset){var t=iM.parse(this.opts.subset);t.error||(e=t.selector)}return e}}]),n}(VC);function sM(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}aM.prototype.isSurface=!0,aM.prototype.surfaceNames=[];var uM=function(e){P_(n,e);var t=sM(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"getSurfaceOpts",value:function(){return{useBeads:!1,isoValue:this.opts.isoValue,gaussLim:this.opts.gaussLim[this.settings.now.resolution],radScale:this.opts.scale,gridSpacing:this.opts.gridSpacing[this.settings.now.resolution],zClip:this.opts.zClip,visibilitySelector:this.getVisibilitySelector()}}}]),n}(aM);function lM(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(uM,"id","QS"),uM.prototype.id="QS",uM.prototype.name="Quick Surface",uM.prototype.shortName="Quick Surf",uM.prototype.surfaceNames=["QuickSurfGeo"];var cM=function(e){P_(n,e);var t=lM(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,r))._excludeProbe=e,i}return C_(n,[{key:"calcAtomRadius",value:function(e){return e.element.radius}},{key:"getSurfaceOpts",value:function(){return{gridSpacing:this.opts.polyComplexity[this.settings.now.resolution],radScale:this._radScale,zClip:this.opts.zClip,visibilitySelector:this.getVisibilitySelector(),probeRadius:this.opts.probeRadius,excludeProbe:this._excludeProbe}}}]),n}(aM);function fM(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}cM.prototype.id="SU",cM.prototype.name="Surface",cM.prototype.shortName="Surface",cM.prototype.surfaceNames=["SASSESSurfaceGeo"],cM.prototype._radScale=1,cM.prototype._excludeProbe=!1;var hM=function(e){P_(n,e);var t=fM(n);function n(e){return O_(this,n),t.call(this,!1,e)}return C_(n)}(cM);function dM(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(hM,"id","SA"),hM.prototype.id="SA",hM.prototype.name="Solvent Accessible Surface",hM.prototype.shortName="SAS";var pM=function(e){P_(n,e);var t=dM(n);function n(e){return O_(this,n),t.call(this,!0,e)}return C_(n)}(cM);function vM(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(pM,"id","SE"),pM.prototype.id="SE",pM.prototype.name="Solvent Excluded Surface",pM.prototype.shortName="SES";var mM=function(e){P_(n,e);var t=vM(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"getSurfaceOpts",value:function(){return{probeRadius:this.opts.probeRadius,radScale:this.opts.polyComplexity[this.settings.now.resolution],scaleFactor:this.opts.polyComplexity[this.settings.now.resolution],gridSpacing:1/this.opts.polyComplexity[this.settings.now.resolution],isoValue:this.opts.isoValue,probePositions:this.opts.probePositions,zClip:this.opts.zClip,visibilitySelector:this.getVisibilitySelector()}}}]),n}(aM);function gM(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(mM,"id","CS"),mM.prototype.id="CS",mM.prototype.name="Contact Surface",mM.prototype.shortName="Contact Surf",mM.prototype.isSurface=!0,mM.prototype.surfaceNames=["ContactSurfaceGeo"];var yM=function(e){P_(n,e);var t=gM(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"getTemplateOptions",value:function(){return this.opts.template}},{key:"getLabelOpts",value:function(){return(0,R.merge)(this.opts,{colors:!0,adjustColor:!0,transparent:!0})}}]),n}(VC);Uw(yM,"id","TX"),yM.prototype.id="TX",yM.prototype.name="Text mode",yM.prototype.shortName="Text",yM.prototype.depGroups=["TextLabelsGeo"];var bM=new tk([HC,WC,KC,XC,JC,eM,nM,uM,hM,pM,mM,yM]);function xM(e,t,n){return e<=n?e<0?0:e:n}var _M=function(){function e(t,n){O_(this,e),this.name=t||"Custom",this.id=n||"CP"}return C_(e,[{key:"getElementColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.elementColors[e];return void 0!==n||t?n:this.defaultElementColor}},{key:"getResidueColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.residueColors[e];return void 0!==n||t?n:this.defaultResidueColor}},{key:"getChainColor",value:function(e){var t=e.charCodeAt(0);return t=(31&(t<0?0:t>=256?t-256:t))%this.chainColors.length,this.chainColors[t]}},{key:"getSecondaryColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.secondaryColors[e];return void 0!==n||t?n:this.defaultSecondaryColor}},{key:"getSequentialColor",value:function(e){var t=this.colors,n=t.length;return e<0?t[e%n+n]:t[e%n]}},{key:"getGradientColor",value:function(e,t){var n=this.gradients[t];if(!n)return this.defaultNamedColor;var r=n.length,i=e*(r-1),o=Math.floor(i),a=xM(o+1,0,r-1);return function(e,t,n){var r=1-n;return r*(e>>16&255)+n*(t>>16&255)<<16|r*(e>>8&255)+n*(t>>8&255)<<8|r*(255&e)+n*(255&t)}(n[o=xM(o,0,r-1)],n[a],i-o)}},{key:"getNamedColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.namedColors[e];return void 0!==n||t?n:this.defaultNamedColor}}]),e}();(0,R.assign)(_M.prototype,{colors:[16777215,16711680,65280,255,8421504],minRangeColor:0,midRangeColor:8355711,maxRangeColor:16777215,defaultElementColor:16777215,elementColors:{},defaultResidueColor:16777215,residueColors:{},chainColors:[16777215],defaultSecondaryColor:16777215,secondaryColors:{},defaultGradientColor:0,defaultNamedColor:16777215,namedColorsArray:[["indianred",13458524],["lightcoral",15761536],["salmon",16416882],["darksalmon",15308410],["lightsalmon",16752762],["crimson",14423100],["red",16711680],["firebrick",11674146],["darkred",9109504],["pink",16761035],["lightpink",16758465],["hotpink",16738740],["deeppink",16716947],["mediumvioletred",13047173],["palevioletred",14381203],["coral",16744272],["tomato",16737095],["orangered",16729344],["darkorange",16747520],["orange",16753920],["gold",16766720],["yellow",16776960],["lightyellow",16777184],["lemonchiffon",16775885],["lightgoldenrodyellow",16448210],["papayawhip",16773077],["moccasin",16770229],["peachpuff",16767673],["palegoldenrod",15657130],["khaki",15787660],["darkkhaki",12433259],["lavender",15132410],["thistle",14204888],["plum",14524637],["violet",15631086],["orchid",14315734],["fuchsia",16711935],["magenta",16711935],["mediumorchid",12211667],["mediumpurple",9662683],["rebeccapurple",6697881],["blueviolet",9055202],["darkviolet",9699539],["darkorchid",10040012],["darkmagenta",9109643],["purple",8388736],["indigo",4915330],["slateblue",6970061],["mediumslateblue",8087790],["darkslateblue",4734347],["greenyellow",11403055],["chartreuse",8388352],["lawngreen",8190976],["lime",65280],["limegreen",3329330],["palegreen",10025880],["lightgreen",9498256],["mediumspringgreen",64154],["springgreen",65407],["mediumseagreen",3978097],["seagreen",3050327],["forestgreen",2263842],["green",32768],["darkgreen",25600],["yellowgreen",10145074],["olivedrab",7048739],["olive",8421376],["darkolivegreen",5597999],["mediumaquamarine",6737322],["darkseagreen",9419919],["lightseagreen",2142890],["darkcyan",35723],["teal",32896],["aqua",65535],["cyan",65535],["lightcyan",14745599],["paleturquoise",11529966],["aquamarine",8388564],["turquoise",4251856],["mediumturquoise",4772300],["darkturquoise",52945],["cadetblue",6266528],["steelblue",4620980],["lightsteelblue",11584734],["powderblue",11591910],["lightblue",11393254],["skyblue",8900331],["lightskyblue",8900346],["deepskyblue",49151],["dodgerblue",2003199],["cornflowerblue",6591981],["royalblue",4286945],["blue",255],["mediumblue",205],["darkblue",139],["navy",128],["midnightblue",1644912],["cornsilk",16775388],["blanchedalmond",16772045],["bisque",16770244],["navajowhite",16768685],["wheat",16113331],["burlywood",14596231],["tan",13808780],["rosybrown",12357519],["sandybrown",16032864],["goldenrod",14329120],["darkgoldenrod",12092939],["peru",13468991],["chocolate",13789470],["saddlebrown",9127187],["sienna",10506797],["brown",10824234],["maroon",8388608],["white",16777215],["snow",16775930],["honeydew",15794160],["mintcream",16121850],["azure",15794175],["aliceblue",15792383],["ghostwhite",16316671],["whitesmoke",16119285],["seashell",16774638],["beige",16119260],["oldlace",16643558],["floralwhite",16775920],["ivory",16777200],["antiquewhite",16444375],["linen",16445670],["lavenderblush",16773365],["mistyrose",16770273],["gainsboro",14474460],["lightgray",13882323],["silver",12632256],["darkgray",11119017],["gray",8421504],["dimgray",6908265],["lightslategray",7833753],["slategray",7372944],["darkslategray",3100495],["black",0]],namedColors:{},gradients:{rainbow:[255,65535,65280,16776960,16711680],temp:[255,32767,16777215,16744192,16711680],hot:[16777215,16744192,16711680],cold:[16777215,32767,255],"blue-red":[255,16777215,16711680],reds:[16777215,16711680],blues:[16777215,255]}});for(var wM=_M.prototype,SM=wM.namedColorsArray,EM=wM.namedColors,kM=0,OM=SM.length;kM<OM;++kM){var AM=j_(SM[kM],2),CM=AM[0],MM=AM[1];EM[CM]=MM}var TM,PM=new _M("CPK","CP");PM.elementColors={H:16777215,C:2105376,N:2121983,O:15605776,F:65280,P:8397055,S:16776960,CL:47872,FE:13684944,CO:13684944,NI:13684944,CU:13684944,BR:34816,I:21760};var RM=new _M("Jmol","JM");RM.colors=[255,22015,44031,65535,65451,65365,65280,5635840,11271936,16776960,16755456,16733440,16711680,16711765,16711851,16711935,11206911,5570815],RM.elementColors={H:16777215,D:16777152,T:16777120,HE:14286847,LI:13402367,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,NE:11789301,NA:11230450,MG:9109248,AL:12560038,SI:1578e4,P:16744448,S:16777008,CL:2093087,AR:8442339,K:9388244,CA:4062976,SC:15132390,TI:12567239,V:10921643,CR:9083335,MN:10255047,FE:14706227,CO:15765664,NI:5296208,CU:13140019,ZN:8224944,GA:12750735,GE:6721423,AS:12419299,SE:16752896,BR:10889513,KR:6076625,RB:7351984,SR:65280,Y:9764863,ZR:9756896,NB:7586505,MO:5551541,TC:3907230,RU:2396047,RH:687500,PD:27013,AG:12632256,CD:16767375,IN:10909043,SN:6717568,SB:10380213,TE:13924864,I:9699476,XE:4366e3,CS:5707663,BA:51456,LA:7394559,CE:16777159,PR:14286791,ND:13107143,PM:10747847,SM:9437127,EU:6422471,GD:4587463,TB:3211207,DY:2097095,HO:65436,ER:58997,TM:54354,YB:48952,LU:43812,HF:5096191,TA:5089023,W:2200790,RE:2522539,OS:2516630,IR:1528967,PT:13684960,AU:16765219,HG:12105936,TL:10900557,PB:5724513,BI:10375093,PO:11230208,AT:7688005,RN:4358806,FR:4325478,RA:32e3,AC:7384058,TH:47871,PA:41471,U:36863,NP:33023,PU:27647,AM:5528818,CM:7888099,BK:9064419,CF:10565332,ES:11739092,FM:11739066,MD:11734438,NO:12389767,LR:13041766,RF:13369433,DB:13697103,SG:14221381,BH:14680120,HS:15073326,MT:15400998},RM.defaultResidueColor=12492910,RM.residueColors={ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,A:10526975,C:16747595,G:16740464,I:8454143,T:10551200,U:16744576,DA:10526975,DC:16747595,DG:16740464,DI:8454143,DT:10551200,DU:16744576,"+A":10526975,"+C":16747595,"+G":16740464,"+I":8454143,"+T":10551200,"+U":16744576},RM.chainColors=[4294967295,4290826495,4289789872,4294951112,4294967168,4294951167,4289786096,4294955120,4293951616,4294303411,4278239231,4291648604,4284927402,4288335154,4293821166,4278243025,4278255487,4282168177,4278190219,4290623339,4278215680,4286578688,4286611456,4286578816,4278222976,4290283019,4289864226];var IM,LM=uS.Type;RM.secondaryColors=(Uw(TM={},LM.HELIX_ALPHA,16711808),Uw(TM,LM.HELIX_PI,6291584),Uw(TM,LM.HELIX_310,10485888),Uw(TM,LM.STRAND,16762880),Uw(TM,LM.TURN,6324479),Uw(TM,"dna",11403518),Uw(TM,"rna",16580962),TM);var NM=new _M("VMD","VM");NM.colors=[255,16711680,6316128,16744448,16776960,8421427,10066329,65280,16777215,16751001,4243648,10879142,8447590,15099571,8408320,8421568],NM.defaultElementColor=8408320,NM.elementColors={H:16777215,C:4243391,N:255,O:16711680,P:8421427,S:16776960},NM.defaultResidueColor=4243648,NM.residueColors={ALA:255,ARG:16777215,ASN:8421427,ASP:16711680,CYS:16776960,GLN:16744448,GLU:16751001,GLY:16777215,HIS:4243648,ILE:65280,LEU:16751001,LYS:4243648,MET:16776960,PHE:10879142,PRO:8408064,SER:16776960,THR:15099571,TRP:10066329,TYR:65280,VAL:8421427,A:255,C:16744448,G:16776960,T:10879142,U:65280,DA:255,DC:16744448,DG:16776960,DT:10879142,DU:65280,"+A":255,"+C":16744448,"+G":16776960,"+T":10879142,"+U":65280,WAT:4243648,H2O:4243648,HOH:4243648},NM.chainColors=[16777215].concat(NM.colors);var jM=uS.Type;NM.secondaryColors=(Uw(IM={},jM.HELIX_ALPHA,10879142),Uw(IM,jM.HELIX_310,255),Uw(IM,jM.HELIX_PI,16711680),Uw(IM,jM.STRAND,16776960),Uw(IM,jM.BRIDGE,8421427),Uw(IM,jM.TURN,4243648),IM);var DM=new tk([PM,RM,NM]),BM=function(){function e(t){if(O_(this,e),this.constructor===e)throw new Error("Can not instantiate abstract class!");this.opts=(0,R.merge)(mw.deriveDeep(_w.now.colorers[this.id],!0),t),this.palette=DM.first}return C_(e,[{key:"identify",value:function(){var e=mw.objectsDiff(this.opts,_w.now.colorers[this.id]);return(0,R.isEmpty)(e)?this.id:[this.id,e]}}]),e}();function zM(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}BM.prototype.id="__";var FM=function(e){P_(n,e);var t=zM(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"getAtomColor",value:function(e,t){var n=e.element.name;return"C"===n&&this.opts.carbon>=0?this.opts.carbon:this.palette.getElementColor(n)}},{key:"getResidueColor",value:function(e,t){return this.palette.defaultResidueColor}}]),n}(BM);function VM(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(FM,"id","EL"),FM.prototype.id="EL",FM.prototype.name="Element",FM.prototype.shortName="Element";var UM=function(e){P_(n,e);var t=VM(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"getAtomColor",value:function(e,t){return this.getResidueColor(e.residue,t)}},{key:"getResidueColor",value:function(e,t){return this.palette.getResidueColor(e._type._name)}}]),n}(BM);function ZM(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(UM,"id","RT"),UM.prototype.id="RT",UM.prototype.name="Residue Type",UM.prototype.shortName="Residue";var HM=function(e){P_(n,e);var t=ZM(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"getAtomColor",value:function(e,t){return this.getResidueColor(e.residue,t)}},{key:"getResidueColor",value:function(e,t){var n=e._chain;if(n.minSequence===Number.POSITIVE_INFINITY&&n.maxSequence===Number.NEGATIVE_INFINITY)return this.palette.defaultNamedColor;var r=n.minSequence,i=n.maxSequence>r?n.maxSequence:r+1;return this.palette.getGradientColor((e._sequence-r)/(i-r),this.opts.gradient)}}]),n}(BM);function GM(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(HM,"id","SQ"),HM.prototype.id="SQ",HM.prototype.name="Sequence",HM.prototype.shortName="Sequence";var WM=function(e){P_(n,e);var t=GM(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"getAtomColor",value:function(e,t){return this.getResidueColor(e.residue,t)}},{key:"getResidueColor",value:function(e,t){return this.palette.getChainColor(e.getChain()._name)}}]),n}(BM);function qM(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(WM,"id","CH"),WM.prototype.id="CH",WM.prototype.name="Chain",WM.prototype.shortName="Chain";var KM=function(e){P_(n,e);var t=qM(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"getAtomColor",value:function(e,t){return this.getResidueColor(e.residue,t)}},{key:"getResidueColor",value:function(e,t){if(e._type.flags&eS.Flags.DNA)return this.palette.getSecondaryColor("dna");if(e._type.flags&eS.Flags.RNA)return this.palette.getSecondaryColor("rna");var n=e.getSecondary();if(n){var r=this.palette.getSecondaryColor(n.type,!0);return void 0===r&&(r=this.palette.getSecondaryColor(n.generic)),r}return this.palette.defaultSecondaryColor}}]),n}(BM);function YM(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(KM,"id","SS"),KM.prototype.id="SS",KM.prototype.name="Secondary Structure",KM.prototype.shortName="Structure";var XM=function(e){P_(n,e);var t=YM(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"getAtomColor",value:function(e,t){return this.opts.color}},{key:"getResidueColor",value:function(e,t){return this.opts.color}}]),n}(BM);function $M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(XM,"id","UN"),XM.prototype.id="UN",XM.prototype.name="Uniform",XM.prototype.shortName="Uniform";var JM=function(e){P_(n,e);var t=$M(n);function n(e){var r;O_(this,n),r=t.call(this,e);var i=qS.parse(r.opts.subset);return r._subsetCached=i.error?qS.none():i.selector,r}return C_(n,[{key:"getAtomColor",value:function(e,t){return this._subsetCached.includesAtom(e)?this.opts.color:this.opts.baseColor}},{key:"getResidueColor",value:function(e,t){for(var n=this._subsetCached,r=e._atoms,i=0,o=r.length;i<o;++i)if(!n.includesAtom(r[i]))return this.opts.baseColor;return this.opts.color}}]),n}(BM);function QM(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(JM,"id","CO"),JM.prototype.id="CO",JM.prototype.name="Conditional",JM.prototype.shortName="Conditional";var eT=function(e){P_(n,e);var t=QM(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"getAtomColor",value:function(e,t){return this.palette.getChainColor(String.fromCharCode(e.location))}},{key:"getResidueColor",value:function(e,t){return this.palette.defaultResidueColor}}]),n}(BM);function tT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(eT,"id","CF"),eT.prototype.id="CF",eT.prototype.name="Conformation",eT.prototype.shortName="Conformation";var nT=function(e){P_(n,e);var t=tT(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"getAtomColor",value:function(e,t){var n=this.opts,r=1;return e.temperature&&n?(r=n.min===n.max?e.temperature>n.max?1:0:(e.temperature-n.min)/(n.max-n.min),this.palette.getGradientColor(r,n.gradient)):this.palette.defaultGradientColor}},{key:"getResidueColor",value:function(e,t){var n=this.opts;if(!n)return this.palette.defaultGradientColor;if(e.temperature){var r=0;return r=n.min===n.max?e.temperature>n.max?1:0:(e.temperature-n.min)/(n.max-n.min),this.palette.getGradientColor(r,n.gradient)}return this.palette.defaultGradientColor}}]),n}(BM);function rT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(nT,"id","TM"),nT.prototype.id="TM",nT.prototype.name="Temperature",nT.prototype.shortName="Temperature";var iT=function(e){P_(n,e);var t=rT(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_getColorByOccupancy",value:function(e,t){if(void 0!==e){var n=1-e;return this.palette.getGradientColor(n,t.gradient)}return this.palette.defaultGradientColor}},{key:"getAtomColor",value:function(e,t){var n=this.opts;return this._getColorByOccupancy(e.occupancy,n)}},{key:"getResidueColor",value:function(e,t){var n=this.opts;return this._getColorByOccupancy(e.occupancy,n)}}]),n}(BM);function oT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(iT,"id","OC"),iT.prototype.id="OC",iT.prototype.name="Occupancy",iT.prototype.shortName="Occupancy";var aT=function(e){P_(n,e);var t=oT(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"getAtomColor",value:function(e,t){return this.getResidueColor(e.residue,t)}},{key:"getResidueColor",value:function(e,t){var n=this.palette.defaultResidueColor;if(void 0!==e._type.hydrophobicity){n=this.palette.getGradientColor((e._type.hydrophobicity- -4.5)/9,this.opts.gradient)}return n}}]),n}(BM);function sT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(aT,"id","HY"),aT.prototype.id="HY",aT.prototype.name="Hydrophobicity",aT.prototype.shortName="Hydrophobicity";var uT=function(e){P_(n,e);var t=sT(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"getAtomColor",value:function(e,t){return this.getResidueColor(e.residue,t)}},{key:"getResidueColor",value:function(e,t){var n=e._molecule,r=t.getMoleculeCount();return r>1?this.palette.getGradientColor((n.index-1)/(r-1),this.opts.gradient):this.palette.getGradientColor(0,this.opts.gradient)}}]),n}(BM);function lT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(uT,"id","MO"),uT.prototype.id="MO",uT.prototype.name="Molecule",uT.prototype.shortName="Molecule";var cT=function(e){P_(n,e);var t=lT(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"getAtomColor",value:function(e,t){var n=this.opts.color,r=function(e,t){return t*(e>>16&255)<<16|t*(e>>8&255)<<8|t*(255&e)}(n,this.opts.factor);return e.flags&Zw.Flags.CARBON?n:r}},{key:"getResidueColor",value:function(e,t){return this.opts.color}}]),n}(BM);Uw(cT,"id","CB"),cT.prototype.id="CB",cT.prototype.name="Carbon",cT.prototype.shortName="Carbon";var fT=new tk([FM,UM,HM,WM,KM,XM,JM,eT,nT,iT,aT,uT,cT]);function hT(e){return new Pd(e,e,e)}var dT=new tk([{id:"DF",name:"Diffuse",shortName:"Diffuse",uberOptions:{diffuse:hT(1),specular:hT(0),shininess:1,opacity:1},values:{lights:!0,fog:!0,depthWrite:!0,transparent:!1,toonShading:!1}},{id:"SF",name:"Soft Plastic",shortName:"Soft",uberOptions:{diffuse:hT(1),specular:hT(.1),shininess:30,opacity:1},values:{lights:!0,fog:!0,depthWrite:!0,transparent:!1,toonShading:!1}},{id:"PL",name:"Glossy Plastic",shortName:"Glossy",uberOptions:{diffuse:hT(.56),specular:hT(.28),shininess:100,opacity:1},values:{lights:!0,fog:!0,depthWrite:!0,transparent:!1,toonShading:!1}},{id:"ME",name:"Metal",shortName:"Metal",uberOptions:{diffuse:hT(.56),specular:hT(.55),shininess:30,opacity:1},values:{lights:!0,fog:!0,depthWrite:!0,transparent:!1,toonShading:!1}},{id:"TR",name:"Transparent",shortName:"Transparent",uberOptions:{diffuse:hT(1),specular:hT(0),shininess:1,opacity:.5},values:{lights:!0,fog:!0,depthWrite:!0,transparent:!0,toonShading:!1}},{id:"GL",name:"Glass",shortName:"Glass",uberOptions:{diffuse:hT(.5),specular:hT(.65),shininess:100,opacity:.5},values:{lights:!0,fog:!0,depthWrite:!0,transparent:!0,toonShading:!1}},{id:"BA",name:"Backdrop",shortName:"Backdrop",uberOptions:{diffuse:hT(1),specular:hT(0),shininess:1,opacity:1},values:{lights:!1,fog:!1,depthWrite:!1,transparent:!1,toonShading:!1}},{id:"TN",name:"Toon",shortName:"Toon",uberOptions:{diffuse:hT(1),specular:hT(0),shininess:1,opacity:1},values:{lights:!0,fog:!0,depthWrite:!0,transparent:!1,toonShading:!0}},{id:"FL",name:"Flat",shortName:"Flat",uberOptions:{diffuse:hT(1),specular:hT(0),shininess:0,opacity:1},values:{lights:!1,fog:!0,depthWrite:!0,transparent:!1}}]);function pT(e,t,n){var r=e.material.createInstance();r.setValues(t);var i=new e.constructor(e.geometry,r);return i.material.needsUpdate=!0,i.applyMatrix4(e.matrix),i.layers.set(n),i}function vT(e,t,n){for(var r=function(e,t){var n=[];return e.traverse((function(e){for(var r=0;r<t.length;r++)if(e instanceof t[r]){n[n.length]=e;break}})),n}(e,t),i=0,o=r.length;i<o;++i){var a=r[i];a.parent&&n(a)}}function mT(e,t){!function e(n){n instanceof fp&&t(n);for(var r=0,i=n.children.length;r<i;r++)e(n.children[r])}(e)}var gT={applyTransformsToMeshes:function(e,t){var n=t.length;n<1||vT(e,[fp,hy,ly],(function(e){e.applyMatrix4(t[0]);for(var r=1;r<n;++r){var i=new e.constructor(e.geometry,e.material);e.parent.add(i),i.applyMatrix4(t[r])}}))},processTransparentMaterial:function(){var e={prepassTransparancy:!0,fakeOpacity:!1,transparent:!1,colorFromDepth:!1,lights:!1,shadowmap:!1,fog:!1};return function(t,n){n instanceof YO&&vT(t,[fp,hy],(function(t){t.material.setValues({prepassTransparancy:!1,fakeOpacity:!1}),t.material.needsUpdate=!0,t.layers.set(YE.LAYERS.TRANSPARENT);var n=pT(t,e,YE.LAYERS.PREPASS_TRANSPARENT);t.parent.add(n)}))}}(),processColFromPosMaterial:function(){var e={colorFromPos:!0,transparent:!1,colorFromDepth:!1,lights:!1,shadowmap:!1,fog:!1,overrideColor:!1,fogTransparent:!1,attrColor:!1,attrColor2:!1,attrAlphaColor:!1,fakeOpacity:!1};return function(t,n){n instanceof YO&&vT(t,[fp,hy],(function(t){var n=pT(t,e,YE.LAYERS.COLOR_FROM_POSITION);t.parent.add(n)}))}}(),createShadowmapMaterial:function(){var e={colorFromDepth:!0,orthoCam:!0,lights:!1,shadowmap:!1,fog:!1};return function(t,n){n instanceof YO&&vT(t,[fp,hy],(function(t){if(!t.receiveShadow&&t.material.shadowmap&&t.material.setValues({shadowmap:!1}),t.material.lights&&t.castShadow&&YE.belongToSelectLayers(t)){var n=pT(t,e,YE.LAYERS.SHADOWMAP);n.isShadowmapMesh=!0,t.parent.add(n)}}))}}(),removeShadowmapMaterial:function(e,t){t instanceof YO&&vT(e,[fp,hy],(function(e){e.isShadowmapMesh&&e.parent.remove(e)}))},forEachMeshInGroup:mT,countTriangles:function(e){var t=0;return mT(e,(function(e){t+=function(e){var t=e.geometry;if(t instanceof Ax){var n=t.attributes;for(var r in n)if(n.hasOwnProperty(r)&&n[r]instanceof Cx){var i=n[r];return(t.index?t.index.array.length/3:0)*i.array.length/i.itemSize}return 0}return t instanceof qd?t.index?t.index.array.length/3:0:t.faces?t.faces.length:0}(e)})),t}},yT=DE.selectors,bT=function(){function e(t,n,r,i){O_(this,e);var o={clipPlane:_w.now.draft.clipPlane,fogTransparent:_w.now.bg.transparent,shadowmap:_w.now.shadow.on,shadowmapType:_w.now.shadow.type};this.index=t,this.mode=n,this.colorer=r,this.selector=i,this.selectorString="",this.count=0,this.material=new YO,this.material.setValues(o),this.material.setUberOptions({fogAlpha:_w.now.fogAlpha}),this.materialPreset=dT.first,this.needsRebuild=!0,this.visible=!0,this.setMode(n)}return C_(e,[{key:"markAtoms",value:function(e){return this.count=e.markAtoms(this.selector,1<<this.index),this.needsRebuild=!0,this.count}},{key:"unmarkAtoms",value:function(e){e.clearAtomBits(1<<this.index),this.count=0}},{key:"setMode",value:function(e){this.mode=e}},{key:"setMaterialPreset",value:function(e){this.materialPreset=e,this.material.setUberOptions(e.uberOptions),this.material.setValues(e.values)}},{key:"reset",value:function(){this.geo=null,this.selectionGeo=null}},{key:"buildGeometry",value:function(e){return this.reset(),this.needsRebuild=!1,_w.now.ao&&this.material.setValues({normalsToGBuffer:_w.now.ao}),this.geo=this.mode.buildGeometry(e,this.colorer,1<<this.index,this.material),this.material.uberOptions.opacity<.99&&"prepass"===_w.now.transparency&&gT.processTransparentMaterial(this.geo,this.material),this.geo.visible=this.visible,YE.processObjRenderOrder(this.geo,this.materialPreset.id),gT.processColFromPosMaterial(this.geo,this.material),_w.now.shadow.on&&gT.createShadowmapMaterial(this.geo,this.material),this.geo}},{key:"buildSelectionGeometry",value:function(e){var t=null;if(this.geo&&"getSubset"in this.geo){var n=this.geo.getSubset(e);if(n&&n.length>0){(t=new pg).matrixAutoUpdate=!1,t.matrix=this.geo.matrix;for(var r=0;r<n.length;r++){var i=n[r];t.add(i)}}}return t&&(t.visible=this.visible),this.selectionGeo=t,this.selectionGeo}},{key:"compare",value:function(e){var t={},n=String(this.selector);e&&n.valueOf()===String(e.selector).valueOf()||(t.selector=n);var r=this.mode.identify();e&&!Array.isArray(r)&&r===e.mode||(t.mode=r);var i=this.colorer.identify();return e&&!Array.isArray(i)&&i===e.colorer||(t.colorer=i),e&&this.materialPreset.id===e.material||(t.material=this.materialPreset.id),t}},{key:"change",value:function(e,t,n,r){var i={};if(e.selector){var o=yT.parse(e.selector).selector,a=String(o);this.selectorString!==a&&(i.selector=a,this.selectorString=a,this.selector=o,this.markAtoms(t))}if(e.mode){var s=e.mode;(0,R.isEqual)(this.mode.identify(),s)||(i.mode=s,this.setMode(n))}if(e.colorer){var u=e.colorer;(0,R.isEqual)(this.colorer.identify(),u)||(i.colorer=u,this.colorer=r)}if(e.material){var l=e.material;(0,R.isEqual)(this.materialPreset.id,l)||(i.material=l,this.setMaterialPreset(dT.get(e.material)))}return i}},{key:"show",value:function(e){this.visible=e,this.geo&&(this.geo.visible=e),this.selectionGeo&&(this.selectionGeo.visible=e)}}]),e}();function xT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}function _T(e,t,n){var r=e.children;if(r)for(var i=0,o=r.length;i<o;++i){var a=r[i];a._component===t&&n(a),a instanceof YE.RCGroup&&_T(a,t,n)}}function wT(){}var ST=function(e){P_(n,e);var t=xT(n);function n(e){var r;return O_(this,n),(r=t.call(this))._complexVisual=e,r._inProgress=!1,r}return C_(n,[{key:"begin",value:function(){var e=this._complexVisual.getComplex();this._componentTransforms=[];for(var t=0;t<e._components.length;++t){var n=e._components[t];this._componentTransforms[n._index]=new fd}return this._inProgress=!0,!0}},{key:"apply",value:function(){if(this._inProgress){for(var e=this._complexVisual.getComplex(),t=0;t<e._components.length;++t)this._bakeComponentTransform(e._components[t]);e.onAtomPositionChanged(),this._resetComponentTransform(),this._complexVisual.finalizeEdit()}}},{key:"discard",value:function(){this._inProgress&&(this._resetComponentTransform(),this._complexVisual.finalizeEdit())}},{key:"getAltObj",value:function(){var e={objects:[],pivot:new lh(0,0,0)},t=this._complexVisual,n=t.getSelectedComponent();if(null===n)return e;var r,i,o,a,s=this._complexVisual.getSelectionGeo(),u=1<<t.getSelectionBit();for(_T(t,n,(function(t){e.objects.push(t)})),r=0;r<s.children.length;++r)for(o=s.children[r],i=0;i<o.children.length;++i)(a=o.children[i]).hasOwnProperty("_component")&&a._component===n&&e.objects.push(a);e.objects.push(this._componentTransforms[n._index]);var l=new lh(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),c=new lh(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);return n.forEachResidue((function(e){var t=e._atoms;for(i=0;i<t.length;++i)t[i].mask&u&&(l.min(t[i].position),c.max(t[i].position))})),e.pivot.lerpVectors(l,c,.5),e}},{key:"_bakeComponentTransform",value:function(e){var t=this._componentTransforms[e._index];!t||0===t.position.x&&0===t.position.y&&0===t.position.z&&0===t.quaternion.x&&0===t.quaternion.y&&0===t.quaternion.z&&1===t.quaternion.w||(t.updateMatrix(),e.forEachResidue((function(e){for(var n=e._atoms,r=0;r<n.length;++r)n[r].position.applyMatrix4(t.matrix)})))}},{key:"_resetComponentTransform",value:function(){var e,t,n,r,i=this._complexVisual,o=this._complexVisual.getSelectionGeo();for(e=0;e<this._componentTransforms.length;++e)(r=this._componentTransforms[e]).position.set(0,0,0),r.quaternion.set(0,0,0,1);for(e=0;e<i.children.length;++e)for(n=i.children[e],t=0;t<n.children.length;++t)(r=n.children[t]).hasOwnProperty("_component")&&(r.position.set(0,0,0),r.quaternion.set(0,0,0,1));for(e=0;e<o.children.length;++e)for(n=o.children[e],t=0;t<n.children.length;++t)(r=n.children[t]).hasOwnProperty("_component")&&(r.position.set(0,0,0),r.quaternion.set(0,0,0,1))}}]),n}(wT),ET=function(e){P_(n,e);var t=xT(n);function n(e){var r;return O_(this,n),(r=t.call(this))._complexVisual=e,r._inProgress=!1,r}return C_(n,[{key:"begin",value:function(){var e=this._complexVisual,t=this._complexVisual.getSelectionGeo(),n=this._getSelectionBorderAtoms();if(n.length<1||n.length>2)return nw.error("Can only edit fragments with one or two bound atoms."),!1;this._fragmentBoundAtoms=n;var r=1<<e.getSelectionBit();e.disableSubset(r,!0);for(var i=0;i<t.children.length;++i)t.children[i].visible=!1;var o=n[0].position.clone();2===n.length&&o.lerp(n[1].position,.5),this._fragmentGeo=new pg,e.add(this._fragmentGeo),this._fragmentGeo.position.copy(o),this._fragmentSelectionGeo=new pg,t.add(this._fragmentSelectionGeo),this._fragmentSelectionGeo.position.copy(o);var a=o.clone();a.negate();for(var s=0;s<e.children.length;++s){var u=e.children[s];if("getSubset"in u){var l=new pg;this._fragmentGeo.add(l);var c=new pg;this._fragmentSelectionGeo.add(c);for(var f=u.getSubset(r,!0),h=0;h<f.length;h++){var d=f[h];l.add(d),d.position.copy(a)}for(var p=u.getSubset(r,!0),v=0;v<p.length;v++){var m=p[v];c.add(m),m.position.copy(a)}}}return YE.applySelectionMaterial(this._fragmentSelectionGeo),this._inProgress=!0,!0}},{key:"apply",value:function(){if(this._inProgress){var e=this._complexVisual,t=e.getSelectionBit(),n=this._fragmentGeo.position,r=this._fragmentGeo.matrix.clone();r.multiply((new Fh).makeTranslation(-n.x,-n.y,-n.z)),this._bakeAtomTransform(r,1<<t),e.enableSubset(1<<t,!0),e.getComplex().onAtomPositionChanged(),e.finalizeEdit()}}},{key:"discard",value:function(){if(this._inProgress){var e=this._complexVisual,t=this._complexVisual.getSelectionGeo();this._fragmentGeo.parent.remove(this._fragmentGeo),e.enableSubset(1<<e.getSelectionBit(),!0);for(var n=0;n<t.children.length;++n){var r=t.children[n];r.visible?t.remove(r):r.visible=!0}e.finalizeEdit()}}},{key:"isFreeRotationAllowed",value:function(){return this._fragmentBoundAtoms.length<2}},{key:"getAltObj",value:function(){var e={objects:[],pivot:new lh(0,0,0)};e.objects.push(this._fragmentGeo,this._fragmentSelectionGeo);var t=this._fragmentBoundAtoms;if(1===t.length){if(1===t[0].bonds.length){var n=t[0].bonds[0];e.axis=(new lh).subVectors(n._right.position,n._left.position),e.axis.normalize(),e.axis.transformDirection(this._complexVisual.matrixWorld)}}else 2===t.length&&(e.axis=(new lh).subVectors(t[1].position,t[0].position),e.axis.normalize(),e.axis.transformDirection(this._complexVisual.matrixWorld));return e}},{key:"_getSelectionBorderAtoms",value:function(){var e=this._complexVisual.getComplex(),t=1<<this._complexVisual.getSelectionBit(),n={};e.forEachBond((function(e){e._left.mask&t?0===(e._right.mask&t)&&(n[e._left.index]=1):e._right.mask&t&&(n[e._right.index]=1)}));for(var r=[],i=Object.keys(n),o=0,a=i.length;o<a;++o){var s=i[o];r.push(e._atoms[s])}return r}},{key:"_bakeAtomTransform",value:function(e,t){this._complexVisual.getComplex().forEachAtom((function(n){n.mask&t&&n.position.applyMatrix4(e)}))}}]),n}(wT),kT={ComponentEditor:ST,FragmentEditor:ET};function OT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var AT=DE.selectors;function CT(e,t){Array.isArray(t)||(t=[t]);var n=j_(t,2),r=n[0],i=n[1];return new(e.get(r)||e.first)(i)}var MT=function(e){P_(n,e);var t=OT(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,e,r))._complex=r,i._reprList=[],i._repr=null,i._reprListChanged=!0,i._selectionBit=0,i._reprUsedBits=0,i._selectionCount=0,i._selectionGeometry=new pg,i}return C_(n,[{key:"getBoundaries",value:function(){return this._complex.getBoundaries()}},{key:"release",value:function(){this._selectionGeometry.parent&&this._selectionGeometry.remove(this._selectionGeometry),JE.prototype.release.call(this)}},{key:"getComplex",value:function(){return this._complex}},{key:"getSelectionCount",value:function(){return this._selectionCount}},{key:"getSelectionGeo",value:function(){return this._selectionGeometry}},{key:"getSelectionBit",value:function(){return this._selectionBit}},{key:"getEditor",value:function(){return this._editor}},{key:"resetReps",value:function(e){this._complex&&this._complex.clearAtomBits(-1),this._reprListChanged=!0,this._reprUsedBits=0,this._reprList.length=e.length;for(var t=0,n=e.length;t<n;++t){var r=e[t],i=void 0,o=void 0;if("string"===typeof r.selector)o=r.selector,i=AT.parse(o).selector;else if("undefined"===typeof r.selector){o=_w.now.presets.default[0].selector,i=AT.parse(o).selector}else o=(i=r.selector).toString();var a=CT(bM,r.mode),s=CT(fT,r.colorer),u=dT.get(r.material)||dT.first;this._reprList[t]=new bT(t,a,s,i),this._reprList[t].setMaterialPreset(u),this._reprList[t].selectorString=o,this._complex&&this._complex.markAtoms(i,1<<t),this._reprUsedBits|=1<<t}this._repr=e.length>0?this._reprList[0]:null,this._selectionBit=e.length,this._reprUsedBits|=1<<this._selectionBit,this._selectionCount=0,this._complex&&this._complex.update()}},{key:"repCount",value:function(){return this._reprList.length}},{key:"repCurrent",value:function(e){return e>=0&&e<this._reprList.length?this._repr=this._reprList[e]:e=this._reprList.indexOf(this._repr),e}},{key:"rep",value:function(e,t){if(!t&&(void 0===e||e instanceof Object)&&(t=e,e=this.repCurrent()),e<0||e>this._reprList.length)return nw.error("Rep ".concat(e," does not exist!")),null;if(e===this._reprList.length){var n=this.repAdd(t);return nw.warn("Rep ".concat(e," does not exist! New representation was created.")),{desc:n.desc,index:e,status:"created"}}var r=this._reprList[e],i={selector:r.selectorString,mode:r.mode.identify(),colorer:r.colorer.identify(),material:r.materialPreset.id};if(t){var o=r.change(t,this._complex,CT(bM,t.mode),CT(fT,t.colorer));if(!(0,R.isEmpty)(o)){for(var a in r.needsRebuild=!0,o)o.hasOwnProperty(a)&&(i[a]=o[a],nw.debug("rep[".concat(e,"].").concat(a," changed to ").concat(o[a])));return o.mode&&r.mode.isSurface&&("ultra"===_w.now.resolution||"high"===_w.now.resolution)&&(nw.report('Surface resolution was changed to "medium" to avoid hang-ups.'),_w.set("resolution","medium")),{desc:i,index:e,status:"changed"}}}return{desc:i,index:e,status:""}}},{key:"repGet",value:function(e){return(void 0===e||e instanceof Object)&&(e=this.repCurrent()),e<0||e>=this._reprList.length?null:this._reprList[e]}},{key:"_getFreeReprIdx",value:function(){for(var e=this._reprUsedBits,t=0;t<=n.NUM_REPRESENTATION_BITS;++t,e>>=1)if(0===(1&e))return t;return-1}},{key:"repAdd",value:function(e){if(this._reprList.length>=n.NUM_REPRESENTATION_BITS)return null;var t=this._getFreeReprIdx();if(t<0)return null;var r=this.buildSelectorFromMask(1<<this._selectionBit),i=_w.now.presets.default[0],o=(0,R.merge)({selector:i.selector,mode:i.mode,colorer:i.colorer,material:i.material},e),a="string"===typeof o.selector?AT.parse(o.selector).selector:o.selector,s=new bT(this._selectionBit,CT(bM,o.mode),CT(fT,o.colorer),a);return s.selectorString=a.toString(),s.setMaterialPreset(dT.get(o.material)),s.markAtoms(this._complex),this._reprList.push(s),this._selectionBit=t,this._reprUsedBits|=1<<this._selectionBit,this._complex.markAtoms(r,1<<this._selectionBit),{desc:o,index:this._reprList.length-1}}},{key:"repRemove",value:function(e){void 0===e&&(e=this.repCurrent());var t=this._reprList.length;if(!(e<0||e>=t||t<=1)){var n=this._reprList[e];n.unmarkAtoms(this._complex),this._reprUsedBits&=~(1<<n.index),this._reprList.splice(e,1),n===this._repr&&(e=e<--t?e:t-1,this._repr=this._reprList[e]),this._reprListChanged=!0}}},{key:"repHide",value:function(e,t){(void 0===t&&(t=!0),e<0||e>=this._reprList.length)||this._reprList[e].show(!t)}},{key:"select",value:function(e,t){t?this._selectionCount+=this._complex.markAtomsAdditionally(e,1<<this._selectionBit):this._selectionCount=this._complex.markAtoms(e,1<<this._selectionBit),this._complex.updateStructuresMask(),this.rebuildSelectionGeometry()}},{key:"resetSelectionMask",value:function(){0!==this._selectionCount&&(this._selectionCount=0,this._complex&&this._complex.clearAtomBits(1<<this._selectionBit))}},{key:"updateSelectionMask",value:function(e){var t=this,n=e.atom,r=e.residue,i=e.chain,o=e.molecule,a=1<<this._selectionBit,s=~a;if(n)r=n.residue,i=r._chain,o=r._molecule,n.mask&a?(n.mask&=s,r._mask&=s,i._mask&=s,o&&(o.mask&=s),this._selectionCount--):(n.mask|=a,this._selectionCount++,r.collectMask(),i.collectMask(),o&&o.collectMask());else if(r)i=r._chain,o=r._molecule,r._mask&a?(r._mask&=s,i._mask&=s,r.forEachAtom((function(e){e.mask&a&&(e.mask&=s,t._selectionCount--)}))):(r._mask|=a,r.forEachAtom((function(e){e.mask&a||(e.mask|=a,t._selectionCount++)})),i.collectMask(),o&&o.collectMask());else if(i||o){var u=i||o;u._mask&a?(u._mask&=s,u.forEachResidue((function(e){e._mask&a&&(e._mask&=s,e.forEachAtom((function(e){e.mask&a&&(e.mask&=s,t._selectionCount--)})),e._mask&=s)}))):(u._mask|=a,u.forEachResidue((function(e){if(!(e._mask&a)){e._mask|=a,e.forEachAtom((function(e){e.mask&a||(e.mask|=a,t._selectionCount++)}));var n=i?e.getMolecule():e.getChain();n&&n.collectMask()}})))}else this.resetSelectionMask()}},{key:"expandSelection",value:function(){var e=this,t=1<<this._selectionBit,n=1<<31;this._complex.forEachBond((function(e){e._left.mask&t?0===(e._right.mask&t)&&(e._right.mask|=n):e._right.mask&t&&(e._left.mask|=n)}));this._complex.forEachAtom((function(r){r.mask&n&&(r.mask=2147483647&r.mask|t,++e._selectionCount)})),this._complex.updateStructuresMask()}},{key:"shrinkSelection",value:function(){var e=this,t=1<<this._selectionBit,n=1<<31;this._complex.forEachBond((function(e){e._left.mask&t?0===(e._right.mask&t)&&(e._left.mask|=n):e._right.mask&t&&(e._right.mask|=n)})),this._complex.forEachAtom((function(e){e.mask&t&&1===e.bonds.length&&(e.mask|=n)}));var r=~(t|n);this._complex.forEachAtom((function(t){t.mask&n&&(t.mask&=r,--e._selectionCount)})),this._complex.updateStructuresMask()}},{key:"getSelectedComponent",value:function(){var e=1<<this._selectionBit,t=null,n=!1;return this._complex.forEachAtom((function(r){r.mask&e&&(null===t?t=r.residue._component:t!==r.residue._component&&(n=!0))})),n?null:t}},{key:"getSelectionCenter",value:function(e,t,n){e.set(0,0,0);var r=0;return this._complex.forEachAtom((function(i){t(i,n)&&(e.add(i.position),r++)})),0!==r&&(e.divideScalar(r),e.applyMatrix4(this.matrix),!0)}},{key:"needsRebuild",value:function(){if(this._reprListChanged)return!0;for(var e=this._reprList,t=0,n=e.length;t<n;++t){if(e[t].needsRebuild)return!0}return!1}},{key:"rebuild",value:function(){var e=this;return YE.clearTree(this),new Promise((function(t){var n=e._complex;if(n){var r=!1;setTimeout((function(){console.time("build");for(var i=e._reprList,o=DM.get(_w.now.palette)||DM.first,a=!1,s=0,u=i.length;s<u;++s){var l=i[s];if(l.colorer.palette=o,l.needsRebuild){l.reset();try{l.buildGeometry(n)}catch(c){if(!(c instanceof mw.OutOfMemoryError))throw c;l.needsRebuild=!1,l.reset(),nw.error("Not enough memory to build geometry for representation ".concat(l.index+1)),r=!0}}a=r||a||YE.groupHasGeometryToRender(l.geo),l.geo&&e.add(l.geo)}e._reprListChanged=!1,console.timeEnd("build"),t()}),10)}else t()}))}},{key:"setNeedsRebuild",value:function(){for(var e=this._reprList,t=0,n=e.length;t<n;++t)e[t].needsRebuild=!0}},{key:"rebuildSelectionGeometry",value:function(){var e=1<<this._selectionBit;YE.clearTree(this._selectionGeometry);for(var t=0,n=this._reprList.length;t<n;++t){var r=this._reprList[t].buildSelectionGeometry(e);if(r){this._selectionGeometry.add(r);for(var i=0;i<r.children.length;i++){var o=r.children[i];if(this._editor&&this._editor._componentTransforms){var a=this._editor._componentTransforms[o._component._index];a&&(o.position.copy(a.position),o.quaternion.copy(a.quaternion))}}YE.applySelectionMaterial(r)}}}},{key:"_buildSelectorFromSortedLists",value:function(e,t,n){var r=this._complex;function i(e){for(var t=[],n=0,r=NaN,i=NaN,o=0,a=e.length;o<a;++o){var s=e[o];s===i+1?i=s:(Number.isNaN(r)||(t[n++]=new AT.Range(r,i)),r=i=s)}return Number.isNaN(r)||(t[n]=new AT.Range(r,i)),t}var o=null;if(n.length===r._chains.length)o=AT.all();else{var a;if(n.length>0&&(a=AT.chain(n),o=o?AT.or(o,a):a),Object.keys(t).length>0)for(var s in t)t.hasOwnProperty(s)&&(a=AT.and(AT.chain(s),AT.residx(i(t[s]))),o=o?AT.or(o,a):a);e.length>0&&(a=AT.serial(i(e)),o=o?AT.or(o,a):a),o||(o=AT.none())}return o}},{key:"buildSelectorFromMask",value:function(e){var t=this._complex,n=[],r={},i=[];return t.forEachChain((function(t){t._mask&e&&n.push(t._name)})),t.forEachResidue((function(t){if(t._mask&e&&!(t._chain._mask&e)){var n=t._chain._name;n in r?r[n].push(t._index):r[n]=[t._index]}})),t.forEachAtom((function(t){t.mask&e&&!(t.residue._mask&e)&&i.push(t.serial)})),this._buildSelectorFromSortedLists(i,r,n)}},{key:"forSelectedResidues",value:function(e){var t=1<<this._selectionBit;this._complex.forEachResidue((function(n){n._mask&t&&e(n)}))}},{key:"beginComponentEdit",value:function(){if(this._editor)return null;var e=new kT.ComponentEditor(this);return e.begin()?(this._editor=e,e):null}},{key:"beginFragmentEdit",value:function(){if(this._editor)return null;var e=new kT.FragmentEditor(this);return e.begin()?(this._editor=e,e):null}},{key:"finalizeEdit",value:function(){this._editor=null}},{key:"setMaterialValues",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=0,i=this._reprList.length;r<i;++r){var o=this._reprList[r];o.material.setValues(e),t&&o.geo.traverse((function(t){t instanceof fp&&(t.material.setValues(e),void 0!==n&&n(t),t.material.needsUpdate=!0)}))}}},{key:"setUberOptions",value:function(e){for(var t=0,n=this._reprList.length;t<n;++t){this._reprList[t].material.setUberOptions(e)}}},{key:"within",value:function(e,t){var n=this._complex.getVoxelWorld();if(null===n)return!1;var r=1<<this._selectionBit;return this._complex.markAtoms(e,r),n&&n.forEachAtomWithinDistFromMasked(this._complex,r,Number(t),(function(e){e.mask|=r})),this._selectionCount=this._complex.countAtomsByMask(r),this._complex.updateStructuresMask(),this.buildSelectorFromMask(r)}}]),n}(JE);MT.NUM_REPRESENTATION_BITS=30;function TT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var PT=mp.merge([{volumeDim:{type:"v3",value:new lh(512,512,512)},tileTex:{type:"t",value:null},tileTexSize:{type:"v2",value:new $f(512,512)},tileStride:{type:"v2",value:new $f(512,512)},boxAngles:{type:"v3",value:new lh(1,1,1)},delta:{type:"v3",value:new lh(0,0,0)},_isoLevel0:{type:"v2",value:new lh(.5,.75,1)},_flipV:{type:"f",value:0},_BFLeft:{type:"t",value:null},_BFRight:{type:"t",value:null},_FFLeft:{type:"t",value:null},_FFRight:{type:"t",value:null},_WFFLeft:{type:"t",value:null},_WFFRight:{type:"t",value:null}}]);function RT(e,t){var n=mp.clone(t);for(var r in e)n.hasOwnProperty(r)&&(n[r].value=e[r]);return n}function IT(e,t){return{uniforms:RT(e,{}),vertexShader:"varying vec3 pos;\r\n\r\nvoid main() {\r\n  // we're assuming local position is in [-0.5, 0.5]\r\n  // we need to offset it to be represented in RGB\r\n  pos = position.xyz + 0.5;\r\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n}",fragmentShader:"varying vec3 pos;\r\n\r\nvoid main() {\r\n  gl_FragColor = vec4(pos, 0.5);\r\n}",transparent:!1,depthTest:!1,depthWrite:!1,side:t}}var LT=function(e){P_(n,e);var t=TT(n);function n(e){O_(this,n);var r=IT(e,1);return t.call(this,r)}return C_(n)}(gp),NT=C_((function e(t,n,r,i){O_(this,e),this.uniforms=RT(t,n),this.vertexShader=r,this.fragmentShader=i,this.transparent=!1,this.depthTest=!1,this.depthWrite=!1,this.side=0})),jT={BackFacePosMaterial:LT,BackFacePosMaterialFarPlane:function(e){P_(n,e);var t=TT(n);function n(e){O_(this,n);var r=mp.merge([{aspectRatio:{type:"f",value:0},farZ:{type:"f",value:0},tanHalfFOV:{type:"f",value:0},matWorld2Volume:{type:"4fv",value:new Fh}}]),i=new NT(e,r,"varying vec4 volPos;\r\nuniform float aspectRatio;\r\nuniform float farZ;\r\nuniform float tanHalfFOV;\r\nuniform mat4  matWorld2Volume;\r\n\r\nvoid main() {\r\n  // rescale plane to fill in the whole far plane area seen from camera\r\n  vec3 pos = position.xyz;\r\n  pos.x = pos.x * tanHalfFOV * farZ * aspectRatio;\r\n  pos.y = pos.y * tanHalfFOV * farZ;\r\n  // common transformation\r\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\r\n  // calc pos in volume CS\r\n  volPos = matWorld2Volume * modelMatrix * vec4(pos, 1.0);\r\n  // we're assuming local position is in [-0.5, 0.5]\r\n  // we need to offset it to be represented in RGB\r\n  volPos = volPos + 0.5;\r\n  volPos.w = 0.5;\r\n}\r\n","varying vec4 volPos;\r\n\r\nvoid main() {\r\n  gl_FragColor = volPos;\r\n}");return t.call(this,i)}return C_(n)}(gp),FrontFacePosMaterial:function(e){P_(n,e);var t=TT(n);function n(e){O_(this,n);var r=IT(e,0);return t.call(this,r)}return C_(n)}(gp),VolumeMaterial:function(e){P_(n,e);var t=TT(n);function n(e){var r;O_(this,n);var i=new NT(e,PT,"varying vec4 screenSpacePos;\r\n\r\nvoid main() {\r\n  screenSpacePos = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n  gl_Position = screenSpacePos;\r\n}","uniform mat4 projectionMatrix;\r\n\r\n// 3D volume texture\r\nuniform vec3 volumeDim;    // volume dimensions, pixels\r\nuniform sampler2D tileTex; // tiled texture containing all Z-slices of a 3D data\r\nuniform vec2 tileTexSize;  // size of tiled texture, pixels\r\nuniform vec2 tileStride;   // UV stride between slices in tile tex, pixels\r\n\r\nuniform vec3 boxAngles;//value of angles({x: alpha, y:beta, z:gamma}) types 1 - if angle is obtuse, 0 - if acute\r\nuniform vec3 delta; //Projection box delta's from non-orthogonal origin axes; {x: XY, y : XZ, z: YZ}\r\n\r\nuniform vec3 _isoLevel0;\r\nuniform float _flipV;\r\nuniform sampler2D _BFLeft;\r\nuniform sampler2D _BFRight;\r\nuniform sampler2D _FFLeft;\r\nuniform sampler2D _FFRight;\r\nuniform sampler2D _WFFLeft;\r\nuniform sampler2D _WFFRight;\r\n\r\nvarying vec4 screenSpacePos;\r\n\r\n#define NO_COLOR vec4(0., 0., 0., 0.)\r\n\r\nvec4 sample3DTexture(vec3 texCoord) {\r\n  // a pair of Z slices is determined by nearest slice border\r\n  float zSliceBorder = floor(texCoord.z * volumeDim.z + 0.5);\r\n  float zSliceNumber1 = max(zSliceBorder - 1.0, 0.0);\r\n  float zSliceNumber2 = min(zSliceBorder, volumeDim.z - 1.0);\r\n\r\n  float rowTiles = floor(tileTexSize.x / tileStride.x);\r\n\r\n  // calculate coords in tile texture for both slices\r\n  vec2 tileOffset = vec2(mod(zSliceNumber1, rowTiles), floor(zSliceNumber1 / rowTiles));\r\n  vec2 texCoordSlice1 = (texCoord.xy * volumeDim.xy + tileOffset * tileStride) / tileTexSize.xy;\r\n  tileOffset = vec2(mod(zSliceNumber2, rowTiles), floor(zSliceNumber2 / rowTiles));\r\n  vec2 texCoordSlice2 = (texCoord.xy * volumeDim.xy + tileOffset * tileStride) / tileTexSize.xy;\r\n\r\n  // bilinear filtering\r\n  vec4 colorSlice1 = texture2D(tileTex, texCoordSlice1);\r\n  vec4 colorSlice2 = texture2D(tileTex, texCoordSlice2);\r\n  float weightSlice2 = texCoord.z * volumeDim.z - (zSliceNumber1 + 0.5);\r\n  return mix(colorSlice1, colorSlice2, weightSlice2);\r\n}\r\n\r\nvec4 sample3DTextureInclined(vec3 boxCoord) { // delta:{ x: XY, y : XZ, z: YZ }\r\n  vec3 textCoord = boxCoord;\r\n  vec2 currDelta = mix(boxCoord.zz, vec2(1., 1.) - boxCoord.zz, boxAngles.yx) * delta.yz;\r\n\r\n  textCoord.y = (boxCoord.y  - currDelta.y) / (1. - delta.z);\r\n  if (textCoord.y < 0.0 || textCoord.y > 1.0)\r\n    return NO_COLOR;\r\n\r\n  currDelta.x += mix(textCoord.y, 1.0 - textCoord.y, boxAngles.z) * delta.x;\r\n\r\n  textCoord.x = (boxCoord.x - currDelta.x) / (1. - delta.x - delta.y);\r\n  if (textCoord.x < 0.0 || textCoord.x > 1.0)\r\n    return NO_COLOR;\r\n\r\n  return sample3DTexture(textCoord);\r\n}\r\n\r\nfloat CalcColor(vec3 iter, vec3 dir) {\r\n  float d = 1. / 128.;\r\n  vec3 dx = vec3(d, 0.0, 0.0);\r\n  vec3 dy = vec3(0.0, d, 0.0);\r\n  vec3 dz = vec3(0.0, 0.0, d);\r\n\r\n  // #Opt: coordInc.x:(iter + dx).x > 1. ? 0.: sample3DTextureInclined(iter + dx).x,\r\n  vec3 coordInc = mix(\r\n    vec3(\r\n      sample3DTextureInclined(iter + dx).x,\r\n      sample3DTextureInclined(iter + dy).x,\r\n      sample3DTextureInclined(iter + dz).x\r\n    ),\r\n    vec3(0. ,0. , 0.),\r\n    vec3(floor((iter + dx).x), floor((iter + dy).y), floor((iter + dz).z))\r\n  );\r\n\r\n  // #Opt: coordDec.x:(iter - dx).x < 0. ? 0.: sample3DTextureInclined(iter - dx).x,\r\n  vec3 coordDec = mix(\r\n    vec3(0. ,0. , 0.),\r\n    vec3(\r\n      sample3DTextureInclined(iter - dx).x,\r\n      sample3DTextureInclined(iter - dy).x,\r\n      sample3DTextureInclined(iter - dz).x\r\n    ),\r\n    vec3(ceil((iter - dx).x), ceil((iter - dy).y), ceil((iter - dz).z))\r\n  );\r\n\r\n  vec3 N = normalize(coordInc - coordDec);\r\n  float dif = max(0.0, dot(N, dir));\r\n  return dif;\r\n}\r\n\r\nvec3 AccuracyIso(vec3 left, vec3 right, float volLeft, float threshold) {\r\n  for (int i = 0; i < 5; i++) {\r\n    vec3 iterator = 0.5 * (left + right);\r\n    float vol = sample3DTextureInclined(iterator).r;\r\n    if ((volLeft - threshold) * (vol - threshold) < 0.)\r\n      right = iterator;\r\n    else\r\n      left = iterator;\r\n  }\r\n  return 0.5 * (left + right);\r\n}\r\n\r\nvec3 CorrectIso(vec3 left, vec3 right, float tr) {\r\n  for (int j = 0; j < 5; j++) {\r\n    vec3 iterator = 0.5 * (left + right);\r\n    float vol = sample3DTextureInclined(iterator).r;\r\n    if (vol < tr)\r\n      right = iterator;\r\n    else\r\n      left = iterator;\r\n  }\r\n  return 0.5 * (left + right);\r\n}\r\n\r\nvec4 GetIso1(vec3 start, vec3 back, float molDist, vec3 dir, float tr, int count) {\r\n  float vol, stepSize = (float(count) + 2.) / float(STEPS_COUNT);\r\n  vec3 step = stepSize * dir, iterator = start, left, right;\r\n  vec4 acc = NO_COLOR;\r\n\r\n  for (int i = 0; i < STEPS_COUNT; i++) {\r\n    iterator = iterator + step;\r\n    vol = sample3DTextureInclined(iterator).r;\r\n    if (length(iterator - back) <= stepSize || (vol > tr))\r\n      break;\r\n  }\r\n\r\n  if (vol > tr)\r\n    acc = vec4(CorrectIso(iterator, iterator - step, tr).xyz, 1.);\r\n\r\n  return acc;\r\n}\r\n\r\nfloat easeOut(float x0, float x1, float x) {\r\n  float t = clamp((x - x0) / (x1 - x0), 0.0, 1.0);\r\n  return 1.0 - (1.0 - t) * (1.0 - t);\r\n}\r\n\r\nfloat easeIn(float x0, float x1, float x) {\r\n  float t = clamp((x - x0) / (x1 - x0), 0.0, 1.0);\r\n  return t * t;\r\n}\r\n\r\nvec3 GetColSimple(float vol) {\r\n  float t = easeOut(_isoLevel0.x, _isoLevel0.y, vol);\r\n  float s = easeIn(_isoLevel0.y, _isoLevel0.z, vol);\r\n  return vec3(0.5, 0.6, 0.7) * (1.0 - t) + 2.0 * vec3(s, 0, 0);\r\n}\r\n\r\nvec4 VolRender(vec3 start, vec3 back, float molDist, vec3 dir) {\r\n  vec4 acc = NO_COLOR, iso;\r\n  vec3 iterator = start, sumColor = vec3(0., 0., 0.);\r\n  float stepSize, alpha, sumAlpha = 0.0, vol, curStepSize, molD;\r\n  vec3 step, col, colOld, right;\r\n  float tr0 = _isoLevel0.x;\r\n  float dif, r, kd, finish;\r\n  int count = 0, stopMol = 0;\r\n\r\n  for (int k = 0; k < 3; k++) {\r\n    stepSize = (float(k) + 2.) / float(STEPS_COUNT);\r\n    kd = 140. * tr0 * stepSize;\r\n    r = 1. - kd;\r\n    step = stepSize * dir;\r\n    iso = GetIso1(iterator, back, molDist, dir, tr0, k);\r\n    if (iso.a < 0.1 || length(iso.xyz - start) > molDist)\r\n      break;\r\n    iterator = iso.xyz;\r\n    dif = 1.;// CalcColor(iterator, dir);\r\n    colOld = GetColSimple(tr0);\r\n    curStepSize = stepSize;\r\n    for (int i = 0; i < STEPS_COUNT; i++) {\r\n      iterator = iterator + step;\r\n      molD = length(iterator - start);\r\n      vol = sample3DTextureInclined(iterator).r;\r\n      finish = distance(iterator, back) - stepSize;\r\n      if (finish < 0.0 || vol < tr0 || (sumAlpha > 0.97) || molD > molDist)\r\n        break;\r\n      alpha = (1. - r);\r\n      col = GetColSimple(vol);\r\n      vol = sample3DTextureInclined(iterator - 0.5 * step).r;\r\n      vec3 colMid = GetColSimple(vol);\r\n      sumColor += (1. - sumAlpha) * (colOld + 4.* colMid + col) * alpha / 6.;\r\n      sumAlpha += (1. - sumAlpha) * alpha;// *(1. - 1.0*dif*dif);\r\n      colOld = col;\r\n    } // for i\r\n\r\n    if (finish < 0.0 || sumAlpha > 0.97)\r\n      break;\r\n\r\n    if (molD > molDist) {\r\n      curStepSize = stepSize - (molD - molDist);\r\n      right = iterator - (molD - molDist) * dir;\r\n      vol = sample3DTextureInclined(right).r;\r\n    } else {\r\n      vec3 left = iterator - step;\r\n      right = CorrectIso(left, iterator, tr0);\r\n      curStepSize = distance(left, right);\r\n      vol = tr0;\r\n    }\r\n\r\n    alpha = (1. - r) * curStepSize / stepSize;\r\n    dif = 1.;// CalcColor(right, dir);\r\n    col = GetColSimple(vol);\r\n    vol = sample3DTextureInclined(iterator - 0.5 * curStepSize / stepSize * step).r;\r\n    vec3 colMid = GetColSimple(vol);\r\n    sumColor += (1. - sumAlpha) * (colOld + 4. * colMid + col) * alpha / 6.;\r\n    sumAlpha += (1. - sumAlpha) * alpha;// *(1. - 1.0*dif*dif);\r\n\r\n    if (molD > molDist)\r\n      break;\r\n  } // for k\r\n  acc.rgb = 1. * sumColor / sumAlpha;\r\n  acc.a = sumAlpha;\r\n  return acc;\r\n}\r\n\r\nvec4 VolRender1(vec3 start, vec3 back, float molDist, vec3 dir) {\r\n  float stepSize = 1.0 / float(STEPS_COUNT);\r\n  float len = length(back - start);\r\n  vec3 step = stepSize * dir;\r\n  vec3 iterator = start;\r\n  float acc = 0.0;\r\n\r\n  for (int i = 0; i < STEPS_COUNT; i++) {\r\n    if (float(i) * stepSize > len)\r\n      break;\r\n    iterator = iterator + step;\r\n    if (sample3DTextureInclined(iterator).r > _isoLevel0.x)\r\n      acc += 10. * sample3DTextureInclined(iterator).r / float(STEPS_COUNT);\r\n  }\r\n\r\n  return vec4(1.,1.,1., acc);\r\n}\r\n\r\nvec4 IsoRender(vec3 start, vec3 back, float molDist, vec3 dir) {\r\n  vec4 tst = GetIso1(start, back, 2., dir, _isoLevel0.x, 0);\r\n  vec4 col = NO_COLOR;\r\n\r\n  if (length(tst.xyz - start) < molDist && tst.a > 0.1) {\r\n    float dif =  CalcColor(tst.xyz, dir);\r\n    dif = 0.9 * dif * dif;\r\n    col = vec4(dif, dif, dif, 1);\r\n  }\r\n  return col;\r\n}\r\n\r\nvec4 VolRender2(vec3 start, vec3 back, float molDist, vec3 dir) {\r\n  return sample3DTexture(start);\r\n}\r\n\r\nvoid main() {\r\n  vec3 tc = screenSpacePos.xyz / screenSpacePos.w * 0.5 + 0.5;\r\n\r\n  if (_flipV > 0.0) {\r\n    tc.y = 1.0 - tc.y;\r\n  }\r\n\r\n  vec3 start;\r\n  vec3 back;\r\n  vec3 molBack;\r\n  if (projectionMatrix[0][2] < 0.0) {\r\n    start = texture2D(_FFLeft, tc.xy).xyz;\r\n    back = texture2D(_BFLeft, tc.xy).xyz;\r\n    molBack = texture2D(_WFFLeft, tc.xy).xyz;\r\n  } else {\r\n    start = texture2D(_FFRight, tc.xy).xyz;\r\n    back = texture2D(_BFRight, tc.xy).xyz;\r\n    molBack = texture2D(_WFFRight, tc.xy).xyz;\r\n  }\r\n\r\n  vec3 dir = normalize(back - start);\r\n\r\n  float molDist = 2.0;\r\n  if (length(molBack) > 0.001) {\r\n    molDist = distance(start, molBack);\r\n  }\r\n\r\n  #ifdef ISO_MODE\r\n    gl_FragColor = IsoRender(start, back, molDist, dir);\r\n  #else\r\n    gl_FragColor = VolRender(start, back, molDist, dir);\r\n  #endif\r\n}\r\n");return i.transparent=!0,i.depthTest=!0,(r=t.call(this,i)).updateDefines(),r}return C_(n,[{key:"updateDefines",value:function(){this.defines={ISO_MODE:_w.now.modes.VD.isoMode,STEPS_COUNT:100*_w.now.modes.VD.polyComplexity[_w.now.resolution]},this.needsUpdate=!0}}]),n}(gp)};function DT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var BT=function(e){P_(n,e);var t=DT(n);function n(){var e;O_(this,n);var r=new qd;Uw(M_(e=t.call(this,r)),"volumeInfo",{}),e.clipPlane=new Ap;var i=new lh(.5,.5,.5);return e.size=i,e.cullFlag=[!0,!0,!0,!0,!0,!0,!0,!0,!1,!1,!1,!1,!1,!1],e.faces=[{indices:[],norm:new lh(0,0,-1)},{indices:[],norm:new lh(0,0,1)},{indices:[],norm:new lh(0,-1,0)},{indices:[],norm:new lh(0,1,0)},{indices:[],norm:new lh(-1,0,0)},{indices:[],norm:new lh(1,0,0)},{indices:[],norm:new lh(0,0,0)}],e.vertices=[new lh(-i.x,-i.y,-i.z),new lh(-i.x,i.y,-i.z),new lh(i.x,-i.y,-i.z),new lh(i.x,i.y,-i.z),new lh(-i.x,-i.y,i.z),new lh(-i.x,i.y,i.z),new lh(i.x,-i.y,i.z),new lh(i.x,i.y,i.z),new lh(0,0,0),new lh(0,0,0),new lh(0,0,0),new lh(0,0,0),new lh(0,0,0),new lh(0,0,0)],r.setAttribute("position",new Nd(new Float32Array(3*e.vertices.length),3)),e.name="VolumeMesh",e}return C_(n,[{key:"_updateVertices",value:function(){var e,t=n._corners,r=n._edges,i=n._edgeIntersections,o=this.clipPlane.normal,a=this.clipPlane.constant,s=this.vertices,u=this.size,l=[0,0,0,0,0,0,0,0],c=[1,1,1,1,1,1,1,1,1,1,1,1],f=new lh,h=null;function d(){if(0===o.x)return 0;var e=-(o.dot(f)+a)/o.x;return-u.x<=e&&e<=u.x?(h.set(e,f.y,f.z),e===u.x?2:e===-u.x?-2:1):0}function p(){if(0===o.y)return 0;var e=-(o.dot(f)+a)/o.y;return-u.y<=e&&e<=u.y?(h.set(f.x,e,f.z),e===u.y?2:e===-u.y?-2:1):0}function v(){if(0===o.z)return 0;var e=-(o.dot(f)+a)/o.z;return-u.z<=e&&e<=u.z?(h.set(f.x,f.y,e),e===u.z?2:e===-u.z?-2:1):0}for(var m=0;m<12;++m){var g=r[m];h=i[m],f.set(g[2],g[3],g[4]),f.multiply(u);var y=0;0===g[2]&&(y=d()),0===g[3]&&(y=p()),0===g[4]&&(y=v()),-2===y?l[g[0]]=1:2===y?l[g[1]]=1:0===y&&(c[m]=0)}var b={indices:[],norm:o.clone().negate()},x=8;for(e=0;e<8;++e)1===l[e]&&(s[x].set(t[e][0],t[e][1],t[e][2]).multiply(u),b.indices.push(x++),c[t[e][3]]=0,c[t[e][4]]=0,c[t[e][5]]=0);for(e=0;e<12;++e)1===c[e]&&(s[x].copy(i[e]),b.indices.push(x++));this.faces[6]=b;var _=new lh,w=new lh;for(this.clipPlane.coplanarPoint(w),e=0;e<s.length;++e)this.cullFlag[e]=!1,e<8?(_.subVectors(s[e],w),this.cullFlag[e]=o.dot(_)>=0):e<8+b.indices.length&&(this.cullFlag[e]=!0);var S=this.geometry.getAttribute("position"),E=0;for(e=0;e<s.length;++e)S.array[E++]=s[e].x,S.array[E++]=s[e].y,S.array[E++]=s[e].z;S.needsUpdate=!0}},{key:"_collectVertices",value:function(e,t){var n,r=this.vertices;for(e.indices=[],n=0;n<r.length;++n)this.cullFlag[n]&&t(r[n])&&e.indices.push(n)}},{key:"_sortIndices",value:function(e,t){var n,r,i=this.vertices,o=[],a=new lh;for(n=1;n<e.indices.length;++n)a.subVectors(i[e.indices[n]],i[e.indices[0]]),a.normalize(),a.cross(t),a.negate(),o[n]=e.norm.dot(a);for(n=1;n<e.indices.length-1;++n)for(r=n+1;r<e.indices.length;++r)if(o[r]<o[n]){var s=o[n];o[n]=o[r],o[r]=s,s=e.indices[n],e.indices[n]=e.indices[r],e.indices[r]=s}}},{key:"_updateIndices",value:function(){var e,t,n,r=this.vertices,i=this.size;this._collectVertices(this.faces[0],(function(e){return e.z===-i.z})),this._collectVertices(this.faces[1],(function(e){return e.z===i.z})),this._collectVertices(this.faces[2],(function(e){return e.y===-i.y})),this._collectVertices(this.faces[3],(function(e){return e.y===i.y})),this._collectVertices(this.faces[4],(function(e){return e.x===-i.x})),this._collectVertices(this.faces[5],(function(e){return e.x===i.x}));var o=new lh,a=new lh,s=new lh;for(t=0;t<this.faces.length;++t)if(0!==(n=this.faces[t]).indices.length){for(o.set(0,0,0),e=0;e<n.indices.length;++e)o.add(r[n.indices[e]]);o.multiplyScalar(1/n.indices.length),a.subVectors(r[n.indices[0]],o),a.normalize();var u=[];for(e=0;e<n.indices.length;++e)s.subVectors(r[n.indices[e]],o),u[e]=s.dot(a);for(e=1;e<n.indices.length;++e)if(u[e]<u[0]){var l=u[0];u[0]=u[e],u[e]=l,l=j_(n.indices,1)[0],n.indices[0]=n.indices[e],n.indices[e]=l}this._sortIndices(n,a)}var c=0;for(t=0;t<this.faces.length;++t)(n=this.faces[t]).indices.length>=3&&(c+=3*(n.indices.length-2));var f=0,h=new Uint16Array(c);for(t=0;t<this.faces.length;++t)for(n=this.faces[t],e=0;e<n.indices.length-2;++e)h[f]=n.indices[0],h[f+1]=n.indices[e+1],h[f+2]=n.indices[e+2],f+=3;this.geometry.setIndex(new Nd(h,1))}},{key:"setDataSource",value:function(e){var t=new jT.VolumeMaterial,n=e.getDimensions(),r=e.getTiledTextureStride(),i=e.buildTiledTexture(),o=e.getBox();t.uniforms.volumeDim.value.set(n[0],n[1],n[2]),t.uniforms.tileTex.value=i,t.uniforms.tileTexSize.value.set(i.image.width,i.image.height),t.uniforms.tileStride.value.set(r[0],r[1]),Object.assign(this.volumeInfo,e.getVolumeInfo());var a=this.volumeInfo;t.uniforms.delta.value.copy(a.delta),t.uniforms.boxAngles.value.set(a.obtuseAngle[0],a.obtuseAngle[1],a.obtuseAngle[2]),this.material=t,o.getSize(this.scale),o.getCenter(this.position)}},{key:"_updateIsoLevel",value:function(){var e=_w.now.modes.VD,t=e.kSigma,n=e.kSigmaMed,r=e.kSigmaMax,i=this.volumeInfo,o=i.dmean-i.dmin,a=i.dmax-i.dmin,s=function(e){return(o+e*i.sd)/a};this.material.uniforms._isoLevel0.value.set(s(t),s(n),s(r))}},{key:"rebuild",value:function(e){var t=n._nearClipPlaneOffset,r=n._pos,i=n._norm,o=n._norm4D,a=n._matrixWorldToLocal,s=n._clipPlane;this._updateIsoLevel(),e.getWorldDirection(i),e.getWorldPosition(r),r.addScaledVector(i,e.near+t),a.copy(this.matrixWorld).invert(),r.applyMatrix4(a),o.set(i.x,i.y,i.z,0),o.applyMatrix4(a),i.copy(o),i.normalize(),s.setFromNormalAndCoplanarPoint(i,r),this.clipPlane.equals(s)||(this.clipPlane=s.clone(),this._updateVertices(),this._updateIndices())}}]),n}(fp);Uw(BT,"_corners",[[-1,-1,-1,0,4,8],[1,-1,-1,0,5,9],[1,1,-1,1,5,10],[-1,1,-1,1,4,11],[-1,-1,1,2,6,8],[1,-1,1,2,7,9],[1,1,1,3,7,10],[-1,1,1,3,6,11]]),Uw(BT,"_edges",[[0,1,0,-1,-1],[2,3,0,1,-1],[4,5,0,-1,1],[6,7,0,1,1],[0,3,-1,0,-1],[1,2,1,0,-1],[4,7,-1,0,1],[5,6,1,0,1],[0,4,-1,-1,0],[1,5,1,-1,0],[2,6,-1,1,0],[3,7,1,1,0]]),Uw(BT,"_edgeIntersections",function(){for(var e=[],t=0;t<12;++t)e.push(new lh);return e}()),Uw(BT,"_nearClipPlaneOffset",.2),Uw(BT,"_pos",new lh),Uw(BT,"_norm",new lh),Uw(BT,"_norm4D",new ih),Uw(BT,"_matrixWorldToLocal",new Fh),Uw(BT,"_clipPlane",new Ap);var zT=function(){function e(t,n){O_(this,e);var r=n.delta,i=n.obtuseAngle,o=new lh;t.getSize(o),o.multiplyScalar(.5);for(var a=this._getBaseVertices(r,i),s=new qd,u=[],l=0;l<4;l++)u.push(a[l].clone().multiply(o)),u.push(a[(l+1)%4].clone().multiply(o));for(var c=new lh(2*o.x*(1-r.x-r.y),0,0),f=0;f<8;f++)u.push(u[f].clone().add(c));for(var h=0;h<4;h++)u.push(u[2*h].clone()),u.push(u[2*h+8].clone());var d=new lh;t.getCenter(d),u.forEach((function(e){return e.add(d)}));var p=function(e){for(var t=e.length,n=new Float32Array(3*t),r=0;r<t;++r){var i=3*r,o=e[r];n[i]=o.x,n[i+1]=o.y,n[i+2]=o.z}return n}(u);s.setAttribute("position",new Nd(p,3)),this._lines=new hy(s,new ry({color:16777215})),this._lines.layers.set(YE.LAYERS.VOLUME)}return C_(e,[{key:"_getBaseVertices",value:function(t,n){var r=e._projectionTable,i=function(e,i){var o=t[r[e][0]];return(-.5*(i-1)+i*n[r[e][1]])*o};return[new lh(2*(i("XZ",1)+i("XY",1))-1,2*i("YZ",1)-1,-1),new lh(2*(i("XZ",-1)+i("XY",1))-1,2*i("YZ",-1)-1,1),new lh(2*(i("XZ",-1)+i("XY",-1))-1,1-2*i("YZ",1),1),new lh(2*(i("XZ",1)+i("XY",-1))-1,1-2*i("YZ",-1),-1)]}},{key:"getMesh",value:function(){return this._lines}}]),e}();Uw(zT,"_projectionTable",{XY:["x",2],XZ:["y",1],YZ:["z",0]});var FT=function(){function e(t,n,r){O_(this,e);var i=this._initPlaneGeo(n,r),o=new jT.BackFacePosMaterialFarPlane;this._plane=new pA.Mesh(i,o),this._plane.frustumCulled=!1,this._plane.doubleSided=!0;var a=new Fh;this._plane._onBeforeRender=function(e,n,r,i,o,s){var u=this.material;if(t&&u){var l=new ih(0,0,-(r.far-.1),1);l.applyMatrix4(r.matrixWorld),this.matrix.identity(),this.matrix.makeTranslation(l.x,l.y,l.z),this.matrixWorld.copy(this.matrix),this.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,this.matrixWorld),this.normalMatrix.getNormalMatrix(this.modelViewMatrix);var c=t.matrixWorld;a.copy(c).invert(),u.uniforms.aspectRatio.value=r.aspect,u.uniforms.farZ.value=r.far,u.uniforms.tanHalfFOV.value=Math.tan(.5*Xf.DEG2RAD*r.fov),u.uniforms.matWorld2Volume.value=a}},this._plane.layers.set(YE.LAYERS.VOLUME_BFPLANE)}return C_(e,[{key:"_initPlaneGeo",value:function(e,t){var n=new qd;e=e||1,t=t||1;var r=new Float32Array([-.5*e,.5*t,0,.5*e,.5*t,0,-.5*e,-.5*t,0,.5*e,-.5*t,0]);return n.setAttribute("position",new Nd(r,3)),n.setIndex([0,2,1,2,3,1]),n}},{key:"getMesh",value:function(){return this._plane}}]),e}();function VT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var UT=function(e){P_(n,e);var t=VT(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,e,r))._mesh=new BT,i._mesh.setDataSource(r),i.add(i._mesh),i._frame=new zT(i.getBoundaries().boundingBox,i._mesh.volumeInfo),i.add(i._frame.getMesh()),i.showFrame(_w.now.modes.VD.frame),i._farPlane=new FT(i._mesh,2,2),i.add(i._farPlane.getMesh()),i}return C_(n,[{key:"getBoundaries",value:function(){var e=this._dataSource.getBox(),t=new Ph;return e.getBoundingSphere(t),{boundingBox:e,boundingSphere:t}}},{key:"getMesh",value:function(){return this._mesh}},{key:"showFrame",value:function(e){this._frame.getMesh().material.visible=e}}]),n}(JE);function ZT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var HT=function(e){P_(n,e);var t=ZT(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return O_(this,n),t.call(this,e,["types"])}return C_(n,[{key:"find",value:function(e){var t=[];if(e.type)t=this._dict.types[e.type.toLowerCase()]||[];else if(e.source)return this._list.filter((function(t){return t.canProbablyLoad&&t.canProbablyLoad(e.source)}));return QE(t)}}]),n}(tk);function GT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var WT=function(e){P_(n,e);var t=GT(n);function n(e,r){var i;return O_(this,n),(i=t.call(this))._source=e,i._options=r||{},i._abort=!1,i._agent=null,i}return C_(n,[{key:"load",value:function(){return Promise.reject(new Error("Loading from this source is not implemented"))}},{key:"abort",value:function(){this._abort=!0,this._agent&&this._agent.abort()}}],[{key:"extractName",value:function(e){}}]),n}(J_);function qT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}nk(WT.prototype);var KT=function(e){P_(n,e);var t=qT(n);function n(e,r){var i;return O_(this,n),r=(i=t.call(this,e,r))._options,i._binary=!0===r.binary,i}return C_(n,[{key:"load",value:function(){var e=this;return new Promise((function(t,n){if(e._abort)throw new Error("Loading aborted");var r=e._source,i=e._agent=new FileReader;i.addEventListener("load",(function(){t(i.result)})),i.addEventListener("error",(function(){n(i.error)})),i.addEventListener("abort",(function(){n(new Error("Loading aborted"))})),i.addEventListener("progress",(function(t){e.dispatchEvent(t)})),e._binary?i.readAsArrayBuffer(r):i.readAsText(r)}))}}],[{key:"canProbablyLoad",value:function(e){return File&&e instanceof File||Blob&&e instanceof Blob}},{key:"extractName",value:function(e){return e&&e.name}}]),n}(WT);function YT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}KT.types=["file","blob"];var XT=/^(https?|ftp):\/\//i,$T=function(e){P_(n,e);var t=YT(n);function n(e,r){var i;return O_(this,n),r=(i=t.call(this,e,r))._options,i._binary=!0===r.binary,i}return C_(n,[{key:"load",value:function(){var e=this;return new Promise((function(t,n){if(e._abort)throw new Error("Loading aborted");var r=e._source,i=e._agent=new XMLHttpRequest;i.addEventListener("load",(function(){200===i.status?t(i.response):n(new Error("HTTP ".concat(i.status," while fetching ").concat(r)))})),i.addEventListener("error",(function(){n(new Error("HTTP request failed"))})),i.addEventListener("abort",(function(){n(new Error("Loading aborted"))})),i.addEventListener("progress",(function(t){e.dispatchEvent(t)})),i.open("GET",r),e._binary?i.responseType="arraybuffer":i.responseType="text",i.send()}))}}],[{key:"canProbablyLoad",value:function(e){return(0,R.isString)(e)&&XT.test(e)}},{key:"extractName",value:function(e){if(e){var t=(e.indexOf("?")+1||e.lastIndexOf("#")+1||e.length+1)-1;return e.slice(e.lastIndexOf("/",t)+1,t)}}}]),n}(WT);function JT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}$T.types=["url"];var QT=function(e){P_(n,e);var t=JT(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"load",value:function(){var e=this;return new Promise((function(t){if(e._abort)throw new Error("Loading aborted");t(e._source)}))}}],[{key:"canProbablyLoad",value:function(e){return!1}}]),n}(WT);QT.types=["immediate"];var eP=new HT([KT,$T,QT]);function tP(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var nP=function(e){P_(n,e);var t=tP(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return O_(this,n),t.call(this,e,["formats","extensions"])}return C_(n,[{key:"find",value:function(e){var t=[];return e.format?t=this._dict.formats[e.format.toLowerCase()]||[]:e.ext&&(t=this._dict.extensions[e.ext.toLowerCase()]||[]),0===t.length&&!e.format&&e.data?this._list.filter((function(t){return t.canProbablyParse&&t.canProbablyParse(e.data)})):QE(t)}}]),n}(tk),rP=function(){function e(t,n){O_(this,e),this._data=t,this._options=n||{},this._abort=!1}return C_(e,[{key:"parseSync",value:function(){throw new Error("Parsing this type of data is not implemented")}},{key:"parse",value:function(){var e=this;return new Promise((function(t,n){setTimeout((function(){try{return e._abort?n(new Error("Parsing aborted")):t(e.parseSync())}catch(r){return n(r)}}))}))}},{key:"getModel",value:function(){return this.model._parseHeader(this._data),this.model}},{key:"abort",value:function(){this._abort=!0}}]),e}();nk(rP.prototype);var iP=function(){function e(){O_(this,e),this.matrices=[],this._matrix=null,this._matrixIndex=-1}return C_(e,[{key:"parse",value:function(e){var t=this._matrix;if("  SMTRY"===e.readString(12,18)){var n=e.readCharCode(19)-49,r=e.readString(20,80).trim().split(/\s+/),i=parseInt(r[0],10);null!==this._matrix&&i===this._matrixIndex||(this._matrixIndex=i,this._matrix=t=new Fh,this.matrices[this.matrices.length]=t);var o=t.elements;o[n]=parseFloat(r[1]),o[n+4]=parseFloat(r[2]),o[n+8]=parseFloat(r[3]),o[n+12]=parseFloat(r[4])}}}]),e}();iP.prototype.id=290;var oP=DE.Assembly,aP=function(){function e(t){O_(this,e),this._complex=t,this.assemblies=[],this._assembly=null,this._matrix=null,this._matrixIndex=-1}return C_(e,[{key:"parse",value:function(e){var t=this._assembly,n=this._matrix;if(t&&"  BIOMT"===e.readString(12,18)){var r=e.readCharCode(19)-49,i=e.readString(20,80).trim().split(/\s+/),o=parseInt(i[0],10);null!==this._matrix&&o===this._matrixIndex||(this._matrixIndex=o,this._matrix=n=new Fh,t.addMatrix(n));var a=n.elements;a[r]=parseFloat(i[1]),a[r+4]=parseFloat(i[2]),a[r+8]=parseFloat(i[3]),a[r+12]=parseFloat(i[4])}else if(t&&"CHAINS:"===e.readString(35,41))for(var s=e.readString(42,80).split(","),u=0,l=s.length;u<l;++u){var c=s[u].trim();c.length>0&&t.addChain(c)}else"BIOMOLECULE:"===e.readString(12,23)&&(this._matrix=null,this._matrixIndex=-1,this._assembly=t=new oP(this._complex),this.assemblies.push(t))}}]),e}();aP.prototype.id=350;var sP=function(){function e(t){O_(this,e),this._data=t,this._start=0,this._nextCR=-1,this._nextLF=-1,this._next=-1,this._end=t.length,this.next()}return C_(e,[{key:"readLine",value:function(){return this._data.slice(this._start,this._next)}},{key:"readChar",value:function(e){return(e=this._start+e-1)<this._next?this._data[e]:" "}},{key:"readCharCode",value:function(e){return(e=this._start+e-1)<this._next?this._data.charCodeAt(e):32}},{key:"readString",value:function(e,t){var n=this._start+e-1,r=this._start+t;return this._data.slice(n,r<this._next?r:this._next)}},{key:"readInt",value:function(e,t){return parseInt(this.readString(e,t),10)}},{key:"readFloat",value:function(e,t){return parseFloat(this.readString(e,t))}},{key:"end",value:function(){return this._start>=this._end}},{key:"next",value:function(){var e=this._next+1;this._start=e<this._end?e:this._end,this._start>this._nextCR&&(this._nextCR=(this._data.indexOf("\r",this._start)+1||this._end+1)-1),this._start>this._nextLF&&(this._nextLF=(this._data.indexOf("\n",this._start)+1||this._end+1)-1),this._next=this._nextCR+1<this._nextLF?this._nextCR:this._nextLF}}]),e}();function uP(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var lP=DE.Complex,cP=DE.Element,fP=DE.Helix,hP=DE.Sheet,dP=DE.Strand,pP=DE.Bond,vP=DE.Molecule;var mP=/^(HEADER\s|COMPND\s|REMARK\s|ATOM {2}|HETATM|MODEL )/i,gP={290:iP,350:aP},yP=function(e){P_(n,e);var t=uP(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,e,r))._complex=null,i._chain=null,i._residue=null,i._sheet=null,i._serialAtomMap=null,i._modelId=1,i._compaundFound=!1,i._biomoleculeFound=!1,i._allowedChainsIDs=null,i._lastMolId=-1,i._remarks={},i._remark=null,i._molecules=[],i._molecule=null,i._compndCurrToken="",i._options.fileType="pdb",i}return C_(n,[{key:"_finalize",value:function(){this._fixBondsArray(),this._fixChains();var e=this._remarks[290];this._complex.symmetry=(0,R.isUndefined)(e)?[]:e.matrices;var t=this._remarks[350];this._complex.units=this._complex.units.concat((0,R.isUndefined)(t)?[]:t.assemblies),this._finalizeMolecules(),this._complex.finalize({needAutoBonding:!0,detectAromaticLoops:this.settings.now.aromatic,enableEditing:this.settings.now.editing,serialAtomMap:this._serialAtomMap})}},{key:"_finalizeMolecules",value:function(){var e,t={},n=this._complex._chains;for(e=0;e<n.length;++e){var r=n[e];t[r._name]=r}for(e=0;e<this._molecules.length;e++){for(var i=this._molecules[e],o=[],a=0;a<i._chains.length;a++){var s=t[i._chains[a]];o=o.concat(s._residues.slice())}var u=new vP(this._complex,i._name,e+1);u.residues=o,this._complex._molecules[e]=u}}},{key:"_fixChains",value:function(){for(var e={},t=this._complex,n=0;n<t._chains.length;n++){var r=t._chains[n];e[r._name.charCodeAt(0)]=r}}},{key:"_fixBondsArray",value:function(){for(var e=this._serialAtomMap={},t=this._complex,n=t._atoms,r=0,i=n.length;r<i;++r){var o=n[r];e[o.serial]=o}for(var a=t._bonds,s=this.logger,u=0,l=a.length;u<l;++u){var c=a[u];c._right<c._left&&s.debug("_fixBondsArray: Logic error."),c._left=e[c._left]||null,c._right=e[c._right]||null}}},{key:"_parseATOM",value:function(e){if(1===this._modelId){var t=72===e.readCharCode(1),n=t?e.readInt(7,11):e.readInt(6,11),r=e.readString(13,16),i=e.readChar(17),o=e.readString(18,20).trim(),a=e.readChar(22),s=e.readInt(23,26),u=e.readChar(27),l=e.readFloat(31,38),c=e.readFloat(39,46),f=e.readFloat(47,54),h=e.readFloat(55,60),d=e.readFloat(61,66),p=e.readString(77,78).trim()||function(e){var t=4===e.trim().length;return e.slice(0,t?1:2).trim()}(r),v=e.readInt(79,80)||0;if(!this.settings.now.nowater||"HOH"!==o&&"WAT"!==o){r=r.trim();var m=cP.getByName(p),g=cP.Role[r],y=this._chain;y&&y.getName()===a||(this._chain=y=this._complex.getChain(a)||this._complex.addChain(a),this._residue=null);var b=this._residue;b&&b.getSequence()===s&&b.getICode()===u||(this._residue=b=y.addResidue(o,s,u));var x=new lh(l,c,f);b.addAtom(r,m,x,g,t,n,i,h,d,v)}}}},{key:"_parseENDMDL",value:function(){this._modelId+=1}},{key:"_parseCONECT",value:function(e){var t=e.readInt(7,11),n=e.readInt(12,16),r=e.readInt(17,21),i=e.readInt(22,26),o=e.readInt(27,31),a=this._complex;n&&n>t&&a.addBond(t,n,0,pP.BondType.UNKNOWN,!0),r&&r>t&&a.addBond(t,r,0,pP.BondType.UNKNOWN,!0),i&&i>t&&a.addBond(t,i,0,pP.BondType.UNKNOWN,!0),o&&o>t&&a.addBond(t,o,0,pP.BondType.UNKNOWN,!0)}},{key:"_parseCOMPND",value:function(e){var t=e.readString(11,80),n=t.indexOf(":");if(this._compndCurrToken=n>0?t.substring(0,n).trim():this._compndCurrToken,"MOL_ID"===this._compndCurrToken)this._molecule={_index:"",_chains:[]},this._molecule._index=parseInt(t.substring(n+1,t.indexOf(";")),10),this._molecules.push(this._molecule);else if("MOLECULE"===this._compndCurrToken&&null!=this._molecule)this._molecule._name=t.substring(n+1,t.indexOf(";")).trim();else if("CHAIN"===this._compndCurrToken&&null!=this._molecule){var r=t.substring(n+1,80).trim(),i=r[r.length-1];";"!==i&&","!==i||(r=r.slice(0,-1));var o=(r=r.replace(/\s+/g,"")).split(",");this._molecule._chains=this._molecule._chains.concat(o)}}},{key:"_parseREMARK",value:function(e){var t=e.readInt(8,10),n=this._remarks[t];if((0,R.isUndefined)(n)){var r=gP[t];"function"===typeof r&&(this._remarks[t]=n=new r(this._complex))}(0,R.isUndefined)(n)||n.parse(e)}},{key:"_parseHELIX",value:function(e){var t=this;this._parseSTRUCTURE(e,[20,22,32,34],(function(e){t._complex.addHelix(e),t._complex.structures.push(e)}))}},{key:"_parseSHEET",value:function(e){var t=this;this._parseSTRUCTURE(e,[22,23,33,34],(function(e){t._complex.addSheet(e)}))}},{key:"_parseSTRUCTURE",value:function(e,t,n){var r=e.readInt(8,10),i=e.readString(12,14).trim(),o=e.readString(41,70).trim(),a=e.readInt(72,76),s=e.readInt(39,40),u=e.readInt(15,16),l=e.readInt(42,45),c=e.readInt(57,60),f=e.readString(t[0],t[2]+1).charCodeAt(0),h=e.readString(t[2],t[2]+1).charCodeAt(0),d=e.readInt(t[1],t[1]+3),p=e.readString(t[1]+4,t[1]+4),v=0;p.length>0&&(v=p.charCodeAt(0));var m,g=e.readInt(t[3],t[3]+3),y=0;(p=e.readString(t[3]+4,t[3]+4)).length>0&&(y=p.charCodeAt(0));var b=this._sheet;if(83===e.readCharCode(1)){null!==b&&b.getName()!==i&&(b=null,this._sheet=null),null===b?(this._sheet=m=new hP(i,u),n(m)):m=b;var x=new dP(m,this._complex.getUnifiedSerial(f,d,v),this._complex.getUnifiedSerial(h,g,y),s,l,c);m.addStrand(x),this._complex.structures.push(x)}else n(m=new fP(s,this._complex.getUnifiedSerial(f,d,v),this._complex.getUnifiedSerial(h,g,y),r,i,o,a))}},{key:"_parseHEADER",value:function(e){var t=this._complex.metadata;t.classification=e.readString(11,50).trim(),t.date=e.readString(51,59).trim();var n=e.readString(63,66).trim();t.id=n,n&&(this._complex.name=n),t.format="pdb"}},{key:"_parseTITLE",value:function(e){var t=this._complex.metadata;t.title=t.title||[];var n=e.readInt(9,10)||1;t.title[n-1]=e.readString(11,80).trim()}},{key:"parseSync",value:function(){for(var e=new sP(this._data),t=this._complex=new lP;!e.end();){var r=e.readString(1,6),i=n.tagParsers[r];"function"===typeof i&&i.call(this,e),e.next()}if(this._finalize(),this._serialAtomMap=null,this._sheet=null,this._residue=null,this._chain=null,this._complex=null,0===t.getAtomCount())throw new Error("The data does not contain valid atoms");return t}}],[{key:"canProbablyParse",value:function(e){return(0,R.isString)(e)&&mP.test(e)}}]),n}(rP);function bP(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(yP,"tagParsers",{HEADER:yP.prototype._parseHEADER,"TITLE ":yP.prototype._parseTITLE,"ATOM  ":yP.prototype._parseATOM,HETATM:yP.prototype._parseATOM,ENDMDL:yP.prototype._parseENDMDL,CONECT:yP.prototype._parseCONECT,COMPND:yP.prototype._parseCOMPND,REMARK:yP.prototype._parseREMARK,"HELIX ":yP.prototype._parseHELIX,"SHEET ":yP.prototype._parseSHEET,"ATOM 1":yP.prototype._parseATOM,"ATOM 2":yP.prototype._parseATOM,"ATOM 3":yP.prototype._parseATOM,"ATOM 4":yP.prototype._parseATOM,"ATOM 5":yP.prototype._parseATOM,"ATOM 6":yP.prototype._parseATOM,"ATOM 7":yP.prototype._parseATOM,"ATOM 8":yP.prototype._parseATOM,"ATOM 9":yP.prototype._parseATOM}),yP.formats=["pdb"],yP.extensions=[".pdb",".ent"];var xP=DE.Complex,_P=DE.Element,wP=DE.SGroup,SP=DE.Bond,EP={A:0,S:1,D:2,T:3},kP=/\s*<\?xml\b[^?>]*\?>\s*<(?:cml|molecule)\b/i,OP=function(e){P_(n,e);var t=bP(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,e,r))._complex=null,i._residue=null,i._serialAtomMap=null,i._modelId=1,i._lastMolId=-1,i._readOnlyOneMolecule=!1,i._options.fileType="cml",i}return C_(n,[{key:"_rebuidBondIndexes",value:function(e,t){for(var n=e.length,r=0;r<n;r++)for(var i=e[r].id,o=t.length,a=0;a<o;a++){var s=t[a].atomRefs2.split(" ");s[0]===i&&(t[a].start=r),s[1]===i&&(t[a].end=r)}}},{key:"_createSGroup",value:function(e,t){var n=new wP(e.id,e.fieldData,new lh(parseFloat(e.x),parseFloat(e.y),0),e.atomRefs,e);"Relative"===e.placement&&(n._center=new lh(0,0,0)),"MDLBG_FRAGMENT_CHARGE"===e.fieldName&&(n._charge=parseInt(e.fieldData,10)||0),"MDLBG_FRAGMENT_COEFFICIENT"===e.fieldName&&(n._repeat=parseInt(e.fieldData,10)||1),t.push(n)}},{key:"_extractSGroup",value:function(e,t){if(Array.isArray(t)||(t=[]),e)if(Array.isArray(e))for(var n=e.length,r=0;r<n;r++)e[r].molecule&&(t=t.concat(this._extractSGroup(e[r].molecule))),this._createSGroup(e[r],t);else e.molecule&&e.molecule&&(t=t.concat(this._extractSGroup(e.molecule))),this._createSGroup(e,t);return t}},{key:"_extractSGroups",value:function(e,t){var n,r,i=this._extractSGroup(e),o=t.length;for(n=0;n<o;n++){var a=t[n].id;for(r=0;r<i.length;r++){i[r]._atoms.split(" ")[0]===a&&(t[n].sgroupRef||(t[n].sgroupRef=[]),t[n].sgroupRef.push(i[r]))}}var s,u={},l=null,c=1e8,f=new lh(c,c,c),h=new lh(-c,-c,-c);function d(e){(l=u[e])&&i[r]._atoms.push(l.a)}function p(e){(l=u[e])&&(f.set(Math.min(f.x,l.x),Math.min(f.y,l.y),Math.min(f.z,l.z)),h.set(Math.max(h.x,l.x),Math.max(h.y,l.y),Math.max(h.z,l.z)),d(e))}for(n=0;n<t.length;n++)u[t[n].id]={},u[t[n].id].x=t[n].x2,t[n].x3&&(u[t[n].id].x=t[n].x3),u[t[n].id].x=parseFloat(u[t[n].id].x),u[t[n].id].y=t[n].y2,t[n].y3&&(u[t[n].id].y=t[n].y3),u[t[n].id].y=parseFloat(u[t[n].id].y),u[t[n].id].z="0.0",t[n].z3&&(u[t[n].id].z=t[n].z3),u[t[n].id].z=parseFloat(u[t[n].id].z),u[t[n].id].a=t[n];for(r=0;r<i.length;r++)null!==i[r]._center?(f.set(c,c,c),h.set(-c,-c,-c),s=i[r]._atoms.split(" "),i[r]._atoms=[],s.forEach(p),i[r]._center.addVectors(f,h),i[r]._center.multiplyScalar(.5)):(s=i[r]._atoms.split(" "),i[r]._atoms=[],s.forEach(d));u=null}},{key:"_traverseData",value:function(e){var t={};return e.childNodes.length&&function e(t,n){if("#text"!==t.nodeName||""!==t.nodeValue.trim()){var r={};r.xmlNode=t;var i,o,a,s=n[t.nodeName];if(s?(i=s,"[object Array]"!==Object.prototype.toString.apply(i)?n[t.nodeName]=[s,r]:n[t.nodeName].push(r)):n[t.nodeName]=r,t.attributes)for(o=t.attributes.length,a=0;a<o;a++){var u=t.attributes[a];r[u.nodeName]=u.nodeValue}for(o=t.childNodes.length,a=0;a<o;a++)e(t.childNodes[a],r)}}(e.childNodes[0],t),t}},{key:"_findSuitableMolecule",value:function(e,t){for(var n in e)if("xmlNode"!==n)if("molecule"===n){if(e.molecule&&(e.molecule.atomArray&&e.molecule.atomArray.atom&&t.push(e),Array.isArray(e.molecule)))for(var r=0;r<e.molecule.length;r++)e.molecule[r].atomArray&&e.molecule[r].atomArray.atom&&t.push({molecule:e.molecule[r]})}else e[n]&&null!==e[n]&&"object"===k_(e[n])&&this._findSuitableMolecule(e[n],t)}},{key:"_selectComponents",value:function(e){var t,n=(new DOMParser).parseFromString(e,"application/xml"),r=this._traverseData(n),i=this;t=r.cml?r.cml:r;var o=[],a=[];return this._findSuitableMolecule(t,a),this._readOnlyOneMolecule&&a.length>1&&a.splice(1,a.length-1),a.forEach((function(e){var t=function(e){var t,r=[];if(e.molecule&&e.molecule.atomArray&&e.molecule.atomArray.atom)Array.isArray(e.molecule.atomArray.atom)?r=e.molecule.atomArray.atom:r.push(e.molecule.atomArray.atom);else if(!e.molecule){return{atomLabels:null,labelsCount:1}}e.molecule.molecule&&i._extractSGroups(e.molecule.molecule,r);for(var o=r.length,a=0;a<o;a++)(t=r[a]).edges=[];var s,u=[];e.molecule.bondArray&&e.molecule.bondArray.bond&&(Array.isArray(e.molecule.bondArray.bond)?u=e.molecule.bondArray.bond:u.push(e.molecule.bondArray.bond)),o=u.length,i._rebuidBondIndexes(r,u);for(var l=0;l<o;l++)if(s=u[l],(t=r[s.start])&&(t.edges.push(s.end),(t=r[s.end])&&(t.edges.push(s.start),1))){var c=s.xmlNode.getAttribute("order"),f=parseInt(c,10);if(u[l].order=0,u[l].type=SP.BondType.UNKNOWN,f>1)u[l].order=f;else{var h=EP[c];void 0!==h&&(u[l].order=h,"A"===c&&(u[l].type=SP.BondType.AROMATIC))}}o=r.length;for(var d=0;d<o;d++)(t=r[d]).edges.sort();var p=i._breadWidthSearch(r,0),v={};return v.atoms=r,v.bonds=u,v.labels=p.atomLabels,v.count=Math.min(1,p.labelsCount),v.curr=-1,v.originalCML=n,v}(e);t.atoms.length>0&&o.push(t)})),o}},{key:"_packLabel",value:function(e,t){return(t<<16)+e}},{key:"_unpackLabel",value:function(e){return{molId:e>>>16,compId:65535&e}}},{key:"_breadWidthSearch",value:function(e,t){var n,r=new Array(e.length);for(n=0;n<r.length;n++)r[n]=this._packLabel(0,t);for(var i=[],o=0,a=e.length;a>0;){o++;var s=-1;for(n=0;n<r.length;n++)if(0===this._unpackLabel(r[n]).compId){s=n;break}if(s<0)break;for(i.push(e[s]),r[s]=this._packLabel(o,t),a--;i.length>0;){var u=i.shift();if(u)for(var l=0;l<u.edges.length;l++)r[u.edges[l]]!==o&&(i.push(e[u.edges[l]]),r[u.edges[l]]=o,a--)}}var c={};return c.atomLabels=r,c.labelsCount=o,c}},{key:"_parseBond",value:function(e,t,n,r){if(e>=0){var i=[Math.min(e,t),Math.max(e,t)];this._complex.addBond(i[0],i[1],n,r,!0)}}},{key:"_fixBondsArray",value:function(){for(var e=this._serialAtomMap={},t=this._complex,n=t._atoms,r=0,i=n.length;r<i;++r){var o=n[r];e[o.serial]=o}for(var a=t._bonds,s=this.logger,u=0,l=a.length;u<l;++u){var c=a[u];c._right<c._left&&s.debug("_fixBondsArray: Logic error."),c._left=e[c._left]||null,c._right=e[c._right]||null}}},{key:"_parseSet",value:function(e){var t,n,r=this._complex=new xP,i=e,o=i.curr,a=i.atoms,s=i.labels,u=null,l=a.length;var c,f={},h=[];for(t=0;t<l;t++)h.push(t);for(h.sort((function(e,t){return s[e]-s[t]})),t=0;t<l;t++){var d=s[h[t]];if(this._unpackLabel(d).molId===this._unpackLabel(o).molId){var p=(u=a[h[t]]).elementType;if(u.sgroupRef)for(var v=u.sgroupRef.length,m=0;m<v;++m)r._sgroups.push(u.sgroupRef[m]);if(u.x3||u.x2){var g=this._unpackLabel(d).compId,y=" ",b=g,x=g.toString();1===x.length&&(x="0".concat(x));var _="N".concat(x),w=f[" "];w&&w.getName()===y||(f[" "]=w=this._complex.getChain(y)||this._complex.addChain(y),this._residue=null);var S=this._residue;S&&S.getSequence()===b&&" "===S.getICode()||(this._residue=S=w.addResidue(_,b," "));var E=null;u.x3?E=new lh(parseFloat(u.x3),parseFloat(u.y3),parseFloat(u.z3)):u.x2&&(E=new lh(parseFloat(u.x2),parseFloat(u.y2),0));var k=_P.ByName[u.elementType.toUpperCase()];k||((k=JSON.parse(JSON.stringify(_P.ByName[Object.keys(_P.ByName)[Object.keys(_P.ByName).length-1]]))).number+=1,k.name=u.elementType.toUpperCase(),k.fullName="Unknown",_P.ByName[u.elementType.toUpperCase()]=k);var O=parseInt(u.id.replace(/[^0-9]/,""),10),A=S.addAtom(p,k,E,_P.Role.SG,!0,O," ",1,0,0);u.hydrogenCount&&(A.hydrogenCount=parseInt(u.hydrogenCount,10)),u.mrvValence&&(A.valence=parseInt(u.mrvValence,10)),(c=A).xmlNodeRef=u,u.x2&&(u.x3=u.x2,delete u.x2),u.y2&&(u.y3=u.y2,delete u.y2),u.z3||(u.z3="0.0"),u.complexAtom=c}}}for(f=null,t=0;t<i.bonds.length;t++){var C=i.bonds[t];if(this._unpackLabel(s[C.start]).molId===this._unpackLabel(o).molId&&this._unpackLabel(s[C.end]).molId===this._unpackLabel(o).molId){if(!(u=a[C.start])||!a[C.end])continue;this._parseBond(parseInt(u.id.replace(/[^0-9]/,""),10),parseInt(a[C.end].id.replace(/[^0-9]/,""),10),C.order,C.type)}}for(t=0;t<this._complex.getSGroupCount();t++){var M=this._complex.getSGroups()[t];for(n=0;n<M._atoms.length;n++)M._atoms[n]=M._atoms[n].complexAtom}for(t=0;t<l;t++)this._unpackLabel(s[t]).molId===this._unpackLabel(o).molId&&((u=a[t]).complexAtom=null,delete u.complexAtom);return this._complex.originalCML=i.originalCML,this._fixBondsArray(),r.finalize({needAutoBonding:!1,detectAromaticLoops:this.settings.now.aromatic,enableEditing:this.settings.now.editing,serialAtomMap:this._serialAtomMap}),this._serialAtomMap=null,this._complex=null,r}},{key:"parseSync",value:function(){var e=[],t=this;this._selectComponents(this._data).forEach((function(n){n.curr=2,0===n.count&&(n.count=1);for(var r=0;r<n.count;r++)n.curr=r+1,e.push(t._parseSet(n,!1))}));var n=0;if(e.forEach((function(e){n+=e.getAtomCount()})),n<=0)throw new Error("The data does not contain valid atoms");if(e.length>1){var r=new xP;return r.joinComplexes(e),r.originalCML=e[0].originalCML,r}return 1===e.length?e[0]:new xP}}],[{key:"canProbablyParse",value:function(e){return(0,R.isString)(e)&&kP.test(e)}}]),n}(rP);OP.formats=["cml"],OP.extensions=[".cml"];var AP={exports:{}};!function(e,t){!function(e){function t(e,t,n){for(var r=(e.byteLength,0),i=n.length;i>r;r++){var o=n.charCodeAt(r);if(128>o)e.setUint8(t++,o>>>0&127|0);else if(2048>o)e.setUint8(t++,o>>>6&31|192),e.setUint8(t++,o>>>0&63|128);else if(65536>o)e.setUint8(t++,o>>>12&15|224),e.setUint8(t++,o>>>6&63|128),e.setUint8(t++,o>>>0&63|128);else{if(!(1114112>o))throw new Error("bad codepoint "+o);e.setUint8(t++,o>>>18&7|240),e.setUint8(t++,o>>>12&63|128),e.setUint8(t++,o>>>6&63|128),e.setUint8(t++,o>>>0&63|128)}}}function n(e){for(var t=0,n=0,r=e.length;r>n;n++){var i=e.charCodeAt(n);if(128>i)t+=1;else if(2048>i)t+=2;else if(65536>i)t+=3;else{if(!(1114112>i))throw new Error("bad codepoint "+i);t+=4}}return t}function r(e,i,o){var a=k_(e);if("string"===a){if(32>(s=n(e)))return i.setUint8(o,160|s),t(i,o+1,e),1+s;if(256>s)return i.setUint8(o,217),i.setUint8(o+1,s),t(i,o+2,e),2+s;if(65536>s)return i.setUint8(o,218),i.setUint16(o+1,s),t(i,o+3,e),3+s;if(4294967296>s)return i.setUint8(o,219),i.setUint32(o+1,s),t(i,o+5,e),5+s}if(e instanceof Uint8Array){var s=e.byteLength,u=new Uint8Array(i.buffer);if(256>s)return i.setUint8(o,196),i.setUint8(o+1,s),u.set(e,o+2),2+s;if(65536>s)return i.setUint8(o,197),i.setUint16(o+1,s),u.set(e,o+3),3+s;if(4294967296>s)return i.setUint8(o,198),i.setUint32(o+1,s),u.set(e,o+5),5+s}if("number"===a){if(!isFinite(e))throw new Error("Number not finite: "+e);if(Math.floor(e)!==e)return i.setUint8(o,203),i.setFloat64(o+1,e),9;if(e>=0){if(128>e)return i.setUint8(o,e),1;if(256>e)return i.setUint8(o,204),i.setUint8(o+1,e),2;if(65536>e)return i.setUint8(o,205),i.setUint16(o+1,e),3;if(4294967296>e)return i.setUint8(o,206),i.setUint32(o+1,e),5;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return i.setInt8(o,e),1;if(e>=-128)return i.setUint8(o,208),i.setInt8(o+1,e),2;if(e>=-32768)return i.setUint8(o,209),i.setInt16(o+1,e),3;if(e>=-2147483648)return i.setUint8(o,210),i.setInt32(o+1,e),5;throw new Error("Number too small -0x"+(-e).toString(16).substr(1))}if(null===e)return i.setUint8(o,192),1;if("boolean"===a)return i.setUint8(o,e?195:194),1;if("object"===a){var l=0,c=Array.isArray(e);if(c)s=e.length;else{var f=Object.keys(e);s=f.length}if(16>s?(i.setUint8(o,s|(c?144:128)),l=1):65536>s?(i.setUint8(o,c?220:222),i.setUint16(o+1,s),l=3):4294967296>s&&(i.setUint8(o,c?221:223),i.setUint32(o+1,s),l=5),c)for(var h=0;s>h;h++)l+=r(e[h],i,o+l);else for(h=0;s>h;h++){var d=f[h];l+=r(d,i,o+l),l+=r(e[d],i,o+l)}return l}throw new Error("Unknown type "+a)}function i(e){var t=k_(e);if("string"===t){if(32>(r=n(e)))return 1+r;if(256>r)return 2+r;if(65536>r)return 3+r;if(4294967296>r)return 5+r}if(e instanceof Uint8Array){if(256>(r=e.byteLength))return 2+r;if(65536>r)return 3+r;if(4294967296>r)return 5+r}if("number"===t){if(Math.floor(e)!==e)return 9;if(e>=0){if(128>e)return 1;if(256>e)return 2;if(65536>e)return 3;if(4294967296>e)return 5;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;throw new Error("Number too small -0x"+e.toString(16).substr(1))}if("boolean"===t||null===e)return 1;if("object"===t){var r,o=0;if(Array.isArray(e)){r=e.length;for(var a=0;r>a;a++)o+=i(e[a])}else{var s=Object.keys(e);for(r=s.length,a=0;r>a;a++){var u=s[a];o+=i(u)+i(e[u])}}if(16>r)return 1+o;if(65536>r)return 3+o;if(4294967296>r)return 5+o;throw new Error("Array or object too long 0x"+r.toString(16))}throw new Error("Unknown type "+t)}function o(e){var t=new ArrayBuffer(i(e));return r(e,new DataView(t),0),new Uint8Array(t)}function a(e,t,n){return t?new e(t.buffer,t.byteOffset,t.byteLength/(n||1)):void 0}function s(e){return a(DataView,e)}function u(e){return a(Uint8Array,e)}function l(e){return a(Int8Array,e)}function c(e){return a(Int32Array,e,4)}function f(e){return a(Float32Array,e,4)}function h(e,t){var n=e.length/2;t||(t=new Int16Array(n));for(var r=0,i=0;n>r;++r,i+=2)t[r]=e[i]<<8^e[i+1]<<0;return t}function d(e,t){var n=e.length;t||(t=new Uint8Array(2*n));for(var r=s(t),i=0;n>i;++i)r.setInt16(2*i,e[i]);return u(t)}function p(e,t){var n=e.length/4;t||(t=new Int32Array(n));for(var r=0,i=0;n>r;++r,i+=4)t[r]=e[i]<<24^e[i+1]<<16^e[i+2]<<8^e[i+3]<<0;return t}function v(e,t){var n=e.length;t||(t=new Uint8Array(4*n));for(var r=s(t),i=0;n>i;++i)r.setInt32(4*i,e[i]);return u(t)}function m(e,t){var n=e.length;t||(t=new Float32Array(n/4));for(var r=s(t),i=s(e),o=0,a=0,u=n/4;u>o;++o,a+=4)r.setFloat32(a,i.getFloat32(a),!0);return t}function g(e,t,n){var r=e.length,i=1/t;n||(n=new Float32Array(r));for(var o=0;r>o;++o)n[o]=e[o]*i;return n}function y(e,t,n){var r=e.length;n||(n=new Int32Array(r));for(var i=0;r>i;++i)n[i]=Math.round(e[i]*t);return n}function b(e,t){var n,r;if(!t){var i=0;for(n=0,r=e.length;r>n;n+=2)i+=e[n+1];t=new e.constructor(i)}var o=0;for(n=0,r=e.length;r>n;n+=2)for(var a=e[n],s=e[n+1],u=0;s>u;++u)t[o]=a,++o;return t}function x(e){if(0===e.length)return new Int32Array;var t,n,r=2;for(t=1,n=e.length;n>t;++t)e[t-1]!==e[t]&&(r+=2);var i=new Int32Array(r),o=0,a=1;for(t=1,n=e.length;n>t;++t)e[t-1]!==e[t]?(i[o]=e[t-1],i[o+1]=a,a=1,o+=2):++a;return i[o]=e[e.length-1],i[o+1]=a,i}function _(e,t){var n=e.length;t||(t=new e.constructor(n)),n&&(t[0]=e[0]);for(var r=1;n>r;++r)t[r]=e[r]+t[r-1];return t}function w(e,t){var n=e.length;t||(t=new e.constructor(n)),t[0]=e[0];for(var r=1;n>r;++r)t[r]=e[r]-e[r-1];return t}function S(e,t){var n,r,i=e instanceof Int8Array?127:32767,o=-i-1,a=e.length;if(!t){var s=0;for(n=0;a>n;++n)e[n]<i&&e[n]>o&&++s;t=new Int32Array(s)}for(n=0,r=0;a>n;){for(var u=0;e[n]===i||e[n]===o;)u+=e[n],++n;u+=e[n],++n,t[r]=u,++r}return t}function E(e,t){var n,r=t?127:32767,i=-r-1,o=e.length,a=0;for(n=0;o>n;++n)0===(l=e[n])?++a:a+=l===r||l===i?2:l>0?Math.ceil(l/r):Math.ceil(l/i);var s=t?new Int8Array(a):new Int16Array(a),u=0;for(n=0;o>n;++n){var l;if((l=e[n])>=0)for(;l>=r;)s[u]=r,++u,l-=r;else for(;i>=l;)s[u]=i,++u,l-=i;s[u]=l,++u}return s}function k(e,t){return _(b(e),t)}function O(e){return x(w(e))}function A(e,t,n){return g(b(e,c(n)),t,n)}function C(e,t){return x(y(e,t))}function M(e,t,n){return g(_(e,c(n)),t,n)}function T(e,t,n){return w(y(e,t),n)}function P(e,t,n){return g(S(e,c(n)),t,n)}function R(e,t,n){var r=S(e,c(n));return M(r,t,f(r))}function I(e,t,n){return E(T(e,t),n)}function L(e){var t=s(e),n=t.getInt32(0),r=t.getInt32(4),i=e.subarray(8,12);return[n,e=e.subarray(12),r,i]}function N(e,t,n,r){var i=new ArrayBuffer(12+r.byteLength),o=new Uint8Array(i),a=new DataView(i);return a.setInt32(0,e),a.setInt32(4,t),n&&o.set(n,8),o.set(r,12),o}function j(e){return N(2,e.length,void 0,u(e))}function D(e){return N(4,e.length,void 0,v(e))}function B(e,t){return N(5,e.length/t,v([t]),u(e))}function z(e){return N(6,e.length,void 0,v(x(e)))}function F(e){return N(8,e.length,void 0,v(O(e)))}function V(e,t){return N(9,e.length,v([t]),v(C(e,t)))}function U(e,t){return N(10,e.length,v([t]),d(I(e,t)))}function Z(e){var t={};return ee.forEach((function(n){void 0!==e[n]&&(t[n]=e[n])})),e.bondAtomList&&(t.bondAtomList=D(e.bondAtomList)),e.bondOrderList&&(t.bondOrderList=j(e.bondOrderList)),t.xCoordList=U(e.xCoordList,1e3),t.yCoordList=U(e.yCoordList,1e3),t.zCoordList=U(e.zCoordList,1e3),e.bFactorList&&(t.bFactorList=U(e.bFactorList,100)),e.atomIdList&&(t.atomIdList=F(e.atomIdList)),e.altLocList&&(t.altLocList=z(e.altLocList)),e.occupancyList&&(t.occupancyList=V(e.occupancyList,100)),t.groupIdList=F(e.groupIdList),t.groupTypeList=D(e.groupTypeList),e.secStructList&&(t.secStructList=j(e.secStructList)),e.insCodeList&&(t.insCodeList=z(e.insCodeList)),e.sequenceIndexList&&(t.sequenceIndexList=F(e.sequenceIndexList)),t.chainIdList=B(e.chainIdList,4),e.chainNameList&&(t.chainNameList=B(e.chainNameList,4)),t}function H(e){function t(e){for(var t={},n=0;e>n;n++)t[o()]=o();return t}function n(t){var n=e.subarray(a,a+t);return a+=t,n}function r(t){var n=e.subarray(a,a+t);a+=t;var r=65535;if(t>r){for(var i=[],o=0;o<n.length;o+=r)i.push(String.fromCharCode.apply(null,n.subarray(o,o+r)));return i.join("")}return String.fromCharCode.apply(null,n)}function i(e){for(var t=new Array(e),n=0;e>n;n++)t[n]=o();return t}function o(){var o,u,l=e[a];if(0===(128&l))return a++,l;if(128===(240&l))return a++,t(u=15&l);if(144===(240&l))return a++,i(u=15&l);if(160===(224&l))return a++,r(u=31&l);if(224===(224&l))return o=s.getInt8(a),a++,o;switch(l){case 192:return a++,null;case 194:return a++,!1;case 195:return a++,!0;case 196:return u=s.getUint8(a+1),a+=2,n(u);case 197:return u=s.getUint16(a+1),a+=3,n(u);case 198:return u=s.getUint32(a+1),a+=5,n(u);case 202:return o=s.getFloat32(a+1),a+=5,o;case 203:return o=s.getFloat64(a+1),a+=9,o;case 204:return o=e[a+1],a+=2,o;case 205:return o=s.getUint16(a+1),a+=3,o;case 206:return o=s.getUint32(a+1),a+=5,o;case 208:return o=s.getInt8(a+1),a+=2,o;case 209:return o=s.getInt16(a+1),a+=3,o;case 210:return o=s.getInt32(a+1),a+=5,o;case 217:return u=s.getUint8(a+1),a+=2,r(u);case 218:return u=s.getUint16(a+1),a+=3,r(u);case 219:return u=s.getUint32(a+1),a+=5,r(u);case 220:return u=s.getUint16(a+1),a+=3,i(u);case 221:return u=s.getUint32(a+1),a+=5,i(u);case 222:return u=s.getUint16(a+1),a+=3,t(u);case 223:return u=s.getUint32(a+1),a+=5,t(u)}throw new Error("Unknown type 0x"+l.toString(16))}var a=0,s=new DataView(e.buffer);return o()}function G(e,t,n,r){switch(e){case 1:return m(t);case 2:return l(t);case 3:return h(t);case 4:return p(t);case 5:return u(t);case 6:return b(p(t),new Uint8Array(n));case 7:return b(p(t));case 8:return k(p(t));case 9:return A(p(t),p(r)[0]);case 10:return R(h(t),p(r)[0]);case 11:return g(h(t),p(r)[0]);case 12:return P(h(t),p(r)[0]);case 13:return P(l(t),p(r)[0]);case 14:return S(h(t));case 15:return S(l(t))}}function W(e,t){var n=(t=t||{}).ignoreFields,r={};return ne.forEach((function(t){var i=!!n&&-1!==n.indexOf(t),o=e[t];i||void 0===o||(o instanceof Uint8Array?r[t]=G.apply(null,L(o)):r[t]=o)})),r}function q(e){return String.fromCharCode.apply(null,e).replace(/\0/g,"")}function K(e,t,n){var r,i,o,a,s,u,l=(n=n||{}).firstModelOnly,c=t.onModel,f=t.onChain,h=t.onGroup,d=t.onAtom,p=t.onBond,v=0,m=0,g=0,y=0,b=0,x=-1,_=e.chainNameList,w=e.secStructList,S=e.insCodeList,E=e.sequenceIndexList,k=e.atomIdList,O=e.bFactorList,A=e.altLocList,C=e.occupancyList,M=e.bondAtomList,T=e.bondOrderList;for(r=0,i=e.chainsPerModel.length;i>r&&!(l&&v>0);++r){var P=e.chainsPerModel[v];for(c&&c({chainCount:P,modelIndex:v}),o=0;P>o;++o){var R=e.groupsPerChain[m];if(f){var I=q(e.chainIdList.subarray(4*m,4*m+4)),L=null;_&&(L=q(_.subarray(4*m,4*m+4))),f({groupCount:R,chainIndex:m,modelIndex:v,chainId:I,chainName:L})}for(a=0;R>a;++a){var N=e.groupList[e.groupTypeList[g]],j=N.atomNameList.length;if(h){var D=null;w&&(D=w[g]);var B=null;e.insCodeList&&(B=String.fromCharCode(S[g]));var z=null;E&&(z=E[g]),h({atomCount:j,groupIndex:g,chainIndex:m,modelIndex:v,groupId:e.groupIdList[g],groupType:e.groupTypeList[g],groupName:N.groupName,singleLetterCode:N.singleLetterCode,chemCompType:N.chemCompType,secStruct:D,insCode:B,sequenceIndex:z})}for(s=0;j>s;++s){if(d){var F=null;k&&(F=k[y]);var V=null;O&&(V=O[y]);var U=null;A&&(U=String.fromCharCode(A[y]));var Z=null;C&&(Z=C[y]),d({atomIndex:y,groupIndex:g,chainIndex:m,modelIndex:v,atomId:F,element:N.elementList[s],atomName:N.atomNameList[s],formalCharge:N.formalChargeList[s],xCoord:e.xCoordList[y],yCoord:e.yCoordList[y],zCoord:e.zCoordList[y],bFactor:V,altLoc:U,occupancy:Z})}y+=1}if(p){var H=N.bondAtomList;for(s=0,u=N.bondOrderList.length;u>s;++s)p({atomIndex1:y-j+H[2*s],atomIndex2:y-j+H[2*s+1],bondOrder:N.bondOrderList[s]})}g+=1}m+=1}if(b=x+1,x=y-1,p&&M)for(s=0,u=M.length;u>s;s+=2){var G=M[s],W=M[s+1];(G>=b&&x>=G||W>=b&&x>=W)&&p({atomIndex1:G,atomIndex2:W,bondOrder:T?T[s/2]:null})}v+=1}}function Y(e){return o(Z(e))}function X(e,t){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),W(e instanceof Uint8Array?H(e):e,t)}function $(e,t,n,r){function i(){try{var e=X(o.response);n(e)}catch(t){r(t)}}var o=new XMLHttpRequest;o.addEventListener("load",i,!0),o.addEventListener("error",r,!0),o.responseType="arraybuffer",o.open("GET",t+e.toUpperCase()),o.send()}function J(e,t,n){$(e,oe,t,n)}function Q(e,t,n){$(e,ae,t,n)}var ee=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],te=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],ne=ee.concat(te),re="v1.1.0dev",ie="//mmtf.rcsb.org/v1.0/",oe=ie+"full/",ae=ie+"reduced/";e.encode=Y,e.decode=X,e.traverse=K,e.fetch=J,e.fetchReduced=Q,e.version=re,e.fetchUrl=oe,e.fetchReducedUrl=ae,e.encodeMsgpack=o,e.encodeMmtf=Z,e.decodeMsgpack=H,e.decodeMmtf=W}(t)}(0,AP.exports);var CP=AP.exports;function MP(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var TP=DE.Complex,PP=DE.Chain,RP=DE.Atom,IP=DE.Element,LP=DE.Helix,NP=DE.Sheet,jP=DE.Strand,DP=DE.Bond,BP=DE.Assembly,zP=DE.Molecule,FP=function(){function e(t){O_(this,e),this._original=Array.from(t),this._original.sort(),this._sum=0;for(var n=0;n<this._original.length;++n)this._sum+=this._original[n]}return C_(e,[{key:"compare",value:function(e){var t=e.length;if(t!==this._original.length)return!1;var n,r=0;for(n=0;n<t;++n)r+=e[n];if(r!==this._sum)return!1;var i=Array.from(e);for(i.sort(),n=0;n<t;++n)if(i[n]!==this._original[n])return!1;return!0}}]),e}();FP.prototype.constructor=FP;var VP=uS.Type,UP=[VP.HELIX_PI,VP.BEND,VP.HELIX_ALPHA,VP.STRAND,VP.HELIX_310,VP.BRIDGE,VP.TURN,VP.COIL];var ZP=function(e){P_(n,e);var t=MP(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,e,r))._options.fileType="mmtf",i}return C_(n,[{key:"_onModel",value:function(e){}},{key:"_onChain",value:function(e){if(0===e.modelIndex){var t=new PP(this._complex,e.chainName);this._complex._chains[e.chainIndex]=t,t._index=e.chainIndex}}},{key:"_onGroup",value:function(e){if(0===e.modelIndex&&(!this.settings.now.nowater||"HOH"!==e.groupName&&"WAT"!==e.groupName)){var t=this._complex._chains[e.chainIndex],n=e.insCode.charCodeAt(0)?e.insCode:"",r=t.addResidue(e.groupName,e.groupId,n);r._index=e.groupIndex,this._updateSecStructure(this._complex,r,e)}}},{key:"_onAtom",value:function(e){if(0===e.modelIndex){var t=e.altLoc.charCodeAt(0)?e.altLoc:"",n=new RP(e.groupIndex,e.atomName,IP.getByName(e.element.toUpperCase()),new lh(e.xCoord,e.yCoord,e.zCoord),IP.Role[e.atomName],!1,e.atomId,t,e.occupancy,e.bFactor,e.formalCharge);this._complex._atoms[e.atomIndex]=n,n.index=e.atomIndex,this._serialAtomMap[e.atomId]=n}}},{key:"_onBond",value:function(e){var t=Math.max(e.atomIndex1,e.atomIndex2);if(!(t>=this._complex._atoms.length)){var n=Math.min(e.atomIndex1,e.atomIndex2);this._complex.addBond(this._complex._atoms[n],this._complex._atoms[t],e.bondOrder,DP.BondType.UNKNOWN,!0)}}},{key:"_updateSecStructure",value:function(e,t,n){if(!(0,R.isUndefined)(n)&&n.secStruct===this._ssType)return t._secondary=this._ssStruct,void(this._ssStruct&&(this._ssStruct.term=t));if(!(0,R.isUndefined)(n)){var r=UP[n.secStruct];this._ssType=n.secStruct,this._ssStart=t;var i=null;switch(this._ssType){case-1:case 7:break;case 0:case 2:case 4:i=new LP([3,-1,1,-1,5][this._ssType],t,t,0,"","",0),e._helices.push(i);break;case 3:var o=new NP("",0);e._sheets.push(o),i=new jP(o,t,t,0,null,null);break;default:void 0!==r&&(i=new uS(r,t,t))}this._ssStruct=i,t._secondary=i,i&&e.structures.push(i)}}},{key:"_updateMolecules",value:function(e){var t=e.entityList;if(t)for(var n=e.chainsPerModel[0],r=0;r<t.length;r++){for(var i=t[r],o=i.chainIndexList,a=[],s=0;s<o.length;s++){var u=o[s];if(!(u>=n)){var l=this._complex._chains[u];a=a.concat(l._residues.slice())}}var c=new zP(this._complex,i.description,r+1);c.residues=a,this._complex._molecules[r]=c}}},{key:"_traverse",value:function(e){var t=this,n=this._complex.metadata;n.id=e.structureId,n.title=[],n.title[0]=e.title,n.date=e.releaseDate,n.format="mmtf";var r={onModel:function(e){t._onModel(e)},onChain:function(e){t._onChain(e)},onGroup:function(e){t._onGroup(e)},onAtom:function(e){t._onAtom(e)},onBond:function(e){t._onBond(e)}};this._ssType=-1,this._ssStruct=null,this._ssStart=null,CP.traverse(e,r),this._updateSecStructure(this._complex),this._updateMolecules(e)}},{key:"_linkAtomsToResidues",value:function(){for(var e=0;e<this._complex._atoms.length;++e){var t=this._complex._atoms[e],n=this._complex._residues[t.residue];t.residue=n,n._atoms.push(t)}}},{key:"_findSynonymousChains",value:function(){for(var e={},t=0;t<this._complex._chains.length;++t){var n=this._complex._chains[t],r=n.getName();e.hasOwnProperty(r)||(e[r]=[]),e[r].push(n._index)}return e}},{key:"_parseAssemblyInfo",value:function(e){var t,n,r,i=[],o=this.logger;for(t=0;t<e.bioAssemblyList.length;++t){var a=e.bioAssemblyList[t];if(0!==a.transformList.length){var s=a.transformList[0].chainIndexList,u=new FP(s),l={};for(n=0;n<s.length;++n)l[this._complex._chains[s[n]].getName()]=1;var c=[],f=void 0;for(f in l)l.hasOwnProperty(f)&&Array.prototype.push.apply(c,this._chainsByName[f]);u.compare(c)||o.debug("MMTF: Assembly is missing some of the synonymous chains. Skipping...");var h=new BP(this._complex);for(f in l)l.hasOwnProperty(f)&&h.addChain(f);for(h.addMatrix((new Fh).fromArray(a.transformList[0].matrix).transpose()),n=1;n<a.transformList.length;++n){var d=a.transformList[n];if(u.compare(d.chainIndexList)){var p=(new Fh).fromArray(d.matrix).transpose();for(r=0;r<h.matrices.length&&!h.matrices[r].equals(p);++r);r===h.matrices.length&&h.addMatrix(p)}else o.debug("MMTF: Chain lists differ for different transforms in one assembly. Skipping...")}h.finalize(),i.push(h)}}return i}},{key:"_markHeteroAtoms",value:function(e){for(var t=e.chainsPerModel[0],n=0;n<e.entityList.length;++n){var r=e.entityList[n];if("polymer"!==r.type)for(var i=0;i<r.chainIndexList.length;++i){var o=r.chainIndexList[i];if(!(o>=t))for(var a=this._complex._chains[o],s=0;s<a._residues.length;++s)for(var u=a._residues[s],l=0;l<u._atoms.length;++l)u._atoms[l].het=!0}}}},{key:"_joinSynonymousChains",value:function(){var e,t,n=[],r={};for(e=0;e<this._complex._chains.length;++e){var i=this._complex._chains[e],o=i.getName();if(r.hasOwnProperty(o)){var a=r[o];for(t=0;t<i._residues.length;++t){var s=i._residues[t];a._residues.push(s),s._chain=a}}else r[o]=i,i._index=n.length,n.push(i)}this._complex._chains=n}},{key:"parseSync",value:function(){var e=CP.decode(this._data);return this._complex=new TP,this._serialAtomMap={},this._traverse(e),this._linkAtomsToResidues(),this._markHeteroAtoms(e),this._chainsByName=this._findSynonymousChains(),Array.prototype.push.apply(this._complex.units,this._parseAssemblyInfo(e)),this._joinSynonymousChains(),this._complex.finalize({needAutoBonding:!1,detectAromaticLoops:this.settings.now.aromatic,enableEditing:this.settings.now.editing,serialAtomMap:this._serialAtomMap}),this._complex}}],[{key:"canProbablyParse",value:function(e){return(0,R.isArrayBuffer)(e)&&223===(1|new Uint8Array(e,0,1)[0])}}]),n}(rP);function HP(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}ZP.formats=["mmtf"],ZP.extensions=[".mmtf"],ZP.binary=!0;var GP=function(e){P_(n,e);var t=HP(n);function n(e,r,i){var o;return O_(this,n),o=t.call(this,"data:".concat(r,":").concat(i,": ").concat(e)),Error.captureStackTrace&&Error.captureStackTrace(M_(o),n),o.name="ParsingError",o.parseLine=r,o.parseColumn=i,o}return C_(n)}(X_(Error));function WP(e){return 32===e||10===e||13===e||9===e}function qP(e,t,n){for(var r=t.length,i=-1;n<r&&(i=t.charCodeAt(n))!==e&&10!==i;)++n;return i===e?n:-1}function KP(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var YP=DE.Complex,XP=DE.Element,$P=DE.Helix,JP=DE.Sheet,QP=DE.Strand,eR=DE.Assembly,tR=DE.Molecule,nR=["auth_seq_id","Cartn_x","Cartn_y","Cartn_z","label_atom_id"],rR={helx:"helix",turn:"turn",strn:"strand"};function iR(e){var t=/[A-Za-z]+/.exec(e);return t?rR[t[0].toLowerCase()]:null}function oR(e){return null===e||void 0===e||(0,R.isArray)(e)?e:[e]}function aR(e){var t=4===e.trim().length;return e.slice(0,t?1:2).trim()}var sR=function(e){P_(n,e);var t=KP(n);function n(e){var r;return O_(this,n),(r=t.call(this)).name="AtomDataError",r.message=e,r}return C_(n)}(X_(Error));function uR(e,t){for(var n=(e=(0,R.isString)(e)?e:"".concat(e)).replace(/\)\s*\(/g,"!").replace(/[()']/g,"").split("!"),r=[],i=0,o=n.length;i<o;++i){for(var a=n[i].split(","),s=[],u=0,l=0,c=a.length;l<c;++l){var f=a[l];if(f.includes("-"))for(var h=f.split("-"),d=parseInt(h[0],10),p=parseInt(h[1],10);d<=p;++d)s[u++]=t[d];else s[u++]=t[f]}r.push(s)}var v=[],m=0;return function e(t,n){for(var i=0,o=r[t].length;i<o;++i){var a=n?n.clone():new Fh;a.multiplyMatrices(r[t][i],a),0===t?v[m++]=a:e(t-1,a)}}(r.length-1),v}var lR=function(e){P_(n,e);var t=KP(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,e,r)).asymDict={},i.molecules=[],i._options.fileType="cif",i}return C_(n,[{key:"parseSync",value:function(){this.logger.info("Parsing CIF file..");var e=function(e){var t,n,r,i,o=0,a=0,s=e.length,u=NaN,l=!0,c=1,f=1,h=0,d={},p={},v=[],m=0,g="",y=[],b=0;function x(){var t;if((46===u||63===u)&&(o+1>=s||WP(e.charCodeAt(o+1))))return++f,void++o;if(l&&59===u){a=o;var n=0;do{if(-1===(a=qP(10,e,a+1)))throw new GP("Unterminated text block found",c,f);++n}while(a+1<s&&e.charCodeAt(a+1)!==u||a+1>=s);return t=e.substring(o+1,a).replace(/\r/g,""),o=a+2,c+=n,f=1,l=!1,t}if(39===u||34===u){a=o;do{if(-1===(a=qP(u,e,a+1)))throw new GP("Unterminated quoted string found",c,f)}while(a+1<s&&!WP(e.charCodeAt(a+1)));return t=e.substring(o+1,a),f+=a-o+1,o=a+1,t}for(a=o;a<s&&!WP(e.charCodeAt(a));)++a;t=e.substring(o,a),f+=a-o,o=a;var r=Number(t);return Number.isNaN(r)?t:r}for(;o<=s;){if(13===(u=e.charCodeAt(o)));else if(10===u)l=!0,++c,f=1;else{if(32!==u&&9!==u){if(35===u){if(-1===(o=qP(10,e,o+1)))break;continue}if(0===h){if(68!==u&&100!==u||"ata_"!==e.substr(o+1,4).toLowerCase()){if(Number.isNaN(u))break;throw new GP("Unexpected character in state ".concat(h),c,f)}for(t=a=o+5;a<s&&!WP(e.charCodeAt(a));)++a;if(f+=a-o,t<(o=a)){d[e.substring(t,o)]=p={},h=1;continue}throw new GP("Data block name missing",c,f)}if(1===h){if(68!==u&&100!==u||"ata_"!==e.substr(o+1,4).toLowerCase()){if(95===u){for(t=a=o+1;a<s&&!WP(e.charCodeAt(a));)++a;if(f+=a-o,t<(o=a)){g=e.substring(t,o),h=2;continue}throw new GP("Tag name missing",c,f)}if(76!==u&&108!==u||"oop_"!==e.substr(o+1,4).toLowerCase()){if(Number.isNaN(u))break;throw new GP("Unexpected character in state ".concat(h),c,f)}if(f+=5,(o+=5)<s&&!WP(e.charCodeAt(o)))throw new GP("Unexpected character in state ".concat(h),c,f);v=[],m=0,y=[],b=0,h=3;continue}h=0;continue}if(2===h){if(Number.isNaN(u))break;n=x(),(0,R.set)(p,g,n),h=1;continue}if(3===h){if(95===u){for(t=a=o+1;a<s&&!WP(e.charCodeAt(a));)++a;if(f+=a-o,t<(o=a)){i=e.substring(t,o),v[m++]=i;continue}throw new GP("Tag name missing",c,f)}if(m>0){for(var _=0;_<m;++_)n=[],y[_]=n,(0,R.set)(p,v[_],n);h=4;continue}throw new GP("Data tags are missing inside a loop",c,f)}if(4===h){68!==u&&100!==u||"ata_"!==e.substr(o+1,4).toLowerCase()?95===u?h=1:76!==u&&108!==u||"oop_"!==e.substr(o+1,4).toLowerCase()?Number.isNaN(u)?h=0:(r=x(),y[b%m].push(r),++b):h=1:h=0;continue}throw new GP("Unexpected internal state ".concat(h),c,f)}l=!1,++f}++o}if(2===h)throw new GP("Unexpected end of file in state ".concat(h),c,f);return d}(this._data);return this._toComplex(e)}},{key:"_toComplex",value:function(e){var t=new YP,n=e[Object.keys(e)[0]];return this._extractAtoms(t,n),this._extractSecondary(t,n),this._extractAssemblies(t,n),this._extractMolecules(t,n),this._extractMetadata(t,n),t.finalize({needAutoBonding:!0,detectAromaticLoops:this.settings.now.aromatic,enableEditing:this.settings.now.editing}),t}},{key:"_extractMetadata",value:function(e,t){var n=e.metadata;n.id=t.entry.id,n.classification=t.struct_keywords.pdbx_keywords;var r=t.database_PDB_rev;n.date=r&&r.date_original?r.date_original:"",n.format="cif",n.title=[],n.title[0]=t.struct.title}},{key:"_extractMolecules",value:function(e,t){var n,r=oR(t.entity.pdbx_description),i=r.length;for(n=0;n<i;n++)this.molecules[n]?this.molecules[n].name=r[n]:this.molecules[n]={name:r[n],residues:[]};var o=e.getMolecules();for(n=0;n<i;n++){var a=this.molecules[n];o[n]=new tR(e,a.name,n+1),o[n].residues=a.residues}}},{key:"_extractAtoms",value:function(e,t){var n=t.atom_site;if(!n)throw new sR("CIF parsing error: atom_site is not specified!");for(var r=0,i=nR.length;r<i;++r)if(!n[nR[r]])throw new sR("CIF parsing error: requires field ".concat(nR[r]," not found!"));for(var o=this.asymDict,a=oR(n.auth_seq_id),s=oR(n.Cartn_x),u=oR(n.Cartn_y),l=oR(n.Cartn_z),c=oR(n.label_atom_id),f=c.length,h=oR(n.group_PDB)||[],d=oR(n.auth_asym_id)||[],p=oR(n.label_asym_id)||[],v=oR(n.id)||[],m=oR(n.pdbx_PDB_ins_code)||[],g=oR(n.label_comp_id)||[],y=oR(n.type_symbol)||[],b=oR(n.B_iso_or_equiv)||[],x=oR(n.occupancy)||[],_=oR(n.pdbx_formal_charge)||[],w=oR(n.label_alt_id)||[],S=oR(n.pdbx_PDB_model_num)||[],E=oR(n.label_entity_id)||[],k=null,O=null,A=0;A<f;++A){if(1===(S[A]||1)){var C=String(d[A]||" ");k&&k.getName()===C||(k=e.getChain(C)||e.addChain(C)),o[String(p[A]||" ")]=C;var M=a[A],T=String(m[A]||" "),P=String(g[A]||"");if(!O||O.getSequence()!==M||O.getICode()!==T){O=k.addResidue(P,M,T);var R=E[A]-1,I=this.molecules[R];I||(this.molecules[R]={name:"",residues:[]},I=this.molecules[R]),I.residues.push(O)}var L=c[A],N=y[A]||aR(L),j=XP.getByName(N),D=XP.Role[L.trim()],B=new lh(s[A],u[A],l[A]),z="HETATM"===h[A]||!1,F=v[A]||A,V=b[A]||0,U=x[A]||0,Z=String(w[A]||""),H=_[A]||0;O.addAtom(L,j,B,D,z,F,Z,U,V,H)}}}},{key:"_extractSecondary",value:function(e,t){t.struct_conf&&this._extractConfs(e,t.struct_conf),t.struct_sheet_range&&this._extractSheets(e,t.struct_sheet_range)}},{key:"_extractSheets",value:function(e,t){var n=this.asymDict;if(t.sheet_id&&t.id&&t.beg_label_seq_id&&t.end_label_seq_id&&t.beg_label_asym_id)for(var r=e._sheets,i=oR(t.sheet_id),o=oR(t.id),a=oR(t.beg_auth_seq_id),s=oR(t.end_auth_seq_id),u=oR(t.beg_label_asym_id),l=oR(t.pdbx_beg_PDB_ins_code)||[],c=oR(t.pdbx_end_PDB_ins_code)||[],f=0,h=o.length;f<h;++f){var d=e.getChain(n[u[f]]),p=E(i[f]),v=a[f],m=s[f],g=l[f]||" ",y=c[f]||" ",b=d.findResidue(v,g),x=d.findResidue(m,y);if(b&&x){for(var _=new QP(p,b[0],x[0],0,null,null),w=d.getResidues(),S=b[1];S<=x[1];++S)w[S]._secondary=_;p.addStrand(_),e.structures.push(_)}}function E(e){for(var t=r.length,n=0;n<t;++n)if(r[n]._name===e)return r[n];return r[t]=new JP(e,0),r[t]}}},{key:"_extractConfs",value:function(e,t){var n=this.asymDict;if(t.conf_type_id&&t.beg_label_seq_id&&t.end_label_seq_id&&t.beg_label_asym_id)for(var r=oR(t.conf_type_id),i=oR(t.beg_auth_seq_id),o=oR(t.pdbx_beg_PDB_ins_code)||[],a=oR(t.end_auth_seq_id),s=oR(t.pdbx_end_PDB_ins_code)||[],u=oR(t.details)||[],l=oR(t.pdbx_PDB_helix_length)||[],c=oR(t.pdbx_PDB_helix_class)||[],f=oR(t.id)||[],h=oR(t.beg_label_asym_id),d=0,p=r.length;d<p;++d){var v=iR(r[d]);if(v){var m=f[d]||r[d],g=e.getChain(n[h[d]]),y=i[d],b=a[d],x=o[d]||" ",_=s[d]||" ",w=g.findResidue(y,x),S=g.findResidue(b,_);if(w&&S){var E=u[d]||"",k=l[d]||0,O=c[d]||" ",A=void 0;if("helix"===v){var C=e._helices.length;A=new $P(O,w[0],S[0],C,m,E,k),e.addHelix(A),e.structures.push(A)}else"turn"===v?(A=new uS(uS.Type.TURN,w[0],S[0]),e.structures.push(A)):A=null;if(A)for(var M=g.getResidues(),T=w[1];T<=S[1];++T)M[T]._secondary=A}}}}},{key:"_extractAssemblies",value:function(e,t){var n=this.asymDict,r=t.pdbx_struct_assembly_gen;if(r){var i=oR(r.assembly_id),o=oR(r.oper_expression),a=oR(r.asym_id_list);if(i&&o&&a){var s=function(e){if(!e)return null;var t=oR(e.id),n=e.matrix,r=e.vector;if(!t||!n||!r)return null;for(var i=[],o=0,a=t.length;o<a;++o){for(var s=new Fh,u=s.elements,l=0;l<3;++l){var c=n[l+1];u[l]=oR(c[1])[o],u[l+4]=oR(c[2])[o],u[l+8]=oR(c[3])[o],u[l+12]=oR(r[l+1])[o]}i[t[o]]=s}return i}(t.pdbx_struct_oper_list);if(s)for(var u=0,l=i.length;u<l;++u){for(var c=new eR(e),f=uR(o[u],s),h=a[u].split(","),d=0,p=h.length;d<p;++d){var v=h[d].trim();v.length>0&&c.addChain(n[v])}c.matrices=f,e.units.push(c)}}}}}],[{key:"canProbablyParse",value:function(e){return(0,R.isString)(e)&&/^\s*data_/i.test(e)}}]),n}(rP);lR.formats=["cif","mmcif"],lR.extensions=[".cif",".mmcif"];var cR=0,fR=1,hR=2,dR=3,pR=function(){function e(){O_(this,e),Uw(this,"_xyz2crs",[]),Uw(this,"_origin",new lh(0,0,0)),this._header={},this._boxSize=new lh,this._boxStart=new lh,this._header.delta={},this._header.extent=[],this._header.nstart=[],this._header.grid=[],this._header.crs2xyz=[],this._header.cellDims=new lh,this._header.angles=[],this._header.origin=new lh(0,0,0),this._header.dmin=0,this._header.dmean=0,this._header.dmax=0}return C_(e,[{key:"_typedCheck",value:function(){if((0,R.isTypedArray)(this._buff))this._buff=this._buff.buffer;else if(!(0,R.isArrayBuffer)(this._buff))throw new TypeError("Expected ArrayBuffer or TypedArray")}},{key:"_fillHeader",value:function(e,t){for(var n in e)if(e.hasOwnProperty(n))switch(e[n][0]){case cR:this._header[n]=t[e[n][1]][e[n][2]];break;case hR:this._parseArray(this._header[n],t[e[n][1]],e[n][2]);break;case fR:this._parseVector(this._header[n],t[e[n][1]],e[n][2]);break;case dR:this._header[n]=new Uint8Array(t[e[n][1]],4*[e[n][2]],4*[e[n][3]])}}},{key:"_parseVector",value:function(e,t,n){var r=[t[n],t[n+1],t[n+2]];e.x=r[0],e.y=r[1],e.z=r[2]}},{key:"_parseArray",value:function(e,t,n){e[0]=t[n],e[1]=t[n+1],e[2]=t[n+2]}},{key:"_parseHeader",value:function(e){}},{key:"_setAxisIndices",value:function(){}},{key:"_setOrigins",value:function(){}},{key:"_getAxis",value:function(){var e=this._header,t=e.cellDims.x/e.grid[0],n=e.cellDims.y/e.grid[1],r=e.cellDims.z/e.grid[2],i=j_(e.angles,3),o=i[0],a=i[1],s=i[2],u=Math.cos(a),l=(Math.cos(o)-Math.cos(a)*Math.cos(s))/Math.sin(s),c=Math.sqrt(1-u*u-l*l);return[new lh(t,0,0),new lh(Math.cos(s)*n,Math.sin(s)*n,0),new lh(u*r,l*r,c*r)]}},{key:"_getXYZdim",value:function(){return[this._header.extent[this._xyz2crs[0]],this._header.extent[this._xyz2crs[1]],this._header.extent[this._xyz2crs[2]]]}},{key:"_getVolumeInfo",value:function(){var e=(0,R.pick)(this._header,["dmean","dmin","dmax","sd","delta"]);return e.obtuseAngle=this._header.angles.map((function(e){return Number(e>=Math.PI/2)})),e}},{key:"_setBoxParams",value:function(e,t,n){var r=this,i=0,o=0,a=j_(this._header.angles,3),s=a[0],u=a[1];a[2]>=Math.PI/2&&(i+=Math.abs(t.x)),u>=Math.PI/2&&(i+=Math.abs(n.x)),s>=Math.PI/2&&(o+=Math.abs(n.y)),this._boxStart=new lh(this._origin.x-i,this._origin.y-o,this._origin.z),this._boxSize=new lh(Math.abs(e.x)+Math.abs(t.x)+Math.abs(n.x),Math.abs(t.y)+Math.abs(n.y),Math.abs(n.z));var l=function(e,t){return Math.abs(e[t])/r._boxSize[t]};this._header.delta.x=l(t,"x"),this._header.delta.y=l(n,"x"),this._header.delta.z=l(n,"y")}},{key:"_getXYZbox",value:function(){return new hh(this._boxStart.clone(),this._boxStart.clone().add(this._boxSize))}},{key:"_toXYZData",value:function(){}},{key:"parse",value:function(e){return this._parseHeader(e),this._setOrigins(),new NE(Float32Array,this._getXYZdim(),this._getXYZbox(),1,this._toXYZData(),this._getVolumeInfo())}}]),e}();function vR(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var mR={extent:[hR,"u32",0],type:[cR,"u32",3],nstart:[hR,"i32",4],grid:[hR,"u32",7],cellDims:[fR,"f32",10],angles:[hR,"f32",13],crs2xyz:[hR,"i32",16],dmin:[cR,"f32",19],dmax:[cR,"f32",20],dmean:[cR,"f32",21],ispg:[cR,"u32",22],nsymbt:[cR,"u32",23],lksflg:[cR,"u32",24],customData:[dR,"buffer",25,9],origin:[fR,"f32",34],map:[dR,"buffer",52,1],machine:[cR,"u32",53],sd:[cR,"f32",54],nlabel:[cR,"f32",55],label:[dR,"buffer",56,200]},gR=function(e){P_(n,e);var t=vR(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_parseHeader",value:function(e){this._buff=e,this._typedCheck();var t={};t.u32=new Uint32Array(this._buff,0,56),t.i32=new Int32Array(this._buff,0,56),t.f32=new Float32Array(this._buff,0,56),t.buffer=this._buff;var n=this._header;this._fillHeader(mR,t),n.angles.forEach((function(e,t,n){n[t]*=Math.PI/180}))}},{key:"_setAxisIndices",value:function(){var e=this._header;0===e.cellDims.x&&0===e.cellDims.y&&0===e.cellDims.z&&e.cellDims.set(1,1,1);var t=this._header.crs2xyz;0===t[0]&&0===t[1]&&0===t[2]&&(t[0]=1,t[1]=2,t[2]=3);var n=this._xyz2crs;n[t[0]-1]=0,n[t[1]-1]=1,n[t[2]-1]=2}},{key:"_setOrigins",value:function(){var e=j_(this._getAxis(),3),t=e[0],n=e[1],r=e[2];this._setAxisIndices();var i=this._header,o=this._xyz2crs;if(0===i.origin.x&&0===i.origin.y&&0===i.origin.z?(this._origin.addScaledVector(t,i.nstart[o[0]]),this._origin.addScaledVector(n,i.nstart[o[1]]),this._origin.addScaledVector(r,i.nstart[o[2]])):this._origin=i.origin,t.multiplyScalar(i.extent[o[0]]-1),n.multiplyScalar(i.extent[o[1]]-1),r.multiplyScalar(i.extent[o[2]]-1),2!==i.type)throw new Error("CCP4: Unsupported format ".concat(i.type));this._data=new Float32Array(this._buff,1024+i.nsymbt,i.extent[0]*i.extent[1]*i.extent[2]),this._setBoxParams(t,n,r)}},{key:"_toXYZData",value:function(){var e=this._header,t=this._data,n=this._xyz2crs,r=new Float32Array(t.length),i=this._getXYZdim(),o=i[0],a=i[1],s=0,u=[];for(u[2]=0;u[2]<e.extent[2];u[2]++)for(u[1]=0;u[1]<e.extent[1];u[1]++)for(u[0]=0;u[0]<e.extent[0];u[0]++,s++)r[u[n[0]]+o*(u[n[1]]+a*u[n[2]])]=t[s];return r}}]),n}(pR),yR=function(e){P_(n,e);var t=vR(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,e,r))._options.fileType="ccp4",i.model=new gR,i}return C_(n,[{key:"parseSync",value:function(){return this.model.parse(this._data)}}],[{key:"canProbablyParse",value:function(e){return!1}}]),n}(rP);function bR(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}yR.formats=["ccp4"],yR.extensions=[".ccp4",".map",".mrc"],yR.binary=!0;var xR=DE.Complex,_R=DE.Element,wR=DE.Molecule,SR=function(e){P_(n,e);var t=bR(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,e,r))._complex=null,i._atomsInf=null,i._options.fileType="xyz",i._fileName=r.name,i}return C_(n,[{key:"_parseToAtomsInf",value:function(e){var t=e.indexOf("\n"),n=parseInt(e.substring(0,t),10),r=e.indexOf("\n",t+1),i=e.slice(t+1,r).trim();0===i.length&&(i=this._fileName);var o=r+e.substring(r).search(/\S/);this._atomsInf=e.substring(o).split(/[\s,]*\n[\s,]*/),Number.isNaN(n)||this._atomsInf.length-1===n?(this._complex.metadata.format="xyz",this._complex.name=i):this._complex.error={message:"wrong number of atoms"}}},{key:"_parseAtomsInf",value:function(){for(var e=this._complex.addChain("A").addResidue("UNK",1," "),t=0;t<this._atomsInf.length-1;t++){var n=this._atomsInf[t].split(/[\s,]+/);if(4!==n.length){this._complex.error={message:"missed parameters"};break}var r=t+1,i=n[0],o=new lh(parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])),a=_R.getByName(i);e.addAtom(i,a,o,undefined,true,r," ",1,1,0)}var s=new wR(this._complex,this._complex.name,1);s.residues=e,this._complex._molecules[0]=s}},{key:"parseSync",value:function(){var e=this._complex=new xR;if(this._parseToAtomsInf(this._data),this._parseAtomsInf(),this._complex.finalize({needAutoBonding:!0,detectAromaticLoops:this.settings.now.aromatic,enableEditing:this.settings.now.editing,serialAtomMap:this._serialAtomMap}),this._complex=null,this._atomsInf=null,e.error)throw new Error(e.error.message);return e}}],[{key:"canProbablyParse",value:function(e){return(0,R.isString)(e)&&/^\s*\d+ *\n[^\n]*\n\s*\w{1,3}\s+-?\d/.test(e)}}]),n}(rP);function ER(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}Uw(SR,"formats",["xyz"]),Uw(SR,"extensions",[".xyz"]);var kR=DE.Complex,OR=DE.Element,AR=function(e){P_(n,e);var t=ER(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,e,r))._options.fileType="pubchem+json",i}return C_(n,[{key:"parseSync",value:function(){return this.logger.info("Parsing PubChem JSON file..."),this._toComplex(JSON.parse(this._data))}},{key:"_toComplex",value:function(e){var t=new kR,n=e.PC_Compounds&&e.PC_Compounds[0];return n&&(this._extractAtoms(t,n),t.finalize({needAutoBonding:!1,detectAromaticLoops:this.settings.now.aromatic,enableEditing:this.settings.now.editing})),t}},{key:"_extractAtoms",value:function(e,t){var n=t.atoms&&t.atoms.aid,r=n&&t.atoms.element;if(!r||n.length!==r.length)throw new Error("Unable to parse atom elements");r=(0,R.fromPairs)((0,R.zip)(n,r));var i={},o=t.coords&&t.coords[0],a=o&&o.conformers&&o.conformers[0],s=a&&a.x,u=a&&a.y,l=a&&a.z||[];if(!(n=o&&o.aid)||!s||!u)throw new Error("Coordinates are not found in the file");for(var c=e.addChain(" ").addResidue("UNK",1," "),f=0,h=n.length;f<h;++f){var d=n[f],p=OR.ByAtomicNumber[r[d]],v=new lh(s[f],u[f],l[f]||0);i[d]=c.addAtom(p.name,p,v,void 0,!0,d," ",1,0,0)}var m=t.bonds&&t.bonds.aid1,g=t.bonds&&t.bonds.aid2,y=t.bonds&&t.bonds.order||[];if(m&&g&&m.length===g.length)for(var b=0,x=m.length;b<x;++b)e.addBond(i[m[b]],i[g[b]],y[b]||1,0,!0)}}],[{key:"canProbablyParse",value:function(e){return(0,R.isString)(e)&&"{"===e[0]}}]),n}(rP);AR.formats=["pubchem","pubchem+json","pc"],AR.extensions=[".json"];var CR=function(){function e(t){O_(this,e),this._strings=t.split(/\r?\n|\r/),this._currentStart=0,this._currentStringIndx=0}return C_(e,[{key:"setStart",value:function(e){e>=this._strings.length?(this._currentStart=this._strings.length-1,this._currentStringIndx=this._strings.length-1):(this._currentStart=e,this._currentStringIndx=e)}},{key:"getNextString",value:function(){return this._strings[++this._currentStringIndx]}},{key:"getCurrentString",value:function(){return this._strings[this._currentStringIndx]}},{key:"getStringFromStart",value:function(e){return this._currentStringIndx=this._currentStart+e,this._strings[this._currentStart+e]}},{key:"findNextDataItem",value:function(){for(var e=this.getNextString(),t=!1;!(0,R.isUndefined)(e)&&"$$$$"!==e.trim();){if(e.match(/>\s+<(.*)>/)){t=!0;break}e=this.getNextString()}return t}},{key:"findNextCompoundStart",value:function(){for(var e=this.getCurrentString();!(0,R.isUndefined)(e)&&"$$$$"!==e.trim();)e=this.getNextString();return this.setStart(++this._currentStringIndx),this.probablyHaveDataToParse()}},{key:"probablyHaveDataToParse",value:function(){return this._currentStringIndx<this._strings.length-2}}]),e}();function MR(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var TR=DE.Complex,PR=DE.Element,RR=DE.Bond,IR=DE.Molecule,LR=[0,3,2,1,0,-1,-2,-3],NR=[0,1,2,3,1,1,1,2],jR=[RR.BondType.UNKNOWN,RR.BondType.COVALENT,RR.BondType.COVALENT,RR.BondType.COVALENT,RR.BondType.AROMATIC,RR.BondType.UNKNOWN,RR.BondType.AROMATIC,RR.BondType.AROMATIC],DR=/.*(M\s\sEND).*|.*(^$$$$).*|.*>\s+<(.+)>.*/,BR=/.*($$$$).*|.*>\s+<(.+)>.*/,zR="sdf",FR="mol",VR=["name","id","title"],UR={name:["PUBCHEM_IUPAC_TRADITIONAL_NAME",/PUBCHEM_(.+)_NAME/,/(.+)name/,/(.+)NAME/],id:["PUBCHEM_COMPOUND_CID","id","ID",/.*CID/,/.*ID/,/.*id/],title:["msg","MSG","message","title","description","desc"]};var ZR=function(e){P_(n,e);var t=MR(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,e,r))._format="sdf",i._complex=null,i._chain=null,i._residue=null,i._molecules=null,i._metadata={},i._metadata.molecules=[],i._currentMolProps={},i._compoundIndx=-1,i._assemblies=[],i._atomsParsed=0,i._atomsIndexes=[],i}return C_(n,[{key:"canProbablyParse",value:function(e){return(0,R.isString)(e)&&DR.test(e)}},{key:"_parseHeader",value:function(e){var t={};t.name=e.getStringFromStart(0);var n=parseInt(e.getStringFromStart(1).substr(10,6).trim(),10);t.date=n.toString()||"",t.title=e.getStringFromStart(2),this._metadata.molecules.push(t)}},{key:"_parseAtoms",value:function(e,t){var n,r=this._atomsParsed,i=function(e){if(!e)return"A";for(var t=[];e;)t.push(65+e%26),e=Math.trunc(e/26);return t.length>1&&(t.reverse(),t[0]-=1),String.fromCharCode.apply(String,t)}(this._compoundIndx);this._chain=this._complex.getChain(i)||this._complex.addChain(i),this._residue=this._chain.addResidue("UNK",1," ");for(var o=0;o<t;o++){n=e.getNextString(),r++;var a=parseFloat(n.substr(0,10)),s=parseFloat(n.substr(10,10)),u=parseFloat(n.substr(20,10)),l=LR[parseInt(n.substr(36,3),10)],c=new lh(a,s,u),f=n.substr(31,3).trim().toUpperCase(),h=PR.getByName(f);this._atomsIndexes[f]||(this._atomsIndexes[f]=0),this._atomsIndexes[f]+=1,f+=this._atomsIndexes[f],this._residue.addAtom(f,h,c,void 0,!0,r," ",1,0,l)}}},{key:"_parseBonds",value:function(e,t){for(var n,r=0;r<t;r++){n=e.getNextString();var i=parseInt(n.substr(0,3),10)+this._atomsParsed,o=parseInt(n.substr(3,3),10)+this._atomsParsed,a=parseInt(n.substr(6,3),10);if(i>o){var s=[o,i];i=s[0],o=s[1]}this._complex.addBond(i,o,NR[a]||1,jR[a]||RR.BondType.UNKNOWN,!0)}}},{key:"_parseMOL",value:function(e){this._compoundIndx++,this._parseHeader(e);var t=e.getStringFromStart(3),n=parseInt(t.substr(0,3),10),r=parseInt(t.substr(3,3),10);this._parseAtoms(e,n),this._parseBonds(e,r),this._atomsParsed+=n,this._metadata.molecules[this._compoundIndx]._residues=[],this._metadata.molecules[this._compoundIndx]._residues.push(this._residue)}},{key:"_parseDataItem",value:function(e){for(var t=e.getCurrentString(),n=[],r=e.getNextString();""!==r.trim();)n.push(r),r=e.getNextString();1===n.length&&(n=j_(n,1)[0]);this._currentMolProps[t.replace(/[<>]/g,"").trim()]=n}},{key:"_parseCompound",value:function(e){if(this._parseMOL(e),this._format===zR){for(this._currentMolProps={};e.findNextDataItem();)this._parseDataItem(e);if(0!==Object.keys(this._currentMolProps).length){var t=this._metadata.molecules[this._compoundIndx];t.props=this._currentMolProps,this._tryToUpdateMoleculeData(t)}}}},{key:"_fixBondsArray",value:function(){for(var e=this._serialAtomMap,t=this._complex._bonds,n=0;n<t.length;n++){var r=t[n];r._right<r._left&&console.log("_fixBondsArray: Logic error."),r._left=e[r._left]||null,r._right=e[r._right]||null}}},{key:"_buildAssemblies",value:function(){var e=this._complex._chains;if(1===e.length)return this._assemblies;for(var t=0;t<e.length;t++){var n=new XS(this._complex),r=new Fh;n.addMatrix(r),n.addChain(e[t]._name),this._assemblies.push(n)}return this._assemblies}},{key:"_buildMolecules",value:function(){this._complex._molecules=[];for(var e=this._metadata.molecules,t=0;t<e.length;t++){var n=new IR(this._complex,e[t].name,t+1);n.residues=e[t]._residues,this._complex._molecules[t]=n}return this._complex._molecules}},{key:"_searchTag",value:function(e,t){for(var n=0;n<t.length;n++)if(e instanceof RegExp&&e.test(t[n].tag)||e===t[n].tag)return t[n].data}},{key:"_tryToFind",value:function(e,t){for(var n=0;n<e.length;n++){var r=this._searchTag(e[n],t);if(r)return r}}},{key:"_tryToUpdateMoleculeData",value:function(e){for(var t=!1,n=0;n<VR.length;n++){var r=UR[VR[n]],i=this._tryToFind(r,e.props);i&&(e[VR[n]]=i,t=!0)}return e.name=e.name||e.id,e.name.match(/^\d+$/)&&(e.name="CID: ".concat(e.name)),t}},{key:"_finalizeMetadata",value:function(){var e=this._metadata.molecules,t=this._complex.metadata,n=this._complex;if(1===e.length)n.name=e[0].name,t.title=e[0].title,t.date=e[0].date,t.properties=e[0].props;else if(e.length>1){t.molecules=[];for(var r=0;r<e.length;r++)t.molecules.push({name:e[r].name,date:e[r].date,title:e[r].title,properties:e[r].props})}}},{key:"_finalize",value:function(){for(var e=this._serialAtomMap={},t=this._complex._atoms,n=0;n<t.length;n++){var r=t[n];e[r.serial]=r}this._complex._finalizeBonds(),this._fixBondsArray(),this._finalizeMetadata(),this._buildAssemblies(),this._complex.units=this._complex.units.concat(this._assemblies),this._buildMolecules(),this._complex.finalize({needAutoBonding:!1,detectAromaticLoops:!1,enableEditing:!1,serialAtomMap:this._serialAtomMap})}},{key:"defineFormat",value:function(e){return BR.test(e)?zR:FR}},{key:"parseSync",value:function(){var e=this._complex=new TR,t=new CR(this._data);this._format=this.defineFormat(this._data),e.metadata.format=this._format;do{this._parseCompound(t)}while(t.findNextCompoundStart());return this._finalize(),e}}]),n}(rP);function HR(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}ZR.formats=["mol","sdf"],ZR.extensions=[".mol",".sdf"];var GR={nstart:[hR,"i16",0],extent:[hR,"i16",3],grid:[hR,"i16",6],cellDims:[fR,"i16",9],angles:[hR,"i16",12],div:[cR,"i16",15],adder:[cR,"i16",16],scaleFactor:[cR,"i16",17]},WR=function(e){P_(n,e);var t=HR(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"_parseHeader",value:function(e){this._buff=e,this._typedCheck();var t={};if(t.i16=new Int16Array(this._buff),100!==t.i16[18])for(var n=0,r=t.i16.length;n<r;++n){var i=t.i16[n];t.i16[n]=(255&i)<<8|i>>8&255}if(100!==t.i16[18])throw new Error("DSN6: Incorrect format ");var o=this._header;this._fillHeader(GR,t),o.cellDims.multiplyScalar(1/o.scaleFactor),o.angles.forEach((function(e,t,n){n[t]*=Math.PI/180/o.scaleFactor})),o.div/=100}},{key:"_setAxisIndices",value:function(){this._xyz2crs[0]=0,this._xyz2crs[1]=1,this._xyz2crs[2]=2}},{key:"_setOrigins",value:function(){var e=this._header,t=j_(this._getAxis(),3),n=t[0],r=t[1],i=t[2];this._setAxisIndices(),this._origin.addScaledVector(n,e.nstart[0]),this._origin.addScaledVector(r,e.nstart[1]),this._origin.addScaledVector(i,e.nstart[2]),n.multiplyScalar(e.extent[0]),r.multiplyScalar(e.extent[1]),i.multiplyScalar(e.extent[2]),this._setBoxParams(n,r,i)}},{key:"_pointCalculate",value:function(e,t,n,r,i,o,a){var s=this._header;return i<s.extent[0]&&r<s.extent[1]&&n<s.extent[2]?(e[i+s.extent[0]*(r+s.extent[1]*n)]=(t[o.counter]-s.adder)/s.div,++o.counter,!0):(o.counter+=8-a,!1)}},{key:"_blockCalculate",value:function(e,t,n,r,i,o){for(var a=0;a<8;++a)for(var s=8*n+a,u=0;u<8;++u)for(var l=8*r+u,c=!0,f=0;c&&f<8;){var h=8*i+f;c=this._pointCalculate(e,t,s,l,h,o,f),f++}}},{key:"_toXYZData",value:function(){for(var e=this._header,t=new Uint8Array(this._buff),n=new Float32Array(e.extent[0]*e.extent[1]*e.extent[2]),r=new lh(e.extent[0]/8,e.extent[1]/8,e.extent[2]/8),i={counter:512},o=0;o<r.z;++o)for(var a=0;a<r.y;++a)for(var s=0;s<r.x;++s)this._blockCalculate(n,t,o,a,s,i);return this._calculateInfoParams(n),n}},{key:"_calculateInfoParams",value:function(e){this._header.dmean/=e.length;for(var t=0,n=e[0],r=e[0],i=0;i<e.length;i++)t+=Math.pow(this._header.dmean-e[i],2),e[i]<n&&(n=e[i]),e[i]>r&&(r=e[i]);this._header.sd=Math.sqrt(t/e.length),this._header.dmax=r,this._header.dmin=n}}]),n}(pR),qR=function(e){P_(n,e);var t=HR(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,e,r))._options.fileType="dsn6",i.model=new WR,i}return C_(n,[{key:"parseSync",value:function(){return this.model.parse(this._data)}}],[{key:"canParse",value:function(e,t){return!!e&&(e instanceof ArrayBuffer&&rP.checkDataTypeOptions(t,"dsn6"))}},{key:"canProbablyParse",value:function(e){return!1}}]),n}(rP);function KR(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}qR.formats=["dsn6"],qR.extensions=[".dsn6",".omap"],qR.binary=!0;var YR=function(e){P_(n,e);var t=KR(n);function n(e){var r;return O_(this,n),(r=t.call(this,e))._next=-1,r.next(),r}return C_(n,[{key:"getNext",value:function(){return this._next}}]),n}(sP);function XR(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var $R=DE.Complex,JR=DE.Element,QR=DE.Molecule,eI=function(e){P_(n,e);var t=XR(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,e,r))._time=null,i._numAtoms=null,i._residueNumber=null,i._residueName="",i._atomName="",i._atomNumber=null,i._atomPosition=[],i._atomVelocity=[],i._complex=null,i._molecules=[],i._molecule=null,i._options.filetype="gro",i}return C_(n,[{key:"canProbablyParse",value:function(e){return(0,R.isString)(this._data)&&/^\s*[^\n]*\n\s*\d+ *\n\s*\d+[^\n\d]{3}\s*\w+\s*\d+\s*-?\d/.test(e)}},{key:"_parseTitle",value:function(e){var t=this._complex.metadata;t.id=e.readLine().trim(),t.name=t.id.slice(t.id.lastIndexOf("\\")+1,t.id.lastIndexOf(".")),t.format="gro"}},{key:"_parseNumberOfAtoms",value:function(e){if(this._numAtoms=e.readInt(0,e.getNext()),Number.isNaN(this._numAtoms))throw new Error("Line 2 is not representing atom number. Consider checking input file")}},{key:"_parseAtom",value:function(e){this._residueNumber=e.readInt(1,5),this._residueName=e.readString(6,10).trim(),this._atomName=e.readString(11,15).trim(),this._atomNumber=e.readInt(16,20);var t=10*e.readFloat(21,28),n=10*e.readFloat(29,36),r=10*e.readFloat(37,45);if(Number.isNaN(t)||Number.isNaN(n)||Number.isNaN(r))this._complex.error={message:'Atom position is invalid in "'.concat(e.readLine(),'"')};else{var i=JR.getByName(this._atomName[0]);if("Unknown"!==i.fullName){var o=JR.Role[this._atomName],a=this._chain;a||(this._chain=a=this._complex.addChain("A"));var s=this._residue;s&&s.getSequence()===this._residueNumber||(this._residue=s=a.addResidue(this._residueName,this._residueNumber," ")),this._atomPosition=new lh(t,n,r);s.addAtom(this._atomName,i,this._atomPosition,o,!0,this._atomNumber," ",1,1,0)}else this._complex.error={message:"".concat(this._atomName[0]," hasn't been recognised as an atom name.")}}}},{key:"_finalize",value:function(){var e=new QR(this._complex,this._complex.metadata.name,1);e.residues=this._chain._residues,e._chains=this._chain,this._complex._molecules[0]=e,this._molecules.push(e),this._complex.finalize({needAutoBonding:!0,detectAromaticLoops:this.settings.now.aromatic,enableEditing:this.settings.now.editing,serialAtomMap:this._serialAtomMap})}},{key:"parseSync",value:function(){var e=this._complex=new $R,t=new YR(this._data),n=0;for(this._parseTitle(t),t.next(),this._parseNumberOfAtoms(t),t.next(),n=0;n<this._numAtoms&&!t.end();++n)this._parseAtom(t),t.next();if(n<this._numAtoms&&(this._complex.error={message:"File ended unexpectedly."}),e.error)throw new Error(e.error.message);return this._finalize(),this._atomPosition=null,this._complex=null,this._molecules=null,this._molecule=null,e}}]),n}(rP);function tI(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}eI.formats=["gro"],eI.extensions=[".gro"];var nI=DE.Complex,rI=DE.Element,iI=DE.Bond,oI=DE.Molecule,aI={un:0,1:1,2:2,3:3,ar:1,am:1,nc:0,du:1},sI={un:iI.BondType.UNKNOWN,1:iI.BondType.COVALENT,2:iI.BondType.COVALENT,3:iI.BondType.COVALENT,ar:iI.BondType.AROMATIC,am:iI.BondType.COVALENT,nc:iI.BondType.UNKNOWN,du:iI.BondType.COVALENT},uI=/\d+$/,lI=/\s+/;function cI(e){return e.trim().split(lI)}var fI=function(e){P_(n,e);var t=tI(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,e,r))._complex=null,i._chain=null,i._residue=null,i._compoundIndx=-1,i._molecules=[],i._molecule=null,i._currPosIdx=0,i._currStartIdx=0,i._serialAtomMap={},i._options.fileType="mol2",i}return C_(n,[{key:"_parseRawStrings",value:function(e){return e.split(/\r?\n|\r/)}},{key:"_toStringFromStart",value:function(e,t){var n=this._currStartIdx+e;this._currPosIdx=n<t.length?n:this._currStartIdx}},{key:"_toHeaderString",value:function(e,t){for(this._toStringFromStart(0,t);this._currPosIdx<t.length;){if(t[this._currPosIdx].match("@<TRIPOS>".concat(e)))return;this._currPosIdx++}this._toStringFromStart(0,t)}},{key:"_toStringFromHeader",value:function(e,t,n){this._toHeaderString(e,n);var r=this._currPosIdx+t;n[this._currPosIdx].match("@<TRIPOS>".concat(e))&&r<n.length&&(this._currPosIdx=r)}},{key:"_setStart",value:function(e,t){e>=t.length?this._currStartIdx=this._currPosIdx=t.length-1:this._currStartIdx=this._currPosIdx=e}},{key:"_probablyHaveDataToParse",value:function(e){return this._currPosIdx<e.length-2}},{key:"_findNextCompoundStart",value:function(e){for(;this._currPosIdx<e.length&&"@<TRIPOS>MOLECULE>"!==e[this._currPosIdx].trim();)this._currPosIdx++;return this._setStart(++this._currPosIdx,e),this._probablyHaveDataToParse(e)}},{key:"_parseMolecule",value:function(e){this._toHeaderString("MOLECULE",e);var t=this._complex.metadata;t.name=e[++this._currPosIdx],t.format="mol2",this._molecule={_index:"",_chains:[]},this._molecule._index=this._compoundIndx+1,this._molecules.push(this._molecule)}},{key:"_parseAtoms",value:function(e,t){this._toHeaderString("ATOM",t);for(var n=0;n<e;n++){var r=cI(t[++this._currPosIdx]);if(r.length<6)throw new Error("MOL2 parsing error: Not enough information to create atom!");var i=parseInt(r[0],10),o=r[1],a=parseFloat(r[2]),s=parseFloat(r[3]),u=parseFloat(r[4]),l=r[5].split(".")[0].toUpperCase(),c=0;r.length>=9&&(c=parseFloat(r[8])||0);var f=this._chain;if(f||(this._chain=f=this._complex.getChain("A")||this._complex.addChain("A"),this._residue=null),this._setResidue(r)){var h=rI.getByName(l),d=rI.Role[o],p=new lh(a,s,u);this._residue.addAtom(o,h,p,d,!1,i," ",1,0,c)}}}},{key:"_setResidue",value:function(e){var t=1,n="UNK";if(e.length>=7&&(t=parseInt(e[6],10)),e.length>=8&&"<0>"!==e[7]&&(n=e[7].replace(uI,"")),this.settings.now.nowater&&("HOH"===n||"WAT"===n))return!1;var r=this._residue,i=this._chain;return r&&r.getSequence()===t||(this._residue=i.addResidue(n,t,"A")),!0}},{key:"_parseBonds",value:function(e,t){this._toHeaderString("BOND",t);for(var n=0;n<e;n++){var r=cI(t[++this._currPosIdx]);if(r.length<3)throw new Error("MOL2 parsing error: Missing information about bonds!");var i=parseInt(r[1],10),o=parseInt(r[2],10),a=r[3];if(i>o){var s=[o,i];i=s[0],o=s[1]}this._complex.addBond(i,o,aI[a]||0,sI[a]||iI.BondType.UNKNOWN,!0)}}},{key:"_fixSerialAtoms",value:function(){for(var e=this._complex._atoms,t=0;t<e.length;t++){var n=e[t];this._serialAtomMap[n.serial]=n}}},{key:"_fixBondsArray",value:function(){var e=this._serialAtomMap,t=this._complex;if(0===Object.keys(e).length)throw new Error("MOL2 parsing error: Missing atom information!");for(var n=t._bonds,r=0;r<n.length;r++){var i=n[r];i._left=e[i._left]||null,i._right=e[i._right]||null}}},{key:"_finalizeMolecules",value:function(){var e=this._complex._chains[0];this._complex._molecules=[];for(var t=0;t<this._molecules.length;t++){var n=this._molecules[t],r=e._residues,i=new oI(this._complex,n._name,t+1);i.residues=r,this._complex._molecules[t]=i}}},{key:"_finalize",value:function(){this._complex._finalizeBonds(),this._fixSerialAtoms(),this._fixBondsArray(),this._finalizeMolecules(),this._complex.finalize({needAutoBonding:!1,detectAromaticLoops:this.settings.now.aromatic,enableEditing:this.settings.now.editing,serialAtomMap:this._serialAtomMap})}},{key:"_parseCompound",value:function(e){this._compoundIndx++,this._parseMolecule(e),this._toStringFromHeader("MOLECULE",2,e);var t=e[this._currPosIdx].trim().split(lI),n=t[0],r=t[1];this._parseAtoms(n,e),this._parseBonds(r,e)}},{key:"parseSync",value:function(){var e=this._complex=new nI,t=this._parseRawStrings(this._data);do{this._parseCompound(t)}while(this._findNextCompoundStart(t));return this._finalize(),e}}]),n}(rP);fI.formats=["mol2"],fI.extensions=[".mol2",".ml2",".sy2"];var hI=new nP([yP,lR,ZP,SR,OP,AR,ZR,yR,qR,eI,fI]);function dI(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var pI=function(e){P_(n,e);var t=dI(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return O_(this,n),t.call(this,e,["formats"])}return C_(n,[{key:"find",value:function(e){var t=[];return e.format&&(t=this._dict.formats[e.format.toLowerCase()]||[]),QE(t)}}]),n}(tk),vI=function(){function e(t,n){O_(this,e),this._source=t,this._options=n||{},this._abort=!1}return C_(e,[{key:"exportSync",value:function(){throw new Error("Exporting to this source is not implemented")}},{key:"export",value:function(){var e=this;return new Promise((function(t,n){setTimeout((function(){try{return e._abort?n(new Error("Export aborted")):t(e.exportSync())}catch(r){return n(r)}}))}))}},{key:"abort",value:function(){this._abort=!0}}]),e}();nk(vI.prototype);var mI=function(){function e(){O_(this,e),this._resultArray=[],this._currentStr=-1,this._tag=null,this._fixedNumeration=!1,this._numeration=!1,this._tagStrNum=0}return C_(e,[{key:"getResult",value:function(){return this.writeString("\n",81,81),this._resultArray.join("")}},{key:"_currentStrLength",value:function(){var e=this._resultArray[this._currentStr];return e?e.length:0}},{key:"newTag",value:function(e,t){this._tag=e||null,(0,R.isUndefined)(t)?(this._numeration=!1,this._fixedNumeration=!1,this._tagStrNum=0):(0,R.isNumber)(t)?(this._tagStrNum=t,this._numeration=!0,this._fixedNumeration=!0):(0,R.isBoolean)(t)&&(this._tagStrNum=0,this._numeration=t,this._fixedNumeration=!1)}},{key:"newString",value:function(e){this.writeString("\n",81,81),this._currentStr++,this._resultArray.push(""),e?this.writeString(e,1,6):this._tag&&this.writeString(this._tag,1,6),this._numeration&&(this._fixedNumeration||this._tagStrNum++,1!==this._tagStrNum&&this.writeString(this._tagStrNum.toString(),10,8))}},{key:"writeEntireString",value:function(e,t,n){t||(t=81);for(var r=0;r<e.length;r++)this._currentStrLength()===t&&r!==e.length-1&&(this.newString(),n&&this.writeString(n.tag,n.begin,n.end)),"\n"===e[r]?this.newString():this.writeString(e[r])}},{key:"writeString",value:function(e,t,n){var r,i=this._resultArray[this._currentStr],o=i?i.length:0;if(!(0,R.isUndefined)(e)){(0,R.isNumber)(t)||(t=o+1),(0,R.isNumber)(n)||(n=o+e.length);var a=t<n?n:t,s=t<n?t:n;if((r=(0,R.isString)(e)?e:e.toString()).length>Math.abs(t-n)+1&&(r=r.substr(0,Math.abs(t-n+1))),s>o+1)this._resultArray[this._currentStr]+=" ".repeat(s-o-1);else if(s<=o){var u=this._resultArray[this._currentStr];this._resultArray[this._currentStr]=u.slice(0,s-1)}if(n<t)r=" ".repeat(t-n+1-r.length)+r;11===s&&this._numeration&&1!==this._tagStrNum&&(r=" ".concat(r)),this._resultArray[this._currentStr]+=r,a>(i=this._resultArray[this._currentStr]).length&&(this._resultArray[this._currentStr]+=" ".repeat(a-i.length))}}},{key:"writeBondsArray",value:function(e,t){for(var n=this._getSubArrays(e,4),r=0;r<n.length;r++){this.newString(),this.writeString(t.serial,11,7);for(var i=0;i<n[r].length;i++){var o=n[r][i]._left.serial===t.serial?n[r][i]._right.serial:n[r][i]._left.serial;this.writeString(o,16+5*i,12+5*i)}}}},{key:"_getSubArrays",value:function(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}},{key:"writeMatrix",value:function(e,t,n){for(var r=0;r<3;r++){this.newString(),this.writeString(n,14,18),this.writeString((r+1).toString(),19,19),this.writeString(t.toString(),23,20);for(var i=0;i<3;i++){var o=parseFloat(e.elements[4*r+i]).toFixed(6);this.writeString(o.toString(),33+10*i,24+10*i)}var a=parseFloat(e.elements[4*r+3]).toFixed(5);this.writeString(a.toString(),68,55)}}},{key:"writeMatrices",value:function(e,t){if(e)for(var n=new Fh,r=0;r<e.length;r++)n.copy(e[r]).transpose(),this.writeMatrix(n,r+1,t)}}]),e}();function gI(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var yI=function(e){P_(n,e);var t=gI(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,e,r))._tags=["HEADER","TITLE","COMPND","REMARK","HELIX","SHEET","ATOM and HETATM","CONECT"],i._result=null,i._tagExtractors={HEADER:i._extractHEADER,TITLE:i._extractTITLE,"ATOM and HETATM":i._extractATOM,CONECT:i._extractCONECT,COMPND:i._extractCOMPND,REMARK:i._extractREMARK,HELIX:i._extractHELIX,SHEET:i._extractSHEET},i._stringForRemark350="COORDINATES FOR A COMPLETE MULTIMER REPRESENTING THE KNOWN\nBIOLOGICALLY SIGNIFICANT OLIGOMERIZATION STATE OF THE\nMOLECULE CAN BE GENERATED BY APPLYING BIOMT TRANSFORMATIONS\nGIVEN BELOW.  BOTH NON-CRYSTALLOGRAPHIC AND\nCRYSTALLOGRAPHIC OPERATIONS ARE GIVEN.",i._stringForRemark290="CRYSTALLOGRAPHIC SYMMETRY TRANSFORMATIONS\nTHE FOLLOWING TRANSFORMATIONS OPERATE ON THE ATOM/HETATM\nRECORDS IN THIS ENTRY TO PRODUCE CRYSTALLOGRAPHICALLY\nRELATED MOLECULES.",i}return C_(n,[{key:"exportSync",value:function(){var e=new mI;if(!this._source)return this._result;for(var t=0;t<this._tags.length;t++){var n=this._tags[t],r=this._tagExtractors[n];"function"===typeof r&&r.call(this,e)}return this._result=e.getResult(),this._result}},{key:"_extractHEADER",value:function(e){if(this._source.metadata){var t=this._source.metadata;e.newTag("HEADER"),e.newString(),t.classification&&e.writeString(t.classification,11,50),t.date&&e.writeString(t.date,51,59),t.id&&e.writeString(t.id,63,66)}}},{key:"_extractTITLE",value:function(e){if(this._source.metadata){var t=this._source.metadata;if(t.title){e.newTag("TITLE",!0);for(var n=0;n<t.title.length;n++)e.newString(),e.writeString(t.title[n],11,80)}}}},{key:"_extractCONECT",value:function(e){if(this._source._atoms){var t=this._source._atoms;e.newTag("CONECT");for(var n=0;n<t.length;n++){var r=t[n].bonds.filter((function(e){return e._fixed}));0!==r.length&&e.writeBondsArray(r.reverse(),t[n])}}}},{key:"_extractSHEET",value:function(e){if(this._source._sheets){e.newTag("SHEET");for(var t=this._source._sheets,n=0;n<t.length;n++)if(t[n]._strands)for(var r=t[n]._strands,i=0;i<r.length;i++)e.newString(),e.writeString(i+1,10,8),e.writeString(t[n]._name,14,12),e.writeString(r.length,16,15),e.writeString(r[i].init._type._name,18,20),e.writeString(r[i].init._chain._name,22,22),e.writeString(r[i].init._sequence,26,23),e.writeString(r[i].init._icode,27,27),e.writeString(r[i].term._type._name,29,31),e.writeString(r[i].init._chain._name,33,33),e.writeString(r[i].term._sequence,37,34),e.writeString(r[i].term._icode,38,38),e.writeString(r[i].sense,40,39)}}},{key:"_extractHELIX",value:function(e){if(this._source._helices){e.newTag("HELIX");for(var t=this._source._helices,n=0;n<t.length;n++){var r=t[n],i=(0,R.invert)(dS);e.newString(),e.writeString(r.serial,10,8),e.writeString(r.name,14,12),e.writeString(r.init._type._name,16,18),e.writeString(r.init._chain._name,20,20),e.writeString(r.init._sequence,25,22),e.writeString(r.init._icode,26,26),e.writeString(r.term._type._name,28,30),e.writeString(r.term._chain._name,32,32),e.writeString(r.term._sequence,37,34),e.writeString(r.term._icode,38,38),e.writeString(i[r.type],40,39),e.writeString(r.comment,41,70),e.writeString(r.length,76,72)}}}},{key:"_extractATOM",value:function(e){if(this._source._atoms)for(var t=this._source._atoms,n=0;n<t.length;n++){var r=t[n].het?"HETATM":"ATOM";e.newString(r);var i=t[n].element.name.length>1||t[n].name.length>3?13:14;e.writeString(t[n].serial,11,7),e.writeString(t[n].name,i,16),e.writeString(String.fromCharCode(t[n].location),17,17),e.writeString(t[n].residue._type._name,20,18),e.writeString(t[n].residue._chain._name,22,22),e.writeString(t[n].residue._sequence,26,23),e.writeString(t[n].residue._icode,27,27),e.writeString(t[n].position.x.toFixed(3),38,31),e.writeString(t[n].position.y.toFixed(3),46,39),e.writeString(t[n].position.z.toFixed(3),54,47),e.writeString(t[n].occupancy.toFixed(2),60,55),e.writeString(t[n].temperature.toFixed(2),66,61),e.writeString(t[n].element.name,78,77),t[n].charge&&e.writeString(t[n].charge,79,80)}}},{key:"_extractCOMPND",value:function(e){if(this._source._molecules){var t=this._source._molecules;e.newTag("COMPND",!0);for(var n=0;n<t.length;n++){var r=this._getMoleculeChains(t[n]);e.newString(),e.writeString("MOL_ID: ".concat(t[n].index,";"),11,80),e.newString(),e.writeString("MOLECULE: ".concat(t[n].name,";"),11,80),e.newString(),e.writeString("CHAIN: ",11,18);var i="".concat(r.join(", "),";");e.writeEntireString(i,81)}}}},{key:"_extractREMARK",value:function(e){this._Remark290(e),this._Remark350(e)}},{key:"_Remark290",value:function(e){if(this._source.symmetry&&0!==this._source.symmetry.length){var t=this._source.symmetry;e.newTag("REMARK",290),e.newString(),e.newString(),e.writeEntireString(this._stringForRemark290),e.writeMatrices(t,"SMTRY"),e.newString(),e.newString(),e.writeString("REMARK: NULL",11,80)}}},{key:"_Remark350",value:function(e){if(this._source.units){var t=this._source.units,n=0;e.newTag("REMARK",350),e.newString(),e.newString(),e.writeEntireString(this._stringForRemark350);for(var r=t.filter((function(e){return e instanceof XS})),i=0;i<r.length;i++){e.newString(),e.newString(),n++,e.writeString("BIOMOLECULE: ".concat(n),11,80);var o=r[i].chains.join(", ");e.newString(),e.writeString("APPLY THE FOLLOWING TO CHAINS: "),e.writeEntireString(o,69,{tag:"AND CHAINS: ",begin:31,end:42});var a=r[i].matrices;e.writeMatrices(a,"BIOMT")}}}},{key:"_getMoleculeChains",value:function(e){var t=e.residues.map((function(e){return e._chain._name}));return t.filter((function(e,n){return t.indexOf(e)===n}))}}]),n}(vI);yI.formats=["pdb"],yI.SourceClass=IE;function bI(e,t,n,r){n[r]=e[t],n[r+1]=e[t+1],n[r+2]=e[t+2]}function xI(e,t,n,r,i){n[r]=e[t],n[r+1]=e[t+1],n[r+2]=e[t+2],n[r+3]=i}var _I=new ih;function wI(e,t,n,r,i){_I.set(e[t],e[t+1],e[t+2],i.w),_I.applyMatrix4(i.matrix),n[r]=_I.x,n[r+1]=_I.y,n[r+2]=_I.z}function SI(e,t,n,r,i){if(!((t.array.length-t.start)/t.stride<n||(e.array.length-e.start)/e.stride<n))if(e.stride===t.stride)t.array.set(e.array,t.start);else for(var o=t.start,a=e.start,s=0;s<n;++s,o+=t.stride,a+=e.stride)r(e.array,a,t.array,o,i)}var EI=function(){function e(){O_(this,e),this.positions=null,this.normals=null,this.colors=null,this.indices=null,this.lastPos=0,this.lastNorm=0,this.lastCol=0,this.lastIdx=0}return C_(e,[{key:"init",value:function(e,t){this.positions=new Float32Array(3*e),this.normals=new Float32Array(3*e),this.colors=new Float32Array(4*e),this.indices=new Int32Array(t)}},{key:"setPositions",value:function(e,t,n,r){SI({array:e,start:t,stride:r},{array:this.positions,start:this.lastPos,stride:3},n,bI),this.lastPos+=3*n}},{key:"setTransformedPositions",value:function(e,t,n,r,i){for(var o=this.lastPos,a=t,s={matrix:i,w:1},u=0;u<n;++u,a+=r,o+=3)wI(e,a,this.positions,o,s);this.lastPos+=3*n}},{key:"setNormals",value:function(e,t,n,r){SI({array:e,start:t,stride:r},{array:this.normals,start:this.lastNorm,stride:3},n,bI),this.lastNorm+=3*n}},{key:"setTransformedNormals",value:function(e,t,n,r,i){for(var o=this.lastNorm,a=t,s={matrix:i,w:0},u=0;u<n;++u,a+=r,o+=3)wI(e,a,this.normals,o,s);this.lastNorm+=3*n}},{key:"setColors",value:function(e,t,n,r){SI({array:e,start:t,stride:r},{array:this.colors,start:this.lastCol,stride:4},n,xI,1),this.lastCol+=4*n}},{key:"setIndices",value:function(e,t,n){this.indices.set(e,this.lastIdx),this.lastIdx+=n}},{key:"setShiftedIndices",value:function(e,t,n){var r=e.map((function(e){return e+n}));this.setIndices(r,0,t)}},{key:"getVerticesNumber",value:function(){return this.lastPos/3}},{key:"addInstance",value:function(e,t){var n=this.getVerticesNumber();this.setShiftedIndices(t.indices,t.indices.length,n);var r=t.itemSize;this.setTransformedPositions(t.positions,0,t.vertsCount,r.position,e),this.setTransformedNormals(t.normals,0,t.vertsCount,r.normal,e),this.setColors(t.colors,0,t.vertsCount,r.color)}}]),e}(),kI=function(){function e(){O_(this,e),this.positions=null,this.normals=null,this.colors=null,this.indices=null,this.vertsCount=0,this.itemSize=null}return C_(e,[{key:"init",value:function(e,t){var n=e.attributes;this.itemSize={position:n.position.itemSize,normal:n.normal.itemSize,color:n.color.itemSize}}}]),e}();function OI(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var AI=function(e){P_(n,e);var t=OI(n);function n(){return O_(this,n),t.apply(this,arguments)}return C_(n,[{key:"init",value:function(e,t){mS(I_(n.prototype),"init",this).call(this,e,t);var r=e.attributes,i=r.position,o=r.normal,a=e.index;this.vertsCount=i.count,this.positions=i.array,this.normals=o.array,this.colors=new Float32Array(this.vertsCount*this.itemSize.color),this.indices=a.array}},{key:"setColors",value:function(e){for(var t=0,n=0,r=this.colors.length,i=this.itemSize.color;n<r;n+=i)this.colors[t++]=e.r,this.colors[t++]=e.g,this.colors[t++]=e.b}}]),n}(kI);function CI(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var MI=function(e){P_(n,e);var t=CI(n);function n(){var e;return O_(this,n),(e=t.call(this))._cutRawStart=0,e._cutRawEnd=0,e._facesPerSlice=0,e}return C_(n,[{key:"init",value:function(e,t){mS(I_(n.prototype),"init",this).call(this,e,t);var r=e.attributes.position,i=e.index;this.vertsCount=r.count+t.addPerCylinder,this._facesPerSlice=t.addPerCylinder,this.positions=new Float32Array(this.vertsCount*r.itemSize),this.normals=new Float32Array(this.vertsCount*this.itemSize.normal),this.colors=new Float32Array(this.vertsCount*this.itemSize.color),this._extendVertices(e,t),this.indices=new Uint32Array(i.count),this._extendIndices(e,t)}},{key:"_extendVertices",value:function(e,t){var n=e.attributes.position,r=e.attributes.normal,i=e.getGeoParams();this._cutRawStart=1*i.radialSegments,this._cutRawEnd=this._cutRawStart+t.addPerCylinder;var o=n.array.slice(0,this._cutRawEnd*n.itemSize);this.positions.set(o,0),o=r.array.slice(0,this._cutRawEnd*r.itemSize),this.normals.set(o,0);var a=n.array.slice(this._cutRawStart*n.itemSize,n.array.length);this.positions.set(a,this._cutRawEnd*n.itemSize),a=r.array.slice(this._cutRawStart*r.itemSize,r.array.length),this.normals.set(a,this._cutRawEnd*r.itemSize)}},{key:"_extendIndices",value:function(e,t){var n=e.index,r=6*t.addPerCylinder,i=t.addPerCylinder,o=n.array.slice(r,n.count);o=o.map((function(e){return e+i})),this.indices.set(n.array,0),this.indices.set(o,r)}},{key:"_setColorRange",value:function(e,t,n,r){for(var i=r.length,o=e;o<t;o+=i)n.set(r,o)}},{key:"setColors",value:function(e,t){var n=this.itemSize.color,r=this._cutRawEnd*n,i=2*r;if(this._setColorRange(0,r,this.colors,e.toArray()),this._setColorRange(r,i,this.colors,t.toArray()),i<this.colors.length){var o=(this._facesPerSlice+1)*n,a=i+o;this._setColorRange(i,a,this.colors,t.toArray());var s=a+o;this._setColorRange(a,s,this.colors,e.toArray())}}}]),n}(kI),TI=function(){function e(){O_(this,e),this._materials=[],this._models=[]}return C_(e,[{key:"process",value:function(e){this._extractModelsAndMaterials(e);var t=this._flattenModels();return{name:e.name,models:t,materials:this._materials}}},{key:"_extractModelsAndMaterials",value:function(e){var t=this,n=new $h;n.set(YE.LAYERS.DEFAULT),n.enable(YE.LAYERS.TRANSPARENT),e.traverse((function(e){e instanceof fp&&e.layers.test(n)&&t.checkExportAbility(e)&&("InstancedBufferGeometry"===e.geometry.type?t._collectInstancedGeoInfo(e):t._collectGeoInfo(e))}))}},{key:"_reworkIndices",value:function(e){for(var t=2;t<e.length;t+=3)e[t]*=-1,e[t]--}},{key:"_flattenModels",value:function(){var e=0;function t(t){return t+e}for(var n=[],r=0,i=this._models.length;r<i;r++){var o=this._models[r],a=[],s=[],u=[],l=[];e=0;for(var c=0;c<o.length;c++){var f=o[c];a.push(f.indices.map(t)),e+=f.getVerticesNumber(),s.push(f.positions),u.push(f.normals),l.push(f.colors)}a=mw.mergeTypedArraysUnsafe(a),this._reworkIndices(a),s=mw.mergeTypedArraysUnsafe(s),u=mw.mergeTypedArraysUnsafe(u),l=mw.mergeTypedArraysUnsafe(l),n.push({indices:a,positions:s,normals:u,colors:l,verticesCount:e})}return n}},{key:"checkExportAbility",value:function(e){return 0!==e.geometry.attributes.position.count&&(e instanceof eA?(nw.warn("Currently we cannot export 'sprites' modes, like BS, WV, LC. Please turn of settings 'zSprites' and try again"),!1):!(e instanceof fA)||(nw.warn("Currently we cannot export Lines mode"),!1))}},{key:"_collectGeoInfo",value:function(e){var t=e.geometry,n=t.attributes,r=n.position,i=n.color,o=n.normal,a=t.index,s=e.matrix,u=new EI,l=r.count;u.init(l,a.count),s.isIdentity()?(u.setPositions(r.array,0,l,r.itemSize),u.setNormals(o.array,0,l,o.itemSize)):(u.setTransformedPositions(r.array,0,l,r.itemSize,s),u.setTransformedNormals(o.array,0,l,o.itemSize,s)),u.setColors(i.array,0,l,i.itemSize),u.setIndices(a.array,0,a.count);var c=this._collectMaterialInfo(e);this._addToPool(u,c)}},{key:"_collectSpheresInfo",value:function(e){var t=e.geometry,n=t.attributes,r=n.position,i=n.color,o=t.index,a=e.matrix,s=new EI,u=e.geometry.instanceCount,l=r.count,c=o.count;s.init(u*l,u*c);var f=new AI;f.init(e.geometry);for(var h=new Fh,d=new Fh,p=new Pd,v=0;v<u;++v){var m=v*i.itemSize;p.fromArray(i.array,m),f.setColors(p),this._getSphereInstanceMatrix(e.geometry,v,h),d.multiplyMatrices(a,h),s.addInstance(d,f)}var g=this._collectMaterialInfo(e);this._addToPool(s,g)}},{key:"_collectCylindersInfo",value:function(e){var t=e.geometry,n=t.attributes,r=n.position,i=n.color,o=n.color2,a=t.index,s=e.matrix,u=new EI,l=e.geometry.instanceCount,c=new AI;c.init(e.geometry);var f=this._gatherCylindersColoringInfo(e.geometry),h=null;f.needToSplit>0&&(h=new MI).init(e.geometry,f);var d=f.addPerCylinder*f.needToSplit,p=r.count,v=a.count;u.init(l*p+d,l*v);for(var m=new Fh,g=new Fh,y=new Pd,b=new Pd,x={},_=0;_<l;++_){var w=_*i.itemSize;f.is2Colored[_]?(y.fromArray(o.array,w),b.fromArray(i.array,w),h&&(h.setColors(y,b),x=h)):(y.fromArray(i.array,w),c.setColors(y),x=c),this._getCylinderInstanceMatrix(e.geometry,_,m),g.multiplyMatrices(s,m),u.addInstance(g,x)}var S=this._collectMaterialInfo(e);this._addToPool(u,S)}},{key:"_addToPool",value:function(e,t){var n=this._checkExistingMaterial(t);n<0?(this._models.push([e]),this._materials.push(t)):this._models[n].push(e)}},{key:"_checkExistingMaterial",value:function(e){return(0,R.findIndex)(this._materials,(function(t){return(0,R.isEqual)(t,e)}))}},{key:"_gatherCylindersColoringInfo",value:function(e){for(var t=e.instanceCount,n=e.attributes.color.array,r=e.attributes.color2.array,i=e.attributes.color.itemSize,o=new Array(t),a=0,s=0,u=0;u<t;u++,s+=i){var l=Math.abs(n[s]-r[s])>1e-7||Math.abs(n[s+1]-r[s+1])>1e-7||Math.abs(n[s+2]-r[s+2])>1e-7;o[u]=l,a+=l}return{is2Colored:o,needToSplit:a,addPerCylinder:e.getGeoParams().radialSegments}}},{key:"_collectInstancedGeoInfo",value:function(e){e.geometry instanceof lk?this._collectSpheresInfo(e):e.geometry instanceof Mk&&this._collectCylindersInfo(e)}},{key:"_collectMaterialInfo",value:function(e){var t=e.material.uberOptions;return{diffuse:t.diffuse.toArray(),opacity:t.opacity,shininess:t.shininess,specular:t.specular.toArray()}}},{key:"_getCylinderInstanceMatrix",value:function(e,t,n){var r=e.attributes.matVector1.array,i=e.attributes.matVector2.array,o=e.attributes.matVector3.array,a=4*t;n.set(r[a],r[a+1],r[a+2],r[a+3],i[a],i[a+1],i[a+2],i[a+3],o[a],o[a+1],o[a+2],o[a+3],0,0,0,1)}},{key:"_getSphereInstanceMatrix",value:function(e,t,n){var r=e.attributes.offset,i=t*r.itemSize,o=r.array[i],a=r.array[i+1],s=r.array[i+2],u=r.array[i+3];n.set(u,0,0,o,0,u,0,a,0,0,u,s,0,0,0,1)}}]),e}(),PI=function(){function e(){O_(this,e),this._resultArray=[],this._info=null}return C_(e,[{key:"getResult",value:function(e){return this._info=e,this._resultArray.push(this._writeHeader()),this._resultArray.push(this._writeDefinitions()),this._resultArray.push(this._writeObjects(e.models,e.materials)),this._resultArray.push(this._writeRelations()),this._resultArray.push(this._writeConnections()),this._info=null,this._resultArray.join("")}},{key:"_writeHeader",value:function(){var e=new Date,t="Miew FBX Exporter v".concat(this._info.version);return"; FBX 6.1.0 project file\n; Created by ".concat(t," Copyright (c) 2015-2020 EPAM Systems, Inc.\n; For support please contact miew@epam.com\n; ----------------------------------------------------\n\nFBXHeaderExtension:  {\n  FBXHeaderVersion: ").concat(1003,"\n  FBXVersion: ").concat(6100,"\n  CreationTimeStamp:  {\n    Version: ").concat(1e3,"\n    Year: ").concat(e.getFullYear(),"\n    Month: ").concat(e.getMonth()+1," \n    Day: ").concat(e.getDate(),"\n    Hour: ").concat(e.getHours(),"\n    Minute: ").concat(e.getMinutes(),"\n    Second: ").concat(e.getSeconds(),"\n    Millisecond: ").concat(e.getMilliseconds(),'\n  }\n  Creator: "').concat(t,'"\n  OtherFlags:  {\n    FlagPLE: 0\n  }\n}\nCreationTime: "').concat(e,'"\nCreator: "').concat(t,'"  \n')}},{key:"_writeDefinitions",value:function(){return"\n; Object definitions\n;------------------------------------------------------------------\n\n".concat('\nDefinitions:  {\n  Version: 100\n  Count: 3\n  ObjectType: "Model" {\n    Count: 1\n  }\n  ObjectType: "Geometry" {\n    Count: 1\n  }\n  ObjectType: "Material" {\n    Count: 1\n  }\n  ObjectType: "Pose" {\n    Count: 1\n  }\n  ObjectType: "GlobalSettings" {\n    Count: 1\n  }\n} ',"\n")}},{key:"_models",value:function(){for(var e="",t=this._info.models,n=0;n<t.length;++n){var r=t[n],i=r.verticesCount;e+='\n  Model: "Model::'.concat(this._info.name,"_").concat(n,'", "Mesh" {\n    Version: ').concat(232," \n    ").concat('Properties60: {\n      Property: "QuaternionInterpolate", "bool", "",0\n      Property: "Visibility", "Visibility", "A",1\n      Property: "Lcl Translation", "Lcl Translation", "A",0.000000000000000,0.000000000000000,-1789.238037109375000\n      Property: "Lcl Rotation", "Lcl Rotation", "A",0.000009334667643,-0.000000000000000,0.000000000000000\n      Property: "Lcl Scaling", "Lcl Scaling", "A",1.000000000000000,1.000000000000000,1.000000000000000\n      Property: "RotationOffset", "Vector3D", "",0,0,0\n      Property: "RotationPivot", "Vector3D", "",0,0,0\n      Property: "ScalingOffset", "Vector3D", "",0,0,0\n      Property: "ScalingPivot", "Vector3D", "",0,0,0\n      Property: "TranslationActive", "bool", "",0\n      Property: "TranslationMin", "Vector3D", "",0,0,0\n      Property: "TranslationMax", "Vector3D", "",0,0,0\n      Property: "TranslationMinX", "bool", "",0\n      Property: "TranslationMinY", "bool", "",0\n      Property: "TranslationMinZ", "bool", "",0\n      Property: "TranslationMaxX", "bool", "",0\n      Property: "TranslationMaxY", "bool", "",0\n      Property: "TranslationMaxZ", "bool", "",0\n      Property: "RotationOrder", "enum", "",0\n      Property: "RotationSpaceForLimitOnly", "bool", "",0\n      Property: "AxisLen", "double", "",10\n      Property: "PreRotation", "Vector3D", "",0,0,0\n      Property: "PostRotation", "Vector3D", "",0,0,0\n      Property: "RotationActive", "bool", "",0\n      Property: "RotationMin", "Vector3D", "",0,0,0\n      Property: "RotationMax", "Vector3D", "",0,0,0\n      Property: "RotationMinX", "bool", "",0\n      Property: "RotationMinY", "bool", "",0\n      Property: "RotationMinZ", "bool", "",0\n      Property: "RotationMaxX", "bool", "",0\n      Property: "RotationMaxY", "bool", "",0\n      Property: "RotationMaxZ", "bool", "",0\n      Property: "RotationStiffnessX", "double", "",0\n      Property: "RotationStiffnessY", "double", "",0\n      Property: "RotationStiffnessZ", "double", "",0\n      Property: "MinDampRangeX", "double", "",0\n      Property: "MinDampRangeY", "double", "",0\n      Property: "MinDampRangeZ", "double", "",0\n      Property: "MaxDampRangeX", "double", "",0\n      Property: "MaxDampRangeY", "double", "",0\n      Property: "MaxDampRangeZ", "double", "",0\n      Property: "MinDampStrengthX", "double", "",0\n      Property: "MinDampStrengthY", "double", "",0\n      Property: "MinDampStrengthZ", "double", "",0\n      Property: "MaxDampStrengthX", "double", "",0\n      Property: "MaxDampStrengthY", "double", "",0\n      Property: "MaxDampStrengthZ", "double", "",0\n      Property: "PreferedAngleX", "double", "",0\n      Property: "PreferedAngleY", "double", "",0\n      Property: "PreferedAngleZ", "double", "",0\n      Property: "InheritType", "enum", "",0\n      Property: "ScalingActive", "bool", "",0\n      Property: "ScalingMin", "Vector3D", "",1,1,1\n      Property: "ScalingMax", "Vector3D", "",1,1,1\n      Property: "ScalingMinX", "bool", "",0\n      Property: "ScalingMinY", "bool", "",0\n      Property: "ScalingMinZ", "bool", "",0\n      Property: "ScalingMaxX", "bool", "",0\n      Property: "ScalingMaxY", "bool", "",0\n      Property: "ScalingMaxZ", "bool", "",0\n      Property: "GeometricTranslation", "Vector3D", "",0,0,0\n      Property: "GeometricRotation", "Vector3D", "",0,0,0\n      Property: "GeometricScaling", "Vector3D", "",1,1,1\n      Property: "LookAtProperty", "object", ""\n      Property: "UpVectorProperty", "object", ""\n      Property: "Show", "bool", "",1\n      Property: "NegativePercentShapeSupport", "bool", "",1\n      Property: "DefaultAttributeIndex", "int", "",0\n      Property: "Color", "Color", "A+",0,0,0\n      Property: "Size", "double", "",100\n      Property: "Look", "enum", "",1\n    }',"\n    ").concat(this._verticesIndices(r.positions,r.indices),"\n    ").concat(this._normalLayer(r.normals)," \n    ").concat(this._colorLayer(r.colors,i)," \n    ").concat('\n    LayerElementMaterial: 0 {\n      Version: 101\n      Name: ""\n      MappingInformationType: "AllSame"\n      ReferenceInformationType: "Direct"\n      Materials: 0\n    }',"  \n    ").concat('\n    Layer: 0 {\n      Version: 100\n      LayerElement:  {\n        Type: "LayerElementNormal"\n        TypedIndex: 0\n      }\n      LayerElement:  {\n        Type: "LayerElementColor"\n        TypedIndex: 0\n      }\n      LayerElement:  {\n        Type: "LayerElementMaterial"\n        TypedIndex: 0\n      }\n    }',"\n  }")}return e}},{key:"_materials",value:function(){for(var e="",t=this._info.materials,n=0;n<t.length;++n){var r=t[n];e+='\n  Material: "Material::'.concat(this._info.name,"_").concat(n,'_default", "" {\n    Version: ').concat(102,'\n    ShadingModel: "lambert"\n    MultiLayer: 0\n    ').concat(this._materialProperties(r),"\n  }")}return e}},{key:"_writeObjects",value:function(){return"\n; Object properties\n;------------------------------------------------------------------\n\nObjects:  {\n  ".concat(this._models(),"\n  ").concat(this._materials(),"\n  ").concat('GlobalSettings: {\n    Version: 1000\n    Properties60:  {\n      Property: "UpAxis", "int", "",1\n      Property: "UpAxisSign", "int", "",1\n      Property: "FrontAxis", "int", "",2\n      Property: "FrontAxisSign", "int", "",1\n      Property: "CoordAxis", "int", "",0\n      Property: "CoordAxisSign", "int", "",1\n      Property: "UnitScaleFactor", "double", "",1\n    }\n  }',"\n}\n")}},{key:"_writeRelations",value:function(){for(var e="",t=0;t<this._info.models.length;++t)e+='\n  Model: "Model::'.concat(this._info.name,"_").concat(t,'", "Mesh" {\n  }');for(var n="",r=0;r<this._info.materials.length;++r)n+='\n  Material: "Material::'.concat(this._info.name,"_").concat(r,'_default", "" {\n  }');return"\n; Object relations\n;------------------------------------------------------------------\n\nRelations:  {\n  ".concat(e,'\n  Model: "Model::Producer Perspective", "Camera" {\n  }\n  Model: "Model::Producer Top", "Camera" {\n  }\n  Model: "Model::Producer Bottom", "Camera" {\n  }\n  Model: "Model::Producer Front", "Camera" {\n  }\n  Model: "Model::Producer Back", "Camera" {\n  }\n  Model: "Model::Producer Right", "Camera" {\n  }\n  Model: "Model::Producer Left", "Camera" {\n  }\n  Model: "Model::Camera Switcher", "CameraSwitcher" {\n  }\n  ').concat(n,"\n}")}},{key:"_writeConnections",value:function(){for(var e="",t=this._info.name,n=0;n<this._info.models.length;++n)e+='\n  Connect: "OO", "Model::'.concat(t,"_").concat(n,'", "Model::Scene"');for(var r="",i=0;i<this._info.materials.length;++i)r+='\n  Connect: "OO", "Material::'.concat(t,"_").concat(i,'_default", "Model::').concat(t,"_").concat(i,'"');return"\n; Object connections\n;------------------------------------------------------------------\n\nConnections:  {\n  ".concat(e,"\n  ").concat(r,"\n}")}},{key:"_floatArrayToString",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].toFixed(6);return t.join(",")}},{key:"_colorLayer",value:function(e,t){var n=this._floatArrayToString(e),r=QE(Array(t).keys());return"\n    LayerElementColor: ".concat(0," {\n      Version: ").concat(101,'\n      Name: "').concat("",'"\n      MappingInformationType: "ByVertice"\n      ReferenceInformationType: "Direct"\n      Colors: ').concat(n,"\n      ColorIndex: ").concat(r,"\n    }")}},{key:"_normalLayer",value:function(e){var t=this._floatArrayToString(e);return"\n    LayerElementNormal: ".concat(0," {\n      Version: ").concat(101,'\n      Name: "').concat("",'"\n      MappingInformationType: "ByVertice"\n      ReferenceInformationType: "Direct" \n      Normals: ').concat(t,"\n    }")}},{key:"_verticesIndices",value:function(e,t){var n=this._floatArrayToString(e);return"MultiLayer: ".concat(0,"\n    MultiTake: ").concat(1,"\n    Shading: ").concat("Y",'\n    Culling: "').concat("CullingOff",'"\n    Vertices: ').concat(n,"\n    PolygonVertexIndex: ").concat(t,"\n    GeometryVersion: ").concat(124)}},{key:"_materialProperties",value:function(e){return'Properties60:  {\n      Property: "ShadingModel", "KString", "", "Lambert"\n      Property: "MultiLayer", "bool", "",0\n      Property: "EmissiveColor", "ColorRGB", "",0,0,0\n      Property: "EmissiveFactor", "double", "",0.0000\n      Property: "AmbientColor", "ColorRGB", "",1,1,1\n      Property: "AmbientFactor", "double", "",0.0000\n      Property: "DiffuseColor", "ColorRGB", "",'.concat(e.diffuse,'\n      Property: "DiffuseFactor", "double", "",1.0000\n      Property: "Bump", "Vector3D", "",0,0,0\n      Property: "TransparentColor", "ColorRGB", "",1,1,1\n      Property: "TransparencyFactor", "double", "",0.0000\n      Property: "SpecularColor", "ColorRGB", "",').concat(e.specular,'\n      Property: "SpecularFactor", "double", "",1.0000\n      Property: "ShininessExponent", "double", "",').concat(e.shininess,'\n      Property: "ReflectionColor", "ColorRGB", "",0,0,0\n      Property: "ReflectionFactor", "double", "",1\n      Property: "Ambient", "ColorRGB", "",1,1,1\n      Property: "Diffuse", "ColorRGB", "",').concat(e.diffuse,'\n      Property: "Specular", "ColorRGB", "",').concat(e.specular,'\n      Property: "Shininess", "double", "",').concat(e.shininess,'\n      Property: "Opacity", "double", "",').concat(e.opacity,'\n      Property: "Reflectivity", "double", "",0\n    }')}}]),e}();function RI(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var II=function(e){P_(n,e);var t=RI(n);function n(e,r){var i;return O_(this,n),(i=t.call(this,e,r))._data=e,i._version=r.miewVersion||"0.0-UNSPECIFIED",i._extractor=new TI,i}return C_(n,[{key:"exportSync",value:function(){var e=new PI;if(!this._source)return this._result;var t=this._extractor.process(this._data);return t.version=this._version,this._result=e.getResult(t),this._result}}]),n}(vI);II.formats=["fbx"],II.SourceClass=MT;var LI={loaders:eP,parsers:hI,exporters:new pI([yI,II])},NI=new Pd,jI=function(){function e(){O_(this,e),this._width=0,this._height=0,this._widthHalf=0,this._heightHalf=0,this._vector=new lh,this._viewMatrix=new Fh,this._projectionMatrix=new Fh,this._domElement=document.createElement("div"),this._domElement.style.overflow="hidden",this._domElement.style.position="absolute",this._domElement.style.top="0",this._domElement.style.zIndex="0",this._domElement.style.pointerEvents="none"}return C_(e,[{key:"getElement",value:function(){return this._domElement}},{key:"reset",value:function(){for(var e=this.getElement();e.firstChild;)e.removeChild(e.firstChild)}},{key:"setSize",value:function(e,t){this._width=e,this._height=t,this._widthHalf=this._width/2,this._heightHalf=this._height/2,this._domElement.style.width="".concat(e,"px"),this._domElement.style.height="".concat(t,"px")}},{key:"_renderObject",value:function(e,t,n){function r(e,t,n){return NI.setHex(e),NI.lerp(t,n),"#".concat(NI.getHexString())}function i(e){return NI.setHex(e),"#".concat(NI.getHexString())}if(e instanceof zE){if(this._vector.setFromMatrixPosition(e.matrixWorld),void 0!==e.userData&&void 0!==e.userData.offset){var o=new lh(e.userData.offset.x,e.userData.offset.y,0);this._vector.add(o.multiplyScalar(e.matrixWorld.getMaxScaleOnAxis()))}this._vector.applyMatrix4(this._viewMatrix);var a=this._vector.z>-t.near?"hidden":"visible",s=1e4*(t.far- -this._vector.z)/(t.far-t.near),u=e.getElement();if("undefined"===typeof n.fog)u.style.color=i(e.userData.color),"transparent"!==e.userData.background&&(u.style.background=i(e.userData.background));else{var l=Xf.smoothstep(-this._vector.z,n.fog.near,n.fog.far);u.style.color=r(e.userData.color,n.fog.color,l),"transparent"!==e.userData.background&&(u.style.background=r(e.userData.background,n.fog.color,l))}this._vector.applyMatrix4(this._projectionMatrix);var c="".concat(e.userData!=={}?e.userData.translation:"translate(-50%, -50%) ","translate(").concat(this._vector.x*this._widthHalf+this._widthHalf,"px,").concat(-this._vector.y*this._heightHalf+this._heightHalf,"px)");u.style.visibility=a,u.style.WebkitTransform=c,u.style.MozTransform=c,u.style.oTransform=c,u.style.transform=c,u.style.zIndex=Number(s).toFixed(0),u.parentNode!==this._domElement&&this._domElement.appendChild(u)}for(var f=0,h=e.children.length;f<h;f++)this._renderObject(e.children[f],t,n)}},{key:"render",value:function(e,t){e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.copy(t.matrixWorld).invert(),this._viewMatrix.copy(t.matrixWorldInverse),this._projectionMatrix.copy(t.projectionMatrix),this._renderObject(e,t,e)}}]),e}(),DI=-1,BI=0,zI=1,FI=2,VI=3,UI=new uh,ZI=new Fh;function HI(e,t,n,r){this.objects=e;var i=j_(e,1);this.object=i[0],this.camera=t,this.pivot=n,this.axis=new lh(0,0,1),this.options=r,this.lastRotation={axis:new lh,angle:0}}function GI(e,t,n,r,i){J_.call(this);var o=this;this.object=e,this.objectPivot=t,this.camera=n,this.domElement="undefined"!==typeof r?r:document,this.getAltObj=i,this.enabled=!0,this.hotkeysEnabled=!0,this.screen={left:0,top:0,width:0,height:0},this.options={rotateFactor:Math.PI,axisRotateFactor:4*Math.PI,intertia:!0,dynamicDampingFactor:.1,intertiaThreshold:.001},this._state=DI,this._mousePrevPos=new $f,this._mouseCurPos=new $f,this._mainObj=new HI([this.object],this.camera,new lh(0,0,0),this.options),this._altObj=new HI([this.object],this.camera,new lh(0,0,0),this.options),this._affectedObj=this._mainObj,this._isAltObjFreeRotationAllowed=!0,this._isTranslationAllowed=!0,this._isKeysTranslatingObj=!1,this._pressedKeys=[],this._clock=new H_,this._clock.start(),this._lastUpdateTime=this._clock.getElapsedTime(),this._listeners=[{obj:o.domElement,type:"mousedown",handler:function(e){o.mousedown(e)}},{obj:o.domElement,type:"mouseup",handler:function(e){o.mouseup(e)}},{obj:o.domElement,type:"mousemove",handler:function(e){o.mousemove(e)}},{obj:o.domElement,type:"mousewheel",handler:function(e){o.mousewheel(e)}},{obj:o.domElement,type:"DOMMouseScroll",handler:function(e){o.mousewheel(e)}},{obj:o.domElement,type:"mouseout",handler:function(e){o.mouseup(e)}},{obj:o.domElement,type:"touchstart",handler:function(e){o.touchstartend(e)}},{obj:o.domElement,type:"touchend",handler:function(e){o.touchstartend(e)}},{obj:o.domElement,type:"touchmove",handler:function(e){o.touchmove(e)}},{obj:o.getKeyBindObject(),type:"keydown",handler:function(e){o.keydownup(e)}},{obj:o.getKeyBindObject(),type:"keyup",handler:function(e){o.keydownup(e)}},{obj:window,type:"resize",handler:function(){o.handleResize()}},{obj:window,type:"blur",handler:function(){o.resetKeys()}},{obj:o.domElement,type:"contextmenu",handler:function(e){o.contextmenu(e)}}];for(var a=0;a<this._listeners.length;a++){var s=this._listeners[a];s.obj.addEventListener(s.type,s.handler)}this.handleResize(),this.resetKeys(),this.update()}function WI(e,t,n){J_.call(this);var r=this;this.gfxObj=e,this.camera=t,this.domElement="undefined"!==typeof n?n:document,this.screen={left:0,top:0,width:0,height:0},this._lastMousePos=new $f(0,0),this._mouseTotalDist=0,this._lastClickBeginTime=-1e3,this._lastClickPos=new $f(0,0),this._clickBeginTime=0,this._clock=new H_,this._clock.start(),this._listeners=[{obj:r.domElement,type:"mousedown",handler:function(e){r.mousedown(e)}},{obj:r.domElement,type:"mouseup",handler:function(e){r.mouseup(e)}},{obj:r.domElement,type:"mousemove",handler:function(e){r.mousemove(e)}},{obj:r.domElement,type:"touchstart",handler:function(e){r.touchstart(e)}},{obj:r.domElement,type:"touchend",handler:function(e){r.touchend(e)}},{obj:window,type:"resize",handler:function(){r.handleResize()}}];for(var i=0;i<this._listeners.length;i++){var o=this._listeners[i];o.obj.addEventListener(o.type,o.handler)}this.handleResize()}HI.prototype._rotate=function(){var e=new lh,t=new uh,n=new lh,r=new Fh;return function(i){var o=0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z;if(r.copy(this.object.matrix),o?r.multiply(ZI.makeRotationFromQuaternion(i)):(r.multiply(ZI.makeTranslation(this.pivot.x,this.pivot.y,this.pivot.z)),r.multiply(ZI.makeRotationFromQuaternion(i)),r.multiply(ZI.makeTranslation(-this.pivot.x,-this.pivot.y,-this.pivot.z))),r.decompose(e,t,n),!o)for(var a=0;a<this.objects.length;++a)this.objects[a].position.copy(e);for(var s=0;s<this.objects.length;++s)this.objects[s].quaternion.copy(t),this.objects[s].updateMatrix()}}(),HI.prototype.setObjects=function(e){this.objects=e;var t=j_(e,1);this.object=t[0]},HI.prototype.rotate=function(){var e={axis:new lh,angle:0};return function(t,n,r,i){this.mouse2rotation(e,n,r,i),t.setFromAxisAngle(e.axis,e.angle),e.angle&&this._rotate(t),this.lastRotation=e}}(),HI.prototype.translate=function(){var e=new lh,t=new lh;return function(n){e.set(n.x/this.camera.projectionMatrix.elements[0],n.y/this.camera.projectionMatrix.elements[5],0);var r=e.length();e.normalize(),e.transformDirection(ZI.copy(this.object.matrixWorld).invert()),t.copy(this.pivot),this.object.localToWorld(t),r*=Math.abs(t.z-this.camera.position.z),r/=this.object.matrixWorld.getMaxScaleOnAxis();for(var i=0;i<this.objects.length;++i)this.objects[i].translateOnAxis(e,r)}}(),HI.prototype.update=function(){var e=new lh;return function(t,n){if(0!==_w.now.autoRotation)return _w.now.autoRotationAxisFixed||0===this.lastRotation.axis.length()?e.set(0,1,0).transformDirection(ZI.copy(this.object.matrixWorld).invert()):e.copy(this.lastRotation.axis),this._rotate(UI.setFromAxisAngle(e,_w.now.autoRotation*t)),!0;if(this.options.intertia&&this.lastRotation.angle){var r=this.lastRotation.angle*Math.pow(1-this.options.dynamicDampingFactor,40*n);if(!(Math.abs(r)<=this.options.intertiaThreshold))return this._rotate(UI.setFromAxisAngle(this.lastRotation.axis,r)),!0;this.lastRotation.angle=0}return!1}}(),HI.prototype.stop=function(){this.lastRotation.angle=0},HI.prototype.mouse2rotation=function(){var e=new lh,t=new lh,n=new lh,r=new lh,i=new lh,o=new lh,a=new $f;return function(s,u,l,c){if(c)s.axis.copy(this.axis),s.angle=this.options.axisRotateFactor*(l.y-u.y);else{a.subVectors(l,u);var f=a.length();if(0===f)return;e.copy(this.pivot),this.object.localToWorld(e),t.subVectors(this.camera.position,e),n.copy(t).normalize(),r.copy(this.camera.up).normalize(),i.crossVectors(r,n).normalize(),r.setLength(a.y),i.setLength(a.x),o.copy(r.add(i)),s.axis.crossVectors(o,t),s.angle=-f*this.options.rotateFactor}s.axis.transformDirection(ZI.copy(this.object.matrixWorld).invert()),s.angle<0&&(s.axis.negate(),s.angle=-s.angle)}}(),GI.prototype=Object.create(J_.prototype),GI.prototype.constructor=GI,GI.prototype.resetKeys=function(){this._pressedKeys[37]=!1,this._pressedKeys[38]=!1,this._pressedKeys[39]=!1,this._pressedKeys[40]=!1},GI.prototype.contextmenu=function(e){e.stopPropagation(),e.preventDefault()},GI.prototype.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}},GI.prototype.enable=function(e){this.enabled=e},GI.prototype.enableHotkeys=function(e){this.hotkeysEnabled=e},GI.prototype.allowTranslation=function(e){this._isTranslationAllowed=e},GI.prototype.allowAltObjFreeRotation=function(e){this._isAltObjFreeRotationAllowed=e},GI.prototype.keysTranslateObj=function(e){this._isKeysTranslatingObj=e},GI.prototype.isEditingAltObj=function(){return(this._state===BI||this._state===zI)&&this._affectedObj===this._altObj},GI.prototype.convertMouseToOnCircle=function(e,t,n){var r=Math.min(this.screen.width,this.screen.height);0!==r?e.set((t-.5*this.screen.width-this.screen.left)/r,(.5*this.screen.height+this.screen.top-n)/r):e.set(0,0)},GI.prototype.convertMouseToViewport=function(e,t,n){0!==this.screen.width&&0!==this.screen.height?e.set(2*(t-.5*this.screen.width-this.screen.left)/this.screen.width,2*(.5*this.screen.height+this.screen.top-n)/this.screen.height):e.set(0,0)},GI.prototype.stop=function(){this._mainObj.stop(),this._altObj.stop()},GI.prototype.rotateByMouse=function(){var e=new uh;return function(t){this._affectedObj.rotate(e,this._mousePrevPos,this._mouseCurPos,t),this.dispatchEvent({type:"change",action:"rotate",quaternion:e})}}(),GI.prototype.rotate=function(e){this.object.quaternion.multiply(e),this.dispatchEvent({type:"change",action:"rotate",quaternion:e})},GI.prototype.getOrientation=function(){return this.object.quaternion},GI.prototype.setOrientation=function(e){this.object.quaternion.copy(e)},GI.prototype.translate=function(){var e=new $f;return function(){e.subVectors(this._mouseCurPos,this._mousePrevPos),this._affectedObj.translate(e),this.dispatchEvent({type:"change",action:"translate"})}}(),GI.prototype.getScale=function(){return this.object.scale.x},GI.prototype.setScale=function(e){this.object.scale.set(e,e,e)},GI.prototype.scale=function(e){e<=0||(this.setScale(this.object.scale.x*e),this.dispatchEvent({type:"change",action:"zoom",factor:e}))},GI.prototype.update=function(){var e=new $f;return function(){var t=this._clock.getElapsedTime(),n=t-this._lastUpdateTime;if(this._state===DI){var r=t-this._lastMouseMoveTime;(this._mainObj.update(n,r)||this._altObj.update(n,r))&&this.dispatchEvent({type:"change",action:"auto"})}if(this._isKeysTranslatingObj){var i=Number(this._pressedKeys[39])-Number(this._pressedKeys[37]),o=Number(this._pressedKeys[38])-Number(this._pressedKeys[40]);if(0!==i||0!==o){var a=n,s=this.getAltObj();s.objects.length>0&&(this._altObj.setObjects(s.objects),this._altObj.pivot=s.pivot,"axis"in s?this._altObj.axis=s.axis.clone():this._altObj.axis.set(0,0,1),e.set(a*i,a*o),this._altObj.translate(e),this.dispatchEvent({type:"change",action:"translate"}))}}this._lastUpdateTime=t}}(),GI.prototype.reset=function(){this._state=DI,this.object.quaternion.copy(UI.set(0,0,0,1))},GI.prototype.mousedown=function(e){if(!1!==this.enabled&&this._state===DI){if(e.preventDefault(),e.stopPropagation(),this._state===DI)if(0===e.button){this._affectedObj.stop();var t=!1;if(e.altKey){var n=this.getAltObj();(t=n.objects.length>0)&&(this._altObj.setObjects(n.objects),this._altObj.pivot=n.pivot,"axis"in n?this._altObj.axis=n.axis.clone():this._altObj.axis.set(0,0,1))}this._affectedObj=t?this._altObj:this._mainObj,this._state=t&&e.ctrlKey&&this._isTranslationAllowed?zI:BI}else 2===e.button&&(this._state=VI);this._state===BI&&(this.convertMouseToOnCircle(this._mouseCurPos,e.pageX,e.pageY),this._mousePrevPos.copy(this._mouseCurPos)),this._state!==zI&&this._state!==VI||(this.convertMouseToViewport(this._mouseCurPos,e.pageX,e.pageY),this._mousePrevPos.copy(this._mouseCurPos))}},GI.prototype.mousemove=function(e){if(!1!==this.enabled&&this._state!==DI)switch(e.preventDefault(),e.stopPropagation(),this._state){case BI:this._mousePrevPos.copy(this._mouseCurPos),this.convertMouseToOnCircle(this._mouseCurPos,e.pageX,e.pageY),this.rotateByMouse(e.altKey&&!this._isAltObjFreeRotationAllowed||e.shiftKey),this._lastMouseMoveTime=this._clock.getElapsedTime();break;case zI:this._mousePrevPos.copy(this._mouseCurPos),this.convertMouseToViewport(this._mouseCurPos,e.pageX,e.pageY),this.translate();break;case VI:this._mousePrevPos.copy(this._mouseCurPos),this.convertMouseToViewport(this._mouseCurPos,e.pageX,e.pageY),this.translatePivotByMouse()}},GI.prototype.mousewheel=function(e){if(!1!==this.enabled&&_w.now.zooming&&this._state===DI&&!e.shiftKey){e.preventDefault();var t=0;e.wheelDelta?t=e.wheelDelta/40:e.detail&&(t=-e.detail/3);var n=1+.05*t;n=Math.max(n,.01),this.scale(n)}},GI.prototype.mouseup=function(e){!1!==this.enabled&&this._state!==DI&&(e.preventDefault(),e.stopPropagation(),this._state=DI,this._clock.getElapsedTime()-this._lastMouseMoveTime>.1&&this._affectedObj.stop())},GI.prototype.touchstartend=function(e){if(!1!==this.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:this._state=BI,this.convertMouseToOnCircle(this._mouseCurPos,e.touches[0].pageX,e.touches[0].pageY),this._mousePrevPos.copy(this._mouseCurPos);break;case 2:this._mainObj.stop(),this._altObj.stop(),this._state=FI;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;this._touchDistanceCur=this._touchDistanceStart=Math.sqrt(t*t+n*n),this._scaleStart=this.object.scale.x;break;default:this._state=DI}},GI.prototype.touchmove=function(e){if(!1!==this.enabled&&this._state!==DI)switch(e.preventDefault(),e.stopPropagation(),this._state){case BI:this._mousePrevPos.copy(this._mouseCurPos),this.convertMouseToOnCircle(this._mouseCurPos,e.touches[0].pageX,e.touches[0].pageY),this.rotateByMouse(!1),this._lastMouseMoveTime=this._clock.getElapsedTime();break;case FI:if(_w.now.zooming){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;this._touchDistanceCur=Math.sqrt(t*t+n*n);var r=this._scaleStart*this._touchDistanceCur/this._touchDistanceStart/this.object.scale.x;this.scale(r)}}},GI.prototype.keydownup=function(e){if(!1!==this.enabled&&!1!==this.hotkeysEnabled)switch(e.keyCode){case 37:case 38:case 39:case 40:this._pressedKeys[e.keyCode]="keydown"===e.type,e.preventDefault(),e.stopPropagation()}},GI.prototype.getKeyBindObject=function(){return window.top},GI.prototype.dispose=function(){for(var e=0;e<this._listeners.length;e++){var t=this._listeners[e];t.obj.removeEventListener(t.type,t.handler)}},GI.prototype.translatePivotByMouse=function(){var e=new $f;return function(){e.subVectors(this._mouseCurPos,this._mousePrevPos),this.translatePivotInWorld(_w.now.translationSpeed*e.x,_w.now.translationSpeed*e.y,0)}}(),GI.prototype.translatePivotInWorld=function(e,t,n){var r=this.objectPivot.position;r.applyMatrix4(this.object.matrixWorld),r.setX(r.x+e),r.setY(r.y+t),r.setZ(r.z+n),r.applyMatrix4(ZI.copy(this.object.matrixWorld).invert()),this.dispatchEvent({type:"change",action:"translatePivot"})},GI.prototype.translatePivot=function(e,t,n){var r=this.objectPivot.position;r.setX(r.x+e),r.setY(r.y+t),r.setZ(r.z+n),this.dispatchEvent({type:"change",action:"translatePivot"})},GI.prototype.setPivot=function(e){this.objectPivot.position.copy(e),this.dispatchEvent({type:"change",action:"translatePivot"})},WI.prototype=Object.create(J_.prototype),WI.prototype.constructor=WI,WI.prototype.reset=function(){this.picked={},this.dispatchEvent({type:"newpick",obj:{}})},WI.prototype.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}},WI.prototype.pickObject=function(e){if(!this.gfxObj)return this.picked={},void this.dispatchEvent({type:"newpick",obj:{}});var t=this.gfxObj,n=new l_;n.ray.origin.setFromMatrixPosition(this.camera.matrixWorld),n.ray.direction.set(e.x,e.y,.5).unproject(this.camera).sub(n.ray.origin).normalize();var r=_w.now.draft.clipPlane&&this.clipPlaneValue?this.clipPlaneValue:1/0,i=_w.now.fog&&this.fogFarValue?this.fogFarValue:1/0,o=n.intersectVisibleObject(t,this.camera,r,i);if(!o)return this.picked={},void this.dispatchEvent({type:"newpick",obj:{}});var a={};if(o.residue||o.atom){var s=o.residue||o.atom.residue;"chain"===_w.now.pick?a={chain:s.getChain()}:"molecule"===_w.now.pick?a={molecule:s.getMolecule()}:o.residue||"residue"===_w.now.pick?a={residue:s}:o.atom&&(a={atom:o.atom})}this.picked=a,this.dispatchEvent({type:"newpick",obj:a})},WI.prototype.getMouseInViewport=function(e,t){return new $f((e-this.screen.left)/this.screen.width*2-1,-(t-this.screen.top)/this.screen.height*2+1)},WI.prototype.mousedown=function(e){e.preventDefault(),e.stopPropagation(),0===e.button&&(this._lastMousePos=this.getMouseInViewport(e.pageX,e.pageY),this._mouseTotalDist=0,this._clickBeginTime=this._clock.getElapsedTime())},WI.prototype.mousemove=function(e){e.preventDefault(),e.stopPropagation();var t=this.getMouseInViewport(e.pageX,e.pageY);this._mouseTotalDist+=t.sub(this._lastMousePos).length()},WI.prototype.mouseup=function(e){var t=this;if(e.preventDefault(),e.stopPropagation(),0===e.button&&this._mouseTotalDist<.01){var n=this._clock.getElapsedTime(),r=this.getMouseInViewport(e.pageX,e.pageY);if(n-this._lastClickBeginTime<.7)if((new $f).subVectors(r,this._lastClickPos).length()<.01)return this.dispatchEvent({type:"dblclick",obj:this.picked}),this._lastClickPos=r,void(this._lastClickBeginTime=-1e3);setTimeout((function(){t.pickObject(r)}),0),this._lastClickPos=r,this._lastClickBeginTime=this._clickBeginTime}},WI.prototype.touchstart=function(e){e.preventDefault(),e.stopPropagation(),1===e.touches.length&&(this._lastTouchdownPos=this.getMouseInViewport(e.touches[0].pageX,e.touches[0].pageY))},WI.prototype.touchend=function(e){var t=this;(e.preventDefault(),e.stopPropagation(),0===e.touches.length&&1===e.changedTouches.length)&&(this.getMouseInViewport(e.changedTouches[0].pageX,e.changedTouches[0].pageY).sub(this._lastTouchdownPos).length()<.01&&setTimeout((function(){t.pickObject(t._lastTouchdownPos)}),0))},WI.prototype.dispose=function(){for(var e=0;e<this._listeners.length;e++){var t=this._listeners[e];t.obj.removeEventListener(t.type,t.handler)}};var qI=function(){function e(t,n){O_(this,e),this._target=t,this._targetCamera=n,this._camera=new bp(n.fov,n.aspect,1,100),this._object=new S_(1),this._scene=new Eg,this._scene.add(this._object),this._full=new $f,this._update()}return C_(e,[{key:"_update",value:function(){var e=this._targetCamera.fov,t=this._camera;t.aspect=this._targetCamera.aspect,t.setMinimalFov(e),t.setDistanceToFit(1,e),t.updateProjectionMatrix(),this._object.quaternion.copy(this._target.quaternion)}},{key:"render",value:function(e){this._update(),e.getSize(this._full);var t=.25*this._full.width,n=.25*this._full.height,r=e.autoClear;e.autoClear=!1,e.setViewport(0,0,t,n),e.clear(!1,!0,!1),e.render(this._scene,this._camera),e.setViewport(0,0,this._full.width,this._full.height),e.autoClear=r}}]),e}(),KI=["helix","strand"],YI=["fs","ps","ns","us"];function XI(e,t){for(var n=t._residues,r=n.length,i=new Uint8Array(r),o=t._atoms,a=0,s=e.length;a<s;++a){i[o[a].residue._index]=e[a]}for(var u=[],l=0;l<r;){if(0!==i[l]){for(var c=l,f=i[l];l<r-1&&i[l+1]===f&&n[l].isConnected(n[l+1]);)++l;u.push({start:c,end:l,type:KI[f-1]})}++l}return u}function $I(e){return e>=524288?e-1048576:e}var JI=function(){function e(t,n,r){O_(this,e),this._complex=t,this._secondary=null,this.isLoading=!1,this._framesRange={start:0,end:-1},this.frameIsReady=!1,this._buffer=null,this._frameRequest=null,this._callbacks=r,"function"===typeof n?(this._framesRequestLength=1,this._downloadDataFn=n):this.parseBinaryData(n,!0),this.reset(),this.setFrame(0)}return C_(e,[{key:"_prepareBuffer",value:function(e,t){if(void 0!==e&&null!==e||(e=0),void 0!==t&&null!==t||(t=e+this._framesRequestLength),void 0!==this._framesCount&&(t=Math.min(this._framesCount-1,t)),this._downloadDataFn){var n=this;this._buffer||(this._buffer={}),this._buffer.state="downloading",this.isLoading=!0,n._callbacks&&"function"===typeof n._callbacks.onLoadStatusChanged&&n._callbacks.onLoadStatusChanged(),this._downloadDataFn({start:e,end:t+1},(function(r){if(n.isLoading=!1,n._callbacks&&"function"===typeof n._callbacks.onLoadStatusChanged&&n._callbacks.onLoadStatusChanged(),n._buffer={data:r,state:"ready",start:e,end:t},null!==n._frameRequest){var i=n._frameRequest;n._frameRequest=null,n.setFrame(i)}}),(function(){n.isLoading=!1,n._callbacks&&"function"===typeof n._callbacks.onError&&n._callbacks.onError("Streaming failed")}))}}},{key:"_parseBuffer",value:function(){if(this._buffer&&"ready"===this._buffer.state){this._framesRange={start:this._buffer.start,end:this._buffer.end},this.parseBinaryData(this._buffer.data,!1);var e=(this._buffer.end+1)%this._framesCount;if(e>=this._framesCount&&(e=0),this._buffer={state:"none"},this._prepareBuffer(e,e+this._framesRequestLength),null!==this._frameRequest){var t=this._frameRequest;this._frameRequest=null,this.setFrame(t)}}}},{key:"parseBinaryData",value:function(e){var t=new DataView(e),n=0,r=t.getUint32(n,!0);n+=4;var i=t.getUint32(n,!0);this._framesCount=i,this._framesRange.end=this._framesRange.end>0?Math.min(this._framesRange.end,i-1):i-1,n+=4,this._atomsCount=r;this._framesRequestLength=Math.ceil(1048576/(8*r));var o=this._framesRange.end-this._framesRange.start+1;if(r!==this._complex._atoms.length||e.byteLength!==12+o*r*8)throw new Error;for(var a=this._complex,s=t.getUint32(n,!0),u=0;s>1e3&&u<YI.length-1;)s/=1e3,++u;this._timeStep="".concat(s.toString()," ").concat(YI[u]),n+=4;for(var l=[],c=new Float32Array(o*r*3),f=0,h=new Int8Array(r),d=0;d<o;++d){for(var p=0;p<r;++p){var v=t.getUint32(n,!0);n+=4;var m=t.getUint32(n,!0);n+=4;var g=(4026531840&m)>>>28,y=$I((268435200&m)>>>8>>0),b=$I(((255&m)<<12|(4293918720&v)>>>20)>>0),x=$I((1048575&v)>>0);h[p]=0,g>0&&g<4?h[p]=1:4===g&&(h[p]=2),c[f++]=y/100,c[f++]=b/100,c[f++]=x/100}l.push(XI(h,a))}this._secondaryData=l,this._data=c}},{key:"nextFrame",value:function(){this.setFrame((this._currFrame+1)%this._framesCount)}},{key:"needsColorUpdate",value:function(e){return e instanceof KM}},{key:"getAtomColor",value:function(e,t){return e.getResidueColor(this._residues[t.residue._index],this._complex)}},{key:"getResidueColor",value:function(e,t){return e.getResidueColor(this._residues[t._index],this._complex)}},{key:"_updateSecondary",value:function(){var e,t=this._residues,n=t.length;for(e=0;e<n;++e)t[e]._secondary=null;var r=this._secondaryData[this._currFrame-this._framesRange.start];for(e=0,n=r.length;e<n;++e)for(var i=r[e],o=i.start,a=i.end,s={_start:t[o],_end:t[a],type:i.type,generic:i.generic},u=o;u<=a;++u)t[u]._secondary=s}},{key:"reset",value:function(){var e=this._complex._residues,t=e.length;this._residues=new Array(t);for(var n=this._residues,r=function(){return this._secondary},i=0;i<t;++i)n[i]={_type:e[i]._type,_isValid:e[i]._isValid,_controlPoint:null,_wingVector:null,_secondary:null,getSecondary:r}}},{key:"setFrame",value:function(e){if(this.frameIsReady=!1,e>=this._framesRange.start&&e<=this._framesRange.end)this._currFrame=e,this._cachedResidues=!1,this._updateSecondary(),this.frameIsReady=!0;else if(this._frameRequest=e,this._buffer){switch(this._buffer.state){case"none":this._prepareBuffer(e);break;case"ready":this._parseBuffer()}}else this._prepareBuffer(e)}},{key:"disableEvents",value:function(){this._callbacks=null}},{key:"getAtomPos",value:function(t){var n=e._vec,r=this,i=r._data,o=3*(r._atomsCount*(r._currFrame-r._framesRange.start)+t);return n.set(i[o],i[o+1],i[o+2]),n}},{key:"getResidues",value:function(){return this._cachedResidues||this._complex.updateToFrame(this),this._residues}}]),e}();Uw(JI,"_vec",new lh);var QI=function(){function e(t,n){if(O_(this,e),this.constructor===e)throw new Error("Can not instantiate abstract class!");this.params=t,this.opts=(0,R.merge)(mw.deriveDeep(_w.now.objects[this.type],!0),n),this.needsRebuild=!1,this._mesh=null,this.id=null}return C_(e,[{key:"identify",value:function(){var e={type:this.type,params:this.params},t=mw.objectsDiff(this.opts,_w.now.modes[this.id]);return(0,R.isEmpty)(t)||(e.opts=t),e}},{key:"toString",value:function(){return"o=".concat(this.type,",").concat(this.params.join(","))+mw.compareOptionsWithDefaults(this.opts,_w.defaults.objects[this.type])}},{key:"getGeometry",value:function(){return this._mesh}},{key:"destroy",value:function(){this._mesh&&YE.destroyObject(this._mesh)}}]),e}();function eL(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}QI.prototype.type="__";var tL=function(e){P_(n,e);var t=eL(n);function n(e,r){var i;if(O_(this,n),i=t.call(this,e,r),e.length<2)throw new Error("Wrong number of argumets on line object creation!");var o=j_(e,2);return i._id1=o[0],i._id2=o[1],i}return C_(n,[{key:"_getAtomFromName",value:function(e,t){var n=e.getAtomByFullname(t);if(!n)throw new Error(t+" - Wrong atom format it must be '#CHAIN_NAME.#RESIDUE_NUMBER.#ATOM_NAME' (e.g. 'A.38.CO1')");return n}},{key:"build",value:function(e){var t=new qd;this._atom1=this._getAtomFromName(e,this._id1),this._atom2=this._getAtomFromName(e,this._id2);var n=this._atom1.position,r=this._atom2.position,i=new Float32Array([n.x,n.y,n.z,r.x,r.y,r.z]);t.setAttribute("position",new Nd(i,3)),t.computeBoundingBox();var o=new YO;o.setValues({lights:!1,overrideColor:!0,dashedLine:!0,fogTransparent:_w.now.bg.transparent}),this._line=new pA.Line(t,o),this._line.computeLineDistances(),this._line.material.setUberOptions({fixedColor:new Pd(this.opts.color),dashedLineSize:this.opts.dashSize,dashedLinePeriod:this.opts.dashSize+this.opts.gapSize}),this._line.material.updateUniforms(),this._line.raycast=function(e,t){},this._mesh=this._line;var a=e.getTransforms();a.length>0&&(this._mesh=new pg,this._mesh.add(this._line),gT.applyTransformsToMeshes(this._mesh,a))}},{key:"updateToFrame",value:function(e){if(this._atom1&&this._atom2&&this._line){var t=this._line.geometry;t.vertices[0].copy(e.getAtomPos(this._atom1.index)),t.vertices[1].copy(e.getAtomPos(this._atom2.index)),this._line.computeLineDistances(),t.computeBoundingSphere(),t.verticesNeedUpdate=!0}}}]),n}(QI);tL.prototype.constructor=tL,tL.prototype.type="line";function nL(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var rL=function(e){P_(n,e);var t=nL(n);function n(e){var r;O_(this,n),r=t.call(this,e);var i={uniforms:{srcTex:{type:"t",value:null},srcDepthTex:{type:"t",value:null},srcTexSize:{type:"v2",value:new $f(512,512)},color:{type:"v3",value:null},threshold:{type:"f",value:null},opacity:{type:"f",value:1},thickness:{type:"v2",value:new $f(1,1)}},vertexShader:UE,fragmentShader:"precision highp float;\r\n\r\nuniform sampler2D srcTex;\r\nuniform vec2 srcTexSize;\r\nuniform vec2 thickness;\r\nvarying vec2 vUv;\r\n\r\n#ifdef DEPTH_OUTLINE\r\n  uniform sampler2D srcDepthTex; //depthTexture\r\n  uniform vec3 color;\r\n  uniform float threshold;\r\n#endif\r\n\r\nvoid main() {\r\n\r\n  vec2 pixelSize = thickness / srcTexSize;\r\n\r\n  #ifdef DEPTH_OUTLINE\r\n    float c00 = texture2D(srcDepthTex, vUv + vec2(-pixelSize.x,-pixelSize.y)).x;\r\n    float c01 = texture2D(srcDepthTex, vUv + vec2(0,-pixelSize.y)).x;\r\n    float c02 = texture2D(srcDepthTex, vUv + vec2(pixelSize.x,-pixelSize.y)).x;\r\n    float c10 = texture2D(srcDepthTex, vUv + vec2(-pixelSize.x,0)).x;\r\n    float c12 = texture2D(srcDepthTex, vUv + vec2(pixelSize.x,0)).x;\r\n    float c20 = texture2D(srcDepthTex, vUv + vec2(-pixelSize.x,pixelSize.y)).x;\r\n    float c21 = texture2D(srcDepthTex, vUv + vec2(0,pixelSize.y)).x;\r\n    float c22 = texture2D(srcDepthTex, vUv + vec2(pixelSize.x,pixelSize.y)).x;\r\n\r\n    float horizEdge = - c00 - 2.0 * c01 - c02 + c20 + 2.0 * c21 + c22;\r\n    float vertEdge  = - c00 - 2.0 * c10 - c20 + c02 + 2.0 * c12 + c22;\r\n\r\n    float grad = sqrt(horizEdge * horizEdge + vertEdge * vertEdge);\r\n\r\n    gl_FragColor = ( grad > threshold ) ? vec4(color.rgb, 1.0) : gl_FragColor = texture2D(srcTex, vUv);\r\n\r\n  #else\r\n    vec4 c00 = texture2D(srcTex, vUv + vec2(-pixelSize.x,-pixelSize.y));\r\n    vec4 c01 = texture2D(srcTex, vUv + vec2(0,-pixelSize.y));\r\n    vec4 c02 = texture2D(srcTex, vUv + vec2(pixelSize.x,-pixelSize.y));\r\n    vec4 c10 = texture2D(srcTex, vUv + vec2(-pixelSize.x,0));\r\n    vec4 c12 = texture2D(srcTex, vUv + vec2(pixelSize.x,0));\r\n    vec4 c20 = texture2D(srcTex, vUv + vec2(-pixelSize.x,pixelSize.y));\r\n    vec4 c21 = texture2D(srcTex, vUv + vec2(0,pixelSize.y));\r\n    vec4 c22 = texture2D(srcTex, vUv + vec2(pixelSize.x,pixelSize.y));\r\n\r\n    vec4 horizEdge = - c00 - 2.0 * c01 - c02 + c20 + 2.0 * c21 + c22;\r\n    vec4 vertEdge  = - c00 - 2.0 * c10 - c20 + c02 + 2.0 * c12 + c22;\r\n\r\n    vec4 grad = sqrt(horizEdge * horizEdge + vertEdge * vertEdge);\r\n    gl_FragColor = grad;\r\n  #endif\r\n}\r\n",transparent:!0,depthTest:!1,depthWrite:!1};return r.setValues(i),r}return C_(n,[{key:"copy",value:function(e){mS(I_(n.prototype),"copy",this).call(this,e),this.depth=e.depth}},{key:"setValues",value:function(e){if("undefined"!==typeof e){mS(I_(n.prototype),"setValues",this).call(this,e);var t={};this.depth&&(t.DEPTH_OUTLINE=1),this.defines=t}}}]),n}(Hp);rL.prototype.depth=!1;function iL(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var oL=function(e){P_(n,e);var t=iL(n);function n(e){var r;return O_(this,n),(r=t.call(this,e)).setValues({uniforms:{srcTex:{type:"t",value:null},srcTexelSize:{type:"v2",value:new $f(1/512,1/512)},bgColor:{type:"c",value:new Pd(16777215)}},vertexShader:UE,fragmentShader:"precision highp float;\r\n\r\n// edge end finding algorithm parameters\r\n#define FXAA_QUALITY_PS 8\r\n#define FXAA_QUALITY_P0 1.0\r\n#define FXAA_QUALITY_P1 1.5\r\n#define FXAA_QUALITY_P2 2.0\r\n#define FXAA_QUALITY_P3 2.0\r\n#define FXAA_QUALITY_P4 2.0\r\n#define FXAA_QUALITY_P5 2.0\r\n#define FXAA_QUALITY_P6 4.0\r\n#define FXAA_QUALITY_P7 12.0\r\n// constants\r\nfloat fxaaQualityEdgeThreshold = 0.125;\r\nfloat fxaaQualityEdgeThresholdMin = 0.0625;\r\nfloat fxaaQualitySubpix = 0.7; //0.65;\r\n// global params\r\nuniform sampler2D srcTex;\r\nuniform vec2 srcTexelSize;\r\nuniform vec3 bgColor;\r\n// from vs\r\nvarying vec2 vUv;\r\n//=====================================================================//\r\n// calc luminance from rgb\r\n//'float FxaaLuma(vec3 rgb) {return rgb.y * (0.587/0.299) + rgb.x; } // Lotte's idea about game luminance\r\nfloat FxaaLuma(vec3 rgb) {return dot(rgb, vec3(0.299, 0.587, 0.114)); } // real luminance calculation\r\n                                                                           // for non-real scene rendering\r\n// texture sampling by pixel position(coords) and offset(in pixels)\r\n vec3 FxaaTex(sampler2D tex, vec2 pos, vec2 off,  vec2 res ) {\r\n  #ifdef BG_TRANSPARENT\r\n    vec4 color = texture2D( tex, pos + off * res );\r\n    return mix(color.rgb, bgColor, 1.0 - color.a);\r\n  #else\r\n    return texture2D( tex, pos + off * res ).xyz;\r\n  #endif\r\n}\r\nvec3 FxaaTexTop(sampler2D tex, vec2 pos) {\r\n  #ifdef BG_TRANSPARENT\r\n    vec4 color = texture2D( tex, pos );\r\n    return mix(color.rgb, bgColor, 1.0 - color.a);\r\n  #else\r\n    return texture2D( tex, pos).xyz;\r\n  #endif\r\n}\r\nvec4 FxaaTexTopAlpha(sampler2D tex, vec2 pos) {\r\n  return texture2D( tex, pos);\r\n}\r\n\r\n//=====================================================================//\r\nvoid main() {\r\n  // renaming\r\n  vec2 posM = vUv;\r\n  // get luminance for neighbours\r\n  float lumaS = FxaaLuma(FxaaTex(srcTex, posM, vec2( 0.0, 1.0 ), srcTexelSize));\r\n  float lumaE = FxaaLuma(FxaaTex(srcTex, posM, vec2( 1.0, 0.0 ), srcTexelSize));\r\n  float lumaN = FxaaLuma(FxaaTex(srcTex, posM, vec2( 0.0, -1.0 ), srcTexelSize));\r\n  float lumaW = FxaaLuma(FxaaTex(srcTex, posM, vec2( -1.0, 0.0 ), srcTexelSize));\r\n  float lumaM = FxaaLuma(FxaaTexTop(srcTex, posM));\r\n  // find max and min luminance\r\n  float rangeMax = max(max(lumaN, lumaW), max(lumaE, max(lumaS, lumaM)));\r\n  float rangeMin = min(min(lumaN, lumaW), min(lumaE, min(lumaS, lumaM)));\r\n  // calc maximum non-edge range\r\n  float rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\r\n  float range = rangeMax - rangeMin;\r\n  float rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\r\n  // exit when luma contrast is small (is not edge)\r\n  if(range < rangeMaxClamped){\r\n    gl_FragColor = FxaaTexTopAlpha(srcTex, posM);\r\n    return;\r\n  }\r\n  float subpixRcpRange = 1.0/range;\r\n  // note: the sampling coordinates can be calculated in vertex shader but the approach doesn't affect performance\r\n  // visibly, thus we decided to leave calculation here for better readability.\r\n  // calc other neighbours luminance\r\n  float lumaNE = FxaaLuma(FxaaTex(srcTex, posM, vec2(  1.0, -1.0 ), srcTexelSize));\r\n  float lumaSW = FxaaLuma(FxaaTex(srcTex, posM, vec2( -1.0,  1.0 ), srcTexelSize));\r\n  float lumaSE = FxaaLuma(FxaaTex(srcTex, posM, vec2(  1.0,  1.0 ), srcTexelSize));\r\n  float lumaNW = FxaaLuma(FxaaTex(srcTex, posM, vec2( -1.0, -1.0 ), srcTexelSize));\r\n/*--------------span calculation and subpix amount calulation-----------------*/\r\n  float lumaNS = lumaN + lumaS;\r\n  float lumaWE = lumaW + lumaE;\r\n  float subpixNSWE = lumaNS + lumaWE;\r\n  float edgeHorz1 = (-2.0 * lumaM) + lumaNS;\r\n  float edgeVert1 = (-2.0 * lumaM) + lumaWE;\r\n/*--------------------------------------------------------------------------*/\r\n  float lumaNESE = lumaNE + lumaSE;\r\n  float lumaNWNE = lumaNW + lumaNE;\r\n  float edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\r\n  float edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\r\n/*--------------------------------------------------------------------------*/\r\n  float lumaNWSW = lumaNW + lumaSW;\r\n  float lumaSWSE = lumaSW + lumaSE;\r\n  float edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\r\n  float edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\r\n  float edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\r\n  float edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\r\n  float edgeHorz = abs(edgeHorz3) + edgeHorz4;\r\n  float edgeVert = abs(edgeVert3) + edgeVert4;\r\n/*--------------------subpix amount calulation------------------------------*/\r\n  float subpixNWSWNESE = lumaNWSW + lumaNESE;\r\n  float lengthSign = srcTexelSize.x;\r\n  bool horzSpan = edgeHorz >= edgeVert;\r\n   // debug  code edge span visualization\r\n/*'  if (horzSpan)\r\n      gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0);\r\n  else\r\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n  return;*/\r\n  float subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\r\n/*--------------------------------------------------------------------------*/\r\n  if(!horzSpan) lumaN = lumaW;\r\n  if(!horzSpan) lumaS = lumaE;\r\n  if(horzSpan) lengthSign = srcTexelSize.y;\r\n  float subpixB = (subpixA * (1.0/12.0)) - lumaM;\r\n/*--------------------------------------------------------------------------*/\r\n  float gradientN = lumaN - lumaM;\r\n  float gradientS = lumaS - lumaM;\r\n  float lumaNN = lumaN + lumaM;\r\n  float lumaSS = lumaS + lumaM;\r\n  bool pairN = abs(gradientN) >= abs(gradientS);\r\n  float gradient = max(abs(gradientN), abs(gradientS));\r\n  if(pairN) lengthSign = -lengthSign;\r\n  float subpixC = clamp(abs(subpixB) * subpixRcpRange, 0.0, 1.0);\r\n/*--------------------------------------------------------------------------*/\r\n  vec2 posB;\r\n  posB = posM;\r\n  vec2 offNP;\r\n  offNP.x = (!horzSpan) ? 0.0 : srcTexelSize.x;\r\n  offNP.y = ( horzSpan) ? 0.0 : srcTexelSize.y;\r\n  if(!horzSpan) posB.x += lengthSign * 0.5;\r\n  if( horzSpan) posB.y += lengthSign * 0.5;\r\n/*--------------------------------------------------------------------------*/\r\n  vec2 posN;\r\n  posN = posB - offNP * FXAA_QUALITY_P0;\r\n  vec2 posP;\r\n  posP = posB + offNP * FXAA_QUALITY_P0;\r\n  float subpixD = ((-2.0)*subpixC) + 3.0;\r\n  float lumaEndN = FxaaLuma(FxaaTexTop(srcTex, posN));\r\n  float subpixE = subpixC * subpixC;\r\n  float lumaEndP = FxaaLuma(FxaaTexTop(srcTex, posP));\r\n/*--------------------------------------------------------------------------*/\r\n  if(!pairN) lumaNN = lumaSS;\r\n  float gradientScaled = gradient * 1.0/4.0;\r\n  float lumaMM = lumaM - lumaNN * 0.5;\r\n  float subpixF = subpixD * subpixE;\r\n  bool lumaMLTZero = lumaMM < 0.0;\r\n/*---------------------looped edge-end search-------------------------------*/\r\n  lumaEndN -= lumaNN * 0.5;\r\n  lumaEndP -= lumaNN * 0.5;\r\n  bool doneN = abs(lumaEndN) >= gradientScaled;\r\n  bool doneP = abs(lumaEndP) >= gradientScaled;\r\n  if(!doneN) posN -= offNP * FXAA_QUALITY_P1;\r\n  bool doneNP = (!doneN) || (!doneP);\r\n  if(!doneP) posP += offNP * FXAA_QUALITY_P1;\r\n/*--------------------------------------------------------------------------*/\r\n  if(doneNP) {\r\n    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(srcTex, posN.xy));\r\n    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(srcTex, posP.xy));\r\n    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\r\n    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\r\n    doneN = abs(lumaEndN) >= gradientScaled;\r\n    doneP = abs(lumaEndP) >= gradientScaled;\r\n    if(!doneN) posN -= offNP * FXAA_QUALITY_P2;\r\n    doneNP = (!doneN) || (!doneP);\r\n    if(!doneP) posP += offNP * FXAA_QUALITY_P2;\r\n/*--------------------------------------------------------------------------*/\r\n    #if (FXAA_QUALITY_PS > 3)\r\n      if(doneNP) {\r\n        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(srcTex, posN.xy));\r\n        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(srcTex, posP.xy));\r\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\r\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\r\n        doneN = abs(lumaEndN) >= gradientScaled;\r\n        doneP = abs(lumaEndP) >= gradientScaled;\r\n        if(!doneN) posN -= offNP * FXAA_QUALITY_P3;\r\n        doneNP = (!doneN) || (!doneP);\r\n        if(!doneP) posP += offNP * FXAA_QUALITY_P3;\r\n/*--------------------------------------------------------------------------*/\r\n        #if (FXAA_QUALITY_PS > 4)\r\n          if(doneNP) {\r\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(srcTex, posN.xy));\r\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(srcTex, posP.xy));\r\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\r\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\r\n            doneN = abs(lumaEndN) >= gradientScaled;\r\n            doneP = abs(lumaEndP) >= gradientScaled;\r\n            if(!doneN) posN -= offNP * FXAA_QUALITY_P4;\r\n            doneNP = (!doneN) || (!doneP);\r\n            if(!doneP) posP += offNP * FXAA_QUALITY_P4;\r\n/*--------------------------------------------------------------------------*/\r\n            #if (FXAA_QUALITY_PS > 5)\r\n               if(doneNP) {\r\n                 if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(srcTex, posN.xy));\r\n                 if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(srcTex, posP.xy));\r\n                 if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\r\n                 if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\r\n                 doneN = abs(lumaEndN) >= gradientScaled;\r\n                 doneP = abs(lumaEndP) >= gradientScaled;\r\n                 if(!doneN) posN -= offNP * FXAA_QUALITY_P5;\r\n                 doneNP = (!doneN) || (!doneP);\r\n                 if(!doneP) posP += offNP * FXAA_QUALITY_P5;\r\n/*--------------------------------------------------------------------------*/\r\n                 #if (FXAA_QUALITY_PS > 6)\r\n                   if(doneNP) {\r\n                     if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(srcTex, posN.xy));\r\n                     if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(srcTex, posP.xy));\r\n                     if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\r\n                     if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\r\n                     doneN = abs(lumaEndN) >= gradientScaled;\r\n                     doneP = abs(lumaEndP) >= gradientScaled;\r\n                     if(!doneN) posN -= offNP * FXAA_QUALITY_P6;\r\n                     doneNP = (!doneN) || (!doneP);\r\n                     if(!doneP) posP += offNP * FXAA_QUALITY_P6;\r\n/*--------------------------------------------------------------------------*/\r\n                     #if (FXAA_QUALITY_PS > 7)\r\n                       if(doneNP) {\r\n                         if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(srcTex, posN.xy));\r\n                         if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(srcTex, posP.xy));\r\n                         if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\r\n                         if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\r\n                         doneN = abs(lumaEndN) >= gradientScaled;\r\n                         doneP = abs(lumaEndP) >= gradientScaled;\r\n                         if(!doneN) posN -= offNP * FXAA_QUALITY_P7;\r\n                         doneNP = (!doneN) || (!doneP);\r\n                         if(!doneP) posP += offNP * FXAA_QUALITY_P7;\r\n/*--------------------------------------------------------------------------*/\r\n                       }\r\n                     #endif\r\n                   }\r\n                 #endif\r\n               }\r\n             #endif\r\n           }\r\n         #endif\r\n      }\r\n    #endif\r\n  }\r\n/*----------------calculate subpix offset due to edge ends-------------------*/\r\n  float dstN = posM.x - posN.x;\r\n  float dstP = posP.x - posM.x;\r\n  if(!horzSpan) dstN = posM.y - posN.y;\r\n  if(!horzSpan) dstP = posP.y - posM.y;\r\n/*--------------------------------------------------------------------------*/\r\n  bool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\r\n  float spanLength = (dstP + dstN);\r\n  bool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\r\n  float spanLengthRcp = 1.0 / spanLength;\r\n/*--------------------------------------------------------------------------*/\r\n  bool directionN = dstN < dstP;\r\n  float dst = min(dstN, dstP);\r\n  bool goodSpan = directionN ? goodSpanN : goodSpanP;\r\n  float subpixG = subpixF * subpixF;\r\n  float pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\r\n  float subpixH = subpixG * fxaaQualitySubpix;\r\n/*-----------------calc texture offest using subpix-------------------------*/\r\n  float pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\r\n  float pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\r\n\r\n  float offset = pixelOffsetSubpix * lengthSign;\r\n  #ifdef BG_TRANSPARENT\r\n    // get original texel\r\n    vec4 rgbaA = FxaaTexTopAlpha(srcTex, posM);\r\n    // calc step to blended texel\r\n    vec2 step = sign((!horzSpan) ? vec2 (offset, 0.0) : vec2 (0.0, offset));\r\n    // get neighboring texel\r\n    vec4 rgbaB = FxaaTexTopAlpha(srcTex, posM + step * srcTexelSize);\r\n    //  calc blend factor from offset\r\n    float f = (!horzSpan) ? offset / srcTexelSize.x : offset / srcTexelSize.y;\r\n    f = abs(f);\r\n    // calc alpha (special formula to emulate blending with bg)\r\n    gl_FragColor.a = 1.0 - mix(1.0 - rgbaA.a, 1.0 - rgbaB.a, f);\r\n    // calc color (special formula to emulate blending with bg)\r\n    gl_FragColor.rgb = mix(rgbaA.rgb * rgbaA.a, rgbaB.rgb * rgbaB.a, f) / gl_FragColor.a;\r\n  #else\r\n    if(!horzSpan) {\r\n       posM.x += offset;\r\n    } else {\r\n       posM.y += offset;\r\n    }\r\n    gl_FragColor = FxaaTexTopAlpha(srcTex, posM);\r\n  #endif\r\n  return;\r\n}\r\n",transparent:!1,depthTest:!1,depthWrite:!1}),r.setValues(e),r}return C_(n,[{key:"copy",value:function(e){mS(I_(n.prototype),"copy",this).call(this,e),this.depth=e.depth}},{key:"setValues",value:function(e){if("undefined"!==typeof e){mS(I_(n.prototype),"setValues",this).call(this,e);var t={};this.bgTransparent&&(t.BG_TRANSPARENT=1),this.defines=t}}}]),n}(Hp);oL.prototype.bgTransparent=!1;function aL(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var sL=[new lh(.295184,.077723,.068429),new lh(-.271976,-.365221,.838363),new lh(.547713,.467576,.488515),new lh(.662808,-.031733,.584758),new lh(-.025717,.218955,.657094),new lh(-.310153,-.365223,.370701),new lh(-.101407,-.006313,.747665),new lh(-.769138,.360399,.086847),new lh(-.271988,-.27514,.905353),new lh(.09674,-.566901,.700151),new lh(.562872,-.735136,.094647),new lh(.379877,.359278,.190061),new lh(.519064,-.023055,.405068),new lh(-.301036,.114696,.088885),new lh(-.282922,.598305,.487214),new lh(-.181859,.25167,.679702),new lh(-.191463,-.635818,.512919),new lh(-.293655,.427423,.078921),new lh(-.267983,.680534,.13288),new lh(.139611,.319637,.477439),new lh(-.352086,.31104,.653913),new lh(.321032,.805279,.487345),new lh(.073516,.820734,.414183),new lh(-.155324,.589983,.41146),new lh(.335976,.170782,.527627),new lh(.46346,-.355658,.167689),new lh(.222654,.59655,.769406),new lh(.922138,-.04207,.147555),new lh(-.72705,-.329192,.369826),new lh(-.090731,.53382,.463767),new lh(-.323457,-.876559,.238524),new lh(-.663277,-.372384,.342856)],uL=function(e){P_(n,e);var t=aL(n);function n(){var e;return O_(this,n),(e=t.call(this)).setValues({uniforms:{noiseTexture:{type:"t",value:VO.noiseTexture},noiseTexelSize:{type:"v2",value:new $f(1/VO.noiseWidth,1/VO.noiseHeight)},diffuseTexture:{type:"t",value:null},normalTexture:{type:"t",value:null},depthTexture:{type:"t",value:null},srcTexelSize:{type:"v2",value:new $f(1/512,1/512)},camNearFar:{type:"v2",value:new $f(1,10)},projMatrix:{type:"mat4",value:new Fh},aspectRatio:{type:"f",value:0},tanHalfFOV:{type:"f",value:0},samplesKernel:{type:"v3v",value:sL},kernelRadius:{type:"f",value:1},depthThreshold:{type:"f",value:1},factor:{type:"f",value:1}},vertexShader:UE,fragmentShader:"precision highp float;\r\n#define EPSILON 0.0000001\r\n\r\n#define MAX_SAMPLES_COUNT 32\r\nuniform vec3 samplesKernel[MAX_SAMPLES_COUNT];\r\nuniform sampler2D noiseTexture;\r\nuniform vec2      noiseTexelSize;\r\nuniform sampler2D diffuseTexture;\r\nuniform sampler2D depthTexture;\r\nuniform sampler2D normalTexture;\r\nuniform vec2      srcTexelSize;\r\nuniform vec2      camNearFar;\r\nuniform mat4      projMatrix;\r\n\r\nuniform float aspectRatio;\r\nuniform float tanHalfFOV;\r\n\r\nuniform float kernelRadius;\r\nuniform float depthThreshold;\r\nuniform float factor;\r\n\r\nvarying vec2 vUv;\r\n\r\nfloat CalcViewZ(vec2 screenPos)\r\n{\r\n  float depth = texture2D(depthTexture, screenPos).x;\r\n  // [0, 1]->[-1, 1]\r\n  float clipedZ = 2.0 * depth - 1.0;\r\n  // see THREE.js camera.makeFrustum for projection details\r\n  return (-projMatrix[3][2] / (clipedZ + projMatrix[2][2]));\r\n}\r\n\r\nvec3 ViewPosFromDepth(vec2 screenPos)\r\n{\r\n  vec3 viewPos;\r\n  viewPos.z = CalcViewZ(screenPos);\r\n  //[0, 1]->[-1, 1]\r\n  vec2 projPos = 2.0 * screenPos - 1.0;\r\n  // reconstruct viewposition in right-handed sc with z to viewer\r\n  viewPos.xy = vec2(\r\n                    projPos.x * aspectRatio * tanHalfFOV * abs(viewPos.z),\r\n                    projPos.y * tanHalfFOV * abs(viewPos.z)\r\n                   );\r\n  return viewPos;\r\n}\r\n\r\nvoid main() {\r\n  vec3 viewPos = ViewPosFromDepth(vUv);\r\n  // remap coordinates to prevent noise exture rescale\r\n  vec2 vUvNoise = vUv / srcTexelSize * noiseTexelSize;\r\n  vec4 normalData = texture2D(normalTexture, vUv);\r\n  // return for background fragments (their normals are zero vectors)\r\n  if (length(normalData.rgb) < EPSILON) {\r\n    // 0.0 in alpha component means that it is background fragment\r\n    gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\r\n    return;\r\n  }\r\n  //[0, 1] -> [-1, 1]\r\n  vec3 normal = (normalData.rgb * 2.0 - 1.0);\r\n  // normalData.a store 1.0 if normal was build for frontfaced surface\r\n  // and 0.0 in other case\r\n  if (normalData.a < EPSILON) {\r\n    normal *= -1.0;\r\n  }\r\n  // get random vector for sampling sphere rotation\r\n  vec3 randN = texture2D(noiseTexture, vUvNoise).rgb * 2.0 - 1.0;\r\n  randN = normalize(randN);\r\n  // build TBN (randomly rotated around normal)\r\n  vec3 tangent   = normalize(randN - normal * dot(randN, normal));\r\n  vec3 bitangent = cross(tangent, normal);\r\n  mat3 TBN = mat3(tangent, bitangent, normal);\r\n  // calc AO value\r\n  float AO = 0.0;\r\n  for (int i = 0 ; i < MAX_SAMPLES_COUNT ; i++) {\r\n    // rotate sampling kernel around normal\r\n    vec3 reflectedSample = TBN * samplesKernel[i];\r\n    // get sample\r\n    vec3 samplePos = viewPos + reflectedSample * kernelRadius;\r\n\r\n    // project sample to screen to get sample's screen pos\r\n    vec4 SampleScrPos = vec4(samplePos, 1.0);\r\n    // eye -> clip\r\n    SampleScrPos = projMatrix * SampleScrPos;\r\n    // normalize\r\n    SampleScrPos.xy /= SampleScrPos.w;\r\n    //[-1, 1] -> [0, 1]\r\n    SampleScrPos.xy = (SampleScrPos.xy + vec2(1.0)) * 0.5;\r\n\r\n    // get view z for sample projected to the objct surface\r\n    float sampleDepth = CalcViewZ(SampleScrPos.xy);\r\n    // calc occlusion made by object surface at the sample\r\n    AO += step(samplePos.z, sampleDepth);\r\n  }\r\n  // calc result AO-map color\r\n  AO = 1.0 - max(0.0, AO / float(MAX_SAMPLES_COUNT) * factor);\r\n  // write value to AO-map\r\n  gl_FragColor = vec4(AO, AO, AO, 1.0);\r\n}\r\n",transparent:!1,depthTest:!1,depthWrite:!1}),e}return C_(n)}(Hp);function lL(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var cL=[-2,-1,0,1,2],fL=function(e){P_(n,e);var t=lL(n);function n(){var e;return O_(this,n),(e=t.call(this)).setValues({uniforms:{depthTexture:{type:"t",value:null},srcTexelSize:{type:"v2",value:new $f(1/512,1/512)},aoMap:{type:"t",value:null},samplesOffsets:{type:"fv1",value:cL}},vertexShader:UE,fragmentShader:"precision highp float;\r\n#define EPSILON 0.0000001\r\n\r\n#define MAX_SAMPLES_COUNT 5\r\nuniform float samplesOffsets[MAX_SAMPLES_COUNT];\r\nuniform sampler2D aoMap;\r\nuniform sampler2D depthTexture;\r\nuniform vec2      srcTexelSize;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n  float x = vUv.x;\r\n  float y = vUv.y;\r\n  vec4 res = vec4(0.0);\r\n  res.a = texture2D(aoMap, vec2(x, y )).a;\r\n  // return for background fragments (0.0 in alpha component means that it is background fragment)\r\n  if (res.a < EPSILON) {\r\n    gl_FragColor = res;\r\n    return;\r\n  }\r\n\r\n  float pixelDepth = texture2D(depthTexture, vec2(x, y)).x;\r\n  float weightSum = 0.0;\r\n  for (int i = 0; i < MAX_SAMPLES_COUNT; ++i) {\r\n    if (texture2D(aoMap, vec2(x + samplesOffsets[i] * srcTexelSize.x, y )).a < EPSILON) {\r\n      continue;\r\n    }\r\n    vec2 samplePos = vec2(x + samplesOffsets[i] * srcTexelSize.x, y);\r\n    float depth = texture2D(depthTexture, samplePos).x;\r\n    float weight = (1.0 / (0.0001 + abs(depth - pixelDepth)));\r\n    res.rgb += texture2D(aoMap, vec2(x + samplesOffsets[i] * srcTexelSize.x, y )).rgb * weight;\r\n    weightSum += weight;\r\n  }\r\n  res.rgb = res.rgb / weightSum;\r\n  gl_FragColor = res;\r\n}\r\n",transparent:!1,depthTest:!1,depthWrite:!1}),e}return C_(n)}(Hp);function hL(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var dL=[-2,-1,0,1,2],pL=function(e){P_(n,e);var t=hL(n);function n(e){var r;return O_(this,n),(r=t.call(this,e)).setValues({uniforms:{diffuseTexture:{type:"t",value:null},depthTexture:{type:"t",value:null},srcTexelSize:{type:"v2",value:new $f(1/512,1/512)},aoMap:{type:"t",value:null},samplesOffsets:{type:"fv1",value:dL},projMatrix:{type:"mat4",value:new Fh},aspectRatio:{type:"f",value:0},tanHalfFOV:{type:"f",value:0},fogNearFar:{type:"v2",value:new $f(100,100)},fogColor:{type:"v4",value:new ih(0,.5,0,1)}},vertexShader:UE,fragmentShader:"precision highp float;\r\n#define EPSILON 0.0000001\r\n\r\n#define MAX_SAMPLES_COUNT 5\r\nuniform float samplesOffsets[MAX_SAMPLES_COUNT];\r\nuniform sampler2D diffuseTexture;\r\nuniform sampler2D aoMap;\r\nuniform sampler2D depthTexture;\r\nuniform vec2      srcTexelSize;\r\n\r\nuniform mat4  projMatrix;\r\nuniform float aspectRatio;\r\nuniform float tanHalfFOV;\r\n\r\n#ifdef USE_FOG\r\n  uniform vec2 fogNearFar;\r\n  uniform vec4 fogColor;\r\n#endif\r\nvarying vec2 vUv;\r\n\r\nfloat CalcViewZ(vec2 screenPos)\r\n{\r\n  float depth = texture2D(depthTexture, screenPos).x;\r\n  // [0, 1]->[-1, 1]\r\n  float clipedZ = 2.0 * depth - 1.0;\r\n  // see THREE.js camera.makeFrustum for projection details\r\n  return (-projMatrix[3][2] / (clipedZ + projMatrix[2][2]));\r\n}\r\n\r\nvec3 ViewPosFromDepth(vec2 screenPos)\r\n{\r\n  vec3 viewPos;\r\n  viewPos.z = CalcViewZ(screenPos);\r\n  //[0, 1]->[-1, 1]\r\n  vec2 projPos = 2.0 * screenPos - 1.0;\r\n  // reconstruct viewposition in right-handed sc with z to viewer\r\n  viewPos.xy = vec2(\r\n  projPos.x * aspectRatio * tanHalfFOV * abs(viewPos.z),\r\n  projPos.y * tanHalfFOV * abs(viewPos.z)\r\n  );\r\n  return viewPos;\r\n}\r\n\r\nvoid main() {\r\n  vec3 viewPos = ViewPosFromDepth(vUv);\r\n  float x = vUv.x;\r\n  float y = vUv.y;\r\n  vec4 color = texture2D(diffuseTexture, vec2(x, y));\r\n  vec4 res = vec4(0.0);\r\n  res.a = texture2D(aoMap, vec2(x, y )).a;\r\n  // return for background fragments (0.0 in alpha component means that it is background fragment)\r\n  if (res.a < EPSILON) {\r\n    gl_FragColor = color;\r\n    return;\r\n  }\r\n\r\n  float pixelDepth = texture2D(depthTexture, vec2(x, y)).x;\r\n  float weightSum = 0.0;\r\n  for (int i = 0; i < MAX_SAMPLES_COUNT; ++i) {\r\n    if (texture2D(aoMap, vec2(x, y + samplesOffsets[i] * srcTexelSize.y)).a < EPSILON) {\r\n      continue;\r\n    }\r\n    vec2 samplePos = vec2(x, y + samplesOffsets[i] * srcTexelSize.y);\r\n    float depth = texture2D(depthTexture, samplePos).x;\r\n    float weight = (1.0 / (0.0001 + abs(depth - pixelDepth)));\r\n    res.rgb += texture2D(aoMap, vec2(x, y + samplesOffsets[i] * srcTexelSize.y)).rgb * weight;\r\n    weightSum += weight;\r\n  }\r\n  res.rgb /= weightSum;\r\n\r\n  #if defined(USE_FOG) && !defined(FOG_TRANSPARENT)\r\n    // Add fog to the result value\r\n    // Proper way to get an image with fog and ao requires formula:\r\n    //          gl_FragColor = fragColor*AO*(1-fogFactor) + fogColor*fogFactor\r\n    // But we have already fogged molecule to add AO too. Let's split the straight formula into our real steps!\r\n    // We have:  AO, fogFactor, fogColor,\r\n    //          color = fragColor*(1-fogFactor) + fogColor*fogFactor (it comes from diffuseTexture,\r\n    //                                                                where molecule has been already drawn with fog)\r\n    // Transform:\r\n    //          fragColor*AO*(1-fogFactor) + fogColor*fogFactor =\r\n    //        = [fragColor*(1-fogFactor) = color - fogColor*fogFactor] =\r\n    //        = (color - fogColor*fogFactor)*AO + fogColor*fogFactor =\r\n    //        = color*AO + fogColor*fogFactor*(1 - AO)\r\n    // Result:  gl_FragColor = color*AO + fogColor*fogFactor*(1 - AO)\r\n    float fogFactor = smoothstep(fogNearFar.x, fogNearFar.y, - viewPos.z) * fogColor.a;\r\n    gl_FragColor.rgb = color.rgb * res.rgb + fogColor.rgb * fogFactor *(vec3(1.0, 1.0, 1.0) - res.rgb);\r\n  #else\r\n    gl_FragColor.rgb = color.rgb * res.rgb;\r\n  #endif\r\n  gl_FragColor.a = color.a;\r\n}\r\n",transparent:!1,depthTest:!1,depthWrite:!1}),r.setValues(e),r}return C_(n,[{key:"setValues",value:function(e){if("undefined"!==typeof e){mS(I_(n.prototype),"setValues",this).call(this,e);var t={};this.useFog&&(t.USE_FOG=1),this.fogTransparent&&(t.FOG_TRANSPARENT=1),this.defines=t}}}]),n}(Hp);pL.prototype.useFog=!0,pL.prototype.fogTransparent=!1;function vL(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var mL=function(e){P_(n,e);var t=vL(n);function n(){var e;O_(this,n),e=t.call(this);var r={uniforms:{srcL:{type:"t",value:null},srcR:{type:"t",value:null}},vertexShader:UE,fragmentShader:"precision highp float;\r\n\r\nuniform sampler2D srcL;\r\nuniform sampler2D srcR;\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n  vec4 l = texture2D(srcL, vUv);\r\n  vec4 r = texture2D(srcR, vUv);\r\n  gl_FragColor = vec4(l.r, r.g, r.b, 1.0);\r\n}\r\n",transparent:!1,depthTest:!1,depthWrite:!1};return e.setValues(r),e}return C_(n)}(Hp),gL=function(){function e(){O_(this,e),this.position=new lh(0,0,0),this.scale=1,this.orientation=new uh(0,0,0,1)}return C_(e,[{key:"set",value:function(e,t,n){this.position=e,this.scale=t,this.orientation=n}}]),e}(),yL=function(){function e(){O_(this,e)}return C_(e,[{key:"setup",value:function(e,t){this._startTime=void 0,this._endTime=void 0,this._isPaused=!1,this._srcView=e,this._dstView=t,this._isMoving=!1}},{key:"isMoving",value:function(){return this._isMoving}},{key:"wasStarted",value:function(){return"undefined"!==typeof this._startTime&&"undefined"!==typeof this._endTime}},{key:"start",value:function(){this._startTime=Date.now();var e=_w.now.interpolateViews?1500:0;this._endTime=this._startTime+e,this._isMoving=!0}},{key:"getCurrentView",value:function(){if("undefined"===typeof this._srcView||"undefined"===typeof this._dstView||!this._isMoving||!this.wasStarted())return{success:!1};var e=this.createView(),t=Date.now();if(t>this._endTime)return e=this._dstView,this.reset(),{success:!0,view:e};var n=(t-this._startTime)/(this._endTime-this._startTime);return e.position.copy(this._srcView.position),e.position.lerp(this._dstView.position,n),e.scale=(1-n)*this._srcView.scale+n*this._dstView.scale,e.orientation.copy(this._srcView.orientation),e.orientation.slerp(this._dstView.orientation,n),{success:!0,view:e}}},{key:"reset",value:function(){this._startTime=this._endTime=0,this._isMoving=!1}},{key:"pause",value:function(){this._isPaused||(this.setup(this.getCurrentView().view,this._dstView),this._isPaused=!0)}},{key:"resume",value:function(){this._isPaused=!1}},{key:"createView",value:function(){return new gL}}]),e}();function bL(e,t){this.context=e,this._opts=(0,R.merge)({path:"/"},t)}function xL(e){function t(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="transparent",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator){var n=document.createElement("button");return n.style.display="none",t(n),navigator.xr.isSessionSupported("immersive-vr").then((function(t){return t?function(t){t.style.display="",t.style.cursor="pointer",t.style.left="calc(50% - 50px)",t.style.width="100px",t.textContent="ENTER VR";var n=null;function r(){n.removeEventListener("end",r),t.textContent="ENTER VR",n=null}function i(i){i.addEventListener("end",r),e._gfx.renderer.xr.setReferenceSpaceType("local"),e._gfx.renderer.xr.setSession(i),t.textContent="EXIT VR",n=i}t.onmouseenter=function(){t.style.opacity="1.0"},t.onmouseleave=function(){t.style.opacity="0.5"},t.onclick=function(){null===n?(navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor"]}).then(i),e.moveSceneBehindHeadset()):n.end()}}(n):function(e){e.style.display="",e.style.cursor="auto",e.style.left="calc(50% - 75px)",e.style.width="150px",e.textContent="VR NOT FOUND",e.onmouseenter=null,e.onmouseleave=null,e.onclick=null}(n)})),n}var r=document.createElement("a");return r.href="https://webvr.info",r.innerHTML="WEBXR NOT SUPPORTED",r.style.left="calc(50% - 90px)",r.style.width="180px",r.style.textDecoration="none",t(r),r}nk(bL.prototype),bL.prototype.removeCookie=function(e){var t=this._toCount(e),n=this._getSimpleCookie(t);if(n){this._removeSimpleCookie(t),n=parseInt(n,10);for(var r=0;r<n;++r)this._removeSimpleCookie(e+r)}else this._removeSimpleCookie(e)},bL.prototype.setCookie=function(e,t){this.removeCookie(e);var n=function(e,t){for(var n=e.length,r=[],i=0,o=0;o<n;i++,o+=t)r[i]=e.slice(o,o+t);return r}(t=encodeURIComponent(t),4e3-e.length-1),r=n.length;if(1!==r){var i=this._toCount(e);this._setSimpleCookie(i,r.toString());for(var o=0;o<r;++o)this._setSimpleCookie(e+o,n[o])}else this._setSimpleCookie(e,t)},bL.prototype.getCookie=function(e){var t=this._toCount(e),n=this._getSimpleCookie(t);if(!n)return this._getSimpleCookie(e);n=parseInt(n,10);for(var r=[],i=0;i<n;++i)r[i]=this._getSimpleCookie(e+i);return r.join("")},bL.prototype._toCount=function(e){return e+"Cnt"},bL.prototype._removeSimpleCookie=function(e){document.cookie="".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;")},bL.prototype._getExpirationDate=function(){var e=new Date;return e.setFullYear(e.getFullYear()+10),e},bL.prototype._setSimpleCookie=function(e,t){document.cookie="".concat(e,"=").concat(t,";expires=").concat(this._getExpirationDate().toUTCString(),";path=").concat(this._opts.path)},bL.prototype._getSimpleCookie=function(e){var t=document.cookie.match(new RegExp("(?:^|; )".concat(e,"=([^;]*)")));return t?decodeURIComponent(t[1]):""},bL.prototype._exists=function(e){return document.cookie.match(new RegExp("(?:^|; )".concat(e,"=([^;]*)")))};var _L=function(){function e(t){O_(this,e),this._mainCamera=new bp,this._button=null,this._onToggle=t,this._molContainer=new YE.RCGroup,this._user=new YE.RCGroup,this._scalingPivot=new fd,this._user.add(this._scalingPivot),this._controller1=null,this._controller2=null,this._pressedGripsCounter=0,this._distance=0,this._gfx=null}return C_(e,[{key:"startScalingByControllers",value:function(){this._distance=this._controller1.position.distanceTo(this._controller2.position),YE.getMiddlePoint(this._controller1.position,this._controller2.position,this._scalingPivot.position),this._scalingPivot.scale.set(1,1,1),this._scalingPivot.updateMatrix(),this._scalingPivot.updateMatrixWorld(),this._scalingPivot.addSavingWorldTransform(this._molContainer)}},{key:"stopScalingByControllers",value:function(){this._gfx.scene.addSavingWorldTransform(this._molContainer)}},{key:"handleGripsDown",value:function(e){this._pressedGripsCounter++,2===this._pressedGripsCounter?this.startScalingByControllers():1===this._pressedGripsCounter&&e.target.addSavingWorldTransform(this._molContainer)}},{key:"handleGripsUp",value:function(e){(this._pressedGripsCounter--,1===this._pressedGripsCounter)?(this.stopScalingByControllers(),(e.target===this._controller1?this._controller2:this._controller1).addSavingWorldTransform(this._molContainer)):0===this._pressedGripsCounter&&this._gfx.scene.addSavingWorldTransform(this._molContainer)}},{key:"enable",value:function(e){if(e){this._gfx=e;var t=e.renderer,n=e.camera;if(!t)throw new Error("No renderer is available to toggle WebVR");if(!n)throw new Error("No camera is available to toggle WebVR");t.xr.enabled=!0,this._button?this._button.style.display="block":(this._button=xL(this),document.body.appendChild(this._button)),this._mainFog=_w.now.fog,_w.set("fog",!1),this._plugVRNodesIntoScene(e,t),this._setControllersListeners(),this._onToggle&&this._onToggle(!0)}else nw.warn("WebVR couldn't be enabled, because gfx is not defined")}},{key:"_plugVRNodesIntoScene",value:function(e,t){this._mainCamera.copy(e.camera),e.scene.add(this._user),e.scene.add(this._molContainer),this._molContainer.add(e.root),this._controller1=t.xr.getController(0),this._controller2=t.xr.getController(1);var n=this._createControllerMesh();this._controller1.add(n),this._controller2.add(n.clone()),this._user.add(this._controller1),this._user.add(this._controller2)}},{key:"_setControllersListeners",value:function(){var e=this;this._controller1.addEventListener("selectstart",(function(t){e.handleGripsDown(t)})),this._controller1.addEventListener("selectend",(function(t){e.handleGripsUp(t)})),this._controller2.addEventListener("selectstart",(function(t){e.handleGripsDown(t)})),this._controller2.addEventListener("selectend",(function(t){e.handleGripsUp(t)})),this._controller1.addEventListener("squeezestart",(function(t){e.handleGripsDown(t)})),this._controller1.addEventListener("squeezeend",(function(t){e.handleGripsUp(t)})),this._controller2.addEventListener("squeezestart",(function(t){e.handleGripsDown(t)})),this._controller2.addEventListener("squeezeend",(function(t){e.handleGripsUp(t)}))}},{key:"disable",value:function(){if(this._gfx){var e=this._gfx,t=e.renderer,n=e.camera;if(!t)throw new Error("No renderer is available to toggle WebVR");t.setAnimationLoop(null);var r=t.xr.getSession();r&&r.end(),t.xr.enabled=!1,this._button&&(this._button.style.display="none"),_w.set("fog",this._mainFog),this._unplugVRNodesFromScene(n),this._onToggle&&this._onToggle(!1)}}},{key:"_unplugVRNodesFromScene",value:function(e){this._mainCamera&&e&&e.copy(this._mainCamera);var t=this._molContainer.children[0];t&&this._gfx.scene.add(t),this._molContainer.parent.remove(this._molContainer),this._user&&this._gfx.scene.remove(this._user),this._molContainer=null,this._user=null,this._scalingPivot=null,this._user=null,this._controller1=null,this._controller2=null}},{key:"_createControllerMesh",value:function(){var e=new ky(.04,.04,.3),t=new YO;t.setValues({lights:!1,overrideColor:!0}),t.setUberOptions({fixedColor:new Pd(4474111)}),t.updateUniforms();var n=new fp(e,t);return n.rotateX(-Math.PI/2),n}},{key:"updateMoleculeScale",value:function(){if(this._controller1&&this._controller2){var e=this;if(2===e._pressedGripsCounter){YE.getMiddlePoint(e._controller1.position,e._controller2.position,e._scalingPivot.position);var t=e._controller1.position.distanceTo(e._controller2.position),n=t/e._distance;e._scalingPivot.scale.multiplyScalar(n),e._distance=t}}}},{key:"moveSceneBehindHeadset",value:function(){var e=this._gfx,t=e.camera,n=this._molContainer;n.matrix.identity(),n.position.set(0,0,-4),n.updateMatrix(),n.matrixWorld.multiplyMatrices(t.matrixWorld,n.matrix),e.scene.addSavingWorldTransform(n),this._onToggle&&this._onToggle(!0)}},{key:"getCanvas",value:function(){var e=this._gfx;return e&&e.renderer?e.renderer.domElement:null}}]),e}();function wL(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R_(this,n)}}var SL=DE.selectors,EL=DE.Atom,kL=DE.Residue,OL=DE.Chain,AL=DE.Molecule,CL=0,ML=1,TL=2,PL="Could not find suitable loader for this source",RL=mw.createElement;function IL(e){var t=e.lastIndexOf(".");return t>=0&&(e=e.substr(0,t)),e}function LL(e,t,n){void 0!==n?e.debug("".concat(t,"... ").concat(Math.floor(100*n),"%")):e.debug("".concat(t,"..."))}function NL(){return _w.now.fogColorEnable?_w.now.fogColor:_w.now.bg.color}function jL(e,t){for(var n=e;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(t)}function DL(e){return e.getExtension("EXT_frag_depth")}function BL(e){return e.getExtension("WEBGL_depth_texture")&&e.getExtension("WEBGL_draw_buffers")}var zL=/^(?:(pdb|cif|mmtf|ccp4|dsn6):\s*)?(\d[a-z\d]{3})$/i,FL=/^(?:pc|pubchem):\s*([a-z]+)$/i,VL=/^([a-z][a-z\d\-+.]*):/i;function UL(e,t,n){return new Promise((function(r){if(n.shouldCancel())throw new Error("Operation cancelled");n.notify({type:"fetching"}),e=function(e,t){if(!(0,R.isString)(e))return e;var n=zL.exec(e);if(n){var r=j_(n,3),i=r[1],o=void 0===i?"pdb":i,a=r[2];switch(o=o.toLowerCase(),a=a.toUpperCase(),o){case"pdb":e="https://files.rcsb.org/download/".concat(a,".pdb");break;case"cif":e="https://files.rcsb.org/download/".concat(a,".cif");break;case"mmtf":e="https://mmtf.rcsb.org/v1.0/full/".concat(a);break;case"ccp4":e="https://www.ebi.ac.uk/pdbe/coordinates/files/".concat(a.toLowerCase(),".ccp4");break;case"dsn6":e="https://edmaps.rcsb.org/maps/".concat(a.toLowerCase(),"_2fofc.dsn6");break;default:throw new Error("Unexpected data format shortcut")}return t.fileType=o,t.fileName="".concat(a,".").concat(o),t.sourceType="url",e}var s=FL.exec(e);if(s){var u=s[1].toLowerCase();return e="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/name/".concat(u,"/JSON?record_type=3d"),t.fileType="pubchem",t.fileName="".concat(u,".json"),t.sourceType="url",e}return"url"!==t.sourceType&&void 0!==t.sourceType||(t.sourceType="url",VL.test(e)||(e=mw.resolveURL(e))),e}(e,t);var i=(0,R.head)(LI.loaders.find({type:t.sourceType,source:e}));if(!i)throw new Error(PL);var o=t.fileName||i.extractName(e);if(o){var a=j_(mw.splitFileName(o),2),s=a[0],u=a[1];(0,R.defaults)(t,{name:s,fileExt:u,fileName:o})}!function(e){var t=e.binary;if(void 0!==e.fileType){var n=(0,R.head)(LI.parsers.find({format:e.fileType}));if(!n)throw new Error("Could not find suitable parser for this format");t=n.binary||!1}if(void 0===t&&void 0!==e.fileExt){var r=(0,R.head)(LI.parsers.find({ext:e.fileExt}));r&&(t=r.binary||!1)}void 0!==e.fileExt&&".man"===e.fileExt.toLowerCase()&&(e.binary=!0,e.animation=!0),void 0!==t&&void 0!==e.binary&&e.binary!==t&&e.context.logger.warn("Overriding incorrect binary mode"),e.binary=t||!1}(t);var l=(0,R.get)(t,"preset.expression");if(!(0,R.isUndefined)(l)&&(l=JSON.parse(l))&&l.settings)for(var c=["singleUnit"],f=0,h=c.length;f<h;++f){var d=c[f],p=(0,R.get)(l.settings,d);(0,R.isUndefined)(p)||_w.set(d,p)}var v=new i(e,t);v.context=t.context,n.addEventListener("cancel",(function(){return v.abort()})),v.addEventListener("progress",(function(e){e.lengthComputable&&e.total>0?LL(v.logger,"Fetching",e.loaded/e.total):LL(v.logger,"Fetching")})),console.time("fetch"),r(v.load().then((function(e){return console.timeEnd("fetch"),t.context.logger.info("Fetching finished"),n.notify({type:"fetchingDone",data:e}),e})).catch((function(e){throw console.timeEnd("fetch"),t.context.logger.debug(e.message),e.stack&&t.context.logger.debug(e.stack),t.context.logger.error("Fetching failed"),n.notify({type:"fetchingDone",error:e}),e})))}))}function ZL(e,t){return e.mask&1<<t}function HL(e,t){return t.selector.includesAtom(e)}var GL=function(e){P_(n,e);var t=wL(n);function n(e){var r;O_(this,n),(r=t.call(this))._opts=(0,R.merge)({settingsCookie:"settings",cookiePath:"/"},e),r._gfx=null,r._interpolator=new yL,r._container=e&&e.container||document.getElementById("miew-container")||(0,R.head)(document.getElementsByClassName("miew-container"))||document.body,r._containerRoot=r._container,r._running=!1,r._halting=!1,r._building=!1,r._needRender=!0,r._hotKeysEnabled=!0,r.settings=_w;var i=nw;i.console=!1,i.level="info",r.logger=i,r._cookies=new bL(M_(r)),r.restoreSettings(),e&&e.settings&&r.settings.set(e.settings),r._spinner=null,r._loading=[],r._animInterval=null,r._visuals={},r._curVisualName=null,r._objects=[],r._sourceWindow=null,r.reset(),r._repr&&i.debug("Selected ".concat(r._repr.mode.name," mode with ").concat(r._repr.colorer.name," colorer."));var o=M_(r);return n.registeredPlugins.forEach((function(e){e.call(o)})),r._initOnSettingsChanged(),r.shadowMatrix=new Fh,r.direction=new lh,r.OBB={center:new lh,halfSize:new lh},r._bSphereForOneVisual=new Ph,r._bBoxForOneVisual=new hh,r._bBox=new hh,r._invMatrix=new Fh,r._points=[new lh,new lh,new lh,new lh],r._anaglyphMat=new mL,r._size=new $f,r._scene=new Eg,r._camera=new Zp(-1,1,1,-1,-500,1e3),r._material=new Hp({uniforms:{srcTex:{type:"t",value:null},aberration:{type:"fv3",value:new lh(1)}},vertexShader:UE,fragmentShader:"precision highp float;\r\n\r\nvarying vec2 vUv;\r\nuniform sampler2D srcTex;\r\nuniform vec3 aberration;\r\n\r\nvoid main() {\r\n  vec2 uv = vUv * 2.0 - 1.0;\r\n  \r\n  gl_FragColor.r = texture2D(srcTex, 0.5 * (uv * aberration[0] + 1.0)).r;\r\n  gl_FragColor.g = texture2D(srcTex, 0.5 * (uv * aberration[1] + 1.0)).g;\r\n  gl_FragColor.b = texture2D(srcTex, 0.5 * (uv * aberration[2] + 1.0)).b;\r\n  gl_FragColor.a = 1.0;\r\n}",transparent:!1,depthTest:!1,depthWrite:!1}),r._geo=YE.buildDistorionMesh(10,10,_w.now.debug.stereoBarrel),r._outlineMaterial=new rL({depth:!0}),r.pars={minFilter:af,magFilter:af,format:yf},r.VERSION="0.10.0+20220125.134627.b36f6a2-mod",r}return C_(n,[{key:"getMaxRepresentationCount",value:function(){return MT.NUM_REPRESENTATION_BITS}},{key:"_updateShadowCamera",value:function(){this._gfx.scene.updateMatrixWorld();for(var e=0;e<this._gfx.scene.children.length;e++)if("DirectionalLight"===this._gfx.scene.children[e].type){var t=this._gfx.scene.children[e];this.shadowMatrix.copy(t.shadow.camera.matrixWorldInverse),this.getOBB(this.shadowMatrix,this.OBB),this.direction.subVectors(t.target.position,t.position),t.position.subVectors(this.OBB.center,this.direction),t.target.position.copy(this.OBB.center),t.shadow.bias=.09,t.shadow.camera.bottom=-this.OBB.halfSize.y,t.shadow.camera.top=this.OBB.halfSize.y,t.shadow.camera.right=this.OBB.halfSize.x,t.shadow.camera.left=-this.OBB.halfSize.x,t.shadow.camera.near=this.direction.length()-this.OBB.halfSize.z,t.shadow.camera.far=this.direction.length()+this.OBB.halfSize.z,t.shadow.camera.updateProjectionMatrix()}}},{key:"init",value:function(){var e=this._container,t=mw.createElement("div",{class:"miew-canvas"});jL(e,t),this._container=t;var n=document.createDocumentFragment();if(n.appendChild(this._msgMode=RL("div",{class:"mode-message overlay"},RL("p",{},"COMPONENT EDIT MODE"))),n.appendChild(this._msgAtomInfo=RL("div",{class:"atom-info overlay"},RL("p",{},""))),e.appendChild(n),null!==this._gfx)return!0;var r=this;this._showMessage("Viewer is being initialized...");try{this._initGfx(),this._initListeners(),this._spinner=new z_({lines:13,length:28,width:14,radius:42,color:"#fff",zIndex:700}),window.top.addEventListener("keydown",(function(e){r._onKeyDown(e)})),window.top.addEventListener("keyup",(function(e){r._onKeyUp(e)})),this._objectControls=new GI(this._gfx.root,this._gfx.pivot,this._gfx.camera,this._gfx.renderer.domElement,(function(){return r._getAltObj()})),this._objectControls.addEventListener("change",(function(e){switch(_w.now.shadow.on&&r._updateShadowCamera(),e.action){case"rotate":r.dispatchEvent({type:"rotate",quaternion:e.quaternion});break;case"zoom":r.dispatchEvent({type:"zoom",factor:e.factor});break;default:r.dispatchEvent({type:e.action})}r.dispatchEvent({type:"transform"}),r._needRender=!0}));var i=this._gfx;this._picker=new WI(i.root,i.camera,i.renderer.domElement),this._picker.addEventListener("newpick",(function(e){r._onPick(e)})),this._picker.addEventListener("dblclick",(function(e){r.center(e)}))}catch(s){if("TypeError"===s.name&&"Cannot read property 'getExtension' of null"===s.message)this._showMessage("Could not create WebGL context.");else{if(!(s.message.search(/webgl/i)>1))throw this._showMessage("Viewer initialization failed."),s;this._showMessage(s.message)}return!1}var o=this._opts&&this._opts.load;if(o){var a=this._opts&&this._opts.type;this.load(o,{fileType:a,keepRepsInfo:!0})}return!0}},{key:"term",value:function(){this._showMessage("Viewer has been terminated."),this._loading.forEach((function(e){e.cancel()})),this._loading.length=0,this.halt(),this._gfx=null}},{key:"_showMessage",value:function(e){var t=document.createElement("div");t.setAttribute("class","miew-message"),t.appendChild(document.createElement("p")).appendChild(document.createTextNode(e)),jL(this._container,t)}},{key:"_showCanvas",value:function(){jL(this._container,this._gfx.renderer.domElement)}},{key:"_requestAnimationFrame",value:function(e){var t=this._gfx.renderer.xr;t&&t.enabled?this._gfx.renderer.setAnimationLoop(e):requestAnimationFrame(e)}},{key:"_initGfx",value:function(){var e={width:this._container.clientWidth,height:this._container.clientHeight},t={preserveDrawingBuffer:!0,alpha:!0,premultipliedAlpha:!1};_w.now.antialias&&(t.antialias=!0),e.renderer2d=new jI,e.renderer=new _g(t),e.renderer.shadowMap.enabled=_w.now.shadow.on,e.renderer.shadowMap.autoUpdate=!1,e.renderer.shadowMap.type=1,BO.init(e.renderer),DL(e.renderer.getContext())||_w.set("zSprites",!1),BL(e.renderer.getContext())||_w.set("ao",!1),e.renderer.autoClear=!1,e.renderer.setPixelRatio(window.devicePixelRatio),e.renderer.setSize(e.width,e.height),e.renderer.setClearColor(_w.now.bg.color,Number(!_w.now.bg.transparent)),e.renderer.clearColor(),e.renderer2d.setSize(e.width,e.height),e.camera=new bp(_w.now.camFov,e.width/e.height,_w.now.camNear,_w.now.camFar),e.camera.setMinimalFov(_w.now.camFov),e.camera.position.z=_w.now.camDistance,e.camera.updateProjectionMatrix(),e.camera.layers.set(YE.LAYERS.DEFAULT),e.camera.layers.enable(YE.LAYERS.VOLUME),e.camera.layers.enable(YE.LAYERS.VOLUME_BFPLANE),e.stereoCam=new Vx,e.scene=new Eg;var n=NL();e.scene.fog=new Sg(n,_w.now.camNear,_w.now.camFar),e.root=new YE.RCGroup,e.scene.add(e.root),e.pivot=new YE.RCGroup,e.root.add(e.pivot),e.selectionScene=new Eg,e.selectionRoot=new pg,e.selectionRoot.matrixAutoUpdate=!1,e.selectionScene.add(e.selectionRoot),e.selectionPivot=new pg,e.selectionPivot.matrixAutoUpdate=!1,e.selectionRoot.add(e.selectionPivot);var r=new _x(16777215,.45);r.position.set(0,.414,1),r.layers.enable(YE.LAYERS.TRANSPARENT),r.castShadow=!0,r.shadow.bias=.09,r.shadow.radius=_w.now.shadow.radius,r.shadow.camera.layers.set(YE.LAYERS.SHADOWMAP);var i=e.renderer.getPixelRatio(),o=Math.max(e.width,e.height)*i;r.shadow.mapSize.width=o,r.shadow.mapSize.height=o,r.target.position.set(0,0,0),e.scene.add(r),e.scene.add(r.target);var a=new wx(6710886);a.layers.enable(YE.LAYERS.TRANSPARENT),e.scene.add(a),e.axes=new qI(e.root,e.camera);var s=e.width*i,u=e.height*i;e.offscreenBuf=new oh(s,u,{minFilter:lf,magFilter:af,format:yf,depthBuffer:!0}),e.renderer.getContext().getExtension("WEBGL_depth_texture")&&(e.offscreenBuf.depthTexture=new Ey,e.offscreenBuf.depthTexture.type=hf),e.offscreenBuf2=new oh(s,u,{minFilter:lf,magFilter:lf,format:yf,depthBuffer:!1}),e.offscreenBuf3=new oh(s,u,{minFilter:lf,magFilter:lf,format:yf,depthBuffer:!1}),e.offscreenBuf4=new oh(s,u,{minFilter:lf,magFilter:lf,format:yf,depthBuffer:!1}),e.volBFTex=e.offscreenBuf3,e.volFFTex=e.offscreenBuf4,e.volWFFTex=e.offscreenBuf,e.renderer.getContext().getExtension("OES_texture_float")?(e.offscreenBuf5=new oh(s,u,{minFilter:lf,magFilter:lf,format:yf,type:pf,depthBuffer:!1}),e.offscreenBuf6=new oh(s,u,{minFilter:lf,magFilter:lf,format:yf,type:pf,depthBuffer:!1}),e.offscreenBuf7=new oh(s,u,{minFilter:lf,magFilter:lf,format:yf,type:pf,depthBuffer:!0}),e.volBFTex=e.offscreenBuf5,e.volFFTex=e.offscreenBuf6,e.volWFFTex=e.offscreenBuf7):this.logger.warn("Device doesn't support OES_texture_float extension"),e.stereoBufL=new oh(s,u,{minFilter:lf,magFilter:lf,format:yf,depthBuffer:!1}),e.stereoBufR=new oh(s,u,{minFilter:lf,magFilter:lf,format:yf,depthBuffer:!1}),this._gfx=e,this._showCanvas(),this._embedWebXR("WEBVR"===_w.now.stereo),this._container.appendChild(e.renderer2d.getElement());var l=new q_;l.domElement.style.position="absolute",l.domElement.style.right="0",l.domElement.style.bottom="0",this._container.appendChild(l.domElement),this._fps=l,this._fps.show(_w.now.fps)}},{key:"_initListeners",value:function(){var e=this;window.addEventListener("resize",(function(){e._onResize()}))}},{key:"_makeUniqueVisualName",value:function(e){if(!e)return Math.random().toString();for(var t=e,n=1;this._visuals.hasOwnProperty(t);)t="".concat(e," (").concat(n.toString(),")"),n++;return t}},{key:"_addVisual",value:function(e){if(!e)return null;var t=this._makeUniqueVisualName(e.name);return e.name=t,this._visuals[t]=e,this._gfx.pivot.add(e),e.getSelectionGeo&&this._gfx.selectionPivot.add(e.getSelectionGeo()),t}},{key:"_removeVisual",value:function(e){var t="",n=null;e instanceof JE?(t=e.name,n=e):"string"===typeof e&&(t=e,n=this._visuals[t]),n&&this._visuals.hasOwnProperty(t)&&this._visuals[t]===n&&(t===this._curVisualName&&(this._curVisualName=void 0),delete this._visuals[t],n.release(),this._needRender=!0)}},{key:"_forEachVisual",value:function(e){for(var t in this._visuals)this._visuals.hasOwnProperty(t)&&e(this._visuals[t])}},{key:"_releaseAllVisuals",value:function(){if(this._gfx&&this._gfx.pivot){for(var e in this._visuals)this._visuals.hasOwnProperty(e)&&this._visuals[e].release();this._visuals={}}}},{key:"_forEachComplexVisual",value:function(e){if(this._gfx&&this._gfx.pivot)for(var t in this._visuals)this._visuals.hasOwnProperty(t)&&this._visuals[t]instanceof MT&&e(this._visuals[t])}},{key:"_getComplexVisual",value:function(e){e=e||this._curVisualName;var t=null,n=null;return this._forEachComplexVisual((function(r){t=r,r.name===e&&(n=r)})),n||t}},{key:"_getVolumeVisual",value:function(){var e=null;return this._forEachVisual((function(t){t instanceof UT&&(e=t)})),e}},{key:"_getVisualForComplex",value:function(e){if(!e)return null;var t=null;return this._forEachComplexVisual((function(n){n.getComplex()===e&&(t=n)})),t}},{key:"getVisuals",value:function(){return Object.keys(this._visuals)}},{key:"getComplexVisualsCount",value:function(){var e=0;return this._forEachComplexVisual((function(){return e++})),e}},{key:"getCurrentVisual",value:function(){return this._curVisualName}},{key:"setCurrentVisual",value:function(e){this._visuals[e]&&(this._curVisualName=e)}},{key:"run",value:function(){var e=this;if(!this._running){if(this._running=!0,this._halting)return void(this._halting=!1);this._objectControls.enable(!0),this._interpolator.resume(),this._requestAnimationFrame((function(){return e._onTick()}))}}},{key:"halt",value:function(){this._running&&(this._discardComponentEdit(),this._discardFragmentEdit(),this._objectControls.enable(!1),this._interpolator.pause(),this._halting=!0)}},{key:"enableHotKeys",value:function(e){this._hotKeysEnabled=e,this._objectControls.enableHotkeys(e)}},{key:"_onResize",value:function(){this._needRender=!0;var e=this._gfx;e.width=this._container.clientWidth,e.height=this._container.clientHeight,e.camera.aspect=e.width/e.height,e.camera.setMinimalFov(_w.now.camFov),e.camera.updateProjectionMatrix(),e.renderer.setSize(e.width,e.height),e.renderer2d.setSize(e.width,e.height),this.dispatchEvent({type:"resize"})}},{key:"_resizeOffscreenBuffers",value:function(e,t,n){var r=this._gfx,i="NONE"===(n=n||"NONE")||"ANAGLYPH"===n,o=i?1:.5;r.offscreenBuf.setSize(o*e,t),r.offscreenBuf2.setSize(o*e,t),r.offscreenBuf3.setSize(o*e,t),r.offscreenBuf4.setSize(o*e,t),r.offscreenBuf5&&r.offscreenBuf5.setSize(o*e,t),r.offscreenBuf6&&r.offscreenBuf6.setSize(o*e,t),r.offscreenBuf7&&r.offscreenBuf7.setSize(o*e,t),i&&(r.stereoBufL.setSize(e,t),r.stereoBufR.setSize(e,t))}},{key:"_onTick",value:function(){var e=this;if(this._halting)return this._running=!1,void(this._halting=!1);this._fps.update(),this._requestAnimationFrame((function(){return e._onTick()})),this._onUpdate(),this._needRender&&(this._onRender(),this._needRender=!_w.now.suspendRender||"WEBVR"===_w.now.stereo)}},{key:"_getBSphereRadius",value:function(){var e=0;return this._forEachVisual((function(t){e=Math.max(e,t.getBoundaries().boundingSphere.radius)})),e*this._objectControls.getScale()}},{key:"getOBB",value:function(e,t){var n=this;this._bBox.makeEmpty(),this._forEachVisual((function(t){n._bSphereForOneVisual.copy(t.getBoundaries().boundingSphere),n._bSphereForOneVisual.applyMatrix4(t.matrixWorld).applyMatrix4(e),n._bSphereForOneVisual.getBoundingBox(n._bBoxForOneVisual),n._bBox.union(n._bBoxForOneVisual)})),this._bBox.getCenter(t.center),this._invMatrix.copy(e).invert(),t.center.applyMatrix4(this._invMatrix);var r=this._bBox.min,i=this._bBox.max;this._points[0].set(r.x,r.y,r.z),this._points[1].set(i.x,r.y,r.z),this._points[2].set(r.x,i.y,r.z),this._points[3].set(r.x,r.y,i.z);for(var o=0,a=this._points.length;o<a;o++)this._points[o].applyMatrix4(this._invMatrix);t.halfSize.set(Math.abs(this._points[0].x-this._points[1].x),Math.abs(this._points[0].y-this._points[2].y),Math.abs(this._points[0].z-this._points[3].z)).multiplyScalar(.5)}},{key:"_updateFog",value:function(){var e,t,n,r=this._gfx;if(_w.now.fog){if("undefined"===typeof r.scene.fog||null===r.scene.fog){var i=NL();r.scene.fog=new Sg(i),this._setUberMaterialValues({fog:_w.now.fog})}e=r.scene.fog,t=r.camera.position.z,n=this._getBSphereRadius(),e.near=t-n*_w.now.fogNearFactor,e.far=t+n*_w.now.fogFarFactor}else r.scene.fog&&(r.scene.fog=void 0,this._setUberMaterialValues({fog:_w.now.fog}))}},{key:"_onUpdate",value:function(){void 0!==this.isScriptingCommandAvailable&&this.isScriptingCommandAvailable()&&!this._building&&this.callNextCmd(),this._objectControls.update(),this._forEachComplexVisual((function(e){e.getComplex().update()})),_w.now.autobuild&&!this._loading.length&&!this._building&&this._needRebuild()&&this.rebuild(),this._loading.length||this._building||this._needRebuild()||this._updateView(),this._updateFog(),this._gfx.renderer.xr.enabled&&this.webVR.updateMoleculeScale()}},{key:"_onRender",value:function(){var e=this._gfx;e.scene.updateMatrixWorld(),e.camera.updateMatrixWorld(),this._clipPlaneUpdateValue(this._getBSphereRadius()),this._fogFarUpdateValue(),e.renderer.setRenderTarget(null),e.renderer.clear(),this._renderFrame(_w.now.stereo)}},{key:"_renderFrame",value:function(e){var t=this._gfx,n=t.renderer;n.getSize(this._size),"NONE"!==e&&(t.camera.focus=t.camera.position.z,t.stereoCam.aspect=1,"ANAGLYPH"===e?t.stereoCam.update(t.camera):t.stereoCam.updateHalfSized(t.camera,_w.now.camFov));var r=t.renderer.getPixelRatio();switch(this._resizeOffscreenBuffers(this._size.width*r,this._size.height*r,e),this._renderShadowMap(),e){case"WEBVR":case"NONE":this._renderScene(t.camera,!1);break;case"SIMPLE":case"DISTORTED":n.setScissorTest(!0),n.setScissor(0,0,this._size.width/2,this._size.height),n.setViewport(0,0,this._size.width/2,this._size.height),this._renderScene(this._gfx.stereoCam.cameraL,"DISTORTED"===e),n.setScissor(this._size.width/2,0,this._size.width/2,this._size.height),n.setViewport(this._size.width/2,0,this._size.width/2,this._size.height),this._renderScene(this._gfx.stereoCam.cameraR,"DISTORTED"===e),n.setScissorTest(!1);break;case"ANAGLYPH":this._renderScene(this._gfx.stereoCam.cameraL,!1,t.stereoBufL),this._renderScene(this._gfx.stereoCam.cameraR,!1,t.stereoBufR),n.setRenderTarget(null),this._anaglyphMat.uniforms.srcL.value=t.stereoBufL.texture,this._anaglyphMat.uniforms.srcR.value=t.stereoBufR.texture,t.renderer.renderScreenQuad(this._anaglyphMat)}t.renderer2d.render(t.scene,t.camera),_w.now.axes&&t.axes&&!t.renderer.xr.enabled&&t.axes.render(n)}},{key:"_onBgColorChanged",value:function(){var e=this._gfx,t=NL();e&&(e.scene.fog&&e.scene.fog.color.set(t),e.renderer.setClearColor(_w.now.bg.color,Number(!_w.now.bg.transparent))),this._needRender=!0}},{key:"_onFogColorChanged",value:function(){var e=this._gfx,t=NL();e&&e.scene.fog&&e.scene.fog.color.set(t),this._needRender=!0}},{key:"_setUberMaterialValues",value:function(e){this._gfx.root.traverse((function(t){(t instanceof fp||t instanceof hy||t instanceof ly)&&t.material instanceof YO&&(t.material.setValues(e),t.material.needsUpdate=!0)}))}},{key:"_enableMRT",value:function(e,t,n){var r=this._gfx,i=r.renderer.getContext(),o=i.getExtension("WEBGL_draw_buffers"),a=r.renderer.properties;if(e){r.renderer.setRenderTarget(n);var s=a.get(n.texture).__webglTexture;i.bindTexture(i.TEXTURE_2D,s),r.renderer.setRenderTarget(t);var u=a.get(t).__webglFramebuffer,l=a.get(t.texture).__webglTexture;i.bindFramebuffer(i.FRAMEBUFFER,u),u.width=t.width,u.height=t.height,i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,l,0),i.framebufferTexture2D(i.FRAMEBUFFER,o.COLOR_ATTACHMENT1_WEBGL,i.TEXTURE_2D,s,0),o.drawBuffersWEBGL([i.COLOR_ATTACHMENT0,o.COLOR_ATTACHMENT1_WEBGL])}else o.drawBuffersWEBGL([i.COLOR_ATTACHMENT0,null])}},{key:"_renderScene",value:function(e,t,n){t=t||!1,n=n||null;var r=this._gfx;if(r.renderer.setClearColor(_w.now.bg.color,Number(!_w.now.bg.transparent)),r.renderer.setRenderTarget(n),r.renderer.clear(),r.renderer.xr.enabled)r.renderer.render(r.scene,e);else{r.renderer.setClearColor(0,0),r.renderer.setRenderTarget(r.offscreenBuf4),r.renderer.clearColor(),r.renderer.setClearColor(_w.now.bg.color,Number(!_w.now.bg.transparent)),r.renderer.setRenderTarget(r.offscreenBuf),r.renderer.clear();var i=null!==this._getComplexVisual(),o=this._getVolumeVisual(),a=i&&_w.now.ao;a&&this._enableMRT(!0,r.offscreenBuf,r.offscreenBuf4),"prepass"===_w.now.transparency?this._renderWithPrepassTransparency(e,r.offscreenBuf):"standard"===_w.now.transparency&&(r.renderer.setRenderTarget(r.offscreenBuf),r.renderer.render(r.scene,e)),a&&this._enableMRT(!1,null,null);var s=i&&_w.now.outline.on,u=i&&_w.now.fxaa,l=null!==o&&null!=o.getMesh().material,c=a||s||l||u||t?r.offscreenBuf2:n,f=r.offscreenBuf;a?(this._performAO(f,r.offscreenBuf4,r.offscreenBuf.depthTexture,c,r.offscreenBuf3,r.offscreenBuf2),u||t||l||s||(f=c,c=n,r.renderer.setRenderTarget(c),r.renderer.renderScreenQuadFromTex(f.texture,1))):(r.renderer.setRenderTarget(c),r.renderer.renderScreenQuadFromTex(f.texture,1)),s&&(f=c,c=l||u||t?r.offscreenBuf3:n,null!=f&&this._renderOutline(e,r.offscreenBuf,f,c)),this._renderSelection(e,r.offscreenBuf,c),l&&(r.renderer.setRenderTarget(r.offscreenBuf),r.renderer.renderScreenQuadFromTex(c.texture,1),c=r.offscreenBuf,this._renderVolume(o,e,c,r.volBFTex,r.volFFTex,r.volWFFTex),u||t||(r.renderer.setRenderTarget(n),r.renderer.renderScreenQuadFromTex(c.texture,1))),f=c,u&&(c=t?r.offscreenBuf4:n,this._performFXAA(f,c),f=c),t&&(c=n,this._performDistortion(f,c,!0))}}},{key:"_performDistortion",value:function(e,t,n){this._scene.add(new pA.Mesh(this._geo,this._material)),this._gfx.renderer.setRenderTarget(t),this._gfx.renderer.clear(),n?(this._material.uniforms.srcTex.value=e.texture,this._material.uniforms.aberration.value.set(.995,1,1.01),this._gfx.renderer.render(this._scene,this._camera)):this._gfx.renderer.renderScreenQuadFromTexWithDistortion(e,_w.now.debug.stereoBarrel)}},{key:"_renderOutline",value:function(e,t,n,r){var i=this._gfx;this._outlineMaterial.uniforms.srcTex.value=n.texture,this._outlineMaterial.uniforms.srcDepthTex.value=t.depthTexture,this._outlineMaterial.uniforms.srcTexSize.value.set(t.width,t.height),this._outlineMaterial.uniforms.color.value=new Pd(_w.now.outline.color),this._outlineMaterial.uniforms.threshold.value=_w.now.outline.threshold,this._outlineMaterial.uniforms.thickness.value=new $f(_w.now.outline.thickness,_w.now.outline.thickness),i.renderer.setRenderTarget(r),i.renderer.renderScreenQuad(this._outlineMaterial)}},{key:"_renderShadowMap",value:function(){if(_w.now.shadow.on){var e=this._gfx,t=e.renderer.getRenderTarget(),n=e.renderer.getActiveCubeFace(),r=e.renderer.getActiveMipmapLevel(),i=e.renderer.state;i.setBlending(0),i.buffers.color.setClear(1,1,1,1),i.buffers.depth.setTest(!0),i.setScissorTest(!1);for(var o=0;o<e.scene.children.length;o++)if("DirectionalLight"===e.scene.children[o].type){var a=e.scene.children[o];null==a.shadow.map&&(a.shadow.map=new oh(a.shadow.mapSize.width,a.shadow.mapSize.height,this.pars),a.shadow.camera.updateProjectionMatrix()),a.shadow.updateMatrices(a),e.renderer.setRenderTarget(a.shadow.map),e.renderer.clear(),e.renderer.render(e.scene,a.shadow.camera)}e.renderer.setRenderTarget(t,n,r)}}},{key:"_hasSelectionToRender",value:function(){for(var e=this._gfx.selectionPivot,t=0;t<e.children.length;t++){if(e.children[t].children.length>0)return!0}return!1}},{key:"_renderSelection",value:function(e,t,n){var r=new rL,i=this._gfx;i.renderer.setClearColor("black",0),i.renderer.setRenderTarget(t),i.renderer.clear(!0,!1,!1),this._hasSelectionToRender()?(i.selectionRoot.matrix=i.root.matrix,i.selectionPivot.matrix=i.pivot.matrix,i.renderer.render(i.selectionScene,e)):i.renderer.renderDummyQuad(),i.renderer.setRenderTarget(n),i.renderer.renderScreenQuadFromTex(t.texture,.6),r.uniforms.srcTex.value=t.texture,r.uniforms.srcTexSize.value.set(t.width,t.height),i.renderer.renderScreenQuad(r)}},{key:"_checkVolumeRenderingSupport",value:function(e){if(!e)return!1;var t=this._gfx,n=t.renderer.getRenderTarget();t.renderer.setRenderTarget(e);var r=t.renderer.getContext(),i=r.checkFramebufferStatus(r.FRAMEBUFFER);return t.renderer.setRenderTarget(n),i===r.FRAMEBUFFER_COMPLETE||(this.logger.warn("Device doesn't support electron density rendering"),!1)}},{key:"_renderVolume",value:function(e,t,n,r,i,o){var a,s=new jT.BackFacePosMaterial,u=new jT.FrontFacePosMaterial,l=(new Fh).makeTranslation(.5,.5,.5),c=new Fh,f=this._gfx;if("undefined"===typeof a&&(a=this._checkVolumeRenderingSupport(r)),a){var h=e.getMesh();h.rebuild(f.camera),f.renderer.setClearColor("black",0),f.renderer.setRenderTarget(r),f.renderer.clear(),f.renderer.setRenderTarget(i),f.renderer.clear(),f.renderer.setRenderTarget(o),f.renderer.clear(),f.renderer.setRenderTarget(r),t.layers.set(YE.LAYERS.VOLUME_BFPLANE),f.renderer.render(f.scene,t),t.layers.set(YE.LAYERS.VOLUME),f.scene.overrideMaterial=s,f.renderer.render(f.scene,t),f.renderer.setRenderTarget(i),t.layers.set(YE.LAYERS.VOLUME),f.scene.overrideMaterial=u,f.renderer.render(f.scene,t),f.scene.overrideMaterial=null,t.layers.set(YE.LAYERS.DEFAULT),c.copy(h.matrixWorld).invert(),YO.prototype.uberOptions.world2colorMatrix.multiplyMatrices(l,c),t.layers.set(YE.LAYERS.COLOR_FROM_POSITION),f.renderer.setRenderTarget(o),f.renderer.render(f.scene,t);var d=h.material;d.uniforms._BFRight.value=r.texture,d.uniforms._FFRight.value=i.texture,d.uniforms._WFFRight.value=o.texture,t.layers.set(YE.LAYERS.VOLUME),f.renderer.setRenderTarget(n),f.renderer.render(f.scene,t),t.layers.set(YE.LAYERS.DEFAULT)}}},{key:"_renderWithPrepassTransparency",value:function(e,t){var n=this._gfx;n.renderer.setRenderTarget(t),e.layers.set(YE.LAYERS.DEFAULT),n.renderer.render(n.scene,e),e.layers.set(YE.LAYERS.PREPASS_TRANSPARENT),n.renderer.getContext().colorMask(!1,!1,!1,!1),n.renderer.render(n.scene,e),n.renderer.getContext().colorMask(!0,!0,!0,!0),e.layers.set(YE.LAYERS.TRANSPARENT),n.renderer.render(n.scene,e),e.layers.set(YE.LAYERS.DEFAULT)}},{key:"_performFXAA",value:function(e,t){var n=new oL;if("undefined"!==typeof e&&"undefined"!==typeof t){var r=this._gfx;r.renderer.setClearColor(_w.now.bg.color,Number(!_w.now.bg.transparent)),r.renderer.setRenderTarget(t),r.renderer.clear(),n.uniforms.srcTex.value=e.texture,n.uniforms.srcTexelSize.value.set(1/e.width,1/e.height),n.uniforms.bgColor.value.set(_w.now.bg.color),n.bgTransparent!==_w.now.bg.transparent&&(n.setValues({bgTransparent:_w.now.bg.transparent}),n.needsUpdate=!0),r.renderer.renderScreenQuad(n)}}},{key:"_performAO",value:function(e,t,n,r,i,o){var a=new uL,s=new fL,u=new pL,l=new lh;if(e&&t&&n&&r&&i&&o){var c=this._gfx,f=Math.tan(.5*Xf.DEG2RAD*c.camera.fov);a.uniforms.diffuseTexture.value=e.texture,a.uniforms.depthTexture.value=n,a.uniforms.normalTexture.value=t.texture,a.uniforms.srcTexelSize.value.set(1/e.width,1/e.height),a.uniforms.camNearFar.value.set(c.camera.near,c.camera.far),a.uniforms.projMatrix.value=c.camera.projectionMatrix,a.uniforms.aspectRatio.value=c.camera.aspect,a.uniforms.tanHalfFOV.value=f,c.root.matrix.extractScale(l),a.uniforms.kernelRadius.value=_w.now.debug.ssaoKernelRadius*l.x,a.uniforms.depthThreshold.value=2*this._getBSphereRadius(),a.uniforms.factor.value=_w.now.debug.ssaoFactor,c.renderer.setRenderTarget(o),c.renderer.renderScreenQuad(a),s.uniforms.aoMap.value=o.texture,s.uniforms.srcTexelSize.value.set(1/o.width,1/o.height),s.uniforms.depthTexture.value=n,c.renderer.setRenderTarget(i),c.renderer.renderScreenQuad(s),u.uniforms.aoMap.value=i.texture,u.uniforms.diffuseTexture.value=e.texture,u.uniforms.srcTexelSize.value.set(1/i.width,1/i.height),u.uniforms.depthTexture.value=n,u.uniforms.projMatrix.value=c.camera.projectionMatrix,u.uniforms.aspectRatio.value=c.camera.aspect,u.uniforms.tanHalfFOV.value=f;var h=c.scene.fog;h&&(u.uniforms.fogNearFar.value.set(h.near,h.far),u.uniforms.fogColor.value.set(h.color.r,h.color.g,h.color.b,_w.now.fogAlpha)),u.useFog===_w.now.fog&&u.fogTransparent===_w.now.bg.transparent||(u.setValues({useFog:_w.now.fog,fogTransparent:_w.now.bg.transparent}),u.needsUpdate=!0),c.renderer.setRenderTarget(r),c.renderer.renderScreenQuad(u)}}},{key:"reset",value:function(){this._picker&&this._picker.reset(),this._lastPick=null,this._releaseAllVisuals(),this._setEditMode(CL),this._resetObjects(),this._gfx&&(YE.clearTree(this._gfx.pivot),this._gfx.renderer2d.reset()),this.setNeedRender()}},{key:"_resetScene",value:function(){this._objectControls.reset(),this._objectControls.allowTranslation(!0),this._objectControls.allowAltObjFreeRotation(!0),this.resetReps(),this.resetPivot(),this.rebuildAll()}},{key:"resetView",value:function(){this._picker&&this._picker.reset(),this._setEditMode(CL),this._resetScene(),this._forEachComplexVisual((function(e){e.updateSelectionMask({}),e.rebuildSelectionGeometry()}))}},{key:"_export",value:function(e){var t=(0,R.head)(LI.exporters.find({format:e}));if(!t)return this.logger.error("Could not find suitable exporter for this source"),Promise.reject(new Error("Could not find suitable exporter for this source"));if(this.dispatchEvent({type:"exporting"}),this._visuals[this._curVisualName]instanceof MT){var r=null;return t.SourceClass===MT?r=this._visuals[this._curVisualName]:t.SourceClass===IE&&(r=this._visuals[this._curVisualName]._complex),new t(r,{miewVersion:n.VERSION}).export().then((function(e){return e}))}return this._visuals[this._curVisualName]instanceof UT?Promise.reject(new Error("Sorry, exporter for volume data not implemented yet")):Promise.reject(new Error("Unexpected format of data"))}},{key:"load",value:function(e,t){var n=this;t=(0,R.merge)({},t,{context:this}),this.settings.now.use.multiFile||(this._loading.length&&(this._loading.forEach((function(e){e.cancel()})),this._loading.length=0),t.animation||this.reset(!0)),this._interpolator.reset(),this.dispatchEvent({type:"loading",options:t,source:e});var r=new yw;this._loading.push(r),r.addEventListener("notification",(function(e){n.dispatchEvent(e.slaveEvent)})),this._spinner.spin(this._container);var i=function(e){var t=n._loading.indexOf(r);return-1!==t&&n._loading.splice(t,1),n._spinner.stop(),n._refreshTitle(),r.notify({type:"loadingDone",anything:e}),e};return UL(e,t,r).then((function(e){return function(e,t,n){if(n.shouldCancel())return Promise.reject(new Error("Operation cancelled"));n.notify({type:"parsing"});var r=(0,R.head)(LI.parsers.find({format:t.fileType,ext:t.fileExt,data:e}));if(!r)return Promise.reject(new Error("Could not find suitable parser"));var i=new r(e,t);return i.context=t.context,n.addEventListener("cancel",(function(){return i.abort()})),console.time("parse"),i.parse().then((function(e){return console.timeEnd("parse"),n.notify({type:"parsingDone",data:e}),e})).catch((function(e){throw console.timeEnd("parse"),t.error=e,t.context.logger.debug(e.message),e.stack&&t.context.logger.debug(e.stack),t.context.logger.error("Parsing failed"),n.notify({type:"parsingDone",error:e}),e}))}(e,t,r)})).then((function(e){var r=n._onLoad(e,t);return i(r)})).catch((function(e){throw n.logger.error("Could not load data"),n.logger.debug(e),i(e)}))}},{key:"unload",value:function(e){this._removeVisual(e||this.getCurrentVisual()),this.resetPivot(),_w.now.shadow.on&&this._updateShadowCamera()}},{key:"_startAnimation",value:function(e){this._stopAnimation();var t=this,n=this._getComplexVisual();if(null!==n){try{this._frameInfo=new JI(n.getComplex(),e,{onLoadStatusChanged:function(){t.dispatchEvent({type:"mdPlayerStateChanged",state:{isPlaying:t._isAnimating,isLoading:!t._frameInfo||t._frameInfo.isLoading}})},onError:function(e){t._stopAnimation(),t.logger.error(e)}})}catch(r){return void this.logger.error("Animation file does not fit to current complex!")}this._continueAnimation()}else this.logger.error("Unable to start animation - no molecule is loaded.")}},{key:"_pauseAnimation",value:function(){null!==this._animInterval&&(this._isAnimating=!1,clearInterval(this._animInterval),this._animInterval=null,this._frameInfo&&this.dispatchEvent({type:"mdPlayerStateChanged",state:{isPlaying:this._isAnimating,isLoading:this._frameInfo.isLoading}}))}},{key:"_continueAnimation",value:function(){this._isAnimating=!0;var e=1e3/_w.now.maxfps;e=Number.isNaN(e)?0:e;var t=this,n=t._gfx.pivot,r=this._getComplexVisual();r&&(r.resetSelectionMask(),r.rebuildSelectionGeometry(),this._msgAtomInfo.style.opacity=0),this._animInterval=setInterval((function(){if(t.dispatchEvent({type:"mdPlayerStateChanged",state:{isPlaying:t._isAnimating,isLoading:t._frameInfo.isLoading}}),t._frameInfo.frameIsReady){n.updateToFrame(t._frameInfo),t._updateObjsToFrame(t._frameInfo),t._refreshTitle(" Frame ".concat(t._frameInfo._currFrame," of ").concat(t._frameInfo._framesCount," time interval - ").concat(t._frameInfo._timeStep));try{t._frameInfo.nextFrame()}catch(e){return t.logger.error("Error during animation"),void t._stopAnimation()}t._needRender=!0}}),e)}},{key:"_stopAnimation",value:function(){null!==this._animInterval&&(clearInterval(this._animInterval),this._frameInfo.disableEvents(),this._frameInfo=null,this._animInterval=null,this.dispatchEvent({type:"mdPlayerStateChanged",state:null}))}},{key:"_onLoad",value:function(e,t){var n=this._gfx,r=null;if(t.animation)return this._refreshTitle(),this._startAnimation(e),null;if(this._stopAnimation(),t&&t.keepRepsInfo||(this._opts.reps=null,this._opts._objects=null),"Complex"===e.id){var i=e;t.fileName?i.name=i.name||IL(t.fileName).toUpperCase():t.amberFileName?i.name=i.name||IL(t.amberFileName).toUpperCase():i.name="Dynamic ".concat(t.fileType," molecule"),r=this._addVisual(new MT(i.name,i)),this._curVisualName=r;var o=this.info();if(this.logger.info("Parsed ".concat(t.fileName," (").concat(o.atoms," atoms, ").concat(o.bonds," bonds, ").concat(o.residues," residues, ").concat(o.chains," chains).")),(0,R.isNumber)(this._opts.unit)&&i.setCurrentUnit(this._opts.unit),t.preset);else if(_w.now.autoPreset)switch(t.fileType){case"cml":this.resetReps("small");break;case"pdb":case"mmtf":case"cif":!function(e){var t=!1;return e.forEachComponent((function(e){e.forEachResidue((function(e){e._isValid&&(t=!0)}))})),t}(i)?this.resetReps("small"):this.resetReps("macro");break;default:this.resetReps("default")}else this.resetReps("default")}else"Volume"===e.id&&(this.resetEd(),r=this._onLoadEd(e));return n.camera.updateProjectionMatrix(),this._updateFog(),n.root.resetTransform(),this.resetPivot(),this._objectControls.setScale(_w.now.radiusToFit/this._getBSphereRadius()),this._resetObjects(),_w.now.autoResolution&&this._tweakResolution(),_w.now.shadow.on&&this._updateShadowCamera(),this._opts.view&&(this.view(this._opts.view),delete this._opts.view),this._refreshTitle(),r}},{key:"resetEd",value:function(){this._edLoader&&(this._edLoader.abort(),this._edLoader=null),this._removeVisual(this._getVolumeVisual()),this._needRender=!0}},{key:"loadEd",value:function(e){var t=this;this.resetEd();var n=(0,R.head)(LI.loaders.find({source:e}));if(!n)return this.logger.error(PL),Promise.reject(new Error(PL));var r=this._edLoader=new n(e,{binary:!0});return r.context=this,r.load().then((function(e){var n=(0,R.head)(LI.parsers.find({format:"ccp4"}));if(!n)throw new Error("Could not find suitable parser for this source");var r=new n(e);return r.context=t,r.parse().then((function(e){t._onLoadEd(e)}))})).catch((function(e){t.logger.error("Could not load ED data"),t.logger.debug(e)}))}},{key:"_onLoadEd",value:function(e){e.normalize();var t=new UT("volume",e);t.getMesh().layers.set(YE.LAYERS.VOLUME);var n=this._addVisual(t);return this._needRender=!0,n}},{key:"_needRebuild",value:function(){var e=!1;return this._forEachComplexVisual((function(t){e=e||t.needsRebuild()})),e}},{key:"_rebuildObjects",value:function(){var e,t,n=this,r=this._gfx,i=[];for(e=0;e<r.pivot.children.length;++e){var o=r.pivot.children[e];o instanceof JE||i.push(o)}for(e=0;e<i.length;++e)i[e].parent.remove(i[e]);setTimeout((function(){var i=n._objects;for(e=0,t=i.length;e<t;++e){var o=i[e];o.needsRebuild&&o.build(),o.getGeometry()&&r.pivot.add(o.getGeometry())}}),10)}},{key:"changeUnit",value:function(e,t){var n=this._getComplexVisual(t);if(!n)throw new Error("There is no complex to change!");function r(){var e=n?n.getComplex().getCurrentUnit():0,t=e>0?"Bio molecule ".concat(e):"Asymmetric unit";return"Current unit: ".concat(e," (").concat(t,")")}return void 0===e||((0,R.isString)(e)&&(e=Math.max(parseInt(e,10),0)),n.getComplex().setCurrentUnit(e)&&(this._resetScene(),this._updateInfoPanel())),r()}},{key:"rebuild",value:function(){var e=this;if(this._building)this.logger.warn("Miew.rebuild(): already building!");else{this._building=!0,this.dispatchEvent({type:"rebuilding"}),this._rebuildObjects(),this._gfx.renderer2d.reset();var t=[];this._forEachComplexVisual((function(e){e.needsRebuild()&&t.push(e.rebuild().then((function(){return new Promise((function(t){e.rebuildSelectionGeometry(),t()}))})))}));var n=this;this._spinner.spin(this._container),Promise.all(t).then((function(){n._spinner.stop(),n._needRender=!0,n._refreshTitle(),e.dispatchEvent({type:"buildingDone"}),n._building=!1}))}}},{key:"rebuildAll",value:function(){this._forEachComplexVisual((function(e){e.setNeedsRebuild()}))}},{key:"_refreshTitle",value:function(e){var t;e=void 0===e?"":e;var n=this._getComplexVisual();if(n){t=n.getComplex().name;var r=n.repGet(n.repCurrent());t+=r?" \u2013 ".concat(r.mode.name," Mode"):""}else t=Object.keys(this._visuals).length>0?"Unknown":"No Data";t+=e,this.dispatchEvent({type:"titleChanged",data:t})}},{key:"setNeedRender",value:function(){this._needRender=!0}},{key:"_extractRepresentation",value:function(){var e=this,t=[];this._forEachComplexVisual((function(n){if(0!==n.getSelectionCount()){var r=n.buildSelectorFromMask(1<<n.getSelectionBit()),i=_w.now.presets.default,o=n.repAdd({selector:r,mode:i[0].mode.id,colorer:i[0].colorer.id,material:i[0].material.id});o?(e.dispatchEvent({type:"repAdded",index:o.index,name:n.name}),n.repCurrent(o.index),t.push(n.name)):n.repCount()===MT.NUM_REPRESENTATION_BITS&&e.logger.warn("Number of representations is limited to ".concat(MT.NUM_REPRESENTATION_BITS))}})),t.length>0&&this.logger.report("New representation from selection for complexes: ".concat(t.join(", ")))}},{key:"_setReps",value:function(e){e=e||this._opts&&this._opts.reps||[],this._forEachComplexVisual((function(t){return t.resetReps(e)}))}},{key:"applyPreset",value:function(e){for(var t=_w.now.presets,n=[e||_w.defaults.preset,_w.defaults.preset,Object.keys(t)[0]],r=null,i=0;!r&&i<n.length;++i)_w.set("preset",n[i]),(r=t[_w.now.preset])||this.logger.warn('Unknown preset "'.concat(_w.now.preset,'"'));this._setReps(r)}},{key:"resetReps",value:function(e){var t=this._opts&&this._opts.reps;t?this._setReps(t):this.applyPreset(e)}},{key:"repCount",value:function(e){var t=this._getComplexVisual(e);return t?t.repCount():0}},{key:"repCurrent",value:function(e,t){var n=this._getComplexVisual(t),r=n?n.repCurrent(e):-1;return e&&r!==e&&this.logger.warn("Representation ".concat(e," was not found. Current rep remains unchanged.")),r}},{key:"rep",value:function(e,t){var n=this._getComplexVisual("");if(!n)return null;var r=n.rep(e,t);return"created"===r.status?this.dispatchEvent({type:"repAdded",index:r.index,name:n.name}):"changed"===r.status&&this.dispatchEvent({type:"repChanged",index:r.index,name:n.name}),r.desc}},{key:"repGet",value:function(e,t){var n=this._getComplexVisual(t);return n?n.repGet(e):null}},{key:"repAdd",value:function(e,t){var n=this._getComplexVisual(t);if(!n)return-1;var r=n.repAdd(e);return r?(this.dispatchEvent({type:"repAdded",index:r.index,name:t}),r.index):-1}},{key:"repRemove",value:function(e,t){var n=this._getComplexVisual(t);n&&(n.repRemove(e),this.dispatchEvent({type:"repRemoved",index:e,name:t}))}},{key:"repHide",value:function(e,t,n){this._needRender=!0;var r=this._getComplexVisual(n);return r?r.repHide(e,t):null}},{key:"_setEditMode",value:function(e){this._editMode=e;var t=this._msgMode;t&&(t.style.opacity=e===CL?0:1,e!==CL&&(t.getElementsByTagName("p")[0].innerHTML=e===ML?"COMPONENT EDIT MODE":"FRAGMENT EDIT MODE"));this.dispatchEvent({type:"editModeChanged",data:e===CL})}},{key:"_enterComponentEditMode",value:function(){if(this._editMode===CL){var e=[];this._forEachComplexVisual((function(t){var n=t.beginComponentEdit();n&&e.push(n)})),e!==[]&&(this._editors=e,this.logger.info("COMPONENT EDIT MODE -- ON"),this._setEditMode(ML),this._objectControls.keysTranslateObj(!0))}}},{key:"_applyComponentEdit",value:function(){if(this._editMode===ML){this._objectControls.stop(),this._objectControls.keysTranslateObj(!1);for(var e=0;e<this._editors.length;++e)this._editors[e].apply();this._editors=[],this.logger.info("COMPONENT EDIT MODE -- OFF (applied)"),this._setEditMode(CL),this.rebuildAll()}}},{key:"_discardComponentEdit",value:function(){if(this._editMode===ML){this._objectControls.stop(),this._objectControls.keysTranslateObj(!1);for(var e=0;e<this._editors.length;++e)this._editors[e].discard();this._editors=[],this.logger.info("COMPONENT EDIT MODE -- OFF (discarded)"),this._setEditMode(CL),this._needRender=!0,this.rebuildAll()}}},{key:"_enterFragmentEditMode",value:function(){if(this._editMode===CL){var e=[];if(this._forEachComplexVisual((function(t){t instanceof MT&&t.getSelectionCount()>0&&e.push(t)})),1===e.length){var t=e[0].beginFragmentEdit();t&&(this._editors=[t],this.logger.info("FRAGMENT EDIT MODE -- ON (single bond)"),this._setEditMode(TL),this._objectControls.allowTranslation(!1),this._objectControls.allowAltObjFreeRotation(t.isFreeRotationAllowed()),this._needRender=!0)}}}},{key:"_applyFragmentEdit",value:function(){if(this._editMode===TL){this._objectControls.stop();for(var e=0;e<this._editors.length;++e)this._editors[e].apply();this._editors=[],this.logger.info("FRAGMENT EDIT MODE -- OFF (applied)"),this._setEditMode(CL),this._objectControls.allowTranslation(!0),this._objectControls.allowAltObjFreeRotation(!0),this.rebuildAll()}}},{key:"_discardFragmentEdit",value:function(){if(this._editMode===TL){this._objectControls.stop();for(var e=0;e<this._editors.length;++e)this._editors[e].discard();this._editors=[],this.logger.info("FRAGMENT EDIT MODE -- OFF (discarded)"),this._setEditMode(CL),this._objectControls.allowTranslation(!0),this._objectControls.allowAltObjFreeRotation(!0),this._needRender=!0}}},{key:"_onPick",value:function(e){if(_w.now.picking&&null===this._animInterval&&this._editMode!==TL&&!this._objectControls.isEditingAltObj()){var t=null;if(e.obj.atom?(t=e.obj.atom.residue.getChain().getComplex(),this._lastPick=e.obj.atom):e.obj.residue?(t=e.obj.residue.getChain().getComplex(),this._lastPick=e.obj.residue):e.obj.chain?(t=e.obj.chain.getComplex(),this._lastPick=e.obj.chain):e.obj.molecule?(t=e.obj.molecule.complex,this._lastPick=e.obj.molecule):this._lastPick=null,t){var n=this._getVisualForComplex(t);n&&(r(n),this._needRender=!0)}else this._forEachComplexVisual(r),this._needRender=!0;this._updateInfoPanel(),this.dispatchEvent(e)}function r(t){t.updateSelectionMask(e.obj),t.rebuildSelectionGeometry()}}},{key:"_onKeyDown",value:function(e){if(this._running&&this._hotKeysEnabled)switch(e.keyCode){case"C".charCodeAt(0):_w.now.editing&&this._enterComponentEditMode();break;case"F".charCodeAt(0):_w.now.editing&&this._enterFragmentEditMode();break;case"A".charCodeAt(0):switch(this._editMode){case ML:this._applyComponentEdit();break;case TL:this._applyFragmentEdit()}break;case"D".charCodeAt(0):switch(this._editMode){case ML:this._discardComponentEdit();break;case TL:this._discardFragmentEdit()}break;case"S".charCodeAt(0):e.preventDefault(),e.stopPropagation(),_w.set("ao",!_w.now.ao),this._needRender=!0;break;case 107:e.preventDefault(),e.stopPropagation(),this._forEachComplexVisual((function(e){e.expandSelection(),e.rebuildSelectionGeometry()})),this._updateInfoPanel(),this._needRender=!0;break;case 109:e.preventDefault(),e.stopPropagation(),this._forEachComplexVisual((function(e){e.shrinkSelection(),e.rebuildSelectionGeometry()})),this._updateInfoPanel(),this._needRender=!0}}},{key:"_onKeyUp",value:function(e){this._running&&this._hotKeysEnabled&&e.keyCode==="X".charCodeAt(0)&&this._extractRepresentation()}},{key:"_updateInfoPanel",value:function(){var e,t,n=this._msgAtomInfo.getElementsByTagName("p")[0],r=0;for(this._forEachComplexVisual((function(e){r+=e.getSelectionCount()}));n.firstChild;)n.removeChild(n.firstChild);if(0!==r){var i="".concat(String(r)," atom").concat(1!==r?"s":""," selected");null!==this._lastPick&&(i+=", the last pick:");var o="",a="",s="";if(this._lastPick instanceof EL){t=(e=this._lastPick).residue,a=e.name;var u=32!==e.location?String.fromCharCode(e.location):"";o="".concat(e.element.fullName," #").concat(e.serial).concat(u,":       ").concat(t._chain._name,".").concat(t._type._name).concat(t._sequence).concat(t._icode.trim(),"."),o+=a,s="Coord: (".concat(e.position.x.toFixed(2).toString(),",     ").concat(e.position.y.toFixed(2).toString(),",     ").concat(e.position.z.toFixed(2).toString(),")")}else this._lastPick instanceof kL?(t=this._lastPick,o="".concat(t._type._fullName,":       ").concat(t._chain._name,".").concat(t._type._name).concat(t._sequence).concat(t._icode.trim())):this._lastPick instanceof OL?o="chain ".concat(this._lastPick._name):this._lastPick instanceof AL&&(o="molecule ".concat(this._lastPick._name));n.appendChild(document.createTextNode(i)),""!==o&&(n.appendChild(document.createElement("br")),n.appendChild(document.createTextNode(o))),""!==s&&(n.appendChild(document.createElement("br")),n.appendChild(document.createTextNode(s))),this._msgAtomInfo.style.opacity=1}else this._msgAtomInfo.style.opacity=0}},{key:"_getAltObj",value:function(){if(this._editors){for(var e=null,t=0;t<this._editors.length;++t){var n=this._editors[t].getAltObj();if(n.objects.length>0){if(e){e=null;break}e=n}}if(e)return e}return{objects:[],pivot:new lh(0,0,0)}}},{key:"resetPivot",value:function(){var e=new hh,t=new lh;e.makeEmpty(),this._forEachVisual((function(t){e.union(t.getBoundaries().boundingBox)})),e.getCenter(t),this._objectControls.setPivot(t.negate()),this.dispatchEvent({type:"transform"})}},{key:"setPivotResidue",value:function(e){var t=new lh,n=this._getVisualForComplex(e.getChain().getComplex());if(n){if(e._controlPoint)t.copy(e._controlPoint);else{for(var r=0,i=0,o=0,a=e._atoms.length,s=0;s<a;++s){var u=e._atoms[s].position;r+=u.x/a,i+=u.y/a,o+=u.z/a}t.set(r,i,o)}t.applyMatrix4(n.matrix).negate(),this._objectControls.setPivot(t),this.dispatchEvent({type:"transform"})}}},{key:"setPivotAtom",value:function(e){var t=new lh,n=this._getVisualForComplex(e.residue.getChain().getComplex());n&&(t.copy(e.position),t.applyMatrix4(n.matrix).negate(),this._objectControls.setPivot(t),this.dispatchEvent({type:"transform"}))}},{key:"getSelectionCenter",value:function(e,t,n){var r=new lh(0,0,0);e.set(0,0,0);var i=0;return this._forEachComplexVisual((function(o){o.getSelectionCenter(r,t,n||o.getSelectionBit())&&(e.add(r),i++)})),0!==i&&(e.divideScalar(i),e.negate(),!0)}},{key:"setPivotSubset",value:function(e){var t=new lh(0,0,0),n=e?HL:ZL;this.getSelectionCenter(t,n,e)?(this._objectControls.setPivot(t),this.dispatchEvent({type:"transform"})):this.logger.warn("selection is empty. Center operation not performed")}},{key:"screenshot",value:function(e,t){var n,r,i=this._gfx,o=i.renderer.domElement.width,a=i.renderer.domElement.height;function s(){var n;if(mw.getBrowser()===mw.browserType.SAFARI){var r=document.createElement("canvas"),s=r.getContext("2d");r.width=void 0===e?o:e,r.height=void 0===t?a:t,s.drawImage(i.renderer.domElement,0,0,r.width,r.height),n=r.toDataURL("image/png")}else n=i.renderer.domElement.toDataURL("image/png");return n}if(t=t||e,void 0===e&&void 0===t||e===o&&t===a)n=s();else{var u=i.camera.aspect,l=i.camera.fov,c=function(e){return Math.tan(Xf.degToRad(.5*e))}(i.camera.fov),f=c*Math.min(i.width,i.height)/i.height,h=e/t;i.renderer.setPixelRatio(1),i.camera.aspect=h,i.camera.fov=(r=f/Math.min(h,1),2*Xf.radToDeg(Math.atan(r))),i.camera.updateProjectionMatrix(),i.renderer.setDrawingBufferSize(e,t,1),this._renderFrame(_w.now.stereo),n=s(),i.renderer.setPixelRatio(window.devicePixelRatio),i.camera.aspect=u,i.camera.fov=l,i.camera.updateProjectionMatrix(),i.renderer.setDrawingBufferSize(i.width,i.height,window.devicePixelRatio),this._needRender=!0}return n}},{key:"screenshotSave",value:function(e,t,n){var r=this.screenshot(t,n);mw.shotDownload(r,e)}},{key:"save",value:function(e){var t=this;this._export(e.fileType).then((function(n){var r=t._visuals[t._curVisualName]._complex.name;mw.download(n,r,e.fileType),t._refreshTitle(),t.dispatchEvent({type:"exportingDone"})})).catch((function(e){t.logger.error("Could not export data"),t.logger.debug(e),t._refreshTitle(),t.dispatchEvent({type:"exportingDone",error:e})}))}},{key:"_tweakResolution",value:function(){var e=[["poor",100],["low",500],["medium",1e3],["high",5e3],["ultra",Number.MAX_VALUE]],t=0;if(this._forEachComplexVisual((function(e){t+=e.getComplex().getAtomCount()})),t>0)for(var n=1e6*this._gfxScore/t,r=0;r<e.length;++r)if(n<e[r][1]){this._autoChangeResolution(e[r][0]);break}}},{key:"_autoChangeResolution",value:function(e){e!==_w.now.resolution&&this.logger.report('Your rendering resolution was changed to "'.concat(e,'" for best performance.')),_w.now.resolution=e}},{key:"saveSettings",value:function(){this._cookies.setCookie(this._opts.settingsCookie,JSON.stringify(this.settings.getDiffs(!0)))}},{key:"restoreSettings",value:function(){try{var e=this._cookies.getCookie(this._opts.settingsCookie),t=e?JSON.parse(e):{};this.settings.applyDiffs(t,!0)}catch(n){this.logger.error("Cookies parse error: ".concat(n.message))}}},{key:"resetSettings",value:function(){this.settings.reset()}},{key:"setOptions",value:function(e){"string"===typeof e&&(e=n.options.fromAttr(e)),e.reps&&(this._opts.reps=null),(0,R.merge)(this._opts,e),e.settings&&this.set(e.settings),this._opts._objects=e._objects,this._resetObjects(),e.load&&this.load(e.load,{fileType:e.type}),e.preset&&(_w.now.preset=e.preset),e.reps&&this.resetReps(e.preset),this._opts.view&&(this.view(this._opts.view),delete this._opts.view);var t=this._getComplexVisual();t&&(t.getComplex().resetCurrentUnit(),(0,R.isNumber)(e.unit)&&t.getComplex().setCurrentUnit(e.unit),this.resetView(),this.rebuildAll())}},{key:"info",value:function(e){var t=this._getComplexVisual(e);if(!t)return{};var n=t.getComplex(),r=n.metadata;return{id:r.id||n.name||"UNKNOWN",title:r.title&&r.title.join(" ")||"UNKNOWN DATA",atoms:n.getAtomCount(),bonds:n.getBondCount(),residues:n.getResidueCount(),chains:n.getChainCount()}}},{key:"addObject",value:function(e,t){var n=null;if(e.type===tL.prototype.type&&(n=tL),null===n)throw new Error("Unknown scene object type - ".concat(e.type));try{var r=new n(e.params,e.opts);this._addSceneObject(r)}catch(i){if(t)throw i;this.logger.debug("Error during scene object creation: ".concat(i.message))}this._needRender=!0}},{key:"_addSceneObject",value:function(e){var t=this._getComplexVisual();e.build&&t&&(e.build(t.getComplex()),this._gfx.pivot.add(e.getGeometry()));var n=this._objects;n[n.length]=e}},{key:"_updateObjsToFrame",value:function(e){for(var t=this._objects,n=0,r=t.length;n<r;++n)t[n].updateToFrame&&t[n].updateToFrame(e)}},{key:"_resetObjects",value:function(){var e=this._opts._objects;if(this._objects=[],e)for(var t=0,n=e.length;t<n;++t)this.addObject(e[t],!1)}},{key:"removeObject",value:function(e){var t=this._objects[e];if(!t)throw new Error("Scene object with index ".concat(e," does not exist"));t.destroy(),this._objects.splice(e,1),this._needRender=!0}},{key:"getURL",value:function(e){return Vw.toURL(this.getState((0,R.defaults)(e,{compact:!0,settings:!1,view:!1})))}},{key:"getScript",value:function(e){return Vw.toScript(this.getState((0,R.defaults)(e,{compact:!0,settings:!0,view:!0})))}},{key:"_compareReps",value:function(e,t){var n={},r=0;e&&(r=e.repCount());var i=_w.defaults.presets[_w.now.preset],o=t;void 0===i||i.length>r?(o=!1,n.preset="empty"):_w.now.preset!==_w.defaults.preset&&(n.preset=_w.now.preset);for(var a=[],s=!0,u=0,l=r;u<l;++u)a[u]=e.repGet(u).compare(o?i[u]:null),(0,R.isEmpty)(a[u])||(s=!1);return s||(n.reps=a),n}},{key:"getState",value:function(e){var t={};e=(0,R.defaults)(e,{compact:!0,settings:!1,view:!1});var n=this._getComplexVisual();if(null!==n){var r=n.getComplex(),i=r.metadata;if(i.id){var o=i.format?"".concat(i.format,":"):"";t.load=o+i.id}var a=r.getCurrentUnit();1!==a&&(t.unit=a)}var s=this._compareReps(n,e.compact);s.preset&&(t.preset=s.preset),s.reps&&(t.reps=s.reps);for(var u=this._objects,l=[],c=0,f=u.length;c<f;++c)l[c]=u[c].identify();if(u.length>0&&(t._objects=l),e.view&&(t.view=this.view()),e.settings){var h=this.settings.getDiffs(!1);(0,R.isEmpty)(h)||(t.settings=h)}return t}},{key:"get",value:function(e,t){return _w.get(e,t)}},{key:"_clipPlaneUpdateValue",value:function(e){var t=Math.max(this._gfx.camera.position.z-e*_w.now.draft.clipPlaneFactor,_w.now.camNear),n={clipPlaneValue:t};this._forEachComplexVisual((function(e){e.setUberOptions(n)}));for(var r=0,i=this._objects.length;r<i;++r){var o=this._objects[r];o._line&&o._line.material.setUberOptions(n)}null!==this._picker&&(this._picker.clipPlaneValue=t)}},{key:"_fogFarUpdateValue",value:function(){null!==this._picker&&(this._gfx.scene.fog?this._picker.fogFarValue=this._gfx.scene.fog.far:this._picker.fogFarValue=void 0)}},{key:"_updateShadowmapMeshes",value:function(e){this._forEachComplexVisual((function(t){for(var n=t._reprList,r=0,i=n.length;r<i;++r){var o=n[r];e(o.geo,o.material)}}))}},{key:"_updateMaterials",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this._forEachComplexVisual((function(r){return r.setMaterialValues(e,t,n)}));for(var r=0,i=this._objects.length;r<i;++r){var o=this._objects[r];o._line&&(o._line.material.setValues(e),o._line.material.needsUpdate=!0)}}},{key:"_fogAlphaChanged",value:function(){this._forEachComplexVisual((function(e){e.setUberOptions({fogAlpha:_w.now.fogAlpha})}))}},{key:"_embedWebXR",value:function(){var e=this;if("WEBVR"!==_w.now.stereo)return this.webVR&&this.webVR.disable(),void(this.webVR=null);this.webVR||(this.webVR=new _L((function(){e._requestAnimationFrame((function(){return e._onTick()})),e._needRender=!0,e._onResize()}))),this.webVR.enable(this._gfx)}},{key:"_initOnSettingsChanged",value:function(){var e=this,t=function(t,n){(t=(0,R.isArray)(t)?t:[t]).forEach((function(t){e.settings.addEventListener("change:".concat(t),n)}))};t("modes.VD.frame",(function(){var t=e._getVolumeVisual();null!==t&&(t.showFrame(_w.now.modes.VD.frame),e._needRender=!0)})),t("modes.VD.isoMode",(function(){var t=e._getVolumeVisual();null!==t&&(t.getMesh().material.updateDefines(),e._needRender=!0)})),t("bg.color",(function(){e._onBgColorChanged()})),t("ao",(function(){if(_w.now.ao&&!BL(e._gfx.renderer.getContext()))e.logger.warn("Your device or browser does not support ao"),_w.set("ao",!1);else{var t={normalsToGBuffer:_w.now.ao};e._setUberMaterialValues(t)}})),t("zSprites",(function(){_w.now.zSprites&&!DL(e._gfx.renderer.getContext())&&(e.logger.warn("Your device or browser does not support zSprites"),_w.set("zSprites",!1)),e.rebuildAll()})),t("fogColor",(function(){e._onFogColorChanged()})),t("fogColorEnable",(function(){e._onFogColorChanged()})),t("bg.transparent",(function(t){var n=e._gfx;n&&n.renderer.setClearColor(_w.now.bg.color,Number(!_w.now.bg.transparent)),e._updateMaterials({fogTransparent:t.value}),e.rebuildAll()})),t("draft.clipPlane",(function(t){e._updateMaterials({clipPlane:t.value}),e.rebuildAll()})),t("shadow.on",(function(t){var n={shadowmap:t.value,shadowmapType:_w.now.shadow.type},r=e._gfx;r&&(r.renderer.shadowMap.enabled=Boolean(n.shadowmap)),e._updateMaterials(n,!0),n.shadowmap?(e._updateShadowCamera(),e._updateShadowmapMeshes(gT.createShadowmapMaterial)):e._updateShadowmapMeshes(gT.removeShadowmapMaterial),e._needRender=!0})),t("shadow.type",(function(t){_w.now.shadow.on&&(e._updateMaterials({shadowmapType:t.value},!0),e._needRender=!0)})),t("shadow.radius",(function(t){for(var n=0;n<e._gfx.scene.children.length;n++){if(void 0!==e._gfx.scene.children[n].shadow)e._gfx.scene.children[n].shadow.radius=t.value,e._needRender=!0}})),t("fps",(function(){e._fps.show(_w.now.fps)})),t(["fog","fogNearFactor","fogFarFactor"],(function(){e._updateFog(),e._needRender=!0})),t("fogAlpha",(function(){var t=_w.now.fogAlpha;(t<0||t>1)&&e.logger.warn("fogAlpha must belong range [0,1]"),e._fogAlphaChanged(),e._needRender=!0})),t("autoResolution",(function(t){t.value&&!e._gfxScore&&e.logger.warn("Benchmarks are missed, autoresolution will not work! Autoresolution should be set during miew startup.")})),t("stereo",(function(){e._embedWebXR("WEBVR"===_w.now.stereo),e._needRender=!0})),t(["transparency","palette"],(function(){e.rebuildAll()})),t("resolution",(function(){e.rebuildAll();var t=e._getVolumeVisual();t&&(t.getMesh().material.updateDefines(),e._needRender=!0)})),t(["axes","fxaa","ao","outline.on","outline.color","outline.threshold","outline.thickness"],(function(){e._needRender=!0}))}},{key:"set",value:function(e,t){_w.set(e,t)}},{key:"select",value:function(e,t){var n=this._getComplexVisual();if(n){var r=e;(0,R.isString)(e)&&(r=SL.parse(e).selector),n.select(r,t),this._lastPick=null,this._updateInfoPanel(),this._needRender=!0}}},{key:"view",value:function(e){var t=this,n=this._gfx.pivot,r=[];return"undefined"===typeof e?function(){var e=n.position,i=t._objectControls.getScale()/_w.now.radiusToFit,o=new Xh;return o.setFromQuaternion(t._objectControls.getOrientation(),"ZXY"),r=[e.x,e.y,e.z,i,o.x,o.y,o.z],"1"+mw.arrayToBase64(r,Float32Array)}():(function(){40===e.length&&(e="0".concat(e));var i=e[0];if(r=mw.arrayFromBase64(e.substr(1),Float32Array),"1"!==i){if("0"!==i)return void t.logger.warn("Encoded view version mismatch, stored as ".concat(i," vs ").concat("1"," expected"));r[3]/=8}var o=t._interpolator,a=o.createView();a.position.copy(n.position),a.scale=t._objectControls.getScale(),a.orientation.copy(t._objectControls.getOrientation());var s=o.createView();s.position.set(r[0],r[1],r[2]),t._getComplexVisual()&&s.position.sub(t._getComplexVisual().position),s.scale=r[3],s.orientation.setFromEuler(new Xh(r[4],r[5],r[6],"ZXY")),o.setup(a,s)}(),e)}},{key:"_updateView",value:function(){var e=this,t=this._gfx.pivot,n=this._interpolator;if(n.wasStarted()||n.start(),n.isMoving()){var r=n.getCurrentView();if(r.success){var i=r.view;t.position.copy(i.position),e._objectControls.setScale(i.scale*_w.now.radiusToFit),e._objectControls.setOrientation(i.orientation),this.dispatchEvent({type:"transform"}),e._needRender=!0}}}},{key:"translate",value:function(e,t,n){this._objectControls.translatePivot(e,t,n),this.dispatchEvent({type:"transform"}),this._needRender=!0}},{key:"rotate",value:function(e,t,n){this._objectControls.rotate((new uh).setFromEuler(new Xh(e,t,n,"XYZ"))),this.dispatchEvent({type:"transform"}),this._needRender=!0}},{key:"scale",value:function(e){if(e<=0)throw new RangeError("Scale should be greater than zero");this._objectControls.scale(e),this.dispatchEvent({type:"transform"}),this._needRender=!0}},{key:"center",value:function(e){if(void 0===e)return this.setPivotSubset(),void(this._needRender=!0);if(void 0!==e.obj&&("atom"in e.obj||"residue"in e.obj))return"atom"in e.obj?this.setPivotAtom(e.obj.atom):this.setPivotResidue(e.obj.residue),void(this._needRender=!0);if(void 0===e.obj&&""!==e){var t=SL.parse(e);if(void 0===t.error)return this.setPivotSubset(t),void(this._needRender=!0)}this.resetPivot(),this._needRender=!0}},{key:"within",value:function(e,t){var n=this._getComplexVisual();if(!n)return SL.None();e instanceof String&&(e=SL.parse(e));var r=n.within(e,t);return r&&(n.rebuildSelectionGeometry(),this._needRender=!0),r}},{key:"projected",value:function(e,t){var n=this._getComplexVisual(t);if(!n)return!1;var r=n.getComplex().getAtomByFullname(e);if(null===r)return!1;var i=r.position.clone();return this._gfx.pivot.updateMatrixWorldRecursive(),this._gfx.camera.updateMatrixWorldRecursive(),this._gfx.pivot.localToWorld(i),i.project(this._gfx.camera),{x:.5*(i.x+1)*this._gfx.width,y:.5*(1-i.y)*this._gfx.height}}},{key:"dssp",value:function(e){var t=this._getComplexVisual(e);t&&(t.getComplex().dssp(),t._reprList.forEach((function(e){"CA"!==e.mode.id&&"SS"!==e.colorer.id||(e.needsRebuild=!0)})))}},{key:"exportCML",value:function(){var e=this;var t=e._getComplexVisual(),n=t?t.getComplex():null;return n&&n.originalCML?(function(t){var n=function(e){var t=new lh,n=new lh,r=new lh;e.extractBasis(t,n,r),t.normalize(),n.normalize(),r.normalize();var i=new Fh;return i.identity(),i.makeBasis(t,n,r),i}(e._gfx.root.matrixWorld),r=new ih(0,0,0,0),i=new ih(0,0,0,0),o=null,a=null;t.forEachAtom((function(e){e.xmlNodeRef&&e.xmlNodeRef.xmlNode&&(o=e.xmlNodeRef.xmlNode,a=e.position,r.set(a.x,a.y,a.z,1),r.applyMatrix4(n),o.setAttribute("x3",r.x.toString()),o.setAttribute("y3",r.y.toString()),o.setAttribute("z3",r.z.toString()),o.removeAttribute("x2"),o.removeAttribute("y2"))})),t.forEachSGroup((function(e){if(e.xmlNodeRef&&e.xmlNodeRef.xmlNode){o=e.xmlNodeRef.xmlNode,a=e.getPosition(),r.set(a.x,a.y,a.z,1);var t=e.getCentralPoint();null===t?r.applyMatrix4(n):(i.set(t.x,t.y,t.z,0),r.add(i),r.applyMatrix4(n),i.set(t.x,t.y,t.z,1),i.applyMatrix4(n),r.sub(i)),o.setAttribute("x",r.x.toString()),o.setAttribute("y",r.y.toString()),o.setAttribute("z",r.z.toString())}}))}(n),(new XMLSerializer).serializeToString(n.originalCML)):null}},{key:"motm",value:function(){_w.set({fogColorEnable:!0,fogColor:0,outline:{on:!0,threshold:.01},bg:{color:16777215}}),this._forEachComplexVisual((function(e){for(var t=[],n=e.getComplex(),r=DM.get(_w.now.palette),i=0;i<n.getChainCount();i++){var o=n._chains[i]._name,a=r.getChainColor(o);t[i]={selector:"chain ".concat(o),mode:"VW",colorer:["CB",{color:a,factor:.9}],material:"FL"}}e.resetReps(t)}))}}]),n}(J_);(0,R.assign)(GL,{VERSION:GL.VERSION,registeredPlugins:[],chem:DE,io:LI,modes:bM,colorers:fT,materials:dT,palettes:DM,options:Vw,settings:_w,utils:mw,gfx:{Representation:bT}});var WL=function(){var e=function(e,t,n,r){for(n=n||{},r=e.length;r--;n[e[r]]=t);return n},t=[1,60],n=[1,62],r=[1,63],i=[1,65],o=[1,66],a=[1,67],s=[1,68],u=[1,69],l=[1,80],c=[1,72],f=[1,73],h=[1,74],d=[1,75],p=[1,99],v=[1,76],m=[1,100],g=[1,79],y=[1,51],b=[1,81],x=[1,82],_=[1,84],w=[1,83],S=[1,85],E=[1,96],k=[1,97],O=[1,98],A=[1,86],C=[1,87],M=[1,64],T=[1,70],P=[1,71],R=[1,77],I=[1,78],L=[1,53],N=[1,54],j=[1,55],D=[1,61],B=[1,88],z=[1,89],F=[1,90],V=[1,91],U=[1,92],Z=[1,93],H=[1,94],G=[1,95],W=[1,101],q=[1,102],K=[1,103],Y=[1,104],X=[1,105],$=[1,56],J=[1,57],Q=[1,58],ee=[1,59],te=[1,115],ne=[1,111],re=[1,114],ie=[1,112],oe=[1,113],ae=[1,118],se=[1,117],ue=[1,134],le=[1,149],ce=[1,150],fe=[1,157],he=[5,6,7,9,13,14,15,17,18,19,20,23,25,26,27,30,33,34,35,37,38,41,43,45,46,49,52,54,55,56,58,59,62,64,65,66,70,72,74,77,78,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,101],de=[5,6,7,9,13,14,15,17,18,19,20,23,25,26,27,30,33,34,35,37,38,41,43,45,46,49,52,54,55,56,58,59,62,64,65,66,70,71,72,74,77,78,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,101],pe=[5,6,7,9,13,15,17,18,19,20,23,25,26,27,30,33,34,37,38,41,43,45,46,49,52,54,55,56,58,59,62,64,65,66,70,72,82,83,84,85,86,87,88,89,90,91,92,93,94,95],ve=[5,70,72],me=[5,74],ge=[71,101],ye={trace:function(){},yy:{},symbols_:{error:2,Program:3,Command:4,EOF:5,RESET:6,BUILD:7,ALL:8,HELP:9,Path:10,MOTM:11,OneArgCommand:12,GET:13,STRING:14,SET:15,Value:16,SET_SAVE:17,SET_RESTORE:18,SET_RESET:19,PRESET:20,AddRepresentation:21,EditRepresentation:22,REMOVE:23,RepresentationReference:24,HIDE:25,SHOW:26,LIST:27,EXPAND_KEY:28,SELECTOR_KEY:29,SELECT:30,AS:31,WordAll:32,SELECTOR:33,WITHIN:34,NUMBER:35,OF:36,MATERIAL:37,IDENTIFIER:38,ModeCMD:39,ColorCMD:40,VIEW:41,BASE_64:42,UNIT:43,DSSP:44,SCALE:45,ROTATE:46,AxesList:47,TRANSLATE:48,CENTER:49,GetURLBranch:50,Screenshot:51,LINE:52,ArgList:53,LISTOBJ:54,REMOVEOBJ:55,URL:56,VIEW_KEY:57,SCREENSHOT:58,LOAD:59,Url:60,FILE_KEY:61,ADD:62,Description:63,REP:64,MODE:65,COLOR:66,Descriptor:67,RepresentationOwnProperty:68,RepresentationOwnPropertyOpts:69,DESC_KEY:70,"=":71,DESC_KEY_OPTS:72,AxesArg:73,DESC_KEY_AXES:74,Arg:75,PathWoDescKey:76,HEX:77,BOOL:78,Word:79,CommandSetWoDESC_KEY:80,DescKeys:81,CLEAR:82,FILE_LIST:83,FILE_REGISTER:84,FILE_DELETE:85,PRESET_ADD:86,PRESET_DELETE:87,PRESET_UPDATE:88,PRESET_RENAME:89,PRESET_OPEN:90,CREATE_SCENARIO:91,RESET_SCENARIO:92,DELETE_SCENARIO:93,ADD_SCENARIO_ITEM:94,LIST_SCENARIO:95,PDB_KEY:96,DELAY_KEY:97,PRST_KEY:98,DESCRIPTION_KEY:99,CommandSet:100,".":101,PresetPath:102,"/":103,HexOrNumber:104,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",6:"RESET",7:"BUILD",8:"ALL",9:"HELP",11:"MOTM",13:"GET",14:"STRING",15:"SET",17:"SET_SAVE",18:"SET_RESTORE",19:"SET_RESET",20:"PRESET",23:"REMOVE",25:"HIDE",26:"SHOW",27:"LIST",28:"EXPAND_KEY",29:"SELECTOR_KEY",30:"SELECT",31:"AS",33:"SELECTOR",34:"WITHIN",35:"NUMBER",36:"OF",37:"MATERIAL",38:"IDENTIFIER",41:"VIEW",42:"BASE_64",43:"UNIT",44:"DSSP",45:"SCALE",46:"ROTATE",48:"TRANSLATE",49:"CENTER",52:"LINE",54:"LISTOBJ",55:"REMOVEOBJ",56:"URL",57:"VIEW_KEY",58:"SCREENSHOT",59:"LOAD",61:"FILE_KEY",62:"ADD",64:"REP",65:"MODE",66:"COLOR",70:"DESC_KEY",71:"=",72:"DESC_KEY_OPTS",74:"DESC_KEY_AXES",77:"HEX",78:"BOOL",82:"CLEAR",83:"FILE_LIST",84:"FILE_REGISTER",85:"FILE_DELETE",86:"PRESET_ADD",87:"PRESET_DELETE",88:"PRESET_UPDATE",89:"PRESET_RENAME",90:"PRESET_OPEN",91:"CREATE_SCENARIO",92:"RESET_SCENARIO",93:"DELETE_SCENARIO",94:"ADD_SCENARIO_ITEM",95:"LIST_SCENARIO",96:"PDB_KEY",97:"DELAY_KEY",98:"PRST_KEY",99:"DESCRIPTION_KEY",101:".",103:"/"},productions_:[0,[3,2],[3,1],[4,1],[4,1],[4,2],[4,1],[4,2],[4,1],[4,1],[4,2],[4,2],[4,3],[4,3],[4,1],[4,1],[4,1],[4,1],[4,2],[4,1],[4,1],[4,2],[4,2],[4,2],[4,2],[4,1],[4,2],[4,2],[4,2],[4,4],[4,2],[4,6],[4,2],[4,1],[4,1],[4,1],[4,2],[4,2],[4,1],[4,2],[4,1],[4,2],[4,2],[4,2],[4,1],[4,2],[4,1],[4,1],[4,3],[4,3],[4,4],[4,4],[4,1],[4,2],[50,1],[50,2],[50,2],[50,3],[50,3],[51,1],[51,2],[51,3],[12,2],[12,2],[12,2],[21,1],[21,2],[21,2],[21,3],[22,2],[22,3],[39,2],[39,3],[40,2],[40,3],[24,1],[24,1],[63,1],[63,2],[63,3],[63,4],[67,1],[67,1],[67,2],[68,3],[69,3],[47,1],[47,2],[73,2],[53,1],[53,2],[75,3],[16,1],[16,1],[16,1],[16,1],[16,1],[79,1],[79,1],[32,1],[32,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[81,1],[81,1],[81,1],[81,1],[81,1],[81,1],[81,1],[100,1],[100,1],[76,1],[76,3],[76,3],[10,1],[10,1],[10,3],[10,3],[10,3],[60,1],[102,1],[102,3],[104,1],[104,1]],performAction:function(e,t,n,r,i,o,a){var s=o.length-1;switch(i){case 1:return o[s-1];case 3:this.$=r.miew.reset(!1),r.ClearContext(),r.miew.resetReps("empty");break;case 4:this.$=r.miew.rebuild();break;case 5:this.$=r.miew.rebuildAll(),r.miew.rebuild();break;case 6:this.$=r.echo(r.utils.help().toString());break;case 7:this.$=r.echo(r.utils.help(o[s]).toString());break;case 8:this.$=r.miew.motm();break;case 10:case 11:this.$=r.utils.propagateProp(o[s]),r.echo(r.miew.get(o[s]).toString());break;case 12:case 13:this.$=r.miew.set(o[s-1],r.utils.propagateProp(o[s-1],o[s]));break;case 14:this.$=r.miew.saveSettings();break;case 15:this.$=r.miew.restoreSettings();break;case 16:this.$=r.miew.resetSettings();break;case 17:this.$=r.miew.resetReps();break;case 18:this.$=r.miew.applyPreset(o[s]);break;case 21:this.$=r.miew.repRemove(o[s]),r.representations.remove(o[s]);break;case 22:this.$=r.miew.repHide(o[s]);break;case 23:this.$=r.miew.repHide(o[s],!1);break;case 24:this.$=r.echo(r.utils.listRep(r.miew,r.representations,o[s],"-e"));break;case 25:this.$=r.echo(r.utils.list(r.miew,r.representations));break;case 26:this.$=r.echo(r.utils.list(r.miew,r.representations,o[s]));break;case 27:this.$=r.echo(r.utils.listSelector(r.miew,r.Context));break;case 28:this.$=r.miew.select(r.utils.checkArg(o[s-1].toLowerCase(),o[s],!0));break;case 29:this.$=r.Context[o[s].toLowerCase()]=r.utils.checkArg(o[s-3].toLowerCase(),o[s-2],!0),r.miew.select(r.Context[o[s].toLowerCase()]);break;case 30:this.$=r.miew.rep(r.miew.repCurrent(),{selector:r.utils.checkArg(o[s-1].toLowerCase(),o[s])});break;case 31:this.$=r.Context[o[s].toLowerCase()]=r.miew.within(r.utils.checkArg("select",o[s-2],!0),Number(o[s-4]));break;case 32:this.$=r.miew.rep(r.miew.repCurrent(),{material:r.utils.checkArg(o[s-1].toLowerCase(),o[s].toUpperCase())});break;case 35:this.$=r.echo(r.miew.view());break;case 36:case 37:this.$=r.miew.view(o[s]);break;case 38:this.$=r.echo(r.miew.changeUnit());break;case 39:this.$=r.echo(r.miew.changeUnit(o[s]));break;case 40:this.$=r.miew.dssp();break;case 41:this.$=r.miew.scale(o[s]);break;case 42:for(var u=0,l=o[s].length;u<l;u++)r.miew.rotate(o[s][u].x*Math.PI/180,o[s][u].y*Math.PI/180,o[s][u].z*Math.PI/180);break;case 43:for(u=0,l=o[s].length;u<l;u++)r.miew.translate(o[s][u].x||0,o[s][u].y||0,o[s][u].z||0);break;case 44:this.$=r.miew.center();break;case 45:this.$=r.miew.center(o[s]);break;case 48:case 49:this.$=r.miew.addObject({type:"line",params:[o[s-1],o[s]]},!0);break;case 50:case 51:this.$=r.miew.addObject({type:"line",params:[o[s-2],o[s-1]],opts:o[s].toJSO(r.utils,"objects","line")},!0);break;case 52:this.$=r.echo(r.utils.listObjs(r.miew));break;case 53:this.$=r.miew.removeObject(o[s]);break;case 54:this.$=r.echo(r.miew.getURL({view:!1,settings:!1}));break;case 55:this.$=r.echo(r.miew.getURL({view:!1,settings:!0}));break;case 56:this.$=r.echo(r.miew.getURL({view:!0,settings:!1}));break;case 57:case 58:this.$=r.echo(r.miew.getURL({view:!0,settings:!0}));break;case 59:this.$=r.miew.screenshotSave();break;case 60:this.$=r.miew.screenshotSave("",Number(o[s]));break;case 61:this.$=r.miew.screenshotSave("",Number(o[s-1]),Number(o[s]));break;case 62:case 63:case 64:this.$=r.utils.load(r.miew,o[s]),r.representations.clear();break;case 65:this.$=r.echo(r.representations.add(r.miew.repAdd()));break;case 66:this.$=r.echo(r.representations.add(o[s],r.miew.repAdd()));break;case 67:this.$=r.echo(r.representations.add(r.miew.repAdd(o[s])));break;case 68:this.$=r.echo(r.representations.add(o[s-1],r.miew.repAdd(o[s])));break;case 69:this.$=r.miew.rep(o[s]),r.miew.repCurrent(o[s]);break;case 70:this.$=r.miew.rep(o[s-1],o[s]),r.miew.repCurrent(o[s-1]);break;case 71:this.$=r.miew.rep(r.miew.repCurrent(),{mode:r.utils.checkArg(o[s-1].toLowerCase(),o[s].toUpperCase())});break;case 72:this.$=r.miew.rep(r.miew.repCurrent(),{mode:new Array(r.utils.checkArg(o[s-2].toLowerCase(),o[s-1].toUpperCase()),o[s].toJSO(r.utils,o[s-2],o[s-1].toUpperCase()))});break;case 73:this.$=r.miew.rep(r.miew.repCurrent(),{colorer:r.utils.checkArg(o[s-1].toLowerCase(),o[s].toUpperCase())});break;case 74:this.$=r.miew.rep(r.miew.repCurrent(),{colorer:new Array(r.utils.checkArg(o[s-2].toLowerCase(),o[s-1].toUpperCase()),o[s].toJSO(r.utils,o[s-2],o[s-1].toUpperCase()))});break;case 75:this.$=Number(r.representations.get(o[s]));break;case 76:case 92:this.$=Number(o[s]);break;case 77:this.$=o[s];break;case 78:this.$=r.assign(o[s-1],o[s]);break;case 79:this.$=r.assign(o[s-2],o[s-1],o[s]);break;case 80:this.$=r.assign(o[s-3],o[s-2],o[s-1],o[s]);break;case 81:case 82:this.$=r.CreateObjectPair(o[s].key,o[s].val);break;case 83:this.$=r.CreateObjectPair(o[s-1].key,new Array(o[s-1].val,o[s].toJSO(r.utils,o[s-1].key,o[s-1].val)));break;case 84:case 85:this.$=Object.create({key:r.keyRemap(o[s-2]),val:r.utils.checkArg(o[s-2],o[s])});break;case 86:this.$=[o[s]];break;case 87:this.$=o[s-1].concat(o[s]);break;case 88:this.$=r.CreateObjectPair(o[s-1].toLowerCase(),Number(o[s]));break;case 89:this.$=new r.ArgList(o[s]);break;case 90:this.$=o[s-1].append(o[s]);break;case 91:this.$=new r.Arg(o[s-2],o[s]);break;case 93:this.$=parseInt(o[s]);break;case 94:this.$=JSON.parse(o[s]);break;case 95:case 96:this.$=String(o[s]);break;case 157:case 158:case 161:case 162:case 163:this.$=o[s-2]+o[s-1]+o[s];break;case 166:this.$=o[s-2]=o[s-2]+o[s-1]+o[s]}},table:[{3:1,4:2,5:[1,3],6:[1,4],7:[1,5],9:[1,6],11:[1,7],12:8,13:[1,9],15:[1,10],17:[1,11],18:[1,12],19:[1,13],20:[1,14],21:15,22:16,23:[1,17],25:[1,18],26:[1,19],27:[1,20],30:[1,21],33:[1,22],34:[1,23],37:[1,24],39:25,40:26,41:[1,27],43:[1,28],44:[1,29],45:[1,30],46:[1,31],48:[1,32],49:[1,33],50:34,51:35,52:[1,36],54:[1,37],55:[1,38],56:[1,44],58:[1,45],59:[1,39],62:[1,40],64:[1,41],65:[1,42],66:[1,43]},{1:[3]},{5:[1,46]},{1:[2,2]},{5:[2,3]},{5:[2,4],8:[1,47]},{5:[2,6],6:t,7:n,9:r,10:48,13:i,15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,33:v,34:m,37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,70:L,72:N,74:j,79:49,80:52,81:50,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X,96:$,97:J,98:Q,99:ee},{5:[2,8]},{5:[2,9]},{6:t,7:n,9:r,10:106,13:i,14:[1,107],15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,33:v,34:m,37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,70:L,72:N,74:j,79:49,80:52,81:50,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X,96:$,97:J,98:Q,99:ee},{6:t,7:n,9:r,10:108,13:i,14:[1,109],15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,33:v,34:m,37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,70:L,72:N,74:j,79:49,80:52,81:50,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X,96:$,97:J,98:Q,99:ee},{5:[2,14]},{5:[2,15]},{5:[2,16]},{5:[2,17],14:te,16:110,35:ne,38:re,77:ie,78:oe},{5:[2,19]},{5:[2,20]},{24:116,35:ae,38:se},{24:119,35:ae,38:se},{24:120,35:ae,38:se},{5:[2,25],24:121,28:[1,122],29:[1,123],35:ae,38:se},{14:[1,124]},{14:[1,125]},{35:[1,126]},{38:[1,127]},{5:[2,33]},{5:[2,34]},{5:[2,35],14:[1,128],42:[1,129]},{5:[2,38],35:[1,130]},{5:[2,40]},{35:[1,131]},{47:132,73:133,74:ue},{47:135,73:133,74:ue},{5:[2,44],14:[1,136]},{5:[2,46]},{5:[2,47]},{6:t,7:n,9:r,10:138,13:i,14:[1,137],15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,33:v,34:m,37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,70:L,72:N,74:j,79:49,80:52,81:50,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X,96:$,97:J,98:Q,99:ee},{5:[2,52]},{35:[1,139]},{14:[1,143],38:[1,141],60:140,61:[1,142]},{5:[2,65],38:[1,144],63:145,67:146,68:147,69:148,70:le,72:ce},{24:151,35:ae,38:se},{38:[1,152]},{38:[1,153]},{5:[2,54],29:[1,154],57:[1,155]},{5:[2,59],35:[1,156]},{1:[2,1]},{5:[2,5]},{5:[2,7],101:fe},e(he,[2,159]),e(he,[2,160]),e(de,[2,97]),e(de,[2,98]),e(he,[2,147]),e(he,[2,148]),e(he,[2,149]),e(he,[2,150]),e(he,[2,151]),e(he,[2,152]),e(he,[2,153]),e(de,[2,101]),e(de,[2,102]),e(de,[2,103]),e(de,[2,104]),e(de,[2,105]),e(de,[2,106]),e(de,[2,107]),e(de,[2,108]),e(de,[2,109]),e(de,[2,110]),e(de,[2,111]),e(de,[2,112]),e(de,[2,113]),e(de,[2,114]),e(de,[2,115]),e(de,[2,116]),e(de,[2,117]),e(de,[2,118]),e(de,[2,119]),e(de,[2,120]),e(de,[2,121]),e(de,[2,122]),e(de,[2,123]),e(de,[2,124]),e(de,[2,125]),e(de,[2,126]),e(de,[2,127]),e(de,[2,128]),e(de,[2,129]),e(de,[2,130]),e(de,[2,131]),e(de,[2,132]),e(de,[2,133]),e(de,[2,134]),e(de,[2,135]),e(de,[2,136]),e(de,[2,137]),e(de,[2,138]),e(de,[2,139]),e(de,[2,140]),e(de,[2,141]),e(de,[2,142]),e(de,[2,143]),e(de,[2,144]),e(de,[2,145]),e(de,[2,146]),{5:[2,10],101:fe},{5:[2,11]},{14:te,16:158,35:ne,38:re,77:ie,78:oe,101:fe},{14:te,16:159,35:ne,38:re,77:ie,78:oe},{5:[2,18]},e(pe,[2,92]),e(pe,[2,93]),e(pe,[2,94]),e(pe,[2,95]),e(pe,[2,96]),{5:[2,21]},e(ve,[2,75]),e(ve,[2,76]),{5:[2,22]},{5:[2,23]},{5:[2,24]},{5:[2,26]},{5:[2,27]},{5:[2,28],31:[1,160]},{5:[2,30]},{36:[1,161]},{5:[2,32]},{5:[2,36]},{5:[2,37]},{5:[2,39]},{5:[2,41]},{5:[2,42],73:162,74:ue},e(me,[2,86]),{35:[1,163]},{5:[2,43],73:162,74:ue},{5:[2,45]},{14:[1,164]},{6:t,7:n,9:r,10:165,13:i,15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,33:v,34:m,37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,70:L,72:N,74:j,79:49,80:52,81:50,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X,96:$,97:J,98:Q,99:ee,101:fe},{5:[2,53]},{5:[2,62]},{5:[2,63]},{5:[2,64]},{5:[2,164]},{5:[2,66],63:166,67:146,68:147,69:148,70:le,72:ce},{5:[2,67]},{5:[2,77],67:167,68:147,69:148,70:le,72:ce},e(ve,[2,81]),e(ve,[2,82],{80:52,53:168,75:169,76:170,79:171,6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,33:v,34:m,37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X}),{71:[1,172]},{71:[1,173]},{5:[2,69],63:174,67:146,68:147,69:148,70:le,72:ce},{5:[2,71],6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,33:v,34:m,37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,53:175,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,75:169,76:170,79:171,80:52,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X},{5:[2,73],6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,33:v,34:m,37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,53:176,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,75:169,76:170,79:171,80:52,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X},{5:[2,55],57:[1,177]},{5:[2,56],29:[1,178]},{5:[2,60],35:[1,179]},{6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,33:v,34:m,35:[1,181],37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,70:L,72:N,74:j,79:180,80:52,81:182,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X,96:$,97:J,98:Q,99:ee},{5:[2,12]},{5:[2,13]},{6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,32:183,33:v,34:m,37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,70:L,72:N,74:j,79:184,80:52,81:185,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X,96:$,97:J,98:Q,99:ee},{14:[1,186]},e(me,[2,87]),e(me,[2,88]),{5:[2,48],6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,33:v,34:m,37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,53:187,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,75:169,76:170,79:171,80:52,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X},{5:[2,49],6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,33:v,34:m,37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,53:188,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,75:169,76:170,79:171,80:52,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X,101:fe},{5:[2,68]},{5:[2,78],67:189,68:147,69:148,70:le,72:ce},e(ve,[2,83],{80:52,76:170,79:171,75:190,6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,33:v,34:m,37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X}),e(pe,[2,89]),{71:[1,191],101:[1,192]},e(ge,[2,156]),{14:te,16:193,35:ne,38:re,77:ie,78:oe},{14:te,16:194,35:ne,38:re,77:ie,78:oe},{5:[2,70]},{5:[2,72],6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,33:v,34:m,37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,75:190,76:170,79:171,80:52,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X},{5:[2,74],6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,33:v,34:m,37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,75:190,76:170,79:171,80:52,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X},{5:[2,57]},{5:[2,58]},{5:[2,61]},e(he,[2,161]),e(he,[2,162]),e(he,[2,163]),{5:[2,29]},{5:[2,99]},{5:[2,100]},{31:[1,195]},{5:[2,50],6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,33:v,34:m,37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,75:190,76:170,79:171,80:52,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X},{5:[2,51],6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,33:v,34:m,37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,75:190,76:170,79:171,80:52,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X},{5:[2,79],67:196,68:147,69:148,70:le,72:ce},e(pe,[2,90]),{14:te,16:197,35:ne,38:re,77:ie,78:oe},{6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,33:v,34:m,35:[1,199],37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,79:198,80:52,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X},e(ve,[2,84]),e(pe,[2,85]),{6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:l,23:c,25:f,26:h,27:d,30:p,32:200,33:v,34:m,37:g,38:y,41:b,43:x,45:_,46:w,49:S,52:E,54:k,55:O,56:A,58:C,59:M,62:T,64:P,65:R,66:I,70:L,72:N,74:j,79:184,80:52,81:185,82:D,83:B,84:z,85:F,86:V,87:U,88:Z,89:H,90:G,91:W,92:q,93:K,94:Y,95:X,96:$,97:J,98:Q,99:ee},{5:[2,80]},e(pe,[2,91]),e(ge,[2,157]),e(ge,[2,158]),{5:[2,31]}],defaultActions:{3:[2,2],4:[2,3],7:[2,8],8:[2,9],11:[2,14],12:[2,15],13:[2,16],15:[2,19],16:[2,20],25:[2,33],26:[2,34],29:[2,40],34:[2,46],35:[2,47],37:[2,52],46:[2,1],47:[2,5],107:[2,11],110:[2,18],116:[2,21],119:[2,22],120:[2,23],121:[2,24],122:[2,26],123:[2,27],125:[2,30],127:[2,32],128:[2,36],129:[2,37],130:[2,39],131:[2,41],136:[2,45],139:[2,53],140:[2,62],141:[2,63],142:[2,64],143:[2,164],145:[2,67],158:[2,12],159:[2,13],166:[2,68],174:[2,70],177:[2,57],178:[2,58],179:[2,61],183:[2,29],184:[2,99],185:[2,100],196:[2,80],200:[2,31]},parseError:function(e,t){if(!t.recoverable){var n=new Error(e);throw n.hash=t,n}this.trace(e)},parse:function(e){var t=this,n=[0],r=[],i=[null],o=[],a=this.table,s="",u=0,l=0,c=2,f=1,h=o.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var v in this.yy)Object.prototype.hasOwnProperty.call(this.yy,v)&&(p.yy[v]=this.yy[v]);d.setInput(e,p.yy),p.yy.lexer=d,p.yy.parser=this,"undefined"==typeof d.yylloc&&(d.yylloc={});var m=d.yylloc;o.push(m);var g=d.options&&d.options.ranges;function y(){var e;return"number"!==typeof(e=r.pop()||d.lex()||f)&&(e instanceof Array&&(e=(r=e).pop()),e=t.symbols_[e]||e),e}"function"===typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,x,_,w,S,E,k,O,A={};;){if(x=n[n.length-1],this.defaultActions[x]?_=this.defaultActions[x]:(null!==b&&"undefined"!=typeof b||(b=y()),_=a[x]&&a[x][b]),"undefined"===typeof _||!_.length||!_[0]){var C="";for(S in O=[],a[x])this.terminals_[S]&&S>c&&O.push("'"+this.terminals_[S]+"'");C=d.showPosition?"Parse error on line "+(u+1)+":\n"+d.showPosition()+"\nExpecting "+O.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(u+1)+": Unexpected "+(b==f?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(C,{text:d.match,token:this.terminals_[b]||b,line:d.yylineno,loc:m,expected:O})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+b);switch(_[0]){case 1:n.push(b),i.push(d.yytext),o.push(d.yylloc),n.push(_[1]),b=null,l=d.yyleng,s=d.yytext,u=d.yylineno,m=d.yylloc;break;case 2:if(E=this.productions_[_[1]][1],A.$=i[i.length-E],A._$={first_line:o[o.length-(E||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(E||1)].first_column,last_column:o[o.length-1].last_column},g&&(A._$.range=[o[o.length-(E||1)].range[0],o[o.length-1].range[1]]),"undefined"!==typeof(w=this.performAction.apply(A,[s,l,u,p.yy,_[1],i,o].concat(h))))return w;E&&(n=n.slice(0,-1*E*2),i=i.slice(0,-1*E),o=o.slice(0,-1*E)),n.push(this.productions_[_[1]][0]),i.push(A.$),o.push(A._$),k=a[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}},be=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!t||n[0].length>t[0].length)){if(t=n,r=o,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,i[o])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,i[r]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(e,t,n,r){switch(n){case 0:break;case 1:case 2:return"";case 3:return 42;case 4:return 35;case 5:return 77;case 6:case 7:return 78;case 8:return 8;case 9:return 6;case 10:return 82;case 11:return 7;case 12:return 9;case 13:return 59;case 14:return 13;case 15:return 15;case 16:return 17;case 17:return 18;case 18:return 19;case 19:return 20;case 20:return 11;case 21:return 62;case 22:return 64;case 23:return 23;case 24:return 25;case 25:return 26;case 26:return 27;case 27:return 30;case 28:return 34;case 29:return 33;case 30:return 65;case 31:return 66;case 32:return 37;case 33:return 41;case 34:return 43;case 35:return 52;case 36:return 54;case 37:return 55;case 38:return 46;case 39:return 48;case 40:return 45;case 41:return 49;case 42:return 56;case 43:return 58;case 44:return 44;case 45:return 83;case 46:return 84;case 47:return 85;case 48:return 86;case 49:return 87;case 50:return 88;case 51:return 89;case 52:return 90;case 53:return 91;case 54:return 92;case 55:return 93;case 56:return 94;case 57:return 95;case 58:case 59:return 70;case 60:case 61:return 72;case 62:case 63:case 64:return 74;case 65:return 31;case 66:return 36;case 67:return 96;case 68:return 97;case 69:return 98;case 70:return 99;case 71:return t.yytext=e.utils.unquoteString(t.yytext),14;case 72:return 38;case 73:return 5;case 74:return 101;case 75:return 103;case 76:return"\\";case 77:return 28;case 78:return 61;case 79:return 29;case 80:return 57;case 81:return 71}},rules:[/^(?:\s+)/i,/^(?:[#].*)/i,/^(?:\/\/.*)/i,/^(?:([_A-Z0-9\/\+]+==))/i,/^(?:-?[0-9]+(\.[0-9]+)?\b)/i,/^(?:0[xX][0-9A-F]+\b)/i,/^(?:false\b)/i,/^(?:true\b)/i,/^(?:all\b)/i,/^(?:reset\b)/i,/^(?:clear\b)/i,/^(?:build\b)/i,/^(?:help\b)/i,/^(?:load\b)/i,/^(?:get\b)/i,/^(?:set\b)/i,/^(?:set_save\b)/i,/^(?:set_restore\b)/i,/^(?:set_reset\b)/i,/^(?:preset\b)/i,/^(?:motm\b)/i,/^(?:add\b)/i,/^(?:rep\b)/i,/^(?:remove\b)/i,/^(?:hide\b)/i,/^(?:show\b)/i,/^(?:list\b)/i,/^(?:select\b)/i,/^(?:within\b)/i,/^(?:selector\b)/i,/^(?:mode\b)/i,/^(?:color\b)/i,/^(?:material\b)/i,/^(?:view\b)/i,/^(?:unit\b)/i,/^(?:line\b)/i,/^(?:listobj\b)/i,/^(?:removeobj\b)/i,/^(?:rotate\b)/i,/^(?:translate\b)/i,/^(?:scale\b)/i,/^(?:center\b)/i,/^(?:url\b)/i,/^(?:screenshot\b)/i,/^(?:dssp\b)/i,/^(?:file_list\b)/i,/^(?:file_register\b)/i,/^(?:file_delete\b)/i,/^(?:preset_add\b)/i,/^(?:preset_delete\b)/i,/^(?:preset_update\b)/i,/^(?:preset_rename\b)/i,/^(?:preset_open\b)/i,/^(?:create_scenario\b)/i,/^(?:reset_scenario\b)/i,/^(?:delete_scenario\b)/i,/^(?:add_scenario_item\b)/i,/^(?:list_scenario\b)/i,/^(?:s\b)/i,/^(?:mt\b)/i,/^(?:m\b)/i,/^(?:c\b)/i,/^(?:x\b)/i,/^(?:y\b)/i,/^(?:z\b)/i,/^(?:as\b)/i,/^(?:of\b)/i,/^(?:pdb\b)/i,/^(?:delay\b)/i,/^(?:prst\b)/i,/^(?:desc\b)/i,/^(?:((?:"(?:\\.|[^\\"])*"|'(?:\\.|[^\\'])*')))/i,/^(?:([_A-Z0-9]+))/i,/^(?:$)/i,/^(?:\.)/i,/^(?:\/)/i,/^(?:\\)/i,/^(?:-e\b)/i,/^(?:-f\b)/i,/^(?:-s\b)/i,/^(?:-v\b)/i,/^(?:=)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81],inclusive:!0}}};return e}();function xe(){this.yy={}}return ye.lexer=be,xe.prototype=ye,ye.Parser=xe,new xe}(),qL={parser:WL},KL={$help:["Rendering mode shortcut","    BS - balls and sticks mode","    LN - lines mode","    LC - licorice mode","    VW - van der waals mode","    TR - trace mode","    TU - tube mode","    CA - cartoon mode","    SA - isosurface mode","    QS - quick surface mode","    SE - solvent excluded mode","    TX - text mode"],BS:{$help:["   Balls and sticks","      aromrad = <number> #aromatic radius","      atom = <number>    #atom radius","      bond = <number>    #bond radius","      multibond = <bool> #use multibond","      showarom = <bool>  #show aromatic","      space = <number>   #space value\n"]},CA:{$help:["   Cartoon","      arrow = <number>   #arrow size","      depth = <number>   #depth of surface","      heightSegmentsRatio = <number>","      radius = <number>  #tube radius","      tension = <number> #","      width = <number>  #secondary width\n"]},LN:{$help:["   Lines","      atom = <number>    #atom radius","      chunkarom = <number>","      multibond = <bool> #use multibond","      showarom = <bool>  #show aromatic","      offsarom = <number>\n"]},LC:{$help:["   Licorice","      aromrad = <number> #aromatic radius","      bond = <number>    #bond radius","      multibond = <bool> #use multibond","      showarom = <bool>  #show aromatic","      space = <number>   #space value\n"]},VW:{$help:["   Van der Waals","      nothing\n"]},TR:{$help:["   Trace","      radius = <number>  #tube radius\n"]},TU:{$help:["   Tube","      heightSegmentsRatio = <number>","      radius = <number>  #tube radius","      tension = <number> \n"]},SA:{$help:["   Surface","      zClip = <bool> #clip z plane\n"]},QS:{$help:["   Quick surface","      isoValue = <number>","      scale = <number>","      wireframe = <bool>","      zClip = <bool> #clip z plane\n"]},SE:{$help:["   Solvent excluded surface","      zClip = <bool> #clip z plane\n"]},TX:{$help:["   Text mode",'      template = <format string> string that can include "{{ id }}"',"          it will be replaced by value, id can be one of next:","          serial, name, type, sequence, residue, chain, hetatm, water\n",'      horizontalAlign = <string> {"left", "right", "center"}','      verticalAlign = <string> {"top", "bottom", "middle"}',"      dx = <number> #offset along x","      dy = <number> #offset along y","      dz = <number> #offset along z","      fg = <string> #text color modificator","           could be keyword, named color or hex","      fg = <string> #back color modificator","           could be keyword, named color or hex","      showBg = <bool> #if set show background","           plate under text"]}},YL={$help:["Coloring mode shortcut","    EL - color by element","    CH - color by chain","    SQ - color by sequence","    RT - color by residue type","    SS - color by secondary structure","    UN - uniform"],UN:{$help:["Parameters of coloring modes customization","   Uniform","      color = <number|color> #RGB->HEX->dec\n"],color:{$help:Object.keys(DM.get(_w.now.palette).namedColors).sort().join("\n")}}},XL={$help:["Material shortcut","    DF - diffuse","    TR - transparent","    SF - soft plastic","    PL - glossy plastic","    ME - metal","    GL - glass"]},$L={$help:["Short (packed) representation description as a set of variables","    s=<EXPRESSION>","        selector property","    m=<MODE_ID>[!<PARAMETER>:<VALUE>[,...]]","        render mode property","    c=<COLORER_ID>[!<PARAMETER>:<VALUE>[,...]]","        color mode property","    mt=<MATERIAL_ID>","        material property"],s:{$help:"Selection expression string as it is in menu->representations->selection"},m:KL,c:YL,mt:XL},JL={$help:["Parameters of rendering modes customization: modes","Parameters of colorer customization: colorers","Autobuild: autobuild = (<number>|<bool>)"],modes:KL,colorers:YL},QL={$help:["help (<cmd name>| <path to property>)","You can get detailed information about command options",'   using "help cmd.opt.opt.[...]"\n',"   you can use one line comments","   everything started from (#|//) will be skipped","   Example: >build //some comment\n","List of available commands:"],reset:{$help:["Reload current object, delete all representations","    Nothing will work until load new object"]},load:{$help:["load (<PDBID>|<URL>|-f [<*.NC FILE URL STRING>])","    Load new pdb object from selected source"],PDBID:{$help:"pdb id in remote molecule database"},URL:{$help:"url to source file"},f:{$help:["open file system dialog to fetch local file","optionally you can determine trajectory file","via URL for *.top model"]}},clear:{$help:"No args. Clear terminal"},add:{$help:["add [<REP_NAME>] [<DESCRIPTION>]","    Add new item to representation set with","    default or <DESCRIPTION> params"],REP_NAME:{$help:"Identifier string [_,a-z,A-Z,0-9] can not start from digit"},DESCRIPTION:$L},rep:{$help:["rep [<REP_NAME>|<REP_INDEX>] [<DESCRIPTION>]","    set current representation by name or index","    edit current representation by <DESCRIPTION>"],REP_NAME:{$help:["Identifier string [_,a-z,A-Z,0-9] can not start from digit","Must be declared before"]},REP_INDEX:{$help:"Index of available representation"},DESCRIPTION:$L},remove:{$help:["remove (<REP_NAME>|<REP_INDEX>)","Remove representation by name or index"],REP_NAME:{$help:["Identifier string [_,a-z,A-Z,0-9] can not start from digit","Must be declared before"]},REP_INDEX:{$help:"Index of available representation"}},selector:{$help:["selector <EXPRESSION>","   set selector from EXPRESSION to current representation"],EXPRESSION:{$help:"Selection expression string as it is in menu->representations->selection"}},mode:{$help:["mode <MODE_ID> [<PARAMETER>=<VALUE>...]","   set rendering mode and apply parameters to current representation"],MODE_ID:KL},color:{$help:["color <COLORER_ID> [<PARAMETER>=<VALUE>...]","   set colorer and apply parameters to current representation"],COLORER_ID:YL},material:{$help:["material <MATERIAL_ID>","   set material to current representation"],MATERIAL_ID:XL},build:{$help:"build help str",add:{$help:"build.add",new:{$help:["add.new","add.new new line 1","add.new new line 2","add.new new line 3"]}},del:{$help:"build.del"}},list:{$help:["list [-e|-s|<REP_NAME>|<REP_INDEX>]","Print representations if no args print list of representations","    -e expand list and show all representations","    -s show all user-registered selectors","    <REP_NAME>|<REP_INDEX> show only current representation"]},hide:{$help:["hide (<REP_NAME>|<REP_INDEX>)","Hide representation referenced in args"]},show:{$help:["show (<REP_NAME>|<REP_INDEX>)","Show representation referenced in args"]},get:{$help:["get <PARAMETER>","Print <PARAMETER> value","    <PARAMETER> - path to option use get.PARAMETER to get more info"],PARAMETER:JL},set:{$help:["set <PARAMETER> <VALUE>","Set <PARAMETER> with <VALUE>","    <PARAMETER> - path to option use set.PARAMETER to get more info"],PARAMETER:JL},set_save:{$help:["set_save","Save current settings to cookie"]},set_restore:{$help:["set_restore","Load and apply settings from cookie"]},set_reset:{$help:["set_reset","Reset current settings to the defaults"]},preset:{$help:["preset [<PRESET>]","Reset current representation or set preset to <PRESET>"],PRESET:{$help:["default","wire","small","macro"]}},unit:{$help:["unit [<unit_id>]","Change current biological structure view. Zero <unit_id> value means asymmetric unit,","positive values set an assembly with corresponding number.","Being called with no parameters command prints current unit information."]},view:{$help:["view [<ENCODED_VIEW>]","Get current encoded view or set if ENCODED_VIEW placed as argument"],ENCODED_VIEW:{$help:["encoded view matrix string (binary code)"]}},rotate:{$help:["rotate (x|y|z) [<DEGREES>] [(x|y|z) [<DEGREES>]]...","Rotate scene"]},scale:{$help:["scale <SCALE>","Scale scene"]},select:{$help:["select <SELECTOR_STRING> [as <SELECTOR_NAME>]","Select atoms using selector defined in SELECTOR_STRING","    and if SELECTOR_NAME is defined register it in viewer","    you can use it later as a complex selector"]},within:{$help:["within <DISTANCE> of <SELECTOR_STRING> as <SELECTOR_NAME>","Build within named selector","    DISTANCE        <number>","    SELECTOR_STRING <string(selection language)>","    SELECTOR_NAME   <identifier>"]},url:{$help:["url [-s] [-v]","Report URL encoded scene","    if -s set that include settings in the URL","    if -v set that include view in the URL"]},screenshot:{$help:["screenshot [<WIDTH> [<HEIGHT>]]","Make a screenshot of the scene","    WIDTH  <number> in pixels","    HEIGHT <number> in pixels, equal to WIDTH by default"]},line:{$help:["line <first_atom_path> <second_atom_path> [<PARAMETER>=<VALUE>]","Draw dashed line between two specified atoms"]},removeobj:{$help:["removeobj <id>","Remove scene object by its index. Indices could be obtained by <listobj> command"]},listobj:{$help:["listobj","Display the list of all existing scene objects"]}},eN=GL.chem.selectors,tN=GL.modes,nN=GL.colorers,rN=GL.materials,iN=GL.palettes,oN=GL.options,aN=GL.settings;function sN(){}var uN=function(){var e=new sN;return function(){return e}}(),lN=function(){function e(){O_(this,e),this.representationMap={},this.representationID={}}return C_(e,[{key:"get",value:function(e){return this.representationMap[e]||this.representationID[e]||"<no name>"}},{key:"add",value:function(e,t){if(-1===e)return"Can not create representation: there is no data";if(void 0!==t){if(this.representationMap.hasOwnProperty(e))return"This name has already existed, registered without name";this.representationMap[e.toString()]=t,this.representationID[t]=e.toString()}return"Representation ".concat(e," successfully added")}},{key:"remove",value:function(e){e&&this.representationID.hasOwnProperty(e)&&(delete this.representationMap[this.representationID[e]],delete this.representationID[e]);var t=Object.keys(this.representationID).sort();for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r>e&&(this.representationID[r-1]=this.representationID[r],this.representationMap[this.representationID[r]]-=1,delete this.representationID[r])}}},{key:"clear",value:function(){this.representationMap={},this.representationID={}}}]),e}(),cN=new lN;function fN(e){var t={s:"selector",m:"mode",c:"colorer",mt:"material",mode:"modes",color:"colorers",colorer:"colorers",select:"selector",material:"materials",selector:"selector"}[e];return void 0===t?e:t}var hN=function(){function e(){O_(this,e)}return C_(e,[{key:"list",value:function(e,t,n){var r="";if(e&&void 0!==t&&(void 0===n||"-e"===n))for(var i=e.repCount(),o=0;o<i;o++)r+=this.listRep(e,t,o,n);return r}},{key:"listRep",value:function(e,t,n,r){var i="",o=e.repGet(n);if(!o)return nw.warn("Rep ".concat(n," does not exist!")),i;var a=n,s=t.get(a),u=o.mode,l=o.colorer,c=o.selectorString,f=o.materialPreset;return i+="#".concat(a," : ").concat(u.name).concat("<no name>"===s?"":", ".concat(s),"\n"),void 0!==r&&(i+='    selection : "'.concat(c,'"\n'),i+="    mode      : (".concat(u.id,"), ").concat(u.name,"\n"),i+="    colorer   : (".concat(l.id,"), ").concat(l.name,"\n"),i+="    material  : (".concat(f.id,"), ").concat(f.name,"\n")),i}},{key:"listSelector",value:function(e,t){var n="";for(var r in t)t.hasOwnProperty(r)&&(n+="".concat(r,' : "').concat(t[r],'"\n'));return n}},{key:"listObjs",value:function(e){var t=e._objects;if(!t||!Array.isArray(t)||0===t.length)return"There are no objects on the scene";for(var n=[],r=0,i=t.length;r<i;++r)n[r]="".concat(r,": ").concat(t[r].toString());return n.join("\n")}},{key:"joinHelpStr",value:function(e){return e instanceof Array?e.join("\n"):e}},{key:"help",value:function(e){if((0,R.isUndefined)(e))return"".concat(this.joinHelpStr(QL.$help),"\n").concat((0,R.slice)((0,R.sortBy)((0,R.keys)(QL)),1).join(", "),"\n");var t=(0,R.get)(QL,e);return(0,R.isUndefined)(t)?this.help():"".concat(this.joinHelpStr(t.$help),"\n")}},{key:"load",value:function(e,t){if(void 0!==e&&void 0!==t&&"-f"!==t){e.awaitWhileCMDisInProcess();var n=function(){return e.finishAwaitingCMDInProcess()};e.load(t).then(n,n)}}},{key:"checkArg",value:function(e,t,n){if(void 0!==e&&void 0!==t){if("selector"===fN(e)){var r=eN.parse(t);if(void 0!==r.error)throw{message:r.error};return void 0!==n&&n?r.selector:t}for(var i,o={colorers:nN,modes:tN,materials:rN},a=e;a!==i;)a=fN(i=a);if(void 0===o[a].get(t))throw{message:"".concat(t," is not existed in ").concat(a)};return t}return uN}},{key:"propagateProp",value:function(e,t){if(void 0!==e){var n=oN.adapters[k_((0,R.get)(aN.defaults,e))];if(void 0===n)throw{message:"".concat(e," is not existed")};if((e.endsWith(".color")||e.endsWith(".baseColor")||e.endsWith(".EL.carbon"))&&"number"!==typeof t&&(t=iN.get(aN.now.palette).getNamedColor(t)),e.endsWith(".fg")||e.endsWith(".bg"))if("number"!==typeof t){var r=iN.get(aN.now.palette).getNamedColor(t,!0);void 0!==r&&(t="0x".concat(r.toString(16)))}else t="0x".concat(t.toString(16));if(e.endsWith(".template")&&(t=t.replace(/\\n/g,"\n")),void 0!==t&&n(t)!==t&&n(t)!==t>0)throw{message:"".concat(e,' must be a "').concat(k_((0,R.get)(aN.defaults,e)),'"')}}return t}},{key:"unquoteString",value:function(e){return mw.unquoteString(e)}}]),e}(),dN=new hN;function pN(e){if(e instanceof this.constructor)return e;this._values=e instanceof Array?e.slice(0):e?[e]:[]}pN.prototype.append=function(e){var t=this._values;return t[t.length]=e,this},pN.prototype.remove=function(e){var t=this._values,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},pN.prototype.toJSO=function(e,t,n){for(var r={},i=this._values,o=0,a=i.length;o<a;++o)(0,R.set)(r,i[o].id,e.propagateProp("".concat(fN(t),".").concat(n,".").concat(i[o].id),i[o].val));return r};var vN=Object.create({});vN.Arg=function(e,t){this.id=e,this.val=t},vN.ArgList=pN,vN.miew=null,vN.echo=null,vN.representations=cN,vN.utils=dN,vN.assign=R.assign,vN.CreateObjectPair=function(e,t){var n={};return n[e]=t,n},vN.keyRemap=fN,vN.Context=eN.Context,vN.ClearContext=eN.ClearContext,vN.NULL=uN,vN.notimplemented=function(){return this.NULL},GL.prototype.script=function(e,t,n){qL.parser.yy.miew=this,qL.parser.yy.echo=t,qL.parser.yy.error=n,void 0===this.cmdQueue&&(this.cmdQueue=[]),void 0===this.commandInAction&&(this.commandInAction=!1),this.cmdQueue=this.cmdQueue.concat(e.split("\n"))},GL.prototype.awaitWhileCMDisInProcess=function(){this.commandInAction=!0},GL.prototype.finishAwaitingCMDInProcess=function(){this.commandInAction=!1},GL.prototype.isScriptingCommandAvailable=function(){return void 0!==this.commandInAction&&!this.commandInAction&&void 0!==this.cmdQueue&&this.cmdQueue.length>0},GL.prototype.callNextCmd=function(){if(this.isScriptingCommandAvailable()){var e=this.cmdQueue.shift(),t={success:!1};try{qL.parser.parse(e),t.success=!0}catch(n){t.error=n.message,qL.parser.yy.error(t.error),this.finishAwaitingCMDInProcess()}return t}return""},qL.parser.yy=vN,qL.parser.yy.parseError=qL.parser.parseError;var mN=function(e){void 0===e&&(e={});var t=e.onResize,n=(0,eu.useRef)(void 0);n.current=t;var r=(0,eu.useRef)(),i=(0,eu.useState)({width:void 0,height:void 0}),o=i[0],a=i[1],s=(0,eu.useRef)(!1);(0,eu.useEffect)((function(){return function(){s.current=!0}}),[]);var u=(0,eu.useRef)({width:void 0,height:void 0}),l=function(e,t){var n=(0,eu.useRef)(null),r=(0,eu.useCallback)((function(e){n.current=e,a()}),[]),i=(0,eu.useRef)(null),o=(0,eu.useRef)(),a=function(){var r=null;n.current?r=n.current:t&&(r=t instanceof HTMLElement?t:t.current),i.current!==r&&(o.current&&(o.current(),o.current=null),i.current=r,r&&(o.current=e(r)))};return(0,eu.useEffect)((function(){a()}),[t]),r}((function(e){return r.current||(r.current=new ResizeObserver((function(e){if(Array.isArray(e)){var t=e[0],r=Math.round(t.contentRect.width),i=Math.round(t.contentRect.height);if(u.current.width!==r||u.current.height!==i){var o={width:r,height:i};n.current?n.current(o):(u.current.width=r,u.current.height=i,s.current||a(o))}}}))),r.current.observe(e),function(){r.current&&r.current.unobserve(e)}}),e.ref);return(0,eu.useMemo)((function(){return{ref:l,width:o.width,height:o.height}}),[l,o?o.width:null,o?o.height:null])},gN=n(97308),yN=n(90274),bN=n(36896),xN=function(e,t){return(0,gN.Z)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&{colorScheme:e.palette.mode})},_N=function(e){return(0,gN.Z)({color:e.palette.text.primary},e.typography.body1,{backgroundColor:e.palette.background.default,"@media print":{backgroundColor:e.palette.common.white}})};var wN=function(e){var t=(0,yN.Z)({props:e,name:"MuiCssBaseline"}),n=t.children,r=t.enableColorScheme,o=void 0!==r&&r;return(0,i.jsxs)(eu.Fragment,{children:[(0,i.jsx)(bN.Z,{styles:function(e){return function(e){var t,n,r={html:xN(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,gN.Z)({margin:0},_N(e),{"&::backdrop":{backgroundColor:e.palette.background.default}})},i=null==(t=e.components)||null==(n=t.MuiCssBaseline)?void 0:n.styleOverrides;return i&&(r=[r,i]),r}(e,o)}}),n]})},SN=n(9297),EN=n(99724),kN=n(50408),ON=n.n(kN),AN=n(26381),CN={isInitialized:!1,data:void 0,error:void 0},MN=(0,EN.oM)({name:"init",initialState:CN,reducers:{INIT:function(e){e.isInitialized=!1,e.data=void 0,e.error=void 0},INIT_SUCCESS:function(e,t){e.isInitialized=!0,e.data=t.payload,e.error=void 0},INIT_FAIL:function(e,t){e.isInitialized=!1,e.data=void 0,e.error=t.payload}}}),TN=MN.actions,PN=TN.INIT,RN=TN.INIT_SUCCESS,IN=TN.INIT_FAIL,LN=MN.reducer,NN=ON().mark(BN),jN=ON().mark(zN),DN=function(e){return new Promise((function(t){return setTimeout((function(){return t("data fetched from ".concat(e))}),2e3)}))};function BN(){var e;return ON().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,AN.RE)(DN,"some/url");case 3:return e=t.sent,t.next=6,(0,AN.gz)(RN(e));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,(0,AN.gz)(IN("SAMPLE ERROR"));case 12:case"end":return t.stop()}}),NN,null,[[0,8]])}function zN(){return ON().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,AN.ib)(PN,BN);case 2:case"end":return e.stop()}}),jN)}var FN=ON().mark(VN);function VN(){return ON().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,AN.Cs)(zN);case 2:case"end":return e.stop()}}),FN)}var UN=(0,SN.ZP)(),ZN=(0,EN.xC)({reducer:{init:LN},middleware:function(e){return e().concat(UN)}});UN.run(VN);var HN={palette:{accent:{main:"#2E6DA4",dark:"#204D74",light:"#337AB7"},primary:{main:"#DDD",light:"#FFF",dark:"#DDD"},secondary:{main:"#333",light:"#C0C0C0",dark:"#383838"}},typography:{fontSize:16,fontFamily:"sans-serif"}};function GN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var WN=800,qN=400,KN=(0,Ou.Z)(),YN=function(e){var t=e.onInit,n=e.options,r=e.theme,i=r?(0,R.merge)(HN,r):HN,o=(0,eu.useRef)(null),a=mN({ref:o}),s=a.width,u=a.height,l=u&&u<=qN||s&&s<=WN;return(0,eu.useLayoutEffect)((function(){var e=new GL(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GN(Object(n),!0).forEach((function(t){Cc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({container:null===o||void 0===o?void 0:o.current},n));e.init()&&e.run(),"function"===typeof t&&t(e)}),[n,t]),(0,Mc.tZ)(nu.zt,{store:ZN,children:(0,Mc.BX)(Ru.b,{theme:(0,R.merge)(KN,{miew:i}),children:[(0,Mc.tZ)(wN,{},void 0),(0,Mc.tZ)("div",{ref:o,css:function(e){var t=e.miew.palette;return{backgroundColor:l?t.accent.main:t.primary.main,height:"100%",width:"100%","& > .miew-canvas":{height:"100%",width:"100%"}}}},void 0)]},void 0)},void 0)},XN=n(50194),$N=n(31610),JN=n(36591),QN=n(55627),ej=n(85690);var tj=n(14484),nj=(n(8031),n(15277)),rj=n(83297),ij=n(81879);var oj=eu.createContext({}),aj=n(6142),sj=n(62364),uj=n(62149);function lj(e){return(0,sj.Z)("MuiAccordion",e)}var cj=(0,uj.Z)("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),fj=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","TransitionComponent","TransitionProps"],hj=(0,rj.ZP)(ij.Z,{name:"MuiAccordion",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[(0,Rc.Z)({},"& .".concat(cj.region),t.region),t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})((function(e){var t,n=e.theme,r={duration:n.transitions.duration.shortest};return t={position:"relative",transition:n.transitions.create(["margin"],r),overflowAnchor:"none","&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:n.palette.divider,transition:n.transitions.create(["opacity","background-color"],r)},"&:first-of-type":{"&:before":{display:"none"}}},(0,Rc.Z)(t,"&.".concat(cj.expanded),{"&:before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&:before":{display:"none"}}}),(0,Rc.Z)(t,"&.".concat(cj.disabled),{backgroundColor:n.palette.action.disabledBackground}),t}),(function(e){var t=e.theme,n=e.ownerState;return(0,gN.Z)({},!n.square&&{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:t.shape.borderRadius,borderTopRightRadius:t.shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:t.shape.borderRadius,borderBottomRightRadius:t.shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},!n.disableGutters&&(0,Rc.Z)({},"&.".concat(cj.expanded),{margin:"16px 0"}))})),dj=eu.forwardRef((function(e,n){var r,o=(0,yN.Z)({props:e,name:"MuiAccordion"}),a=o.children,s=o.className,u=o.defaultExpanded,l=void 0!==u&&u,c=o.disabled,f=void 0!==c&&c,h=o.disableGutters,d=void 0!==h&&h,p=o.expanded,v=o.onChange,m=o.square,g=void 0!==m&&m,y=o.TransitionComponent,b=void 0===y?wu.Z:y,x=o.TransitionProps,_=(0,tj.Z)(o,fj),w=(0,aj.Z)({controlled:p,default:l,name:"Accordion",state:"expanded"}),S=(0,t.Z)(w,2),E=S[0],k=S[1],O=eu.useCallback((function(e){k(!E),v&&v(e,!E)}),[E,v,k]),A=eu.Children.toArray(a),C=(r=A,(0,JN.Z)(r)||(0,QN.Z)(r)||(0,Pc.Z)(r)||(0,ej.Z)()),M=C[0],T=C.slice(1),P=eu.useMemo((function(){return{expanded:E,disabled:f,disableGutters:d,toggle:O}}),[E,f,d,O]),R=(0,gN.Z)({},o,{square:g,disabled:f,disableGutters:d,expanded:E}),I=function(e){var t=e.classes,n={root:["root",!e.square&&"rounded",e.expanded&&"expanded",e.disabled&&"disabled",!e.disableGutters&&"gutters"],region:["region"]};return(0,nj.Z)(n,lj,t)}(R);return(0,i.jsxs)(hj,(0,gN.Z)({className:(0,tu.Z)(I.root,s),ref:n,ownerState:R,square:g},_,{children:[(0,i.jsx)(oj.Provider,{value:P,children:M}),(0,i.jsx)(b,(0,gN.Z)({in:E,timeout:"auto"},x,{children:(0,i.jsx)("div",{"aria-labelledby":M.props.id,id:M.props["aria-controls"],role:"region",className:I.region,children:T})}))]}))})),pj=dj,vj=n(97616);function mj(e){return(0,sj.Z)("MuiAccordionSummary",e)}var gj=(0,uj.Z)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),yj=["children","className","expandIcon","focusVisibleClassName","onClick"],bj=(0,rj.ZP)(vj.Z,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){var t,n=e.theme,r=e.ownerState,i={duration:n.transitions.duration.shortest};return(0,gN.Z)((t={display:"flex",minHeight:48,padding:n.spacing(0,2),transition:n.transitions.create(["min-height","background-color"],i)},(0,Rc.Z)(t,"&.".concat(gj.focusVisible),{backgroundColor:n.palette.action.focus}),(0,Rc.Z)(t,"&.".concat(gj.disabled),{opacity:n.palette.action.disabledOpacity}),(0,Rc.Z)(t,"&:hover:not(.".concat(gj.disabled,")"),{cursor:"pointer"}),t),!r.disableGutters&&(0,Rc.Z)({},"&.".concat(gj.expanded),{minHeight:64}))})),xj=(0,rj.ZP)("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:function(e,t){return t.content}})((function(e){var t=e.theme,n=e.ownerState;return(0,gN.Z)({display:"flex",flexGrow:1,margin:"12px 0"},!n.disableGutters&&(0,Rc.Z)({transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest})},"&.".concat(gj.expanded),{margin:"20px 0"}))})),_j=(0,rj.ZP)("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:function(e,t){return t.expandIconWrapper}})((function(e){var t=e.theme;return(0,Rc.Z)({display:"flex",color:t.palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})},"&.".concat(gj.expanded),{transform:"rotate(180deg)"})})),wj=eu.forwardRef((function(e,t){var n=(0,yN.Z)({props:e,name:"MuiAccordionSummary"}),r=n.children,o=n.className,a=n.expandIcon,s=n.focusVisibleClassName,u=n.onClick,l=(0,tj.Z)(n,yj),c=eu.useContext(oj),f=c.disabled,h=void 0!==f&&f,d=c.disableGutters,p=c.expanded,v=c.toggle,m=(0,gN.Z)({},n,{expanded:p,disabled:h,disableGutters:d}),g=function(e){var t=e.classes,n=e.expanded,r=e.disabled,i=e.disableGutters,o={root:["root",n&&"expanded",r&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]};return(0,nj.Z)(o,mj,t)}(m);return(0,i.jsxs)(bj,(0,gN.Z)({focusRipple:!1,disableRipple:!0,disabled:h,component:"div","aria-expanded":p,className:(0,tu.Z)(g.root,o),focusVisibleClassName:(0,tu.Z)(g.focusVisible,s),onClick:function(e){v&&v(e),u&&u(e)},ref:t,ownerState:m},l,{children:[(0,i.jsx)(xj,{className:g.content,ownerState:m,children:r}),a&&(0,i.jsx)(_j,{className:g.expandIconWrapper,ownerState:m,children:a})]}))})),Sj=wj;function Ej(e){return(0,sj.Z)("MuiAccordionDetails",e)}(0,uj.Z)("MuiAccordionDetails",["root"]);var kj=["className"],Oj=(0,rj.ZP)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){return{padding:e.theme.spacing(1,2,2)}})),Aj=eu.forwardRef((function(e,t){var n=(0,yN.Z)({props:e,name:"MuiAccordionDetails"}),r=n.className,o=(0,tj.Z)(n,kj),a=n,s=function(e){var t=e.classes;return(0,nj.Z)({root:["root"]},Ej,t)}(a);return(0,i.jsx)(Oj,(0,gN.Z)({className:(0,tu.Z)(s.root,r),ref:t,ownerState:a},o))})),Cj=Aj,Mj="NOT_FOUND";var Tj=function(e,t){return e===t};function Pj(e,t){var n="object"===typeof t?t:{equalityCheck:t},r=n.equalityCheck,i=void 0===r?Tj:r,o=n.maxSize,a=void 0===o?1:o,s=n.resultEqualityCheck,u=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}}(i),l=1===a?function(e){var t;return{get:function(n){return t&&e(t.key,n)?t.value:Mj},put:function(e,n){t={key:e,value:n}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}(u):function(e,t){var n=[];function r(e){var r=n.findIndex((function(n){return t(e,n.key)}));if(r>-1){var i=n[r];return r>0&&(n.splice(r,1),n.unshift(i)),i.value}return Mj}return{get:r,put:function(t,i){r(t)===Mj&&(n.unshift({key:t,value:i}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(a,u);function c(){var t=l.get(arguments);if(t===Mj){if(t=e.apply(null,arguments),s){var n=l.getEntries(),r=n.find((function(e){return s(e.value,t)}));r&&(t=r.value)}l.put(arguments,t)}return t}return c.clearCache=function(){return l.clear()},c}function Rj(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var n=t.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function Ij(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var o,a=0,s={memoizeOptions:void 0},u=r.pop();if("object"===typeof u&&(s=u,u=r.pop()),"function"!==typeof u)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof u+"]");var l=s,c=l.memoizeOptions,f=void 0===c?n:c,h=Array.isArray(f)?f:[f],d=Rj(r),p=e.apply(void 0,[function(){return a++,u.apply(null,arguments)}].concat(h)),v=e((function(){for(var e=[],t=d.length,n=0;n<t;n++)e.push(d[n].apply(null,arguments));return o=p.apply(null,e)}));return Object.assign(v,{resultFunc:u,memoizedResultFunc:p,dependencies:d,lastResult:function(){return o},recomputations:function(){return a},resetRecomputations:function(){return a=0}}),v};return i}var Lj=Ij(Pj),Nj=n(41833),jj=n(2502),Dj=n(60832),Bj=n(22557);function zj(){return zj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zj.apply(this,arguments)}function Fj(e,t){var n=e.createStructService(t),r=n.info();return Object.assign(r,{info:n.info.bind(n),convert:n.convert.bind(n),layout:n.layout.bind(n),clean:n.clean.bind(n),aromatize:n.aromatize.bind(n),dearomatize:n.dearomatize.bind(n),calculateCip:n.calculateCip.bind(n),automap:n.automap.bind(n),check:n.check.bind(n),calculate:n.calculate.bind(n),recognize:n.recognize.bind(n),generateImageAsBase64:n.generateImageAsBase64.bind(n),generateInchIKey:n.generateInchIKey.bind(n)})}var Vj=eu.createContext({}),Uj=eu.createContext({}),Zj=eu.createContext({}),Hj=eu.createContext(null),Gj=["H","C","N","O","S","P","F","Cl","Br","I"],Wj={H:"h",C:"c",N:"n",O:"o",S:"s",P:"p",F:"f",Cl:"Shift+c",Br:"Shift+b",I:"i",A:"a"},qj=Object.keys(Wj).reduce((function(e,t){return e["atom-".concat(t.toLowerCase())]={title:"Atom ".concat(t),shortcut:Wj[t],action:{tool:"atom",opts:{label:t}}},e}),{});function Kj(e){var t,r=n.g.currentState.editor,i=r.structSelected(),o=r.errorHandler;try{if("mol"===e)t=new fn;else t=new at;if(Boolean(i.simpleObjects.size||i.texts.size)&&t instanceof fn)return o("This feature is not available for Simple objects and Text objects"),null;var a=t.serialize(i);window.clipboardData?window.clipboardData.setData("text",a):navigator.clipboard.writeText(a)}catch(s){o("This feature is not available in your browser")}}function Yj(){return Yj=a(u().mark((function e(){var t,i,o,a,s,l,c,f,h,d,p,v;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.g.currentState,i=t.editor,o=t.server,a=t.options,s=i.structSelected(),l=i.errorHandler,e.prev=6,c=new cr(o),f=c.create("ket",a),e.next=11,f.getStructureFromStructAsync(s);case 11:return h=e.sent,d=new Ks(i,o,{},c),e.next=15,d.generateImage(h,{outputFormat:"png",backgroundColor:"255, 255, 255"});case 15:return p=e.sent,v=new ClipboardItem((0,r.Z)({},p.type,p)),e.next=19,navigator.clipboard.write([v]);case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(6),l("This feature is not available in your browser");case 24:case"end":return e.stop()}}),e,null,[[6,21]])}))),Yj.apply(this,arguments)}function Xj(e,t){var n,r;return Boolean(null===(n=e.buttons)||void 0===n||null===(r=n[t])||void 0===r?void 0:r.hidden)}var $j={"force-update":{shortcut:"Ctrl+Shift+r",action:function(e){e.update(!0)},hidden:function(e){return Xj(e,"force-update")}},"qs-serialize":{shortcut:"Alt+Shift+r",action:function(e){var t=(new fn).serialize(e.struct()),n="mol="+encodeURIComponent(t).replace(/%20/g,"+"),r=document.location.search;document.location.search=r?-1===r.search("mol=")?r+"&"+n:r.replace(/mol=[^&$]*/,n):"?"+n}},hidden:function(e){return Xj(e,"qs-serialize")}},Jj="cliparea-module_cliparea__GdPrN";function Qj(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var eD=window.clipboardData,tD=function(e){p(n,e);var t=Qj(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).textAreaRef=(0,eu.createRef)(),r}return(0,c.Z)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.textAreaRef.current;this.target=this.props.target||t.parentNode,this.listeners={mouseup:function(n){var r;(t===n.target||!nD(n.target)&&e.props.focused())&&((r=t).value=" ",r.focus(),r.select())},mousedown:function(e){e.shiftKey&&!nD(e.target)&&e.preventDefault()},copy:function(t){if(e.props.focused()&&e.props.onCopy){var n=e.props.onCopy();n&&rD(t.clipboardData,n),t.preventDefault()}},cut:function(t){if(e.props.focused()&&e.props.onCut){var n=e.props.onCut();n&&rD(t.clipboardData,n),t.preventDefault()}},paste:function(t){if(e.props.focused()&&e.props.onPaste){var n=function(e,t){var n={};!e&&eD?n["text/plain"]=eD.getData("text"):(n["text/plain"]=e.getData("text/plain"),n=t.reduce((function(t,n){var r=e.getData(n);return r&&(t[n]=r),t}),n));return n}(t.clipboardData,e.props.formats);n&&e.props.onPaste(n),t.preventDefault()}}},Object.keys(this.listeners).forEach((function(t){e.target.addEventListener(t,e.listeners[t])}))}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){var e=this;Object.keys(this.listeners).forEach((function(t){e.target.removeEventListener(t,e.listeners[t])}))}},{key:"render",value:function(){return(0,i.jsx)("textarea",{ref:this.textAreaRef,className:(0,tu.Z)("cliparea",Jj),contentEditable:!0,autoFocus:!0,suppressContentEditableWarning:!0})}}]),n}(eu.Component);function nD(e){return("INPUT"!==e.tagName||"button"!==e.type)&&["INPUT","SELECT","TEXTAREA","OPTION","LABEL"].includes(e.tagName)}function rD(e,t){if(!e&&eD)eD.setData("text",t["text/plain"]);else{e.setData("text/plain",t["text/plain"]);try{Object.keys(t).forEach((function(n){n,e.setData(n,t[n])}))}catch(n){}}}var iD=["cut","copy","paste"];function oD(e){var t=document.queryCommandSupported(e);if(t)try{t=document.execCommand(e)||window.ClipboardEvent||eD}catch(n){t=!1}return t}function aD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aD(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var uD={showValenceWarnings:{title:"Show valence warnings",type:"boolean",description:"slider",default:!0},atomColoring:{title:"Atom coloring",type:"boolean",description:"slider",default:!0},showStereoFlags:{title:"Show the Stereo flags",type:"boolean",description:"slider",default:!0},stereoLabelStyle:{title:"Label display at\xa0stereogenic\xa0centers",enum:[ur.IUPAC,ur.Classic,ur.On,ur.Off],enumNames:["IUPAC style","Classic","On","Off"],default:ur.IUPAC},colorOfAbsoluteCenters:{title:" Absolute Center color",type:"string",default:"#ff0000"},colorOfAndCenters:{title:"AND Centers color",type:"string",default:"#0000cd"},colorOfOrCenters:{title:"OR Centers color",type:"string",default:"#228b22"},colorStereogenicCenters:{title:"Color stereogenic centers",enum:[sr.LabelsOnly,sr.BondsOnly,sr.LabelsAndBonds,sr.Off],enumNames:["Labels Only","Bonds Only","Labels And Bonds","Off"],default:sr.LabelsOnly},autoFadeOfStereoLabels:{title:"Auto fade And/Or center labels",type:"boolean",description:"slider",default:!0},absFlagLabel:{title:"Text of Absolute flag",type:"string",default:"ABS (Chiral)"},andFlagLabel:{title:"Text of AND flag",type:"string",default:"AND Enantiomer"},mixedFlagLabel:{title:"Text of Mixed flag",type:"string",default:"Mixed"},orFlagLabel:{title:"Text of OR flag",type:"string",default:"OR Enantiomer"},font:{title:"Font",type:"string",default:"30px Arial"},fontsz:{title:"Font size",type:"integer",default:13,minimum:1,maximum:96},fontszsub:{title:"Sub font size",type:"integer",default:13,minimum:1,maximum:96},carbonExplicitly:{title:"Display carbon explicitly",type:"boolean",description:"slider",default:!1},showCharge:{title:"Display charge",type:"boolean",description:"slider",default:!0},showValence:{title:"Display valence",type:"boolean",description:"slider",default:!0},showHydrogenLabels:{title:"Show hydrogen labels",enum:["off","Hetero","Terminal","Terminal and Hetero","on"],default:"on"},aromaticCircle:{title:"Aromatic Bonds as circle",type:"boolean",description:"slider",default:!0},doubleBondWidth:{title:"Double bond width",type:"integer",default:6,minimum:1,maximum:96},bondThickness:{title:"Bond thickness",type:"integer",default:2,minimum:1,maximum:96},stereoBondWidth:{title:"Stereo (Wedge) bond width",type:"integer",default:6,minimum:1,maximum:96}},lD={"smart-layout":{title:"Smart-layout",type:"boolean",description:"slider",default:!0},"ignore-stereochemistry-errors":{title:"Ignore stereochemistry errors",type:"boolean",description:"slider",default:!0},"mass-skip-error-on-pseudoatoms":{title:"Ignore pseudoatoms at mass",type:"boolean",description:"slider",default:!1},"gross-formula-add-rsites":{title:"Add Rsites at mass calculation",type:"boolean",description:"slider",default:!0},"gross-formula-add-isotopes":{title:"Add Isotopes at\xa0mass\xa0calculation",type:"boolean",description:"slider",default:!0}},cD=Object.keys(lD),fD={miewMode:{title:"Display mode",enum:["LN","BS","LC"],enumNames:["Lines","Balls and Sticks","Licorice"],default:"LN"},miewTheme:{title:"Background color",enum:["light","dark"],enumNames:["Light","Dark"],default:"light"},miewAtomLabel:{title:"Label coloring",enum:["no","bright","blackAndWhite","black"],enumNames:["No","Bright","Black and White","Black"],default:"bright"}},hD=Object.keys(fD),dD={title:"Settings",type:"object",required:[],properties:sD(sD(sD(sD(sD({},{resetToSelect:{title:"Reset to Select Tool",enum:[!0,"paste",!1],enumNames:["on","After Paste","off"],default:"paste"},rotationStep:{title:"Rotation Step, \xba",type:"integer",minimum:1,maximum:90,default:15}}),uD),lD),{showAtomIds:{title:"Show atom Ids",type:"boolean",description:"slider",default:!1},showBondIds:{title:"Show bonds Ids",type:"boolean",description:"slider",default:!1},showHalfBondIds:{title:"Show half bonds Ids",type:"boolean",description:"slider",default:!1},showLoopIds:{title:"Show loop Ids",type:"boolean",description:"slider",default:!1}}),fD)};function pD(){return dD.properties?Object.keys(dD.properties).reduce((function(e,t){return e[t]=dD.properties[t].default,e}),{}):{}}var vD="Your changes will be lost after the tab closing. See Help (Note 2).",mD=function(){try{return n.g.localStorage}catch(e){return!1}},gD=function(e){var t=null;try{t=JSON.parse(localStorage.getItem(e))}catch(n){}return t},yD=function(e,t){var n=null;try{localStorage.setItem(e,JSON.stringify(t)),n=!0}catch(r){n=!1}return n};function bD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bD(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _D={app:{server:!1,templates:!1,functionalGroups:!1},analyse:{values:null,roundWeight:3,roundMass:3,roundElAnalysis:1},check:{checkOptions:["valence","radicals","pseudoatoms","stereo","query","overlapping_atoms","overlapping_bonds","rgroups","chiral","3d","chiral_flag"]},recognize:{file:null,structStr:null,fragment:!1,version:null},settings:Object.assign(pD(),function(e){if("object"!==v(e)||null===e)return null;var t=new(L())({allErrors:!0,keywords:[{keyword:"enumNames",schemaType:"array"}]}).compile(dD);t(e);var n=(t.errors||[]).map((function(e){return e.instancePath.slice(1)}));return Object.keys(e).reduce((function(t,r){return dD.properties?(dD.properties[r]&&-1===n.indexOf(r)&&(t[r]=e[r]),t):t}),{})}(gD("ketcher-opts"))),getServerSettings:function(){return(0,F.pick)(cD,this.settings)}};function wD(e){return function(t){t({type:"APP_OPTIONS",data:e}),t({type:"UPDATE"})}}var SD=["SET_RECOGNIZE_STRUCT","CHANGE_RECOGNIZE_FILE","CHANGE_IMAGO_VERSION","IS_FRAGMENT_RECOGNIZE"];function ED(e){return{type:"SET_RECOGNIZE_STRUCT",data:{structStr:e}}}function kD(e){return{type:"CHANGE_RECOGNIZE_FILE",data:{file:e,structStr:null}}}function OD(e,t){return e.oneOf.reduce((function(e,n){return e[function(e,t){var n=e.properties[t];return n.constant||n.enum[0]}(n,t)]=n,e}),{})}var AD={enum:["Absolute","Relative","Attached"],default:"Absolute"},CD={title:"Context",enum:["Fragment","Multifragment","Bond","Atom","Group"],default:"Fragment"},MD={Fragment:{title:"Fragment",type:"Object",oneOf:[{key:"FRG_STR",title:"MDLBG_FRAGMENT_STEREO",type:"object",properties:{type:{enum:["DAT"]},fieldName:{title:"Field name",enum:["MDLBG_FRAGMENT_STEREO"],default:"MDLBG_FRAGMENT_STEREO"},fieldValue:{title:"Field value",enum:["abs","(+)-enantiomer","(-)-enantiomer","racemate","steric","rel","R(a)","S(a)","R(p)","S(p)"],default:"abs"},radiobuttons:AD},required:["fieldName","fieldValue","radiobuttons"]},{key:"FRG_COEFF",title:"MDLBG_FRAGMENT_COEFFICIENT",type:"object",properties:{type:{enum:["DAT"]},fieldName:{title:"Field name",enum:["MDLBG_FRAGMENT_COEFFICIENT"],default:"MDLBG_FRAGMENT_COEFFICIENT"},fieldValue:{title:"Field value",type:"string",default:"",minLength:1,invalidMessage:"Please, specify field value"},radiobuttons:AD},required:["fieldName","fieldValue","radiobuttons"]},{key:"FRG_CHRG",title:"MDLBG_FRAGMENT_CHARGE",type:"object",properties:{type:{enum:["DAT"]},fieldName:{title:"Field name",enum:["MDLBG_FRAGMENT_CHARGE"],default:"MDLBG_FRAGMENT_CHARGE"},fieldValue:{title:"Field value",type:"string",default:"",minLength:1,invalidMessage:"Please, specify field value"},radiobuttons:AD},required:["fieldName","fieldValue","radiobuttons"]},{key:"FRG_RAD",title:"MDLBG_FRAGMENT_RADICALS",type:"object",properties:{type:{enum:["DAT"]},fieldName:{title:"Field name",enum:["MDLBG_FRAGMENT_RADICALS"],default:"MDLBG_FRAGMENT_RADICALS"},fieldValue:{title:"Field value",type:"string",default:"",minLength:1,invalidMessage:"Please, specify field value"},radiobuttons:AD},required:["fieldName","fieldValue","radiobuttons"]}]},Multifragment:{title:"Multifragment",type:"Object",oneOf:[{key:"MLT_FRG",title:"KETCHER_MULTIPLE_FRAGMENT",type:"object",properties:{type:{enum:["DAT"]},fieldName:{title:"Field name",enum:["KETCHER_MULTIPLE_FRAGMENT"],default:"KETCHER_MULTIPLE_FRAGMENT"},fieldValue:{title:"Field value",enum:["aerosol","alloy","catenane","complex","composite","co-polymer","emulsion","host-guest complex","mixture","rotaxane","suspension"],default:"aerosol"},radiobuttons:AD},required:["fieldName","fieldValue","radiobuttons"]}]},Bond:{title:"Bond",type:"Object",oneOf:[{key:"SB_STR",title:"MDLBG_STEREO_KEY",type:"object",properties:{type:{enum:["DAT"]},fieldName:{title:"Field name",enum:["MDLBG_STEREO_KEY"],default:"MDLBG_STEREO_KEY"},fieldValue:{title:"Field value",enum:["erythro","threo","alpha","beta","endo","exo","anti","syn","ECL","STG"],default:"erythro"},radiobuttons:AD},required:["fieldName","fieldValue","radiobuttons"]},{key:"SB_BND",title:"MDLBG_BOND_KEY",type:"object",properties:{type:{enum:["DAT"]},fieldName:{title:"Field name",enum:["MDLBG_BOND_KEY"],default:"MDLBG_BOND_KEY"},fieldValue:{title:"Field value",enum:["Value=4"],default:"Value=4"},radiobuttons:AD},required:["fieldName","fieldValue","radiobuttons"]}]},Atom:{title:"Atom",type:"Object",oneOf:[{key:"AT_STR",title:"MDLBG_STEREO_KEY",type:"object",properties:{type:{enum:["DAT"]},fieldName:{title:"Field name",enum:["MDLBG_STEREO_KEY"],default:"MDLBG_STEREO_KEY"},fieldValue:{title:"Field value",enum:["RS","SR","P-3","P-3-PI","SP-4","SP-4-PI","T-4","T-4-PI","SP-5","SP-5-PI","TB-5","TB-5-PI","OC-6","TP-6","PB-7","CU-8","SA-8","DD-8","HB-9","TPS-9"],default:"RS"},radiobuttons:AD},required:["fieldName","fieldValue","radiobuttons"]}]},Group:{title:"Group",type:"Object",oneOf:[{key:"GRP_STR",title:"MDLBG_STEREO_KEY",type:"object",properties:{type:{enum:["DAT"]},fieldName:{title:"Field name",enum:["MDLBG_STEREO_KEY"],default:"MDLBG_STEREO_KEY"},fieldValue:{title:"Field value",enum:["cis","trans"],default:"cis"},radiobuttons:AD},required:["fieldName","fieldValue","radiobuttons"]}]}},TD={key:"Custom",type:"object",properties:{type:{enum:["DAT"]},context:{title:"Context",enum:["Fragment","Multifragment","Bond","Atom","Group"],default:"Fragment"},fieldName:{title:"Field name",type:"string",default:"",minLength:1,invalidMessage:"Please, specify field name"},fieldValue:{title:"Field value",type:"string",default:"",minLength:1,invalidMessage:"Please, specify field value"},radiobuttons:{enum:["Absolute","Relative","Attached"],default:"Absolute"}},required:["context","fieldName","fieldValue","radiobuttons"]},PD=Object.keys(MD).reduce((function(e,t){return e[t]=OD(MD[t],"fieldName"),Object.keys(e[t]).forEach((function(n){e[t][n].properties.context=CD})),e}),{});function RD(e){return Object.keys(e)[0]}function ID(e,t){return e||t?t?PD[e][t]?PD[e][t].properties.fieldValue.default:"":RD(PD[e]):RD(PD)}function LD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ND(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LD(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jD=function(e,t){var n=t.valid,r=t.errors,i=e.result,o=i.fieldName,a=i.fieldValue;return{result:e.result,valid:n&&!!o&&!!a,errors:r}},DD=function(e,t){var n=t.context,r=t.fieldValue,i=ID(n),o=r;return o===e.result.fieldValue&&(o=ID(n,i)),{result:ND(ND({},t),{},{context:n,fieldName:i,fieldValue:o})}},BD=function(e,t){var n=t.fieldName,r=e.result.context,i=t.fieldValue;return PD[r][n]&&(i=ID(r,n)),i===e.result.fieldValue&&PD[r][e.result.fieldName]&&(i=""),{result:ND(ND({},t),{},{fieldName:n,fieldValue:i})}},zD={atomProps:{errors:{},valid:!0,result:{label:"",charge:0,explicitValence:-1,hCount:0,invRet:0,isotope:0,radical:0,ringBondCount:0,substitutionCount:0}},attachmentPoints:{errors:{},valid:!0,result:{primary:!1,secondary:!1}},automap:{errors:{},valid:!0,result:{mode:"discard"}},bondProps:{errors:{},valid:!0,result:{type:"single",topology:0,center:0}},check:{errors:{},moleculeErrors:{}},labelEdit:{errors:{},valid:!0,result:{label:""}},rgroup:{errors:{},valid:!0,result:{values:[]}},rgroupLogic:{errors:{},valid:!0,result:{ifthen:0,range:">0",resth:!1}},save:{errors:{},valid:!0,result:{filename:"ketcher",format:"mol"}},settings:{errors:{},valid:!0,result:pD()},sgroup:{errors:{},valid:!0,result:{type:"GEN"}},text:{errors:{},valid:!0,result:{}},attach:{errors:{},valid:!0,result:{}},sdata:function(){var e=ID(),t=ID(e);return{errors:{},valid:!0,result:{context:e,fieldName:t,fieldValue:ID(e,t),radiobuttons:"Absolute",type:"DAT"}}}()};function FD(e){return{type:"UPDATE_FORM",data:e}}function VD(e,t,n){return"sdata"===n?function(e,t){if(t.data.result.init)return jD(ND(ND({},e),{},{result:Object.assign({},e.result,t.data.result)}),t.data);var n=t.data.result.context,r=t.data.result.fieldName,i=null;return n!==e.result.context?i=DD(e,t.data.result):r!==e.result.fieldName&&(i=BD(e,t.data.result)),i=i||ND(ND({},e),{},{result:Object.assign({},e.result,t.data.result)}),jD(i,t.data)}(e,t):Object.assign({},e,t.data)}var UD="INDIGO_VERIFICATION",ZD="ANALYZING_FILE";function HD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HD(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WD(e){return{type:UD,data:e}}function qD(e){return{type:ZD,data:e}}var KD={indigoVerification:!1,isAnalyzingFile:!1};var YD={MUL:"MUL",SRU:"SRU",SUP:"SUP",DAT:"DAT",GEN:"GEN"},XD={title:"Atom",type:"object",required:["label"],properties:{label:{title:"Label",type:"string",maxLength:3,invalidMessage:"Wrong label"},alias:{title:"Alias",type:"string",invalidMessage:"Leading and trailing spaces are not allowed"},charge:{title:"Charge",type:"string",pattern:"^([+-]?)([0-9]{1,3}|1000)([+-]?)$",maxLength:5,default:"0",invalidMessage:"Invalid charge value"},explicitValence:{title:"Valence",enum:[-1,0,1,2,3,4,5,6,7,8],enumNames:["","0","I","II","III","IV","V","VI","VII","VIII"],default:-1},isotope:{title:"Isotope",type:"integer",minimum:0,default:0,invalidMessage:"There must be integer"},radical:{title:"Radical",enum:[0,2,1,3],enumNames:["","Monoradical","Diradical (singlet)","Diradical (triplet)"],default:0},ringBondCount:{title:"Ring bond count",enum:[0,-2,-1,2,3,4],enumNames:["","As drawn","0","2","3","4"],default:0},hCount:{title:"H count",enum:[0,1,2,3,4,5],enumNames:["","0","1","2","3","4"],default:0},substitutionCount:{title:"Substitution count",enum:[0,-2,-1,1,2,3,4,5,6],enumNames:["","As drawn","0","1","2","3","4","5","6"],default:0},unsaturatedAtom:{title:"Unsaturated",type:"boolean",default:!1},invRet:{title:"Inversion",enum:[0,1,2],enumNames:["","Inverts","Retains"],default:0},exactChangeFlag:{title:"Exact change",type:"boolean",default:!1}}},$D={title:"R-group",type:"object",properties:{values:{type:"array",items:{type:"string",enum:(0,F.range)(1,33),enumNames:(0,F.range)(1,33).map((function(e){return"R"+e}))}}}},JD={title:"Label Edit",type:"object",required:["label"],properties:{label:{title:"Atom",default:"",invalidMessage:"Wrong atom symbol",type:"string"}}},QD={title:"Attachment Points",type:"object",properties:{primary:{title:"Primary attachment point",type:"boolean"},secondary:{title:"Secondary attachment point",type:"boolean"}}},eB={title:"Bond",type:"object",required:["type"],properties:{type:{title:"Type",enum:["single","up","down","updown","double","crossed","triple","aromatic","any","hydrogen","singledouble","singlearomatic","doublearomatic","dative"],enumNames:["Single","Single Up","Single Down","Single Up/Down","Double","Double Cis/Trans","Triple","Aromatic","Any","Hydrogen","Single/Double","Single/Aromatic","Double/Aromatic","Dative"],default:"single"},topology:{title:"Topology",enum:[0,1,2],enumNames:["Either","Ring","Chain"],default:0},center:{title:"Reacting Center",enum:[0,-1,1,2,4,8,12],enumNames:["Unmarked","Not center","Center","No change","Made/broken","Order changes","Made/broken and changes"],default:0}}},tB=OD({title:"SGroup",type:"object",required:["type"],oneOf:[{key:"GEN",title:"Generic",type:"object",properties:{type:{enum:["GEN"]}}},{key:"MUL",title:"Multiple group",type:"object",properties:{type:{enum:["MUL"]},mul:{title:"Repeat count",type:"integer",default:1,minimum:1,maximum:1e3,invalidMessage:"Value out of range: must be between 1 and 1000"}},required:["mul"]},{key:"SRU",title:"SRU polymer",type:"object",properties:{type:{enum:["SRU"]},subscript:{title:"Polymer label",type:"string",default:"n",pattern:"^[a-zA-Z]$",invalidMessage:"SRU subscript should consist of a single letter"},connectivity:{title:"Repeat Pattern",enum:["ht","hh","eu"],enumNames:["Head-to-tail","Head-to-head","Either unknown"],default:"ht"}},required:["subscript","connectivity"]},{key:"SUP",title:"Superatom",type:"object",properties:{type:{enum:["SUP"]},name:{title:"Name",type:"string",default:"",minLength:1,invalidMessage:"Please, provide a name for the superatom"}},required:["name"]}]},"type"),nB={title:"R-Group",type:"object",properties:{range:{title:"Occurrence",type:"string",maxLength:50,invalidMessage:"Wrong value"},resth:{title:"RestH",type:"boolean"},ifthen:{title:"Condition",type:"integer",minium:0}}},rB={title:"Template edit",type:"object",required:["name"],properties:{name:{title:"Molecule name",type:"string",minLength:1,maxLength:128,invalidMessage:"Template must have a unique name and no more than 128 symbols in length"}}},iB=["type","radiobuttons"];function oB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oB(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sB(e){return"R#"===e.label?aB({type:"rlabel",values:cB(e.rglabel)},e):"L#"===e.label?{type:(t=e).atomList.notList?"not-list":"list",values:t.atomList.ids.map((function(e){return H(e).label}))}:H(e.label)?function(e){var t=e.alias||"",n=e.charge.toString();return{alias:t,label:e.label,charge:n,isotope:e.isotope,explicitValence:e.explicitValence,radical:e.radical,invRet:e.invRet,exactChangeFlag:!!e.exactChangeFlag,ringBondCount:e.ringBondCount,substitutionCount:e.substitutionCount,unsaturatedAtom:!!e.unsaturatedAtom,hCount:e.hCount,stereoParity:e.stereoParity}}(e):!e.label&&"attpnt"in e?{ap:(n=e.attpnt,{primary:(1&(n||0))>0,secondary:(2&(n||0))>0})}:e;var t,n}function uB(e){return"rlabel"===e.type?{label:e.values.length?"R#":"C",rglabel:0===e.values.length?null:fB(e.values)}:"list"===e.type||"not-list"===e.type?function(e){return{pseudo:null,label:"L#",atomList:new K({notList:"not-list"===e.type,ids:e.values.map((function(e){return H(e).number}))})}}(e):!e.label&&"ap"in e?{attpnt:(t=e.ap,(t.primary&&1)+(t.secondary&&2))}:H((0,F.capitalize)(e.label))?lB(e):"A"===e.label||"*"===e.label||"Q"===e.label||"X"===e.label||"R"===e.label?(e.pseudo=e.label,lB(e)):e;var t}function lB(e){var t=new RegExp(XD.properties.charge.pattern).exec(e.charge),n=t?parseInt(t[1]+t[3]+t[2]):e.charge,r=Object.assign({},e,{label:(0,F.capitalize)(e.label),alias:e.alias||null,exactChangeFlag:+e.exactChangeFlag,unsaturatedAtom:+e.unsaturatedAtom});return void 0!==n&&(r.charge=n),r}function cB(e){var t,n,r=[];for(t=0;t<32;t++)e&1<<t&&(n=t+1,r.push(n));return r}function fB(e){var t=0;return e.forEach((function(e){t|=1<<e-1})),t}function hB(e){return aB({topology:e.topology,reactingCenterStatus:e.center},dB(e.type))}function dB(e){return Object.assign({},vB[e])}function pB(e,t){for(var n in vB)if(vB[n].type===e&&vB[n].stereo===t)return n;throw Error("No such bond caption")}var vB={single:{type:oe.PATTERN.TYPE.SINGLE,stereo:oe.PATTERN.STEREO.NONE},up:{type:oe.PATTERN.TYPE.SINGLE,stereo:oe.PATTERN.STEREO.UP},down:{type:oe.PATTERN.TYPE.SINGLE,stereo:oe.PATTERN.STEREO.DOWN},updown:{type:oe.PATTERN.TYPE.SINGLE,stereo:oe.PATTERN.STEREO.EITHER},double:{type:oe.PATTERN.TYPE.DOUBLE,stereo:oe.PATTERN.STEREO.NONE},crossed:{type:oe.PATTERN.TYPE.DOUBLE,stereo:oe.PATTERN.STEREO.CIS_TRANS},triple:{type:oe.PATTERN.TYPE.TRIPLE,stereo:oe.PATTERN.STEREO.NONE},aromatic:{type:oe.PATTERN.TYPE.AROMATIC,stereo:oe.PATTERN.STEREO.NONE},singledouble:{type:oe.PATTERN.TYPE.SINGLE_OR_DOUBLE,stereo:oe.PATTERN.STEREO.NONE},singlearomatic:{type:oe.PATTERN.TYPE.SINGLE_OR_AROMATIC,stereo:oe.PATTERN.STEREO.NONE},doublearomatic:{type:oe.PATTERN.TYPE.DOUBLE_OR_AROMATIC,stereo:oe.PATTERN.STEREO.NONE},any:{type:oe.PATTERN.TYPE.ANY,stereo:oe.PATTERN.STEREO.NONE},hydrogen:{type:oe.PATTERN.TYPE.HYDROGEN,stereo:oe.PATTERN.STEREO.NONE},dative:{type:oe.PATTERN.TYPE.DATIVE,stereo:oe.PATTERN.STEREO.NONE}};function mB(e){var t=e.type||"GEN",n=e.attrs,r=n.context,i=n.fieldName,o=n.fieldValue,a=n.absolute,s=n.attached;return e.attrs.radiobuttons=!1===a&&!1===s?"Relative":s?"Attached":"Absolute",PD[r][i]&&PD[r][i].properties.fieldValue.items&&(e.attrs.fieldValue=o.split("\n")),Object.assign({type:t},e.attrs)}function gB(e){var t=e.type,n=e.radiobuttons,r=aB({},(0,N.Z)(e,iB));switch(n){case"Absolute":r.absolute=!0,r.attached=!1;break;case"Attached":r.absolute=!1,r.attached=!0;break;case"Relative":r.absolute=!1,r.attached=!1}return r.fieldName&&(r.fieldName=r.fieldName.trim()),r.fieldValue&&(r.fieldValue="string"===typeof r.fieldValue?r.fieldValue.trim():r.fieldValue),{type:t,attrs:r}}var yB={"select-lasso":{title:"Lasso Selection",shortcut:"Escape",action:{tool:"select",opts:"lasso"}},"select-rectangle":{title:"Rectangle Selection",shortcut:"Escape",action:{tool:"select",opts:"rectangle"},hidden:function(e){return Xj(e,"select-rectangle")}},"select-fragment":{title:"Fragment Selection",shortcut:"Escape",action:{tool:"select",opts:"fragment"},hidden:function(e){return Xj(e,"select-fragment")}},erase:{title:"Erase",shortcut:["Delete","Backspace"],action:{tool:"eraser",opts:1},hidden:function(e){return Xj(e,"erase")}},chain:{title:"Chain",action:{tool:"chain"},hidden:function(e){return Xj(e,"chain")}},"enhanced-stereo":{shortcut:"Alt+e",title:"Stereochemistry",action:{tool:"enhancedStereo"},disabled:function(e){return 0===ka(null===e||void 0===e?void 0:e.struct(),Array.from(null===e||void 0===e?void 0:e.struct().atoms.keys())).length},hidden:function(e){return Xj(e,"enhanced-stereo")}},"charge-plus":{shortcut:"5",title:"Charge Plus",action:{tool:"charge",opts:1},hidden:function(e){return Xj(e,"charge-plus")}},"charge-minus":{shortcut:"5",title:"Charge Minus",action:{tool:"charge",opts:-1},hidden:function(e){return Xj(e,"charge-minus")}},transforms:{hidden:function(e){return Xj(e,"transforms")}},"transform-rotate":{shortcut:"Alt+r",title:"Rotate Tool",action:{tool:"rotate"},hidden:function(e){return Xj(e,"transform-rotate")}},"transform-flip-h":{shortcut:"Alt+h",title:"Horizontal Flip",action:{tool:"rotate",opts:"horizontal"},hidden:function(e){return Xj(e,"transform-flip-h")}},"transform-flip-v":{shortcut:"Alt+v",title:"Vertical Flip",action:{tool:"rotate",opts:"vertical"},hidden:function(e){return Xj(e,"transform-flip-v")}},sgroup:{shortcut:"Mod+g",title:"S-Group",action:{tool:"sgroup"},hidden:function(e){return Xj(e,"sgroup")}},"sgroup-data":{shortcut:"Mod+g",title:"Data S-Group",action:{tool:"sgroup",opts:"DAT"},hidden:function(e){return Xj(e,"sgroup-data")}},arrows:{hidden:function(e){return Xj(e,"arrows")}},"reaction-arrow-open-angle":{title:"Arrow Open Angle Tool",action:{tool:"reactionarrow",opts:_e.OpenAngle},hidden:function(e){return Xj(e,"reaction-arrow-open-angle")}},"reaction-arrow-filled-triangle":{title:"Arrow Filled Triangle",action:{tool:"reactionarrow",opts:_e.FilledTriangle},hidden:function(e){return Xj(e,"reaction-arrow-filled-triangle")}},"reaction-arrow-filled-bow":{title:"Arrow Filled Bow Tool",action:{tool:"reactionarrow",opts:_e.FilledBow},hidden:function(e){return Xj(e,"reaction-arrow-filled-bow")}},"reaction-arrow-dashed-open-angle":{title:"Arrow Dashed Open Angle Tool",action:{tool:"reactionarrow",opts:_e.DashedOpenAngle},hidden:function(e){return Xj(e,"reaction-arrow-dashed-open-angle")}},"reaction-arrow-failed":{title:"Failed Arrow Tool",action:{tool:"reactionarrow",opts:_e.Failed},hidden:function(e){return Xj(e,"reaction-arrow-failed")}},"reaction-arrow-both-ends-filled-triangle":{title:"Arrow Both Ends Filled Triangle Tool",action:{tool:"reactionarrow",opts:_e.BothEndsFilledTriangle},hidden:function(e){return Xj(e,"reaction-arrow-both-ends-filled-triangle")}},"reaction-arrow-equilibrium-filled-half-bow":{title:"Arrow Equilibrium Filled Half Bow Tool",action:{tool:"reactionarrow",opts:_e.EquilibriumFilledHalfBow},hidden:function(e){return Xj(e,"reaction-arrow-equilibrium-filled-half-bow")}},"reaction-arrow-equilibrium-filled-triangle":{title:"Arrow Equilibrium Filled Triangle Tool",action:{tool:"reactionarrow",opts:_e.EquilibriumFilledTriangle},hidden:function(e){return Xj(e,"reaction-arrow-equilibrium-filled-triangle")}},"reaction-arrow-equilibrium-open-angle":{title:"Arrow Equilibrium Open Angle Tool",action:{tool:"reactionarrow",opts:_e.EquilibriumOpenAngle},hidden:function(e){return Xj(e,"reaction-arrow-equilibrium-open-angle")}},"reaction-arrow-unbalanced-equilibrium-filled-half-bow":{title:"Arrow Unbalanced Equilibrium Filled Half Bow Tool",action:{tool:"reactionarrow",opts:_e.UnbalancedEquilibriumFilledHalfBow},hidden:function(e){return Xj(e,"reaction-arrow-unbalanced-equilibrium-filled-half-bow")}},"reaction-arrow-unbalanced-equilibrium-open-half-angle":{title:"Arrow Unbalanced Equilibrium Open Half Angle Tool",action:{tool:"reactionarrow",opts:_e.UnbalancedEquilibriumOpenHalfAngle},hidden:function(e){return Xj(e,"reaction-arrow-unbalanced-equilibrium-open-half-angle")}},"reaction-arrow-unbalanced-equilibrium-large-filled-half-bow":{title:"Arrow Unbalanced Equilibrium Large Filled Half Bow Tool",action:{tool:"reactionarrow",opts:_e.UnbalancedEquilibriumLargeFilledHalfBow},hidden:function(e){return Xj(e,"reaction-arrow-unbalanced-equilibrium-large-filled-half-bow")}},"reaction-arrow-unbalanced-equilibrium-filled-half-triangle":{title:"Arrow Unbalanced Equilibrium Filled Half Triangle Tool",action:{tool:"reactionarrow",opts:_e.UnbalancedEquilibriumFilledHalfTriangle},hidden:function(e){return Xj(e,"reaction-arrow-unbalanced-equilibrium-filled-half-triangle")}},"reaction-arrow-elliptical-arc-arrow-filled-bow":{title:"Arrow Elliptical Arc Filled Bow Tool",action:{tool:"reactionarrow",opts:_e.EllipticalArcFilledBow},hidden:function(e){return Xj(e,"reaction-arrow-elliptical-arc-arrow-filled-bow")}},"reaction-arrow-elliptical-arc-arrow-filled-triangle":{title:"Arrow Elliptical Arc Filled Triangle Tool",action:{tool:"reactionarrow",opts:_e.EllipticalArcFilledTriangle},hidden:function(e){return Xj(e,"reaction-arrow-elliptical-arc-arrow-filled-triangle")}},"reaction-arrow-elliptical-arc-arrow-open-angle":{title:"Arrow Elliptical Arc Open Angle Tool",action:{tool:"reactionarrow",opts:_e.EllipticalArcOpenAngle},hidden:function(e){return Xj(e,"reaction-arrow-elliptical-arc-arrow-open-angle")}},"reaction-arrow-elliptical-arc-arrow-open-half-angle":{title:"Arrow Elliptical Arc Open Half Angle Tool",action:{tool:"reactionarrow",opts:_e.EllipticalArcOpenHalfAngle},hidden:function(e){return Xj(e,"reaction-arrow-elliptical-arc-arrow-open-half-angle")}},"reaction-plus":{title:"Reaction Plus Tool",action:{tool:"reactionplus"},hidden:function(e){return Xj(e,"reaction-plus")}},"reaction-mapping-tools":{hidden:function(e){return Xj(e,"reaction-mapping-tools")}},"reaction-map":{title:"Reaction Mapping Tool",action:{tool:"reactionmap"},hidden:function(e){return Xj(e,"reaction-map")}},"reaction-unmap":{title:"Reaction Unmapping Tool",action:{tool:"reactionunmap"},hidden:function(e){return Xj(e,"reaction-unmap")}},rgroup:{hidden:function(e){return Xj(e,"rgroup")}},"rgroup-label":{shortcut:"Mod+r",title:"R-Group Label Tool",action:{tool:"rgroupatom"},hidden:function(e){return Xj(e,"rgroup-label")}},"rgroup-fragment":{shortcut:["Mod+Shift+r","Mod+r"],title:"R-Group Fragment Tool",action:{tool:"rgroupfragment"},hidden:function(e){return Xj(e,"rgroup-fragment")}},"rgroup-attpoints":{shortcut:"Mod+r",title:"Attachment Point Tool",action:{tool:"apoint"},hidden:function(e){return Xj(e,"rgroup-attpoints")}},shapes:{hidden:function(e){return Xj(e,"shapes")}},"shape-ellipse":{title:"Shape Ellipse",action:{tool:"simpleobject",opts:Ae.ellipse},hidden:function(e){return Xj(e,"shape-ellipse")}},"shape-rectangle":{title:"Shape Rectangle",action:{tool:"simpleobject",opts:Ae.rectangle},hidden:function(e){return Xj(e,"shape-rectangle")}},"shape-line":{title:"Shape Line",action:{tool:"simpleobject",opts:Ae.line},hidden:function(e){return Xj(e,"shape-line")}},text:{title:"Add text",action:{tool:"text"},hidden:function(e){return Xj(e,"text")}},bonds:{hidden:function(e){return Xj(e,"bonds")}}},bB={single:"1",double:"2",triple:"3",up:"1",down:"1",updown:"1",crossed:"2",any:"0",aromatic:"4"},xB=eB.properties.type,_B=xB.enum.reduce((function(e,t,n){return e["bond-".concat(t)]={title:"".concat(xB.enumNames[n]," Bond"),shortcut:bB[t],action:{tool:"bond",opts:dB(t)},hidden:function(e){return Xj(e,"bond-".concat(t))}},e}),yB),wB=["rescale","fragment"];function SB(e){return e&&e.dialog?{type:"MODAL_OPEN",data:{name:e.dialog,prop:e.prop}}:e&&e.thunk?e.thunk:{type:"ACTION",action:e}}function EB(e,t,n){if("string"===typeof e){var r=n=n||{};r.rescale,r.fragment;var i=(0,N.Z)(r,wB),o=fr(e);return new cr(t).create(o,i).getStructureFromStringAsync(e)}return Promise.resolve(e)}function kB(e,t){return function(){var n=a(u().mark((function n(r,i){var o,a,s,l,c,f,h,d,p;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=i(),a=o.editor,s=o.server,l=a.errorHandler,t=t||{},r(qD(!0)),n.prev=6,n.next=9,EB(e,s,t);case 9:if(c=n.sent,f=t.fragment,h=c.sgroups.some((function(e){return!YD[e.type]})),!h){n.next=16;break}return n.next=15,a.event.confirm.dispatch();case 15:c.sgroups=c.sgroups.filter((function(e,t){return YD[t.type]}));case 16:c.rescale(),a.struct().atoms.size&&(d=a.struct().clone(),c.sgroups.forEach((function(e,t){var n=me.getOffset(d.sgroups.get(t)),r=new ee(e.atoms),i=me.getCrossBonds(c,r);me.bracketPos(e,c,i),n&&e.updateOffset(n)}))),c.findConnectedComponents(),c.setImplicitHydrogen(),p=Ha(c,Array.from(c.bonds.values())),c.atoms.forEach((function(e,t){if(0===c.atomGetNeighbors(t).length)e.stereoLabel=null,e.stereoParity=0;else{var n=p.get(t);n&&(e.stereoLabel=n.stereoLabel,e.stereoParity=n.stereoParity)}})),c.markFragments(),f?c.isBlank()?r({type:"ACTION",action:_B["select-lasso"].action}):r(SB({tool:"paste",opts:c})):a.struct(c),r(qD(!1)),r({type:"MODAL_CLOSE"}),n.next=32;break;case 28:n.prev=28,n.t0=n.catch(6),r(qD(!1)),n.t0&&l(n.t0.message);case 32:case"end":return n.stop()}}),n,null,[[6,28]])})));return function(e,t){return n.apply(this,arguments)}}()}function OB(e){return function(t,n){var r=n(),i=r.editor,o=r.server,a=function(e,t){var n={};if(t.includes("chiral_flag")&&Array.from(e.frags.values()).some((function(e){return!!e&&"abs"===e.enhancedStereoFlag}))&&(n.chiral_flag="Chiral flag is present on the canvas"),t.includes("valence")){var r=0;e.atoms.forEach((function(e){return e.badConn&&r++})),r>0&&(n.valence="Structure contains ".concat(r," atom").concat(1!==r?"s":""," with bad valence"))}return n}(i.struct(),e),s=n().options.getServerSettings();return s.data={types:(0,F.without)(["valence","chiral_flag"],e)},CB(i,o,"check",s).then((function(e){e=Object.assign(e,a),t({type:"UPDATE_FORM",data:{moleculeErrors:e}})})).catch((function(e){i.errorHandler(e)}))}}function AB(e,t,n){return function(r,i){var o=i(),a=o.options.getServerSettings();a.data=t,r(WD(!0)),CB(o.editor,o.server,e,a,n).then((function(t){var n=(new at).deserialize(t.struct);return r(kB(n,{rescale:"layout"===e,reactionRelayout:"clean"===e}))})).catch((function(e){o.editor.errorHandler(e)})).finally((function(){r(WD(!1))}))}}function CB(e,t,n,r,i){var o=e.selection(),a=[],s=new Map,u=(i||e.struct()).clone(null,null,!1,s);o&&(a=(o.atoms?o.atoms:e.explicitSelected().atoms).map((function(e){return s.get(e)})));var l=new at;return t.then((function(){return t[n](Object.assign({struct:l.serialize(u)},"calculate"!==n&&"check"!==n?{output_format:_n.KET}:null,a&&a.length>0?{selected:a}:null,r.data),(0,F.omit)("data",r))}))}var MB={layout:{shortcut:"Mod+l",title:"Layout",action:{thunk:AB("layout")},disabled:function(e,t,n){return!n.app.server},hidden:function(e){return Xj(e,"layout")}},clean:{shortcut:"Mod+Shift+l",title:"Clean Up",action:{thunk:AB("clean")},disabled:function(e,t,n){return!n.app.server},hidden:function(e){return Xj(e,"clean")}},arom:{title:"Aromatize",action:{thunk:AB("aromatize")},disabled:function(e,t,n){return!n.app.server},hidden:function(e){return Xj(e,"arom")}},dearom:{title:"Dearomatize",action:{thunk:AB("dearomatize")},disabled:function(e,t,n){return!n.app.server},hidden:function(e){return Xj(e,"dearom")}},cip:{shortcut:"Mod+p",title:"Calculate CIP",action:{thunk:AB("calculateCip")},disabled:function(e,t,n){return!n.app.server},hidden:function(e){return Xj(e,"cip")}},check:{title:"Check Structure",action:{dialog:"check"},disabled:function(e,t,n){return!n.app.server},hidden:function(e){return Xj(e,"check")}},analyse:{title:"Calculated Values",action:{dialog:"analyse"},disabled:function(e,t,n){return!n.app.server},hidden:function(e){return Xj(e,"analyse")}},recognize:{title:"Recognize Molecule",action:{dialog:"recognize"},disabled:function(e,t,n){var r;return!n.app.server||!(null!==(r=n.app.imagoVersions)&&void 0!==r&&r.length)>0},hidden:function(e){return Xj(e,"recognize")}},miew:{title:"3D Viewer",action:{dialog:"miew"},hidden:function(e){return Xj(e,"miew")}}},TB=new fn,PB=["Benzene\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  6  6  0  0  0  0            999 V2000\n    0.6548    2.2452    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    2.0813    2.2456    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    1.3694    2.6575    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    2.0813    1.4204    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    0.6548    1.4167    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    1.3712    1.0086    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  3  1  2  0     0  0\n  4  2  2  0     0  0\n  1  5  1  0     0  0\n  2  3  1  0     0  0\n  5  6  2  0     0  0\n  6  4  1  0     0  0\nM  END","Cyclopentadiene\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  5  5  0  0  0  0            999 V2000\n    3.8091    8.2444    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    4.3091    6.7055    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    4.6181    7.6510    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.3091    6.7055    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.0000    7.6510    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  1  5  1  0     0  0\n  2  3  2  0     0  0\n  3  1  1  0     0  0\n  4  2  1  0     0  0\n  5  4  2  0     0  0\nM  END","Cyclohexane\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  6  6  0  0  0  0            999 V2000\n    2.5500    3.6722    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    2.5500    2.6722    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.4160    2.1722    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    4.2820    2.6722    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    4.2820    3.6722    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.4160    4.1722    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  1  6  1  0     0  0\n  1  2  1  0     0  0\n  2  3  1  0     0  0\n  3  4  1  0     0  0\n  4  5  1  0     0  0\n  5  6  1  0     0  0\nM  END","Cyclopentane\n  Ketcher 11161218352D 1   1.00000     0.00000     0\n\n  5  5  0     0  0            999 V2000\n    0.8090    1.5389    0.0000 C   0  0  0  0  0  0        0  0  0\n    1.6180    0.9511    0.0000 C   0  0  0  0  0  0        0  0  0\n    1.3090    0.0000    0.0000 C   0  0  0  0  0  0        0  0  0\n    0.3090    0.0000    0.0000 C   0  0  0  0  0  0        0  0  0\n    0.0000    0.9511    0.0000 C   0  0  0  0  0  0        0  0  0\n  1  2  1  0     0  0\n  2  3  1  0     0  0\n  3  4  1  0     0  0\n  4  5  1  0     0  0\n  5  1  1  0     0  0\nM  END","Cyclopropane\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  3  3  0  0  0  0            999 V2000\n    2.6123    1.5663    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.6098    1.5663    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.1111    2.4280    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  1  2  1  0     0  0\n  1  3  1  0     0  0\n  2  3  1  0     0  0\nM  END","Cyclobutane\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  4  4  0  0  0  0            999 V2000\n    3.4956    1.8862    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.4919    2.8804    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    2.4846    1.8991    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    2.4821    2.8804    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  1  2  1  0     0  0\n  1  3  1  0     0  0\n  2  4  1  0     0  0\n  3  4  1  0     0  0\nM  END","Cycloheptane\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  7  7  0  0  0  0            999 V2000\n   21.4111    6.3389    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   22.1938    6.9555    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   23.1653    6.7333    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   23.5987    5.8389    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   21.4166    5.3333    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   23.1660    4.9333    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   22.1938    4.7111    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  1  2  1  0     0  0\n  2  3  1  0     0  0\n  3  4  1  0     0  0\n  4  6  1  0     0  0\n  1  5  1  0     0  0\n  5  7  1  0     0  0\n  6  7  1  0     0  0\nM  END","Cyclooctane\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  8  8  0  0  0  0            999 V2000\n    2.9268    2.2122    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    2.9270    3.2099    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.6288    3.9118    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.6290    1.5102    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    4.6266    1.5102    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    5.3286    2.2122    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    5.3285    3.2099    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    4.6266    3.9119    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  1  2  1  0     0  0\n  2  3  1  0     0  0\n  1  4  1  0     0  0\n  4  5  1  0     0  0\n  5  6  1  0     0  0\n  6  7  1  0     0  0\n  7  8  1  0     0  0\n  8  3  1  0     0  0\nM  END"].map((function(e){return TB.deserialize(e)})),RB={"template-lib":{shortcut:"Shift+t",title:"Custom Templates",action:{dialog:"templates"},selected:function(e){return"classic"===e._tool.mode},disabled:function(e,t,n){return!n.app.templates},hidden:function(e){return Xj(e,"template-lib")}}},IB=PB.reduce((function(e,t,n){return e["template-".concat(n)]={title:"".concat(t.name),shortcut:"t",action:{tool:"template",opts:{struct:t}}},e}),RB),LB=[.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2,1.3,1.4,1.5,1.7,2,2.5,3,3.5,4],NB={zoom:{selected:function(e){return e.zoom()},hidden:function(e){return Xj(e,"zoom")}},"zoom-out":{shortcut:["-","_","Shift+-"],title:"Zoom Out",disabled:function(e){return e.zoom()<=LB[0]},action:function(e){var t=e.zoom(),n=(0,F.findLastIndex)((function(e){return e<=t}),LB);e.zoom(LB[LB[n]===t&&n>0?n-1:n])},hidden:function(e){return Xj(e,"zoom-out")}},"zoom-in":{shortcut:["+","=","Shift+="],title:"Zoom In",disabled:function(e){return LB[LB.length-1]<=e.zoom()},action:function(e){var t=e.zoom(),n=(0,F.findIndex)((function(e){return e>=t}),LB);e.zoom(LB[LB[n]===t&&n<LB.length-1?n+1:n])},hidden:function(e){return Xj(e,"zoom-in")}},"zoom-list":{hidden:function(e){return Xj(e,"zoom-list")}}},jB={help:{shortcut:["?","&","Shift+/"],action:function(){return function(){var e;return null===(e=window.open("https://github.com/epam/ketcher/blob/".concat("v2.5.0\n","/documentation/help.md#ketcher-overview")))||void 0===e?void 0:e.focus()}()},hidden:function(e){return Xj(e,"help")}}},DB={"functional-groups":{shortcut:"Shift+f",title:"Functional Groups",action:{dialog:"templates",prop:{tab:1}},selected:function(e){return"fg"===e._tool.mode},disabled:function(e,t,n){return!n.app.functionalGroups},hidden:function(e){return Xj(e,"functional-groups")}}},BB=function(){var e,t=document.querySelector(".Ketcher-root")||document.documentElement;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen&&document.exitFullscreen()||document.msExitFullscreen&&document.msExitFullscreen()||document.mozCancelFullScreen&&document.mozCancelFullScreen()||document.webkitExitFullscreen&&document.webkitExitFullscreen():(e=t).requestFullscreen&&e.requestFullscreen()||e.msRequestFullscreen&&e.msRequestFullscreen()||e.mozRequestFullScreen&&e.mozRequestFullScreen()||e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},zB={fullscreen:{title:"Fullscreen mode",action:function(){return BB()},hidden:function(e){return Xj(e,"fullscreen")}}};function FB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FB(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var UB,ZB,HB,GB,WB,qB,KB,YB,XB,$B,JB,QB,ez,tz,nz,rz,iz,oz,az,sz,uz,lz,cz,fz,hz,dz,pz,vz,mz,gz,yz,bz,xz,_z,wz,Sz,Ez,kz,Oz,Az,Cz,Mz,Tz,Pz,Rz,Iz,Lz,Nz,jz,Dz,Bz,zz,Fz,Vz,Uz,Zz,Hz,Gz,Wz,qz,Kz,Yz,Xz,$z,Jz,Qz,eF,tF,nF,rF,iF,oF,aF,sF,uF,lF,cF,fF,hF,dF,pF,vF,mF,gF,yF,bF,xF,_F,wF,SF,EF,kF,OF,AF,CF,MF,TF,PF,RF,IF,LF,NF,jF,DF,BF,zF,FF,VF,UF,ZF,HF,GF,WF,qF,KF,YF,XF,$F,JF,QF,eV,tV,nV,rV,iV,oV,aV,sV,uV,lV,cV,fV,hV,dV,pV,vV,mV,gV,yV,bV,xV,_V,wV,SV,EV,kV,OV,AV,CV,MV,TV,PV,RV,IV,LV,NV,jV,DV,BV,zV,FV,VV,UV,ZV,HV,GV,WV,qV,KV,YV,XV,$V,JV,QV,eU,tU,nU,rU,iU,oU,aU,sU,uU,lU,cU,fU,hU,dU,pU,vU,mU,gU,yU,bU,xU,_U,wU,SU,EU,kU,OU,AU,CU,MU,TU,PU,RU,IU,LU,NU,jU,DU,BU,zU,FU,VU,UU,ZU,HU,GU,WU,qU,KU,YU,XU,$U,JU,QU,eZ,tZ,nZ,rZ,iZ,oZ,aZ,sZ,uZ,lZ,cZ,fZ,hZ,dZ,pZ,vZ,mZ,gZ,yZ,bZ,xZ,_Z=VB(VB(VB(VB(VB(VB(VB(VB(VB({clear:{shortcut:"Mod+Delete",title:"Clear Canvas",action:{thunk:function(e,t){var n=t().editor;n.struct().isBlank()||n.struct(null),e({type:"ACTION",action:_B["select-lasso"].action})}},hidden:function(e){return Xj(e,"clear")}},open:{shortcut:"Mod+o",title:"Open\u2026",action:{dialog:"open"},hidden:function(e){return Xj(e,"open")}},save:{shortcut:"Mod+s",title:"Save As\u2026",action:{dialog:"save"},hidden:function(e){return Xj(e,"save")}},undo:{shortcut:"Mod+z",title:"Undo",action:function(e){e.undo()},disabled:function(e){return 0===e.historySize().undo},hidden:function(e){return Xj(e,"undo")}},redo:{shortcut:["Mod+Shift+z","Mod+y"],title:"Redo",action:function(e){e.redo()},disabled:function(e){return 0===e.historySize().redo},hidden:function(e){return Xj(e,"redo")}},cut:{shortcut:"Mod+x",title:"Cut",action:function(e){oD("cut")||SZ("Cut",e.errorHandler)},disabled:function(e){return!wZ(e)},hidden:function(e){return Xj(e,"cut")}},copies:{disabled:function(e){return!wZ(e)},hidden:function(e){return Xj(e,"copies")}},copy:{shortcut:"Mod+c",title:"Copy",action:function(e){oD("copy")||SZ("Copy",e.errorHandler)},disabled:function(e){return!wZ(e)},hidden:function(e){return Xj(e,"copy")}},"copy-image":{shortcut:"Mod+Shift+f",title:"Copy Image",action:function(){!function(){Yj.apply(this,arguments)}()},disabled:function(e){return!wZ(e)},hidden:function(e){return Xj(e,"copy-image")}},"copy-mol":{shortcut:"Mod+m",title:"Copy as MOL",action:function(){Kj("mol")},disabled:function(e){return!wZ(e)},hidden:function(e){return Xj(e,"copy-mol")}},"copy-ket":{shortcut:"Mod+Shift+k",title:"Copy as KET",action:function(){Kj("ket")},disabled:function(e){return!wZ(e)},hidden:function(e){return Xj(e,"copy-ket")}},paste:{shortcut:"Mod+v",title:"Paste",action:function(e){oD("paste")||SZ("Paste",e.errorHandler)},selected:function(e){var t=e.actions;return t&&t.active&&"paste"===t.active.tool},hidden:function(e){return Xj(e,"paste")}},settings:{title:"Settings",action:{dialog:"settings"},hidden:function(e){return Xj(e,"settings")}},about:{title:"About",action:{dialog:"about"},hidden:function(e){return Xj(e,"about")}},"reaction-automap":{title:"Reaction Auto-Mapping Tool",action:{dialog:"automap"},hidden:function(e){return Xj(e,"reaction-automap")},disabled:function(e,t,n){return!n.app.server||!e.struct().hasRxnArrow()}},"period-table":{title:"Periodic Table",action:{dialog:"period-table"},hidden:function(e){return Xj(e,"period-table")}},"extended-table":{title:"Extended Table",action:{dialog:"extended-table"},hidden:function(e){return Xj(e,"extended-table")}},"select-all":{title:"Select All",shortcut:"Mod+a",action:{thunk:function(e,t){t().editor.selection("all");var n=t().toolbar.visibleTools.select;e({type:"ACTION",action:_B[n].action})}},hidden:function(e){return Xj(e,"select-all")}},"deselect-all":{title:"Deselect All",shortcut:"Mod+Shift+a",action:function(e){e.selection(null)},hidden:function(e){return Xj(e,"deselect-all")}},"select-descriptors":{title:"Select descriptors",shortcut:"Mod+d",action:{thunk:function(e,t){var n=t().toolbar.visibleTools.select,r=t().editor;r.alignDescriptors(),r.selection("descriptors"),e({type:"ACTION",action:_B[n].action})}},hidden:function(e){return Xj(e,"select-descriptors")}},"any-atom":{title:"Any atom",action:{tool:"atom",opts:{label:"A",pseudo:"A",type:"gen"}},hidden:function(e){return Xj(e,"any-atom")}}},MB),$j),_B),qj),NB),IB),DB),zB),jB);function wZ(e){var t=e.selection();return t&&Object.keys(t).filter((function(e){return!["sgroupData"].includes(e)})).length>0}function SZ(e,t){t("This action is unavailable via menu.\nInstead, use shortcut to "+e+".")}function EZ(){return EZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EZ.apply(this,arguments)}function kZ(){return kZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kZ.apply(this,arguments)}function OZ(){return OZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OZ.apply(this,arguments)}function AZ(){return AZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AZ.apply(this,arguments)}function CZ(){return CZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CZ.apply(this,arguments)}function MZ(){return MZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MZ.apply(this,arguments)}function TZ(){return TZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TZ.apply(this,arguments)}function PZ(){return PZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PZ.apply(this,arguments)}function RZ(){return RZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RZ.apply(this,arguments)}function IZ(){return IZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IZ.apply(this,arguments)}function LZ(){return LZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LZ.apply(this,arguments)}function NZ(){return NZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NZ.apply(this,arguments)}function jZ(){return jZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jZ.apply(this,arguments)}function DZ(){return DZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DZ.apply(this,arguments)}function BZ(){return BZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BZ.apply(this,arguments)}function zZ(){return zZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zZ.apply(this,arguments)}function FZ(){return FZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FZ.apply(this,arguments)}function VZ(){return VZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VZ.apply(this,arguments)}function UZ(){return UZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UZ.apply(this,arguments)}function ZZ(){return ZZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZZ.apply(this,arguments)}function HZ(){return HZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HZ.apply(this,arguments)}function GZ(){return GZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GZ.apply(this,arguments)}function WZ(){return WZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WZ.apply(this,arguments)}function qZ(){return qZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qZ.apply(this,arguments)}function KZ(){return KZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KZ.apply(this,arguments)}function YZ(){return YZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YZ.apply(this,arguments)}function XZ(){return XZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XZ.apply(this,arguments)}function $Z(e){return eu.createElement("svg",XZ({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),kz||(kz=eu.createElement("path",{d:"M17.25 18.75H9V8.25h8.25v10.5zm0-12H9a1.5 1.5 0 00-1.5 1.5v10.5a1.5 1.5 0 001.5 1.5h8.25a1.5 1.5 0 001.5-1.5V8.25a1.5 1.5 0 00-1.5-1.5zm-2.25-3H6a1.5 1.5 0 00-1.5 1.5v10.5H6V5.25h9v-1.5z",fill:"currentcolor"})))}function JZ(){return JZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JZ.apply(this,arguments)}function QZ(){return QZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QZ.apply(this,arguments)}function eH(){return eH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eH.apply(this,arguments)}function tH(){return tH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tH.apply(this,arguments)}function nH(){return nH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nH.apply(this,arguments)}function rH(){return rH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rH.apply(this,arguments)}function iH(){return iH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iH.apply(this,arguments)}function oH(){return oH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oH.apply(this,arguments)}function aH(){return aH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aH.apply(this,arguments)}function sH(){return sH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sH.apply(this,arguments)}function uH(){return uH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uH.apply(this,arguments)}function lH(){return lH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lH.apply(this,arguments)}function cH(){return cH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cH.apply(this,arguments)}function fH(){return fH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fH.apply(this,arguments)}function hH(){return hH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hH.apply(this,arguments)}function dH(){return dH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dH.apply(this,arguments)}function pH(){return pH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pH.apply(this,arguments)}function vH(){return vH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vH.apply(this,arguments)}function mH(){return mH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mH.apply(this,arguments)}function gH(){return gH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gH.apply(this,arguments)}function yH(){return yH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yH.apply(this,arguments)}function bH(){return bH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bH.apply(this,arguments)}function xH(){return xH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xH.apply(this,arguments)}function _H(){return _H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_H.apply(this,arguments)}function wH(){return wH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wH.apply(this,arguments)}function SH(){return SH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SH.apply(this,arguments)}function EH(){return EH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EH.apply(this,arguments)}function kH(){return kH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kH.apply(this,arguments)}function OH(){return OH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OH.apply(this,arguments)}function AH(){return AH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AH.apply(this,arguments)}function CH(){return CH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CH.apply(this,arguments)}function MH(){return MH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MH.apply(this,arguments)}function TH(){return TH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TH.apply(this,arguments)}function PH(){return PH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PH.apply(this,arguments)}function RH(){return RH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RH.apply(this,arguments)}function IH(){return IH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IH.apply(this,arguments)}function LH(){return LH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LH.apply(this,arguments)}function NH(){return NH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NH.apply(this,arguments)}function jH(){return jH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jH.apply(this,arguments)}function DH(){return DH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DH.apply(this,arguments)}function BH(){return BH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BH.apply(this,arguments)}function zH(){return zH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zH.apply(this,arguments)}function FH(){return FH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FH.apply(this,arguments)}function VH(){return VH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VH.apply(this,arguments)}function UH(){return UH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UH.apply(this,arguments)}function ZH(){return ZH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZH.apply(this,arguments)}function HH(){return HH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HH.apply(this,arguments)}function GH(){return GH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GH.apply(this,arguments)}function WH(){return WH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WH.apply(this,arguments)}function qH(){return qH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qH.apply(this,arguments)}function KH(){return KH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KH.apply(this,arguments)}function YH(){return YH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YH.apply(this,arguments)}function XH(){return XH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XH.apply(this,arguments)}function $H(){return $H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$H.apply(this,arguments)}function JH(){return JH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JH.apply(this,arguments)}function QH(){return QH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QH.apply(this,arguments)}function eG(){return eG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eG.apply(this,arguments)}function tG(){return tG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tG.apply(this,arguments)}function nG(){return nG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nG.apply(this,arguments)}function rG(){return rG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rG.apply(this,arguments)}function iG(){return iG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iG.apply(this,arguments)}function oG(){return oG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oG.apply(this,arguments)}function aG(){return aG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aG.apply(this,arguments)}function sG(){return sG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sG.apply(this,arguments)}function uG(){return uG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uG.apply(this,arguments)}function lG(){return lG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lG.apply(this,arguments)}function cG(){return cG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cG.apply(this,arguments)}function fG(){return fG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fG.apply(this,arguments)}function hG(){return hG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hG.apply(this,arguments)}function dG(){return dG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dG.apply(this,arguments)}function pG(){return pG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pG.apply(this,arguments)}function vG(){return vG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vG.apply(this,arguments)}function mG(){return mG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mG.apply(this,arguments)}function gG(){return gG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gG.apply(this,arguments)}function yG(){return yG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yG.apply(this,arguments)}function bG(){return bG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bG.apply(this,arguments)}function xG(){return xG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xG.apply(this,arguments)}function _G(){return _G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_G.apply(this,arguments)}function wG(){return wG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wG.apply(this,arguments)}function SG(){return SG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SG.apply(this,arguments)}function EG(){return EG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EG.apply(this,arguments)}function kG(){return kG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kG.apply(this,arguments)}function OG(){return OG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OG.apply(this,arguments)}function AG(){return AG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AG.apply(this,arguments)}function CG(){return CG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CG.apply(this,arguments)}function MG(){return MG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MG.apply(this,arguments)}function TG(){return TG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TG.apply(this,arguments)}function PG(){return PG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PG.apply(this,arguments)}function RG(){return RG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RG.apply(this,arguments)}function IG(){return IG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IG.apply(this,arguments)}function LG(){return LG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LG.apply(this,arguments)}function NG(){return NG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NG.apply(this,arguments)}function jG(){return jG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jG.apply(this,arguments)}function DG(){return DG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DG.apply(this,arguments)}function BG(){return BG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BG.apply(this,arguments)}function zG(){return zG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zG.apply(this,arguments)}function FG(){return FG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FG.apply(this,arguments)}function VG(){return VG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VG.apply(this,arguments)}function UG(){return UG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UG.apply(this,arguments)}function ZG(){return ZG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZG.apply(this,arguments)}function HG(){return HG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HG.apply(this,arguments)}function GG(){return GG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GG.apply(this,arguments)}function WG(){return WG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WG.apply(this,arguments)}function qG(){return qG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qG.apply(this,arguments)}function KG(){return KG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KG.apply(this,arguments)}function YG(){return YG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YG.apply(this,arguments)}function XG(){return XG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XG.apply(this,arguments)}function $G(){return $G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$G.apply(this,arguments)}function JG(){return JG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JG.apply(this,arguments)}function QG(){return QG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QG.apply(this,arguments)}function eW(){return eW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eW.apply(this,arguments)}function tW(){return tW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tW.apply(this,arguments)}function nW(){return nW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nW.apply(this,arguments)}function rW(){return rW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rW.apply(this,arguments)}function iW(){return iW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iW.apply(this,arguments)}function oW(){return oW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oW.apply(this,arguments)}function aW(){return aW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aW.apply(this,arguments)}function sW(){return sW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sW.apply(this,arguments)}function uW(){return uW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uW.apply(this,arguments)}function lW(){return lW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lW.apply(this,arguments)}function cW(){return cW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cW.apply(this,arguments)}function fW(){return fW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fW.apply(this,arguments)}function hW(){return hW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hW.apply(this,arguments)}function dW(){return dW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dW.apply(this,arguments)}function pW(){return pW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pW.apply(this,arguments)}function vW(){return vW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vW.apply(this,arguments)}function mW(){return mW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mW.apply(this,arguments)}function gW(){return gW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gW.apply(this,arguments)}function yW(){return yW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yW.apply(this,arguments)}function bW(){return bW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bW.apply(this,arguments)}function xW(){return xW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xW.apply(this,arguments)}function _W(){return _W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_W.apply(this,arguments)}function wW(){return wW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wW.apply(this,arguments)}function SW(){return SW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SW.apply(this,arguments)}function EW(){return EW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EW.apply(this,arguments)}function kW(){return kW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kW.apply(this,arguments)}function OW(){return OW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OW.apply(this,arguments)}function AW(){return AW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AW.apply(this,arguments)}function CW(){return CW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CW.apply(this,arguments)}function MW(){return MW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MW.apply(this,arguments)}function TW(){return TW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TW.apply(this,arguments)}function PW(){return PW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PW.apply(this,arguments)}function RW(){return RW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RW.apply(this,arguments)}function IW(){return IW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IW.apply(this,arguments)}function LW(){return LW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LW.apply(this,arguments)}function NW(){return NW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NW.apply(this,arguments)}function jW(){return jW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jW.apply(this,arguments)}function DW(){return DW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DW.apply(this,arguments)}function BW(){return BW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BW.apply(this,arguments)}function zW(){return zW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zW.apply(this,arguments)}function FW(){return FW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FW.apply(this,arguments)}function VW(){return VW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VW.apply(this,arguments)}function UW(){return UW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UW.apply(this,arguments)}function ZW(){return ZW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZW.apply(this,arguments)}function HW(){return HW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HW.apply(this,arguments)}function GW(){return GW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GW.apply(this,arguments)}function WW(){return WW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WW.apply(this,arguments)}var qW={"\u03b1":function(e){return eu.createElement("svg",QG({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),EU||(EU=eu.createElement("path",{d:"M7.744 11.136a2.48 2.48 0 01-1.436-.443c-.412-.29-.733-.69-.963-1.202C5.115 8.98 5 8.391 5 7.727c0-.659.12-1.24.362-1.743A2.9 2.9 0 016.355 4.8c.423-.287.905-.43 1.445-.43.383 0 .72.072 1.01.216.29.143.537.341.741.597.208.256.378.553.511.89h.444l.251 1.637.835 3.29h-1.09l-.785-3.29a6.215 6.215 0 00-.191-.703 3.787 3.787 0 00-.337-.742 1.898 1.898 0 00-.528-.583 1.259 1.259 0 00-.763-.23c-.327 0-.614.098-.861.294a1.868 1.868 0 00-.575.805 3.195 3.195 0 00-.205 1.185c0 .437.065.83.196 1.18.134.35.318.625.554.827.236.199.511.298.827.298.287 0 .538-.078.754-.234.216-.157.4-.355.55-.597.15-.241.273-.493.366-.754.097-.264.168-.502.213-.712l.704-3.29h1.086l-.75 3.29-.251 1.658H10.1c-.137.338-.313.639-.529.903a2.268 2.268 0 01-.775.614c-.301.148-.652.22-1.053.217z"})))},"\u03b2":function(e){return eu.createElement("svg",eW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),kU||(kU=eu.createElement("path",{d:"M7.237 6.954h.84c.6 0 1.093.124 1.483.371.392.245.683.561.873.95.19.387.286.795.286 1.223 0 .498-.117.944-.35 1.339a2.53 2.53 0 01-.954.933c-.404.227-.862.34-1.377.34a2.75 2.75 0 01-.912-.157c-.298-.108-.568-.308-.81-.6l-.063.029V9.507c0 .264.064.508.192.733.127.224.31.403.545.537.236.133.517.2.844.2.338 0 .628-.07.87-.209.243-.142.432-.328.566-.558.133-.233.2-.487.2-.763 0-.272-.064-.522-.192-.75a1.44 1.44 0 00-1.3-.759h-.74v-.984zm.465-3.8c.397 0 .758.062 1.082.187.324.122.602.291.835.507.233.213.412.459.537.737.125.279.188.573.188.882 0 .375-.095.745-.286 1.108a2.313 2.313 0 01-.852.904c-.378.238-.852.358-1.423.358h-.546v-.96h.443c.316 0 .579-.063.789-.191.21-.13.368-.295.473-.494.105-.202.157-.41.157-.627a1.16 1.16 0 00-.4-.903c-.264-.239-.597-.358-.997-.358-.267 0-.51.055-.729.166-.219.11-.393.269-.524.473-.13.202-.196.438-.196.707v8.804H5V5.617c0-.483.118-.909.354-1.278.235-.372.557-.662.963-.87.409-.21.87-.315 1.385-.315z"})))},"\u03b3":function(e){return eu.createElement("svg",tW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),OU||(OU=eu.createElement("path",{d:"M5 4h1.338l1.573 4.828L9.44 4h1.337L8.52 10.435V13H7.276v-2.565L5 4z"})))},"\u03b4":function(e){return eu.createElement("svg",nW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),AU||(AU=eu.createElement("path",{d:"M6.271 4.585a1.474 1.474 0 01.614-1.244c.415-.313.983-.469 1.704-.469.299 0 .57.026.814.077.245.048.502.12.772.217v1.12a5.532 5.532 0 00-.678-.208 3.45 3.45 0 00-.848-.107c-.332 0-.585.057-.758.171a.517.517 0 00-.162.746c.062.105.177.214.345.328.167.11.41.223.729.336.897.313 1.555.745 1.973 1.296.417.551.626 1.223.626 2.016v.119c0 .6-.118 1.136-.354 1.61a2.693 2.693 0 01-1.005 1.117c-.435.273-.954.41-1.556.41-.616 0-1.145-.136-1.585-.406a2.67 2.67 0 01-1.006-1.108c-.233-.468-.35-.998-.35-1.589v-.12c0-.443.086-.85.257-1.222.17-.373.399-.686.686-.942.29-.256.609-.426.958-.511l-.004-.035a2.157 2.157 0 01-.86-.647 1.533 1.533 0 01-.312-.955zm.652 4.253v.11c0 .384.056.732.166 1.045.114.312.286.562.516.75.233.184.527.277.882.277.35 0 .638-.092.865-.277a1.67 1.67 0 00.507-.75c.111-.313.167-.66.167-1.044v-.111c0-.307-.064-.607-.192-.9a2.221 2.221 0 00-.541-.758 1.648 1.648 0 00-.806-.413c-.355 0-.648.095-.878.285-.23.188-.402.438-.515.75a3.01 3.01 0 00-.17 1.036z"})))},"\u03b5":function(e){return eu.createElement("svg",rW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),CU||(CU=eu.createElement("path",{d:"M8.06 8.582h1.027v.55h-.831c-.276 0-.52.043-.733.128-.21.085-.377.203-.499.353a.802.802 0 00-.179.52c0 .27.135.493.405.67.27.173.635.26 1.095.26.452 0 .797-.08 1.036-.24.238-.158.392-.4.46-.724h1.283a1.955 1.955 0 01-.269.844c-.148.25-.345.463-.592.64-.245.172-.53.306-.857.4-.324.09-.679.136-1.065.136a4.065 4.065 0 01-1.423-.234c-.418-.156-.749-.377-.993-.66a1.498 1.498 0 01-.362-1.002c0-.193.038-.387.115-.58.08-.193.211-.369.396-.528.187-.16.442-.287.763-.384.324-.1.731-.149 1.223-.149zm1.027.269H8.06c-.472 0-.863-.047-1.172-.141-.31-.094-.553-.216-.729-.366a1.332 1.332 0 01-.375-.508 1.557 1.557 0 01-.106-.554c0-.403.112-.747.336-1.03.225-.288.536-.506.933-.657.398-.15.858-.226 1.381-.226.503 0 .948.077 1.334.23.39.15.7.37.933.656.233.285.37.627.413 1.027H9.723a.957.957 0 00-.456-.634c-.245-.157-.567-.235-.968-.235-.42 0-.751.087-.993.26-.241.173-.363.392-.366.656.003.248.115.446.337.597.221.148.548.222.98.222h.83v.703z"})))},"\u03b6":function(e){return eu.createElement("svg",iW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),MU||(MU=eu.createElement("path",{d:"M10.04 3.273h.711v.835L8.69 6.746c-.299.386-.556.726-.772 1.018a3.98 3.98 0 00-.494.87c-.114.29-.17.628-.17 1.014 0 .281.085.526.255.733.17.204.408.35.712.439l.677.204c.515.154.914.354 1.198.601.284.245.426.514.426.81 0 .295-.105.604-.315.925-.21.32-.499.622-.865.903l-.712-.58c.176-.19.31-.374.4-.553.094-.18.143-.333.145-.46.003-.114-.068-.225-.213-.333a1.833 1.833 0 00-.596-.264l-.499-.141c-.6-.165-1.065-.439-1.398-.822a2.003 2.003 0 01-.498-1.356c0-.366.037-.7.11-1 .077-.305.187-.595.329-.87.142-.276.315-.55.52-.823.204-.275.437-.568.698-.878l2.412-2.91zm-4.505 0h4.709v1.13H5.535v-1.13z"})))},"\u03b7":function(e){return eu.createElement("svg",oW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),TU||(TU=eu.createElement("path",{d:"M6.13 7.113V11H4.855V4.454h1.223V5.52h.081c.154-.35.391-.628.712-.836.321-.21.727-.315 1.219-.315.449 0 .84.094 1.172.281.335.185.595.46.78.827.184.367.277.82.277 1.36v6.617H9.043V6.99c0-.475-.123-.845-.37-1.112-.245-.27-.584-.405-1.019-.405-.292 0-.554.064-.784.192a1.37 1.37 0 00-.545.562c-.131.244-.196.54-.196.886z"})))},"\u03b8":function(e){return eu.createElement("svg",aW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),PU||(PU=eu.createElement("path",{d:"M10.611 7.172v1.082H6.388V7.172h4.223zm.66-.09v1.193c0 .878-.116 1.601-.349 2.17-.23.568-.554.99-.971 1.265-.418.273-.907.41-1.466.41-.56 0-1.051-.137-1.475-.41-.423-.276-.753-.697-.988-1.266-.236-.568-.354-1.29-.354-2.169V7.082c0-.87.116-1.584.35-2.143.232-.56.56-.975.98-1.245.42-.27.91-.404 1.47-.404.565 0 1.056.134 1.474.404.42.27.747.685.98 1.245.233.56.35 1.274.35 2.143zm-1.27 1.398V6.873c0-.55-.063-1.011-.191-1.38-.128-.372-.307-.65-.537-.836a1.237 1.237 0 00-.805-.28c-.46 0-.833.212-1.117.638-.284.427-.426 1.046-.426 1.858V8.48c0 .818.144 1.447.43 1.888.29.44.667.66 1.13.66.307 0 .572-.096.797-.29.227-.193.403-.478.528-.856.128-.38.192-.848.192-1.402z"})))},"\u03b9":function(e){return eu.createElement("svg",sW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),RU||(RU=eu.createElement("path",{d:"M6.875 5.455h1.257l-.008 4.78c.002.293.076.484.221.572.148.085.318.128.512.128.093 0 .187-.009.28-.026a4.19 4.19 0 00.218-.043v1.079a3.083 3.083 0 01-.925.136c-.457 0-.83-.133-1.12-.4-.29-.268-.435-.725-.435-1.373V5.455z"})))},"\u03ba":function(e){return eu.createElement("svg",uW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),IU||(IU=eu.createElement("path",{d:"M6.354 5.455V12H4.969V5.455h1.385zm4.423 0L7.611 9.324H5.987l-.196-1.24h1.16l2.121-2.63h1.705zM9.009 12L6.805 9.226l1.002-.86L10.76 12H9.009z"})))},"\u03bb":function(e){return eu.createElement("svg",lW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),LU||(LU=eu.createElement("path",{d:"M10.18 12.094c-.35 0-.657-.097-.921-.29-.261-.196-.465-.492-.61-.886L7.236 6.873 6.792 5.8l-.252-.648c-.11-.281-.227-.492-.35-.63a.698.698 0 00-.447-.244c-.176-.022-.4.002-.673.073L4.763 3.29a2.02 2.02 0 01.337-.094c.142-.028.3-.043.477-.043.492 0 .908.128 1.249.384.34.253.606.632.797 1.138l2.151 5.774c.06.156.124.288.192.396.068.108.186.162.354.162.031 0 .07-.001.115-.004l.102-.013.205 1.035c-.083.023-.175.04-.277.052-.1.014-.195.02-.286.017zM4.37 12l2.57-6.916.652 2.267h-.265L5.722 12h-1.35z"})))},"\u03bc":function(e){return eu.createElement("svg",cW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),NU||(NU=eu.createElement("path",{d:"M4.855 14.429V5.455H6.13v3.83c0 .324.07.61.208.857.142.247.34.44.593.58.255.136.552.204.89.204.338 0 .634-.07.887-.209.255-.139.453-.33.592-.575.142-.247.213-.533.213-.856V5.455h1.274V12H9.534v-.959h-.05c-.16.324-.388.573-.687.746-.298.17-.623.256-.976.256-.352 0-.677-.086-.975-.256a1.774 1.774 0 01-.69-.746h-.052v3.388H4.855z"})))},"\u03bd":function(e){return eu.createElement("svg",fW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),jU||(jU=eu.createElement("path",{d:"M6.804 12L4.371 5.455h1.355l1.794 5.237h.068c.33-.529.6-1.013.81-1.453a8.19 8.19 0 00.494-1.27c.12-.406.205-.813.256-1.219.054-.406.09-.838.107-1.295h1.257a9.816 9.816 0 01-.631 3.34C9.471 9.913 8.867 10.98 8.066 12H6.804z"})))},"\u03be":function(e){return eu.createElement("svg",hW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),DU||(DU=eu.createElement("path",{d:"M10.635 3.418l-.204 1.073c-.517-.147-.969-.221-1.355-.221-.324 0-.601.041-.831.123-.23.083-.407.205-.529.367a.945.945 0 00-.179.584c0 .36.147.636.44.826.292.19.707.286 1.244.286h.86v.805h-.89c-.628 0-1.17-.08-1.624-.238-.452-.162-.8-.392-1.044-.69a1.664 1.664 0 01-.366-1.083c0-.42.119-.787.358-1.1.241-.315.576-.56 1.005-.732.432-.177.933-.265 1.505-.265.3 0 .59.023.869.068.281.046.528.111.741.197zM9.203 6.784h.878v.793h-.843c-.458 0-.846.065-1.164.196-.315.127-.554.32-.716.575-.162.253-.243.57-.243.954 0 .42.127.77.38 1.049.255.278.633.476 1.133.592l.678.154c.568.13.974.298 1.219.502a.982.982 0 01.366.789c-.006.21-.058.429-.158.656a2.838 2.838 0 01-.405.665c-.173.219-.375.42-.605.605l-.758-.567c.238-.253.395-.459.469-.618a.963.963 0 00.11-.392.462.462 0 00-.183-.388c-.122-.093-.33-.173-.622-.238l-.575-.167c-.841-.193-1.458-.49-1.85-.89-.389-.4-.584-.938-.584-1.61 0-.873.297-1.534.891-1.982.597-.452 1.457-.678 2.582-.678z"})))},"\u03bf":function(e){return eu.createElement("svg",dW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),BU||(BU=eu.createElement("path",{d:"M7.614 12.132c-.614 0-1.15-.14-1.607-.422a2.845 2.845 0 01-1.065-1.18c-.253-.506-.38-1.097-.38-1.773 0-.68.127-1.273.38-1.781A2.84 2.84 0 016.007 5.79c.457-.281.993-.422 1.607-.422.613 0 1.149.14 1.606.422.458.281.813.676 1.066 1.185.252.508.379 1.102.379 1.78 0 .677-.127 1.268-.38 1.774-.252.505-.607.899-1.065 1.18-.457.281-.993.422-1.606.422zm.004-1.07c.398 0 .727-.105.989-.315.26-.21.454-.49.58-.84.127-.349.19-.734.19-1.154 0-.418-.063-.801-.19-1.15a1.874 1.874 0 00-.58-.849c-.262-.213-.591-.32-.99-.32-.4 0-.732.107-.996.32a1.904 1.904 0 00-.584.848c-.125.35-.188.733-.188 1.15 0 .421.063.806.188 1.155.128.35.322.63.584.84.264.21.596.315.997.315z"})))},"\u03c0":function(e){return eu.createElement("svg",pW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),zU||(zU=eu.createElement("path",{d:"M11.251 5.455v1.07H4.535v-1.07h6.716zm-4.457 0V12H5.537V5.455h1.257zm2.224 0h1.257v4.78c0 .197.033.345.098.444.068.1.157.168.264.205.111.034.23.05.358.05.094 0 .188-.008.282-.025.096-.017.173-.031.23-.043v1.07c-.108.031-.24.063-.397.094a2.579 2.579 0 01-.545.051c-.457 0-.83-.133-1.116-.4-.285-.268-.428-.725-.43-1.373V5.455z"})))},"\u03c1":function(e){return eu.createElement("svg",vW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),FU||(FU=eu.createElement("path",{d:"M5.805 14.437v-5.83c0-.715.116-1.313.35-1.793.235-.48.56-.841.975-1.083.415-.241.89-.362 1.423-.362.469 0 .878.087 1.228.26.349.17.642.413.877.729.236.315.412.689.529 1.12.12.43.179.902.179 1.42v.119c0 .608-.107 1.145-.32 1.61-.213.467-.517.832-.912 1.096-.392.264-.86.396-1.406.396-.466 0-.852-.1-1.16-.298a2.274 2.274 0 01-.75-.84 6.241 6.241 0 01-.498-1.274l.716-.66c0 .204.024.422.073.652.048.23.13.446.247.647.116.202.273.368.469.499.198.128.447.192.745.192.358 0 .648-.095.87-.286.224-.19.387-.439.49-.745.102-.307.153-.637.153-.99v-.118c0-.45-.054-.856-.162-1.22-.105-.363-.271-.651-.498-.864-.228-.213-.523-.32-.887-.32-.358 0-.649.107-.873.32-.222.21-.382.48-.482.81-.1.329-.148.671-.145 1.026l.026 5.787H5.805z"})))},"\u03c3":function(e){return eu.createElement("svg",mW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),VU||(VU=eu.createElement("path",{d:"M4.715 8.898V8.76c0-.585.115-1.112.345-1.58.23-.47.563-.84.997-1.113.435-.272.959-.409 1.573-.409a.659.659 0 01.315.18c.1.09.214.19.345.302.13.108.301.2.511.277.336.13.633.32.891.57.261.25.466.549.614.896.148.343.221.721.221 1.133v.12a3.25 3.25 0 01-.34 1.474 2.737 2.737 0 01-.98 1.095c-.43.276-.95.413-1.56.413-.62 0-1.148-.142-1.586-.426a2.79 2.79 0 01-1.001-1.155 3.786 3.786 0 01-.345-1.64zM6.1 8.76v.137c0 .383.05.736.153 1.057.105.32.271.58.499.775.227.193.525.29.895.29.355 0 .642-.097.86-.29.222-.196.383-.454.482-.775.102-.321.153-.674.153-1.057V8.76c0-.357-.05-.688-.153-.992a1.546 1.546 0 00-.486-.733c-.221-.185-.513-.277-.873-.277-.361 0-.654.092-.878.277-.225.184-.39.429-.495.733a3.02 3.02 0 00-.157.992zm4.913-3.102v1.1H7.63v-1.1h3.383z"})))},"\u03c4":function(e){return eu.createElement("svg",gW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),UU||(UU=eu.createElement("path",{d:"M10.769 5.455v1.099H5.246v-1.1h5.523zm-3.456 0H8.57v4.828c0 .224.031.388.094.49.062.1.14.163.234.191.097.026.195.039.294.039a.868.868 0 00.307-.051c.09-.034.172-.068.243-.102l.243.98c-.193.122-.378.2-.554.234a2.7 2.7 0 01-.563.055c-.503 0-.888-.147-1.155-.443-.267-.295-.4-.773-.4-1.432v-4.79z"})))},"\u03c5":function(e){return eu.createElement("svg",yW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),ZU||(ZU=eu.createElement("path",{d:"M4.855 5.455h1.258V9.51c0 .378.054.678.161.9.108.221.25.38.422.477.177.096.363.145.559.145.335 0 .629-.108.882-.324.253-.216.45-.502.592-.857.142-.358.213-.75.213-1.176a6.797 6.797 0 00-.106-1.057 11.837 11.837 0 00-.6-2.165h1.26c.122.24.234.536.337.891a8.5 8.5 0 01.345 2.331c0 .458-.056.894-.166 1.308a3.254 3.254 0 01-.512 1.104c-.233.318-.532.57-.899.754-.363.185-.798.277-1.304.277-.727 0-1.317-.21-1.768-.63-.45-.42-.674-1.086-.674-1.995v-4.04z"})))},"\u03c6":function(e){return eu.createElement("svg",bW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),HU||(HU=eu.createElement("path",{d:"M6.945 13.454V5.861c0-.503.143-.877.43-1.121.29-.247.693-.37 1.21-.37.56 0 1.063.141 1.509.425.449.284.804.675 1.065 1.172.261.497.392 1.065.392 1.705 0 .451-.07.885-.213 1.3-.14.411-.364.78-.673 1.103-.31.324-.718.58-1.223.767-.506.185-1.124.277-1.854.277-.724 0-1.337-.095-1.837-.285-.5-.194-.903-.456-1.21-.789a3.037 3.037 0 01-.665-1.155 4.572 4.572 0 01-.204-1.376c0-.457.055-.884.166-1.278.114-.398.277-.755.49-1.07.216-.315.476-.581.78-.797l.805.814c-.207.196-.383.41-.528.644a2.99 2.99 0 00-.328.767c-.077.278-.12.585-.128.92 0 .438.087.848.26 1.232.173.38.454.688.844.924.389.233.907.35 1.555.35.642 0 1.162-.11 1.56-.328.397-.222.689-.512.873-.87.188-.358.282-.741.282-1.15a3.215 3.215 0 00-.222-1.121 1.906 1.906 0 00-.571-.805 1.352 1.352 0 00-.882-.303c-.15 0-.263.047-.337.14a.523.523 0 00-.11.342v7.53H6.944z"})))},"\u03c7":function(e){return eu.createElement("svg",xW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),GU||(GU=eu.createElement("path",{d:"M4.697 13.454L7.518 8.17h.533l1.841 3.584c.097.19.18.328.252.413.073.086.16.14.26.162.099.023.24.034.421.034h.294v1.091h-.294c-.352 0-.643-.03-.873-.093a1.3 1.3 0 01-.597-.35c-.165-.17-.33-.419-.498-.746l-1.083-2.143-1.76 3.332H4.697zM7.4 9.436L5.67 6.159a3.734 3.734 0 00-.277-.46.424.424 0 00-.243-.175 1.87 1.87 0 00-.417-.034h-.295V4.399h.295c.352 0 .64.034.865.102.227.066.423.19.588.37.167.18.34.438.52.777l1.082 2.08L9.55 4.453h1.317L8.166 9.436H7.4z"})))},"\u03c8":function(e){return eu.createElement("svg",_W({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),WU||(WU=eu.createElement("path",{d:"M3.855 4.455h1.249v3.072c0 .61.115 1.1.345 1.466.233.364.543.626.93.788.386.16.809.239 1.27.239.644 0 1.167-.115 1.567-.345.4-.233.693-.533.878-.9.188-.369.281-.758.281-1.167a6.924 6.924 0 00-.064-.784 9.256 9.256 0 00-.37-1.62 9.22 9.22 0 00-.269-.75h1.244c.091.177.18.381.265.614.085.23.16.483.226.759.065.272.116.56.153.86.04.299.06.606.06.921 0 .46-.068.9-.205 1.321-.136.42-.356.795-.66 1.125-.302.33-.704.59-1.206.78-.5.19-1.115.285-1.846.285-.78 0-1.46-.125-2.036-.375a2.85 2.85 0 01-1.339-1.172c-.315-.53-.473-1.215-.473-2.053V4.455zm3.248 0h1.244v9.34H7.103v-9.34z"})))},"\u03c9":function(e){return eu.createElement("svg",wW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),qU||(qU=eu.createElement("path",{d:"M4.7 5.455h1.325A9.026 9.026 0 005.42 6.69a5.55 5.55 0 00-.298 1.053c-.054.332-.081.67-.081 1.014 0 .71.109 1.264.328 1.662.218.398.522.597.912.597.34 0 .613-.155.818-.465.204-.312.307-.765.307-1.36V7.113h.975v2.02c0 .625-.083 1.16-.251 1.607-.165.446-.412.788-.741 1.027-.327.236-.73.353-1.21.353-.506 0-.941-.132-1.305-.396-.36-.267-.637-.655-.83-1.163-.194-.509-.289-1.128-.286-1.858 0-.594.078-1.162.234-1.705.16-.542.395-1.057.708-1.542zm5.505 0h1.326c.31.485.544 1 .703 1.542.159.543.238 1.111.238 1.705.003.73-.093 1.35-.29 1.858-.193.508-.471.896-.835 1.163-.36.264-.794.396-1.3.396-.477 0-.88-.117-1.21-.353-.326-.239-.573-.581-.741-1.027-.165-.446-.247-.982-.247-1.607v-2.02h.971v2.08c0 .594.104 1.047.311 1.36.208.309.48.464.819.464.258 0 .48-.09.664-.269.185-.179.327-.436.426-.771.1-.338.15-.744.15-1.219a6.01 6.01 0 00-.085-1.014 5.32 5.32 0 00-.295-1.053 9.016 9.016 0 00-.605-1.235z"})))},"\u212b":function(e){return eu.createElement("svg",kW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),XU||(XU=eu.createElement("path",{d:"M5.415 12H4.25l2.617-7.273h1.268L10.752 12H9.587L7.531 6.048h-.057L5.414 12zm.195-2.848h3.778v.923H5.61v-.923zm1.893-4.897c-.291 0-.54-.102-.746-.305a1.002 1.002 0 01-.305-.736 1.026 1.026 0 01.518-.902c.161-.094.339-.142.533-.142.192 0 .367.048.525.142.161.093.29.218.384.377.095.158.142.334.142.525 0 .192-.047.367-.142.526a1.082 1.082 0 01-.384.376 1.026 1.026 0 01-.525.139zm0-.543a.49.49 0 00.497-.5.485.485 0 00-.142-.353.476.476 0 00-.355-.145.487.487 0 00-.5.5c0 .138.046.256.141.356a.469.469 0 00.359.142z"})))},"\xb0":function(e){return eu.createElement("svg",OW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),$U||($U=eu.createElement("path",{d:"M7.737 8.219c-.37 0-.706-.09-1.01-.269a2.093 2.093 0 01-.724-.728 1.954 1.954 0 01-.269-1.01c0-.37.09-.705.269-1.006.182-.304.423-.545.724-.724a1.93 1.93 0 011.01-.273c.37 0 .706.09 1.01.273.304.179.546.42.725.724.181.301.272.637.272 1.006 0 .37-.09.706-.272 1.01-.18.304-.42.547-.725.728-.304.18-.64.269-1.01.269zm0-.972a1 1 0 00.524-.14 1.042 1.042 0 00.371-1.415 1.009 1.009 0 00-.37-.37 1 1 0 00-.525-.141 1.042 1.042 0 00-.895.511c-.09.156-.136.33-.136.52a1.015 1.015 0 00.511.895c.157.093.33.14.52.14z"})))},"\u0127":function(e){return eu.createElement("svg",AW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),JU||(JU=eu.createElement("path",{d:"M6.13 9.114V13H4.858V4.273h1.257V7.52h.08c.154-.352.388-.632.704-.84.315-.207.727-.31 1.236-.31.448 0 .84.092 1.176.277.338.184.6.46.784.826.187.364.281.818.281 1.364V13H9.101V8.99c0-.48-.124-.852-.37-1.116-.248-.267-.592-.4-1.032-.4-.301 0-.571.063-.81.191a1.383 1.383 0 00-.558.562c-.134.245-.2.54-.2.887zM3.532 5.833V4.95h3.916v.882H3.531z"})))},"\xb1":function(e){return eu.createElement("svg",CW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),QU||(QU=eu.createElement("path",{d:"M5.168 12.616V11.5h5.66v1.116h-5.66zm0-3.477V8.035h5.66V9.14h-5.66zm2.254 1.654V6.386H8.57v4.407H7.422z"})))},"\u2030":function(e){return eu.createElement("svg",MW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),eZ||(eZ=eu.createElement("path",{d:"M7.397 11.364v-.46c0-.325.074-.618.222-.883.15-.264.362-.476.635-.635.273-.159.595-.238.967-.238.344 0 .64.08.89.238.25.16.443.371.576.635.136.264.205.558.205.882v.46c0 .325-.069.619-.205.883a1.589 1.589 0 01-.575.635c-.25.159-.547.238-.89.238-.373 0-.695-.08-.968-.238a1.703 1.703 0 01-.635-.635 1.776 1.776 0 01-.222-.882zm.976-.46v.46c0 .244.071.46.213.647.142.188.354.282.635.282s.49-.094.627-.282c.136-.187.204-.403.204-.647v-.46c0-.245-.07-.46-.209-.648-.139-.188-.346-.282-.622-.282-.281 0-.493.094-.635.282a1.044 1.044 0 00-.213.647zm1.85.46v-.46c0-.325.068-.618.204-.883.14-.264.334-.476.584-.635.253-.159.551-.238.895-.238.375 0 .699.08.971.238.273.16.483.371.631.635.148.264.222.558.222.882v.46c0 .325-.074.619-.222.883a1.64 1.64 0 01-.626.635c-.27.159-.59.238-.96.238-.346 0-.647-.08-.902-.238a1.642 1.642 0 01-.588-.635 1.931 1.931 0 01-.21-.882zm.835-.46v.46c0 .244.074.46.222.647.147.188.362.282.643.282.275 0 .483-.094.622-.282.14-.187.209-.403.209-.647v-.46c0-.245-.071-.46-.213-.648-.14-.188-.351-.282-.635-.282-.273 0-.482.094-.627.282a1.05 1.05 0 00-.221.647zM3.004 6.368v-.46c0-.33.068-.632.204-.908.14-.275.341-.495.606-.66.267-.165.59-.247.967-.247.386 0 .71.082.971.247.262.165.46.385.593.66.133.276.2.579.2.908v.46c0 .33-.068.632-.204.908a1.608 1.608 0 01-.597.66c-.261.165-.582.248-.963.248-.386 0-.712-.083-.976-.248a1.648 1.648 0 01-.597-.66 2.018 2.018 0 01-.204-.908zM4 5.91v.46c0 .245.057.466.17.665.117.199.32.298.61.298.284 0 .483-.1.596-.298.117-.199.175-.42.175-.665v-.46c0-.244-.055-.466-.166-.665-.11-.199-.312-.298-.605-.298-.284 0-.486.1-.605.298A1.29 1.29 0 004 5.91zM3.426 13l6-8.727h1.018l-6 8.727H3.426z"})))},"\u221a":function(e){return eu.createElement("svg",TW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),tZ||(tZ=eu.createElement("path",{d:"M7.494 11.611l2.484-7.338h1.27L8.201 13h-.89l.183-1.389zM6.65 8.449l1.112 3.196L7.958 13h-.852L5.351 8.45h1.3zM4.566 9.553V8.449h2.025v1.104H4.566z"})))},"\u2190":function(e){return eu.createElement("svg",PW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),nZ||(nZ=eu.createElement("path",{d:"M7.16 12.158L3.183 8.182l3.975-3.976.767.759-2.663 2.663h6.69v1.108h-6.69l2.663 2.659-.767.763z"})))},"\u2192":function(e){return eu.createElement("svg",RW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),rZ||(rZ=eu.createElement("path",{d:"M8.294 12.158l-.767-.759 2.663-2.663H3.5V7.628h6.69l-2.663-2.66.767-.762 3.976 3.976-3.976 3.976z"})))},"\u2190/":function(e){return eu.createElement("svg",IW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),iZ||(iZ=eu.createElement("path",{d:"M7.16 12.157L3.183 8.182l3.975-3.976.767.758-2.663 2.664h6.69v1.108h-6.69l2.663 2.659-.767.762z"})),oZ||(oZ=eu.createElement("path",{d:"M11.665 3.102l-5.843 9.46h-.664L11 3.102h.665z"})))},"/\u2192":function(e){return eu.createElement("svg",LW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),aZ||(aZ=eu.createElement("path",{d:"M8.294 12.157l-.767-.758 2.663-2.663H3.5V7.628h6.69l-2.663-2.66.767-.762 3.976 3.976-3.976 3.975z"})),sZ||(sZ=eu.createElement("path",{d:"M11.5 3.102l-5.842 9.46h-.665l5.842-9.46h.665z"})))},"\u2194":function(e){return eu.createElement("svg",NW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),uZ||(uZ=eu.createElement("path",{d:"M5.057 12.055L1.184 8.182l3.873-3.874.767.759-2.56 2.56h9.562l-2.561-2.56.767-.759 3.873 3.874-3.873 3.873-.767-.767 2.56-2.552H3.264l2.561 2.552-.767.767z"})))},"\u220f":function(e){return eu.createElement("svg",jW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),lZ||(lZ=eu.createElement("path",{d:"M10.413 3.727v8.377H9.255V4.636H6.123v7.468H4.969V3.727h5.444z"})))},"\u2211":function(e){return eu.createElement("svg",DW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),cZ||(cZ=eu.createElement("path",{d:"M11.184 11.405v.916H5.978v-.916h5.206zm-.309-7.678v.92H5.889v-.92h4.986zM9.678 7.875v.295l-3.434 4.15h-.72v-.738L8.527 8.02 5.523 4.476v-.749h.721l3.434 4.148z"})))},"\u221e":function(e){return eu.createElement("svg",BW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),fZ||(fZ=eu.createElement("path",{d:"M5.042 5.842c.324 0 .62.047.886.14.27.095.513.217.729.367.219.148.41.302.575.46.091.086.174.17.247.252.074.082.145.165.213.247.063-.082.127-.162.192-.238.068-.08.154-.167.256-.26.247-.242.554-.463.92-.665.37-.202.797-.303 1.283-.303.455 0 .868.111 1.24.333.375.218.672.512.89.882.222.37.333.778.333 1.227 0 .341-.064.66-.192.959a2.49 2.49 0 01-.528.78 2.455 2.455 0 01-1.743.712c-.324 0-.622-.046-.895-.137a3.256 3.256 0 01-.733-.358 4.588 4.588 0 01-.57-.447 6.736 6.736 0 01-.252-.265 7.034 7.034 0 01-.2-.251l-.218.251a5.09 5.09 0 01-.247.265 4.203 4.203 0 01-.571.447 3.27 3.27 0 01-.729.354 2.66 2.66 0 01-.886.14c-.46 0-.877-.109-1.249-.328a2.5 2.5 0 01-.89-.882 2.378 2.378 0 01-.333-1.24c0-.338.063-.653.188-.946.128-.295.304-.555.528-.78.227-.224.49-.399.789-.524a2.45 2.45 0 01.967-.192zM3.746 8.284c0 .236.059.45.175.644a1.3 1.3 0 001.12.63c.268 0 .514-.06.738-.179.225-.12.433-.27.627-.451a3.717 3.717 0 00.545-.644 6.678 6.678 0 00-.243-.303 2.94 2.94 0 00-.302-.323 2.64 2.64 0 00-.618-.452 1.538 1.538 0 00-.746-.188c-.239 0-.456.059-.652.175a1.3 1.3 0 00-.469.46c-.116.19-.175.4-.175.631zm7.875 0c0-.23-.058-.44-.174-.63a1.276 1.276 0 00-.46-.46 1.222 1.222 0 00-.644-.176c-.182 0-.355.029-.52.086-.165.056-.32.133-.464.23a2.7 2.7 0 00-.392.324c-.128.119-.24.241-.337.366-.097.122-.166.209-.209.26.071.1.15.203.239.311.088.105.19.216.307.333.19.181.397.332.622.451.227.12.479.18.754.18a1.276 1.276 0 001.104-.63c.116-.195.174-.41.174-.645z"})))},"\u2202":function(e){return eu.createElement("svg",zW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),hZ||(hZ=eu.createElement("path",{d:"M7.723 6.983c.335 0 .655.064.959.192.304.127.567.31.788.545-.07-.508-.209-.943-.413-1.304a2.336 2.336 0 00-.754-.83 1.746 1.746 0 00-.968-.29c-.278 0-.544.026-.797.08-.25.054-.507.13-.771.226l-.158-1.048c.256-.11.522-.205.797-.281.276-.08.63-.12 1.061-.12.739 0 1.354.196 1.846.588.494.392.863.946 1.107 1.662.248.713.371 1.55.371 2.51v.341c.003.744-.113 1.408-.35 1.99-.232.583-.569 1.041-1.01 1.377-.437.332-.964.498-1.58.498-.602 0-1.12-.135-1.556-.405a2.69 2.69 0 01-.997-1.108c-.23-.468-.345-.998-.345-1.589v-.136c0-.56.11-1.057.328-1.492.219-.437.534-.781.946-1.031.415-.25.914-.375 1.496-.375zm.17 1.1c-.366 0-.666.082-.899.246-.23.165-.4.387-.511.665a2.504 2.504 0 00-.162.92v.129c0 .363.054.694.162.992.11.299.278.537.503.716.227.18.518.269.873.269.358 0 .65-.104.878-.311.23-.21.4-.497.512-.861a4.22 4.22 0 00.166-1.232v-.494a1.371 1.371 0 00-.218-.426 1.443 1.443 0 00-.485-.426c-.213-.125-.486-.188-.819-.188z"})))},"\u2206":function(e){return eu.createElement("svg",FW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),dZ||(dZ=eu.createElement("path",{d:"M4.297 13l3.14-8.727H8.96L12.099 13H4.297zm1.79-1.133h4.227l-2.08-6.009h-.068l-2.08 6.009z"})))},"\u222b":function(e){return eu.createElement("svg",VW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),pZ||(pZ=eu.createElement("path",{d:"M8.35 12.473c0 .673-.171 1.189-.512 1.547-.341.358-.833.537-1.475.537a2.815 2.815 0 01-.75-.098l.098-1.07c.066.017.16.033.282.047.122.014.221.021.298.021.278 0 .483-.078.613-.234.131-.154.197-.392.197-.716V5.114c0-.722.178-1.276.536-1.662.361-.387.88-.58 1.556-.58.145 0 .29.011.434.034.148.023.3.053.457.09L9.943 4.03a2.127 2.127 0 00-.328-.038 6.799 6.799 0 00-.397-.013c-.298 0-.518.087-.66.26-.14.17-.209.439-.209.805v7.428z"})))},"\u2248":function(e){return eu.createElement("svg",UW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),vZ||(vZ=eu.createElement("path",{d:"M4.965 8.178c-.003-.495.074-.894.23-1.198.16-.307.37-.531.635-.673.267-.142.558-.213.874-.213.29 0 .55.06.784.183.235.12.505.305.81.558.204.17.369.291.494.362a.814.814 0 00.409.107c.236 0 .42-.085.554-.256.136-.17.201-.42.196-.75h1.078c.008.489-.068.888-.23 1.198-.16.307-.374.534-.644.682-.267.144-.56.217-.878.217-.28 0-.54-.058-.78-.175-.238-.116-.512-.308-.822-.575a3.4 3.4 0 00-.477-.358.793.793 0 00-.4-.102.709.709 0 00-.55.234c-.142.153-.21.406-.205.759H4.965zm0 2.642c-.003-.495.074-.894.23-1.198.16-.307.37-.531.635-.673.267-.142.558-.213.874-.213.29 0 .55.06.784.183.235.12.505.305.81.558.204.17.369.291.494.362a.814.814 0 00.409.107c.236 0 .42-.085.554-.256.136-.17.201-.42.196-.75h1.078c.008.489-.068.888-.23 1.198-.16.307-.374.534-.644.682-.267.144-.56.217-.878.217-.28 0-.54-.058-.78-.175-.238-.116-.512-.308-.822-.575a3.405 3.405 0 00-.477-.358.793.793 0 00-.4-.102.709.709 0 00-.55.234c-.142.153-.21.406-.205.759H4.965z"})))},"=/":function(e){return eu.createElement("svg",ZW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),mZ||(mZ=eu.createElement("path",{d:"M8.67 5.399h1.164l-2.502 6.328H6.17L8.67 5.4zM5.266 7.81V6.69h5.458v1.12H5.266zm0 2.625v-1.12h5.458v1.12H5.266z"})))},"\u2264":function(e){return eu.createElement("svg",HW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),gZ||(gZ=eu.createElement("path",{d:"M10.827 11.616H5.168V10.5h5.66v1.116zm-5.659-3.57V7.09l5.66-1.858v1.159l-3.879 1.16.043-.078v.188l-.043-.077 3.878 1.16v1.158L5.168 8.045z"})))},"\u2265":function(e){return eu.createElement("svg",GW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),yZ||(yZ=eu.createElement("path",{d:"M5.168 11.616V10.5h5.66v1.116h-5.66zm5.66-3.57l-5.66 1.857V8.744l3.874-1.159-.039.077v-.188l.039.077-3.874-1.159v-1.16l5.66 1.859v.954z"})))},"\u2109":function(e){return eu.createElement("svg",EW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),YU||(YU=eu.createElement("path",{d:"M5.278 8.015c-.307 0-.588-.074-.841-.223a1.744 1.744 0 01-.604-.608 1.628 1.628 0 01-.224-.841c0-.308.075-.587.224-.838.152-.254.353-.455.604-.604.253-.151.534-.227.841-.227a1.677 1.677 0 011.445.831c.152.25.228.53.228.838 0 .308-.076.588-.227.841-.15.254-.35.456-.604.608-.253.149-.534.223-.842.223zm0-.81c.161 0 .307-.038.437-.116a.868.868 0 00.31-1.18.84.84 0 00-.31-.308.833.833 0 00-.437-.118.869.869 0 00-.746.426.846.846 0 00-.113.434.846.846 0 00.426.746c.13.078.275.117.433.117zM8.361 12V4.727h4.51v.945H9.458v2.216h3.09v.94h-3.09V12H8.361z"})))},"\u2103":function(e){return eu.createElement("svg",SW({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),KU||(KU=eu.createElement("path",{d:"M4.278 8.016c-.307 0-.588-.075-.841-.224a1.744 1.744 0 01-.604-.607 1.628 1.628 0 01-.224-.842c0-.308.075-.587.224-.838.152-.253.353-.454.604-.604.253-.151.534-.227.841-.227a1.677 1.677 0 011.445.831c.152.251.228.53.228.838 0 .308-.076.588-.227.842-.15.253-.35.455-.604.607-.253.15-.534.224-.842.224zm0-.81c.161 0 .307-.039.437-.117a.869.869 0 00.31-1.18.84.84 0 00-.31-.308.833.833 0 00-.437-.117.869.869 0 00-.746.426.846.846 0 00-.113.433.846.846 0 00.426.746c.13.078.275.117.433.117zm8.985-.114h-1.108a1.694 1.694 0 00-.664-1.083 1.836 1.836 0 00-.565-.284 2.204 2.204 0 00-.657-.096c-.419 0-.794.106-1.126.316-.329.211-.589.52-.78.927-.19.407-.285.905-.285 1.492 0 .592.095 1.091.284 1.498.192.408.454.715.785.924.331.208.704.312 1.119.312.23 0 .447-.03.653-.092.208-.064.397-.158.565-.28a1.718 1.718 0 00.67-1.07l1.109.004c-.06.357-.174.686-.345.987a2.725 2.725 0 01-.65.774 2.94 2.94 0 01-.902.501 3.338 3.338 0 01-1.107.178c-.63 0-1.191-.15-1.684-.448-.492-.3-.88-.73-1.164-1.289-.282-.559-.423-1.225-.423-2 0-.776.142-1.442.426-1.999.284-.558.672-.987 1.165-1.285a3.158 3.158 0 011.68-.451c.385 0 .745.056 1.08.167.335.109.637.27.905.483.267.21.489.469.664.774.175.303.293.65.355 1.04z"})))},about:function(e){return eu.createElement("svg",EZ({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),UB||(UB=eu.createElement("path",{d:"M12 4.5a7.5 7.5 0 100 15 7.5 7.5 0 000-15zM12 18c-3.307 0-6-2.693-6-6s2.693-6 6-6 6 2.693 6 6-2.693 6-6 6z",fill:"currentcolor"})),ZB||(ZB=eu.createElement("rect",{x:11.25,y:9.5,width:1.5,height:7,rx:.75,fill:"currentcolor"})),HB||(HB=eu.createElement("rect",{x:11.25,y:7.25,width:1.5,height:1.5,rx:.75,fill:"currentcolor"})))},analyse:function(e){return eu.createElement("svg",kZ({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),GB||(GB=eu.createElement("path",{d:"M17.56 18.412a2.551 2.551 0 01-2.2 1.242H8.271a2.571 2.571 0 01-2.3-3.724l3.51-7a.99.99 0 00.1-.441V6.337h-.6v-2h5.705v2h-.846v2.1c.002.162.044.32.121.463l.05.094a4.448 4.448 0 00-1.61 1.239l-.214-.4a2.993 2.993 0 01-.343-1.388V6.554h-.26V8.49c-.001.464-.11.922-.317 1.338l-3.51 7a.57.57 0 00.51.827h7.087a.548.548 0 00.424-.19h.062a4.4 4.4 0 002.084-.521 2.558 2.558 0 01-.366 1.467z",fill:"currentcolor"})),WB||(WB=eu.createElement("path",{d:"M15.842 17.465a4.436 4.436 0 110-8.872 4.436 4.436 0 010 8.872zm0-7.87a3.436 3.436 0 100 6.872 3.436 3.436 0 000-6.873z",fill:"currentcolor"})),qB||(qB=eu.createElement("path",{d:"M16.6 12.089l-1.007.028c-.16 1.472-.162 3.537-1.806 3.29-.38-.056-.218-.634.16-.578.983.147.915-1.35 1.042-2.695l-.76.02c-.386.012-.385-.588 0-.6l.837-.022c.151-.882.494-1.554 1.458-1.394.38.063.218.64-.16.578-.4-.065-.578.275-.683.8l.918-.026c.386-.011.386.589 0 .599z",fill:"currentcolor"})),KB||(KB=eu.createElement("path",{d:"M18.16 13.222c-.265.26-.514.537-.76.815.166.264.346.518.541.76.24.3-.182.725-.424.424A8.779 8.779 0 0117 14.5c-.213.244-.429.487-.654.722-.268.279-.692-.146-.424-.424.268-.278.507-.553.753-.835a9.057 9.057 0 01-.46-.963c-.146-.358.434-.513.578-.16.09.22.19.437.3.648.21-.235.424-.467.65-.69.27-.272.693.153.418.424z",fill:"currentcolor"})))},"any-atom":function(e){return eu.createElement("svg",WW({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),bZ||(bZ=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 22a.997.997 0 01-1-1v-6a1.5 1.5 0 011.5 1.5v4h4A1.5 1.5 0 019 22H3zM2 9a1.5 1.5 0 001.5-1.5v-4h4A1.5 1.5 0 009 2H3a.997.997 0 00-1 1v6zm13-7a1.5 1.5 0 001.5 1.5h4v4A1.5 1.5 0 0022 9V3a.997.997 0 00-1-1h-6zm7 13a1.5 1.5 0 00-1.5 1.5v4h-4A1.5 1.5 0 0015 22h6a.997.997 0 00.383-.076l.015-.006c.232-.101.419-.288.52-.52l.006-.015A.997.997 0 0022 21v-6z",fill:"currentColor"})),xZ||(xZ=eu.createElement("path",{d:"M8.988 16.94a.838.838 0 11-1.576-.565l3.373-9.219a1 1 0 01.939-.656h.552a1 1 0 01.94.656l3.372 9.219a.837.837 0 11-1.576.565l-2.951-8.4a.062.062 0 00-.117 0l-2.956 8.4zm.104-3.05c0-.385.312-.698.698-.698h4.415a.698.698 0 110 1.397H9.79a.698.698 0 01-.698-.698z",fill:"#333"})))},arom:function(e){return eu.createElement("svg",OZ({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),YB||(YB=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.53 3.626a.94.94 0 01.939 0l6.561 3.781c.291.168.47.477.47.812v7.562a.937.937 0 01-.47.812l-6.562 3.781a.94.94 0 01-.938 0l-6.56-3.781a.937.937 0 01-.47-.812V8.219c0-.335.179-.644.47-.812l6.56-3.781zM12 5.52L6.377 8.76v6.48L12 18.48l5.623-3.24V8.76l-5.623-3.24z",fill:"currentcolor"})),XB||(XB=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.005 9.7A2.3 2.3 0 009.702 12a2.3 2.3 0 002.303 2.298 2.3 2.3 0 002.302-2.299 2.3 2.3 0 00-2.302-2.298zM7.825 12a4.177 4.177 0 014.18-4.174 4.177 4.177 0 014.18 4.173 4.177 4.177 0 01-4.18 4.174 4.177 4.177 0 01-4.18-4.174z",fill:"currentcolor"})))},"arrow-upward":function(e){return eu.createElement("svg",AZ({width:21,height:27,viewBox:"0 0 21 27",xmlns:"http://www.w3.org/2000/svg"},e),$B||($B=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.898 8.972L9.54.395a1.365 1.365 0 011.92 0l8.642 8.577c.53.527.53 1.38 0 1.906-.53.527-1.39.527-1.92 0l-6.324-6.276V26.5H9.142V4.602l-6.324 6.276c-.53.527-1.39.527-1.92 0a1.34 1.34 0 010-1.906z"})))},"bond-any":function(e){return eu.createElement("svg",CZ({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),JB||(JB=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.942 32.078a2 2 0 01-.02 2.828l-3.646 3.595a2 2 0 01-2.808-2.85l3.646-3.593a2 2 0 012.828.02zM23.457 24.538a2 2 0 01-.02 2.829l-3.647 3.592a2 2 0 11-2.807-2.85l3.646-3.592a2 2 0 012.828.021zM31.013 17.036a2 2 0 01-.021 2.829l-3.646 3.592a2 2 0 11-2.807-2.85l3.646-3.592a2 2 0 012.828.021zM38.553 9.52a2 2 0 01-.02 2.828l-3.647 3.594a2 2 0 11-2.808-2.848L35.724 9.5a2 2 0 012.829.02z",fill:"#231F20"})))},"bond-aromatic":function(e){return eu.createElement("svg",MZ({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),QB||(QB=eu.createElement("path",{d:"M15.886 40.04a2 2 0 01-1.4-3.424l19.6-19.324a2 2 0 012.8 2.85l-19.6 19.322a2 2 0 01-1.4.576zM17.456 27.214l-3.544 3.494a1.998 1.998 0 01-2.896.045 2 2 0 01.095-2.895l3.544-3.494a1.998 1.998 0 012.896-.044 2 2 0 01-.095 2.894zM28.568 15.454a2 2 0 01-1.4-3.424l3.546-3.494a2 2 0 012.8 2.848l-3.542 3.494a2 2 0 01-1.404.576zM20.539 23.368a1.999 1.999 0 01-1.4-3.424l3.542-3.494a2.001 2.001 0 013.286 2.203 2 2 0 01-.486.645L21.943 22.8a2 2 0 01-1.404.568z",fill:"#231F20"})))},"bond-crossed":function(e){return eu.createElement("svg",TZ({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),ez||(ez=eu.createElement("path",{d:"M39.563 18.718l-14.098 6.8-7.25 13.866a2 2 0 01-3.546-1.852l4.762-9.11-9.26 4.464a2.001 2.001 0 11-1.735-3.6l14.098-6.8 7.25-13.87a2 2 0 113.546 1.852l-4.762 9.11 9.26-4.464a2 2 0 111.735 3.6v.004z",fill:"#231F20"})))},"bond-hydrogen":function(e){return eu.createElement("svg",NZ({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),az||(az=eu.createElement("path",{d:"M14.261 35.726a2 2 0 01-1.4-3.424l1.012-1a2 2 0 112.8 2.848l-1.012 1a2 2 0 01-1.4.576zM18.875 31.108a2 2 0 01-1.4-3.424l1.012-1a2 2 0 012.8 2.85l-1 1a2 2 0 01-1.412.574zM23.486 26.49a2 2 0 01-1.4-3.426l1-1a2 2 0 012.8 2.848l-1 1a2 2 0 01-1.4.578zM28.112 21.886a2 2 0 01-1.4-3.426l1.01-1a2 2 0 112.8 2.848l-1 1a2 2 0 01-1.41.578zM32.726 17.27a2 2 0 01-1.4-3.424l1.012-1a2 2 0 012.8 2.85l-1.012 1a2 2 0 01-1.4.574z",fill:"#231F20"})))},"bond-dative":function(e){return eu.createElement("svg",PZ({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),tz||(tz=eu.createElement("path",{d:"M38.2 11.278l-5.554 11.76c-.234.494-.914.558-1.346.126l-1.65-1.65-15.278 15.054a2.001 2.001 0 01-3.468-1.423 2.002 2.002 0 01.668-1.427l15.252-15.032-1.728-1.728c-.432-.434-.368-1.112.126-1.346l11.76-5.554c.708-.338 1.55.504 1.218 1.22z",fill:"#231F20"})))},"bond-double":function(e){return eu.createElement("svg",IZ({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),rz||(rz=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M36.916 17.314a2 2 0 01-.02 2.828L17.29 39.465a2 2 0 01-2.808-2.85l19.606-19.322a2 2 0 012.828.021zM33.538 8.556a2 2 0 01-.02 2.829L13.912 30.706a2 2 0 01-2.808-2.85L30.71 8.536a2 2 0 012.828.021z",fill:"#231F20"})))},"bond-doublearomatic":function(e){return eu.createElement("svg",RZ({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),nz||(nz=eu.createElement("path",{d:"M17.572 27.342l-3.544 3.494a2 2 0 11-2.8-2.85l3.544-3.494a1.999 1.999 0 112.8 2.85zM24.427 19.6a1.999 1.999 0 01-1.4-3.424l3.544-3.494a2 2 0 012.8 2.848l-3.54 3.502a2 2 0 01-1.404.568zM32.102 11.96a2 2 0 100-4 2 2 0 000 4zM20.298 23.762a2 2 0 100-4 2 2 0 000 4zM20.888 36.036l-3.544 3.494a2 2 0 11-2.8-2.85l3.536-3.494a1.999 1.999 0 112.8 2.85h.008zM27.744 28.302a2 2 0 01-1.4-3.424l3.544-3.494a2 2 0 112.8 2.848l-3.544 3.494a2 2 0 01-1.4.576zM35.418 20.654a2 2 0 100-4 2 2 0 000 4zM23.614 32.456a2 2 0 100-4 2 2 0 000 4z",fill:"#231F20"})))},"bond-down":function(e){return eu.createElement("svg",LZ({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),iz||(iz=eu.createElement("path",{d:"M14.531 35.178l-1.132.658a.866.866 0 01-1.183-1.18l.655-1.14 1.66 1.662zM17.896 33.23l-1.79 1.038-2.33-2.33 1.032-1.796 3.088 3.088zM21.146 31.348l-1.79 1.038-3.706-3.706 1.032-1.796 4.464 4.464zM24.398 29.468l-1.793 1.036-5.084-5.082 1.032-1.798 5.845 5.844zM27.648 27.586l-1.793 1.036-6.46-6.46 1.032-1.796 7.22 7.22zM30.897 25.704l-1.792 1.038-7.836-7.838 1.032-1.796 8.596 8.596zM34.147 23.822l-1.792 1.038-9.212-9.214 1.032-1.796 9.972 9.972zM37.394 21.94l-1.79 1.038-10.59-10.59 1.032-1.796L37.394 21.94zM39.42 20.768l-.566.328L26.888 9.13l.324-.566a.866.866 0 011.362-.18L39.6 19.4a.863.863 0 01-.18 1.368z",fill:"#231F20"})),oz||(oz=eu.createElement("path",{d:"M37.394 21.94l-1.79 1.038-10.59-10.59 1.032-1.796L37.394 21.94zM39.42 20.768l-.566.328L26.888 9.13l.324-.566a.866.866 0 011.362-.18L39.6 19.4a.863.863 0 01-.18 1.368zM34.147 23.822l-1.792 1.038-9.212-9.214 1.032-1.796 9.972 9.972zM30.897 25.704l-1.792 1.038-7.836-7.838 1.032-1.796 8.596 8.596zM27.648 27.586l-1.793 1.036-6.46-6.46 1.032-1.796 7.22 7.22zM24.398 29.468l-1.793 1.036-5.084-5.082 1.032-1.798 5.845 5.844zM21.146 31.348l-1.79 1.038-3.706-3.706 1.032-1.796 4.464 4.464zM17.896 33.23l-1.79 1.038-2.33-2.33 1.032-1.796 3.088 3.088zM14.531 35.178l-1.132.658a.866.866 0 01-1.183-1.18l.655-1.14 1.66 1.662z",fill:"#231F20"})))},"bond-single":function(e){return eu.createElement("svg",BZ({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),lz||(lz=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M35.227 12.934a2 2 0 01-.02 2.829L15.601 35.087a2 2 0 11-2.808-2.85l19.604-19.323a2 2 0 012.829.02z",fill:"#231F20"})))},"bond-singlearomatic":function(e){return eu.createElement("svg",jZ({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),sz||(sz=eu.createElement("path",{d:"M15.886 40.04a2 2 0 01-1.4-3.424l19.6-19.324a2 2 0 112.8 2.85l-19.6 19.322a2 2 0 01-1.4.576zM17.584 27.342l-3.544 3.494a2 2 0 11-2.8-2.85l3.544-3.494a1.998 1.998 0 012.896-.044 1.998 1.998 0 01-.096 2.894zM24.441 19.6a2 2 0 01-1.4-3.424l3.54-3.486a1.998 1.998 0 013.343.623 2.001 2.001 0 01-.543 2.225l-3.536 3.494a2 2 0 01-1.404.568zM32.113 11.96a2 2 0 100-4 2 2 0 000 4zM20.31 23.762a2 2 0 100-4 2 2 0 000 4z",fill:"#231F20"})))},"bond-singledouble":function(e){return eu.createElement("svg",DZ({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),uz||(uz=eu.createElement("path",{d:"M19.078 31.6l-3.544 3.488a2 2 0 11-2.8-2.85l3.543-3.494a2 2 0 112.8 2.85v.006zM30.2 19.832a2 2 0 01-1.4-3.424l3.545-3.494a2 2 0 112.8 2.85L31.6 19.258a2 2 0 01-1.4.574zM22.16 27.748a2 2 0 01-1.4-3.426l3.544-3.494a2 2 0 012.8 2.85l-3.544 3.494a2 2 0 01-1.4.576zM22.4 16.352a2 2 0 01-1.4-3.424l3.544-3.494a2 2 0 112.8 2.848L23.8 15.776a2 2 0 01-1.4.576zM14.372 24.266a2 2 0 01-1.4-3.424l3.54-3.494A2.001 2.001 0 1119.32 20.2l-3.544 3.49a2 2 0 01-1.404.576zM29.946 31.228a2 2 0 01-1.4-3.424l3.546-3.494a2 2 0 112.8 2.848l-3.546 3.494a2 2 0 01-1.4.576zM21.916 39.142a2 2 0 01-1.4-3.424l3.547-3.494a2 2 0 112.8 2.848l-3.543 3.494a2 2 0 01-1.404.576z",fill:"#231F20"})))},"bond-triple":function(e){return eu.createElement("svg",zZ({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),cz||(cz=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M35.158 12.928a2 2 0 01-.02 2.829L15.532 35.078a2 2 0 11-2.808-2.849L32.33 12.908a2 2 0 012.828.021zM31.306 5.49a2 2 0 01-.02 2.829L11.678 27.64a2 2 0 11-2.807-2.849L28.477 5.47a2 2 0 012.829.02zM39.013 20.366a2 2 0 01-.02 2.829L19.385 42.517a2 2 0 01-2.807-2.85l19.606-19.322a2 2 0 012.828.021z",fill:"#231F20"})))},"bond-up":function(e){return eu.createElement("svg",FZ({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),fz||(fz=eu.createElement("path",{d:"M19.71 10.384L6.7 17.918a.433.433 0 01-.592-.59l7.5-13.046a.433.433 0 01.68-.09L19.8 9.7a.432.432 0 01-.09.684z",fill:"#333"})))},"bond-updown":function(e){return eu.createElement("svg",VZ({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),hz||(hz=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.326 8.31a1 1 0 011.264.128l10.728 10.818a1 1 0 01-1.42 1.408l-7.14-7.2 3.81 9.17a1 1 0 01-1.479 1.216l-7.03-4.693 2.959 6.644a1 1 0 01-1.31 1.325l-5.921-2.562 1.467 4.91a1 1 0 01-1.218 1.251l-4.594-1.237-3.369 5.868a1 1 0 11-1.734-.996l3.752-6.536a1 1 0 011.127-.468l3.607.972-1.569-5.248a1 1 0 011.355-1.204l5.537 2.396-3.321-7.46a1 1 0 011.468-1.238l7.16 4.78-4.498-10.829a1 1 0 01.369-1.215z",fill:"#231F20"})))},"capital-t":function(e){return eu.createElement("svg",UZ({width:22,height:23,viewBox:"0 0 22 23",xmlns:"http://www.w3.org/2000/svg"},e),dz||(dz=eu.createElement("path",{d:"M.5 0v4.5h8.25v18h4.5v-18h8.25V0H.5z"})))},chain:function(e){return eu.createElement("svg",ZZ({width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),pz||(pz=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26.323 10.62c.517.525.51 1.369-.014 1.886l-5.414 5.336c-.33.324-.804.455-1.254.345l-6.996-1.715-4.993 4.92a1.333 1.333 0 01-1.872-1.899l5.523-5.443c.33-.324.804-.455 1.253-.345l6.997 1.715 4.885-4.814a1.333 1.333 0 011.885.014z",fill:"#231F20"})))},"charge-minus":function(e){return eu.createElement("svg",HZ({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),vz||(vz=eu.createElement("path",{d:"M20 4h-8v2h8V4z",fill:"#231F20"})),mz||(mz=eu.createElement("path",{d:"M5.82 19.32a1 1 0 01-.948.68h-.45a1 1 0 01-.942-1.338l3.228-9A1 1 0 017.65 9h1.707a1 1 0 01.941.663l3.224 9A1 1 0 0112.58 20h-.451a1 1 0 01-.948-.68l-2.62-7.764a.062.062 0 00-.117 0L5.819 19.32zm-.392-2.736c0-.501.406-.908.907-.908h4.302a.908.908 0 010 1.816H6.335a.908.908 0 01-.907-.908z",fill:"#000"})))},"charge-plus":function(e){return eu.createElement("svg",GZ({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),gz||(gz=eu.createElement("path",{d:"M21.5 6.499v2h-4V12.5h-2V8.499h-4v-2h4V2.5h2v3.999h4z",fill:"#231F20"})),yz||(yz=eu.createElement("path",{d:"M5.82 19.32a1 1 0 01-.948.68h-.45a1 1 0 01-.942-1.338l3.228-9A1 1 0 017.65 9h1.707a1 1 0 01.941.663l3.224 9A1 1 0 0112.58 20h-.451a1 1 0 01-.948-.68l-2.62-7.764a.062.062 0 00-.117 0L5.819 19.32zm-.392-2.736c0-.501.406-.908.907-.908h4.302a.908.908 0 010 1.816H6.335a.908.908 0 01-.907-.908z",fill:"#000"})))},check:function(e){return eu.createElement("svg",WZ({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),bz||(bz=eu.createElement("path",{d:"M12 5a7 7 0 11-7 7 7.008 7.008 0 017-7zm0-2a9 9 0 100 18 9 9 0 000-18z",fill:"currentcolor"})),xz||(xz=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.73 9.555l-5.838 5.837-3.314-3.54 1.46-1.367 1.902 2.031 4.376-4.375 1.414 1.414z",fill:"currentcolor"})))},"chiral-flag":function(e){return eu.createElement("svg",qZ({"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -5 70 35"},e),_z||(_z=eu.createElement("path",{d:"M0 25h69V0H0zM68 1v23H1V1z"})),wz||(wz=eu.createElement("path",{d:"M21 18.14a3.85 3.85 0 002.71-.93 3.07 3.07 0 001-2.43H23.1a2.09 2.09 0 01-.53 1.54 2.09 2.09 0 01-1.55.53 1.94 1.94 0 01-1.64-.8 3.31 3.31 0 01-.6-2v-1.98a3.33 3.33 0 01.59-2 1.89 1.89 0 011.6-.8 2.18 2.18 0 011.59.53 2 2 0 01.54 1.53h1.61a3 3 0 00-1-2.45A4 4 0 0021 7.9a3.58 3.58 0 00-2.78 1.18 4.3 4.3 0 00-1.07 3V14a4.25 4.25 0 001.08 3A3.65 3.65 0 0021 18.14zM27.77 12.54a1.67 1.67 0 01.64-.52 2.09 2.09 0 01.92-.19 1.26 1.26 0 011 .39 1.91 1.91 0 01.34 1.26V18h1.66v-4.51a3.36 3.36 0 00-.66-2.29 2.33 2.33 0 00-1.84-.74 2.42 2.42 0 00-1.17.29 2.63 2.63 0 00-.9.81V7.34h-1.65V18h1.66zM34.16 7.34h1.66V8.8h-1.66zM34.16 10.6h1.66V18h-1.66zM39.32 12.86a1.35 1.35 0 01.5-.58 1.49 1.49 0 01.81-.21h.71l.2-1.55-.24-.06h-.28a1.68 1.68 0 00-1 .32 2.38 2.38 0 00-.72.89l-.11-1.07h-1.53V18h1.66zM45.49 13.65a4.08 4.08 0 00-2.39.6 1.93 1.93 0 00-.85 1.67 2.16 2.16 0 00.62 1.63 2.46 2.46 0 001.77.59 2.3 2.3 0 001.25-.35 2.85 2.85 0 00.9-.87 4 4 0 00.08.53q.06.27.15.55h1.68a4.59 4.59 0 01-.2-.82 6 6 0 01-.06-.88V13a2.31 2.31 0 00-.79-1.89 3.17 3.17 0 00-2.08-.66 3.32 3.32 0 00-2.16.68 1.83 1.83 0 00-.78 1.55h1.6a.86.86 0 01.33-.7 1.39 1.39 0 01.9-.27 1.35 1.35 0 011 .33 1.21 1.21 0 01.34.91v.65zm1.29 2.13a1.59 1.59 0 01-.67.72 2.07 2.07 0 01-1.12.31 1.15 1.15 0 01-.8-.25.86.86 0 01-.28-.67 1.09 1.09 0 01.41-.84 1.67 1.67 0 011.13-.36h1.32zM50.27 7.34h1.66V18h-1.66z"})))},cip:function(e){return eu.createElement("svg",KZ({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),Sz||(Sz=eu.createElement("path",{d:"M11.998 19.27L4.607 7.949a.7.7 0 01.347-1.042L9.447 5.27a.7.7 0 01.934.574l1.617 13.426zM5.65 7.718l4.848 7.419-1.06-8.8-3.788 1.38zM19.392 7.947L12 19.27l1.617-13.426a.7.7 0 01.935-.574l4.493 1.635a.7.7 0 01.347 1.041z",fill:"currentcolor"})))},clean:function(e){return eu.createElement("svg",YZ({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),Ez||(Ez=eu.createElement("path",{d:"M19.848 16.312a2.437 2.437 0 11-4.843-.386l-1.987-1.147-1-.578-1 .577-1.687.974a2.437 2.437 0 11-1.234-1.596l1.922-1.109 1-.578V9.16a2.437 2.437 0 112 0v3.31l1 .577 2.09 1.207a2.436 2.436 0 013.741 2.058h-.002z",fill:"currentcolor"})))},copies:$Z,copy:$Z,"copy-image":function(e){return eu.createElement("svg",JZ({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Oz||(Oz=eu.createElement("path",{d:"M17.25 18.75H9V8.25h8.25v10.5zm0-12H9a1.5 1.5 0 00-1.5 1.5v10.5a1.5 1.5 0 001.5 1.5h8.25a1.5 1.5 0 001.5-1.5V8.25a1.5 1.5 0 00-1.5-1.5zm-2.25-3H6a1.5 1.5 0 00-1.5 1.5v10.5H6V5.25h9v-1.5z",fill:"currentColor"})),Az||(Az=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.2 10a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v2.469c0 .298-.26.527-.559.531a4.497 4.497 0 00-4.124 2.84 4.496 4.496 0 00-.29 1.161c-.03.274-.252.499-.528.499a.5.5 0 01-.5-.5v-7zm3 1.5a1 1 0 11-2 0 1 1 0 012 0z",fill:"currentColor"})),Cz||(Cz=eu.createElement("path",{d:"M11.855 17.001c-.035.274.192.499.468.499H15.7a.5.5 0 00.5-.5v-2.905c0-.25-.186-.467-.438-.47a3.88 3.88 0 00-3.664 2.445c-.12.3-.2.613-.242.931z",fill:"currentColor"})))},"copy-mol":function(e){return eu.createElement("svg",eH({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Pz||(Pz=eu.createElement("path",{d:"M17.25 18.75H9V8.25h8.25v10.5zm0-12H9a1.5 1.5 0 00-1.5 1.5v10.5a1.5 1.5 0 001.5 1.5h8.25a1.5 1.5 0 001.5-1.5V8.25a1.5 1.5 0 00-1.5-1.5zm-2.25-3H6a1.5 1.5 0 00-1.5 1.5v10.5H6V5.25h9v-1.5z",fill:"currentColor"})),Rz||(Rz=eu.createElement("path",{d:"M10 11a.5.5 0 01.5-.5h.682a.5.5 0 01.462.31l1.462 3.567a.05.05 0 00.094 0l1.463-3.567a.5.5 0 01.462-.31h.682a.5.5 0 01.5.5v4.818a.5.5 0 01-.5.5h-.193a.5.5 0 01-.5-.5V12.56a.029.029 0 00-.03-.029.029.029 0 00-.026.018l-1.373 3.427a.5.5 0 01-.464.314h-.135a.5.5 0 01-.464-.315l-1.373-3.44a.029.029 0 00-.056.01v3.273a.5.5 0 01-.5.5H10.5a.5.5 0 01-.5-.5V11z",fill:"currentColor"})))},"copy-ket":function(e){return eu.createElement("svg",QZ({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Mz||(Mz=eu.createElement("path",{d:"M17.25 18.75H9V8.25h8.25v10.5zm0-12H9a1.5 1.5 0 00-1.5 1.5v10.5a1.5 1.5 0 001.5 1.5h8.25a1.5 1.5 0 001.5-1.5V8.25a1.5 1.5 0 00-1.5-1.5zm-2.25-3H6a1.5 1.5 0 00-1.5 1.5v10.5H6V5.25h9v-1.5z",fill:"currentColor"})),Tz||(Tz=eu.createElement("path",{d:"M11.3 16.318a.3.3 0 01-.3-.3V10.8a.3.3 0 01.3-.3h.63a.3.3 0 01.3.3v2.213a.052.052 0 00.092.033l1.989-2.436a.3.3 0 01.232-.11h.694a.3.3 0 01.23.491l-1.607 1.94a.3.3 0 00-.017.36l1.739 2.559a.3.3 0 01-.248.468h-.744a.3.3 0 01-.25-.134l-1.28-1.92a.3.3 0 00-.482-.024l-.28.342a.3.3 0 00-.068.19v1.246a.3.3 0 01-.3.3h-.63z",fill:"currentColor"})))},cut:function(e){return eu.createElement("svg",tH({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Iz||(Iz=eu.createElement("path",{d:"M17.25 5.25l-4.5 4.5 1.5 1.5L19.5 6v-.75h-2.25zM12 12.375a.375.375 0 110-.75.375.375 0 010 .75zM7.5 18a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm0-9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm2.73-.27c.172-.375.27-.788.27-1.23a3 3 0 10-3 3c.442 0 .855-.098 1.23-.27L10.5 12l-1.77 1.77a2.923 2.923 0 00-1.23-.27 3 3 0 103 3c0-.442-.098-.855-.27-1.23L12 13.5l5.25 5.25h2.25V18l-9.27-9.27z",fill:"currentcolor"})))},dearom:function(e){return eu.createElement("svg",nH({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),Lz||(Lz=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.53 3.626a.94.94 0 01.94 0l6.56 3.781c.291.168.47.477.47.812v7.562a.937.937 0 01-.47.812l-6.56 3.781a.94.94 0 01-.94 0l-6.56-3.781a.937.937 0 01-.47-.812V8.219c0-.335.179-.644.47-.812l6.56-3.781zM6.378 8.76v6.48L12 18.48l5.622-3.24V8.76L12 5.52 6.378 8.76z",fill:"currentcolor"})),Nz||(Nz=eu.createElement("path",{d:"M15.565 9.812v4.363l.935.569V9.243l-.935.569zM11.998 6.5C10.5 7.412 9.001 8.325 7.5 9.241l.934.57 3.564-2.173V6.5zM7.5 14.751l4.498 2.749v-1.138L8.434 14.17l-.934.58z",fill:"currentcolor"})))},delete:function(e){return eu.createElement("svg",rH({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),jz||(jz=eu.createElement("path",{d:"M15.813 20.483h-7.63a1.8 1.8 0 01-1.8-1.8V7.357h11.23v11.326a1.8 1.8 0 01-1.8 1.8zm-7.43-2h7.23V9.357h-7.23v9.126zM19.305 4.613v2H4.695v-2h3.433l1.034-1.13h5.676l1.034 1.13h3.433z",fill:"currentColor"})))},dropdown:function(e){return eu.createElement("svg",iH({xmlns:"http://www.w3.org/2000/svg",width:1e3,height:1e3,viewBox:"0 0 1000 1000"},e),Dz||(Dz=eu.createElement("path",{d:"M876.337 751.055c0 70.936-57.736 128.672-128.672 128.672H201.297c-70.936 0-128.557-57.736-128.557-128.672L747.55 76.36c70.936 0 128.672 57.506 128.672 128.557v546.138z"})))},"enhanced-stereo":function(e){return eu.createElement("svg",oH({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Bz||(Bz=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 4.5c0 1.138-.76 2.098-1.8 2.4v2.963a2.53 2.53 0 011.54 1.333l1.766-.758A1.501 1.501 0 1118.5 10.3a1.5 1.5 0 01-2.417 1.187l-2.084.894c-.003.301-.057.59-.152.858l1.476 1.273a3 3 0 11-.988 1.108l-1.367-1.18a2.433 2.433 0 01-2.656.184l-2.35 1.442a2.5 2.5 0 11-.683-1.322l1.993-1.223A2.649 2.649 0 019 12.347c0-1.14.711-2.107 1.7-2.452V6.87A2.501 2.501 0 1114 4.5zm-3.635 0a1.134 1.134 0 102.27 0 1.134 1.134 0 00-2.27 0zm1.135 8.955c-.592 0-1.071-.496-1.071-1.108 0-.612.48-1.108 1.07-1.108.592 0 1.072.496 1.072 1.108 0 .612-.48 1.108-1.071 1.108zM4.298 16.5a1.201 1.201 0 102.403 0 1.201 1.201 0 00-2.403 0zM17 18.513a1.513 1.513 0 110-3.026 1.513 1.513 0 010 3.026zM17 11a.7.7 0 110-1.398.7.7 0 010 1.398z",fill:"currentColor"})))},edit:function(e){return eu.createElement("svg",aH({width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),zz||(zz=eu.createElement("path",{d:"M11.796 7.265l-1.06-1.06L3.75 13.19v1.06h1.06l6.986-6.985zm1.06-1.06l1.061-1.061-1.06-1.06-1.061 1.06 1.06 1.06zM5.432 15.75H2.25v-3.182L12.326 2.492a.75.75 0 011.06 0l2.123 2.121a.75.75 0 010 1.06L5.431 15.75z",fill:"currentColor"})))},"elements-group":function(e){return eu.createElement("svg",sH({width:18,height:15,viewBox:"0 0 18 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Fz||(Fz=eu.createElement("path",{d:"M16.2 2.579H8.705L7.026.899H.768A.768.768 0 000 1.669v11.207a1.8 1.8 0 001.8 1.8h14.4a1.8 1.8 0 001.8-1.8v-8.5a1.8 1.8 0 00-1.8-1.796zm-.2 10.1H2v-8.1h14v8.1z",fill:"currentcolor"})))},"extended-table":function(e){return eu.createElement("svg",lH({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Uz||(Uz=eu.createElement("path",{d:"M7.445 15.5H4.146c-.357 0-.646.269-.646.6v3.062c0 .331.29.6.646.6h3.299c.357 0 .646-.269.646-.6V16.1c0-.331-.29-.6-.646-.6zM13.652 15.5h-3.299c-.357 0-.646.269-.646.6v3.062c0 .331.29.6.646.6h3.299c.357 0 .646-.269.646-.6V16.1c0-.331-.29-.6-.646-.6zM19.855 15.5h-3.299c-.357 0-.646.269-.646.6v3.062c0 .331.29.6.646.6h3.299c.357 0 .646-.269.646-.6V16.1c0-.331-.29-.6-.646-.6zM5 13.5a.5.5 0 01-.5-.5V5a.5.5 0 01.5-.5h5.296a.5.5 0 01.5.5v.767a.5.5 0 01-.5.5H7.183a.5.5 0 00-.5.5v.845a.5.5 0 00.5.5h2.791a.5.5 0 01.5.5v.771a.5.5 0 01-.5.5H7.183a.5.5 0 00-.5.5v.85a.5.5 0 00.5.5h3.113a.5.5 0 01.5.5V13a.5.5 0 01-.5.5H5zM12.368 6.267a.5.5 0 01-.5-.5V5a.5.5 0 01.5-.5H19a.5.5 0 01.5.5v.767a.5.5 0 01-.5.5h-1.738a.5.5 0 00-.5.5V13a.5.5 0 01-.5.5H15.11a.5.5 0 01-.5-.5V6.767a.5.5 0 00-.5-.5h-1.742z",fill:"#333"})))},erase:function(e){return eu.createElement("svg",uH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Vz||(Vz=eu.createElement("path",{d:"M40.284 18.458L30.37 8.546a2 2 0 00-2.828 0L7.716 28.372a2 2 0 000 2.828l7.084 7.082a6.001 6.001 0 008.488 0l17-17a2 2 0 000-2.828l-.004.004zm-19.824 17a2 2 0 01-2.832 0l-5.67-5.672 7.824-7.824 7.084 7.086-6.406 6.41z",fill:"#231F20"})))},"file-thumbnail":function(e){return eu.createElement("svg",cH({width:29,height:37,viewBox:"0 0 29 37",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Zz||(Zz=eu.createElement("path",{d:"M19.872.583H3.747A3.594 3.594 0 00.164 4.167v28.666a3.594 3.594 0 003.583 3.584h21.5a3.594 3.594 0 003.584-3.584V9.543L19.872.583zM3.747 32.833V4.168h14.334v7.167h7.166v21.5h-21.5z",fill:"#005662"})),Hz||(Hz=eu.createElement("path",{d:"M12.21 10.723l-3.66 9.15 10.065 6.404",stroke:"#005662",strokeWidth:1.483})),Gz||(Gz=eu.createElement("circle",{cx:12.213,cy:10.723,r:1.83,fill:"#005662"})),Wz||(Wz=eu.createElement("circle",{cx:8.552,cy:19.872,fill:"#005662",r:1.83})),qz||(qz=eu.createElement("circle",{cx:18.619,cy:26.277,r:1.83,fill:"#005662"})))},"fullscreen-enter":function(e){return eu.createElement("svg",$G({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),wU||(wU=eu.createElement("path",{d:"M8.75 3.75h-5v5h1.5V6.312L9 10.063l1-1.124L6.312 5.25H8.75v-1.5zM15.25 3.75h5v5h-1.5V6.312L15 10.063l-1-1.124 3.688-3.688H15.25v-1.5zM15.25 20.25h5v-5h-1.5v2.438L15 13.938l-1 1.124 3.688 3.688H15.25v1.5zM8.75 20.25h-5v-5h1.5v2.438L9 13.938l1 1.124-3.688 3.688H8.75v1.5z",fill:"currentColor"})))},"fullscreen-exit":function(e){return eu.createElement("svg",JG({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),SU||(SU=eu.createElement("path",{d:"M19.25 14.25h-5v5h1.5v-2.438l3.75 3.75 1-1.125-3.688-3.687h2.438v-1.5zM5 14.25h5v5H8.5v-2.438l-3.75 3.75-1-1.125 3.688-3.687H5v-1.5zM5 10.063h5v-5H8.5V7.5L4.75 3.75l-1 1.125 3.688 3.688H5v1.5zM19.25 10.063h-5v-5h1.5V7.5l3.75-3.75 1 1.125-3.688 3.688h2.438v1.5z",fill:"currentColor"})))},"generic-groups":function(e){return eu.createElement("svg",fH({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 750 750",height:1e3,width:1e3},e),Kz||(Kz=eu.createElement("path",{d:"M73.129 209.914v403.543h403.226v73.371H62.133c-34.418 0-62.317-27.922-62.317-62.367V209.914zM304.07 343.45l103.004-103.086-48.754-49.89c-10.734-10.73-28.12-10.73-38.855 0l-63.05 64.199c-10.72 10.742-10.72 28.144 0 38.887zm132.696-73.37L334.859 373.53l311.95 313.297 103.375-103.086zm186.218 123.265V136.543c0-53.195-19.43-73.371-73.316-73.371H183.102c-56.454 0-73.317 16.875-73.317 73.371v366.855c0 54.297 16.863 73.372 73.317 73.372h293.253l-73.312-73.372H183.102V136.543h366.566v183.43zm0 0"})))},help:function(e){return eu.createElement("svg",hH({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Yz||(Yz=eu.createElement("path",{d:"M11.25 16.5h1.5V15h-1.5v1.5zm.75-12a7.5 7.5 0 100 15 7.5 7.5 0 000-15zM12 18c-3.307 0-6-2.693-6-6s2.693-6 6-6 6 2.693 6 6-2.693 6-6 6zm0-10.5a3 3 0 00-3 3h1.5a1.5 1.5 0 113 0c0 1.5-2.25 1.313-2.25 3.75h1.5c0-1.688 2.25-1.875 2.25-3.75a3 3 0 00-3-3z",fill:"currentcolor"})))},history:function(e){return eu.createElement("svg",dH({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),Xz||(Xz=eu.createElement("path",{d:"M17.814 16.537a3.452 3.452 0 00.416-1.649 3.492 3.492 0 00-5.13-3.078 3.48 3.48 0 00-1.422 1.406 3.457 3.457 0 00-.428 1.672 3.492 3.492 0 003.488 3.488c.58.001 1.15-.144 1.66-.422l2.328 2.337 1.417-1.412-2.329-2.342zm-1.586-1.592a1.487 1.487 0 01-1.4 1.427h-.085a1.49 1.49 0 01-1.488-1.488v-.09a1.49 1.49 0 011.432-1.4h.053a1.49 1.49 0 011.488 1.551z",fill:"currentcolor"})),$z||($z=eu.createElement("path",{d:"M11.047 20H5.8A1.8 1.8 0 014 18.2V5.8A1.8 1.8 0 015.8 4h12.4A1.8 1.8 0 0120 5.8v5.6h-2V6H6v12h5.047v2z",fill:"currentcolor"})),Jz||(Jz=eu.createElement("path",{d:"M16.798 8.01H7.207v2h9.591v-2zM10.654 11.772H7.207v2h3.447v-2z",fill:"currentcolor"})))},"image-frame":function(e){return eu.createElement("svg",pH({width:47,height:38,viewBox:"0 0 47 38",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Qz||(Qz=eu.createElement("path",{d:"M0 33.778A4.228 4.228 0 004.222 38h38c2.333 0 4.222-1.9 4.222-4.222V4.222A4.228 4.228 0 0042.222 0h-38A4.228 4.228 0 000 4.222v29.555z",fill:"#EFF2F5"})),eF||(eF=eu.createElement("path",{d:"M42.227 4.222h-38v29.556h38V4.222z",fill:"#AFDADF"})),tF||(tF=eu.createElement("path",{d:"M32.986 11.875L11.148 33.778h31.074V21.11l-9.236-9.236z",fill:"#3498A4"})),nF||(nF=eu.createElement("path",{d:"M21.114 14.778a7.389 7.389 0 11-14.778 0 7.389 7.389 0 0114.778 0z",fill:"#39BBCA"})),rF||(rF=eu.createElement("path",{d:"M14.98 17.087L4.227 27.841v5.937H31.67l-16.69-16.69z",fill:"#167782"})))},layout:function(e){return eu.createElement("svg",vH({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),iF||(iF=eu.createElement("path",{d:"M20.055 15.057a2.153 2.153 0 11-4.307 0c0-.115.009-.229.028-.341L14.02 13.7l-.884-.511-.883.51-1.491.86a2.151 2.151 0 11-1.091-1.406l1.7-.98.884-.51V8.739a2.154 2.154 0 111.767 0v2.925l.883.509 1.847 1.067a2.152 2.152 0 013.3 1.818h.003z",fill:"currentcolor"})),oF||(oF=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 3a1 1 0 011 1v15h15a1 1 0 110 2H4a1 1 0 01-1-1V4a1 1 0 011-1z",fill:"currentcolor"})))},logo:function(e){return eu.createElement("svg",mH({xmlns:"http://www.w3.org/2000/svg",width:1e3,height:1e3},e),aF||(aF=eu.createElement("path",{d:"M26.773 102.744h181.755c-.074 123.9-8.793 247.613-8.866 371.514 89.984-124.193 181.422-247.321 271.406-371.514H692.64C590.987 240.298 444.471 342.58 363.684 495.732c77.74 155.676 224.317 259.543 320.493 402.076h-215.4c-70.105-101.553-117.732-223.956-219.713-299.423-39.122-14.846-40.087 60.14-46.238 87.253-5.736 70.546-2.166 141.45-3.164 212.17H25c.007-265.023 1.766-530.041 1.773-795.064zm424.242 392.988c102.855-141.27 241.813-251.718 344.669-392.988 59.768-.743 119.55-1.267 179.316 0C872.393 239.74 719.748 333.773 632.325 482.93c-7.765 45.896 45.968 88.282 71.47 126.581 86.444 99.165 194.622 178.714 269.432 288.074-63.035-.013-126.069.437-189.104.437-100.95-142.27-232.05-260.11-333.108-402.29z"})))},miew:function(e){return eu.createElement("svg",gH({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),sF||(sF=eu.createElement("path",{d:"M19.702 7.246l-.464-.268-.268-.155-6.234-3.6-.464-.268a.535.535 0 00-.536 0l-.464.268-6.234 3.6-.268.155-.468.268a.537.537 0 00-.267.464v8.58a.537.537 0 00.267.464l.465.268 6.234 3.6.268.155.464.268a.535.535 0 00.536 0l.464-.268.268-.155 6.234-3.6.465-.268a.538.538 0 00.267-.464V7.71a.538.538 0 00-.265-.464zm-8.7 11.066l-4.966-2.867V9.71l4.966 2.867v5.735zm1-7.467L7.036 7.978l4.966-2.867 4.966 2.867-4.966 2.867zm1 1.732l4.966-2.867v5.735l-4.966 2.867v-5.735z",fill:"currentcolor"})))},clear:function(e){return eu.createElement("svg",yH({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),uF||(uF=eu.createElement("path",{d:"M18.655 7.529L15.02 3.893a1 1 0 00-.707-.293H6.398a1 1 0 00-1 1v14.548a1 1 0 001 1h11.55a.999.999 0 001-1V8.236a1 1 0 00-.293-.707zm-1.707 10.615h-9.55V5.596h5.952v3.6h3.6l-.002 8.948z",fill:"currentcolor"})),lF||(lF=eu.createElement("path",{d:"M10.922 14.55h-2v2h2v-2zM10.922 7.92h-2v5.502h2V7.92z",fill:"currentcolor"})))},open:function(e){return eu.createElement("svg",xH({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),hF||(hF=eu.createElement("path",{d:"M7.575 10.5L6 16.5V9h12.75a1.5 1.5 0 00-1.5-1.5H12L10.5 6H6a1.5 1.5 0 00-1.5 1.5v9A1.5 1.5 0 006 18h11.25c.675 0 1.275-.45 1.425-1.125L20.4 10.5H7.575zm9.675 6H7.5L8.7 12h9.75l-1.2 4.5z",fill:"currentcolor"})))},paste:function(e){return eu.createElement("svg",_H({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),dF||(dF=eu.createElement("path",{d:"M17.25 18H6.75V6h1.5v2.25h7.5V6h1.5v12zM12 4.5A.75.75 0 1112 6a.75.75 0 010-1.5zm5.25 0h-3.135A2.258 2.258 0 0012 3c-.975 0-1.8.63-2.115 1.5H6.75A1.5 1.5 0 005.25 6v12a1.5 1.5 0 001.5 1.5h10.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5z",fill:"currentcolor"})))},"period-table":function(e){return eu.createElement("svg",EH({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),bF||(bF=eu.createElement("path",{d:"M7.445 15.5H4.146c-.357 0-.646.269-.646.6v3.062c0 .331.29.6.646.6h3.299c.357 0 .646-.269.646-.6V16.1c0-.331-.29-.6-.646-.6zM13.652 15.5h-3.299c-.357 0-.646.269-.646.6v3.062c0 .331.29.6.646.6h3.299c.357 0 .646-.269.646-.6V16.1c0-.331-.29-.6-.646-.6zM19.855 15.5h-3.299c-.357 0-.646.269-.646.6v3.062c0 .331.29.6.646.6h3.299c.357 0 .646-.269.646-.6V16.1c0-.331-.29-.6-.646-.6zM5 13.5a.5.5 0 01-.5-.5V5a.5.5 0 01.5-.5h3.125c.657 0 1.224.132 1.7.396.48.26.85.625 1.11 1.094.26.466.39 1.008.39 1.626 0 .62-.133 1.164-.398 1.63A2.7 2.7 0 019.8 10.323c-.489.255-1.068.382-1.74.382H6.324a.5.5 0 01-.5-.5v-.714a.5.5 0 01.5-.5h1.342c.32 0 .587-.057.801-.171a1.16 1.16 0 00.493-.48c.112-.207.167-.449.167-.724 0-.279-.055-.519-.167-.721a1.134 1.134 0 00-.493-.475c-.217-.11-.484-.167-.8-.167H7.12a.5.5 0 00-.5.5V13a.5.5 0 01-.5.5H5zM12.584 6.267a.5.5 0 01-.5-.5V5a.5.5 0 01.5-.5H19a.5.5 0 01.5.5v.767a.5.5 0 01-.5.5h-1.66a.5.5 0 00-.5.5V13a.5.5 0 01-.5.5h-1.091a.5.5 0 01-.5-.5V6.767a.5.5 0 00-.5-.5h-1.665z",fill:"#333"})))},"reaction-arrow-elliptical-arc-arrow-filled-bow":function(e){return eu.createElement("svg",AH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),SF||(SF=eu.createElement("path",{d:"M39.6 26.298l-5.735 8.8-3.336-1.4c-.098-4.894-1.702-18.814-7.568-18.814h-.066c-1.948.034-4.67 1.614-6.572 8.95a52.695 52.695 0 00-1.464 9.894l-4-.142c.178-3.63.71-7.232 1.588-10.758C13.855 17.452 16.8 11 22.833 10.898c6.116-.11 8.966 6.388 10.286 11.856.4 1.656.688 3.306.894 4.8l2.24-3.44 3.346 2.184z",fill:"#231F20"})))},"reaction-arrow-elliptical-arc-arrow-filled-triangle":function(e){return eu.createElement("svg",CH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),EF||(EF=eu.createElement("path",{d:"M35.867 26.424l-3.332 7.248-4.612-6.51 1.958-.182c-.716-4.42-2.582-12.084-6.914-12.084h-.066c-1.948.034-4.67 1.614-6.572 8.95a52.71 52.71 0 00-1.464 9.894l-4-.142c.178-3.629.71-7.232 1.588-10.758C13.855 17.452 16.8 11 22.833 10.898h.144c3.934 0 8.906 2.8 10.896 15.714l1.994-.188z",fill:"#231F20"})))},"reaction-arrow-elliptical-arc-arrow-open-angle":function(e){return eu.createElement("svg",MH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),kF||(kF=eu.createElement("path",{d:"M37.54 25.236l-4.329 12-7.136-10.356 1.646-1.134 2.484 3.6C29.491 23.314 27.503 15 22.967 15h-.066c-6 .104-7.858 14-8.036 18.846l-4-.144c.178-3.629.71-7.231 1.588-10.756 1.4-5.4 4.334-11.84 10.376-11.946 6.116-.106 8.966 6.388 10.286 11.856a50.963 50.963 0 011.032 5.88l1.506-4.172 1.886.672z",fill:"#231F20"})))},"reaction-arrow-elliptical-arc-arrow-open-half-angle":function(e){return eu.createElement("svg",TH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),OF||(OF=eu.createElement("path",{d:"M39.764 27.682l-5.252 5.252-.4.4-.312.312-1.128 1.128-1.472-1.076-.156-.114-.512-.372-6.014-4.366 1.174-1.618 4.666 3.386c-.564-6.054-2.492-15.718-7.38-15.718h-.066c-1.948.034-4.67 1.614-6.572 8.95a52.695 52.695 0 00-1.464 9.894l-4-.142c.178-3.63.71-7.232 1.588-10.758C13.856 17.452 16.8 11 22.834 10.898c6.116-.11 8.966 6.388 10.286 11.856.578 2.48.979 4.999 1.2 7.536l4.022-4.022 1.422 1.414z",fill:"#231F20"})))},"reaction-arrow-open-angle":function(e){return eu.createElement("svg",DH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),IF||(IF=eu.createElement("path",{d:"M35.967 24l-.67.67-1.33 1.33-10.94 10.94-2.828-2.828 2.828-2.828 3.212-3.214L28.31 26H10.197v-4H28.31l-4.162-4.162-1.12-1.12L20.2 13.89l2.828-2.83L35.967 24z",fill:"#231F20"})))},"reaction-arrow-filled-triangle":function(e){return eu.createElement("svg",jH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),RF||(RF=eu.createElement("path",{d:"M34.941 23.986l-1.244 1.244-.784.784L21.947 36.98V26.014h-11.75v-4h11.75V11.048l.028-.028L32.97 22.014l.728.728 1.244 1.244z",fill:"#231F20"})))},"reaction-arrow-filled-bow":function(e){return eu.createElement("svg",NH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),PF||(PF=eu.createElement("path",{d:"M25.14 28.774c.37-.895.653-1.824.844-2.774H10.2v-4h15.876a18.504 18.504 0 00-1.102-3.982l-3-7 12.98 12.98-12.98 12.98 3.166-8.204z",fill:"#231F20"})))},"reaction-arrow-dashed-open-angle":function(e){return eu.createElement("svg",OH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),_F||(_F=eu.createElement("path",{d:"M15.32 22h-4.6v4h4.6v-4zM22.045 22h-4.6v4h4.6v-4zM28.77 22h-4.6v4h4.6v-4z",fill:"#231F20"})),wF||(wF=eu.createElement("path",{d:"M27.006 12.43L38.576 24l-11.57 11.57-2.83-2.828L32.92 24l-8.744-8.742 2.83-2.828z",fill:"#231F20"})))},"reaction-arrow-failed":function(e){return eu.createElement("svg",LH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),TF||(TF=eu.createElement("path",{d:"M27.471 28.774c.37-.895.653-1.824.844-2.774H24.43l2.022 2.022-1.414 1.414L21.6 26h-1.172L17 29.436l-1.414-1.414L17.6 26h-5.07v-4h5.07l-2.02-2.022L17 18.564 20.43 22h1.17l3.436-3.436 1.414 1.414L24.43 22h3.97a18.504 18.504 0 00-1.102-3.982l-3.01-7 12.98 12.98-12.98 12.98 3.184-8.204z",fill:"#231F20"})))},"reaction-arrow-both-ends-filled-triangle":function(e){return eu.createElement("svg",kH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),xF||(xF=eu.createElement("path",{d:"M29.876 32.824v-6.81H18.124v6.81L9.3 24l8.824-8.822v6.838h11.752v-6.838L38.7 24l-8.824 8.824z",fill:"#231F20"})))},"reaction-arrow-equilibrium-filled-half-bow":function(e){return eu.createElement("svg",PH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),AF||(AF=eu.createElement("path",{d:"M36.915 21.6H11.083v-4l17.882.086a8.487 8.487 0 00-.866-3.774l-1.3-2.66L36.915 21.6zM11.083 26.4h25.832v4l-17.882-.086c-.006 1.308.29 2.6.866 3.774l1.3 2.66L11.083 26.4z",fill:"#231F20"})))},"reaction-arrow-equilibrium-filled-triangle":function(e){return eu.createElement("svg",RH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),CF||(CF=eu.createElement("path",{d:"M11.667 17.028v4h15.788v3.146l9.762-5.146-9.762-5.148v3.148H11.667zM36.334 27.012v4H20.546v3.146l-9.762-5.146 9.762-5.148v3.148h15.788z",fill:"#231F20"})))},"reaction-arrow-equilibrium-open-angle":function(e){return eu.createElement("svg",IH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),MF||(MF=eu.createElement("path",{d:"M36.478 21.6H11.522v-4h17.279l-5.042-3.39 2.23-3.32 10.49 7.05v3.66zM22.012 37.11l-10.49-7.05V26.4h24.956v4H19.201l5.041 3.39-2.23 3.32z",fill:"#231F20"})))},"reaction-arrow-unbalanced-equilibrium-filled-half-bow":function(e){return eu.createElement("svg",BH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),LF||(LF=eu.createElement("path",{d:"M36.289 21.6H12.513v-4l15.826.086a8.487 8.487 0 00-.866-3.774l-1.3-2.66L36.289 21.6zM31.368 30.4L23 30.236c.066.944.325 1.864.76 2.704l1.17 2.26-9.1-8.8h15.536l.002 4z",fill:"#231F20"})))},"reaction-arrow-unbalanced-equilibrium-open-half-angle":function(e){return eu.createElement("svg",VH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),DF||(DF=eu.createElement("path",{d:"M36.478 21.6H11.522v-4h17.279l-5.042-3.39 2.23-3.32 10.49 7.05v3.66zM22.012 37.11l-10.49-7.05V26.4h24.956v4H19.201l5.041 3.39-2.23 3.32z",fill:"#231F20"})))},"reaction-arrow-unbalanced-equilibrium-large-filled-half-bow":function(e){return eu.createElement("svg",FH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),jF||(jF=eu.createElement("path",{d:"M39.234 21.6H9.2v-4l22.084.086a8.487 8.487 0 00-.866-3.774l-1.3-2.66L39.234 21.6zM33.022 30.4l-12.074-.164a6.94 6.94 0 00.762 2.704l1.168 2.26-9.1-8.8h19.244v4z",fill:"#231F20"})))},"reaction-arrow-unbalanced-equilibrium-filled-half-triangle":function(e){return eu.createElement("svg",zH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),NF||(NF=eu.createElement("path",{d:"M32.928 26.4v4H22.644v4.024l-8.06-8.024h18.344zM36.313 21.6H11.688v-4h15.176v-5.41l9.448 9.41z",fill:"#231F20"})))},"reaction-automap":function(e){return eu.createElement("svg",UH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),BF||(BF=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.405 23.2v-2.86l4.858 4.86-4.858 4.86V27.2h-9.543v-4h9.543zM11.233 18.122H7.62v-4h7.614v20.156h-4V18.122zM35.874 18.122h-3.612v-4h7.612v20.156h-4V18.122z",fill:"#231F20"})))},"reaction-map":function(e){return eu.createElement("svg",ZH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),zF||(zF=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.236 16.21h-5.154v-4h9.154v25.14h-4V16.21z",fill:"#231F20"})),FF||(FF=eu.createElement("path",{d:"M18.312 27.086h-7.034v4h7.034v-4zM37.076 27.086h-7.034v4h7.034v-4z",fill:"#231F20"})))},"reaction-plus":function(e){return eu.createElement("svg",HH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),VF||(VF=eu.createElement("path",{d:"M22 12h4v10h10v4H26v10h-4V26H12v-4h10V12z",fill:"#231F20"})))},"reaction-unmap":function(e){return eu.createElement("svg",GH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),UF||(UF=eu.createElement("path",{d:"M26.236 12.21v10.084l-4-3.998V16.21H20.15l-3.068-3.068v-.932h9.154zM18.312 27.086h-7.034v4h7.034v-4zM37.311 27.086v4h-2.284l-4-4h6.284z",fill:"#231F20"})),ZF||(ZF=eu.createElement("path",{d:"M35.402 33.686l-2.828 2.828-6.338-6.338v7.174h-4V26.178L12.212 16.154l1.112-1.114 1.716-1.716 20.362 20.362z",fill:"#231F20"})))},recognize:function(e){return eu.createElement("svg",WH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),HF||(HF=eu.createElement("path",{d:"M34.742 18.918L12.364 41.294H6.708v-5.656L29.084 13.26l5.658 5.658zM36.767 7.842l3.394 3.394a1.6 1.6 0 010 2.262l-3.648 3.65-5.657-5.658 3.648-3.648a1.6 1.6 0 012.263 0zM22.828 8.702l2.702 1.476-2.702 1.478-1.476 2.702-1.478-2.702-2.702-1.478 2.702-1.476L21.352 6l1.476 2.702zM11.318 17.126l1.13-3.866 1.132 3.866 3.864 1.13-3.864 1.13-1.132 3.866-1.13-3.866-3.864-1.13 3.864-1.13z",fill:"#231F20"})))},redo:function(e){return eu.createElement("svg",qH({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),GF||(GF=eu.createElement("path",{d:"M16.801 10.95C15.414 9.75 13.614 9 11.626 9c-3.487 0-6.435 2.273-7.47 5.415l1.77.585a6.002 6.002 0 015.7-4.125 5.98 5.98 0 013.84 1.41L12.751 15h6.75V8.25l-2.7 2.7z",fill:"currentcolor"})))},"rgroup-attpoints":function(e){return eu.createElement("svg",KH({width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),WF||(WF=eu.createElement("path",{d:"M24.963 13.335h-1.6v-4.26h-.764V7.473h2.364v5.862zM21.467 10.979a1.793 1.793 0 00.914-1.556c0-.934-.694-1.95-2.217-1.95h-2.43v5.867h1.6v-2.007h.542l.944 2h1.77l-1.123-2.354zm-2.134-1.246v-.666h.84c.144 0 .618.025.618.349 0 .203-.374.303-.639.31-.179.007-.51.007-.819.007z",fill:"#231F20"})),qF||(qF=eu.createElement("path",{d:"M18.259 17.119h-1.694a1.619 1.619 0 01-1.616-1.616V5.959a1.617 1.617 0 011.616-1.615h1.694v2h-1.31v8.775h1.31v2zM26.196 17.119h-1.693v-2h1.31V6.344h-1.31v-2h1.693a1.617 1.617 0 011.616 1.615v9.544a1.619 1.619 0 01-1.616 1.616zM13.88 16.756L7.855 22.78l1.415 1.415 6.024-6.025-1.414-1.414z",fill:"#231F20"})),KF||(KF=eu.createElement("path",{d:"M11.48 25.085l-6.165 1.652 1.651-6.165 4.513 4.513z",fill:"#231F20"})))},"rgroup-fragment":function(e){return eu.createElement("svg",YH({width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),YF||(YF=eu.createElement("path",{d:"M24.267 19.801h-2v-6.389h-1.284v-2h3.284v8.39zM19.115 16.292c.852-.457 1.386-1.253 1.386-2.203a2.466 2.466 0 00-1.29-2.232 3.435 3.435 0 00-1.044-.373 3.977 3.977 0 00-.736-.072h-3.393v8.39h2v-3.085h1.067l1.458 3.086h2.211l-1.659-3.511zm-3.077-1.576v-1.304h1.393c.278-.002.552.062.8.187a.48.48 0 01.274.49c0 .435-.656.61-1.096.622-.287.008-.86.008-1.37.005zM5.17 19.515l-1.885-1.886 1.947-1.948-1.947-1.948 1.885-1.885 3.834 3.833-3.834 3.834z",fill:"#231F20"})),XF||(XF=eu.createElement("path",{d:"M14.645 25.2h-2.472a2.236 2.236 0 01-2.232-2.233V9.033A2.235 2.235 0 0112.173 6.8h2.472v2.667h-2.037v13.066h2.037V25.2zM26.235 25.2h-2.472v-2.667H25.8V9.467h-2.037V6.8h2.472a2.234 2.234 0 012.232 2.233v13.934a2.236 2.236 0 01-2.232 2.233z",fill:"#231F20"})))},"rgroup-label":function(e){return eu.createElement("svg",XH({width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),$F||($F=eu.createElement("path",{d:"M27.927 22.052h-2.666v-10.77h-2.409V8.614h5.075v13.437zM19.396 16.176c1.458-.667 2.362-1.923 2.362-3.481 0-1.467-.696-2.678-1.958-3.391-1.1-.621-2.301-.688-2.765-.688H11.78v13.436h2.667v-5.359h2.244l2.533 5.362h2.95l-2.778-5.879zm-4.95-2.15v-2.743h2.589a3.163 3.163 0 011.452.342c.43.243.604.552.604 1.067 0 1.003-1.368 1.304-2.092 1.323a92.9 92.9 0 01-2.552.012zM6.35 19.137l-1.886-1.886 1.948-1.947-1.948-1.948 1.885-1.887 3.833 3.835-3.833 3.833z",fill:"#231F20"})))},save:function(e){return eu.createElement("svg",$H({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),JF||(JF=eu.createElement("path",{d:"M17.25 17.625h.375V8.717l-.11-.11-2.122-2.122-.11-.11H6.375v11.25H17.25zm-10.5-12h8.845l2.78 2.78v8.845a1.13 1.13 0 01-1.125 1.125H6.75a1.125 1.125 0 01-1.125-1.125V6.75c0-.62.5-1.125 1.125-1.125zm1.5 2.625h5.25v1.5H8.25v-1.5zm4.875 6a1.125 1.125 0 11-2.25 0 1.125 1.125 0 012.25 0z",fill:"currentcolor",stroke:"currentcolor",strokeWidth:.75})))},search:function(e){return eu.createElement("svg",JH({width:28,height:28,viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),QF||(QF=eu.createElement("path",{d:"M22.697 21.492l-5.68-5.68a6.503 6.503 0 001.358-4c0-1.754-.685-3.399-1.923-4.64a6.514 6.514 0 00-4.64-1.922 6.523 6.523 0 00-4.64 1.923 6.51 6.51 0 00-1.922 4.64c0 1.752.685 3.401 1.923 4.64a6.51 6.51 0 004.64 1.922 6.509 6.509 0 003.996-1.356l5.68 5.678a.18.18 0 00.255 0l.953-.951a.18.18 0 000-.254zm-7.42-6.215a4.874 4.874 0 01-3.464 1.435 4.874 4.874 0 01-3.466-1.434 4.874 4.874 0 01-1.435-3.466c0-1.308.51-2.54 1.435-3.465a4.874 4.874 0 013.466-1.435c1.308 0 2.54.508 3.464 1.435a4.874 4.874 0 011.435 3.466 4.87 4.87 0 01-1.434 3.464z",fill:"currentColor"})))},"select-fragment":function(e){return eu.createElement("svg",QH({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),eV||(eV=eu.createElement("path",{d:"M36.085 41.896a.85.85 0 01-1.182-.458l-1.938-4.6-2.232 1.962a.8.8 0 01-.55.214.85.85 0 01-.628-.284 1.02 1.02 0 01-.262-.688V23.464c-.002-.254.092-.5.262-.688a.85.85 0 01.628-.284.86.86 0 01.568.224h.01l10.212 9.366a1.038 1.038 0 01.116 1.37.867.867 0 01-.508.33l-2.8.6 1.956 4.6a.978.978 0 01-.428 1.284l-3.224 1.63z",fill:"#231F20"})),tV||(tV=eu.createElement("path",{d:"M34.37 14.838l-13.303-6.6a2 2 0 00-2.319.4l-10.4 10.614a2 2 0 00-.342 2.326l6.883 13.164A2 2 0 0017 35.772l10.29-1.742v-4.054l-9.523 1.612L12.23 21l8.358-8.536 10.703 5.312-.343 2.312 3.563 3.266.95-6.432a2 2 0 00-1.09-2.084z",fill:"#231F20"})))},"select-lasso":function(e){return eu.createElement("svg",eG({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),nV||(nV=eu.createElement("path",{d:"M36.209 42.244a.85.85 0 01-1.182-.456l-1.938-4.6-2.23 1.962a.81.81 0 01-.552.214.849.849 0 01-.628-.284 1.023 1.023 0 01-.26-.688v-14.58a1.028 1.028 0 01.26-.688.851.851 0 01.628-.284c.21.003.414.082.57.224l10.212 9.366a1.036 1.036 0 01.116 1.37.87.87 0 01-.506.33l-2.8.6 1.956 4.6a.976.976 0 01-.426 1.282l-3.22 1.632zM30.673 8.504a2 2 0 00-1.174-.982 22.044 22.044 0 00-4.96-.942 2.012 2.012 0 00-2.14 1.848v.154a2 2 0 001.854 1.988 17.996 17.996 0 014.058.77 2 2 0 002.372-2.836h-.01zm-12.08.4a2 2 0 00-1.878-1.314c-.234 0-.466.042-.686.124a16.25 16.25 0 00-4.568 2.522 2 2 0 002.492 3.128 12.261 12.261 0 013.446-1.9 1.997 1.997 0 001.2-2.566l-.006.006zm21.51 7.252a14.249 14.249 0 00-3.118-4.306 2.001 2.001 0 10-2.77 2.884c.939.881 1.703 1.93 2.254 3.094a2 2 0 003.634-1.672zm-28.74 5.964a7.384 7.384 0 01-.546-2.748c0-.263.015-.526.044-.788a2 2 0 10-3.972-.456c-.048.413-.072.828-.072 1.244.005 1.45.288 2.885.834 4.228a2 2 0 003.712-1.488v.008zm27.866.6a2 2 0 00-2.634 1.032 7.638 7.638 0 01-.922 1.564l2.956 2.712a11.663 11.663 0 001.632-2.676 2 2 0 00-1.032-2.632zm-21.756 5.4a14.372 14.372 0 01-3.36-2.214 2 2 0 10-2.664 2.982 18.365 18.365 0 004.292 2.838 1.966 1.966 0 001.927-.11 2.01 2.01 0 00.937-1.692 2.014 2.014 0 00-1.132-1.806v.002z",fill:"#231F20"})),rV||(rV=eu.createElement("path",{d:"M27.691 29.61v7.244c-1.33 1.234-3.494 2.026-5.69 1.888-1.088-.068-2.292-.458-3.564-.87-1.272-.412-2.726-.886-3.572-.818-1.5.116-3.054 1.366-3.524 1.836a2 2 0 01-2.83-2.828c.282-.28 2.834-2.748 6.046-3 1.634-.126 3.4.446 5.112 1 .982.318 2 .648 2.582.684 1.372.086 2.426-.51 2.762-.854 0-.026 0-.054-.014-.084-.318 0-.644-.01-.968-.026a2 2 0 01.098-3.998h.096c.288.012.574.02.85.02a16.92 16.92 0 002.616-.194z",fill:"#231F20"})))},"select-rectangle":function(e){return eu.createElement("svg",tG({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),iV||(iV=eu.createElement("path",{d:"M36.21 42.244a.85.85 0 01-1.181-.456l-1.938-4.6-2.23 1.962a.81.81 0 01-.552.214.851.851 0 01-.628-.284 1.024 1.024 0 01-.26-.688v-14.58a1.028 1.028 0 01.26-.688.85.85 0 01.628-.284.866.866 0 01.57.224L41.09 32.43a1.036 1.036 0 01.116 1.37.87.87 0 01-.506.33l-2.8.6 1.956 4.6a.977.977 0 01-.426 1.282l-3.22 1.632zM8.56 20.102v5.478h4v-5.478h-4zm11.38 12.86v4h5.48v-4h-5.48zM31.526 8.72h-2.105v4h2.105A1.277 1.277 0 0132.8 14v2.102h4V14a5.282 5.282 0 00-5.273-5.28zm-17.69 0A5.282 5.282 0 008.562 14v2.102h4V14a1.276 1.276 0 011.275-1.276h2.104v-4l-2.104-.004zm6.104 0v4h5.48v-4h-5.48zM32.8 20.102V21.8l4 3.668v-5.366h-4zm-18.963 12.86a1.276 1.276 0 01-1.277-1.276V29.58h-4v2.106a5.282 5.282 0 005.276 5.276h2.104v-4h-2.104z",fill:"#231F20"})))},settings:function(e){return eu.createElement("svg",nG({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),oV||(oV=eu.createElement("path",{d:"M12 9a3 3 0 110 6 3 3 0 010-6zm0 1.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm-1.5 9a.38.38 0 01-.375-.315l-.277-1.987a5.209 5.209 0 01-1.268-.743l-1.867.758a.377.377 0 01-.458-.166l-1.5-2.595a.37.37 0 01.09-.48l1.583-1.245L6.375 12l.053-.75-1.583-1.223a.37.37 0 01-.09-.48l1.5-2.595c.09-.165.293-.232.458-.165l1.867.75c.39-.292.795-.547 1.268-.734l.277-1.988A.38.38 0 0110.5 4.5h3a.38.38 0 01.375.315l.278 1.987c.472.188.877.443 1.267.736l1.868-.75a.369.369 0 01.457.164l1.5 2.595a.37.37 0 01-.09.48l-1.582 1.223.052.75-.052.75 1.582 1.223a.37.37 0 01.09.48l-1.5 2.595a.369.369 0 01-.457.165l-1.868-.75c-.39.292-.795.547-1.267.735l-.278 1.987a.38.38 0 01-.375.315h-3zM11.438 6l-.278 1.957a4.12 4.12 0 00-2.272 1.336l-1.808-.78-.562.975L8.1 10.65c-.3.877-.3 1.83 0 2.7l-1.59 1.17.563.975 1.822-.78a4.083 4.083 0 002.258 1.32L11.43 18h1.14l.278-1.957a4.138 4.138 0 002.257-1.328l1.823.78.562-.975-1.59-1.162c.3-.878.3-1.83 0-2.708l1.583-1.162-.563-.976-1.807.78a4.065 4.065 0 00-2.273-1.327L12.563 6h-1.125z",fill:"currentcolor"})))},"sgroup-data":function(e){return eu.createElement("svg",rG({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),aV||(aV=eu.createElement("path",{d:"M42.844 33.5v4h-4.818v4.818h-4V37.5h-4.818v-4h4.818v-4.818h4V33.5h4.818zM16 40h-4.4A3.6 3.6 0 018 36.4V11.6A3.6 3.6 0 0111.6 8H16v4h-4v24h4v4zM40 25.882h-4V12h-4V8h4.4a3.6 3.6 0 013.6 3.6v14.282zM24.134 32.276a7.671 7.671 0 01-5.918-2.818l3.068-2.566c1.4 1.678 3.528 1.616 4.458.93.256-.2.644-.476.066-1.37-.148-.222-.882-.776-1.876-1.24-.084-.038-.328-.124-.524-.2-1.182-.42-3.162-1.124-4.17-2.736-1.32-2.11-.6-4.77.812-6.306a5.73 5.73 0 014.15-1.816h.052c1.814.018 3.814.898 5.08 1.718l-2.168 3.358c-.964-.63-2.18-1.07-2.948-1.076A1.674 1.674 0 0023 18.68c-.386.422-.572 1.158-.37 1.48.27.432 1.566.892 2.12 1.088.332.118.618.22.872.34.966.448 2.708 1.4 3.546 2.692 1.568 2.424 1.146 5.142-1.05 6.762a6.756 6.756 0 01-3.984 1.234z",fill:"#231F20"})))},sgroup:function(e){return eu.createElement("svg",iG({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),sV||(sV=eu.createElement("path",{d:"M16 40h-4.4A3.6 3.6 0 018 36.4V11.6A3.6 3.6 0 0111.6 8H16v4h-4v24h4v4zM36.627 40h-4.4v-4h4V12h-4V8h4.4a3.6 3.6 0 013.6 3.6v24.8a3.6 3.6 0 01-3.6 3.6zM24.134 32.276a7.671 7.671 0 01-5.918-2.818l3.068-2.566c1.4 1.678 3.528 1.616 4.458.93.256-.2.644-.476.066-1.37-.148-.222-.882-.776-1.876-1.24-.084-.038-.328-.124-.524-.2-1.182-.42-3.162-1.124-4.17-2.736-1.32-2.11-.6-4.77.812-6.306a5.73 5.73 0 014.15-1.816h.052c1.814.018 3.814.898 5.08 1.718l-2.168 3.358c-.964-.63-2.18-1.07-2.948-1.076A1.674 1.674 0 0023 18.68c-.386.422-.572 1.158-.37 1.48.27.432 1.566.892 2.12 1.088.332.118.618.22.872.34.966.448 2.708 1.4 3.546 2.692 1.568 2.424 1.146 5.142-1.05 6.762a6.756 6.756 0 01-3.984 1.234z",fill:"#231F20"})))},"template-0":function(e){return eu.createElement("svg",lG({width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),pV||(pV=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.333 4.536c.412-.238.92-.238 1.333 0l8.928 5.155c.413.238.667.678.667 1.154v10.31c0 .476-.254.916-.667 1.154l-8.928 5.155c-.412.238-.92.238-1.333 0L6.405 22.31a1.333 1.333 0 01-.667-1.155v-10.31c0-.476.254-.916.667-1.154l8.928-5.155zm-6.928 7.08v8.769L16 24.77l7.594-4.385v-8.77L16 7.23l-7.595 4.385z",fill:"#231F20"})),vV||(vV=eu.createElement("path",{d:"M21.084 13.067v5.866l1.333.77v-7.41l-1.333.774zM16 8.587L9.58 12.294l1.333.77L16 10.133V8.588zM9.58 19.705L16 23.409v-1.542l-5.086-2.934-1.333.77z",fill:"#231F20"})))},"template-1":function(e){return eu.createElement("svg",cG({width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),mV||(mV=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.216 5.416c.467-.34 1.1-.34 1.567 0l9.153 6.65c.468.34.663.942.485 1.491l-3.496 10.76c-.179.55-.69.922-1.268.922H10.342c-.578 0-1.09-.372-1.268-.922l-3.496-10.76a1.333 1.333 0 01.484-1.49l9.154-6.651zm-6.802 8.239l2.897 8.917h9.377l2.897-8.917L16 8.143l-7.585 5.512z",fill:"#231F20"})),gV||(gV=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.35 14.61l-2.184 6.717-1.268-.412 2.183-6.717 1.268.412zM11.834 21.327L9.651 14.61l1.268-.412 2.183 6.717-1.268.412z",fill:"#231F20"})))},"template-2":function(e){return eu.createElement("svg",fG({width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),yV||(yV=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.333 4.536c.412-.238.92-.238 1.333 0l8.928 5.155c.413.238.667.678.667 1.154v10.31c0 .476-.254.916-.667 1.154l-8.928 5.155c-.412.238-.92.238-1.333 0L6.405 22.31a1.333 1.333 0 01-.667-1.155v-10.31c0-.476.254-.916.667-1.154l8.928-5.155zm-6.928 7.08v8.769L16 24.77l7.594-4.385v-8.77L16 7.23l-7.595 4.385z",fill:"#231F20"})))},"template-3":function(e){return eu.createElement("svg",hG({width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),bV||(bV=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.216 6.216c.467-.34 1.1-.34 1.567 0l9.153 6.65c.468.34.663.942.485 1.491l-3.496 10.76c-.179.55-.69.922-1.268.922H10.342c-.578 0-1.09-.372-1.268-.922l-3.496-10.76a1.333 1.333 0 01.484-1.49l9.154-6.651zm-6.802 8.239l2.897 8.917h9.377l2.897-8.917L16 8.943l-7.585 5.512z",fill:"#231F20"})))},"template-4":function(e){return eu.createElement("svg",dG({width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),xV||(xV=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 6.71c.476 0 .916.255 1.154.667l8.662 15.003a1.333 1.333 0 01-1.155 2H7.338a1.333 1.333 0 01-1.154-2l8.66-15.003A1.333 1.333 0 0116 6.711zm0 4L9.647 21.714h12.704l-6.353-11.002z",fill:"#231F20"})))},"template-5":function(e){return eu.createElement("svg",pG({width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),_V||(_V=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.328 6.661c0-.736.597-1.333 1.333-1.333h18.68c.735 0 1.332.597 1.332 1.333V25.34c0 .736-.596 1.333-1.333 1.333H6.661a1.333 1.333 0 01-1.333-1.333V6.66zm2.667 1.334v16.012h16.012V7.995H7.995z",fill:"#231F20"})))},"template-6":function(e){return eu.createElement("svg",vG({width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),wV||(wV=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.422 5.625a1.333 1.333 0 011.157 0l7.436 3.58c.365.176.63.51.721.905l1.837 8.048c.09.395-.004.81-.257 1.128l-5.147 6.453a1.333 1.333 0 01-1.042.502h-8.253c-.406 0-.79-.184-1.043-.502l-5.147-6.453a1.333 1.333 0 01-.257-1.128l1.837-8.048c.09-.396.356-.729.722-.905l7.436-3.58zm-5.7 5.704L8.17 18.125l4.346 5.45h6.969l4.346-5.45-1.552-6.796L16 8.306 9.721 11.33z",fill:"#231F20"})))},"template-7":function(e){return eu.createElement("svg",mG({width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),SV||(SV=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.357 6.125c.25-.25.59-.39.943-.39h7.4c.353 0 .692.14.942.39l5.233 5.232c.25.25.39.59.39.943v7.4c0 .354-.14.693-.39.943l-5.233 5.232c-.25.25-.589.39-.942.39h-7.4c-.354 0-.693-.14-.943-.39l-5.232-5.232c-.25-.25-.39-.59-.39-.943v-7.4c0-.354.14-.693.39-.943l5.232-5.232zm1.495 2.276l-4.451 4.451v6.296l4.451 4.45h6.295l4.451-4.45v-6.296l-4.45-4.45h-6.296z",fill:"#231F20"})))},"template-dialog":function(e){return eu.createElement("svg",gG({width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),EV||(EV=eu.createElement("path",{d:"M3.675 12.101l5.345 3.086.004-.002v-.794l-.004.003-4.658-2.69-.687.397zM13.69 11.69V6.31l.688-.397v6.174l-.687-.397zM9.024 2.815l-.004-.002-5.358 3.093.687.397 4.67-2.697.005.003v-.794z",fill:"currentColor"})),kV||(kV=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.02.75l7.144 4.125v8.25L9.02 17.25l-7.145-4.125v-8.25L9.02.75zM2.563 5.272L9.02 1.544l6.457 3.728v7.456L9.02 16.456l-6.457-3.728V5.272z",fill:"currentColor"})))},"template-lib":function(e){return eu.createElement("svg",yG({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),OV||(OV=eu.createElement("path",{d:"M7.445 15.5H4.146c-.357 0-.646.269-.646.6v3.062c0 .331.29.6.646.6h3.299c.357 0 .646-.269.646-.6V16.1c0-.331-.29-.6-.646-.6zM13.652 15.5h-3.299c-.357 0-.646.269-.646.6v3.062c0 .331.29.6.646.6h3.299c.357 0 .646-.269.646-.6V16.1c0-.331-.29-.6-.646-.6zM19.855 15.5h-3.299c-.357 0-.646.269-.646.6v3.062c0 .331.29.6.646.6h3.299c.357 0 .646-.269.646-.6V16.1c0-.331-.29-.6-.646-.6zM5 6.267a.5.5 0 01-.5-.5V5a.5.5 0 01.5-.5h6.282a.5.5 0 01.5.5v.767a.5.5 0 01-.5.5H9.669a.5.5 0 00-.5.5V13a.5.5 0 01-.5.5H7.617a.5.5 0 01-.5-.5V6.767a.5.5 0 00-.5-.5H5zM13.299 13.5a.5.5 0 01-.5-.5V5a.5.5 0 01.5-.5h3.059c.645 0 1.201.132 1.67.396.47.26.834.625 1.09 1.094.254.466.382 1.008.382 1.626 0 .62-.13 1.164-.391 1.63a2.674 2.674 0 01-1.107 1.077c-.48.255-1.048.382-1.707.382h-1.696a.5.5 0 01-.5-.5v-.714a.5.5 0 01.5-.5h1.309c.314 0 .576-.057.786-.171.213-.114.375-.274.484-.48.11-.207.164-.449.164-.724 0-.279-.055-.519-.164-.721a1.123 1.123 0 00-.484-.475c-.213-.11-.475-.167-.786-.167h-.527a.5.5 0 00-.5.5V13a.5.5 0 01-.5.5H13.3z",fill:"#333"})))},text:function(e){return eu.createElement("svg",xG({width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),CV||(CV=eu.createElement("path",{d:"M23.957 7.205v2.667h-6.624v14.923h-2.667V9.872H8.042V7.205h15.915z",fill:"#231F20"})))},"text-bold":function(e){return eu.createElement("svg",bG({width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),AV||(AV=eu.createElement("path",{d:"M9 18.87a1 1 0 01-1-1V6a1 1 0 011-1h3.465c1.406 0 2.527.323 3.363.969.836.633 1.254 1.495 1.254 2.584 0 .608-.146 1.14-.437 1.596-.279.456-.659.81-1.14 1.064-.469.253-.982.38-1.539.38v.057a3.71 3.71 0 011.691.342c.52.24.937.602 1.254 1.083.317.481.475 1.077.475 1.786 0 .81-.196 1.52-.589 2.128-.38.595-.925 1.058-1.634 1.387-.71.33-1.552.494-2.527.494H9zm1.755-2.299h1.767c.62 0 1.108-.165 1.463-.494.355-.33.532-.785.532-1.368 0-.583-.177-1.039-.532-1.368-.355-.342-.842-.513-1.463-.513h-1.767v3.743zm0-5.985h1.672c.557 0 .994-.146 1.311-.437.317-.304.475-.71.475-1.216 0-.52-.158-.918-.475-1.197-.317-.291-.754-.437-1.311-.437h-1.672v3.287z"})))},"text-italic":function(e){return eu.createElement("svg",_G({width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),MV||(MV=eu.createElement("path",{d:"M8.066 18.87a.912.912 0 010-1.824h2.031l1.615-10.222H9.977a.912.912 0 110-1.824h5.837a.912.912 0 010 1.824h-2.031l-1.615 10.222h1.735a.912.912 0 110 1.824H8.066z"})))},"text-subscript":function(e){return eu.createElement("svg",wG({width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),TV||(TV=eu.createElement("path",{d:"M16.65 20.735c-.061 0-.118-.091-.17-.274a1.927 1.927 0 01-.074-.493c0-.055.008-.099.025-.132l2.197-2.685c.221-.277.332-.555.332-.835 0-.225-.075-.397-.225-.518-.15-.123-.345-.185-.586-.185-.16 0-.3.024-.424.073-.12.049-.245.114-.372.195a1 1 0 01-.122.074.23.23 0 01-.097.029.378.378 0 01-.244-.098.739.739 0 01-.181-.239.602.602 0 01-.068-.259c0-.163.084-.304.254-.425a1.78 1.78 0 01.649-.278 3.47 3.47 0 01.825-.098c.397 0 .737.074 1.02.22.287.143.504.344.65.6.146.255.22.548.22.88 0 .267-.047.519-.142.757-.091.237-.22.457-.386.659l-1.63 2.016h2.002c.09 0 .157.036.2.108.042.068.063.177.063.327v.146c0 .15-.02.26-.063.332-.043.069-.11.103-.2.103H16.65zM7.03 17.615c-.687 0-1.03-.105-1.03-.315 0-.105.053-.241.158-.408l3.404-5.326-3.024-4.833c-.105-.192-.158-.331-.158-.418 0-.092.087-.167.26-.222C6.82 6.03 7.082 6 7.43 6h.677c.532 0 .86.105.983.315l1.884 3.071 1.976-3.07a.68.68 0 01.37-.251c.162-.043.375-.065.641-.065h.64c.693 0 1.04.105 1.04.315 0 .118-.053.257-.159.418l-3.117 4.87 3.294 5.289c.099.154.148.29.148.408 0 .21-.346.315-1.039.315h-.64c-.266 0-.48-.021-.64-.065a.524.524 0 01-.343-.25l-2.2-3.544L8.664 17.3a.563.563 0 01-.353.269 3.317 3.317 0 01-.65.046h-.63z"})))},"text-superscript":function(e){return eu.createElement("svg",SG({width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),PV||(PV=eu.createElement("path",{d:"M7.03 17.615c-.687 0-1.03-.105-1.03-.315 0-.105.053-.241.158-.408l3.404-5.326-3.024-4.833c-.105-.192-.158-.331-.158-.418 0-.092.087-.167.26-.222C6.82 6.03 7.082 6 7.43 6h.677c.532 0 .86.105.983.315l1.884 3.071 1.976-3.07a.68.68 0 01.37-.251c.162-.043.375-.065.641-.065h.64c.693 0 1.04.105 1.04.315 0 .118-.053.257-.159.418l-3.117 4.87 3.294 5.289c.099.154.148.29.148.408 0 .21-.346.315-1.039.315h-.64c-.266 0-.48-.021-.64-.065a.524.524 0 01-.343-.25l-2.2-3.544L8.664 17.3a.563.563 0 01-.353.269 3.317 3.317 0 01-.65.046h-.63zM16.65 9.147c-.061 0-.118-.09-.17-.273a1.927 1.927 0 01-.074-.493c0-.055.008-.1.025-.132l2.197-2.686c.221-.276.332-.555.332-.834 0-.225-.075-.398-.225-.518-.15-.124-.345-.186-.586-.186-.16 0-.3.025-.424.074a2.28 2.28 0 00-.372.195c-.042.03-.083.054-.122.073a.23.23 0 01-.097.03.378.378 0 01-.244-.098.739.739 0 01-.181-.24.602.602 0 01-.068-.258c0-.163.084-.305.254-.425a1.78 1.78 0 01.649-.278A3.47 3.47 0 0118.369 3c.397 0 .737.073 1.02.22.287.143.504.343.65.6.146.254.22.547.22.88 0 .266-.047.518-.142.756-.091.238-.22.457-.386.66l-1.63 2.016h2.002c.09 0 .157.036.2.107.042.069.063.178.063.327v.147c0 .15-.02.26-.063.332-.043.068-.11.102-.2.102H16.65z"})))},"transform-flip-h":function(e){return eu.createElement("svg",kG({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),IV||(IV=eu.createElement("path",{d:"M42 22H6v4h36v-4zM40 18.27h-4V12H12v6.27H8V11.6A3.6 3.6 0 0111.6 8h24.8a3.6 3.6 0 013.6 3.6v6.67zM40 36.016v.4a3.6 3.6 0 01-3.6 3.6H36v-4h4zM12 40.016h-.4a3.6 3.6 0 01-3.6-3.6v-.4h4v4zM12 34.55v-4.534H8v4.534h4zM40 34.55v-4.534h-4v4.534h4zM33.4 36.016h-4.535v4H33.4v-4zM26.267 36.016h-4.534v4h4.534v-4zM19.135 36.016H14.6v4h4.534v-4z",fill:"#231F20"})))},"transform-flip-v":function(e){return eu.createElement("svg",OG({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),LV||(LV=eu.createElement("path",{d:"M22.001 6v36h4V6h-4zM18.271 40h-6.67a3.6 3.6 0 01-3.6-3.6V11.6a3.6 3.6 0 013.6-3.6h6.67v4h-6.27v24h6.27v4zM36.001 8h.4a3.6 3.6 0 013.6 3.6v.4h-4V8zM40.001 36v.4a3.6 3.6 0 01-3.6 3.6h-.4v-4h4zM34.535 36h-4.534v4h4.534v-4zM34.535 8h-4.534v4h4.534V8zM36.001 14.598v4.534h4v-4.534h-4zM36.001 21.732v4.534h4v-4.534h-4zM36.001 28.866V33.4h4v-4.534h-4z",fill:"#231F20"})))},"transform-rotate":function(e){return eu.createElement("svg",EG({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),RV||(RV=eu.createElement("path",{d:"M30.49 35.566l-7.938 6.727-.623-3.439A15 15 0 0110.92 16.66l3.031 1.704a11.523 11.523 0 007.315 16.828l-.569-3.13 9.793 3.504zM37.082 31.341l-3.031-1.704a11.523 11.523 0 00-7.315-16.828l.569 3.14-9.793-3.514 7.937-6.727.623 3.439a15 15 0 0111.01 22.194z",fill:"#231F20"})))},undo:function(e){return eu.createElement("svg",AG({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),NV||(NV=eu.createElement("path",{d:"M12.375 9c-1.988 0-3.787.75-5.175 1.95l-2.7-2.7V15h6.75l-2.715-2.715a5.965 5.965 0 013.84-1.41 6.009 6.009 0 015.7 4.125l1.777-.585C18.81 11.273 15.862 9 12.375 9z",fill:"currentcolor"})))},"zoom-in":function(e){return eu.createElement("svg",CG({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),jV||(jV=eu.createElement("path",{d:"M12.665 8.667h-4v4H7.332v-4h-4V7.334h4v-4h1.333v4h4v1.333z",fill:"currentcolor"})))},"zoom-out":function(e){return eu.createElement("svg",MG({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),DV||(DV=eu.createElement("path",{d:"M12.665 8.667H3.332V7.334h9.333v1.333z",fill:"currentcolor"})))},"shape-ellipse":function(e){return eu.createElement("svg",oG({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),uV||(uV=eu.createElement("path",{d:"M40.718 13.822v4H35.9v4.818h-4v-4.818h-4.818v-4H31.9V9.004h4v4.818h4.818z",fill:"#231F20"})),lV||(lV=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.074 17.898C11.609 19.62 10.342 21.81 10.342 24c0 2.191 1.266 4.38 3.728 6.102 2.457 1.719 5.96 2.846 9.93 2.846 3.97 0 7.472-1.127 9.93-2.846 2.462-1.723 3.728-3.911 3.728-6.102h4c0 3.855-2.235 7.14-5.436 9.38-3.208 2.244-7.534 3.568-12.222 3.568s-9.015-1.324-12.222-3.568C8.576 31.14 6.342 27.854 6.342 24c0-3.856 2.238-7.142 5.44-9.38 3.208-2.244 7.534-3.568 12.218-3.568v4c-3.965 0-7.468 1.127-9.926 2.846z",fill:"#231F20"})))},"shape-rectangle":function(e){return eu.createElement("svg",uG({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),dV||(dV=eu.createElement("path",{d:"M43.961 12.61v4h-4.818v4.818h-4V16.61h-4.818v-4h4.818V7.792h4v4.818h4.818zM35.14 25.43v5.97H12.86V16.61h13.462v-4H8.86V35.4h30.28v-9.96l-4-.01z",fill:"#231F20"})))},"shape-polyline":function(e){return eu.createElement("svg",sG({xmlns:"http://www.w3.org/2000/svg",width:1e3,height:1e3,viewBox:"0 0 1000 1000"},e),hV||(hV=eu.createElement("path",{d:"M200 210l100 590 80-600 140 600h180l150-650",fill:"#fff",stroke:"#000",strokeWidth:40})))},"shape-line":function(e){return eu.createElement("svg",aG({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),cV||(cV=eu.createElement("path",{d:"M41.9 12.916v4h-4.818v4.818h-4v-4.818h-4.818v-4h4.818V8.098h4v4.818H41.9z",fill:"#231F20"})),fV||(fV=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.292 12.756a2 2 0 012.828 0l23.376 23.376a2 2 0 11-2.828 2.828L10.292 15.584a2 2 0 010-2.828z",fill:"#231F20"})))},"not-found":function(e){return eu.createElement("svg",bH({width:85,height:85,viewBox:"0 0 85 85",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),cF||(cF=eu.createElement("path",{d:"M33.494 0a33 33 0 0125.362 54.12l24.762 24.757a3 3 0 01-3.828 4.59l-.42-.342-24.756-24.762A33 33 0 1133.494 0zm0 6a27 27 0 100 54 27 27 0 000-54z",fill:"#525252",fillOpacity:.4})),fF||(fF=eu.createElement("path",{stroke:"#005662",strokeWidth:6,strokeLinecap:"round",d:"M22.243 22.558L44.355 44.67M45.191 22.243L23.079 44.355"})))},"save-1":function(e){return eu.createElement("svg",PG({width:10,height:12,viewBox:"0 0 10 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),zV||(zV=eu.createElement("path",{d:"M9.667 4H7.001V0H3v4H.334l4.667 4.667L9.667 4zM.334 10v1.333h9.333V10H.334z",fill:"currentcolor"})))},"open-1":function(e){return eu.createElement("svg",RG({width:14,height:12,viewBox:"0 0 14 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),FV||(FV=eu.createElement("path",{d:"M13.665 2H7L5.665.667H.332v10.666h13.333V2zm-1.333 8H1.665V3.333h10.667V10z",fill:"currentcolor"})))},reset:function(e){return eu.createElement("svg",IG({width:15,height:12,viewBox:"0 0 15 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),VV||(VV=eu.createElement("path",{d:"M8.666 0a6 6 0 00-6 6h-2l2.667 2.66L5.999 6H4a4.663 4.663 0 014.667-4.667A4.663 4.663 0 0113.333 6a4.663 4.663 0 01-4.667 4.667 4.63 4.63 0 01-3.293-1.374l-.947.947A5.97 5.97 0 008.666 12a6 6 0 000-12zm-.667 3.333v3.334l2.834 1.68.513-.854L8.999 6.1V3.333H8z",fill:"currentcolor"})))},close:function(e){return eu.createElement("svg",LG({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),UV||(UV=eu.createElement("path",{d:"M13.462 12.046l6.37 6.37-1.413 1.415-6.371-6.371-6.327 6.326-1.414-1.414 6.327-6.326-6.372-6.372L5.676 4.26l6.372 6.372 6.417-6.418 1.414 1.414-6.417 6.418z",fill:"#333"})))},general:function(e){return eu.createElement("svg",NG({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),ZV||(ZV=eu.createElement("path",{d:"M4.5 6.25H2a.5.5 0 00-.5.5v2.5a.5.5 0 00.5.5h2.5a.5.5 0 00.5-.5v-2.5a.5.5 0 00-.5-.5zM13.5 2.5h-3a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3A.5.5 0 0014 6V3a.5.5 0 00-.5-.5zM13.5 9.5h-3a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5zM5 8h2.5M10 11.5H9A1.5 1.5 0 017.5 10V6A1.5 1.5 0 019 4.5h1",stroke:"#5B6077",strokeLinecap:"round",strokeLinejoin:"round"})))},"general-white":function(e){return eu.createElement("svg",jG({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),HV||(HV=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.57 11.839v5.466h5.466v-5.466H32.57zm-4-1.2a2.8 2.8 0 012.8-2.8h7.866a2.8 2.8 0 012.8 2.8v7.866a2.8 2.8 0 01-2.8 2.8H31.37a2.8 2.8 0 01-2.8-2.8V16.57H26V26h-.009l-.023 5.422h2.602v-1.926a2.8 2.8 0 012.8-2.8h7.866a2.8 2.8 0 012.8 2.8v7.866a2.8 2.8 0 01-2.8 2.8H31.37a2.8 2.8 0 01-2.8-2.8v-1.94h-3.004a3.6 3.6 0 01-3.6-3.6v-.005l.025-5.817h-2.569v1.932a2.8 2.8 0 01-2.8 2.8H8.756a2.8 2.8 0 01-2.8-2.8v-7.866a2.8 2.8 0 012.8-2.8h7.866a2.8 2.8 0 012.8 2.8V22h2.579v-5.83a3.6 3.6 0 013.6-3.6h2.969v-1.932zM9.956 21.267v5.466h5.466v-5.466H9.956zM32.57 36.163v-5.466h5.466v5.466H32.57z",fill:"#FFF"})))},stereo:function(e){return eu.createElement("svg",DG({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e),GV||(GV=eu.createElement("path",{fill:"url(#stereo_svg__pattern0)",d:"M0 0h16v16H0z"})),WV||(WV=eu.createElement("defs",null,eu.createElement("pattern",{id:"stereo_svg__pattern0",patternContentUnits:"objectBoundingBox",width:1,height:1},eu.createElement("use",{xlinkHref:"#stereo_svg__image0_2343_3998",transform:"scale(.00195)"})),eu.createElement("image",{id:"stereo_svg__image0_2343_3998",width:512,height:512,xlinkHref:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAACAASURBVHic7d153F1Fffjxz/MkISRsCYQAYQ37vi+CiBiiIBJ31Fqr/dkKVvtya1WsrVqXFrWiuFVcqVRFcakGEBt2ZZFN2XcJu4EkBEJC9uf3x+S+SJ88y71n5py595zP+/WaP9CcOzPnuffM95wzM1+QJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJKlSfbkboEaZBuwCjF/73xsCTwJzgXmZ2iR1i42BPYFJa/97HLCM8Pt4BFiZp1mS1Jk+4HDgc8CVwAJgYISyFPg98GngGMLFT6qzbYH3ALOBPwFrGP73sQq4D/gWcDKweYb2StKItgFOBx5g5AF/tLJg7edsV23zpVKNA/4W+B2wmuK/j1XAz4AXVdt8SVrfVsAZhDv5mIF/cFkB/DewfXVdkZIbB/wN4U4/5e9jALgeeFl1XZGk550KPEv6C9u65RngvcCYivokpXIwcAfl/j4GCIHy1Ir6JKnhtgR+RfkXtnXLtYTJhFK36wc+BCynut/HAuDEKjonqbn2IsxMrnLwb5WHgP3L76JU2Hjgl+T5fawC3lV+FyU10YGEZXs5Lm6t8gxwXNkdlQqYCPwveX8fA4QVOJKUzAHAQvJf3FpBwAHldlfqyHjgCvL/Nlrlw+V2V1JTTCasRc59UVu3PIorBNQ9vkn+38S6ZQ3w5lJ7LKn2+gkbluS+oA1VrgPGltd1qS1/Tf7fwlBlKbBfed2WVHfvIf+FbKTyD+V1XRrVLqTfAyNluZoQxEtSRzZn9K18c5clwM5lnQBpFD8n/29gtPJ3pfVeUm19lfwXr3bKeWWdAGkEx5L/u99OWcTziYYkaVQ7ELKQ5b54tVNWAdPLOQ3SsH5H/u9+u8VXZZLa9nHyX7Q6KV8s5zRIQ9qT/N/5TspcnDArqQ39xGf1G1wWEe6Yfg5cBsxP/PlPAxPKOBnSEL5A2u/vKuAmwoqbC4B7En/+APDqUs6EpFo5lnQXnRuAk4ANBtXRD8wErkxY1wnpToE0rH7S7Yg5n/B4fsoQ9ewKfIWQGTNFXd9OdQIk1dcnSHPBOZ3RlyD1ERKnrElQ3xlx3Zbasg9pfh/XAFu3Ud+RwOMJ6ns4ptOSmiHFfuand1jnPyao8/YCfZU6dQrx39WbgY07qHNfYHGCevcu1GNJjTCG8D495iJzI51vPtIHXBxZ72rWf9UgpXY2cd/TlYSsmp16Z2S9A8CbCtQrqSGmEX+ReWXBul+YoO5dCtYttSt2+d/3C9Y7Fngwsu7TCtatGnFrSA1ni8jjnwEuKnjs1cS/p9wx8nhpNLG/kaIbV60CfhZZt78PGQBoWJtHHn87YdZyEQOEpVAxtoo8XhpNbADwh4hjb4ys29+HDAA0rNgtQ+dHHv9U5PGrIo+XRrNZ5PExvxF/H4pmAKDhLIs8ftPI42Mvrisjj5dGE/sb2STi2NjfR9Gnc6oRAwAN59nI4/cn7vt1YGT9yyOPl0YT+xs5KNOxYAAgDAA0vEcjj59M2OGviMOIT+rzYOTx0mhifyMnFzyuH3htZN3+PiQNqx9YStxSo98R1vV3anZkvcuBcQXqlTpxDnHf0+eAnQvU+7bIegeA1xWoV1KDXE/8habT9cYpdle7pUBfpU59iPjv6lXA+A7q3BVYkKDePQv1WFJjfJ74C80awoWynScBpxIm78XWabITVeFw4r+rA4Qttye3Ud9+hHS+sfUtwJTAkkZxPGkucAPApcCLGDoQOJyQ+jRVXSemOgHSCMYCC0nznX0Y+Btg4hD1bA38G2HVQYq6vpfqBKi3FXk/q+YYBzwCTE34mY8SNkCZT9hs6ADS7kq2iLDJibOcVYWzCK+tUlkKXEf4nfQBexBWxIxJWMdJhIBbkkb0RdLdmVdRzi7lLEhDS5G3osqygM7mHEhqsJ1J816+irKa8J5UqtJV5P/ut1v+paRzIKmmvk/+C1c75YdlnQBpBLPI/91vpywgfodOSQ2zA2HXs9wXsJHKSlzapHwuIf9vYLTykdJ6L6nWPkz+C9hI5V/L67o0qr0IG1Dl/h0MV/6A7/41iKsA1K4xhPXKM3I3ZAg3AEcxcgKgDQmzn48EtidkQ7sFuAj4Y9kNVNcaT3iEfzQwjbB65A7CLPmbO/ys9wNnJG1dGssIS21vzd0QSb1rW+DP5L+bWbcsIuyONpw+4J2EZYfDfcZlwBGFz4p60TjgfcDjDP+9uBzYt4PP7AN+PsLn5Sp/10EfJGlY+xNykee+qA0AS4BjRmjrGOC7bX7WGuAnhPkOqreZwG20/x3rZGOpCcBv2/zsKsqnO2i7JI3qWOAZ8l7YngOOG6WdRfYwWAJ8gvDKQPWyGyHI6/Q7sYywYVW7Nie8lso9+H+xgzZLUtsOAeaR58L2JKPPRTiCcFdftI4/Yca0upgEfIHwfr/o9+HGDuvcBJgTUV9MWQN8Cud4SSrRdlT/uPNGYKc22nZeovouJbz2UO8ZQ9im9wnSfBdGe+I02FjC06TViepvpzwNvLbDdkpSIWOBjxL2MC/zwvYc8O+0t5RpLLA4Yd2rCZshpcyJoHK9mLD0LeV3sOgM/5cC9yVuy1DlImCXgm2UpMKmA+eS/m6nNTlvegdt2T1xG1plIfBewgxydaedKPaev51ycUS7NgT+mXTZA9ctdwAvj2ibJCWxJ/AN4lcKLAC+TLHH7wdE1t3OBfeEAu1SeTYivPcu80nU7xK0cxPgg8CdkW1ZBcwGXkV44iVJXWND4DXA1wgXu9GeDKwkzJz+MvB64mbhbzVKXanKHGCfiHYqXh9wMjCX8v/e5yVu+2HAx4EraS9wmQv8AHg3YdMiKYqzRFWV8YRH89sS7oI2I9zlt8pcwhK8VOYCOyb8vOGsAL5CuPt8uoL69LzDgDMJuztW4TTgsyV9dj9hD4qdgCnAxoSthecTVr08Tlh1I0kaxaep5ilAq8wD3kG4kKtc2wBnU+3s+lW4SZQk9YTJ5Nmn4CZG3p1QxY0jTMJ8mur/rmdW0D9JUiLHky9D24+p5hVEU7wGuJ88f8vrCI/kJUk95ERGTgRUZlkKfJIwQ13F7AdcQp6/3wAhA+YWpfdSklSKaYTZ0zFbA8eUh4E346TbTmxBWEGykjx/s/nAu3BOhyTVwmHA1eS7m7yO6mas96qxpN2+t9OyEjgL2LLsjkqSqtVaN/4QeQaY1s6G25fd0R50HHAL+QK0SwivHCRJNbYRIVHLc+QZbJ7FtMMtu1Le9r3tlHsJQaEkqUG2JyT6yTX4PAS8tfRedqdWELaMvEFYOwmmJEk19RLgZvIFAk1KO9xHCHoeJ8+5XkMI+rYuu6OSpN7QTxiYcmwgNMDzaYfrPAHtcOAa8gVavwdeUHovJUk9aTJwOvk2EVoIfBjYoOyOVmhbQnCTaynmI4TgzqWYkqRR7QFcQL671bsIGxn1somEYGYxec7hUkIw505+kqSOzQRuJ18gMAfYu/RepjcLeIB85202IbueJEmFtRLRLCLPYLaCkJBms7I7msDBhBz3uQb+G4EXld5LSVKjbEEYiFeRZ3CbTwhExpTd0QI8N5Kk2vMu93k+HZEkNU7T33M7P0KS1FgTaN5Md1dISJK0VhPWurtHgiRJwzicvGmHy9jtrrVLYq40vU3YJVGSVAN12u/ePAmSJHWoW9IOF8l4twNmSpQkKUov5bzvlqBlwzbbK0lS15sB3EK+QOASYL9h2lan1xaSJHWdscAp5JtQtxI4i/87oe4w8k5cvA44stjplCSpt2wBfJUwIOcYdOcD7wN+QL6liw8Db8Y0vZKkBtoDuJB8d985Smvzok0SnD9JknraLOA+8g/OZZfZwPRE50ySpFpoJdZ5mvwDdepyE3BMulMlSVL9TCFvat2UxTS9kiR16GDgt+QfxIsU0/RKkhRpFjCX/IN6u2UOsE8ZJ0KSpKaZSN60w+2Uu4FXlHUCJElqsu3Im3Z4qPIUpumVJKkSRwDXkHfgb6XpnVpyXyVJ0jr6Cfv3/5nqB//LgAPK76IkSRrOxoQMessof+A3Ta8kSV1mN8pLO7wE0/RKktTVjgNuJc3Av4YQVOxQaQ8kSVIh4wh37DGD/zzCZENJktRDDiEuALih+iZLqkJ/7gZIkqTqGQBIktRABgCSJDWQAYAkSQ1kACBJUgMZAEiS1EAGAJIkNZABgCRJDWQAIElSAxkASJLUQAYAkiQ1kAGAJEkNZAAgSVIDGQBIktRABgCSJDWQAYAkSQ1kACBJUgMZAEiS1EAGAJIkNZABgCRJDWQAIElSAxkASJLUQAYAkiQ1kAGAJEkNZAAgSVIDGQBIktRABgCSJDWQAYAkSQ1kACBJUgMZAEiS1EAGAJIkNZABgCRJDWQAIElSAxkASJLUQAYAkiQ1kAGAJEkNZAAgSVIDGQBIktRABgCSJDWQAYAkSQ1kACBJUgMZAEiS1EAGAJIkNZABgCRJDWQAIElSAxkASJLUQAYAUr2tyny8pC5lACDV27zI4x9P0gpJXccAQKq3ecBjEcf/IVVDJElStc4EBgqUNcA+GdorSZISmAYsofMA4Ic5GitJktI5mXBH3+7g/wCwZZaWSpKkpN4BLGf0wf82YOdMbZQkSSXYHzifsLxv8MC/APgYsFG21kmqTF/uBkjKYkvgSGB74FngfuBaXPcvSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkVc6NgKRm2h04DNgJWAz8CbicsCmQJEmqmZcBlzB0YqBFhNTB22RrnSRJSmpX4Ce0lwnwWeATwIY5GipJkuJtRBjMl9F+KuBWeQh4a+UtliRJhfUTBu/H6XzgH1wuJWQRlCRJXexw4BriB/51y2rg+8DUCvshSZLasC1hkB5qgl+qshD4MLBBRX2SJEnDmEgYlBdT3sA/uNwFnFhF5yRJ0vpmAQ9Q3cA/uMwB9i69l5IkCYCDgSvJN/CvW1YQ9g/YrNQeS5LUYFsQBttV5B/4B5f5wHuBMaX1XpKkhhlHGFwXkX+gH63cCLyonNMgSVJzzATuIP/A3mmZTcg1IEmSOrAHcAH5B/KYshQ4Hdg48bmRJKl2JhMGzeXkH8BTlUcIOxOagVSSpEFa2/c+Qf4Bu6zye+AFqU6YJEm9bgZwM/kH6CrKGsKOhVsnOXOSJPWgXYBfkG8wfpB8rxqeBj6I2wpLkhqklab3OfIMvs+urX9DYFfgJ5naMQDcC5wcczIlSep2faRL01ukjPT4fQZwS6Z2DQCXAPt1djolSep+hwFXk2+AvQ44cpQ2jgVOId9ExJXAWcCWo59OSZK6WxVpekcqRZbgTSZsObwyU5sXEnY+HNtBmyVJ6goTCGl6nyHPINrahGeTiD7sCVyYqf0DwJ3AyyPaL0lSpWYBfyLfwDkbmJ64P/dl7s8uCfsjSVJSBwFXkG+gvAk4pqS+tRISPZ2pb620w5uW1D9JkjqWO01vlal4tyFM1MvV18cIExVNOyxJyiZ3mt7WXfFmZXd0CAcDv+2wvSnLDcDRpfdSkqRBZgK3kW8AnAPsU3ovRzcLmEuec7CGsInRjmV3UpKk3YHzyTfw3w28IqL9k4F3AucQNt/5X+ArwCsJCYmKmEhY8bB4lLaXVZZg2mFJUkkmkTdN71OEQbbo3vlj1h6/ZIQ6Yrfl3Y68ex48jGmHJUmJtNL0ziPPoLaaMKhOjejDeODnHdR5BXBgRH1HANd2UF/qcu3aNkiSVMixwB/JN5BdBhyQoB9fLlB3K/DYqmCdrcDpzwXqThk4FW2/JKmBticMHrkG/ocIg2cKhxH3SH4R8AHCiociNiZkHlwW0YaYsnht/eMLtl+S1AATyZumdwnPp+lN5UeJ2nYXcZMPdyNv2uF7MO2wJGmQPsLg8CB5BqfWcrYdSujXgsRtvRjYN6JNxwG3Jm5TJ2VOZPslSTVxKHAV+Qak64GjSurbtJLavAL4ImFlRBGttMNPltS+0Uor7fCUgu2XJPWwaYRBYDV5BqFHCYNg0bX37Zhech+eBE6l+La8m5N3C+UFVLeFsiQpsw0IF/1caXqXEwa9mDS97dqQagbXO4ATItq5F3BRBe0cqf3HR7RfktTlZgH3k2+gmQ3sXHov/6/rE7W9nfJT4tIQN/HvI0kqUZPvMP++zTamKs8Bn6H4trytJzS50g63ntCYdliSethY4PPke8f8BHHvyFPYALiT6vseO8dhW/JuK/wIYSMoSVKP2YR86WpXAGdQfJZ8avuSfjlgu+V64IURbc+5rfAq4N0RbZckZXAOeQaNbknTO9iBhEyCOc7JGuC/CCsvisi5T8Nq4GUF2y1JqtgrqX6guAs4sYrORdiI8H4+106Hi4F/ovhOhxtnav9DhNdJkqQuN4fqBodWmt5e2mu+lesg1/v12FwHOXI1vDaivZKkCkygmoFtFWEjoS2r6VYpjqW3sx2+BLi5orZ+L6KdkqQK7E35g8HlhHfqddBK2zuPPEFAK23v1C5v/xUF2ydJqsixlDcIPEB9M8pNAk4nX9re2Fcpk4EvEVZglNG+uwu2S5JUkZeQ/uLfStM7obpuZLM7YUe8HEFAa6A9qQvbbwAgSV0uZQDQStO7Y6U96A4zgdvIFwjELqdM3X4DAEnqcqkCgBuAoytue7cZR9iWdxF5goAVhG15N+uC9hsASFKXiw0AFgJvo9w0vb1mC/Km7Z1PXNreqcDZkW0wAJCkLhcbAFxafZN7xoGE2fA5goAB4CbgmIJt3z2ybgMA1Yp3OJI68UfgxYSdFh/IUP9BhABkNnFph6XGMwCQVMRswgS9jxFWSFTtJOB24O0Z6pZqwQBAUlHPAZ8C9gR+SHhMXqUJwHeAL1Rcr1QLBgCSYj0C/CUhbe81Ger/AGHSpqQOGABISuV6wrLJ/wc8XnHdZ9CMTZqkZAwAJKW0hrDcbg/gs8DyiurdHHhTRXVJtWAAIKkMi4HTgN2Acyqqc0ZF9Ui1YAAgqUwPEzL1zQBuKbmuXUr+fKlWDAAkVeEy4BDg74EFJdWxRUmfK9WSAYCkqqwCvkZ4LfBZwj7/kjIxAJBUtacI8wP2By7M3BapsQwAJOVyN/AK4KXAHZnbIjWOAYCk3C4m7PH/ydwNkZrEAEBSN1gB/CB3I6QmMQCQJKmBDAAkSWogAwBJkhrIAECSpAYyAJAkqYEMACRJaiADAEmSGsgAQJKkBjIAkCSpgQwAJElqIAMASZIayABAkqQGMgCQJKmBDAAkSWogAwBJkhpobMLPOQg4CjgQmAJssbYALAaeBO4D7gCuAm4FBhLVL0lSr9oNOBI4ApgGbE4YPycAi4BngXuBe4DrgGuA5VlautZY4JXAL4ElhMG8k/IE8C3gaKCv4rar3l5C59/Hdcul1TdZwO7E/d3uzvz5UicOAb4OzKPz7+JSYDbwBmDDKhu9EfBx4LECjR6u3AK8CRhTYT9UXwYAvckAQHXXB7wZ+CPpxs8ngH8CNiu74ScDDyZs+OByM/DCMjuhRjAA6E0GAKqzw4DfUd74uRB4LyXM7dsGuKLEhq9b1gBnAuNTd0KNYQDQmwwAVEfjCGPaGqoZQy8Htk3V+GOAxytq+LrlemD7VJ1QoxgA9CYDANXNtpR71z9ceRI4brTGjfao4K+AS4Ct2+trUocSVgvslaFuSZJi7APcSJ7X2lOACwlz64Y1UgDweuB7pFsqWMT2hFcPe2RsgyRJndgVmANslbENGwA/IEw6HNJwAcCJaw/shln5WwK/IayNlCSpm21PeHK+Te6GEMb4s4GXDfd/DrYdcA4heugWOwI/I0ymkCSpG/UTxs8dcjdkHeOAHwPTB/8fgwOAVuM3r6BRnXoBYf8BSZK60T8BL87diCFMAn7IoKf6gwOADwDHVtSgIj4E7Ju7EZIkDXII8LHcjRjBC4B3r/s/rBsATAI+WmlzOjcO+GruRkiSNMi/0f2vqT8JTG39x7oBwPsJQUC3ezEwI3cjJEla6yiGmWjXZTYjPOkHng8AJhG2EOwV3f6kQpLUHP+auwEdeBdrb/ZbAcAbKTmRQGIzCLt6SZKU03Ta2HWvi2zC2g2CWgHA6xJ++FzgE4RBejdgT+DVwDcJOY1T+YuEnyVJUhGvJ11K+8XAfwKvAvYmbCh0HOHd/dxEdUDY5RcIWwauJH7v4RXABxl558ApwLkJ6hoAbojpvWrNXAC9yVwA6kW/J82Y9kPCGDmccYSVcMsT1LW6VddfJPiw5cAJHZyw0xN1oBv3K1B+BgC9yQBAvWYKabL8nd5BnScAyxLUeXI/adbVfwC4qIN//xFgdmSd/cDhkZ8hSVJR+xD/+P9XhDGxXRcRnrbHOjJFAHAL4Z1FJwYIqw5WRda9Z+TxkiQVFTt+rgTeQxgTO/F14LbIuvfoJz7d7jcIj0A69QDw68i6d408XpKkovaOPP5C4MECx60Gzoqse7d+4jf/uSzi2Esi654cebwkSUXFLp+PGQOjx89+4rcufCDi2LmRdW8aebwkSUXFZs2dm+lYgE36ie9AzASI2OAjdg6BJElFxY5hOcfP1f2EJXwxdo44dqfIuhdEHi9JUlErIo/POn72Aw9FfshLI47tZO+AoTwZebwkSUXNjTw+5/g5v5/4DpwKjClw3N7AsZF1z4s8XpKkouZGHv8yiq1mGwf8bWTd8/qB+yM/ZC86zyQ4BvgyxQKHdbkdsFQfna6FTn281KnY8XMs8FU6nwvwj4RcOzFugJB0IHZLwRVrP6cd/cDXEtS5HNiwWL9Vc24F3Ju2IO7vdtUon+9WwEptE8L4FzuefYn2g4DXEybAx9b5cghL6VJ0YBUhC+CEERq+E3BBgroGgGvaPFlqHgOA3tRHmNhb9O929iifbwCgMlxBmjHtl8B2I9SzEfAZwiZAsXWtBiaNBZ4hDKbHRJ6EMcDHgVOAc4DfAg+vbfTOwCuA1wDjI+tp+Z9EnyOpOwwQbhD+arR/OIzzE7ZFatcc4sdPgFcSJgWeB/wGuJdwY70DMAN4I7BVgnogBC2LWv/xDtJEMFWVlcA2iU6E6scnAL1rf4rd4dzN6OuifQKgMuxEmkfyVZY3Q3gfD/B9emtG/fnA47kbISm5WwjvQzuxCvg7wo2BVLW5hIx+vWIRa5+gtwKA5cC3sjWnc6NdIKYAM4GTgVcTv2GCpOp8CDi3zX+7kvDa0ac2Sm0cIeX8yYTX13vz/Jg5WKdBa05fB5YO/h+3BOaT/9HEaOXnI3TsEMI7xKEex9xMeLc43B9Q9eErgN7XR1hePNKkwJuBF3Xwmb4CUDumAV8Anmb978CDwEcYegXanCH+fbeVPxNWLgzp7V3QwJHKcoZf+3ga7b2HuRE4ergToFowAKiPzYC3AN8mpE79JeHiPJPOg3kDAI1kQ8LgvpjRvwt3sv42vrsS7qxzj5MjlRE3D+ojpPfN3cjhyr8M0+7TOvycNYRHjDuMdDLUswwANBQDAA3ntYRNfTr5PjwKbD3ocz7a4WdUWa6gjc33diJMCMzd2MHlAoaO+A8mvAcs8plLCHsXTBztpKhnHA/cQdx3bQXhnd7kituu8hwJXEfc92I18D1cgVQn+wGXUPw7ceGgzxtHuIHIPV4OLkMFK8M6FHi2CxrdKnMJu4QN5X8SfP4jwFuJS82ovHYDfkLa790CwnvosRX2Q2lNA84izeYprfIs4cbBnUh71+bAmRS/eVy3vGDQZ28K3Jrgc1OVFXQ2VwaA19EdaxvnArsM08ZNE7fxd4SJhOodmwH/QZgfUtZ38GbCawX1jgnAP1Pujcz9hNnh6h3jgPcAC0n3PfjqEPVMJ0y4yz1+LifiO3oCQ8+ErKr8ae2JHM6MEupcDXyHDh6XKIt+wgZWVb6u+hlx+btVjZMJNw5VfS8uJjxKVndL8XpwqDJcUrqdCZMFc42fywi7C0Y5BHgsQ+OvYPRB+HUl1u9jvu51BHAteX5UywmPDjctvZfq1IGk25e907KasKHa1NJ7qU6V8Xpw3XLfCHVvDlxeYt3DlUdIuNptW9K8a2+nrCAsxWgnVfDLK2jPvSSIopTEjsCPyXOBH1wexXkj3WIq4T1/N7yyXEh4xOy8kfw2Az5Pua8HBwjv+0cyHvh0Be1olfMIgUdyryFEFmU1/Ao6ewe/XYltGVz+F9ing7YpnYnAv9Kda2x/z/qTgFSNccAHCFub5v4eDC63Ay8rr+saQT9hvXtV7+B/1Ga79iHMMyurHQ8Q9swo1UbAuwlrYlM1/CrguILtqfJR8ErCncaWBduqzs2i2ve5RcoawiPGHcs5BRrCTOA28v/tRytzCFvIqhqHE7LbVvk3PrmD9vUDJxHmjaSq/yHgVGCDDtoRrdWR71Ms0rqLkNv4oMh2vKZA3bFlPiEI8jFfeQ4lBIa5L+CdlGcJG4E4b6Q8exLWXuf+W3dSlgOfw3kjZdqB8HpwDdX+be+i+MC7P3AG4WlRp/U+Sdgd8wRGz4I5rFTvL/uAA4CjCBsJ7QhsTzgxy4DnCI/pbidE7TcT3q2nci4hV3LVbgPeT4jmlMbWwL8Bb6N38zbMBT4I/DRzO+pkEvBxQuBd+IKX2TzC0sTvEgYqxZsIfJjwe5tQcd0rgJcCVyb4rO0JS413IYyhOxGetq8GniEEkXcSVjHcCvyRMOdFhEkWs8kX4f+C4fcqUHvGE37Iz5D/ji1VuYwQGKu4MYTHm0+Q/++ZqpiPJF4f8BfAw+T5Gy4FXl96L9W2VvawXAPIMuB0Rsi0pGG9irCUJveFuYyyCvgGzhsp4ljCnU7uv2EZxXwkxeV+PXgD7vvQtaYQ1mnnWhL0JCEQaWcZY9PtQe+9zy1aniI84Rif5MzV2/aEuUVVv8/NUZbijUO7cl/b5+O1vWfkjhKvJ8yJ0Po2J2yfmWIf7qIX3Vzfi7sI+1dofRsRJgY/yBFTpQAAE9xJREFUR56/zXPkCzoeIjzSdl+J9eV+Pegkzh42i7A+MtcFfzZhQofCqolTyPc+d91lnLmXkc3BfSVa+ghLqR4kz9+itYxzB+Aw4OpM7RggZCw8Mu501sos8r4edBlnDbRmii4mz5doCeEx38Zld7SLzQBuId8P+RLWf283jhCQPJmpTSsIAcmUzk9nbRxKuZujjFauB144qE19hF0eH8/UpjWEVyBNzkeS+/XgXcCJpfdSldqOvO8WH6Z528fuSrn7cI9W7mX0jTpaqUFzvVtspR1u0rvFMtL0dlIeIwR/Iy013YiQDyTXK4km5iOZTLo0vUXKQsLNYqWb6qhaR1D9blHrliZsH9uLF8+9gIsytXeAsMb3+A7a24s2IAQ7ubKMFknm1AtBbK/L/XqwlczJ1ToN0U+4G8+Vs7n1hduq7I5WrA6PT2cRUlHnuuDPpp5ph2cB99O757UbXmPtH9H+bpX7vF5KPc+r2rAx4U5xGXm+fK071TosD6vTBKrWnWrOmcdnUo/lYXsBvybf9+JOwpapKeS+U61TPpLcT1YeJNysSKXnjB6t3EPvPubblrxzKx6hvLkVud9VP8ro76q7VbfMrSgjZ4fvqovrxdeDaojjCHst5/hiDhDyCuxbei/TmEDe9bmtTVSqWF3hvhLta90l51pd0bpLrmJ1hbPV21eH14NqgCZdwIpq4v4K3bRevVs1NYDuhvXqe5Xey+IOpz6vB9UQrUeYuR7zlfkIs6iDgCvI90O+CXhR6b0cWe5HmEvovkeYvkIL+0rkXOGwgs5XOJStzq8H1RB7Up9JTEVtgftwD9basz7X9+Ih8k9iyj2JdjFxk2jHAq8gpKA+F/gOcBpwSMHPg/x71ndDPpLW68Fcm6+ZY0HJ9foypiJadzWLIttetLTuajYru6MRXgLcTL7vxWVUn3a4Dsto30yYZDlcHVey/i6BnTgY+O0In192uZE8T8u64fXg9NJ7qUbqxY1MipoJ3F5x/9YtvbQPd2tAnEeec9UaEKeW3VHCRlrXVty/dcu1a9tQVB9wRgf1xc43mQXM7aC+1KWq+TIHE4KmXP28CTim9F5KwDZ0/1amRe0OnJ+pXwOEmc2vKKFfVZhEePS4nDznrpV2uIzlYXXZSvtfCtQdm8+jzvlIfD2oxjqEvMlMbiDuMeW6cg9evby2ebDcQdTdpAui6jR47UXcpN4HgTdQPAjJHUSlnBTn60GJ55eHzSXPD6G1PGzHgu1v0uPrqnXDa5SiaYdzf68HCI+vi36vh/KtRO26krAipqjcr1Fi85H08vdaKsVEwozkpeT5UbSWh03ooM25J7A1YR/uXrxTOoT8E9iO7qC97Uq5CU3sRMRenEi5B3BBpvYOkPbJllSK3I/52nlX6hK26vXCu9LW3JY6LmGbWlKbFwH/QPFXV7mXUraTj2Qy9Z3bIpXixcAfyPODGQAuBw4c1Kbcm9i4D3d3bKY0eLZ0Ezax2ankPtwNnBTRvtybKQ2VdtjXg1KEbnnMtzVuY9ttuiHt8HTyb2M7G9gl8ly2YyLVrNqJ3Y64G7ZT3o/ueD1Y9f4WUikmEdYeryDPjynXdsYDwDWEvcC1vonAxwnzN3L8bXI96h8gDHIz409hR6rKO78C+BLh0XkR44D3ER59N+17cT/w2oLnTepquxHueHL9uKosvZzKtmq590yvsiwkX46LDxVob0x5Engnxec05E6pXGXpxhwXUilmAreR/0dXRmntVug+3J07jLxZ08osrSyXWyY7W52bSJ5tamPzeewFXJSh3VUUXw+qkcaRN+1wGcV9uOPlzpteRrmE8F65GxxDvqW6PyXu95E7H0nqcj1wVMT5kHpeHR7z3QEcn/rENFzuFRspylAzy7vBceSb2f4c8BmK72yYOx9JiuLrQWmQXnzMtwD34S7bruRdHlak9MJyz62A/yLfvItHiduWdxp585EUKb4elEaRe3lYO6W1bntSSedA65tB3mVZ7ZQ1PL/stFf0ej6PQzO3v92SI5251JNaj/meIf8Pd3BxH+58xhIenT5B/u/B4HIdcGR5XS9V7rwHsRPhWu3Ptc/HSMXXg1JB3fSYL3anM6UzmfAEJuf+Dq2SMsNcbq18HrnmXcQuhcvd/nWLrwelRA4FriLPD7m1D/dIe4Urj5zJWZZSXo753Hohn8dIcub6WEG4aZlSsO2ShlD1Y77YbGeqzkzCo9aqLvKzCXvr192xwB/JM5AOAJcRtx1u1e339aBUsiqWh13O+omE1N2qSOgzVCKhuuv1hDhVtP8efD0oVaqMx3yxjx6V3xTS7yvRTirhuptEeOWRK21v7Ku4VvtTpvT19aCU2Qzik5w8C3wUmFBx21WeFPNGVgCfBzaruO3dbHfy5vOInYybYr+R1eTf1lnSWq8k7gf9y+qbrAocQtz34obqm9wzcufziHnfPi2y7kcL1qsu4jaMklTMxcBBhLS9T2eofybwB8LrHp/QqGMGAJJU3ErCALw78C3CssEqjQPeQ5iE9/KK61aPMwCQpHhPEHZoPBS4MkP9U4HzCRPypLYYAEhSOn8AXkyYk/NAxXX3A/8OvKbietWjDAAkKb3ZhAl6HyNs71uVPsLs/G7OwqguYQAgSeV4DvgUYX7AN6lufsCWwBsrqks9zABAksr1GHAq8CLg+orqdFc+jcoAQJKqcTVwBPAGwo6bZdq55M9XDRgASFJ1BoDzCPMDPkvYlrcMW5f0uaoRAwBJqt5i4DRgN+CczG1RQxkASFI+reRbrXweUmUMAKR6i92i9qkkrdBoLiNsK/w24MnMbVFDGABI9fYoYbvaouYmaodGt4aQ3ntP4BuZ26IGMACQ6u054IqI43+dqiFq20LC/gFSqQwApPr7asHj5gIXJGyHpC5iACDV3y/p/E5+AHgv5S1Tk5SZAYDUDG8mJKppxwBhidqvymuOpNwMAKRmWETYiva7jLwn/Z8J+8h/ropGScpnbO4GSKrMEuBvgDOAtwBHA9MIEwXvAy4Efgg8m6uBkqpjACA1z+3AR3I3QlJevgKQJKmBDAAkSWogAwBJkhrIAECSpAYyAJAkqYEMACRJaiADAEmSGsh9AKRmGg8cCGwDLAPuBe7P2iJJlTIAkJplB+BjwBuATQb9f3cDXwS+A6yquF2SKuYrAKk5TgRuJWwHPHjwB9gD+AZwJbB1he2SlIEBgNQMxxOy+23axr89ErikzX8rqUcZAEj1twVwLjCmg2P2Bj5fTnMkdQMDAKn+/hGYVOC4twO7JG6LpC5hACDV3xsLHjcWeH3KhkjqHgYAUr1NBaZHHH9EqoZI6i4GAFK9bRV5/DZJWiGp6xgASPW2QeTx45K0QlLXMQCQJKmBDAAkSWogAwBJkhrIAECSpAYyAJAkqYEMACRJaiADAEmSGsgAQJKkBjIAkCSpgQwAJElqIAMASZIayABAkqQGMgCQJKmBDAAkSWogAwBJkhrIAECSpAYyAJAkqYEMACRJaiADAEmSGsgAQJKkBjIAkCSpgQwAJKn7LIo8/qkkrVCtGQBIUvdZCjwZcfzcRO1QjRkASFJ3uiji2F8na4VqywBAkrrTV4CBAsc9BfwocVtUQwYAktSdrge+W+C4DwELE7dFNWQAIEnd693AJR38+zOAb5fUFtWMAYAkda/lwMuB/wBWjPDvFgLvAP6hikapHsbmboAkaUQrgQ8CXwf+EpgBTANWAw8QJgv+AJf+qUMGAJLUGx4APr22SNF8BSBpJHsR7j43yN0QJTMN+FzuRig/AwBJI5lIGCxuB07O3BbF2QB4L3An4VWCGs4AQFI7dgV+QpiRvl/mtqhzswgD/5eATTO3RV3CAEBSJ2YANwFnAVtmbotGtxdhV8BfATtnbou6jAFAfRTZMUz1V8b3YixwCuGO8l04mbgbTQH+E7gVOKGEz/d6I3WRFxJ+lEXLd6pvsiowjbjvRTvlTsJadeXXCs6epNy/+fVVdUjS6LYG1lD8B31a9U1WBfqAJZQfBAwAvwB2qaZbGsIJwB1U87c+t6I+SWrTdRT/Qe+bob2qxg+pZlAYAJYBpwObVNIzAewOnE91f+MB4E2V9ExS295AsR+zqUPr7Ujing4VKY8Bf43zjMq0GWGL4OVU+7d9FPeFkLpOH53fCTxFuINQvX2BageJVrmOEIAonX7Cvv/zqP7vuQo4rvwuSipiU+B3tPdjfpqwrEv1Nw44jzxBwBrgv4HtSu9l/R1DWIaZ4++4Enhn+V2UFGM84T3scwz/Y74U2DNXA5VFH/B+YCl5BpBngX8BJpTd0RraEfgxef5uA8Bc4OiyOykpna0JEfv3gd8APyUkEjkiZ6OU3Q6EwaTqeQHrDiZuK9yeicAnMWiTJCV0OHAN+e4qr8VgdCSzCMFSrr/PbMKTB0lSDfUDbwX+TJ5BZjXhCdVWZXe0hxwM/JZ8A/+N+LhfkhpjI+AThHX8OQadxWvrH19uN7vaFOBMwkz7HH+Dxwi7CI4pu6OSpO6zGyHrX667z3to3vyAcYQ0vU+T55yvIAQeZgmUJHEcIZFMrkDgYpqxO+Us4D7ynefZuH2zJGmQqhLLDFdWEtIOTym7oxnsAVxIvoHfBE5SDe1ImN39cuAthAleryNsILJtxnapd21OeES8kjyD1QLCI/I6vJueTN5zuZBwLk3hLNXAPoRMfr+ivTu1Z4CLgA8De2Vor3rXnoS8EbnuWu+gnNz2VWg9TXmCPOeu9TRly7I7KqlcGwN/C1xN/IXhurWfZXIPtWsWcD/5AoHZwM6l9zKdGcAt5DtflwD7ld5LSaUaQ0gCUsaa7YeBUzF7m9qzAXlnri+n+2eu70reFRX30rwVFVItHQn8kfIvGtcDB1bUJ/W+bQiPlleTZ5B7lPBovZsC19aeCiPl4iizPLu2/g3L7aakKpxCtTm/lxHu7vqq6Jxq4RDaz0JZVuD6wtJ7ObI+wqTbx8lzDtYQdlXcuuyOSirfBOBc8l1Uv009Zl6rGn2ER85zyTcA/oSQ7Khqh5FmTk7Rch3hKaGkGhhP3hnXrfILnCCozkwk7yPwJVT3CHxbwl13rsyKjxCeOvi0TqqJMeSdPDS4/Ijueseq3rAdeQfHhwiDYxkmEJbSPpOpb0uB04FNSuqfpEz+k/yD/uDymVJ7rDo7lmomsA5XLgMOSNifWcADGfszG9gpYX8kdYlXkX+wH6qsIVz4pCJaaYfnkef720o7PDWiDwcBV2Rq/wBwE2FHT0k1tDX5dgprpzwObFZa79UEkwiPrnOlHX6K8Oi+k7TDW5A3Te986rMVsqRh/ID8g/xo5Sul9V5NsjvhUXau7/HdwEmjtLGVpndRpja20vQadEs1txf57jA6KasIOeOlFGYCt5Hv+zyHkE9jqHbdnrlde3d4LiX1qB+Rf3Bvt3ynpHOgZuqmO+3dgfMztWOA8GTiFXGnU1IvmU6+rVSLXjBjJlNJQ5kKfJN8v4UFhO92jrpbaXrHRZ9FST3lQ6S9mDwHXAl8DzgbuIr0Wwm/p4wTIZF/tn2VJcXqBEk97DrSXEzmEwbmjYeoYzIh0Ej1mPXqZL2XhjYL+BP5B+myyqXA/snOlqSesyNpdkq7jvaSgOwE3JqgvpU4O1nly73jXhmlzB0KJfWQ1xN/QbmDsL66XVsCDyaod7RlVFIq08i7rXCKYppeSf/HJ4i7qKwGDi1Q78zIegeAjxSoV4qRO+tekZIzS6GkLnYecReX2RF1x+ZvPzuibqmoVtrhh8g/uI9WrgeOKuc0SOp1sRMA3xZR93sj654TUbcUayPyph0eqTwKnIJZNCWN4GbiLjQxWc6Oiaz72oi6pVS2J8wPyD3oDxCW256JaXolteEO4i44O0XUfWBk3TdH1C2l9hLiA+qYMhvYufReSqqNe4i76BwUUffLIuu+IqJuqQyttMNVZtW8Azi+is5JKfl+Kr95kccXWQHQcnBk3Qsij5dSW0N4HbAH8FnC1r5lWQi8D9gP+E2J9UiqqXOIu/u4uGC9fcBNkXV/q2DdUlX2AC4g7R3/CuAsYEqF/ZBUQ58i/oL04gL1vi5BvR8sUK+UQ6r0vnOAfStuu6SaOpn4i9IDwFYd1LkTad6RvrBIh6VMYtIO30P4rUpSMpsDq4gfjG8Ddmmjvv0JAUNsfctwS1P1pi0IS/Xa+d0tJuw1MD5HQyXV37XED8jrXqy2GaKO6cB/EAbuFHVdnqjvUi6HELboXcH63+8ngc9hml7VWF/uBgiAfybMBUhlDWFp0lzCY8/pwO4JPx/g7cD3En+mlMNWhNU004GlhBTE1xKCZUkq1VS6czvTkZ40bFzKmZAkVcJ9ALrDE8CPcjeiA/9NSG0qSZIi7UdI7Zv77n60sgTYrqRzIElSI32N/AP8aOUTZXVekqSm2hR4hPyD/HDlIUIKVkmSlNirCLP4cw/2g8sK4KgS+y1JUuN9jPwD/uDy96X2WJIk0QecTf5Bv1VM+iNJUkU2AH5G/sH/a7hhlCRJleonbN+ba/D/LA7+kiRlcyphi9KqBv4FmPlMkqSusCtwMeUP/hfjRj+SJHWVPuAtwN2kH/hvBE6qriuSJKlT/YTB+mLi9gxYDlwIvBrf9UuS1FO2Bt4K/ICwU99I+QRWALcD5649ZlKG9kqSuoB3ffWzAbADsC0wbu3/tgxYCNxHCAIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkqUr/H8I0K4akcBAqAAAAAElFTkSuQmCC"}))))},"stereo-white":function(e){return eu.createElement("svg",BG({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),qV||(qV=eu.createElement("path",{d:"M6.269 3.233l1.733 1m0 0l1.767-1m-1.767 1v1.234M2.97 9.433l1.533.867m0 0l1.067-.633m-1.067.633v1.767",stroke:"#fff",strokeWidth:.667,strokeLinecap:"round",strokeLinejoin:"round"})),KV||(KV=eu.createElement("path",{d:"M8.001 6.385l1.63.94v1.883l-1.63.94-1.63-.94V7.326l1.63-.941z",stroke:"#fff",strokeWidth:.667,strokeLinejoin:"round"})),YV||(YV=eu.createElement("path",{d:"M9.6 9.185l1.63.94v1.883l-1.63.94-1.629-.94v-1.882l1.63-.941z",stroke:"#fff",strokeWidth:.667,strokeLinejoin:"round"})),XV||(XV=eu.createElement("path",{d:"M8.135 7.467l.666.383v.817M9.8 10.267l.667.383v.817M11.232 10.167l1.734-1.034",stroke:"#fff",strokeWidth:.667,strokeLinecap:"round",strokeLinejoin:"round"})),$V||($V=eu.createElement("circle",{cx:5.268,cy:2.6,r:.6,fill:"#fff"})),JV||(JV=eu.createElement("circle",{cx:10.735,cy:2.6,r:.6,fill:"#fff"})),QV||(QV=eu.createElement("circle",{cx:1.934,cy:8.8,r:.6,fill:"#fff"})),eU||(eU=eu.createElement("circle",{cx:4.467,cy:13.333,r:.6,fill:"#fff"})),tU||(tU=eu.createElement("circle",{cx:14.067,cy:8.533,r:.6,fill:"#fff"})))},atoms:function(e){return eu.createElement("svg",zG({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),nU||(nU=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.082 24c-1.306-1.944-2.363-3.86-3.132-5.673-.885-2.086-1.432-4.132-1.474-5.986-.042-1.86.428-3.71 1.791-5.073 1.364-1.363 3.213-1.833 5.073-1.79 1.854.042 3.9.588 5.986 1.473 1.813.77 3.729 1.826 5.673 3.132 1.944-1.306 3.86-2.363 5.673-3.132 2.085-.885 4.132-1.431 5.985-1.474 1.86-.042 3.71.428 5.073 1.791 1.364 1.364 1.834 3.213 1.791 5.073-.042 1.854-.588 3.9-1.473 5.986-.77 1.813-1.826 3.729-3.132 5.673 1.306 1.944 2.363 3.86 3.132 5.673.885 2.086 1.431 4.132 1.473 5.986.043 1.86-.427 3.71-1.79 5.073-1.364 1.363-3.213 1.833-5.074 1.79-1.853-.042-3.9-.588-5.985-1.473-1.813-.77-3.729-1.826-5.673-3.132-1.944 1.306-3.86 2.363-5.673 3.132-2.086.885-4.133 1.431-5.986 1.474-1.86.042-3.71-.428-5.073-1.791-1.363-1.364-1.833-3.213-1.79-5.073.041-1.854.588-3.9 1.473-5.986.769-1.813 1.826-3.729 3.132-5.673zm2.545-3.433a28.55 28.55 0 01-1.995-3.802c-.767-1.807-1.13-3.337-1.157-4.515-.026-1.17.275-1.807.62-2.153.347-.346.983-.647 2.154-.62 1.178.026 2.708.39 4.514 1.156 1.2.51 2.48 1.178 3.803 1.995a54.476 54.476 0 00-4.171 3.768 54.458 54.458 0 00-3.768 4.171zm7.939 14.805a28.557 28.557 0 01-3.802 1.995c-1.807.767-3.337 1.13-4.515 1.157-1.171.026-1.807-.275-2.153-.62-.346-.347-.647-.983-.62-2.154.026-1.178.39-2.708 1.156-4.515.51-1.2 1.178-2.479 1.995-3.802a54.457 54.457 0 003.768 4.171 54.457 54.457 0 004.17 3.768zm3.433-2.384a49.694 49.694 0 01-4.776-4.212A49.694 49.694 0 0115.011 24a49.694 49.694 0 014.212-4.776 49.708 49.708 0 014.776-4.212 49.708 49.708 0 014.776 4.212A49.708 49.708 0 0132.987 24a49.708 49.708 0 01-4.212 4.776 49.694 49.694 0 01-4.776 4.212zm3.433 2.384a28.55 28.55 0 003.802 1.995c1.806.767 3.337 1.13 4.514 1.157 1.172.026 1.808-.275 2.154-.62.346-.347.647-.983.62-2.154-.026-1.178-.39-2.708-1.156-4.515a28.556 28.556 0 00-1.995-3.802 54.5 54.5 0 01-3.768 4.171 54.458 54.458 0 01-4.171 3.768zm7.939-14.805a28.563 28.563 0 001.995-3.802c.766-1.807 1.13-3.337 1.156-4.515.027-1.17-.274-1.807-.62-2.153-.346-.346-.983-.647-2.154-.62-1.177.026-2.708.39-4.514 1.156-1.2.51-2.479 1.178-3.802 1.995a54.457 54.457 0 014.171 3.768 54.5 54.5 0 013.767 4.171z",fill:"#231F20"})),rU||(rU=eu.createElement("path",{d:"M23.998 25.998a2 2 0 100-4 2 2 0 000 4z",fill:"#231F20"})))},"atoms-white":function(e){return eu.createElement("svg",FG({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),iU||(iU=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.082 24c-1.306-1.944-2.363-3.86-3.132-5.673-.885-2.086-1.432-4.132-1.474-5.986-.042-1.86.428-3.71 1.791-5.073 1.364-1.363 3.213-1.833 5.073-1.79 1.854.042 3.9.588 5.986 1.473 1.813.77 3.729 1.826 5.673 3.132 1.944-1.306 3.86-2.363 5.673-3.132 2.085-.885 4.132-1.431 5.985-1.474 1.86-.042 3.71.428 5.073 1.791 1.364 1.364 1.834 3.213 1.791 5.073-.042 1.854-.588 3.9-1.473 5.986-.77 1.813-1.826 3.729-3.132 5.673 1.306 1.944 2.363 3.86 3.132 5.673.885 2.086 1.431 4.132 1.473 5.986.043 1.86-.427 3.71-1.79 5.073-1.364 1.363-3.213 1.833-5.074 1.79-1.853-.042-3.9-.588-5.985-1.473-1.813-.77-3.729-1.826-5.673-3.132-1.944 1.306-3.86 2.363-5.673 3.132-2.086.885-4.133 1.431-5.986 1.474-1.86.042-3.71-.428-5.073-1.791-1.363-1.364-1.833-3.213-1.79-5.073.041-1.854.588-3.9 1.473-5.986.769-1.813 1.826-3.729 3.132-5.673zm2.545-3.433a28.55 28.55 0 01-1.995-3.802c-.767-1.807-1.13-3.337-1.157-4.515-.026-1.17.275-1.807.62-2.153.347-.346.983-.647 2.154-.62 1.178.026 2.708.39 4.514 1.156 1.2.51 2.48 1.178 3.803 1.995a54.476 54.476 0 00-4.171 3.768 54.458 54.458 0 00-3.768 4.171zm7.939 14.805a28.557 28.557 0 01-3.802 1.995c-1.807.767-3.337 1.13-4.515 1.157-1.171.026-1.807-.275-2.153-.62-.346-.347-.647-.983-.62-2.154.026-1.178.39-2.708 1.156-4.515.51-1.2 1.178-2.479 1.995-3.802a54.457 54.457 0 003.768 4.171 54.457 54.457 0 004.17 3.768zm3.433-2.384a49.694 49.694 0 01-4.776-4.212A49.694 49.694 0 0115.011 24a49.694 49.694 0 014.212-4.776 49.708 49.708 0 014.776-4.212 49.708 49.708 0 014.776 4.212A49.708 49.708 0 0132.987 24a49.708 49.708 0 01-4.212 4.776 49.694 49.694 0 01-4.776 4.212zm3.433 2.384a28.55 28.55 0 003.802 1.995c1.806.767 3.337 1.13 4.514 1.157 1.172.026 1.808-.275 2.154-.62.346-.347.647-.983.62-2.154-.026-1.178-.39-2.708-1.156-4.515a28.556 28.556 0 00-1.995-3.802 54.5 54.5 0 01-3.768 4.171 54.458 54.458 0 01-4.171 3.768zm7.939-14.805a28.563 28.563 0 001.995-3.802c.766-1.807 1.13-3.337 1.156-4.515.027-1.17-.274-1.807-.62-2.153-.346-.346-.983-.647-2.154-.62-1.177.026-2.708.39-4.514 1.156-1.2.51-2.479 1.178-3.802 1.995a54.457 54.457 0 014.171 3.768 54.5 54.5 0 013.767 4.171z",fill:"#FFF"})),oU||(oU=eu.createElement("path",{d:"M23.998 25.998a2 2 0 100-4 2 2 0 000 4z",fill:"#FFF"})))},bonds:function(e){return eu.createElement("svg",VG({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),aU||(aU=eu.createElement("path",{d:"M8 2.5v11M3.238 5.25l9.527 5.5M3.238 10.75l9.527-5.5",stroke:"#5B6077",strokeLinecap:"round",strokeLinejoin:"round"})))},"bonds-white":function(e){return eu.createElement("svg",UG({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),sU||(sU=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 6.044a2 2 0 012 2v12.492l10.818-6.246a2 2 0 112 3.464L28 24l10.818 6.246a2 2 0 01-2 3.464L26 27.464v12.492a2 2 0 01-4 0V27.464L11.182 33.71a2 2 0 01-2-3.464L20 24 9.182 17.754a2 2 0 012-3.464L22 20.536V8.044a2 2 0 012-2z",fill:"#FFF"})))},server:function(e){return eu.createElement("svg",ZG({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),uU||(uU=eu.createElement("path",{d:"M8 8c3.038 0 5.5-1.343 5.5-3S11.038 2 8 2 2.5 3.343 2.5 5 4.962 8 8 8z",stroke:"#5B6077",strokeLinecap:"round",strokeLinejoin:"round"})),lU||(lU=eu.createElement("path",{d:"M2.5 5v3c0 1.657 2.462 3 5.5 3s5.5-1.343 5.5-3V5",stroke:"#5B6077",strokeLinecap:"round",strokeLinejoin:"round"})),cU||(cU=eu.createElement("path",{d:"M2.5 8v3c0 1.657 2.462 3 5.5 3s5.5-1.343 5.5-3V8",stroke:"#5B6077",strokeLinecap:"round",strokeLinejoin:"round"})))},"server-white":function(e){return eu.createElement("svg",HG({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),fU||(fU=eu.createElement("path",{d:"M8 8c3.038 0 5.5-1.343 5.5-3S11.038 2 8 2 2.5 3.343 2.5 5 4.962 8 8 8z",stroke:"#fff",strokeWidth:.667,strokeLinecap:"round",strokeLinejoin:"round"})),hU||(hU=eu.createElement("path",{d:"M2.5 5v3c0 1.657 2.462 3 5.5 3s5.5-1.343 5.5-3V5",stroke:"#fff",strokeWidth:.667,strokeLinecap:"round",strokeLinejoin:"round"})),dU||(dU=eu.createElement("path",{d:"M2.5 8v3c0 1.657 2.462 3 5.5 3s5.5-1.343 5.5-3V8",stroke:"#fff",strokeWidth:.667,strokeLinecap:"round",strokeLinejoin:"round"})))},"3dviewer":function(e){return eu.createElement("svg",GG({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),pU||(pU=eu.createElement("path",{d:"M14 11.081V4.916a.5.5 0 00-.255-.436l-5.5-3.094a.5.5 0 00-.49 0l-5.5 3.094A.5.5 0 002 4.916v6.165a.5.5 0 00.255.436l5.5 3.094a.5.5 0 00.49 0l5.5-3.094a.5.5 0 00.255-.436z",stroke:"#5B6077",strokeLinecap:"round",strokeLinejoin:"round"})),vU||(vU=eu.createElement("path",{d:"M13.932 4.665L8.06 8.001 2.07 4.664M8.059 8L8 14.676",stroke:"#5B6077",strokeLinecap:"round",strokeLinejoin:"round"})))},"3dviewer-white":function(e){return eu.createElement("svg",WG({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),mU||(mU=eu.createElement("path",{d:"M14 11.081V4.916a.5.5 0 00-.255-.436l-5.5-3.094a.5.5 0 00-.49 0l-5.5 3.094A.5.5 0 002 4.916v6.165a.5.5 0 00.255.436l5.5 3.094a.5.5 0 00.49 0l5.5-3.094a.5.5 0 00.255-.436z",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round"})),gU||(gU=eu.createElement("path",{d:"M13.932 4.665L8.06 8.001 2.07 4.665M8.059 8L8 14.676",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round"})))},debugging:function(e){return eu.createElement("svg",qG({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),yU||(yU=eu.createElement("path",{d:"M8 2h0a4.5 4.5 0 00-4.5 4.5v3A4.5 4.5 0 008 14h0a4.5 4.5 0 004.5-4.5v-3A4.5 4.5 0 008 2zM12.5 8.5H14M2 8.5h1.5M2 10.5h1.612M2 6.5h12M8 8.5V14M12.389 10.5H14M3.496 1.75l1.485 1.413M12.495 1.75l-1.481 1.409",stroke:"#5B6077",strokeLinecap:"round",strokeLinejoin:"round"})))},"debugging-white":function(e){return eu.createElement("svg",KG({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),bU||(bU=eu.createElement("path",{d:"M8 2h0a4.5 4.5 0 00-4.5 4.5v3A4.5 4.5 0 008 14h0a4.5 4.5 0 004.5-4.5v-3A4.5 4.5 0 008 2zM12.5 8.5H14M2 8.5h1.5M2 10.5h1.612M2 6.5h12M8 8.5V14M12.389 10.5H14M3.496 1.75l1.485 1.413M12.495 1.75l-1.481 1.409",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round"})))},"dropdown-indicator":function(e){return eu.createElement("svg",YG({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),xU||(xU=eu.createElement("path",{d:"M4.94 5.727L8 8.78l3.06-3.053.94.94-4 4-4-4 .94-.94z",fill:"#5B6077"})))},"text-special-symbols":function(e){return eu.createElement("svg",TG({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24"},e),BV||(BV=eu.createElement("path",{d:"M19.15 19h-5.76v-2.13c2.11-1.62 3.2-3.63 3.2-6.03 0-1.5-.43-2.68-1.27-3.55C14.47 6.42 13.37 6 12.03 6c-1.35 0-2.46.42-3.32 1.3-.87.87-1.3 2.07-1.3 3.58 0 2.38 1.09 4.38 3.2 5.99V19H4.85v-2.13h3.56c-2.37-1.55-3.56-3.64-3.56-6.27 0-2.1.65-3.74 1.96-4.94 1.31-1.21 3.03-1.81 5.16-1.81 2.18 0 3.92.6 5.22 1.79 1.31 1.19 1.96 2.86 1.96 4.94 0 2.63-1.2 4.73-3.6 6.29h3.6V19z"})))},chevron:function(e){return eu.createElement("svg",XG({width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),_U||(_U=eu.createElement("path",{d:"M24 33.23L9.782 19.012l2.828-2.828L24 27.574l11.388-11.39 2.83 2.828L24 33.23z",fill:"#231F20"})))},"open-window-paste-icon":function(e){return eu.createElement("svg",wH({width:40,height:40,viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),pF||(pF=eu.createElement("path",{d:"M33.973 40H6.027A6.027 6.027 0 010 33.973V6.027A6.027 6.027 0 016.027 0h27.946A6.027 6.027 0 0140 6.027v27.946A6.027 6.027 0 0133.973 40z",fill:"#EFF2F5"})),vF||(vF=eu.createElement("path",{d:"M28.556 30.636H11.444V11.727h2.445v3.546H26.11v-3.546h2.445v18.91zM20 9.364c.324 0 .635.124.864.346.23.221.358.522.358.835 0 .314-.129.614-.358.836-.229.222-.54.346-.864.346-.324 0-.635-.124-.864-.346a1.162 1.162 0 01-.358-.835c0-.314.129-.615.358-.836.229-.222.54-.346.864-.346zm8.556 0h-5.11A3.673 3.673 0 0020 7a3.673 3.673 0 00-3.447 2.364h-5.109c-.648 0-1.27.249-1.728.692A2.325 2.325 0 009 11.727v18.91c0 .626.258 1.227.716 1.67.458.444 1.08.693 1.728.693h17.112c.648 0 1.27-.249 1.728-.692A2.325 2.325 0 0031 30.636V11.727c0-.627-.258-1.228-.716-1.671a2.487 2.487 0 00-1.728-.692z",fill:"#167782"})),mF||(mF=eu.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 20h10c.55 0 1-.45 1-1s-.45-1-1-1H15c-.55 0-1 .45-1 1s.45 1 1 1zm10 4H15c-.55 0-1-.45-1-1s.45-1 1-1h10c.55 0 1 .45 1 1s-.45 1-1 1zm0 4H15c-.55 0-1-.45-1-1s.45-1 1-1h10c.55 0 1 .45 1 1s-.45 1-1 1z",fill:"#167782"})))},"open-window-upload-icon":function(e){return eu.createElement("svg",SH({width:40,height:40,viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),gF||(gF=eu.createElement("path",{d:"M33.973 40H6.027A6.027 6.027 0 010 33.973V6.027A6.027 6.027 0 016.027 0h27.946A6.027 6.027 0 0140 6.027v27.946A6.027 6.027 0 0133.973 40z",fill:"#EFF2F5"})),yF||(yF=eu.createElement("path",{d:"M12.835 18.125l-2.477 9.5V15.75h20.048c0-.63-.249-1.234-.691-1.68a2.35 2.35 0 00-1.668-.695h-8.255L17.434 11h-7.076a2.35 2.35 0 00-1.667.696A2.383 2.383 0 008 13.375v14.25c0 .63.248 1.234.69 1.68a2.35 2.35 0 001.668.695h17.69a2.276 2.276 0 002.24-1.781L33 18.125H12.835zm15.212 9.5h-15.33l1.887-7.125h15.33l-1.887 7.125z",fill:"#167782"})))}};function KW(){return null}var YW=["name"];function XW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $W(e){var t=e.name,n=(0,N.Z)(e,YW),o=function(e){return e&&qW.hasOwnProperty(e)?qW[e]:KW}(t);return(0,i.jsx)(o,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XW(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XW(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n))}var JW="ActionButton-module_button__nfoWQ",QW="ActionButton-module_selected__kPCxA",eq={Escape:"Esc",Delete:"Del",Mod:/Mac/.test(navigator.platform)?"\u2318":"Ctrl"};function tq(e){return e?(Array.isArray(e)?e[0]:e).replace(/(\b[a-z]\b$|Mod|Escape|Delete)/g,(function(e){return eq[e]||e.toUpperCase()})):""}var nq=function(e){var t=e.name,n=e.action,o=e.status,a=void 0===o?{}:o,s=e.selected,u=void 0!==s&&s,l=e.disableableButtons,c=e.indigoVerification,f=e.className,h=e.onAction;if(a.hidden)return null;var d=tq(null===n||void 0===n?void 0:n.shortcut),p=a.disabled||c&&l.includes(t);return(0,i.jsxs)("button",{disabled:p,onClick:function(e){null!==n&&void 0!==n&&n.action&&h(n.action),e.stopPropagation()},title:d?"".concat(null===n||void 0===n?void 0:n.title," (").concat(d,")"):null===n||void 0===n?void 0:n.title,className:(0,tu.Z)(JW,(0,r.Z)({},QW,u),f),children:[(0,i.jsx)($W,{name:t}),(0,i.jsx)("kbd",{children:d})]})};function rq(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var iq=function(t){p(r,t);var n=rq(r);function r(e){var t;return(0,l.Z)(this,r),(t=n.call(this,e)).element=document.createElement("div"),t.isElementInDom=!1,t}return(0,c.Z)(r,[{key:"componentDidMount",value:function(){!this.isElementInDom&&this.props.isOpen&&this.addElementInDOM();var e=this.props,t=e.className,n=e.style;t&&this.addClassName(t),n&&this.updateStyle(n)}},{key:"componentWillUnmount",value:function(){this.isElementInDom&&this.removeElementFromDOM()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isOpen,r=t.className,i=t.style;r!==e.className&&(this.removeClassNames(e.className),this.addClassName(r)),i!==e.style&&this.updateStyle(i,e.style),n!==e.isOpen&&(n&&!this.isElementInDom?this.addElementInDOM():this.isElementInDom&&this.removeElementFromDOM())}},{key:"addElementInDOM",value:function(){var e;null===(e=document.querySelector(".Ketcher-root"))||void 0===e||e.appendChild(this.element),this.isElementInDom=!0}},{key:"removeElementFromDOM",value:function(){var e;null===(e=document.querySelector(".Ketcher-root"))||void 0===e||e.removeChild(this.element),this.isElementInDom=!1}},{key:"removeClassNames",value:function(e){var t=this;e&&e.split(" ").forEach((function(e){t.element.classList.remove(e)}))}},{key:"addClassName",value:function(e){var t=this;e&&e.split(" ").forEach((function(e){t.element.classList.add(e)}))}},{key:"updateStyle",value:function(e,t){var n=this;t&&Object.keys(t).forEach((function(e){n.element.style[e]=""}),this),e&&Object.keys(e).forEach((function(t){n.element.style[t]=e[t]}),this)}},{key:"render",value:function(){var t=this.props.children;return e.createPortal(t,this.element)}}]),r}(eu.Component),oq="DefaultMultiTool-module_default__zNTMe",aq=function(e){var t=e.options,n=e.status,r=e.disableableButtons,o=e.indigoVerification,a=e.onAction;return(0,i.jsx)(i.Fragment,{children:t.map((function(e){var t=n[e.id];return(0,i.jsx)(nq,{name:e.id,action:_Z[e.id],status:t,selected:!(null===t||void 0===t||!t.selected),disableableButtons:r,indigoVerification:o,onAction:a},e.id)}))})},sq="GroupedMultiTool-module_group__BJQAU",uq=function(e){var t=e.groups,n=e.options,r=e.status,o=e.disableableButtons,a=e.indigoVerification,s=e.onAction;return t?(0,i.jsx)(i.Fragment,{children:t.map((function(e){return(0,i.jsx)("div",{className:sq,children:n.slice(e.start,e.end).map((function(e){var t=r[e.id];return(0,i.jsx)(nq,{name:e.id,action:_Z[e.id],status:t,selected:!(null===t||void 0===t||!t.selected),disableableButtons:o,indigoVerification:a,onAction:s},e.id)}))},e.start)}))}):null};var lq={"button-common-styles":"ToolbarMultiToolItem-module_button-common-styles__Fuxbo",scrollbar:"ToolbarMultiToolItem-module_scrollbar__XTmfz",icon:"ToolbarMultiToolItem-module_icon__-HQal",iconSelected:"ToolbarMultiToolItem-module_iconSelected__hlO0J",portal:"ToolbarMultiToolItem-module_portal__2XJgz","portal-vertical":"ToolbarMultiToolItem-module_portal-vertical__A0DVe"};function cq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cq(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hq=function(e){var t=e.id,n=e.options,r=e.groups,o=e.variant,a=e.status,s=e.opened,u=e.indigoVerification,l=e.disableableButtons,c=e.className,f=e.vertical,h=e.onAction,d=e.onOpen,p=(0,eu.useRef)(null),v=function(e){var t=(0,M.Z)(e,3),n=t[0],r=t[1],i=t[2],o=(0,eu.useState)(!1),a=(0,M.Z)(o,2),s=a[0],u=a[1];return(0,eu.useEffect)((function(){var e=i.length&&i[0].id||"";u(r===n||r===e)}),[r,i]),[s]}([t,s,n]),m=(0,M.Z)(v,1)[0],g=function(e){var t=(0,M.Z)(e,2),n=t[0],r=t[1],i=(0,eu.useState)({}),o=(0,M.Z)(i,2),a=o[0],s=o[1];return(0,eu.useEffect)((function(){var e;if(n.current){var t=(null===(e=document.querySelector(".Ketcher-root"))||void 0===e?void 0:e.getBoundingClientRect())||{top:0,left:0},r=n.current.getBoundingClientRect(),i=r.top-t.top,o=r.left-t.left+r.width+4;s({top:"".concat(i,"px"),left:"".concat(o,"px")})}}),[n,r]),[a]}([p,m]),y=(0,M.Z)(g,1)[0],b=!1,x=t,_=n.find((function(e){var t;return null===(t=a[e.id])||void 0===t?void 0:t.selected}));_&&(x=_.id,b=!0);var w=a[x];b=b||Boolean(null===w||void 0===w?void 0:w.selected);var S,E=!(n.every((function(e){var t;return null===(t=a[e.id])||void 0===t?void 0:t.hidden}))||null!==w&&void 0!==w&&w.hidden);!w&&n.length&&(x=(null===(S=n.filter((function(e){var t;return!(null!==(t=a[e.id])&&void 0!==t&&t.hidden)}))[0])||void 0===S?void 0:S.id)||n[0].id);var k={disableableButtons:l,indigoVerification:u,onAction:b?function(){return O()}:h},O=function(){d(t,Boolean(null===w||void 0===w?void 0:w.selected))},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";switch(e){case"default":return[aq,oq];case"grouped":return[uq];default:throw new Error("Unsupported variant ".concat(e))}}(o),C=(0,M.Z)(A,2),T=C[0],P=C[1];return E?(0,i.jsxs)("div",{ref:p,className:lq.root,children:[(0,i.jsx)(nq,fq(fq({},k),{},{className:c,name:x,action:_Z[x],status:w,selected:b})),!m&&(0,i.jsx)($W,{className:"".concat(lq.icon," ").concat((null===w||void 0===w?void 0:w.selected)&&lq.iconSelected),name:"dropdown",onClick:O}),m?(0,i.jsx)(iq,{isOpen:m,className:(0,tu.Z)(lq.portal,f&&lq["portal-vertical"],P),style:y,children:(0,i.jsx)(T,{options:n,groups:r,status:a,disableableButtons:l,indigoVerification:u,onAction:h})}):null]}):null},dq=function(e){var t,n=e.id,r=e.options,o=e.status,a=e.className,s=e.opened,u=e.indigoVerification,l=e.disableableButtons,c=e.vertical,f=e.onAction,h=e.onOpen;return null!==r&&void 0!==r&&r.length?(0,i.jsx)(hq,{className:a,id:n,options:r,status:o,opened:s,disableableButtons:l,indigoVerification:u,onAction:f,onOpen:h,vertical:c}):(0,i.jsx)(nq,{className:a,name:n,action:_Z[n],status:o[n],selected:!(null===(t=o[n])||void 0===t||!t.selected),indigoVerification:u,disableableButtons:l,onAction:f})},pq=function(e){var t=e.active,n=e.disableableButtons,r=e.indigoVerification,o=e.onAction,a=t&&"template"===t.tool,s=function(e,t){return{shortcut:_Z["template-".concat(t)].shortcut,action:{tool:"template",opts:{struct:e}},title:e.name}};return(0,i.jsx)(i.Fragment,{children:PB.map((function(e,u){return(0,i.jsx)(nq,{name:"template-".concat(u),action:s(e,u),onAction:o,selected:a&&t&&t.opts.struct===e,status:_Z["template-".concat(u)],disableableButtons:n,indigoVerification:r},"template-".concat(u))}))})},vq="BottomToolbar-module_group__b-pGt",mq="BottomToolbar-module_root__kjkSm",gq=["className"];function yq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yq(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xq=function(e){var t=e.children,n=e.className;return(0,i.jsx)("div",{className:(0,tu.Z)(vq,n),children:t})};function _q(e){return{type:"TMPL_INIT",data:{lib:e}}}function wq(e,t,n){return Sq(t,n,"library.sdf").then((function(t){var n=t.concat(function(){var e=gD("ketcher-tmpls");if(!Array.isArray(e)||0===e.length)return[];var t=new at;return e.map((function(e){try{return""===e.props&&(e.props={}),e.props.group="User Templates",{struct:t.deserialize(e.struct),props:e.props}}catch(n){return null}})).filter((function(e){return null!==e}))}());e(_q(n)),e(wD({templates:!0}))}))}var Sq=function(e,t,n){var r=new Sn;return Eq("".concat(e,"/templates/").concat(n)).then((function(n){var i=r.deserialize(n),o=function(e,t,n){var r=e.reduce((function(e,t){var n=kq(t).file;return n&&-1===e.indexOf(n)&&e.push(n),e}),[]);return Promise.all(r.map((function(e){return Eq(t+e).catch((function(){return null}))}))).then((function(e){return e.forEach((function(e){e&&(n.innerHTML+=e)})),r.filter((function(t,n){return!!e[n]}))}))}(i,e+"/templates/",t);return o.then((function(e){return i.map((function(t){var n=kq(t);return n.file&&(t.props.prerender=-1!==e.indexOf(n.file)?"#".concat(n.id):""),t}))}))}))};function Eq(e){return fetch(e,{credentials:"same-origin"}).then((function(t){if(t.ok)return t.text();throw Error("Could not fetch "+e)}))}function kq(e){var t=e.props.prerender,n=t&&t.split("#",2);return{file:t&&n[0],id:t&&n[1]}}function Oq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Aq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oq(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cq(e,t,n){return new Promise((function(r,i){e({type:"MODAL_OPEN",data:{name:t,prop:Aq(Aq({},n),{},{onResult:r,onCancel:i})}})}))}function Mq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mq(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pq(e){var t=new at,n=e.filter((function(e){return"User Templates"===e.props.group})).map((function(e){return{struct:t.serialize(e.struct),props:Object.assign({},(0,F.omit)(["group"],e.props))}}));yD("ketcher-tmpls",n)}var Rq={lib:[],selected:null,filter:"",group:null,attach:{},mode:"classic"},Iq=["TMPL_INIT","TMPL_SELECT","TMPL_CHANGE_GROUP","TMPL_CHANGE_FILTER"],Lq=["INIT_ATTACH","SET_ATTACH_POINTS","SET_TMPL_NAME"];var Nq=["type","action"];function jq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jq(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bq(e,t){var n=t.action,r=t.editor,i=t.server,o=t.options;if(n.tool){if(r.tool(n.tool,n.opts))return n}else"function"===typeof n&&n(r,i,o);return e}function zq(e,t,n){var r=n.editor,i=n.server;return"function"===typeof e.selected?e.selected(r,i):!(!e.action||!e.action.tool)&&(0,F.isEqual)(t,e.action)}function Fq(e,t){var n=t.editor,r=t.server,i=t.options;return"function"===typeof e.disabled&&e.disabled(n,r,i)}function Vq(e,t){var n=t.options;return"function"===typeof e.hidden&&e.hidden(n)}function Uq(e,t,n){var r=_Z[e];return(0,F.pickBy)((function(e){return e}),{selected:zq(r,t,n),disabled:Fq(r,n),hidden:Vq(r,n)})}function Zq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zq(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gq={lib:[],mode:"fg"};function Wq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wq(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kq={freqAtoms:[],currentAtom:0,opened:null,visibleTools:{select:"select-lasso"}};function Yq(e,t){var n=/(bond)(-)(common|stereo|query)/,r=window.innerHeight;return Object.keys(e).reduce((function(t,i){return"bond"===i&&r>700||"transform"===i&&r>800||"rgroup"===i&&r>850||"shape"===i&&r>900||(!i.match(n)||r>700)&&(t[i]=e[i]),t}),qq({},t))}function Xq(e,t,n){return e=(0,F.capitalize)(e),Gj.indexOf(e)>-1||-1!==t.indexOf(e)?{freqAtoms:t}:(t[n]=e,{freqAtoms:t,currentAtom:n=(n+1)%7})}function $q(e){var t=Object.keys(_B).find((function(t){return(0,F.isEqual)(e,_B[t].action)})),n=document.getElementById(t),i=n&&function(e,t){t=t||document.body;var n=e;for(;n&&"hidden"!==window.getComputedStyle(n).overflow&&!n.classList.contains("opened");){if(n===t)return null;n=n.parentNode}return n}(n);return i&&""!==i.id?(0,r.Z)({},i.id,n.id):null}var Jq=["type"],Qq=["buttons"];function eK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eK(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nK=(0,ru.UY)({actionState:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=n.type,i=n.action,o=(0,N.Z)(n,Nq);switch(r){case"INIT":i=_Z["select-lasso"].action;case"ACTION":e=Bq(t&&t.activeTool,Dq(Dq({},o),{},{action:i}));case"UPDATE":return Object.keys(_Z).reduce((function(e,t){var n=Uq(t,e.activeTool,o);return(0,F.isEmpty)(n)||(e[t]=n),e}),{activeTool:e||t.activeTool});default:return t}},toolbar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kq,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.data;switch(n){case"ACTION":var i=$q(t.action);return qq(qq({},e),{},i?{opened:null,visibleTools:qq(qq({},e.visibleTools),i)}:{opened:null});case"ADD_ATOMS":var o=Xq(r,e.freqAtoms,e.currentAtom);return qq(qq({},e),o);case"CLEAR_VISIBLE":var a=$q(t.data),s=Yq(e.visibleTools,a);return qq(qq({},e),{},{opened:null,visibleTools:qq({},s)});case"OPENED":return r.isSelected&&e.opened?qq(qq({},e),{},{opened:null}):qq(qq({},e),{},{opened:r.menuName});case"UPDATE":case"MODAL_OPEN":return qq(qq({},e),{},{opened:null});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.data;if("UPDATE_FORM"===n){if(!e)return null;var i=VD(e.form,t,e.name);return Aq(Aq({},e),{},{form:i})}switch(n){case"MODAL_CLOSE":return null;case"MODAL_OPEN":return{name:r.name,form:zD[r.name]||null,prop:r.prop||null};default:return e}},server:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e},editor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e},options:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.data;return"APP_OPTIONS"===n?xD(xD({},e),{},{app:xD(xD({},e.app),r)}):"SAVE_SETTINGS"===n?xD(xD({},e),{},{settings:r}):"SAVE_CHECK_OPTS"===n?xD(xD({},e),{},{check:r}):"CHANGE_ANALYSE"===n?xD(xD({},e),{},{analyse:xD(xD(xD({},e.analyse),r),{},{loading:!1})}):"ANALYSE_LOADING"===n?xD(xD({},e),{},{analyse:xD(xD({},e.analyse),{},{loading:!0})}):SD.includes(n)?xD(xD({},e),{},{recognize:xD(xD({},e.recognize),r)}):e},templates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rq,t=arguments.length>1?arguments[1]:void 0;if(Iq.includes(t.type))return Object.assign({},e,t.data);if(Lq.includes(t.type)){var n=Object.assign({},e.attach,t.data);return Tq(Tq({},e),{},{attach:n})}if("TMPL_DELETE"===t.type){var r=Object.assign({},e),i=r.lib.filter((function(e){return e!==t.data.tmpl}));return Tq(Tq({},r),{},{lib:i})}return e},functionalGroups:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gq,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;return"FG_INIT"===n?Hq(Hq({},e),r):e},requestsStatuses:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:KD,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.data;switch(n){case UD:return GD(GD({},e),{},{indigoVerification:r});case ZD:return GD(GD({},e),{},{isAnalyzingFile:r});default:return e}}});function rK(e,t,r){var i=e.buttons,o=void 0===i?{}:i,a=(0,N.Z)(e,Qq),s={actionState:null,editor:null,modal:null,options:Object.assign(_D,{app:a,buttons:o}),server:t||Promise.reject(new Error("Standalone mode!")),templates:Rq},u=[iu.Z],l=function(e){return function(t,r){switch(r.type){case"INIT":e(r.editor);case"UPDATE":r.type;var i=(0,N.Z)(r,Jq);i&&(t=tK(tK({},t),i))}var o=nK(t,tK(tK({},r),(0,F.pick)(["editor","server","options"],t))),a=o===t.shared?t:tK(tK({},t),o);return n.g.currentState=a,a}}(r);return(0,ru.MT)(l,s,ru.md.apply(void 0,u))}var iK=(0,nu.$j)((function(e){return{active:e.actionState&&e.actionState.activeTool,status:e.actionState||{},opened:e.toolbar.opened,indigoVerification:e.requestsStatuses.indigoVerification,disableableButtons:[]}}),(function(e){return{onAction:function(t){return e(SB(t))},onOpen:function(t,n){return e({type:"OPENED",data:{menuName:t,isSelected:n}})}}}))((function(e){var t=e.className,n=(0,N.Z)(e,gq),r=n.active,o=n.disableableButtons,a=n.indigoVerification,s=n.onAction;return(0,i.jsxs)("div",{className:(0,tu.Z)(mq,t),children:[(0,i.jsx)(xq,{children:(0,i.jsx)(pq,{active:r,indigoVerification:a,disableableButtons:o,onAction:s})}),(0,i.jsx)(xq,{children:(0,i.jsx)(dq,bq({id:"template-lib"},n))})]})}));function oK(e){return e.map((function(e){return{id:e}}))}var aK=oK(["bond-single","bond-double","bond-triple"]),sK=oK(["bond-up","bond-down","bond-updown","bond-crossed"]),uK=oK(["bond-any","bond-aromatic","bond-singledouble","bond-singlearomatic","bond-doublearomatic"]),lK=oK(["bond-dative","bond-hydrogen"]),cK=[aK,sK,uK,lK],fK=cK.flat(),hK=cK.reduce((function(e,t,n){var r,i=(null===(r=e[n-1])||void 0===r?void 0:r.end)||0;return e.push({start:i,end:i+t.length}),e}),[]),dK=oK(["rgroup-label","rgroup-fragment","rgroup-attpoints"]),pK=oK(["shape-ellipse","shape-rectangle","shape-line"]),vK=oK(["transform-rotate","transform-flip-h","transform-flip-v"]),mK=oK(["select-lasso","select-rectangle","select-fragment"]),gK=oK(["reaction-arrow-open-angle","reaction-arrow-filled-triangle","reaction-arrow-filled-bow","reaction-arrow-dashed-open-angle","reaction-arrow-failed","reaction-arrow-both-ends-filled-triangle","reaction-arrow-equilibrium-filled-half-bow","reaction-arrow-equilibrium-filled-triangle","reaction-arrow-equilibrium-open-angle","reaction-arrow-unbalanced-equilibrium-filled-half-bow","reaction-arrow-unbalanced-equilibrium-open-half-angle","reaction-arrow-unbalanced-equilibrium-large-filled-half-bow","reaction-arrow-unbalanced-equilibrium-filled-half-triangle","reaction-arrow-elliptical-arc-arrow-filled-bow","reaction-arrow-elliptical-arc-arrow-filled-triangle","reaction-arrow-elliptical-arc-arrow-open-angle","reaction-arrow-elliptical-arc-arrow-open-half-angle"]),yK=oK(["reaction-map","reaction-unmap","reaction-automap"]),bK="ArrowScroll-module_scroll__h9kCx",xK="ArrowScroll-module_button__ygMgL",_K="ArrowScroll-module_down__yDzZX",wK="ArrowScroll-module_up__Q1ubd";function SK(){return eu.useContext(Zj)}function EK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EK(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function OK(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,eu.useState)({height:void 0,width:void 0}),n=(0,M.Z)(t,2),r=n[0],i=n[1],o=(0,eu.useMemo)((function(){return(0,R.throttle)(i,100)}),[]),a=au()(kK({onResize:o},e)),s=a.ref;return kK({ref:s},r)}function AK(){return eu.useContext(Hj)}var CK=function(){return eu.useContext(Vj)},MK=function(e,t){var n=(0,eu.useRef)(e);(0,eu.useEffect)((function(){n.current=e}),[e]),(0,eu.useEffect)((function(){if(null!==t){var e=setInterval((function(){return n.current()}),t);return function(){return clearInterval(e)}}}),[t])},TK=function(e){var t=e.startInView,n=e.endInView,r=e.scrollUp,o=e.scrollDown,a=(0,eu.useState)(!1),s=(0,M.Z)(a,2),u=s[0],l=s[1],c=(0,eu.useState)(!1),f=(0,M.Z)(c,2),h=f[0],d=f[1];return MK(o,u?100:null),MK(r,h?100:null),(0,eu.useEffect)((function(){return function(){d(!1)}}),[t]),(0,eu.useEffect)((function(){return function(){l(!1)}}),[n]),(0,i.jsxs)("div",{className:bK,children:[n?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)("button",{onClick:function(){return o()},onMouseUp:function(){return l(!1)},onMouseDown:function(){return l(!0)},className:(0,tu.Z)(xK,_K),children:"\u25bc"}),t?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)("button",{onClick:function(){return r()},onMouseUp:function(){return d(!1)},onMouseDown:function(){return d(!0)},className:(0,tu.Z)(xK,wK),children:"\u25b2"})]})},PK=770,RK=870,IK=["height"];function LK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LK(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jK=function(e){var t=e.height,n=(0,N.Z)(e,IK);return t&&t<=PK?(0,i.jsx)(hq,NK({id:"bonds",options:fK,variant:"grouped",groups:hK},n)):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(hq,NK({id:"bond-common",options:aK},n)),(0,i.jsx)(hq,NK({id:"bond-stereo",options:sK},n)),(0,i.jsx)(hq,NK({id:"bond-query",options:uK},n)),(0,i.jsx)(hq,NK({id:"bond-special",options:lK},n))]})};function DK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var BK=function(e){return(0,i.jsx)(dq,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DK(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:"rgroup",options:dK},e))};function zK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var FK=function(e){return(0,i.jsx)(dq,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zK(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:"shapes",options:pK},e))},VK=["height"];function UK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UK(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var HK=function(e){var t=e.height,n=(0,N.Z)(e,VK);return t&&t<=RK?(0,i.jsx)(dq,ZK({id:"transforms",options:vK},n)):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(dq,ZK({id:"transform-rotate"},n)),(0,i.jsx)(dq,ZK({id:"transform-flip-h"},n)),(0,i.jsx)(dq,ZK({id:"transform-flip-v"},n))]})},GK={"button-common-styles":"LeftToolbar-module_button-common-styles__WgnON",scrollbar:"LeftToolbar-module_scrollbar__OBwid",group:"LeftToolbar-module_group__0s41t",root:"LeftToolbar-module_root__yhhZm",buttons:"LeftToolbar-module_buttons__lnIjn",borderOff:"LeftToolbar-module_borderOff__om425",groupItem:"LeftToolbar-module_groupItem__OqQu0"},WK=["className"];function qK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qK(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var YK=(0,nu.$j)((function(e){return{status:e.actionState||{},opened:e.toolbar.opened,indigoVerification:e.requestsStatuses.indigoVerification,disableableButtons:[]}}),(function(e){return{onAction:function(t){return e(SB(t))},onOpen:function(t,n){return e({type:"OPENED",data:{menuName:t,isSelected:n}})}}}))((function(e){var t=e.className,n=(0,N.Z)(e,WK),r=OK(),o=r.ref,a=r.height,s=(0,eu.useRef)(),u=yu({threshold:.8}),l=(0,M.Z)(u,2),c=l[0],f=l[1],h=yu({threshold:.8}),d=(0,M.Z)(h,2),p=d[0],v=d[1],m=(0,eu.useRef)(),g=function(e){var t=e.id,r=e.options;return dq(KK({id:t,options:r},n))},y=n.status,b=function(e){var t=e.items,r=e.className,o=[];return t&&t.forEach((function(e){var t,n,r=!0;(null!==(t=y[e.id])&&void 0!==t&&t.hidden||null!==(n=e.options)&&void 0!==n&&n.every((function(e){var t;return null===(t=y[e.id])||void 0===t?void 0:t.hidden})))&&(r=!1),r&&o.push(e)})),o.length?(0,i.jsx)("div",{className:(0,tu.Z)(GK.group,r),children:o.map((function(e){switch(e.id){case"bond-common":return(0,eu.createElement)(jK,KK(KK({},n),{},{height:a,key:e.id}));case"transform-rotate":return(0,eu.createElement)(HK,KK(KK({},n),{},{height:a,key:e.id}));case"rgroup":return(0,eu.createElement)(BK,KK(KK({},n),{},{key:e.id}));case"shapes":return(0,eu.createElement)(FK,KK(KK({},n),{},{key:e.id}));default:return(0,i.jsx)(g,{id:e.id,options:e.options},e.id)}}))}):null};return(0,i.jsxs)("div",{className:(0,tu.Z)(GK.root,t),ref:o,children:[(0,i.jsxs)("div",{className:GK.buttons,ref:s,children:[(0,i.jsx)("div",{className:GK.listener,ref:c,children:(0,i.jsx)(b,{className:GK.groupItem,items:[{id:"select",options:mK},{id:"erase"}]})}),(0,i.jsx)(b,{className:GK.groupItem,items:[{id:"bonds",options:[].concat(k(aK),k(uK),k(lK),k(sK))},{id:"chain"}]}),(0,i.jsx)(b,{className:GK.groupItem,items:[{id:"charge-plus"},{id:"charge-minus"}]}),(0,i.jsx)(b,{className:GK.groupItem,items:[{id:"transforms",options:vK}]}),(0,i.jsx)(b,{className:GK.groupItem,items:[{id:"sgroup"},{id:"sgroup-data"}]}),(0,i.jsx)(b,{className:GK.groupItem,items:[{id:"reaction-plus"},{id:"arrows",options:gK},{id:"reaction-mapping-tools",options:yK}]}),(0,i.jsx)("div",{className:GK.listener,ref:m,children:(0,i.jsx)(b,{className:GK.groupItem,items:[{id:"rgroup",options:dK}]})}),(0,i.jsx)(b,{className:GK.groupItem,items:[{id:"shapes",options:pK}]}),(0,i.jsx)("div",{ref:p,children:(0,i.jsx)(b,{className:GK.groupItem,items:[{id:"text"}]})})]}),(0,i.jsx)(TK,{startInView:f,endInView:v,scrollUp:function(){s.current.scrollTop-=m.current.offsetHeight},scrollDown:function(){s.current.scrollTop+=m.current.offsetHeight}})]})})),XK="Atom-module_atom__g2RUu",$K=["el","shortcut","selected"];function JK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JK(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eY(e){var t=e.el,n=e.shortcut,r=e.selected,o=(0,N.Z)(e,$K);return(0,i.jsx)("button",QK(QK({title:n?"".concat(t.title," (").concat(n,")"):t.title,className:(0,tu.Z)(XK,{selected:r}),value:t.number},o),{},{children:(0,i.jsx)("span",{children:t.label})}))}var tY={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},nY={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function rY(e,t){var n=function(e){var t,n,r=[],i=1;if("string"===typeof e)if(tY[e])r=tY[e].slice(),n="rgb";else if("transparent"===e)i=0,n="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(e)){var o=e.slice(1);i=1,(u=o.length)<=4?(r=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],4===u&&(i=parseInt(o[3]+o[3],16)/255)):(r=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],8===u&&(i=parseInt(o[6]+o[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),n="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e)){var a=t[1],s="rgb"===a;n=o=a.replace(/a$/,"");var u="cmyk"===o?4:"gray"===o?1:3;r=t[2].trim().split(/\s*[,\/]\s*|\s+/).map((function(e,t){if(/%$/.test(e))return t===u?parseFloat(e)/100:"rgb"===o?255*parseFloat(e)/100:parseFloat(e);if("h"===o[t]){if(/deg$/.test(e))return parseFloat(e);if(void 0!==nY[e])return nY[e]}return parseFloat(e)})),a===o&&r.push(1),i=s||void 0===r[u]?1:r[u],r=r.slice(0,u)}else e.length>10&&/[0-9](?:\s|\/)/.test(e)&&(r=e.match(/([0-9]+)/g).map((function(e){return parseFloat(e)})),n=e.match(/([a-z])/gi).join("").toLowerCase());else isNaN(e)?Array.isArray(e)||e.length?(r=[e[0],e[1],e[2]],n="rgb",i=4===e.length?e[3]:1):e instanceof Object&&(null!=e.r||null!=e.red||null!=e.R?(n="rgb",r=[e.r||e.red||e.R||0,e.g||e.green||e.G||0,e.b||e.blue||e.B||0]):(n="hsl",r=[e.h||e.hue||e.H||0,e.s||e.saturation||e.S||0,e.l||e.lightness||e.L||e.b||e.brightness]),i=e.a||e.alpha||e.opacity||1,null!=e.opacity&&(i/=100)):(n="rgb",r=[e>>>16,(65280&e)>>>8,255&e]);return{space:n,values:r,alpha:i}}(e);return null==t&&(t=n.alpha),"h"===n.space[0]?n.space+["a(",n.values[0],",",n.values[1],"%,",n.values[2],"%,",t,")"].join(""):n.space+["a(",n.values,",",t,")"].join("")}var iY=bu.Z.div((function(e){var t,n=null!==e&&void 0!==e&&null!==(t=e.children)&&void 0!==t&&t.key?V[e.children.key]:"#000";return"\n    ".concat(eY," > button {\n       color: ").concat(n,";\n       border: 1px solid ").concat(n,";\n       &:hover {\n         background-color: ").concat(rY(n,.2),";\n       }\n       &:active {\n         color: #fff;\n         background-color: ").concat(rY(n,.8),";\n       }\n       &.selected {\n         color: #fff;\n         background-color: ").concat(rY(n,.8),";\n  \n         &:hover {\n           background-color: ").concat(n,";\n         }\n       }\n     }\n   ")})),oY=(0,eu.forwardRef)((function(e,t){var n=e.atoms,r=e.active,o=e.onAction,a=r&&"atom"===r.tool;return(0,i.jsx)(i.Fragment,{children:n.map((function(e){var n=H(e),s=Gj.indexOf(e)>-1?tq(Wj[e]):null;return(0,i.jsx)(iY,{ref:t,children:(0,i.jsx)(eY,{el:n,shortcut:s,selected:a&&r&&r.opts.label===e,onClick:function(){return o({tool:"atom",opts:{label:e}})}},e)},e)}))})})),aY="RightToolbar-module_group__3mhUx",sY="RightToolbar-module_root__1D5hp",uY="RightToolbar-module_atomsList__ar08-",lY="RightToolbar-module_buttons__YxRHI",cY=["className"];function fY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fY(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dY,pY,vY,mY,gY,yY,bY,xY,_Y,wY,SY,EY,kY,OY,AY,CY,MY=function(e){var t=e.children,n=e.className;return(0,i.jsx)("div",{className:(0,tu.Z)(aY,n),children:t})},TY=(0,nu.$j)((function(e){return{active:e.actionState&&e.actionState.activeTool,status:e.actionState||{},freqAtoms:e.toolbar.freqAtoms,opened:e.toolbar.opened,indigoVerification:e.requestsStatuses.indigoVerification,disableableButtons:[]}}),(function(e){return{onAction:function(t){return e(SB(t))},onOpen:function(t,n){return e({type:"OPENED",data:{menuName:t,isSelected:n}})}}}))((function(e){var t=e.className,n=(0,N.Z)(e,cY),r=n.active,o=n.onAction,a=n.freqAtoms,s=yu({threshold:.8}),u=(0,M.Z)(s,2),l=u[0],c=u[1],f=yu({threshold:.8}),h=(0,M.Z)(f,2),d=h[0],p=h[1],v=(0,eu.useRef)(),m=(0,eu.useRef)();return(0,i.jsxs)("div",{className:(0,tu.Z)(sY,t),children:[(0,i.jsxs)("div",{className:lY,ref:m,children:[(0,i.jsxs)(MY,{className:uY,children:[(0,i.jsx)(oY,{ref:l,atoms:Gj,active:r,onAction:o}),(0,i.jsx)(oY,{atoms:a,active:r,onAction:o}),(0,i.jsx)(dq,hY({id:"period-table"},n))]}),(0,i.jsx)(MY,{children:(0,i.jsxs)("div",{ref:v,children:[(0,i.jsx)(dq,hY({id:"any-atom"},n)),(0,i.jsx)(dq,hY({id:"extended-table"},n))]})}),(0,i.jsx)("div",{ref:d})]}),(0,i.jsx)(TK,{startInView:c,endInView:p,scrollUp:function(){m.current.scrollTop-=v.current.offsetHeight},scrollDown:function(){m.current.scrollTop+=v.current.offsetHeight}})]})})),PY=(0,bu.Z)(_u.Z)(dY||(dY=xu(["\n  display: block;\n  color: #333;\n  border: 0;\n  position: relative;\n  background: inherit;\n\n  flex-shrink: 0;\n\n  border-radius: 4px;\n  margin: 0px;\n  padding: 2px;\n  height: 28px;\n  width: 28px;\n\n  &:hover {\n    color: #006775;\n    transform: none;\n    box-shadow: none;\n    transition: none;\n    background: none;\n  }\n\n  &:active {\n    background-color: #006775;\n    color: white;\n    &:hover {\n      background-color: #188794;\n    }\n  }\n\n  & svg {\n    width: 100%;\n    height: 100%;\n  }\n\n  &.Mui-disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n    background-color: initial;\n    color: #333;\n    pointer-events: auto;\n  }\n\n  @media only screen and (min-width: 1024px) {\n    height: 32px;\n    width: 32px;\n    padding: 4px;\n  }\n\n  @media only screen and (min-width: 1920px) {\n    height: 40px;\n    width: 40px;\n    padding: 5px;\n  }\n"]))),RY=function(e){var t=e.onClick,n=e.iconName,r=e.title,o=e.shortcut,a=e.isHidden,s=void 0!==a&&a,u=e.disabled,l=void 0!==u&&u,c=o?"".concat(r," (").concat(o,")"):r;return s?null:(0,i.jsx)(PY,{title:c,onClick:t,disabled:l,children:(0,i.jsx)($W,{name:n})})},IY=function(e){var t=e.onFileOpen,n=e.onSave,r=e.shortcuts,o=e.hiddenButtons;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(RY,{title:"Open...",onClick:t,iconName:"open",shortcut:r.open,isHidden:o.includes("open")}),(0,i.jsx)(RY,{title:"Save as...",onClick:n,iconName:"save",shortcut:r.save,isHidden:o.includes("save")})]})},LY=(0,bu.Z)("div")(pY||(pY=xu(["\n  position: relative;\n"]))),NY=(0,bu.Z)("div")(vY||(vY=xu(["\n  display: flex;\n  position: absolute;\n  left: 5px;\n  border-radius: 2px;\n  flex-direction: column;\n  z-index: 20;\n  white-space: nowrap;\n  word-break: keep-all;\n  padding: 2px;\n  background: white; // TODO use variable\n  border: 1px solid #cad3dd; // TODO use variable\n  border-radius: 5px;\n  box-shadow: 0 6px 12px rgb(0 0 0 / 18%);\n"]))),jY=(0,bu.Z)(_u.Z)(mY||(mY=xu(["\n  position: absolute;\n  padding: 0;\n  right: 0;\n  bottom: 0;\n\n  &.disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n    background-color: initial;\n    color: #333;\n    pointer-events: auto;\n  }\n"]))),DY=(0,bu.Z)($W)(gY||(gY=xu(["\n  display: block;\n  width: 7px;\n  height: 7px;\n  margin: 1px;\n\n  &:hover {\n    fill: #005662;\n    transform: none;\n    box-shadow: none;\n    transition: none;\n    background: none;\n  }\n\n  &svg {\n    width: 100%;\n    height: 100%;\n  }\n\n  &svg path {\n    fill: inherit;\n  }\n"]))),BY=(0,nu.$j)(null,(function(e){return{onToolOpen:function(){return e({type:"OPENED",data:{menuName:null,isSelected:null}})}}}))((function(e){var t=e.topElement,n=e.dropDownElements,r=e.onToolOpen,o=(0,eu.useState)(!1),a=(0,M.Z)(o,2),s=a[0],u=a[1],l=function(){u(!1)};return(0,i.jsxs)(LY,{children:[t&&t,0!==n.filter((function(e){return!e.props.isHidden})).length&&(0,i.jsx)(jY,{onClick:function(){r(),u(!0)},className:"expanded ".concat(null!==t&&void 0!==t&&t.props.disabled?"disabled":""),children:!s&&(0,i.jsx)(DY,{name:"dropdown"})}),(0,i.jsx)(wu.Z,{in:s,timeout:"auto",onClick:l,unmountOnExit:!0,children:(0,i.jsx)(Su.Z,{onClickAway:l,children:(0,i.jsx)(NY,{children:n})})})]})})),zY=function(e){var t=e.onCopy,n=e.onCopyMol,r=e.onCopyKet,o=e.onCopyImage,a=e.onPaste,s=e.onCut,u=e.shortcuts,l=e.disabledButtons,c=e.hiddenButtons,f=[{name:"copy",title:"Copy",handler:t},{name:"copy-mol",title:"Copy as MOL",handler:n},{name:"copy-ket",title:"Copy as KET",handler:r},{name:"copy-image",title:"Copy Image",handler:o}],h=function(e){return(0,i.jsx)(RY,{title:e.title,onClick:e.handler,iconName:e.name,shortcut:u[e.name],disabled:l.includes(e.name),isHidden:c.includes(e.name)},e.name)},d=f.find((function(e){return!c.includes(e.name)})),p=f.filter((function(e){return e!==d})).map((function(e){return h(e)}));return(0,i.jsxs)(i.Fragment,{children:[!c.includes("copies")&&(0,i.jsx)(BY,{topElement:h(d),dropDownElements:p}),(0,i.jsx)(RY,{title:"Paste",onClick:a,iconName:"paste",shortcut:u.paste,disabled:l.includes("paste"),isHidden:c.includes("paste")}),(0,i.jsx)(RY,{title:"Cut",onClick:s,iconName:"cut",shortcut:u.cut,disabled:l.includes("cut"),isHidden:c.includes("cut")})]})},FY=(0,bu.Z)("hr")(yY||(yY=xu(["\n  margin: 0px 3px;\n  flex-shrink: 0;\n  height: 45%;\n  align-self: center;\n  border-width: 0px thin 0px 0px;\n  border-style: solid;\n  border-color: #b4b9d6; // TODO: use variable\n"]))),VY=function(){return(0,i.jsx)(FY,{})},UY=function(e){var t=e.onUndo,n=e.onRedo,r=e.disabledButtons,o=e.hiddenButtons,a=e.shortcuts;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(VY,{}),(0,i.jsx)(RY,{title:"Undo",onClick:t,iconName:"undo",disabled:r.includes("undo"),isHidden:o.includes("undo"),shortcut:a.undo}),(0,i.jsx)(RY,{title:"Redo",onClick:n,iconName:"redo",disabled:r.includes("redo"),isHidden:o.includes("redo"),shortcut:a.redo}),(0,i.jsx)(VY,{})]})},ZY=(0,bu.Z)("input")(bY||(bY=xu(["\n  border: 1px solid #cad3dd;\n  border-radius: 4px;\n  padding: 3px 8px;\n  color: #585858;\n  font-size: 14px;\n  line-height: 16px;\n  caret-color: #43b5c0;\n  margin-bottom: 8px;\n\n  &:hover {\n    border-color: #43b5c0;\n  }\n\n  &:active,\n  &:focus {\n    border-color: #167782;\n    outline: none;\n  }\n\n  &::after,\n  &::before {\n    display: none;\n  }\n"]))),HY=function(e){e.target.select()},GY=function(e,t){t&&(t.value="".concat(e,"%"))},WY=function(e){var t=e.onZoomSubmit,n=e.currentZoom,r=e.inputRef,o=e.shortcuts;(0,eu.useEffect)((function(){var e=r.current;GY(n,e),document.activeElement===e&&(null===e||void 0===e||e.select())}),[n,r]);var a=(0,eu.useCallback)((function(e){var n=r.current;n&&([o["zoom-out"],o["zoom-in"]].includes(e.key)||e.nativeEvent.stopImmediatePropagation(),"Enter"===e.key&&(t(),n.select()))}),[t,r,o]);return(0,eu.useEffect)((function(){var e=r.current;null===e||void 0===e||e.focus(),null===e||void 0===e||e.select()}),[r]),(0,i.jsx)(ZY,{ref:r,onFocus:HY,onKeyDown:a})},qY=(0,bu.Z)("div")(xY||(xY=xu(["\n  position: relative;\n"]))),KY=(0,bu.Z)(Eu.Z)(_Y||(_Y=xu(["\n  display: flex;\n  color: #000000;\n  padding-right: 0;\n  padding-left: 0;\n\n  & svg {\n    margin-left: 2px;\n    width: 16px;\n    height: 16px;\n  }\n"]))),YY=(0,bu.Z)("span")(wY||(wY=xu(["\n  width: 35px;\n"]))),XY=(0,bu.Z)(ku.ZP)(SY||(SY=xu(["\n  & .MuiPopover-paper {\n    padding: 8px;\n    width: 135px;\n    border: none;\n    border-radius: 0px 0px 4px 4px;\n    box-shadow: 0px 30px 48px -17px rgba(160, 165, 174, 0.3);\n    box-sizing: border-box;\n  }\n"]))),$Y=(0,bu.Z)("div")(EY||(EY=xu(["\n  display: flex;\n  flex-direction: column;\n  white-space: nowrap;\n  word-break: keep-all;\n  background: white;\n"]))),JY=(0,bu.Z)(Eu.Z)(kY||(kY=xu(["\n  display: flex;\n  justify-content: space-between;\n  font-weight: 400;\n  font-size: 12px;\n  line-height: 14px;\n  padding: 7px 8px;\n  text-transform: none;\n  color: #333333;\n"]))),QY=(0,bu.Z)("span")(OY||(OY=xu(["\n  color: #cad3dd;\n"]))),eX=function(e){var t=e.currentZoom,n=e.onZoom,r=e.onZoomIn,o=e.onZoomOut,a=e.disabledButtons,s=e.hiddenButtons,u=e.shortcuts,l=(0,eu.useState)(!1),c=(0,M.Z)(l,2),f=c[0],h=c[1],d=(0,eu.useRef)(null),p=(0,eu.useRef)(null),v=(0,eu.useCallback)((function(){var e=p.current;if(e){var r=function(e){var t=parseInt(e||"");return isNaN(t)?0:t}(e.value);if(r&&r!==t){var i=function(e,t){if(0===e)return t;var n=100*Math.min.apply(Math,k(LB)),r=100*Math.max.apply(Math,k(LB));return e<n?n:e>r?r:e}(r,t);GY(i,e),n(i)}else GY(t,e)}}),[n,t]);return(0,i.jsxs)(qY,{ref:d,children:[(0,i.jsxs)(KY,{onClick:function(){h(!0)},children:[(0,i.jsxs)(YY,{children:[Math.round(t),"%"]}),(0,i.jsx)($W,{name:"chevron"})]}),(0,i.jsx)(XY,{open:f,onClose:function(e,t){"backdropClick"===t&&v(),h(!1)},anchorEl:d.current,container:d.current,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,i.jsxs)($Y,{children:[(0,i.jsx)(WY,{onZoomSubmit:v,inputRef:p,currentZoom:t,shortcuts:u}),!s.includes("zoom-out")&&(0,i.jsxs)(JY,{title:"Zoom Out",onClick:o,disabled:a.includes("zoom-out"),children:[(0,i.jsx)("span",{children:"Zoom out"}),(0,i.jsx)(QY,{children:u["zoom-out"]})]}),!s.includes("zoom-in")&&(0,i.jsxs)(JY,{title:"Zoom In",onClick:r,disabled:a.includes("zoom-in"),children:[(0,i.jsx)("span",{children:"Zoom in"}),(0,i.jsx)(QY,{children:u["zoom-in"]})]}),(0,i.jsx)(JY,{onClick:function(){n(100)},children:(0,i.jsx)("span",{children:"Zoom 100%"})})]})})]})},tX=(0,bu.Z)("div")(AY||(AY=xu(["\n  display: flex;\n  align-items: center;\n  flex-grow: 1;\n  justify-content: flex-end;\n"]))),nX=function(e){var t=e.disabledButtons,n=e.hiddenButtons,r=e.onSettingsOpen,o=e.onFullscreen,a=e.onHelp,s=e.onAboutOpen,u=e.className;return(0,i.jsxs)(tX,{className:u,children:[(0,i.jsx)(RY,{title:"Settings",onClick:r,iconName:"settings",disabled:t.includes("settings"),isHidden:n.includes("settings")}),(0,i.jsx)(RY,{title:"Help (".concat(tq(["?","&","Shift+/"]),")"),onClick:a,iconName:"help",disabled:t.includes("help"),isHidden:n.includes("help")}),(0,i.jsx)(RY,{title:"About",onClick:s,iconName:"about",disabled:t.includes("about"),isHidden:n.includes("about")}),(0,i.jsx)(RY,{title:"Fullscreen mode",onClick:o,iconName:document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?"fullscreen-exit":"fullscreen-enter",disabled:t.includes("fullscreen"),isHidden:n.includes("fullscreen")})]})},rX=function(e){var t=e.isCollapsed,n=e.onLayout,r=e.onClean,o=e.onAromatize,a=e.onDearomatize,s=e.onCalculate,u=e.onCheck,l=e.onAnalyse,c=e.onStereo,f=e.onMiew,h=e.disabledButtons,d=e.indigoVerification,p=e.hiddenButtons,v=e.shortcuts,m=[{name:"arom",title:"Aromatize",handler:o},{name:"dearom",title:"Dearomatize",handler:a},{name:"layout",title:"Layout",handler:n},{name:"clean",title:"Clean Up",handler:r},{name:"cip",title:"Calculate CIP",handler:s},{name:"check",title:"Check Structure",handler:u},{name:"analyse",title:"Calculated Values",handler:l},{name:"enhanced-stereo",title:"Stereochemistry",handler:c},{name:"miew",title:"3D Viewer",handler:f}],g=function(e){return(0,i.jsx)(RY,{title:e.title,onClick:e.handler,iconName:e.name,shortcut:v[e.name],disabled:d||h.includes(e.name),isHidden:p.includes(e.name)},e.name)},y=m.find((function(e){return!p.includes(e.name)})),b=m.filter((function(e){return e!==y})).map((function(e){return g(e)}));return t?(0,i.jsx)(BY,{topElement:g(y),dropDownElements:b}):(0,i.jsxs)(i.Fragment,{children:[y&&g(y),(0,i.jsx)(i.Fragment,{children:b})]})},iX=(0,bu.Z)("div")(CY||(CY=xu(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 0px;\n  height: 36px;\n  padding: 0px 8px;\n\n  .group {\n    display: flex;\n    flex-direction: row;\n    gap: 0px;\n  }\n\n  & * {\n    box-sizing: border-box;\n  }\n\n  @media only screen and (min-width: 1024px) {\n    height: 40px;\n    gap: 4px;\n\n    .group {\n      gap: 4px;\n    }\n  }\n\n  @media only screen and (min-width: 1920px) {\n    height: 64px;\n    gap: 12px;\n  }\n"]))),oX=Object.keys(_Z).reduce((function(e,t){var n;if(null!==(n=_Z[t])&&void 0!==n&&n.shortcut){var r=tq(_Z[t].shortcut);e[t]=r}return e}),{}),aX=(0,nu.$j)((function(e){var t,n,r=e.actionState||{},i=Object.keys(r).reduce((function(e,t){var n;return null!==(n=r[t])&&void 0!==n&&n.disabled&&e.push(t),e}),[]),o=Object.keys(r).reduce((function(e,t){var n;return null!==(n=r[t])&&void 0!==n&&n.hidden&&e.push(t),e}),[]);return{currentZoom:Math.round(100*(null===(t=e.actionState)||void 0===t||null===(n=t.zoom)||void 0===n?void 0:n.selected)),disabledButtons:i,hiddenButtons:o,shortcuts:oX,status:e.actionState||{},opened:e.toolbar.opened,indigoVerification:e.requestsStatuses.indigoVerification,disableableButtons:["layout","clean","arom","dearom","cip","enhanced-stereo"]}}),(function(e){var t=function(t){e(SB(_Z[t].action))};return{onClear:function(){return t("clear")},onFileOpen:function(){return t("open")},onSave:function(){return t("save")},onUndo:function(){return t("undo")},onRedo:function(){return t("redo")},onCopy:function(){return t("copy")},onCopyMol:function(){return t("copy-mol")},onCopyKet:function(){return t("copy-ket")},onCopyImage:function(){return t("copy-image")},onCut:function(){return t("cut")},onPaste:function(){return t("paste")},onZoomIn:function(){return t("zoom-in")},onZoomOut:function(){return t("zoom-out")},onZoom:function(t){return e(SB((function(e){return e.zoom(t/100)})))},onSettingsOpen:function(){return t("settings")},onLayout:function(){return t("layout")},onClean:function(){return t("clean")},onAromatize:function(){return t("arom")},onDearomatize:function(){return t("dearom")},onCalculate:function(){return t("cip")},onCheck:function(){return t("check")},onAnalyse:function(){return t("analyse")},onStereo:function(){return t("enhanced-stereo")},onMiew:function(){return t("miew")},onAction:function(t){return e(SB(t))},onOpen:function(t,n){return e({type:"OPENED",data:{menuName:t,isSelected:n}})},onFullscreen:function(){return t("fullscreen")},onHelp:function(){return t("help")},onAbout:function(){return t("about")}}}))((function(e){var t=e.className,n=e.disabledButtons,r=e.indigoVerification,o=e.hiddenButtons,a=e.shortcuts,s=e.onClear,u=e.onFileOpen,l=e.onSave,c=e.onUndo,f=e.onRedo,h=e.onCopy,d=e.onCopyMol,p=e.onCopyKet,v=e.onCopyImage,m=e.onCut,g=e.onPaste,y=e.currentZoom,b=e.onZoom,x=e.onZoomIn,_=e.onZoomOut,w=e.onSettingsOpen,S=e.onLayout,E=e.onClean,k=e.onAromatize,O=e.onDearomatize,A=e.onCalculate,C=e.onCheck,M=e.onAnalyse,T=e.onStereo,P=e.onMiew,R=e.onFullscreen,I=e.onAbout,L=e.onHelp,N=OK(),j=N.ref,D=N.width,B=void 0===D?50:D;return(0,i.jsxs)(iX,{className:t,ref:j,children:[(0,i.jsx)(RY,{title:"Clear Canvas",onClick:s,iconName:"clear",shortcut:a.clear,isHidden:o.includes("clear")}),(0,i.jsx)(IY,{onFileOpen:u,onSave:l,shortcuts:a,hiddenButtons:o}),(0,i.jsx)(zY,{onCopy:h,onCopyMol:d,onCopyKet:p,onCopyImage:v,onPaste:g,onCut:m,shortcuts:a,disabledButtons:n,hiddenButtons:o}),(0,i.jsx)(UY,{onUndo:c,onRedo:f,disabledButtons:n,hiddenButtons:o,shortcuts:a}),(0,i.jsx)(rX,{onLayout:S,onClean:E,onAromatize:k,onDearomatize:O,onCalculate:A,onCheck:C,onAnalyse:M,onStereo:T,onMiew:P,disabledButtons:n,hiddenButtons:o,shortcuts:a,indigoVerification:r,isCollapsed:B<650}),(0,i.jsx)(nX,{onHistoryClick:function(){},onSettingsOpen:w,onFullscreen:R,onHelp:L,onAboutOpen:I,disabledButtons:n,hiddenButtons:o}),(0,i.jsx)(VY,{}),!o.includes("zoom-list")&&(0,i.jsx)(eX,{currentZoom:y||1,onZoomIn:x,onZoomOut:_,onZoom:b,shortcuts:a,disabledButtons:n,hiddenButtons:o})]})})),sX="undefined"!==typeof navigator&&/Mac/.test(navigator.platform);function uX(e){var t,n,r,i,o=e.split(/\+(?!$)/),a=o[o.length-1];"Space"===a&&(a=" ");for(var s=0;s<o.length-1;s++){var u=o[s];if(/^(cmd|meta|m)$/i.test(u))i=!0;else if(/^a(lt)?$/i.test(u))t=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else if(/^s(hift)?$/i.test(u))r=!0;else{if(!/^mod$/i.test(u))throw new Error("Unrecognized modifier name: "+u);sX?i=!0:n=!0}}return t&&(a="Alt+"+a),n&&(a="Ctrl+"+a),i&&(a="Meta+"+a),r&&(a="Shift+"+a),a}function lX(e){var t=Object.create(null);return Object.keys(e).forEach((function(n){t[uX(n)]=e[n]})),t}function cX(e,t,n){return t.altKey&&(e="Alt+"+e),t.ctrlKey&&(e="Ctrl+"+e),t.metaKey&&(e="Meta+"+e),!1!==n&&t.shiftKey&&(e="Shift+"+e),e}function fX(e,t){return e.replace(/[\u0430-\u044f]/,ju[t.keyCode]).replace(/[\u0410-\u042f]/,Du[t.keyCode])}function hX(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=fX(Wu(e),e),r=1===n.length&&" "!==n;return r&&!t?cX(n,e,!r):cX(ju[e.keyCode],e,!0)}function dX(e){return e instanceof KeyboardEvent?hX.apply(void 0,arguments):"object"===v(e)?lX(e):uX(e)}function pX(e){return function(t,n){var r=function(){var e,t={};return Object.keys(_Z).forEach((function(n){(e=_Z[n]).shortcut&&(Array.isArray(e.shortcut)?e.shortcut.forEach((function(e){vX(e,n,t)})):vX(e.shortcut,n,t))})),dX(t)}();e.addEventListener("keydown",(function(e){return function(e,t,n,r){if(t.modal)return;var i=t.editor,o=t.actionState,a=o.activeTool,s=dX(r),u=i.selection()&&i.selection().atoms,l=null;if(s&&1===s.length&&u&&s.match(/\w/))Cq(e,"labelEdit",{letter:s}).then((function(t){e(SB({tool:"atom",opts:t}))})).catch((function(){return null})),r.preventDefault();else if(void 0!==(l=dX.lookup(n,r))){var c=function(e,t){var n=e.indexOf(t.tool);return e.forEach((function(e,r){(0,F.isEqual)(_Z[e].action,t)&&(n=r)})),n}(l,a),f=l[c=(c+1)%l.length];if(o[f]&&!0===o[f].disabled)return void r.preventDefault();if(-1===iD.indexOf(f)){var h=_Z[f].action;e(SB(h)),r.preventDefault()}else window.clipboardData&&oD(r)}}(t,n(),r,e)}))}}function vX(e,t,n){Array.isArray(n[e])?n[e].push(t):n[e]=[t]}dX.lookup=function(e,t){var n=fX(Wu(t),t);"Add"===n&&(n="+"),"Subtract"===n&&(n="-");var r,i=1===n.length&&" "!==n,o=e[cX(n,t,!i)];return t.shiftKey&&i&&(r=ju[t.keyCode])&&(o=e[cX(r,t,!0)]||o),o};var mX=/\$RXN\n+\s+0\s+0\s+0\n*/;function gX(e,t){var r=Object.keys(Tn).map((function(e){return Tn[e].mime})),i=(0,F.debounce)(0,(function(t){return e(SB(t))})),o=(0,F.debounce)(0,(function(t,n){return e(kB(t,n))}));return{formats:r,focused:function(){return!n.g.currentState.modal},onCut:function(){var e=n.g.currentState.editor,t=yX(e);return t?i({tool:"eraser",opts:1}):e.selection(null),t},onCopy:function(){var e=n.g.currentState.editor,t=yX(e);return e.selection(null),t},onPaste:function(e){var t=e[_n.KET]||e[_n.Mol]||e[_n.Rxn]||e["text/plain"];!t&&mX.test(e["text/plain"])||o(t,{fragment:!0})}}}function yX(e){var t={},n=e.structSelected(),r=e.errorHandler;if(n.isBlank())return null;if(Boolean(n.simpleObjects.size||n.texts.size)&&window.clipboardData)return r('The structure you are trying to copy contains Simple object or/and Text object.To copy Simple object or Text object in Internet Explorer try "Copy as KET" button'),null;var i=new fn;try{var o=(new at).serialize(n);t[_n.KET]=o;var a=n.isReaction?_n.Mol:_n.Rxn,s=i.serialize(n);return t["text/plain"]=s,t[a]=s,t}catch(u){r(u.message)}return null}var bX=(0,nu.$j)(null,(function(e){return e(gX)}))(tD),xX=(0,nu.$j)(null,(function(e){return{onInitTmpls:function(t,n){wq(e,n,t)}}}))((function(e){var t=e.onInitTmpls,n=(0,eu.useRef)(null),r=SK().staticResourcesUrl;return(0,eu.useEffect)((function(){t(n.current,r)}),[]),(0,i.jsx)("div",{style:{display:"none"},ref:n})})),_X="Modal-module_modalOverlay__AzVeg",wX="Modal-module_smallScreen__nzt2L",SX={"button-common-styles":"Select-module_button-common-styles__cgaVz",scrollbar:"Select-module_scrollbar__cA89D",dropdownList:"Select-module_dropdownList__rdcrH",selectContainer:"Select-module_selectContainer__yXT-t"},EX=600,kX=600,OX={"button-common-styles":"Dialog-module_button-common-styles__HcaFV",scrollbar:"Dialog-module_scrollbar__9Iy27",dialog:"Dialog-module_dialog__IafFQ",hide:"Dialog-module_hide__6R16B",header:"Dialog-module_header__T7-24",btnContainer:"Dialog-module_btnContainer__TOLPx",buttonTop:"Dialog-module_buttonTop__ZhwZQ",closeButton:"Dialog-module_closeButton__Ch6UT",footer:"Dialog-module_footer__NTq5o",ok:"Dialog-module_ok__T4j7Z",cancel:"Dialog-module_cancel__RcR-D",withDivider:"Dialog-module_withDivider__8LsbA",body:"Dialog-module_body__YgzDR",withMargin:"Dialog-module_withMargin__SDH61"},AX=["children","title","params","result","valid","buttons","headerContent","footerContent","className","buttonsNameMap","needMargin","withDivider","focusable"];function CX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CX(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var TX=function(e){var t=e.children,n=e.title,r=e.params,o=e.result,a=void 0===o?function(){return null}:o,s=e.valid,u=void 0===s?function(){return!!a()}:s,l=e.buttons,c=void 0===l?["OK"]:l,f=e.headerContent,h=e.footerContent,d=e.className,p=e.buttonsNameMap,v=e.needMargin,m=void 0===v||v,g=e.withDivider,y=void 0!==g&&g,b=e.focusable,x=void 0===b||b,_=(0,N.Z)(e,AX),w=(0,eu.useRef)(null);(0,eu.useLayoutEffect)((function(){return x&&w.current.focus(),function(){var e,t;null===(e=w.current)||void 0===e||null===(t=e.closest(".Ketcher-root"))||void 0===t||t.getElementsByClassName("cliparea")[0].focus()}}),[x]);var S=function(e){return"OK"===e||"Save"===e},E=function(e){var t=S(e)?"onOk":"onCancel";r&&t in r&&("onOk"!==t||u())&&r[t](a())};return(0,i.jsxs)("div",MX(MX({ref:w,role:"dialog",onSubmit:function(e){return e.preventDefault()},onKeyDown:function(e){var t=Wu(e),n=document.activeElement,r=n&&"TEXTAREA"===n.tagName;("Escape"===t||"Enter"===t&&!r)&&(E("Enter"===t?"OK":"Cancel"),e.preventDefault(),e.stopPropagation())},tabIndex:-1,className:(0,tu.Z)(OX.dialog,d,r.className)},_),{},{children:[(0,i.jsxs)("header",{className:(0,tu.Z)(OX.header,y&&OX.withDivider),children:[f||(0,i.jsx)("span",{children:n}),(0,i.jsx)("div",{className:OX.btnContainer,children:(0,i.jsx)("button",{className:OX.buttonTop,onClick:function(){return E("Cancel")},children:(0,i.jsx)($W,{name:"close",className:OX.closeButton})})})]}),(0,i.jsx)("div",{className:(0,tu.Z)(OX.body,m&&OX.withMargin),children:t}),(h||c.length>0)&&(0,i.jsxs)("footer",{className:OX.footer,children:[h,c.length>0&&c.map((function(e){return"string"!==typeof e?e:(0,i.jsx)("input",{type:"button",className:(0,tu.Z)(S(e)?OX.ok:OX.cancel,"Save"===e&&OX.save),value:p&&p[e]?p[e]:e,disabled:S(e)&&!u(),onClick:function(){return E(e)}},e)}))]})]}))},PX="LoadingCircles-module_container__MPCs0",RX=function(){return(0,i.jsxs)("div",{className:PX,children:[(0,i.jsx)("span",{}),(0,i.jsx)("span",{}),(0,i.jsx)("span",{})]})},IX=["id","dist"];function LX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var NX=.4,jX={atoms:DX,bonds:BX,enhancedFlags:function(e,t,n,r,i){var o,a=null;return e.enhancedFlags.forEach((function(n,r){var s=e.molecule.frags.get(r);if(s&&s.enhancedStereoFlag&&i.showStereoFlags){var u=s.stereoFlagPosition?new Y(s.stereoFlagPosition.x,s.stereoFlagPosition.y):ce.getDefaultStereoFlagPosition(e.molecule,r);if(u&&!(Math.abs(t.x-u.x)>=1)){var l=Math.abs(t.y-u.y);l<.3&&(!a||l<o)&&(a={id:r,dist:o=l})}}})),a},sgroupData:function(e,t){var n=null,r=null;return e.sgroupData.forEach((function(e,i){if("DAT"!==e.sgroup.type)throw new Error("Data group expected");if("MRV_IMPLICIT_H"!==e.sgroup.data.fieldName){var o=e.sgroup.dataArea,a=o.p0.y<t.y&&o.p1.y>t.y&&o.p0.x<t.x&&o.p1.x>t.x,s=Math.min(Math.abs(o.p0.x-t.x),Math.abs(o.p1.x-t.x));a&&(null===r||s<n)&&(r={id:i,dist:s},n=s)}})),r},sgroups:function(e,t){var n=null,r=NX;if(e.molecule.sgroups.forEach((function(e,i){if(e.functionalGroup&&!e.expanded&&e.firstSgroupAtom)return null;var o=e.bracketDir,a=o.rotateSC(1,0),s=new Y(Y.dot(t,o),Y.dot(t,a));e.areas.forEach((function(e){var t=e.p0.y<s.y&&e.p1.y>s.y&&e.p0.x<s.x&&e.p1.x>s.x,o=Math.min(Math.abs(e.p0.x-s.x),Math.abs(e.p1.x-s.x));t&&(null===n||o<r)&&(n=i,r=o)}))})),null!==n)return{id:n,dist:r};return null},functionalGroups:function(e,t){var n=null,r=NX;if(e.molecule.sgroups.forEach((function(e,i){if(e.functionalGroup&&!e.data.expanded&&e.firstSgroupAtom){var o=e.firstSgroupAtom.pp,a=new Y(.625,.625),s={p0:Y.diff(o,a),p1:Y.sum(o,a)},u=s.p0.y<t.y&&s.p1.y>t.y&&s.p0.x<t.x&&s.p1.x>t.x,l=Math.min(Math.abs(s.p0.x-t.x),Math.abs(s.p0.y-t.y),Math.abs(s.p1.x-t.x),Math.abs(s.p0.y-t.y));u&&(null===n||l<r)&&(n=i,r=l)}})),null!==n)return{id:n,dist:r};return null},rxnArrows:function(e,t){var n=null,r=null,i=null;return e.rxnArrows.forEach((function(o,a){var s=o.calcDistance(t,e.render.options.scale);s.minDist<.3&&(!i||s.minDist<n)&&(n=s.minDist,r=s.refPoint,i={id:a,dist:n,ref:r})})),i},rxnPluses:function(e,t){var n=null,r=null;return e.rxnPluses.forEach((function(e,i){var o=e.item.pp,a=Math.max(Math.abs(t.x-o.x),Math.abs(t.y-o.y));a<.3&&(!r||a<n)&&(r={id:i,dist:n=a})})),r},frags:function(e,t,n,r,i){r=Math.min(r||NX,NX);var o=e.molecule,a=DX(e,t,n,r);if(a)return{id:o.atoms.get(a.id).fragment,dist:a.dist};var s=BX(e,t,n,r,i);if(s){var u=o.bonds.get(s.id).begin;return{id:o.atoms.get(u).fragment,dist:s.dist}}return null},rgroups:function(e,t,n,r){r=Math.min(r||NX,NX);var i=null;return e.rgroups.forEach((function(e,o){if(o!==n&&e.labelBox&&e.labelBox.contains(t,.5)){var a=Y.dist(e.labelBox.centre(),t);(!i||a<r)&&(i={id:o,dist:r=a})}})),i},simpleObjects:function(e,t){var n=null,r=null,i=null;return e.simpleObjects.forEach((function(o,a){var s=o.calcDistance(t,e.render.options.scale);s.minDist<.3&&(!i||s.minDist<n)&&(n=s.minDist,r=s.refPoint,i={id:a,dist:n,ref:r})})),i},texts:function(e,t){var n=null,r=null;return e.texts.forEach((function(i,o){var a=i.getReferencePoints(e),s=a[0].x,u=a[0].y,l=a[2].x,c=a[2].y,f=[];t.x>=s&&t.x<=l&&(t.y<u?f.push(u-t.y):t.y>c?f.push(t.y-c):f.push(t.y-u,c-t.y)),t.x<s&&t.y<u&&f.push(Y.dist(new Y(s,u),t)),t.x>l&&t.y>c&&f.push(Y.dist(new Y(l,c),t)),t.x<s&&t.y>c&&f.push(Y.dist(new Y(s,c),t)),t.x>l&&t.y<u&&f.push(Y.dist(new Y(l,u),t)),t.y>=u&&t.y<=c&&(t.x<s?f.push(s-t.x):t.x>l?f.push(t.x-l):f.push(0));var h=Math.min.apply(Math,f);h<NX&&(!r||h<n)&&(r={id:o,dist:n=h})})),r}};function DX(e,t,n,r){var i=null,o=n&&"atoms"===n.map?n.id:null,a=e.sgroups,s=e.molecule.functionalGroups;return r=r||.4,r=Math.min(r,.4),e.atoms.forEach((function(e,n){if(Se.isAtomInContractedFunctionalGroup(e.a,a,s,!0))return null;if(n!==o){var u=Y.dist(t,e.a.pp);u<r&&(i=n,r=u)}})),null!==i?{id:i,dist:r}:null}function BX(e,t,n,r,i){var o=null,a=null,s=.32000000000000006,u=n&&"bonds"===n.map?n.id:null,l=e.sgroups,c=e.molecule.functionalGroups;r=r||s;var f=r=Math.min(r,s);return e.bonds.forEach((function(n,r){if(r!==u){var i=e.atoms.get(n.b.begin).a,o=e.atoms.get(n.b.end).a;if(Se.isBondInContractedFunctionalGroup(n.b,l,c,!0))return null;var s=Y.lc2(i.pp,.5,o.pp,.5),h=Y.dist(t,s);h<f&&(f=h,a=r)}})),e.bonds.forEach((function(n,i){if(i!==u){if(Se.isBondInContractedFunctionalGroup(n.b,l,c,!0))return null;var a=e.molecule.halfBonds.get(n.b.hb1),s=a.dir,f=a.norm,h=e.atoms.get(n.b.begin).a.pp,d=e.atoms.get(n.b.end).a.pp;if(Y.dot(t.sub(h),s)*Y.dot(t.sub(d),s)<0){var p=Math.abs(Y.dot(t.sub(h),f));p<r&&(o=i,r=p)}}})),null!==a?{id:a,dist:f}:null!==o&&r>NX*i?{id:o,dist:r}:null}var zX={atom:DX,item:function(e,t,n,i,o){return(n=n||Object.keys(jX)).reduce((function(n,a){var s=n?n.dist:null,u=jX[a](e,t,i,s,o);return null!==u&&(null===n||u.dist<n.dist)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LX(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({map:a,id:u.id,dist:u.dist},(0,N.Z)(u,IX)):n}),null)},merge:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["atoms","bonds"],r=arguments.length>3?arguments[3]:void 0,i={atoms:new Map,bonds:new Map},o=e.molecule;t.atoms.forEach((function(e){i.atoms.set(e,o.atoms.get(e).pp)})),t.bonds.forEach((function(e){var t=o.bonds.get(e);i.bonds.set(e,Y.lc2(o.atoms.get(t.begin).pp,.5,o.atoms.get(t.end).pp,.5))}));var a={};return n.forEach((function(n){a[n]=Array.from(i[n].keys()).reduce((function(o,a){var s={map:n,id:a},u=jX[n](e,i[n].get(a),s,null,r);return u&&!t[n].includes(u.id)&&o.set(a,u.id),o}),new Map)})),a}};function FX(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return VX(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VX(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function VX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var UX=function(){function e(t){(0,l.Z)(this,e),this.editor=t,this.editor.selection(null)}return(0,c.Z)(e,[{key:"mousemove",value:function(e){var t=this.editor.render.ctab.molecule,n=this.editor.findItem(e,["atoms"]);if(n){var r=t.atoms.get(n.id);"R#"!==(null===r||void 0===r?void 0:r.label)&&null===(null===r||void 0===r?void 0:r.rglabel)&&this.editor.hover(n)}else this.editor.hover(null)}},{key:"click",value:function(e){var t=this.editor,n=t.render.ctab.molecule,r=n.functionalGroups,i=t.findItem(e,["atoms"]),o=[],a=[];if(i&&r.size&&"atoms"===i.map){var s=Se.atomsInFunctionalGroup(r,i.id);null!==s&&o.push(s)}if(!(o.length>0)){if(i&&"atoms"===i.map){this.editor.hover(null);var u=n.atoms.get(i.id);if("R#"===(null===u||void 0===u?void 0:u.label)&&null!==(null===u||void 0===u?void 0:u.rglabel))return;var l=t.event.elementEdit.dispatch({attpnt:null===u||void 0===u?void 0:u.attpnt});return Promise.resolve(l).then((function(e){if((null===u||void 0===u?void 0:u.attpnt)!==e.attpnt){var n=Ya(t.render.ctab,i.id,e,null);t.update(n)}})).catch((function(){return null})),!0}return!0}var c,f=FX(o);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Se.findFunctionalGroupByAtom(r,h);null===d||a.includes(d)||a.push(d)}}catch(p){f.e(p)}finally{f.f()}this.editor.event.removeFG.dispatch({fgIds:a})}}]),e}();function ZX(e,t){var n=Y.diff(t,e);return Math.atan2(n.y,n.x)}function HX(e){var t=Math.round(e/Math.PI*180);return t>180?t-=360:t<=-180&&(t+=360),t}var GX={calcAngle:ZX,fracAngle:Is,calcNewAtomPos:function(e,t,n){var r=new Y(1,0).rotate(n?ZX(e,t):Is(e,t));return r.add_(e),r},degrees:HX,mergeBondsParams:function(e,t,n,r){var i=e.atoms.get(t.begin),o=n.atoms.get(r.begin),a=e.atoms.get(t.end),s=n.atoms.get(r.end),u=ZX(i.pp,a.pp)-ZX(o.pp,s.pp),l=Math.abs(HX(u)%180),c=Y.dist(i.pp,a.pp)/Y.dist(o.pp,s.pp);return{merged:!(0,R.inRange)(l,10,170)&&(0,R.inRange)(c,.8,1.2),angle:u,scale:c,cross:Math.abs(HX(u))>90}}};function WX(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return qX(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qX(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function qX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function KX(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var YX=new WeakMap,XX=function(){function e(t,n){var r;if((0,l.Z)(this,e),KX(this,YX,{writable:!0,value:void 0}),this.editor=t,this.atomProps=n,A(this,YX,{type:1,stereo:oe.PATTERN.STEREO.NONE}),t.selection()||null!==(r=t.selection())&&void 0!==r&&r.atoms){var i=Ya(t.render.ctab,t.selection().atoms,n,!0);t.update(i),t.selection(null),this.isNotActiveTool=!0}}return(0,c.Z)(e,[{key:"mousedown",value:function(e){var t=this.editor.render.ctab,n=t.sgroups,r=t.molecule,i=r.functionalGroups;this.editor.hover(null),this.editor.selection(null);var o,a=this.editor.findItem(e,["atoms","functionalGroups"]);if(a&&"functionalGroups"===a.map&&i&&Se.isContractedFunctionalGroup(a.id,i)){var s=new ha,u=n.get(a.id),l=me.getAtoms(r,null===u||void 0===u?void 0:u.item),c=(o=l,(0,Ul.Z)(o)||S(o)||(0,E.Z)(o)||(0,Zl.Z)()),f=c[0],h=c.slice(1),d=r.atomGetNeighbors(f),p=null===d||void 0===d?void 0:d.some((function(e){return!l.includes(e.aid)}));if(p)s.mergeWith(La(t,a.id)),s.mergeWith(us(t,{atoms:h})),s.mergeWith(Ya(t,f,this.atomProps,!0));else{var v,m=null===(v=t.atoms.get(f))||void 0===v?void 0:v.a.pp;s.mergeWith(us(t,{atoms:me.getAtoms(r,null===u||void 0===u?void 0:u.item),bonds:me.getBonds(r,null===u||void 0===u?void 0:u.item)})),s.mergeWith(Ka(t,m,this.atomProps))}this.editor.update(s)}var g=[],y=[];if(a&&i.size&&"atoms"===a.map){var b=Se.atomsInFunctionalGroup(i,a.id);null!==b&&g.push(b)}if(g.length>0){var x,_=WX(g);try{for(_.s();!(x=_.n()).done;){var w=x.value,k=Se.findFunctionalGroupByAtom(i,w);null===k||y.includes(k)||y.push(k)}}catch(O){_.e(O)}finally{_.f()}this.editor.event.removeFG.dispatch({fgIds:y})}else a?"atoms"===a.map&&(this.dragCtx={item:a}):this.dragCtx={}}},{key:"mousemove",value:function(e){var t=this.editor.render;if(this.dragCtx&&this.dragCtx.item){var n=this.dragCtx,r=this.editor.findItem(e,["atoms"]);if(r&&"atoms"===r.map&&r.id===n.item.id)this.editor.hover(this.editor.findItem(e,["atoms"]));else{var i=t.ctab.molecule.atoms.get(n.item.id),o=GX.calcAngle(null===i||void 0===i?void 0:i.pp,t.page2obj(e));e.ctrlKey||(o=GX.fracAngle(o,null));var a=GX.degrees(o);this.editor.event.message.dispatch({info:a+"\xba"});var s=GX.calcNewAtomPos(null===i||void 0===i?void 0:i.pp,t.page2obj(e),e.ctrlKey);n.action&&n.action.perform(t.ctab),n.action=Va(t.ctab,C(this,YX),n.item.id,Object.assign({},this.atomProps),s,s)[0],this.editor.update(n.action,!0)}}else this.editor.hover(this.editor.findItem(e,["atoms","functionalGroups"]))}},{key:"mouseup",value:function(e){var t=this.editor.render.ctab.molecule.functionalGroups,n=this.editor.findItem(e,["atoms","bonds"]),r=[],i=[];if(n&&t&&"atoms"===n.map){var o=Se.atomsInFunctionalGroup(t,n.id);null!==o&&r.push(o)}if(r.length>0){var a,s=WX(r);try{for(s.s();!(a=s.n()).done;){var u=a.value,l=Se.findFunctionalGroupByAtom(t,u);null===l||i.includes(l)||i.push(l)}}catch(h){s.e(h)}finally{s.f()}this.editor.event.removeFG.dispatch({fgIds:i})}else{if(this.dragCtx){var c=this.dragCtx,f=this.editor.render;this.editor.update(c.action||(c.item?Ya(f.ctab,c.item.id,this.atomProps,!0):Ka(f.ctab,f.page2obj(e),this.atomProps))),delete this.dragCtx}this.editor.event.message.dispatch({info:!1})}}}]),e}();function $X(e,t){var n,r=e.dragCtx,i=e.editor,o=null===(n=r.item)||void 0===n?void 0:n.id,a=t.ctab.molecule.functionalGroups,s=void 0!==o&&null!==o?t.ctab.molecule.atoms.get(o):new re({label:""}),u=Se.findFunctionalGroupByAtom(a,o);r.timeout=setTimeout((function(){if(delete e.dragCtx,null==u){i.selection(null);var n=i.event.quickEdit.dispatch(s);Promise.resolve(n).then((function(e){var n=o?Ya(t.ctab,o,e,null):Ka(t.ctab,r.xy0,e);i.update(n)})).catch((function(){return null}))}else i.event.removeFG.dispatch({fgIds:[u]})}),750),r.stopTapping=function(){r.timeout&&(clearTimeout(r.timeout),delete r.timeout)}}function JX(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return QX(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QX(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function QX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var e$=function(){function e(t,n){(0,l.Z)(this,e),this.attach={atomid:n.atomid||0,bondid:n.bondid||0},this.editor=t,this.editor.selection({atoms:[this.attach.atomid],bonds:[this.attach.bondid]})}return(0,c.Z)(e,[{key:"mousemove",value:function(e){var t,n=this.editor.render,r=this.editor.findItem(e,["atoms","bonds"]),i=n.ctab.molecule;return r&&("atoms"===r.map&&H(null===(t=i.atoms.get(r.id))||void 0===t?void 0:t.label)||"bonds"===r.map)?this.editor.hover(r):this.editor.hover(null),!0}},{key:"click",value:function(e){var t,n=this.editor,r=n.render.ctab.molecule,i=r.functionalGroups,o=n.findItem(e,["atoms","bonds"]),a=[],s=[],u=[];if(o&&i.size&&"atoms"===o.map){var l=Se.atomsInFunctionalGroup(i,o.id);null!==l&&a.push(l)}if(o&&i.size&&"bonds"===o.map){var c=Se.bondsInFunctionalGroup(r,i,o.id);null!==c&&s.push(c)}if(a.length>0){var f,h=JX(a);try{for(h.s();!(f=h.n()).done;){var d=f.value,p=Se.findFunctionalGroupByAtom(i,d);null===p||u.includes(p)||u.push(p)}}catch(b){h.e(b)}finally{h.f()}this.editor.event.removeFG.dispatch({fgIds:u})}else{if(!(s.length>0))return o&&("atoms"===o.map&&H(null===(t=r.atoms.get(o.id))||void 0===t?void 0:t.label)||"bonds"===o.map)&&("atoms"===o.map?this.attach.atomid=o.id:this.attach.bondid=o.id,this.editor.selection({atoms:[this.attach.atomid],bonds:[this.attach.bondid]}),this.editor.event.attachEdit.dispatch(this.attach)),!0;var v,m=JX(s);try{for(m.s();!(v=m.n()).done;){var g=v.value,y=Se.findFunctionalGroupByBond(r,i,g);null===y||u.includes(y)||u.push(y)}}catch(b){m.e(b)}finally{m.f()}this.editor.event.removeFG.dispatch({fgIds:u})}}}]),e}();function t$(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return n$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n$(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function n$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var r$=function(){function e(t,n){var r;if((0,l.Z)(this,e),this.editor=t,this.atomProps={label:"C"},this.bondProps=n,t.selection()&&null!==(r=t.selection())&&void 0!==r&&r.bonds){var i=Ua(t.render.ctab,t.selection().bonds,n);t.update(i),t.selection(null),this.isNotActiveTool=!0}}return(0,c.Z)(e,[{key:"mousedown",value:function(e){if(!this.dragCtx){var t=this.editor.render.ctab.molecule,n=t.functionalGroups,r=this.editor.findItem(e,["atoms","bonds"]),i=[],o=[],a=[];if(r&&n.size&&"atoms"===r.map){var s=Se.atomsInFunctionalGroup(n,r.id);null!==s&&i.push(s)}if(r&&n.size&&"bonds"===r.map){var u=Se.bondsInFunctionalGroup(t,n,r.id);null!==u&&o.push(u)}if(i.length>0){var l,c=t$(i);try{for(c.s();!(l=c.n()).done;){var f=l.value,h=Se.findFunctionalGroupByAtom(n,f);null===h||a.includes(h)||a.push(h)}}catch(y){c.e(y)}finally{c.f()}this.editor.event.removeFG.dispatch({fgIds:a})}else{if(!(o.length>0)){var d=this.editor.render;return this.editor.hover(null),this.editor.selection(null),this.dragCtx={xy0:d.page2obj(e),item:this.editor.findItem(e,["atoms","bonds"])},this.dragCtx.item||delete this.dragCtx.item,!0}var p,v=t$(o);try{for(v.s();!(p=v.n()).done;){var m=p.value,g=Se.findFunctionalGroupByBond(t,n,m);null===g||a.includes(g)||a.push(g)}}catch(y){v.e(y)}finally{v.f()}this.editor.event.removeFG.dispatch({fgIds:a})}}}},{key:"mousemove",value:function(e){var t=this.editor.render.ctab,n=t.sgroups,r=t.molecule,i=r.functionalGroups,o=this.editor,a=o.render;if("dragCtx"in this){var s=this.dragCtx,u=a.page2obj(e),l=GX.calcAngle(s.xy0,u);e.ctrlKey||(l=GX.fracAngle(l,null));var c=GX.degrees(l);if(this.editor.event.message.dispatch({info:c+"\xba"}),!("item"in s)||"atoms"===s.item.map){var f,h,d,p;"action"in s&&s.action.perform(a.ctab);var v=[];if("item"in s&&"atoms"===s.item.map){f=s.item.id,h=o.findItem(e,["atoms"],s.item);var m=o.findItem(e,["functionalGroups"]);if(m&&Se.isContractedFunctionalGroup(m.id,i)){var g=n.get(m.id);h={id:me.getAtoms(r,null===g||void 0===g?void 0:g.item)[0],map:"atoms"}}var y=h&&Se.findFunctionalGroupByAtom(i,h.id),b="number"===typeof y&&n.get(y),x=b&&me.getAtoms(r,b.item);if(h&&b&&h.id!==(null===x||void 0===x?void 0:x[0])&&(this.editor.event.removeFG.dispatch({fgIds:[y]}),h=null),h&&b&&h.id===(null===x||void 0===x?void 0:x[0])){var _=r.atomGetNeighbors(h.id);null===_||void 0===_||_.forEach((function(e){(null===x||void 0===x||!x.includes(e.aid))&&!v.includes(e.aid)&&v.push(e.aid)}))}v.length>=1&&(h=null)}else{f=this.atomProps,d=s.xy0;var w=[],S=[];if((h=o.findItem(e,["atoms"]))&&"atoms"===h.map&&i.size&&this.dragCtx){var E=Se.atomsInFunctionalGroup(i,h.id);null!==E&&w.push(E)}if(w.length>0){var k,O=t$(w);try{for(O.s();!(k=O.n()).done;){var A=k.value,C=Se.findFunctionalGroupByAtom(i,A);null!==C&&!S.includes(C)&&S.push(C)}}catch(R){O.e(R)}finally{O.f()}}if(S.length>0)return this.editor.event.removeFG.dispatch({fgIds:S}),void delete this.dragCtx}var M=Number.MAX_VALUE;if(h&&"atoms"===h.map)h=h.id;else{h=this.atomProps;var T=a.page2obj(e);if(M=Y.dist(s.xy0,T),d)p=GX.calcNewAtomPos(d,T,e.ctrlKey);else{var P=a.ctab.molecule.atoms.get(f);d=GX.calcNewAtomPos(null===P||void 0===P?void 0:P.pp.get_xy0(),T,e.ctrlKey)}}return M>.3?s.action=Va(a.ctab,this.bondProps,f,h,d,p)[0]:delete s.action,this.editor.update(s.action,!0),!0}}return this.editor.hover(this.editor.findItem(e,["atoms","bonds"])),!0}},{key:"mouseup",value:function(e){if("dragCtx"in this){var t=this.dragCtx,n=this.editor.render,r=n.ctab.molecule;if("action"in t)this.editor.update(t.action);else if("item"in t){if("atoms"===t.item.map)this.editor.update(Va(n.ctab,this.bondProps,t.item.id,void 0)[0]);else if("bonds"===t.item.map){var i=Object.assign({},this.bondProps),o=r.bonds.get(t.item.id);this.editor.update(Wa(n.ctab,t.item.id,o,i))}}else{var a=n.page2obj(e),s=new Y(.5,0).rotate(this.bondProps.type===oe.PATTERN.TYPE.SINGLE?-Math.PI/6:0),u=Va(n.ctab,this.bondProps,{label:"C"},{label:"C"},Y.diff(a,s),Y.sum(a,s));this.editor.update(u[0])}delete this.dragCtx}return this.editor.event.message.dispatch({info:!1}),!0}}]),e}();function i$(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return o$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o$(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function o$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a$=function(){function e(t){(0,l.Z)(this,e),this.editor=t,this.editor.selection(null)}return(0,c.Z)(e,[{key:"mousedown",value:function(e){if(!this.dragCtx){var t=this.editor.render.ctab.molecule,n=t.functionalGroups,r=this.editor.render,i=this.editor.findItem(e,["atoms","bonds"]),o=[],a=[],s=[];if(i&&n.size&&"atoms"===i.map){var u=Se.atomsInFunctionalGroup(n,i.id);null!==u&&o.push(u)}if(i&&n.size&&"bonds"===i.map){var l=Se.bondsInFunctionalGroup(t,n,i.id);null!==l&&a.push(l)}if(o.length>0){var c,f=i$(o);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Se.findFunctionalGroupByAtom(n,h);null===d||s.includes(d)||s.push(d)}}catch(y){f.e(y)}finally{f.f()}this.editor.event.removeFG.dispatch({fgIds:s})}else{if(!(a.length>0))return this.editor.hover(null),this.dragCtx={xy0:r.page2obj(e),item:i},i&&"atoms"===i.map&&(this.editor.selection({atoms:[i.id]}),$X(this,r)),this.dragCtx.item||delete this.dragCtx.item,!0;var p,v=i$(a);try{for(v.s();!(p=v.n()).done;){var m=p.value,g=Se.findFunctionalGroupByBond(t,n,m);null===g||s.includes(g)||s.push(g)}}catch(y){v.e(y)}finally{v.f()}this.editor.event.removeFG.dispatch({fgIds:s})}}}},{key:"mousemove",value:function(e){var t=this.editor,n=t.render.ctab,r=this.dragCtx;if(t.hover(this.editor.findItem(e,["atoms","bonds"])),!r)return!0;if(r&&r.stopTapping&&r.stopTapping(),t.selection(null),!r.item||"atoms"===r.item.map){var i;r.action&&r.action.perform(n);var o=n.molecule.atoms,a=r.item?null===(i=o.get(r.item.id))||void 0===i?void 0:i.pp:r.xy0,s=t.render.page2obj(e),u=Math.ceil(Y.diff(s,a).length()),l=function(e,t,n,r,i){var o=Math.cos(Math.PI/6),a=Math.sin(Math.PI/6),s=new ha,u=null!==i?_a(e,i,"fragment"):s.addOp((new fo).perform(e)).frid,l={atoms:[],bonds:[]},c=null!==i?i:s.addOp(new Gi({label:"C",fragment:u},t).perform(e)).data.aid;l.atoms.push(c),s.operations.reverse();for(var f=0;f<r;f++){var h=Va(e,{},c,{},new Y(o*(f+1),1&f?0:a).rotate(n).add(t));s=h[0].mergeWith(s),c=h[2],l.bonds.push(h[3]),l.atoms.push(c)}return[s,l]}(n,a,e.ctrlKey?GX.calcAngle(a,s):GX.fracAngle(a,s),u,r.item?r.item.id:null),c=(0,M.Z)(l,2),f=c[0],h=c[1];return t.event.message.dispatch({info:u+" sectors"}),r.action=f,t.update(r.action,!0),r.mergeItems=ns(t,h),t.hover(rs(r.mergeItems)),!0}return!0}},{key:"mouseup",value:function(){var e,t=this.editor.render.ctab,n=t.molecule,r=n.functionalGroups,i=[],o=[];if(this.dragCtx&&this.dragCtx.mergeItems&&r.size&&(e=this.dragCtx.mergeItems.atoms.values().next().value),e){var a=Se.atomsInFunctionalGroup(r,e);null!==a&&i.push(a)}if(!(i.length>0)){var s=this.dragCtx;if(!s)return!0;delete this.dragCtx;var u=this.editor;if(s.stopTapping&&s.stopTapping(),!s.action&&s.item&&"bonds"===s.item.map){var l=n.bonds.get(s.item.id);s.action=Wa(t,s.item.id,l,{type:oe.PATTERN.TYPE.SINGLE,stereo:oe.PATTERN.STEREO.NONE})}else s.action=s.action?ts(t,s.mergeItems).mergeWith(s.action):ts(t,s.mergeItems);return u.selection(null),u.hover(null),s.action&&u.update(s.action),u.event.message.dispatch({info:!1}),!0}var c,f=i$(i);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Se.findFunctionalGroupByAtom(r,h);null===d||o.includes(d)||o.push(d)}}catch(p){f.e(p)}finally{f.f()}this.editor.event.removeFG.dispatch({fgIds:o})}},{key:"cancel",value:function(){this.mouseup()}},{key:"mouseleave",value:function(){this.mouseup()}}]),e}();function s$(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return u$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u$(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function u$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l$=function(){function e(t,n){(0,l.Z)(this,e),this.editor=t,this.editor.selection(null),this.charge=n}return(0,c.Z)(e,[{key:"mousemove",value:function(e){var t,n=this.editor.render.ctab.molecule,r=this.editor.findItem(e,["atoms"]);return r&&"atoms"===r.map&&H(null===(t=n.atoms.get(r.id))||void 0===t?void 0:t.label)?this.editor.hover(r):this.editor.hover(null),!0}},{key:"click",value:function(e){var t,n=this.editor,r=this.editor.render.ctab.molecule,i=r.functionalGroups,o=n.render,a=n.findItem(e,["atoms","bonds"]),s=[],u=[];if(a&&i.size&&"atoms"===a.map){var l=Se.atomsInFunctionalGroup(i,a.id);null!==l&&s.push(l)}if(!(s.length>0)){var c;if(a&&"atoms"===a.map&&H(null===(t=r.atoms.get(a.id))||void 0===t?void 0:t.label))this.editor.hover(null),this.editor.update(Ya(o.ctab,a.id,{charge:(null===(c=r.atoms.get(a.id))||void 0===c?void 0:c.charge)+this.charge},null));return!0}var f,h=s$(s);try{for(h.s();!(f=h.n()).done;){var d=f.value,p=Se.findFunctionalGroupByAtom(i,d);null===p||u.includes(p)||u.push(p)}}catch(v){h.e(v)}finally{h.f()}this.editor.event.removeFG.dispatch({fgIds:u})}}]),e}(),c$=function(){function e(t){(0,l.Z)(this,e);var n=t.selection();this.editor=t,this.isNotActiveTool=!0,this.stereoAtoms=ka(t.struct(),n?n.atoms||[]:Array.from(t.struct().atoms.keys())),0!==this.stereoAtoms.length&&this.changeAtomsStereoAction().then((function(e){return e&&t.update(e)}))}return(0,c.Z)(e,[{key:"changeAtomsStereoAction",value:function(){var e=this,t=this.editor.struct(),n=this.editor.render.ctab,r=this.stereoAtoms.map((function(e){var n=t.atoms.get(e);return n&&n.stereoLabel})),i=r.some((function(e){return e!==r[0]}));return this.editor.event.enhancedStereoEdit.dispatch({stereoLabel:i?null:r[0]}).then((function(r){if(!r)return null;var i=e.stereoAtoms.reduce((function(e,r){var i;return e.mergeWith(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=new ha;if(!n){var i=e.molecule;e.molecule.frags.get(t).stereoAtoms.forEach((function(e){null===i.atoms.get(e).stereoLabel&&r.addOp(new mo(t,e))}))}return r.addOp(new yo(t)),r.perform(e)}(n,null===(i=t.atoms.get(r))||void 0===i?void 0:i.fragment))}),Ya(n,e.stereoAtoms,{stereoLabel:r},!1));return i.operations.reverse(),i}))}}]),e}();function f$(e,t){for(var n=new Y(0,1),r=n.rotate(Math.PI/2),i=Y.diff(e[e.length-1],t),o=Y.dot(r,i),a=Y.dot(n,i),s=new Y(0,0),u=0,l=1e-5,c=!1,f=!1,h=0;h<e.length;++h){var d=Y.diff(e[h],t),p=Y.diff(d,i),v=Y.dot(r,d),m=Y.dot(n,d);c=!1,v*o<0&&(m*a>-l?a>-l&&(c=!0):(Math.abs(o)*Math.abs(m)-Math.abs(v)*Math.abs(a))*m>0&&(c=!0)),c&&f&&Y.dot(p,r)*Y.dot(s,r)>=0&&(c=!1),c&&u++,i=d,o=v,a=m,s=p,f=c}return u%2!==0}var h$={inRectangle:function(e,t,n){var r=[],i=[],o=e.sgroups,a=e.molecule.functionalGroups,s=Math.min(t.x,n.x),u=Math.max(t.x,n.x),l=Math.min(t.y,n.y),c=Math.max(t.y,n.y);e.bonds.forEach((function(t,n){var i=Y.lc2(e.atoms.get(t.b.begin).a.pp,.5,e.atoms.get(t.b.end).a.pp,.5);i.x>s&&i.x<u&&i.y>l&&i.y<c&&!Se.isBondInContractedFunctionalGroup(t.b,o,a,!0)&&r.push(n)})),e.atoms.forEach((function(t,n){var r=Se.findFunctionalGroupByAtom(a,n),f=e.sgroups.get(r);t.a.pp.x>s&&t.a.pp.x<u&&t.a.pp.y>l&&t.a.pp.y<c&&(!Se.isAtomInContractedFunctionalGroup(t.a,o,a,!0)||n===f.item.atoms[0])&&i.push(n)}));var f=[],h=[],d=[];e.rxnArrows.forEach((function(e,t){e.item.center().x>s&&e.item.center().x<u&&e.item.center().y>l&&e.item.center().y<c&&f.push(t)})),e.rxnPluses.forEach((function(e,t){e.item.pp.x>s&&e.item.pp.x<u&&e.item.pp.y>l&&e.item.pp.y<c&&h.push(t)})),e.simpleObjects.forEach((function(e,t){e.getReferencePoints(!0).find((function(e){return e.x>s&&e.x<u&&e.y>l&&e.y<c}))&&d.push(t)}));var p=[];e.enhancedFlags.forEach((function(e,t){e.pp&&e.pp.x>s&&e.pp.x<u&&e.pp.y>l&&e.pp.y<c&&p.push(t)}));var v=[];e.sgroupData.forEach((function(e,t){e.sgroup.pp.x>s&&e.sgroup.pp.x<u&&e.sgroup.pp.y>l&&e.sgroup.pp.y<c&&v.push(t)}));var m=[];return e.texts.forEach((function(e,t){e.getReferencePoints().find((function(e){return e.x>s&&e.x<u&&e.y>l&&e.y<c}))&&m.push(t)})),{atoms:i,bonds:r,rxnArrows:f,rxnPluses:h,enhancedFlags:p,sgroupData:v,simpleObjects:d,texts:m}},inPolygon:function(e,t){for(var n=[],r=[],i=[],o=e.sgroups,a=e.molecule.functionalGroups,s=0;s<t.length;++s)i[s]=new Y(t[s].x,t[s].y);e.bonds.forEach((function(t,r){var s=Y.lc2(e.atoms.get(t.b.begin).a.pp,.5,e.atoms.get(t.b.end).a.pp,.5);f$(i,s)&&!Se.isBondInContractedFunctionalGroup(t.b,o,a,!0)&&n.push(r)})),e.atoms.forEach((function(t,n){var s=Se.findFunctionalGroupByAtom(a,n),u=e.sgroups.get(s);!f$(i,t.a.pp)||Se.isAtomInContractedFunctionalGroup(t.a,o,a,!0)&&n!==u.item.atoms[0]||r.push(n)}));var u=[],l=[],c=[],f=[];e.rxnArrows.forEach((function(e,t){e.getReferencePoints(!0).find((function(e){return f$(i,e)}))&&u.push(t)})),e.rxnPluses.forEach((function(e,t){f$(i,e.item.pp)&&l.push(t)})),e.simpleObjects.forEach((function(e,t){e.getReferencePoints(!0).find((function(e){return f$(i,e)}))&&c.push(t)})),e.texts.forEach((function(e,t){e.getReferencePoints().find((function(e){return f$(i,e)}))&&f.push(t)}));var h=[];e.enhancedFlags.forEach((function(e,t){e.pp&&f$(i,e.pp)&&h.push(t)}));var d=[];return e.sgroupData.forEach((function(e,t){f$(i,e.sgroup.pp)&&d.push(t)})),{atoms:r,bonds:n,rxnArrows:u,rxnPluses:l,enhancedFlags:h,sgroupData:d,simpleObjects:c,texts:f}}},d$=function(){function e(t,n,r){(0,l.Z)(this,e),this.mode=t,this.fragment=r,this.editor=n}return(0,c.Z)(e,[{key:"getSelection",value:function(){var e=this.editor.render;if(0===this.mode)return h$.inPolygon(e.ctab,this.points);if(1===this.mode)return h$.inRectangle(e.ctab,this.points[0],this.points[1]);throw new Error("Selector mode unknown")}},{key:"begin",value:function(e){var t=this.editor.render;this.points=[t.page2obj(e)],1===this.mode&&this.points.push(this.points[0])}},{key:"running",value:function(){return!!this.points}},{key:"addPoint",value:function(e){if(!this.points)return null;var t=this.editor.render;return 0===this.mode?this.points.push(t.page2obj(e)):1===this.mode&&(this.points=[this.points[0],t.page2obj(e)]),this.update(),this.getSelection()}},{key:"update",value:function(){if(this.selection&&(this.selection.remove(),this.selection=null),this.points&&this.points.length>1){var e=this.editor.render,t=this.points.map((function(t){return fe.obj2scaled(t,e.options).add(e.options.offset)}));this.selection=0===this.mode?e.selectionPolygon(t):e.selectionRectangle(t[0],t[1])}}},{key:"end",value:function(){var e=this.getSelection();return this.points=null,this.update(),e}},{key:"cancel",value:function(){this.points=null,this.update()}}]),e}();function p$(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return v$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v$(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function v$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m$=["atoms","bonds","sgroups","functionalGroups","sgroupData"],g$=function(){function e(t,n){(0,l.Z)(this,e),this.editor=t,this.type=n,this.lassoHelper=new d$(1,t,null),this.checkSelection()}return(0,c.Z)(e,[{key:"checkSelection",value:function(){var e=this.editor.selection()||{};if(e.atoms&&e.bonds){var t,n,r,i=null===(t=this.editor.selection())||void 0===t?void 0:t.atoms,o=this.editor.render.ctab,a=o.molecule,s=a.sgroups,u={atoms:[],bonds:[]},l=[],c=a.functionalGroups,f=[],h=s.find((function(e,t){return(0,F.isEqual)(t.atoms,i)}));if(i&&c.size){var d,p=p$(i);try{for(p.s();!(d=p.n()).done;){var v,m=d.value,g=Se.atomsInFunctionalGroup(c,m);null==g&&(r=!0);var y=null!==g&&(null===(v=o.atoms.get(g))||void 0===v?void 0:v.a);if(y){var b,x=p$(y.sgs.values());try{for(x.s();!(b=x.n()).done;){n=b.value}}catch(T){x.e(T)}finally{x.f()}}if(y&&Se.isAtomInContractedFunctionalGroup(y,s,c,!1)){var _,w,S=void 0!==n&&me.getAtoms(a,s.get(n)),E=void 0!==n&&me.getBonds(a,s.get(n));m===S[0]&&(_=u.atoms).push.apply(_,k(S))&&(w=u.bonds).push.apply(w,k(E))}y&&l.push(g)}}catch(T){p.e(T)}finally{p.f()}}if(r&&(l=[]),l&&l.length>0){var O,A=p$(l);try{for(A.s();!(O=A.n()).done;){var C=O.value,M=Se.findFunctionalGroupByAtom(c,C);null===M||f.includes(M)||f.push(M)}}catch(T){A.e(T)}finally{A.f()}}if(f.length)return this.editor.selection(null),void this.editor.event.removeFG.dispatch({fgIds:f});y$(this.editor,void 0!==h?h:null,this.type),this.isNotActiveTool=!0}}},{key:"mousedown",value:function(e){var t=this.editor.findItem(e,m$),n=this.editor.render.ctab,r=n.sgroups,i=n.molecule,o=i.functionalGroups,a=[],s=[],u=[];if(t&&o.size&&"atoms"===t.map){var l,c=Se.atomsInFunctionalGroup(o,t.id),f=null!==c&&(null===(l=n.atoms.get(c))||void 0===l?void 0:l.a);f&&!Se.isAtomInContractedFunctionalGroup(f,r,o,!0)&&a.push(c)}if(t&&o.size&&"bonds"===t.map){var h,d=Se.bondsInFunctionalGroup(i,o,t.id),p=null!==d&&(null===(h=n.bonds.get(d))||void 0===h?void 0:h.b);p&&!Se.isBondInContractedFunctionalGroup(p,r,o,!0)&&s.push(d)}if(t&&o.size&&"functionalGroups"===t.map){var v=r.get(t.id);if(Se.isFunctionalGroup(null===v||void 0===v?void 0:v.item))return void this.editor.event.removeFG.dispatch({fgIds:[t.id]})}if(a.length>0){var m,g=p$(a);try{for(g.s();!(m=g.n()).done;){var y=m.value,b=Se.findFunctionalGroupByAtom(o,y);null===b||u.includes(b)||u.push(b)}}catch(E){g.e(E)}finally{g.f()}this.editor.event.removeFG.dispatch({fgIds:u})}else if(s.length>0){var x,_=p$(s);try{for(_.s();!(x=_.n()).done;){var w=x.value,S=Se.findFunctionalGroupByBond(i,o,w);null===S||u.includes(S)||u.push(S)}}catch(E){_.e(E)}finally{_.f()}this.editor.event.removeFG.dispatch({fgIds:u})}else t||this.lassoHelper.begin(e)}},{key:"mousemove",value:function(e){this.lassoHelper.running(e)?this.editor.selection(this.lassoHelper.addPoint(e)):this.editor.hover(this.editor.findItem(e,m$))}},{key:"mouseleave",value:function(e){this.lassoHelper.running(e)&&this.lassoHelper.end(e)}},{key:"mouseup",value:function(e){var t,n,r,i=this.editor.render.ctab,o=i.sgroups,a=i.molecule,s=a.functionalGroups,u=this.editor.findItem(e,m$),l=this.editor.selection(),c={atoms:[],bonds:[]},f=[],h=[],d=[];if(!(u&&"functionalGroups"===u.map&&s.size&&Se.isContractedFunctionalGroup(u.id,s))){if(l&&s.size&&l.atoms){var p,v=p$(l.atoms);try{for(v.s();!(p=v.n()).done;){var m,g=p.value,y=Se.atomsInFunctionalGroup(s,g);null==y&&(n=!0);var b=null!==y&&(null===(m=i.atoms.get(y))||void 0===m?void 0:m.a);if(b){var x,_=p$(b.sgs.values());try{for(_.s();!(x=_.n()).done;){t=x.value}}catch(G){_.e(G)}finally{_.f()}}if(b&&Se.isAtomInContractedFunctionalGroup(b,o,s,!0)){var w,S,E,O,A=void 0!==t&&me.getAtoms(a,null===(w=i.sgroups.get(t))||void 0===w?void 0:w.item),C=void 0!==t&&me.getBonds(a,null===(S=i.sgroups.get(t))||void 0===S?void 0:S.item);g===A[0]&&(E=c.atoms).push.apply(E,k(A))&&(O=c.bonds).push.apply(O,k(C))}b&&f.push(y)}}catch(G){v.e(G)}finally{v.f()}}if(l&&s.size&&l.bonds){var M,T=p$(l.bonds);try{for(T.s();!(M=T.n()).done;){var P,R=M.value,I=Se.bondsInFunctionalGroup(a,s,R);null===I&&(r=!0),null!==I&&(null===(P=i.bonds.get(I))||void 0===P?void 0:P.b)&&h.push(I)}}catch(G){T.e(G)}finally{T.f()}}if(f.length&&f.forEach((function(e){var t,n,r=Se.findFunctionalGroupByAtom(s,e),o=me.getAtoms(a,null===(t=i.sgroups.get(r))||void 0===t?void 0:t.item);(n=c.atoms).push.apply(n,k(o))})),h.length&&h.forEach((function(e){var t,n,r=Se.findFunctionalGroupByBond(a,s,e),o=me.getBonds(a,null===(t=i.sgroups.get(r))||void 0===t?void 0:t.item);(n=c.bonds).push.apply(n,k(o))})),(n||r)&&(f=null,h=null),f&&f.length>0){var L,N=p$(f);try{for(N.s();!(L=N.n()).done;){var j=L.value,D=Se.findFunctionalGroupByAtom(s,j);null===D||d.includes(D)||d.push(D)}}catch(G){N.e(G)}finally{N.f()}}if(h&&h.length>0){var B,z=p$(h);try{for(z.s();!(B=z.n()).done;){var F=B.value,V=Se.findFunctionalGroupByBond(a,s,F);null===V||d.includes(V)||d.push(V)}}catch(G){z.e(G)}finally{z.f()}}if(1===d.length)return this.editor.selection(null),this.lassoHelper.cancel(),void this.editor.event.removeFG.dispatch({fgIds:d});var U=null,Z=null;if(this.lassoHelper.running(e))Z=c.atoms.length>0?I$(this.lassoHelper.end(e),c,!1):this.lassoHelper.end(e),this.editor.selection(Z);else{if(!u)return;if(this.editor.hover(null),"atoms"===u.map)Z={atoms:[u.id]};else if("bonds"===u.map){var H=this.editor.render.ctab.bonds.get(u.id);Z={atoms:[null===H||void 0===H?void 0:H.b.begin,null===H||void 0===H?void 0:H.b.end]}}else{if("sgroups"!==u.map&&"sgroupData"!==u.map)return;U=u.id}}(null!==U||Z&&Z.atoms)&&y$(this.editor,U,this.type)}}},{key:"cancel",value:function(){this.lassoHelper.running()&&this.lassoHelper.end(),this.editor.selection(null)}}]),e}();function y$(e,t,n){var r=e.render.ctab,i=r.molecule,o=e.selection()||{},a=null!==t?i.sgroups.get(t):null,s=a?a.type:n,u="DAT"===s?"sdataEdit":"sgroupEdit";if(o.atoms||o.bonds||a){var l;a?(l=a.getAttrs()).context||(l.context=function(e,t){var n=e.molecule;if(1===t.length)return Rs.Atom;if(w$(e,t))return Rs.Multifragment;if(_$(e,t))return Rs.Fragment;var r=new ee(t),i=Array.from(n.bonds.values()).filter((function(e){return r.has(e.begin)&&r.has(e.end)}));return x$(i)?Rs.Group:Rs.Bond}(r,a.atoms)):l={context:b$(r,o)};var c=e.event[u].dispatch({type:s,attrs:l});Promise.resolve(c).then((function(n){if("DAT"!==n.type&&function(e,t){var n=t.reduce((function(t,n){var r=e.atoms.get(n);return t.union(r.sgs)}),new ee);return Array.from(n).some((function(n){var r=e.sgroups.get(n);if("DAT"===r.type)return!1;var i=me.getAtoms(e,r);return i.length<t.length?i.findIndex((function(e){return-1===t.indexOf(e)}))>=0:t.findIndex((function(e){return-1===i.indexOf(e)}))>=0}))}(i,o.atoms||[]))e.event.message.dispatch({error:"Partial S-group overlapping is not allowed."});else{if(!a&&"DAT"!==n.type&&(!o.atoms||0===o.atoms.length))return;if(a&&a.getAttrs().context===n.attrs.context){var s=Ra(r,n.type,a.atoms,n.attrs).mergeWith(La(r,t));return e.update(s),void e.selection(o)}var u=function(e,t,n,r){var i=t.render.ctab,o=i.molecule.sgroups.get(e),a=o&&o.atoms||r.atoms||[],s=ja(n.attrs.context,i,n,a,r);s.selection=s.selection||r,null!==e&&void 0!==e&&(s.action=s.action.mergeWith(La(i,e)));return t.selection(s.selection),s}(t,e,n,o);e.update(u.action),e.selection(null)}})).catch((function(){return null}))}}function b$(e,t){var n=e.molecule;if(t.atoms&&!t.bonds)return Rs.Atom;var r=t.bonds.map((function(e){return n.bonds.get(e)}));if(!x$(r))return Rs.Bond;t.atoms=t.atoms||[];var i=new ee(t.atoms),o=r.every((function(e){return i.has(e.begin)&&i.has(e.end)}));return _$(e,t.atoms)&&o?Rs.Fragment:w$(e,t.atoms)?Rs.Multifragment:Rs.Group}function x$(e){if(0===e.length)return!0;for(var t=0;t<e.length;++t)for(var n=e[t],r=0;r<e.length;++r)if(t!==r){var i=e[r];if(n.end===i.begin||n.end===i.end)return!0}return!1}function _$(e,t){return 1===S$(e,t)}function w$(e,t){return S$(e,t)>1}function S$(e,t){var n=new ee(t);return Array.from(e.connectedComponents.values()).reduce((function(e,t){return e+(n.isSuperset(t)?1:0)}),0)}function E$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E$(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O$(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return A$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A$(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function A$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C$(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var M$=new WeakMap,T$=new WeakMap,P$=function(){function e(t,n){(0,l.Z)(this,e),C$(this,M$,{writable:!0,value:void 0}),C$(this,T$,{writable:!0,value:void 0}),this.editor=t,A(this,M$,n),A(this,T$,new d$("lasso"===C(this,M$)?0:1,t,"fragment"===C(this,M$)))}return(0,c.Z)(e,[{key:"mousedown",value:function(e){var t,n=this.editor.render,r=n.ctab,i=r.molecule,o=i.functionalGroups,a=[],s={atoms:[],bonds:[]};this.editor.hover(null);var u=C(this,T$).fragment||e.ctrlKey,l=this.editor.findItem(e,u?["frags","sgroups","functionalGroups","sgroupData","rgroups","rxnArrows","rxnPluses","enhancedFlags","simpleObjects","texts"]:["atoms","bonds","sgroups","functionalGroups","sgroupData","rgroups","rxnArrows","rxnPluses","enhancedFlags","simpleObjects","texts"],null);if(l&&"atoms"===l.map&&o.size){var c,f=null!==Se.atomsInFunctionalGroup(o,l.id)&&(null===(c=r.atoms.get(l.id))||void 0===c?void 0:c.a);if(f){var h,d=O$(f.sgs.values());try{for(d.s();!(h=d.n()).done;){t=h.value}}catch(R){d.e(R)}finally{d.f()}}f&&void 0!==t&&!a.includes(t)&&a.push(t)}if(l&&"bonds"===l.map&&o.size){var p=Se.bondsInFunctionalGroup(i,o,l.id),v=Se.findFunctionalGroupByBond(i,o,p);null===v||a.includes(v)||a.push(v)}if(a.length){var m,g=O$(a);try{for(g.s();!(m=g.n()).done;){var y=m.value,b=r.sgroups.get(y);if(b){var x,_,w=me.getAtoms(i,b.item),S=me.getBonds(i,b.item);(x=s.atoms).push.apply(x,k(w))&&(_=s.bonds).push.apply(_,k(S))}}}catch(R){g.e(R)}finally{g.f()}this.editor.selection(s)}if(this.dragCtx={item:l,xy0:n.page2obj(e)},l&&"atoms"!==l.map||$X(this,n),!l)return e.shiftKey||this.editor.selection(null),delete this.dragCtx.item,C(this,T$).fragment||C(this,T$).begin(e),!0;var E=R$(l),O=r.sgroups.get(l.id),A=this.editor.selection();if("frags"===l.map){var M=r.frags.get(l.id);E={atoms:M.fragGetAtoms(r,l.id),bonds:M.fragGetBonds(r,l.id)}}else if("sgroups"!==l.map&&"functionalGroups"!==l.map||!O){if("rgroups"===l.map){var T=r.rgroups.get(l.id);E={atoms:T.getAtoms(n),bonds:T.getBonds(n)}}else if("sgroupData"===l.map&&L$(A,l))return!0}else{var P=O.item;E={atoms:me.getAtoms(i,P),bonds:me.getBonds(i,P)}}return e.shiftKey?this.editor.selection(I$(E,A,!0)):this.editor.selection(L$(A,l)?A:E),!0}},{key:"mousemove",value:function(e){var t=this.editor,n=t.render,r=t.render.ctab,i=this.dragCtx;if(i&&i.stopTapping&&i.stopTapping(),i&&i.item){var o,a,s=r.molecule.atoms,u=t.selection();if("atoms"===i.item.map&&1===(null===s||void 0===s||null===(o=s.get(i.item.id))||void 0===o?void 0:o.neighbors.length)&&1===(null===u||void 0===u||null===(a=u.atoms)||void 0===a?void 0:a.length)&&!u.bonds){var l=n.page2obj(e),c=GX.calcAngle(i.xy0,l),f=GX.degrees(c);this.editor.event.message.dispatch({info:f+"\xba"})}if("simpleObjects"===i.item.map&&i.item.ref){null!==i&&void 0!==i&&i.action&&i.action.perform(n.ctab);var h=n.page2obj(e),d=h.sub(this.dragCtx.xy0);return i.action=xs(n.ctab,i.item.id,d,h,i.item.ref,e.shiftKey),t.update(i.action,!0),!0}if("rxnArrows"===i.item.map&&i.item.ref){null!==i&&void 0!==i&&i.action&&i.action.perform(n.ctab);var p=n.page2obj(e),v=p.sub(i.xy0);return i.previous=p,i.action=hs(n.ctab,i.item.id,v,p,i.item.ref),t.update(i.action,!0),!0}i.action&&(i.action.perform(r),t.update(i.action,!0));var m=t.explicitSelected();return i.action=is(r,m,t.render.page2obj(e).sub(i.xy0)),i.mergeItems=ns(t,m),t.hover(rs(i.mergeItems)),t.update(i.action,!0),!0}if(C(this,T$).running()){var g=C(this,T$).addPoint(e);return t.selection(e.shiftKey?I$(g,t.selection(),!1):g),!0}var y=C(this,T$).fragment||e.ctrlKey?["frags","sgroups","functionalGroups","sgroupData","rgroups","rxnArrows","rxnPluses","enhancedFlags","simpleObjects","texts"]:["atoms","bonds","sgroups","functionalGroups","sgroupData","rgroups","rxnArrows","rxnPluses","enhancedFlags","simpleObjects","texts"];return t.hover(t.findItem(e,y,null)),!0}},{key:"mouseup",value:function(e){var t,n=this.editor,r=n.selection(),i=n.render.ctab,o=i.molecule,a=o.functionalGroups,s=[],u={atoms:[],bonds:[]};if(r&&a.size&&r.atoms){var l,c=O$(r.atoms);try{for(c.s();!(l=c.n()).done;){var f,h=l.value,d=Se.atomsInFunctionalGroup(a,h),p=null!==d&&(null===(f=i.atoms.get(d))||void 0===f?void 0:f.a);if(p){var v,m=O$(p.sgs.values());try{for(m.s();!(v=m.n()).done;){t=v.value}}catch(L){m.e(L)}finally{m.f()}}p&&void 0!==t&&!s.includes(t)&&s.push(t)}}catch(L){c.e(L)}finally{c.f()}}if(r&&a.size&&r.bonds){var g,y=O$(r.bonds);try{for(y.s();!(g=y.n()).done;){var b=g.value,x=Se.bondsInFunctionalGroup(o,a,b),_=Se.findFunctionalGroupByBond(o,a,x);null===_||s.includes(_)||s.push(_)}}catch(L){y.e(L)}finally{y.f()}}if(s.length){var w,S=O$(s);try{for(S.s();!(w=S.n()).done;){var E=w.value,O=i.sgroups.get(E);if(O){var A,M,T=me.getAtoms(o,O.item),P=me.getBonds(o,O.item);(A=u.atoms).push.apply(A,k(T))&&(M=u.bonds).push.apply(M,k(P))}}}catch(L){S.e(L)}finally{S.f()}}var R=this.dragCtx;if(R&&R.stopTapping&&R.stopTapping(),R&&R.item)R.action=R.action?ts(i,R.mergeItems).mergeWith(R.action):ts(i,R.mergeItems),n.hover(null),R.mergeItems&&n.selection(null),0!==R.action.operations.length&&n.update(R.action),delete this.dragCtx;else if(C(this,T$).running()){var I=u.atoms.length>0?I$(C(this,T$).end(),u,!1):C(this,T$).end();n.selection(e.shiftKey?I$(I,n.selection(),!1):I)}else C(this,T$).fragment&&(e.shiftKey||n.selection(null));return n.event.message.dispatch({info:!1}),!0}},{key:"dblclick",value:function(e){var t=this.editor,n=t.render.ctab,r=n.molecule,i=n.sgroups,o=r.functionalGroups,a=t.render,s=t.findItem(e,["atoms","bonds","sgroups","functionalGroups","sgroupData","texts"],null),u=[],l=[],c=[];if(s&&o&&"atoms"===s.map){var f,h=Se.atomsInFunctionalGroup(o,s.id),d=null!==h&&(null===(f=n.atoms.get(h))||void 0===f?void 0:f.a);null===h||Se.isAtomInContractedFunctionalGroup(d,i,o,!0)||u.push(h)}if(s&&o&&"bonds"===s.map){var p,v=Se.bondsInFunctionalGroup(r,o,s.id),m=null!==v&&(null===(p=n.bonds.get(v))||void 0===p?void 0:p.b);null===v||Se.isBondInContractedFunctionalGroup(m,i,o,!0)||l.push(v)}if(u.length>0){var g,y=O$(u);try{for(y.s();!(g=y.n()).done;){var b=g.value,x=Se.findFunctionalGroupByAtom(o,b);null===x||c.includes(x)||c.push(x)}}catch(j){y.e(j)}finally{y.f()}t.event.removeFG.dispatch({fgIds:c})}else{if(!(l.length>0)){if(!s)return!0;var _=this.editor.selection();if("atoms"===s.map){var w=new ha,S=r.atoms.get(s.id),E=t.event.elementEdit.dispatch(S);if(null!==_&&void 0!==_&&_.atoms){var k=_.atoms;Promise.resolve(E).then((function(e){k.forEach((function(t){w.mergeWith(Ya(n,t,e,!1))})),t.update(w)})).catch((function(){return null}))}}else if("bonds"===s.map){var O,A=null===(O=a.ctab.bonds.get(s.id))||void 0===O?void 0:O.b,C=t.event.bondEdit.dispatch(A);if(null!==_&&void 0!==_&&_.bonds){var M=new ha,T=_.bonds;Promise.resolve(C).then((function(e){T.forEach((function(t){M.mergeWith(Ua(n,t,e))})),t.update(M)})).catch((function(){return null}))}}else if("sgroups"===s.map&&!Se.isFunctionalGroup(r.sgroups.get(s.id))||"sgroupData"===s.map)t.selection(R$(s)),y$(t,s.id,null);else if("texts"===s.map){t.selection(R$(s));var P=r.texts.get(s.id);t.event.elementEdit.dispatch(k$(k$({},P),{},{type:"text"})).then((function(e){var r=e.content;r?r!==(null===P||void 0===P?void 0:P.content)&&t.update(ks(n,s.id,r)):t.update(Os(n,s.id))})).catch((function(){return null}))}return!0}var R,I=O$(l);try{for(I.s();!(R=I.n()).done;){var L=R.value,N=Se.findFunctionalGroupByBond(r,o,L);null===N||c.includes(N)||c.push(N)}}catch(j){I.e(j)}finally{I.f()}this.editor.event.removeFG.dispatch({fgIds:c})}}},{key:"mouseleave",value:function(e){if(this.dragCtx&&this.dragCtx.stopTapping&&this.dragCtx.stopTapping(),this.dragCtx&&this.dragCtx.action){var t=this.dragCtx.action;this.editor.update(t)}C(this,T$).running()&&this.editor.selection(C(this,T$).end()),delete this.dragCtx,this.editor.hover(null)}}]),e}();function R$(e){var t={};return t[e.map]=[e.id],t}function I$(e,t,n){return t&&Object.keys(t).forEach((function(r){e[r]?e[r]=function(e,t,n){return t.reduce((function(t,r){return n?e=(0,F.xor)(e,[r]):e.includes(r)||e.push(r),e}),[])}(e[r],t[r],n):e[r]=t[r].slice()})),e}function L$(e,t){return e&&e[t.map]&&e[t.map].includes(t.id)}function N$(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return j$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j$(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function j$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D$=function(){function e(t,n){if((0,l.Z)(this,e),this.editor=t,this.maps=["atoms","bonds","rxnArrows","rxnPluses","sgroups","functionalGroups","sgroupData","simpleObjects","texts"],this.lassoHelper=new d$(n||0,t,null),t.selection()){var r=us(t.render.ctab,t.selection());t.update(r),t.selection(null),this.isNotActiveTool=!0}}return(0,c.Z)(e,[{key:"mousedown",value:function(e){this.editor.findItem(e,this.maps)||this.lassoHelper.begin(e)}},{key:"mousemove",value:function(e){this.lassoHelper.running()?this.editor.selection(this.lassoHelper.addPoint(e)):this.editor.hover(this.editor.findItem(e,this.maps))}},{key:"mouseup",value:function(){var e,t=this.editor.render.ctab,n=t.sgroups,r=t.molecule,i=r.functionalGroups,o=this.editor.selection(),a={atoms:[],bonds:[]},s=[],u=[],l=[];if(o&&i.size&&o.atoms){var c,f=N$(o.atoms);try{for(f.s();!(c=f.n()).done;){var h,d=c.value,p=Se.atomsInFunctionalGroup(i,d),v=null!==p&&(null===(h=t.atoms.get(p))||void 0===h?void 0:h.a);if(v){var m,g=N$(v.sgs.values());try{for(g.s();!(m=g.n()).done;){e=m.value}}catch(U){g.e(U)}finally{g.f()}}if(v&&Se.isAtomInContractedFunctionalGroup(v,n,i,!0)){var y,b,x,_,w=void 0!==e&&me.getAtoms(r,null===(y=t.sgroups.get(e))||void 0===y?void 0:y.item),S=void 0!==e&&me.getBonds(r,null===(b=t.sgroups.get(e))||void 0===b?void 0:b.item);d===w[0]&&(x=a.atoms).push.apply(x,k(w))&&(_=a.bonds).push.apply(_,k(S))}v&&!Se.isAtomInContractedFunctionalGroup(v,n,i,!0)&&s.push(p)}}catch(U){f.e(U)}finally{f.f()}}if(o&&i.size&&o.bonds){var E,O=N$(o.bonds);try{for(O.s();!(E=O.n()).done;){var A,C=E.value,M=Se.bondsInFunctionalGroup(r,i,C),T=null!==M&&(null===(A=t.bonds.get(M))||void 0===A?void 0:A.b);T&&!Se.isBondInContractedFunctionalGroup(T,n,i,!0)&&u.push(M)}}catch(U){O.e(U)}finally{O.f()}}if(s.length>0){var P,R=N$(s);try{for(R.s();!(P=R.n()).done;){var I=P.value,L=Se.findFunctionalGroupByAtom(i,I);null!==L&&!l.includes(L)&&l.push(L)}}catch(U){R.e(U)}finally{R.f()}}if(u.length>0){var N,j=N$(u);try{for(j.s();!(N=j.n()).done;){var D=N.value,B=Se.findFunctionalGroupByBond(r,i,D);null!==B&&!l.includes(B)&&l.push(B)}}catch(U){j.e(U)}finally{j.f()}}if(l.length>0){var z=[];l.forEach((function(e){var t;(null===(t=n.get(e))||void 0===t?void 0:t.item.atoms).forEach((function(t){!s.includes(t)&&!z.includes(e)&&z.push(e)}))})),z.length>0&&(this.editor.selection(null),this.editor.event.removeFG.dispatch({fgIds:z}),this.lassoHelper.cancel())}var F=this.editor.render;if(this.lassoHelper.running()){var V=a.atoms.length>0?I$(this.lassoHelper.end(),a,!1):this.lassoHelper.end();this.editor.update(us(F.ctab,V)),this.editor.selection(null)}}},{key:"click",value:function(e){var t=this.editor.render,n=t.ctab,r=this.editor.render.ctab,i=r.sgroups,o=r.molecule,a=o.functionalGroups,s=this.editor.findItem(e,this.maps),u=[],l=[],c=[];if(s&&a&&"functionalGroups"===s.map&&!Se.isContractedFunctionalGroup(s.id,a)){var f=i.get(s.id);Se.isFunctionalGroup(null===f||void 0===f?void 0:f.item)&&c.push(s.id)}else if(s&&a&&"atoms"===s.map){var h,d=Se.atomsInFunctionalGroup(a,s.id),p=null!==d&&(null===(h=r.atoms.get(d))||void 0===h?void 0:h.a);p&&!Se.isAtomInContractedFunctionalGroup(p,i,a,!0)&&u.push(d)}else if(s&&a&&"bonds"===s.map){var v,m=Se.bondsInFunctionalGroup(o,a,s.id),g=null!==m&&(null===(v=r.bonds.get(m))||void 0===v?void 0:v.b);g&&!Se.isBondInContractedFunctionalGroup(g,i,a,!0)&&l.push(m)}if(u.length){var y,b=N$(u);try{for(b.s();!(y=b.n()).done;){var x=y.value,_=Se.findFunctionalGroupByAtom(a,x);null===_||c.includes(_)||c.push(_)}}catch(M){b.e(M)}finally{b.f()}}else if(l.length){var w,S=N$(l);try{for(S.s();!(w=S.n()).done;){var E=w.value,O=Se.findFunctionalGroupByBond(o,a,E);null===O||c.includes(O)||c.push(O)}}catch(M){S.e(M)}finally{S.f()}}if(c.length)this.editor.event.removeFG.dispatch({fgIds:c});else if(s){if(this.editor.hover(null),"atoms"===s.map)this.editor.update(function(e,t){return us(e,{atoms:[t]})}(n,s.id));else if("bonds"===s.map)this.editor.update(function(e,t){var n=e.molecule.getBondFragment(t),r=ss(e,t);return as(e,n).mergeWith(r)}(n,s.id));else if("functionalGroups"===s.map&&Se.isContractedFunctionalGroup(s.id,a)){var A=i.get(s.id);this.editor.update(us(t.ctab,{atoms:k(me.getAtoms(o,null===A||void 0===A?void 0:A.item)),bonds:k(me.getBonds(o,null===A||void 0===A?void 0:A.item))}))}else if("sgroups"===s.map||"sgroupData"===s.map){var C=i.get(s.id);Se.isFunctionalGroup(null===C||void 0===C?void 0:C.item)?this.editor.event.removeFG.dispatch({fgIds:[s.id]}):this.editor.update(La(n,s.id))}else if("rxnArrows"===s.map)this.editor.update(ds(n,s.id));else if("rxnPluses"===s.map)this.editor.update(function(e,t){var n=new ha;return n.addOp(new No(t)),n.perform(e)}(n,s.id));else if("simpleObjects"===s.map)this.editor.update(ys(n,s.id));else{if("texts"!==s.map)return;this.editor.update(Os(n,s.id))}this.editor.selection(null)}}},{key:"mouseleave",value:function(){this.mouseup()}},{key:"cancel",value:function(){this.lassoHelper.running()&&this.lassoHelper.end(),this.editor.selection(null)}}]),e}();function B$(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return z$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z$(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function z$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F$=function(){function e(t,n){(0,l.Z)(this,e),this.editor=t,this.editor.selection(null),this.struct=n;var r=this.editor.render,i=r.clientArea,o=i.clientHeight,a=i.clientWidth,s=this.editor.lastEvent?r.page2obj(this.editor.lastEvent):r.page2obj({pageX:a/2,pageY:o/2}),u=ls(r.ctab,this.struct,s),c=(0,M.Z)(u,2),f=c[0],h=c[1];this.action=f,this.editor.update(this.action,!0),this.mergeItems=ns(this.editor,h),this.editor.hover(rs(this.mergeItems),this)}return(0,c.Z)(e,[{key:"mousemove",value:function(e){var t=this.editor.render;this.action&&this.action.perform(t.ctab);var n=ls(t.ctab,this.struct,t.page2obj(e)),r=(0,M.Z)(n,2),i=r[0],o=r[1];this.action=i,this.editor.update(this.action,!0),this.mergeItems=ns(this.editor,o),this.editor.hover(rs(this.mergeItems))}},{key:"mouseup",value:function(){var e=this.editor.render.ctab.molecule,t=e.functionalGroups,n=[],r=[],i=[];if(this.mergeItems&&t.size&&this.mergeItems.atoms.size){var o,a=B$(this.mergeItems.atoms.values());try{for(a.s();!(o=a.n()).done;){var s=o.value,u=Se.atomsInFunctionalGroup(t,s);null!==u&&n.push(u)}}catch(E){a.e(E)}finally{a.f()}}if(this.mergeItems&&t.size&&this.mergeItems.bonds.size){var l,c=B$(this.mergeItems.bonds.values());try{for(c.s();!(l=c.n()).done;){var f=l.value,h=Se.atomsInFunctionalGroup(t,f);null!==h&&r.push(h)}}catch(E){c.e(E)}finally{c.f()}}if(n.length>0){var d,p=B$(n);try{for(p.s();!(d=p.n()).done;){var v=d.value,m=Se.findFunctionalGroupByAtom(t,v);null===m||i.includes(m)||i.push(m)}}catch(E){p.e(E)}finally{p.f()}this.editor.event.removeFG.dispatch({fgIds:i})}else if(r.length>0){var g,y=B$(r);try{for(y.s();!(g=y.n()).done;){var b=g.value,x=Se.findFunctionalGroupByBond(e,t,b);null===x||i.includes(x)||i.push(x)}}catch(E){y.e(E)}finally{y.f()}this.editor.event.removeFG.dispatch({fgIds:i})}else{var _=this.editor,w=_.render.ctab;if(_.selection(null),this.action=this.action?ts(w,this.mergeItems).mergeWith(this.action):ts(w,this.mergeItems),_.hover(null),this.action){var S=this.action;delete this.action,this.editor.update(S)}}}},{key:"cancel",value:function(){var e=this.editor.render;this.editor.hover(null),this.action&&(this.action.perform(e.ctab),delete this.action,e.update())}},{key:"mouseleave",value:function(){this.cancel()}}]),e}();function V$(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return U$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U$(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function U$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z$=function(){function e(t){(0,l.Z)(this,e),t.selection(null),this.editor=t}return(0,c.Z)(e,[{key:"mousemove",value:function(e){var t=this.editor.render.ctab.molecule,n=this.editor.findItem(e,["atoms"]);if(n){var r=t.atoms.get(n.id);null===(null===r||void 0===r?void 0:r.attpnt)&&this.editor.hover(n)}else this.editor.hover(null)}},{key:"click",value:function(e){var t=this.editor.render.ctab.molecule.functionalGroups,n=this.editor.render,r=this.editor.findItem(e,["atoms"]),i=[],o=[];if(r&&t&&"atoms"===r.map){var a=Se.atomsInFunctionalGroup(t,r.id);null!==a&&i.push(a)}if(!(i.length>0)){if(!r)return this.editor.hover(null),H$(this.editor,null,n.page2obj(e)),!0;if("atoms"===r.map){this.editor.hover(null);var s=this.editor.render.ctab.molecule.atoms.get(r.id);if(null!==(null===s||void 0===s?void 0:s.attpnt))return;return H$(this.editor,r.id,null),!0}return!0}var u,l=V$(i);try{for(l.s();!(u=l.n()).done;){var c=u.value,f=Se.findFunctionalGroupByAtom(t,c);null===f||o.includes(f)||o.push(f)}}catch(h){l.e(h)}finally{l.f()}this.editor.event.removeFG.dispatch({fgIds:o})}}]),e}();function H$(e,t,n){var r=e.render.ctab.molecule,i=t||0===t?r.atoms.get(t):null,o=i?i.rglabel:0,a=i?i.label:"R#",s=e.event.elementEdit.dispatch({label:"R#",rglabel:o,fragId:i?i.fragment:null});Promise.resolve(s).then((function(r){r=Object.assign({},re.attrlist,r),!t&&0!==t&&r.rglabel?e.update(Ka(e.render.ctab,n,r)):o!==r.rglabel&&(r.aam=i.aam,r.attpnt=i.attpnt,r.rglabel||"R#"===a||(r.label=a),e.update(Ya(e.render.ctab,t,r,!1)))})).catch((function(){return null}))}function G$(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return W$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W$(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function W$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var q$=function(){function e(t){(0,l.Z)(this,e),t.selection(null),this.editor=t}return(0,c.Z)(e,[{key:"mousemove",value:function(e){this.editor.hover(this.editor.findItem(e,["frags","rgroups"]))}},{key:"click",value:function(e){var t=this.editor.render.ctab,n=t.molecule,r=n.functionalGroups,i=this.editor,o=i.findItem(e,["frags","rgroups"]),a=i.findItem(e,["atoms","bonds"]),s=[],u=[],l=[];if(a&&r&&"atoms"===a.map){var c=Se.atomsInFunctionalGroup(r,a.id);null!==c&&s.push(c)}if(a&&r&&"bonds"===a.map){var f=Se.bondsInFunctionalGroup(n,r,a.id);null!==f&&u.push(f)}if(s.length>0){var h,d=G$(s);try{for(d.s();!(h=d.n()).done;){var p=h.value,v=Se.findFunctionalGroupByAtom(r,p);null===v||l.includes(v)||l.push(v)}}catch(S){d.e(S)}finally{d.f()}this.editor.event.removeFG.dispatch({fgIds:l})}else{if(!(u.length>0)){if(!o)return!0;this.editor.hover(null);var m="rgroups"===o.map?o.id:Oe.findRGroupByFragment(n.rgroups,o.id),g=Object.assign({label:m},"frags"===o.map?{fragId:o.id}:n.rgroups.get(o.id)),y=i.event.rgroupEdit.dispatch(g);return Promise.resolve(y).then((function(e){var n;if("rgroups"!==o.map){var r=Oe.findRGroupByFragment(t.molecule.rgroups,o.id);n=Ta(t,e.label,o.id).mergeWith(Pa(t,e.label,r))}else n=Ma(t,o.id,e);i.update(n)})).catch((function(){return null})),!0}var b,x=G$(u);try{for(x.s();!(b=x.n()).done;){var _=b.value,w=Se.findFunctionalGroupByBond(n,r,_);null===w||l.includes(w)||l.push(w)}}catch(S){x.e(S)}finally{x.f()}this.editor.event.removeFG.dispatch({fgIds:l})}}},{key:"cancel",value:function(){this.editor.hover(null)}}]),e}(),K$=function(){function e(t,n){(0,l.Z)(this,e),this.mode=n,this.editor=t,this.editor.selection(null)}return(0,c.Z)(e,[{key:"mousedown",value:function(e){var t=this.editor.render.page2obj(e);this.dragCtx={p0:t};var n=this.editor.findItem(e,["rxnArrows"]);n&&"rxnArrows"===n.map?(this.editor.hover(null),this.editor.selection({rxnArrows:[n.id]}),this.dragCtx.ci=n):(this.dragCtx.isNew=!0,this.editor.selection(null))}},{key:"mousemove",value:function(e){var t=this.editor.render;if(this.dragCtx){var n=t.page2obj(e),r=n.sub(this.dragCtx.p0);if(this.dragCtx.previous=n,this.dragCtx.ci)this.dragCtx.action&&this.dragCtx.action.perform(t.ctab),this.dragCtx.ci.ref?this.dragCtx.action=hs(t.ctab,this.dragCtx.ci.id,r,n,this.dragCtx.ci.ref):this.dragCtx.action=is(t.ctab,this.editor.selection()||{},r),this.editor.update(this.dragCtx.action,!0);else{if(this.dragCtx.action)this.dragCtx.action.perform(t.ctab);else{var i=fs(t.ctab,[this.dragCtx.p0,this.dragCtx.p0],this.mode),o=i.operations[0];this.dragCtx.itemId=o.data.id,this.dragCtx.action=i,this.editor.update(this.dragCtx.action,!0)}this.dragCtx.action=hs(t.ctab,this.dragCtx.itemId,r,n,null),this.editor.update(this.dragCtx.action,!0)}}else{var a=this.editor.findItem(e,["rxnArrows"]);this.editor.hover(a)}}},{key:"mouseup",value:function(){if(!this.dragCtx)return!0;var e=this.editor.render,t=this.dragCtx.p0,n=X$(t,this.dragCtx.previous);return this.dragCtx.action&&(this.dragCtx.isNew&&(this.editor.update(ds(e.ctab,this.dragCtx.itemId),!0),this.dragCtx.action=fs(e.ctab,[t,n],this.mode)),this.editor.update(this.dragCtx.action)),delete this.dragCtx,!0}},{key:"click",value:function(e){var t=this.editor.render,n=this.editor.findItem(e,["rxnArrows"]),r=t.page2obj(e);if(!n){var i=[r,X$(r,null)];this.editor.update(fs(t.ctab,i,this.mode))}}}]),e}();function Y$(e,t,n,r){var i=Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2)),o=function(e,t,n,r){var i=e-n,o=t-r;if(!i&&!o)return 0;return(180+180*Math.atan2(-o,-i)/Math.PI+360)%360}(n,r,e,t);return{length:i,angle:o}}function X$(e,t){if(!t)return new Y(e.x+2,e.y);var n=Y$(e.x,e.y,t.x,t.y);if(n.length<=1.5){var r=new Y;return r.x=e.x+2*Math.cos(Math.PI*n.angle/180),r.y=e.y+2*Math.sin(Math.PI*n.angle/180),r}return t}var $$=function(){function e(t){(0,l.Z)(this,e),this.editor=t,this.editor.selection(null)}return(0,c.Z)(e,[{key:"mousedown",value:function(e){var t=this.editor.render;this.rcs=t.ctab.molecule.getComponents();var n=this.editor.findItem(e,["atoms"]);n&&"atoms"===n.map&&(this.editor.hover(null),this.dragCtx={item:n,xy0:t.page2obj(e)})}},{key:"mousemove",value:function(e){var t=this.editor,n=t.render;if("dragCtx"in this){var r,i,o,a=this.editor.findItem(e,["atoms"],this.dragCtx.item),s=n.ctab.molecule.atoms;if(a&&"atoms"===a.map&&J$(this.rcs,this.dragCtx.item.id,a.id))t.hover(a),this.updateLine(null===(r=s.get(this.dragCtx.item.id))||void 0===r?void 0:r.pp,null===(i=s.get(a.id))||void 0===i?void 0:i.pp);else t.hover(null),this.updateLine(null===(o=s.get(this.dragCtx.item.id))||void 0===o?void 0:o.pp,n.page2obj(e))}else t.hover(t.findItem(e,["atoms"]))}},{key:"updateLine",value:function(e,t){if(this.line&&(this.line.remove(),this.line=null),e&&t){var n=this.editor.render;this.line=n.selectionLine(fe.obj2scaled(e,n.options).add(n.options.offset),fe.obj2scaled(t,n.options).add(n.options.offset))}}},{key:"mouseup",value:function(e){var t=this;if("dragCtx"in this){var n=this.editor.render,r=this.editor.findItem(e,["atoms"],this.dragCtx.item);if(r&&"atoms"===r.map&&J$(this.rcs,this.dragCtx.item.id,r.id)){var i=new ha,o=n.ctab.molecule.atoms,a=o.get(this.dragCtx.item.id),s=o.get(r.id),u=null===a||void 0===a?void 0:a.aam,l=null===s||void 0===s?void 0:s.aam;if(!u||u!==l){if((u&&u!==l||!u&&l)&&o.forEach((function(e,r){r!==t.dragCtx.item.id&&(u&&e.aam===u||l&&e.aam===l)&&i.mergeWith(Ya(n.ctab,r,{aam:0},null))})),u)i.mergeWith(Ya(n.ctab,r.id,{aam:u},null));else{var c=0;o.forEach((function(e){c=Math.max(c,e.aam||0)})),i.mergeWith(Ya(n.ctab,this.dragCtx.item.id,{aam:c+1},null)),i.mergeWith(Ya(n.ctab,r.id,{aam:c+1},null))}this.editor.update(i)}}this.updateLine(null,null),delete this.dragCtx}this.editor.hover(null)}}]),e}();function J$(e,t,n){for(var r,i,o=0;(!r||!i)&&o<e.reactants.length;o++){var a=Array.from(e.reactants[o]);!r&&a.indexOf(t)>=0&&(r="r"),!i&&a.indexOf(n)>=0&&(i="r")}for(var s=0;(!r||!i)&&s<e.products.length;s++){var u=Array.from(e.products[s]);!r&&u.indexOf(t)>=0&&(r="p"),!i&&u.indexOf(n)>=0&&(i="p")}return r&&i&&r!==i}var Q$=function(){function e(t){(0,l.Z)(this,e),this.editor=t,this.editor.selection(null)}return(0,c.Z)(e,[{key:"mousedown",value:function(e){var t=this.editor.render,n=this.editor.findItem(e,["rxnPluses"]);n&&"rxnPluses"===n.map&&(this.editor.hover(null),this.editor.selection({rxnPluses:[n.id]}),this.dragCtx={xy0:t.page2obj(e)})}},{key:"mousemove",value:function(e){var t=this.editor,n=t.render;"dragCtx"in this?(this.dragCtx.action&&this.dragCtx.action.perform(n.ctab),this.dragCtx.action=is(n.ctab,this.editor.selection()||{},n.page2obj(e).sub(this.dragCtx.xy0)),t.update(this.dragCtx.action,!0)):t.hover(t.findItem(e,["rxnPluses"]))}},{key:"mouseup",value:function(){return!this.dragCtx||(this.dragCtx.action&&this.editor.update(this.dragCtx.action),delete this.dragCtx,!0)}},{key:"click",value:function(e){var t=this.editor.render;this.editor.findItem(e,["rxnPluses"])||this.editor.update(function(e,t){var n=new ha;return n.addOp(new Lo(t).perform(e)),n}(t.ctab,t.page2obj(e)))}}]),e}(),eJ=function(){function e(t){(0,l.Z)(this,e),this.editor=t,this.editor.selection(null)}return(0,c.Z)(e,[{key:"mousemove",value:function(e){var t,n=this.editor.findItem(e,["atoms"]);n&&"atoms"===n.map?this.editor.hover(null!==(t=this.editor.render.ctab.molecule.atoms.get(n.id))&&void 0!==t&&t.aam?n:null):this.editor.hover(null)}},{key:"mouseup",value:function(e){var t,n=this,r=this.editor.findItem(e,["atoms"]),i=this.editor.render.ctab.molecule.atoms;if(r&&"atoms"===r.map&&null!==(t=i.get(r.id))&&void 0!==t&&t.aam){var o,a=new ha,s=null===(o=i.get(r.id))||void 0===o?void 0:o.aam;i.forEach((function(e,t){e.aam===s&&a.mergeWith(Ya(n.editor.render.ctab,t,{aam:0},null))})),this.editor.update(a)}this.editor.hover(null)}}]),e}(),tJ=function(){function e(t,n){var r;if((0,l.Z)(this,e),this.editor=t,n){var i=t.render.ctab,o=t.selection(),a=o&&o.bonds&&1===Object.keys(o).length&&1===o.bonds.length?function(e,t,n){var r=e.molecule,i=r.bonds.get(t),o=r.atoms.get(i.begin),a=r.atoms.get(i.end),s=o.pp.add(a.pp).scaled(.5),u=ji.calcAngle(o.pp,a.pp),l=Array.from(r.getFragmentIds(o.fragment));return 0===(u="horizontal"===n?-u:Math.PI/2-u)||Math.abs(u)===Math.PI?ps(e,{atoms:l},n,s):ms(e,{atoms:l},s,u)}(i,o.bonds[0],n):ps(i,o,n,null);return t.update(a),void(this.isNotActiveTool=!0)}t.selection()&&null!==(r=t.selection())&&void 0!==r&&r.atoms||this.editor.selection(null)}return(0,c.Z)(e,[{key:"mousedown",value:function(e){var t,n=new Y,r=this.editor.selection(),i=this.editor.render,o=i.ctab.molecule;if(r&&r.atoms){var a,s=null,u=!1;if(r.atoms.forEach((function(e){var t=o.atoms.get(e);n.add_(null===t||void 0===t?void 0:t.pp),u||null===t||void 0===t||t.neighbors.find((function(t){var n,i=o.halfBonds.get(t);if(i&&-1===(null===(n=r.atoms)||void 0===n?void 0:n.indexOf(i.end))){if(i.loop>=0){var a=o.atoms.get(e);if(null===a||void 0===a||!a.neighbors.find((function(e){var t,n=o.halfBonds.get(e);return(null===n||void 0===n?void 0:n.loop)>=0&&-1!==(null===(t=r.atoms)||void 0===t?void 0:t.indexOf(null===n||void 0===n?void 0:n.end))})))return u=!0,!0}if(null==s)s=e;else if(s!==e)return u=!0,!0}return!1}))})),u||null===s)n=n.scaled(1/r.atoms.length);else n=null===(a=o.atoms.get(s))||void 0===a?void 0:a.pp}else null!==(t=o.atoms)&&void 0!==t&&t.size?(o.atoms.forEach((function(e){n.add_(e.pp)})),n=n.scaled(1/o.atoms.size)):n=i.page2obj(e);return this.dragCtx={xy0:n,angle1:GX.calcAngle(n,i.page2obj(e))},!0}},{key:"mousemove",value:function(e){if(!this.dragCtx)return!0;var t=this.editor.render,n=this.dragCtx,r=t.page2obj(e),i=GX.calcAngle(n.xy0,r)-n.angle1;e.ctrlKey||(i=GX.fracAngle(i,null));var o=GX.degrees(i);if("angle"in n&&n.angle===o)return!0;"action"in n&&n.action.perform(t.ctab),n.angle=o,n.action=ms(t.ctab,this.editor.selection(),n.xy0,i),this.editor.event.message.dispatch({info:o+"\xba"});var a=this.editor.explicitSelected();return n.mergeItems=ns(this.editor,a),this.editor.hover(rs(n.mergeItems)),this.editor.update(n.action,!0),!0}},{key:"mouseup",value:function(){if(!this.dragCtx)return!0;var e=this.dragCtx,t=this.editor.render.ctab,n=e.action?ts(t,e.mergeItems).mergeWith(e.action):ts(t,e.mergeItems);return delete this.dragCtx,this.editor.update(n),this.editor.hover(null),e.mergeItems&&this.editor.selection(null),this.editor.event.message.dispatch({info:!1}),!0}},{key:"cancel",value:function(){this.mouseup()}},{key:"mouseleave",value:function(){this.mouseup()}}]),e}(),nJ=function(){function e(t,n){(0,l.Z)(this,e),this.mode=n,this.editor=t,this.editor.selection(null)}return(0,c.Z)(e,[{key:"mousedown",value:function(e){var t=this.editor.render.page2obj(e);this.dragCtx={p0:t};var n=this.editor.findItem(e,["simpleObjects"]);n&&"simpleObjects"===n.map?(this.editor.hover(null),this.editor.selection({simpleObjects:[n.id]}),this.dragCtx.ci=n):(this.dragCtx.isNew=!0,this.editor.selection(null))}},{key:"mousemove",value:function(e){var t=this.editor.render;if(this.dragCtx){var n=t.page2obj(e),r=n.sub(this.dragCtx.p0);if(this.dragCtx.previous=n,this.dragCtx.ci)this.dragCtx.action&&this.dragCtx.action.perform(t.ctab),this.dragCtx.ci.ref?this.dragCtx.action=xs(t.ctab,this.dragCtx.ci.id,r,n,this.dragCtx.ci.ref,e.shiftKey):this.dragCtx.action=is(t.ctab,this.editor.selection()||{},r),this.editor.update(this.dragCtx.action,!0);else{if(this.dragCtx.action)this.dragCtx.action.perform(t.ctab);else{var i=bs(t.ctab,[this.dragCtx.p0,this.dragCtx.p0],this.mode,!1),o=i.operations[0];this.dragCtx.itemId=o.data.id,this.dragCtx.action=i,this.editor.update(this.dragCtx.action,!0)}this.dragCtx.action=xs(t.ctab,this.dragCtx.itemId,r,n,null,e.shiftKey),this.editor.update(this.dragCtx.action,!0)}}else{var a=this.editor.findItem(e,["simpleObjects"]);this.editor.hover(a)}}},{key:"mouseup",value:function(e){if(!this.dragCtx)return!0;if(this.dragCtx.action){if(this.dragCtx.isNew){var t=this.editor.render;this.editor.update(ys(t.ctab,this.dragCtx.itemId),!0),this.dragCtx.action=bs(t.ctab,[this.dragCtx.p0,this.dragCtx.previous],this.mode,e.shiftKey)}this.editor.update(this.dragCtx.action)}return delete this.dragCtx,!0}}]),e}();function rJ(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return iJ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iJ(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function iJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oJ=function(){function e(t,n){(0,l.Z)(this,e),this.editor=t,this.mode=n.mode,this.editor.selection(null),this.template={aid:parseInt(n.aid)||0,bid:parseInt(n.bid)||0};var r=n.struct;r.rescale();var i=new Y;r.atoms.forEach((function(e){i.add_(e.pp)})),this.template.molecule=r,this.findItems=[],this.template.xy0=i.scaled(1/(r.atoms.size||1));var o=r.atoms.get(this.template.aid);o&&(this.template.angle0=GX.calcAngle(o.pp,this.template.xy0),this.findItems.push("atoms"));var a=r.bonds.get(this.template.bid);a&&"fg"!==this.mode&&(this.template.sign=aJ(r,a,this.template.xy0),this.findItems.push("bonds")),r.sgroups.size&&this.findItems.push("sgroups")}return(0,c.Z)(e,[{key:"mousedown",value:function(e){var t=this.editor.findItem(e,["atoms","bonds","sgroups","functionalGroups"]),n=this.editor.struct(),r=[],i=[],o=[],a=[],s=this.editor.render.ctab,u=s.molecule,l=u.functionalGroups;if(t&&l.size&&"functionalGroups"===t.map&&Se.isContractedFunctionalGroup(t.id,l)&&o.push(t.id),t&&l.size&&"atoms"===t.map){var c=Se.atomsInFunctionalGroup(l,t.id);null!==c&&r.push(c)}if(t&&l.size&&"bonds"===t.map){var f=Se.bondsInFunctionalGroup(u,l,t.id);null!==f&&i.push(f)}if(o.length>0){var h,d=rJ(o);try{for(d.s();!(h=d.n()).done;){var p=h.value;a.includes(p)||a.push(p)}}catch(z){d.e(z)}finally{d.f()}}if(r.length>0){var v,m=rJ(r);try{for(m.s();!(v=m.n()).done;){var g=v.value,y=Se.findFunctionalGroupByAtom(l,g);null===y||a.includes(y)||a.push(y)}}catch(z){m.e(z)}finally{m.f()}}if(i.length>0){var b,x=rJ(i);try{for(x.s();!(b=x.n()).done;){var _=b.value,w=Se.findFunctionalGroupByBond(u,n.functionalGroups,_);null===w||a.includes(w)||a.push(w)}}catch(z){x.e(z)}finally{x.f()}}if(!a.length){var S=this.editor;this.editor.hover(null),this.dragCtx={xy0:S.render.page2obj(e),item:S.findItem(e,this.findItems)};var E=this.dragCtx,k=E.item;if(!k)return delete E.item,!0;if("bonds"===k.map&&"fg"!==this.mode){var O,A,C,M=s.molecule,T=new Y,P=M.bonds.get(k.id),R=null===(O=M.atoms.get(null===P||void 0===P?void 0:P.begin))||void 0===O?void 0:O.fragment,I=M.getFragmentIds(R),L=0,N=null===(A=M.halfBonds.get(null===P||void 0===P?void 0:P.hb1))||void 0===A?void 0:A.loop;if(N&&N<0)N=null===(C=M.halfBonds.get(null===P||void 0===P?void 0:P.hb2))||void 0===C?void 0:C.loop;if(N&&N>=0){var j,D=null===(j=M.loops.get(N))||void 0===j?void 0:j.hbs;null===D||void 0===D||D.forEach((function(e){var t,n=null===(t=M.halfBonds.get(e))||void 0===t?void 0:t.begin;if(n){var r=M.atoms.get(n);r&&(T.add_(r.pp),L++)}}))}else I.forEach((function(e){var t=M.atoms.get(e);t&&(T.add_(t.pp),L++)}));E.v0=T.scaled(1/L);var B=aJ(M,P,E.v0);E.sign1=B||1,E.sign2=this.template.sign}return!0}this.editor.event.removeFG.dispatch({fgIds:a})}},{key:"mousemove",value:function(e){var t=this.editor.render.ctab;if(!this.dragCtx)return this.editor.hover(this.editor.findItem(e,this.findItems)),!0;var n=this.dragCtx,r=n.item,i=null,o=this.editor.render.page2obj(e),a=t.molecule;if(r&&"bonds"===r.map&&"fg"!==this.mode){var s=a.bonds.get(r.id),u=aJ(a,s,o);if(n.sign1*this.template.sign>0&&(u=-u),u!==n.sign2||!n.action){n.action&&n.action.perform(t),n.sign2=u;var l=Ss(t,this.template,r.id,this.editor.event,n.sign1*n.sign2>0,!1),c=(0,M.Z)(l,2),f=c[0],h=c[1];n.action=f,this.editor.update(n.action,!0),n.mergeItems=ns(this.editor,h),this.editor.hover(rs(n.mergeItems))}return!0}var d=null;if(r){if("atoms"===r.map){var p;(i=null===(p=a.atoms.get(r.id))||void 0===p?void 0:p.pp)&&(d="fg"===this.mode||Y.dist(i,o)>1)}}else i=n.xy0;var v=GX.calcAngle(i,o);e.ctrlKey||(v=GX.fracAngle(v,null));var m=GX.degrees(v);if(this.editor.event.message.dispatch({info:m+"\xba"}),n.hasOwnProperty("angle")&&n.angle===m&&(!n.hasOwnProperty("extra_bond")||n.extra_bond===d))return!0;n.action&&n.action.perform(t),n.angle=m;var g,y=null;if(r){if("atoms"===r.map){var b=ws(t,this.template,r.id,v,d),x=(0,M.Z)(b,2);y=x[0],g=x[1],n.extra_bond=d}}else{var _=_s(t,this.template,i,v),w=(0,M.Z)(_,2);y=w[0],g=w[1]}return n.action=y,this.editor.update(n.action,!0),"fg"!==this.mode&&(n.mergeItems=ns(this.editor,g),this.editor.hover(rs(n.mergeItems))),!0}},{key:"mouseup",value:function(e){var t=this,n=this.dragCtx;if(!n)return!0;delete this.dragCtx;var r,i=this.editor.render.ctab,o=i.molecule,a=n.item;if(n.action&&a&&"bonds"===a.map&&"fg"!==this.mode)return n.action.perform(i),Ss(i,this.template,a.id,this.editor.event,n.sign1*n.sign2>0,!0).then((function(e){var n=(0,M.Z)(e,2),r=n[0],o=n[1],a=ns(t.editor,o);r=ts(i,a).mergeWith(r),t.editor.update(r)})),!0;var s=null;if(!n.action)if(a){if("atoms"===a.map){var u,l,c,f=null===(u=i.atoms.get(a.id))||void 0===u?void 0:u.a.neighbors.length;if(f&&f>1)l=null,c=!0;else if(1===f){var h,d=o.atoms.get(a.id),p=d&&(null===(h=o.halfBonds.get(d.neighbors[0]))||void 0===h?void 0:h.end),v=p&&o.atoms.get(p);l=e.ctrlKey?GX.calcAngle(null===v||void 0===v?void 0:v.pp,null===d||void 0===d?void 0:d.pp):GX.fracAngle(GX.calcAngle(v.pp,null===d||void 0===d?void 0:d.pp),null),c=!1}else l=0,c=!1;var m=ws(i,this.template,a.id,l,c),g=(0,M.Z)(m,2);r=g[0],s=g[1],n.action=r}else if("bonds"===a.map&&"fg"!==this.mode){return Ss(i,this.template,a.id,this.editor.event,n.sign1*n.sign2>0,!0).then((function(e){var n=(0,M.Z)(e,2),r=n[0],o=n[1];if("fg"!==t.mode){var a=ns(t.editor,o);r=ts(i,a).mergeWith(r),t.editor.update(r)}})),!0}}else{var y=_s(i,this.template,n.xy0,0),b=(0,M.Z)(y,2);r=b[0],s=b[1],n.action=r}this.editor.selection(null),!n.mergeItems&&s&&"fg"!==this.mode&&(n.mergeItems=ns(this.editor,s)),n.action=n.action?ts(i,n.mergeItems).mergeWith(n.action):ts(i,n.mergeItems),this.editor.hover(null);var x=n.action;return x&&!x.isDummy()&&this.editor.update(x),this.editor.event.message.dispatch({info:!1}),!0}},{key:"cancel",value:function(e){this.mouseup(e)}},{key:"mouseleave",value:function(e){this.mouseup(e)}}]),e}();function aJ(e,t,n){var r=e.atoms.get(t.begin).pp,i=e.atoms.get(t.end).pp,o=Y.cross(Y.diff(r,i),Y.diff(n,i));return o>0?1:o<0?-1:0}var sJ=function(){function e(t){(0,l.Z)(this,e),this.editor=t,this.editor.selection(null)}return(0,c.Z)(e,[{key:"mousedown",value:function(e){var t=this.editor.render,n=this.editor.findItem(e,["texts"]);this.editor.selection(null),n&&"texts"===n.map&&(this.editor.hover(null),this.editor.selection({texts:[n.id]}),this.dragCtx={xy0:t.page2obj(e),action:new ha})}},{key:"mousemove",value:function(e){var t=this.editor.render;this.dragCtx?(this.dragCtx.action&&this.dragCtx.action.perform(t.ctab),this.dragCtx.action=is(t.ctab,this.editor.selection()||{},t.page2obj(e).sub(this.dragCtx.xy0)),this.editor.update(this.dragCtx.action,!0)):this.editor.hover(this.editor.findItem(e,["texts"]))}},{key:"mouseup",value:function(){return this.dragCtx&&(this.editor.update(this.dragCtx.action),delete this.dragCtx),!0}},{key:"click",value:function(e){var t=this.editor.render,n=this.editor.findItem(e,["texts"]);return this.editor.hover(null),n||uJ(this.editor,null,t.page2obj(e)),!0}},{key:"dblclick",value:function(e){var t=this.editor.findItem(e,["texts"]);return this.editor.hover(null),"texts"===t.map&&uJ(this.editor,t.id,t.position),!0}}]),e}();function uJ(e,t,n){var r=e.render.ctab.molecule,i=t||0===t?r.texts.get(t):null,o=i?i.content:"";e.event.elementEdit.dispatch({content:o,id:t,position:n,type:"text"}).then((function(r){var i=r.content;!t&&0!==t&&i?e.update(function(e,t,n){var r=new ha;return r.addOp(new aa(t,n)),r.perform(e)}(e.render.ctab,i,n)):i?i!==o&&e.update(ks(e.render.ctab,t,i)):e.update(Os(e.render.ctab,t))})).catch((function(){return null}))}var lJ={rgroupatom:Z$,select:P$,sgroup:g$,eraser:D$,atom:XX,bond:r$,chain:a$,template:oJ,charge:l$,rgroupfragment:q$,apoint:UX,attach:e$,reactionarrow:K$,reactionplus:Q$,reactionmap:$$,reactionunmap:eJ,paste:F$,rotate:tJ,enhancedStereo:c$,simpleobject:nJ,text:sJ},cJ=function(){function e(t){(0,l.Z)(this,e),this.editor=t}return(0,c.Z)(e,[{key:"getAll",value:function(){return k(this.editor.render.ctab.molecule.highlights).map((function(e){var t=(0,M.Z)(e,2);return{id:t[0],highlight:t[1]}}))}},{key:"create",value:function(){for(var e=this,t=[],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((function(n){var r=n.atoms,i=n.bonds,o=n.color;if("string"===typeof o&&(r||i)){var a=fJ(e.editor.render.ctab.molecule,r,i),s=a.validAtoms,u=a.validBonds;0===s.length&&0===u.length||t.push({atoms:s,bonds:u,color:o})}}));var o=Ps(this.editor.render.ctab,t);this.editor.update(o)}},{key:"clear",value:function(){var e=function(e){var t=new ha;return e.molecule.highlights.forEach((function(e,n){t.addOp(new Ms(n))})),t.perform(e)}(this.editor.render.ctab);this.editor.update(e)}}]),e}();function fJ(e,t,n){Array.isArray(t)||(t=[]),Array.isArray(n)||(n=[]);var r=e.atoms,i=e.bonds;return t.length>0&&(t=t.filter((function(e){return r.has(e)}))),n.length>0&&(n=n.filter((function(e){return i.has(e)}))),{validAtoms:t,validBonds:n}}function hJ(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var dJ=["atoms","bonds","frags","sgroups","sgroupData","rgroups","rxnArrows","rxnPluses","enhancedFlags","simpleObjects","texts"],pJ=["atoms","bonds","rxnArrows","rxnPluses","functionalGroups","frags","merge","rgroups","sgroups","sgroupData","enhancedFlags","simpleObjects","texts"];function vJ(e,t){var n={};e.forEach((function(e,t){n[e.fragment]?n[e.fragment].push(t):n[e.fragment]=[t]}));var r=[];return Object.keys(n).forEach((function(e){var i=!0;n[e].forEach((function(e){t.includes(e)||(i=!1)})),i&&r.push(Number(e))})),r}var mJ=new WeakMap,gJ=function(){function e(t,n){(0,l.Z)(this,e),hJ(this,mJ,{writable:!0,value:void 0}),this.render=new Di(t,Object.assign({scale:40},n)),this._selection=null,this._tool=null,this.historyStack=[],this.historyPtr=0,this.errorHandler=null,this.highlights=new cJ(this),this.event={message:new Vl.w0,elementEdit:new Vl.he,bondEdit:new Vl.he,rgroupEdit:new Vl.he,sgroupEdit:new Vl.he,sdataEdit:new Vl.he,quickEdit:new Vl.he,attachEdit:new Vl.he,removeFG:new Vl.he,change:new Vl.w0,selectionChange:new Vl.he,aromatizeStruct:new Vl.he,dearomatizeStruct:new Vl.he,enhancedStereoEdit:new Vl.he,confirm:new Vl.he},function(e,t){["click","dblclick","mousedown","mousemove","mouseup","mouseleave"].forEach((function(n){e.event[n]=new Vl.ZN;var r=e.event[n];t.addEventListener(n,r.dispatch.bind(r)),r.add((function(t){if("mouseup"!==n&&"mouseleave"!==n&&(function(e){return e.which&&3===e.which||e.button&&2===e.button}(t)||!t.target||"DIV"===t.target.nodeName))return e.hover(null),!0;var r=e.tool();return e.lastEvent=t,r&&n in r&&r[n](t),!0}),-1)}))}(this,t)}return(0,c.Z)(e,[{key:"isDitrty",value:function(){var e=this.historyPtr;return!(!this.historyStack.length||!C(this,mJ))&&!(0,F.isEqual)(this.historyStack[e-1],C(this,mJ))}},{key:"setOrigin",value:function(){var e=this.historyPtr;A(this,mJ,e?this.historyStack[e-1]:null)}},{key:"tool",value:function(e,t){if(0===arguments.length)return this._tool;this._tool&&this._tool.cancel&&this._tool.cancel();var n=new lJ[e](this,t);return!n||n.isNotActiveTool?null:(this._tool=n,this._tool)}},{key:"clear",value:function(){this.struct(void 0)}},{key:"struct",value:function(e){if(0===arguments.length)return this.render.ctab.molecule;this.selection(null);var t=e||new Be,n=es(this.render.ctab,t);return this.update(n),bJ(this.render.ctab),yJ(this),this.render.ctab.molecule}},{key:"options",value:function(e){if(0===arguments.length)return this.render.options;var t=this.render.ctab.molecule,n=this.render.options.zoom;return this.render.clientArea.innerHTML="",this.render=new Di(this.render.clientArea,Object.assign({scale:40},e)),this.render.setMolecule(t),this.render.setZoom(n),this.render.update(),this.render.options}},{key:"zoom",value:function(e){if(0===arguments.length)return this.render.options.zoom;this.render.setZoom(e);var t=this.selection();return bJ(this.render.ctab,t),yJ(this),this.render.update(),this.render.options.zoom}},{key:"selection",value:function(e){if(0===arguments.length)return this._selection;var t=this.render.ctab;if(this._selection=null,"all"===e&&(e=dJ.reduce((function(e,n){return e[n]=Array.from(t[n].keys()),e}),{})),"descriptors"===e&&(t=this.render.ctab,e={sgroupData:Array.from(t.sgroupData.keys())}),e){var n={};Object.keys(e).forEach((function(t){e[t].length>0&&(n[t]=e[t].slice())})),0!==Object.keys(n).length&&(this._selection=n);var r=vJ(this.struct().atoms,this.explicitSelected().atoms);0!==r.length&&(this._selection&&this._selection.enhancedFlags?this._selection.enhancedFlags=Array.from(new Set([].concat(k(this._selection.enhancedFlags),k(r)))):n.enhancedFlags=r)}return this.render.ctab.setSelection(this._selection),this.event.selectionChange.dispatch(this._selection),this.render.update(),this._selection}},{key:"hover",value:function(e,t){var n=t||this._tool;!("ci"in n)||e&&n.ci.map===e.map&&n.ci.id===e.id||(xJ(n.ci,!1,this.render),delete n.ci),e&&xJ(e,!0,this.render)&&(n.ci=e)}},{key:"update",value:function(e,t){!0===e?this.render.update(!0):(t||e.isDummy()||(this.historyStack.splice(this.historyPtr,33,e),this.historyStack.length>32&&this.historyStack.shift(),this.historyPtr=this.historyStack.length,this.event.change.dispatch(e)),this.render.update())}},{key:"historySize",value:function(){return{undo:this.historyPtr,redo:this.historyStack.length-this.historyPtr}}},{key:"undo",value:function(){if(0===this.historyPtr)throw new Error("Undo stack is empty");if(this.tool()&&this.tool().cancel&&this.tool().cancel(),this.selection(null),this._tool instanceof lJ.paste)this.event.change.dispatch();else{this.historyPtr--;var e=this.historyStack[this.historyPtr].perform(this.render.ctab);this.historyStack[this.historyPtr]=e,this.event.change.dispatch(e),this.render.update()}}},{key:"redo",value:function(){if(this.historyPtr===this.historyStack.length)throw new Error("Redo stack is empty");if(this.tool()&&this.tool().cancel&&this.tool().cancel(),this.selection(null),this._tool instanceof lJ.paste)this.event.change.dispatch();else{var e=this.historyStack[this.historyPtr].perform(this.render.ctab);this.historyStack[this.historyPtr]=e,this.historyPtr++,this.event.change.dispatch(e),this.render.update()}}},{key:"subscribe",value:function(e,t){var n={handler:t};if("change"===e){var r=function(e){return function(e,t){var n=[];return e.operations.reverse().forEach((function(e){var t=e._inverted;switch(t.type){case zi.ATOM_ADD:case zi.ATOM_DELETE:n.push({operation:t.type,id:t.data.aid,label:t.data.atom.label?t.data.atom.label:"",position:{x:+t.data.pos.x.toFixed(2),y:+t.data.pos.y.toFixed(2)}});break;case zi.ATOM_ATTR:n.push({operation:e.type,id:e.data.aid,attribute:e.data.attribute,from:e.data.value,to:e.data2.value});break;case zi.ATOM_MOVE:n.push({operation:t.type,id:t.data.aid,position:{x:+t.data.d.x.toFixed(2),y:+t.data.d.y.toFixed(2)}});break;case zi.BOND_ADD:case zi.BOND_DELETE:n.push({operation:t.type,id:t.data.bid});break;case zi.FRAGMENT_ADD:case zi.FRAGMENT_DELETE:n.push({operation:t.type,id:t.frid});break;case zi.FRAGMENT_ADD_STEREO_ATOM:case zi.FRAGMENT_DELETE_STEREO_ATOM:n.push({operation:t.type,atomId:t.data.aid,fragId:t.data.frid});break;case zi.S_GROUP_ATOM_ADD:case zi.S_GROUP_ATOM_REMOVE:n.push({operation:t.type,atomId:t.data.aid,sGroupId:t.data.sgid});break;case zi.S_GROUP_CREATE:case zi.S_GROUP_DELETE:n.push({operation:t.type,type:t.data.type,sGroupId:t.data.sgid});break;case zi.RXN_ARROW_ADD:case zi.RXN_ARROW_DELETE:n.push({operation:t.type,id:t.data.id,mode:t.data.mode,position:t.data.pos.map((function(e){return{x:+e.x.toFixed(2),y:+e.y.toFixed(2)}}))});break;case zi.RXN_ARROW_RESIZE:n.push({operation:t.type,id:t.data.id});break;case zi.RXN_ARROW_MOVE:n.push({operation:t.type,id:t.data.id,position:{x:+t.data.d.x.toFixed(2),y:+t.data.d.y.toFixed(2)}});break;case zi.R_GROUP_FRAGMENT:n.push({operation:e.type,id:t.frid});break;case zi.SIMPLE_OBJECT_ADD:case zi.SIMPLE_OBJECT_DELETE:n.push({operation:t.type,id:t.data.id,mode:t.data.mode});break;case zi.SIMPLE_OBJECT_RESIZE:n.push({operation:t.type,id:t.data.id});break;case zi.SIMPLE_OBJECT_MOVE:n.push({operation:e.type,id:e.data.id,position:{x:+e.data.d.x.toFixed(2),y:+e.data.d.y.toFixed(2)}});break;default:n.push({operation:t.type})}})),t(n)}(e,t)};n.handler=r,this.event[e].add(r)}else this.event[e].add(t);return n}},{key:"unsubscribe",value:function(e,t){this.event[e].remove(t.handler)}},{key:"findItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=new Y(this.render.page2obj(e));return zX.item(this.render.ctab,r,t,n,this.render.options)}},{key:"findMerge",value:function(e,t){return zX.merge(this.render.ctab,e,t,this.render.options)}},{key:"explicitSelected",value:function(){var e=this.selection()||{},t=dJ.reduce((function(t,n){return t[n]=e[n]?e[n].slice():[],t}),{}),n=this.render.ctab.molecule;return t.bonds&&t.bonds.forEach((function(e){var r=n.bonds.get(e);t.atoms=t.atoms||[],t.atoms.indexOf(r.begin)<0&&t.atoms.push(r.begin),t.atoms.indexOf(r.end)<0&&t.atoms.push(r.end)})),t.atoms&&t.bonds&&n.bonds.forEach((function(e,n){t.bonds.indexOf(n)>=0&&t.atoms.indexOf(e.begin)>=0&&t.atoms.indexOf(e.end)>=0&&(t.bonds=t.bonds||[],t.bonds.push(n))})),t}},{key:"structSelected",value:function(){var e=this.render.ctab.molecule,t=this.explicitSelected(),n=e.clone(new ee(t.atoms),new ee(t.bonds),!0,null,new ee(t.simpleObjects),new ee(t.texts));return e.rxnArrows.forEach((function(e,r){-1!==t.rxnArrows.indexOf(r)&&n.rxnArrows.add(e.clone())})),e.rxnPluses.forEach((function(e,r){-1!==t.rxnPluses.indexOf(r)&&n.rxnPluses.add(e.clone())})),n.isReaction=e.isReaction&&e.isRxn(),n}},{key:"alignDescriptors",value:function(){this.selection(null);var e=function(e){var t=new ha;return t.addOp(new ro),t.perform(e)}(this.render.ctab);this.update(e),this.render.update(!0)}}]),e}();function yJ(e,t){e.render.setScrollOffset(0,0)}function bJ(e,t){var n=e.getVBoxObj(t||{});return Y.lc2(n.p0,.5,n.p1,.5)}function xJ(e,t,n){if(-1===pJ.indexOf(e.map))return!1;var r=null;if("merge"===e.map)return Object.keys(e.items).forEach((function(i){e.items[i].forEach((function(e){(r=n.ctab[i].get(e))&&r.setHover(t,n)}))})),!0;if("functionalGroups"===e.map&&(e.map="sgroups"),!(r=n.ctab[e.map].get(e.id)))return!0;if("sgroups"===e.map&&"DAT"===r.item.type||"sgroupData"===e.map){var i=n.ctab.sgroups.get(e.id);i&&i.setHover(t,n);var o=n.ctab.sgroupData.get(e.id);o&&o.setHover(t,n)}else r.setHover(t,n);return!0}var _J="ContextMenu-module_isHidden__eOjF4",wJ=function(){var e=CK().getKetcherInstance,t=(0,eu.useState)(!1),n=(0,M.Z)(t,2),o=n[0],a=n[1],s=(0,eu.useState)([]),u=(0,M.Z)(s,2),l=u[0],c=u[1];return(0,i.jsxs)(Nl,{id:"contextmenu",onShow:function(t){return function(t){var n=e().editor,r=n.struct(),i=n.selection();a(!1),c([]);var o,s=[],u=n.findItem({clientX:t.detail.position.x,clientY:t.detail.position.y},["sgroups","functionalGroups","atoms","bonds"]);if(u)switch(u.map){case"atoms":null!==(o=Se.findFunctionalGroupByAtom(r.functionalGroups,u.id))&&r.functionalGroups.forEach((function(e){e.relatedSGroupId===o&&!s.includes(e)&&s.push(e)}));break;case"bonds":null!==(o=Se.findFunctionalGroupByBond(r,r.functionalGroups,u.id))&&r.functionalGroups.forEach((function(e){e.relatedSGroupId===o&&!s.includes(e)&&s.push(e)}));break;case"sgroups":var l=r.sgroups.get(u.id);Se.isFunctionalGroup(l)&&r.functionalGroups.forEach((function(e){e.relatedSGroupId===(null===l||void 0===l?void 0:l.id)&&!s.includes(e)&&s.push(e)}));break;case"functionalGroups":var f=r.sgroups.get(u.id);Se.isFunctionalGroup(f)&&r.functionalGroups.forEach((function(e){e.relatedSGroupId===(null===f||void 0===f?void 0:f.id)&&!s.includes(e)&&s.push(e)}))}i&&i.atoms&&i.atoms.forEach((function(e){var t=Se.findFunctionalGroupByAtom(r.functionalGroups,e);null!==t&&r.functionalGroups.forEach((function(e){e.relatedSGroupId===t&&!s.includes(e)&&s.push(e)}))})),s.length&&(c(s),a(!0))}(t)},className:(0,tu.Z)((0,r.Z)({},_J,!o)),children:[(0,i.jsxs)(El,{onClick:function(){var t=e().editor,n=new ha,r=l[0].isExpanded;null===l||void 0===l||l.forEach((function(e){n.mergeWith(function(e,t,n){var r=new ha;Object.keys(n).forEach((function(e){r.addOp(new Xo(t,e,n[e]))}));var i=e.molecule.sgroups.get(t);return i.firstSgroupAtom&&delete i.firstSgroupAtom,me.getAtoms(e,i).forEach((function(t){r.mergeWith(Ya(e,t,e.atoms.get(t).a,!1))})),r.perform(e)}(t.render.ctab,e.relatedSGroupId,{expanded:!r}))})),t.update(n),a(!1),c([])},children:[l.length&&l[0].isExpanded?"Contract ":"Expand ","Abbreviation"]}),(0,i.jsx)(El,{divider:!0}),(0,i.jsx)(El,{onClick:function(){var t=e().editor,n=new ha;null===l||void 0===l||l.forEach((function(e){n.mergeWith(La(t.render.ctab,e.relatedSGroupId))})),t.update(n),a(!1),c([])},children:"Remove Abbreviation"})]})},SJ="StructEditor-module_spinnerOverlay__5H1IM",EJ="StructEditor-module_canvas__LLnzh",kJ="StructEditor-module_measureLog__B2wuy",OJ="StructEditor-module_visible__3eFNB",AJ="StructEditor-module_intermediateCanvas__fR3ws",CJ=["Tag","struct","tool","toolOpts","options","onInit","onSelectionChange","onElementEdit","onEnhancedStereoEdit","onQuickEdit","onBondEdit","onRgroupEdit","onSgroupEdit","onSdataEdit","onRemoveFG","onMessage","onAromatizeStruct","onDearomatizeStruct","onAttachEdit","indigoVerification","onCipChange","className","onConfirm","showAttachmentPoints"];function MJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MJ(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MJ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PJ(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function RJ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.struct,i=t.tool,o=t.toolOpts,a=t.options;r!==n.struct&&e.struct(r),i===n.tool&&o===n.toolOpts||(e.tool(i,o),o!==n.toolOpts&&e.event.message.dispatch({info:JSON.stringify(o)})),n.options&&a!==n.options&&e.options(a),Object.keys(e.event).forEach((function(r){var i="on".concat((0,F.upperFirst)(r));t[i]!==n[i]&&(n[i]&&e.event[r].remove(n[i]),t[i]&&e.event[r].add(t[i]))}))}var IJ,LJ,NJ,jJ,DJ,BJ=function(e){p(n,e);var t=PJ(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).editorRef=(0,eu.createRef)(),r.logRef=(0,eu.createRef)(),r}return(0,c.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.indigoVerification!==e.indigoVerification}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){RJ(this.editor,e,this.props)}},{key:"componentDidMount",value:function(){var e=this;this.editor=new gJ(this.editorRef.current,TJ({},this.props.options)),RJ(this.editor,this.props),this.props.onInit&&this.props.onInit(this.editor),this.editor.event.message.add((function(t){var n=e.logRef.current;if(t.info&&e.props.showAttachmentPoints){try{var r=JSON.parse(t.info);n.innerHTML="Atom Id: ".concat(r.atomid,", Bond Id: ").concat(r.bondid)}catch(i){n.innerHTML=t.info}n.classList.add(OJ)}else n.classList.remove(OJ)})),this.editor.event.message.dispatch({info:JSON.stringify(this.props.toolOpts)})}},{key:"componentWillUnmount",value:function(){!function(e,t){Object.keys(e.event).forEach((function(n){var r="on".concat((0,F.upperFirst)(n));t[r]&&e.event[n].remove(t[r])}))}(this.editor,this.props)}},{key:"render",value:function(){var e=this.props,t=e.Tag,n=void 0===t?"div":t;e.struct,e.tool,e.toolOpts,e.options,e.onInit,e.onSelectionChange,e.onElementEdit,e.onEnhancedStereoEdit,e.onQuickEdit,e.onBondEdit,e.onRgroupEdit,e.onSgroupEdit,e.onSdataEdit,e.onRemoveFG,e.onMessage,e.onAromatizeStruct,e.onDearomatizeStruct,e.onAttachEdit;var r=e.indigoVerification;e.onCipChange;var o=e.className;e.onConfirm,e.showAttachmentPoints;var a=(0,N.Z)(e,CJ);return(0,i.jsxs)(n,TJ(TJ({className:(0,tu.Z)(EJ,o),onMouseDown:function(e){return e.preventDefault()}},a),{},{children:[(0,i.jsxs)(Fl,{id:"contextmenu",attributes:{onClick:ml},holdToDisplay:-1,children:[(0,i.jsx)("div",{ref:this.editorRef,className:(0,tu.Z)(AJ),onMouseDown:function(e){return e.preventDefault()}}),(0,i.jsx)("div",{className:kJ,ref:this.logRef}),r&&(0,i.jsx)("div",{className:SJ,children:(0,i.jsx)(RX,{})})]}),(0,i.jsx)(wJ,{})]}))}}]),n}(eu.Component);function zJ(){return zJ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zJ.apply(this,arguments)}function FJ(e){return eu.createElement("svg",zJ({width:22,height:24,viewBox:"0 0 22 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),IJ||(IJ=eu.createElement("path",{fill:"transparent",d:"M0 0h21.503v24H0z"})),LJ||(LJ=eu.createElement("path",{d:"M13.507 18.936l-2.04-1.92c-.7-.659-1.403-1.317-2.108-1.983v3.097c0 .43.003.86.007 1.289 0 .049-.007.09-.007.126v2.04c0 .834 0 1.557.003 2.02l.278.163c.719.3 1.434.307 2.151.033l4.264-2.469c-.358-.326-1.395-1.31-2.548-2.396zM6.159 19.39v-1.091L6.163 2.23v-.002L1.26 5.059C.421 5.647.002 6.482.002 7.553c0 2.944.006 5.888-.002 8.831-.003 1.08.398 1.913 1.212 2.517l4.946 2.856v-2.318-.05z",fill:"#676767"})),NJ||(NJ=eu.createElement("path",{d:"M18.642 4.137l1.672.966c.785.58 1.187 1.385 1.188 2.41v8.974c0 1-.385 1.79-1.133 2.367l-1.423.822h-.004c-.097-.097-6.384-6.375-6.513-6.386.044-.044.56-.582 1.278-1.33L20.3 5.097l-1.658-.96z",fill:"url(#logo_svg__paint0_linear_5175_84899)"})),jJ||(jJ=eu.createElement("path",{d:"M17.335 3.383L11.849.216c-.718-.29-1.455-.29-2.219.011l-.27.139s0 10.346.041 11.106c.341-.346 7.808-7.96 7.934-8.09z",fill:"url(#logo_svg__paint1_linear_5175_84899)"})),DJ||(DJ=eu.createElement("defs",null,eu.createElement("linearGradient",{id:"logo_svg__paint0_linear_5175_84899",x1:19.854,y1:4.363,x2:11.579,y2:13.111,gradientUnits:"userSpaceOnUse"},eu.createElement("stop",{stopColor:"#3BC2D7"}),eu.createElement("stop",{offset:.74,stopColor:"#1D9DB1"})),eu.createElement("linearGradient",{id:"logo_svg__paint1_linear_5175_84899",x1:19.854,y1:4.363,x2:11.579,y2:13.111,gradientUnits:"userSpaceOnUse"},eu.createElement("stop",{stopColor:"#3BC2D7"}),eu.createElement("stop",{offset:.74,stopColor:"#1D9DB1"})))))}var VJ={"button-common-styles":"About-module_button-common-styles__XmSbT",scrollbar:"About-module_scrollbar__4-AeI",dialog_body:"About-module_dialog_body__ebQu-",about:"About-module_about__ZVesh",body:"About-module_body__8VOc3",versionName:"About-module_versionName__1gqJr",firstline:"About-module_firstline__h5XMW",links:"About-module_links__sMpyx",infoLinks:"About-module_infoLinks__4-Tot",indigoVersion:"About-module_indigoVersion__WKFlu",headerContent:"About-module_headerContent__YclOx",title:"About-module_title__k-6Zg",indigoFirstLine:"About-module_indigoFirstLine__-86rb",okButton:"About-module_okButton__FMcEk"};var UJ=(0,nu.$j)((function(e){return{date:e.options.app.buildDate.replace("T","; "),indigoVersion:e.options.app.indigoVersion,indigoMachine:e.options.app.indigoMachine,feedbackLink:"http://lifescience.opensource.epam.com/ketcher/#feedback",overviewLink:"https://lifescience.opensource.epam.com/ketcher/index.html",lifeScienciesLink:"http://lifescience.opensource.epam.com/",version:e.options.app.version}}),(function(e){return{onOk:function(t){e({type:"MODAL_CLOSE"})}}}))((function(e){var t=e.indigoVersion&&e.indigoVersion.split(".r");return(0,i.jsxs)(TX,{className:"".concat(VJ.about," ").concat(VJ.dialog_body),params:e,buttons:[(0,i.jsx)("button",{onClick:e.onOk,className:VJ.okButton,children:"Ok"},"ok")],children:[(0,i.jsx)("div",{className:VJ.headerContent,children:(0,i.jsxs)("a",{href:e.overviewLink,target:"_blank",rel:"noopener noreferrer",children:[(0,i.jsx)(FJ,{}),(0,i.jsx)("span",{className:VJ.title,children:"Ketcher"})]})}),(0,i.jsx)("div",{className:VJ.body,children:(0,i.jsx)("div",{className:VJ.verionsInfo,children:(0,i.jsxs)("dl",{className:VJ.ketcherVersionInfo,children:[(0,i.jsx)("dt",{children:(0,i.jsxs)("a",{href:e.overviewLink,target:"_blank",rel:"noopener noreferrer",children:["Version ",e.version]})}),(0,i.jsxs)("dd",{children:["Build at ",(0,i.jsx)("time",{children:e.date})]}),(0,i.jsxs)("div",{className:VJ.infoLinks,children:[(0,i.jsx)("dt",{children:(0,i.jsx)("a",{href:e.feedbackLink,target:"_blank",rel:"noopener noreferrer",children:"Feedback"})}),(0,i.jsx)("dt",{children:(0,i.jsx)("a",{href:e.lifeScienciesLink,target:"_blank",rel:"noopener noreferrer",children:"Epam Life Sciencies"})})]}),(0,i.jsx)("br",{}),(0,i.jsxs)("div",{class:VJ.indigoVersion,children:[(0,i.jsxs)("a",{href:"http://lifescience.opensource.epam.com/indigo/",target:"_blank",rel:"noopener noreferrer",children:[" ","Indigo Toolkit"]}),e.indigoMachine&&(0,i.jsx)("div",{children:e.indigoMachine})]}),(0,i.jsx)("div",{children:e.indigoVersion?(0,i.jsxs)(eu.Fragment,{children:[(0,i.jsxs)("dd",{children:["Version ",t[0]]}),t[1]&&(0,i.jsxs)("dd",{children:["Build ",t[1]]})]}):(0,i.jsx)("p",{children:"Standalone"})})]})})})]})})),ZJ={fieldSetLabel:"input-module_fieldSetLabel__DxKa5",checkbox:"input-module_checkbox__CowSc",radioButton:"input-module_radioButton__2eHO0",slider:"input-module_slider__-Xsc0",select:"input-module_select__GhgBs",input:"input-module_input__WzHgL"},HJ=["schema","value","onChange","type"],GJ=["schema","value","onChange"],WJ=["schema","value","onChange"],qJ=["schema","value","selected","onSelect","type","checked"],KJ=["value","onChange","name"],YJ=["children","onChange","style"],XJ=["children","onChange"];function $J(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function JJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JJ(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JJ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eQ(e){e.schema;var t=e.value,n=void 0===t?"":t,r=e.onChange,o=e.type,a=void 0===o?"text":o,s=(0,N.Z)(e,HJ);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",QJ({type:a,value:n,onInput:r,onChange:r,className:ZJ.input},s)),"checkbox"===a&&(0,i.jsx)("span",{className:ZJ.checkbox}),"radio"===a&&(0,i.jsx)("span",{className:ZJ.radioButton})]})}function tQ(e){e.schema;var t=e.value,n=e.onChange,r=(0,N.Z)(e,GJ);return(0,i.jsx)("textarea",QJ({value:t,onInput:n},r))}function nQ(e){e.schema;var t=e.value,n=void 0===t?"":t,r=e.onChange,o=(0,N.Z)(e,WJ);return(0,i.jsxs)("div",{className:ZJ.fieldSetItem,children:[(0,i.jsx)("input",QJ({type:"checkbox",checked:n,onClick:r,onChange:r},o)),(0,i.jsx)("span",{className:ZJ.checkbox})]})}function rQ(e){var t=e.schema,n=e.value,r=e.name,o=e.onSelect,a=e.className,s=e.multiple,u=void 0!==s&&s;return(0,i.jsx)("select",{onChange:o,value:n,name:r,multiple:u,className:(0,tu.Z)(ZJ.select,a),children:aQ(t,(function(e,t){return(0,i.jsx)("option",{value:t,children:e},t)}))})}function iQ(e){var t=e.schema,n=e.value,r=e.selected,o=e.onSelect,a=e.type,s=void 0===a?"radio":a,u=e.checked,l=(0,N.Z)(e,qJ);return(0,i.jsx)("fieldset",{onClick:o,className:"radio",children:aQ(t,(function(e,t){return(0,i.jsx)("li",{className:ZJ.fieldSetItem,children:(0,i.jsxs)("label",{className:ZJ.fieldSetLabel,children:[(0,i.jsx)("input",QJ({type:s,defaultChecked:r(t,"radio"===s?u:n),value:"object"!==v(t)&&t},l)),"checkbox"===s&&(0,i.jsx)("span",{className:ZJ.checkbox}),"radio"===s&&(0,i.jsx)("span",{className:ZJ.radioButton}),e]})},e)}))})}function oQ(e){var t=e.value,n=e.onChange,r=e.name,o=(0,N.Z)(e,KJ);return(0,i.jsxs)("div",{className:ZJ.slider,children:[(0,i.jsx)("input",QJ({type:"checkbox",checked:t,onClick:n,onChange:n,name:r},o)),(0,i.jsx)("span",{})]},r)}function aQ(e,t){var n=Array.isArray(e);if(!n&&e.items&&(e=e.items),"function"===typeof t)return(n?e:e.enum).map((function(r,i){var o=n?r.title:e.enumNames&&e.enumNames[i];return t(void 0!==o?o:r,r&&void 0!==r.value?r.value:r)}));if(!n)return e.enum[t];var r=e[t];return void 0!==r.value?r.value:r}function sQ(e,t){var n=t.schema,r=t.multiple,i=t.onChange;return n&&(n.enum||n.items||Array.isArray(n))&&"string"!==n.type?r||"array"===n.type?function(e,t,n){return{multiple:!0,selected:function(e,t){return t&&t.indexOf(e)>=0},onSelect:function(r,i){if(e.val){var o=e.val(r,t);void 0!==o&&n(o)}else{var a=i?i.indexOf(r):-1;n(a<0?i?[r].concat(k(i)):[r]:[].concat(k(i.slice(0,a)),k(i.slice(a+1))))}}}}(e,n,i):function(e,t,n){return{selected:function(e,t){return t===e},onSelect:function(r){var i=e.val?e.val(r,t):r;void 0!==i&&n(i)}}}(e,n,i):function(e,t,n){var r={};return t&&("number"!==t.type&&"integer"!==t.type||(r={type:"text"})),QJ({onChange:function(r){var i=e.val?e.val(r,t):r;n(i)}},r)}(e,n,i)}eQ.val=function(e,t){var n=e.target,r="number"===n.type||"range"===n.type||t&&("number"===t.type||"integer"===t.type),i=r?n.value.replace(/,/g,"."):n.value;return r&&!isNaN(i-0)?i-0:i},tQ.val=function(e){return e.target.value},nQ.val=function(e){return e.stopPropagation(),!!e.target.checked},rQ.val=function(e,t){var n=e.target;return n.multiple?[].reduce.call(n.options,(function(e,n,r){return n.selected?[aQ(t,r)].concat(k(e)):e}),[]):aQ(t,n.selectedIndex)},iQ.val=function(e,t){var n=e.target;if("INPUT"===e.target.tagName){var r=n.parentNode.parentNode.parentNode,i=[].reduce.call(r.querySelectorAll("input"),(function(e,n,r){return n.checked?[aQ(t,r)].concat(k(e)):e}),[]);return"radio"===n.type?i[0]:i}e.stopPropagation()},oQ.val=function(e){return e.stopPropagation(),!!e.target.checked};var uQ=function(e){p(n,e);var t=$J(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"shouldComponentUpdate",value:function(e){e.children,e.onChange,e.style;var t=(0,N.Z)(e,YJ);return function(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}((0,F.omit)(this.props,["children","onChange","style"]),t)}},{key:"render",value:function(){var e=this.props.component;this.component=e||function(e){var t=e.schema,n=e.type,r=e.multiple;return"boolean"===(null===t||void 0===t?void 0:t.type)&&"slider"===(null===t||void 0===t?void 0:t.description)?oQ:t&&(t.enum||t.items||Array.isArray(t))?r||"array"===t.type?"checkbox"===n?iQ:rQ:"radio"===n?iQ:rQ:"checkbox"===n||t&&"boolean"===t.type?nQ:"textarea"===n?tQ:eQ}(this.props),this.ctrl=sQ(this.component,this.props);var t=this.props;t.children,t.onChange;var n=(0,N.Z)(t,XJ),r=this.component;return(0,i.jsx)(r,QJ(QJ({},this.ctrl),n))}}]),n}(eu.Component),lQ="form-module_dataError__IXK1h",cQ=function(e){var t=e.className;return(0,i.jsx)($W,{name:"chevron",className:(0,tu.Z)(t,SX.chevronIcon)})},fQ=function(e){var t,n=e.className,r=e.value,o=e.onChange,a=e.multiple,s=void 0!==a&&a,u=e.disabled,l=e.options,c=(0,eu.useState)(),f=(0,M.Z)(c,2),h=f[0],d=f[1];(0,eu.useEffect)((function(){var e;return l&&(e=l.find((function(e){return e.value===r}))),d(e)}),[l,r]);return(0,i.jsx)(Hl.Z,{className:(0,tu.Z)(SX.selectContainer,n),value:null!==(t=null===h||void 0===h?void 0:h.value)&&void 0!==t?t:"",onChange:function(e){o(e.target.value)},multiple:s,disabled:u,MenuProps:{className:SX.dropdownList},IconComponent:cQ,children:l&&l.map((function(e){return(0,i.jsx)(Gl.Z,{value:e.value,disableRipple:!0,children:e.label},e.value)}))})};function hQ(e){return new Promise((function(t,r){if(n.g.FileReader)t(dQ);else if(n.g.ActiveXObject)try{var i=new ActiveXObject("Scripting.FileSystemObject");t((function(e){return Promise.resolve(function(e,t){var n=e.OpenTextFile(t.name,1),r=n.ReadAll();return n.Close(),r}(i,e))}))}catch(o){r(o)}else e?t(e.then((function(){throw Error("Server doesn't still support echo method")}))):r(new Error("Your browser does not support opening files locally"))}))}function dQ(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){var n=r.result;e.msClose&&e.msClose(),t(n)},r.onerror=function(e){n(e)},r.readAsText(e,"UTF-8")}))}var pQ={Alpha:"A",alpha:"\u03b1",Beta:"B",beta:"\u03b2",Gamma:"\u0413",gamma:"\u03b3"},vQ=new RegExp("\\b"+Object.keys(pQ).join("\\b|\\b")+"\\b","g");function mQ(e){return e.replace(vQ,(function(e){return pQ[e]}))}var gQ=function(e){return e.enum.reduce((function(t,n,r){var i,o;return t.push({value:n,label:null!==(i=null===e||void 0===e||null===(o=e.enumNames)||void 0===o?void 0:o[r])&&void 0!==i?i:n}),t}),[])},yQ=["schema","result","customValid"],bQ=["labelPos","title","children"],xQ=["name","onChange","component","labelPos","className"],_Q=["dataError"],wQ=["title","name","schema"];function SQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SQ(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kQ(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var OQ=function(e){p(n,e);var t=kQ(n);function n(e){var r;(0,l.Z)(this,n);var i=(r=t.call(this,e)).props,o=i.onUpdate,a=i.schema,s=i.init;if(r.schema=PQ(a,e),s){var u=r.schema.serialize(s),c=u.valid,f=IQ(u.errors);o(EQ(EQ({},s),{},{init:!0}),c,f)}return r}return(0,c.Z)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.schema,r=t.result;t.customValid;var i=(0,N.Z)(t,yQ);n.key&&n.key!==e.schema.key&&(this.schema=PQ(n,i),this.schema.serialize(r),this.updateState(r))}},{key:"updateState",value:function(e){var t=this.props.onUpdate,n=this.schema.serialize(e);t(n.instance,n.valid,IQ(n.errors))}},{key:"field",value:function(e,t){var n=this,i=this.props,o=i.result,a=i.errors,s=o[e];return{dataError:a&&a[e],value:s,onChange:function(i){var o=Object.assign({},n.props.result,(0,r.Z)({},e,i));n.updateState(o),t&&t(i)}}}},{key:"render",value:function(){var e=this.props,t=e.schema,n=e.children;return(0,i.jsx)("form",{children:(0,i.jsx)(Hj.Provider,{value:{schema:t,stateStore:this},children:n})})}}]),n}(eu.Component),AQ=(0,nu.$j)(null,(function(e){return{onUpdate:function(t,n,r){e(FD({result:t,valid:n,errors:r}))}}}))(OQ);function CQ(e){var t=e.labelPos,n=e.title,r=e.children,o=(0,N.Z)(e,bQ);return(0,i.jsxs)("label",EQ(EQ({},o),{},{children:[n&&"after"!==t?(0,i.jsx)("span",{children:n}):"",r,n&&"after"===t?(0,i.jsx)("span",{children:n}):""]}))}function MQ(e){var t=e.name,n=e.onChange,o=e.component,a=e.labelPos,s=e.className,u=(0,N.Z)(e,xQ),l=AK(),c=l.schema,f=l.stateStore,h=u.schema||c.properties[t],d=f.field(t,n),p=d.dataError,v=(0,N.Z)(d,_Q),m=o,g=o?(0,i.jsx)(m,EQ(EQ({name:t,schema:h},v),u)):(0,i.jsx)(uQ,EQ(EQ({name:t,schema:h},v),u));return!1===a?g:(0,i.jsx)(CQ,{className:(0,tu.Z)((0,r.Z)({},lQ,p),s),error:p,title:u.title||h.title,labelPos:a,children:g})}var TQ=function(e){var t=e.title,n=e.name,r=e.schema,o=(0,N.Z)(e,wQ),a={title:t,enum:[],enumNames:[]};return Object.keys(r).forEach((function(e){a.enum.push(e),a.enumNames.push(r[e].title||e)})),(0,i.jsx)(MQ,EQ(EQ({name:n,options:gQ(a),title:t},o),{},{component:fQ}))};function PQ(e,t){var n=t.customValid,r=t.serialize,i=void 0===r?{}:r,o=(t.deserialize,new(L())({allErrors:!0,verbose:!0,strictSchema:!1}));n&&((e=Object.assign({},e)).properties=Object.keys(n).reduce((function(e,t){return o.addFormat(n[t].name,n[t]),e[t]=EQ({format:t},e[t]),e}),e.properties));var a=o.compile(e);return{key:e.key||"",serialize:function(t){return a(t),{instance:RQ(i,t,e),valid:a(t),errors:a.errors||[]}},deserialize:function(e){return a(e),e}}}function RQ(e,t,n){var r={};return"object"===v(t)&&n.properties?(Object.keys(n.properties).forEach((function(n){n in t&&(r[n]=t[e[n]]||t[n])})),r):void 0!==t?t:n.default}function IQ(e){var t,n={};return e.forEach((function(e){t=e.instancePath.slice(1),n[t]||(n[t]=function(e){return e.parentSchema.invalidMessage?"function"===typeof e.parentSchema.invalidMessage?e.parentSchema.invalidMessage(e.data):e.parentSchema.invalidMessage:e.message}(e))})),n}var LQ={colorPickerInput:"ColorPicker-module_colorPickerInput__voi2r",selectedInput:"ColorPicker-module_selectedInput__Ykcjd",colorPickerWrap:"ColorPicker-module_colorPickerWrap__IAQVo",withPalette:"ColorPicker-module_withPalette__gTwNu",colorPicker:"ColorPicker-module_colorPicker__Uz3PM",colorPickerBtn:"ColorPicker-module_colorPickerBtn__nr6ph",colorPickerPreview:"ColorPicker-module_colorPickerPreview__-Rf-i",colorPickerOverlay:"ColorPicker-module_colorPickerOverlay__WzC-w",colorContainer:"ColorPicker-module_colorContainer__ib5up",hex:"ColorPicker-module_hex__mE9my",presetColors:"ColorPicker-module_presetColors__J-ysq",chooseColor:"ColorPicker-module_chooseColor__fdzt8",clicked:"ColorPicker-module_clicked__8BNoN",expandIcon:"ColorPicker-module_expandIcon__oH4ka",turnedIcon:"ColorPicker-module_turnedIcon__-zaq-",colorPickerWrapper:"ColorPicker-module_colorPickerWrapper__GJm87"},NQ=["#FF4545","#FFAD31","#68D442","#3ACACC","#4434FF","#9C9C9C","#000000"],jQ=function(e){var t,n,o=(0,eu.useState)(!1),a=(0,M.Z)(o,2),s=a[0],u=a[1],l=(0,eu.useState)(!1),c=(0,M.Z)(l,2),f=c[0],h=c[1],d=e.onChange,p=e.value,v=(0,eu.useCallback)((function(e){d(e)}),[d]),m=(0,eu.useCallback)((function(e,t){var n;return function(r){n||(e(r),n=!0,setTimeout((function(){return n=!1}),t))}}),[]),g=(0,eu.useCallback)(m((function(e){e.preventDefault(),u((function(e){return!e})),h(!1)}),200),[]);return(0,i.jsxs)("div",{className:LQ.colorPickerWrapper,"data-testid":"color-picker-field",onClick:function(e){return e.preventDefault()},children:[(0,i.jsxs)("div",{className:(0,tu.Z)((t={},(0,r.Z)(t,LQ.colorPickerInput,!0),(0,r.Z)(t,LQ.selectedInput,s),t)),onClick:g,children:[(0,i.jsx)("div",{className:LQ.colorPickerPreview,"data-testid":"color-picker-preview",style:{backgroundColor:p}}),(0,i.jsx)($W,{className:(0,tu.Z)((n={},(0,r.Z)(n,LQ.expandIcon,!0),(0,r.Z)(n,LQ.turnedIcon,!s),n)),name:"chevron"})]}),s&&(0,i.jsxs)("div",{className:(0,tu.Z)(LQ.colorPickerWrap,f&&LQ.withPalette),onBlur:function(e){e.currentTarget.contains(e.relatedTarget)||g(e)},"data-testid":"color-picker-preset",children:[(0,i.jsxs)("div",{className:LQ.presetColors,children:[(0,i.jsx)("button",{className:(0,tu.Z)(LQ.chooseColor,f&&LQ.clicked),onClick:function(){h(!0)},autoFocus:!0,"data-testid":"color-picker-btn"}),NQ.map((function(e){return(0,i.jsx)("button",{onClick:function(){return function(e){v(e)}(e)},style:{backgroundColor:e},className:LQ.presetColor},e)}))]}),f&&(0,i.jsxs)("div",{className:LQ.colorPicker,children:[(0,i.jsx)(xc,{color:p,onChange:v}),(0,i.jsxs)("div",{className:LQ.colorContainer,children:[(0,i.jsx)("span",{className:LQ.hex,children:"HEX"}),(0,i.jsx)(Ec,{"data-testid":"color-picker-input",color:p,onChange:v})]})]})]})]})},DQ="measure-input-module_measureInput__uZQ-j",BQ="measure-input-module_select__1ZFmv",zQ=["schema","value","onChange","name"];function FQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FQ(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var UQ=gQ({enum:["cm","px","pt","inch"]}),ZQ=function(e){var t=e.schema,n=e.value,r=e.onChange,o=e.name,a=(0,N.Z)(e,zQ),s=(0,eu.useState)("px"),u=(0,M.Z)(s,2),l=u[0],c=u[1],f=(0,eu.useState)(n||t.default),h=(0,M.Z)(f,2),d=h[0],p=h[1];(0,eu.useEffect)((function(){"px"===l&&(null===d||void 0===d?void 0:d.toFixed())-0!==n&&(c("px"),p(n))}),[]);var v=function(){var e=GQ(n,"px",l);p(e)};(0,eu.useEffect)((function(){v()}),[n,l,v]);var m=t||t.properties[o];return(0,i.jsxs)("div",VQ(VQ({className:DQ},a),{},{children:[(0,i.jsx)("span",{children:a.title||m.title}),(0,i.jsxs)("div",{style:{display:"flex"},children:[(0,i.jsx)(uQ,{schema:t,step:"px"===l||"pt"===l?"1":"0.001",value:d,onChange:function(e){var t=GQ(e,l,"px");p(e),r(t)}}),(0,i.jsx)(fQ,{onChange:function(e){p((function(t){GQ(t,l,e)})),c(e)},options:UQ,value:l,className:BQ})]})]}))},HQ={px:1,cm:37.795278,pt:1.333333,inch:96};function GQ(e,t,n){return!e&&0!==e||isNaN(e)?null:"px"===n||"pt"===n?(e*HQ[t]/HQ[n]).toFixed()-0:(e*HQ[t]/HQ[n]).toFixed(3)-0}var WQ="buttons-module_openButton__wErm9",qQ=["children","type","server","className"];function KQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KQ(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function XQ(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var $Q=function(e){p(n,e);var t=XQ(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).state={},e.server&&hQ(e.server).then((function(e){r.setState({opener:e})})),r}return(0,c.Z)(n,[{key:"open",value:function(e){var t=e.target.files,n=function(){return null},r=this.props,i=r.onLoad,o=void 0===i?n:i,a=r.onError,s=void 0===a?n:a;this.state.opener&&t.length?this.state.opener(t[0]).then(o,s):t.length&&o(t[0]),e.target.value=null,e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.type;t.server;var o=t.className,a=(0,N.Z)(t,qQ);return(0,i.jsxs)("button",YQ(YQ({onClick:function(){return e.btn.click()},className:(0,tu.Z)(WQ,o)},a),{},{children:[(0,i.jsx)("input",{onChange:function(t){return e.open(t)},accept:r,type:"file",ref:function(t){e.btn=t}}),n]}))}}]),n}(eu.Component);function JQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JQ(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var e0=function(e){var t=function(){return null},n=e.server,r=e.filename,o=void 0===r?"unnamed":r,a=e.outputFormat,s=e.data,u=e.type,l=e.mode,c=void 0===l?"saveFile":l,f=e.onSave,h=void 0===f?t:f,d=e.onError,p=void 0===d?t:d,v=e.className,m=CK().getKetcherInstance,g=function(){if(s)try{t0(n).then((function(e){e(s,o,u),h()}))}catch(e){p(e)}},y=function(){m().generateImage(s,{outputFormat:a}).then((function(e){(0,kc.saveAs)(e,"".concat(o,".").concat(a)),h()})).catch((function(e){p(e)}))};return(0,i.jsx)("button",QQ(QQ({className:v,onClick:function(e){!function(e){e.preventDefault(),"saveImage"===c?y():g()}(e)}},e),{},{children:e.children}))},t0=function(e){return new Promise((function(t,r){n.g.Blob&&kc.saveAs?t((function(e,t,n){var r=new Blob([e],{type:n});(0,kc.saveAs)(r,t)})):e?t(e.then((function(){throw Error("Server doesn't still support echo method")}))):r(new Error("Your browser does not support opening files locally"))}))},n0="Accordion-module_accordionWrapper__RKk00",r0="Accordion-module_expandIcon__ncUKv",i0="Accordion-module_turnedIcon__v1sCA",o0="Accordion-module_accordionSummaryWrapper__roIRd",a0="Accordion-module_accordionSummary__1Gq0d",s0="Accordion-module_accordionDetailsWrapper__fnSnc",u0="Accordion-module_hiddenAccordion__WZFcJ",l0="Accordion-module_accordionDetails__g2RM0",c0="Accordion-module_groupIcon__1g1lx",f0="Accordion-module_groupLabel__23y4U",h0="Accordion-module_changeMarker__UPtGx",d0=function(e){var t=e.tabs,n=e.className,o=e.changedGroups,a=(0,eu.useState)(["General"]),s=(0,M.Z)(a,2),u=s[0],l=s[1];return(0,i.jsx)("div",{className:(0,tu.Z)(n0,n),children:t.map((function(e){var t,n,a,s=e.label,c=e.content,f=e.key,h=u.includes(s);return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{onClick:(a=s,function(){var e=!u.includes(a);l(e?[].concat(k(u),[a]):k(u).filter((function(e){return e!==a})))}),className:o0,children:(0,i.jsxs)("div",{className:a0,children:[(0,i.jsx)($W,{className:(0,tu.Z)((t={},(0,r.Z)(t,r0,!0),(0,r.Z)(t,i0,!h),t)),name:"chevron"}),(0,i.jsxs)("div",{className:f0,children:[(0,i.jsx)($W,{name:"elements-group",className:c0}),(0,i.jsx)("span",{children:s})]}),o.has(s)&&(0,i.jsx)("span",{className:h0})]})}),(0,i.jsx)("div",{className:(0,tu.Z)((n={},(0,r.Z)(n,s0,!0),(0,r.Z)(n,u0,!h),n)),children:(0,i.jsx)("div",{className:l0,children:c})})]},f)}))})},p0=["Arial","Arial Black","Comic Sans MS","Courier New","Georgia","Impact","Charcoal","Lucida Console","Monaco","Palatino Linotype","Book Antiqua","Palatino","Tahoma","Geneva","Times New Roman","Times","Verdana","Symbol","MS Serif","MS Sans Serif","New York","Droid Sans","Droid Serif","Droid Sans Mono","Roboto"];function v0(e){var t=(0,eu.useState)(null),n=(0,M.Z)(t,2),r=n[0],o=n[1],a=e.value,s=e.onChange,u=(0,eu.useCallback)((function(e){s(e)}),[s]);return(0,eu.useEffect)((function(){var e=!0;return function(){var e=p0.map((function(e){return new(Ac())(e).check().then((function(){return e}),(function(){return null}))}));return Promise.all(e)}().then((function(t){var n=t.filter((function(e){return null!==e})).map((function(e){return{value:"30px ".concat(e),label:e}}));e&&o(n)})),function(){return e=!1}}),[]),(0,i.jsx)(fQ,{onChange:u,value:a,disabled:null===r,options:r})}var m0={headerContent:"Settings-module_headerContent__wBYFf",title:"Settings-module_title__a6mod",button:"Settings-module_button__VZ2w7",accordion:"Settings-module_accordion__1uSYy",settings:"Settings-module_settings__Z5btc"},g0={resetToSelect:"General",rotationStep:"General",showValenceWarnings:"General",atomColoring:"General",font:"General",fontsz:"General",fontszsub:"General",showStereoFlags:"Stereochemistry",stereoLabelStyle:"Stereochemistry",colorOfAbsoluteCenters:"Stereochemistry",colorOfAndCenters:"Stereochemistry",colorOfOrCenters:"Stereochemistry",colorStereogenicCenters:"Stereochemistry",autoFadeOfStereoLabels:"Stereochemistry",absFlagLabel:"Stereochemistry",andFlagLabel:"Stereochemistry",orFlagLabel:"Stereochemistry",mixedFlagLabel:"Stereochemistry",carbonExplicitly:"Atoms",showCharge:"Atoms",showValence:"Atoms",showHydrogenLabels:"Atoms",aromaticCircle:"Bonds",doubleBondWidth:"Bonds",bondThickness:"Bonds",stereoBondWidth:"Bonds","smart-layout":"Server","ignore-stereochemistry-errors":"Server","mass-skip-error-on-pseudoatoms":"Server","gross-formula-add-rsites":"Server","gross-formula-add-isotopes":"Server",miewMode:"3D Viewer",miewTheme:"3D Viewer",miewAtomLabel:"3D Viewer",showAtomIds:"Options for Debugging",showBondIds:"Options for Debugging",showHalfBondIds:"Options for Debugging",showLoopIds:"Options for Debugging"},y0=["initState","formState","server","onOpenFile","onReset","appOpts"];function b0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b0(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b0(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _0=pD(),w0=function(e){var t=e.server,n=e.onOpenFile,r=e.onReset,o=e.formState,a=e.initState;return(0,i.jsxs)("div",{className:m0.headerContent,children:[(0,i.jsx)("span",{className:m0.title,children:" Settings"}),(0,i.jsx)($Q,{title:"Open from File",server:t,onLoad:n,className:m0.button,children:(0,i.jsx)($W,{name:"open-1"})},"settings"),(0,i.jsx)(e0,{title:"Save to File",data:JSON.stringify(o.result),filename:"ketcher-settings",className:m0.button,children:(0,i.jsx)($W,{name:"save-1"})},"ketcher-settings"),(0,i.jsx)("button",{title:"Reset",onClick:r,className:m0.button,disabled:o.result.init?(0,R.isEqual)(_0,a):(0,R.isEqual)(_0,o.result),children:(0,i.jsx)($W,{name:"reset"})},"settings-button")]})},S0=dD.properties,E0=(0,nu.$j)((function(e){return{server:e.options.app.server?e.server:null,appOpts:e.options.app,initState:e.options.settings,formState:e.modal.form}}),(function(e,t){return{onOpenFile:function(t){try{e(FD({result:JSON.parse(t)}))}catch(n){}},onReset:function(){return e({type:"UPDATE_FORM",data:{result:pD(),valid:!0,errors:{}}})},onOk:function(n){var r;e((yD("ketcher-opts",r=n),{type:"SAVE_SETTINGS",data:r})),t.onOk(n)}}}))((function(e){var t=e.initState,n=e.formState,r=e.server,o=e.onOpenFile,a=e.onReset,s=e.appOpts,u=(0,N.Z)(e,y0),l=(0,eu.useState)(new Set),c=(0,M.Z)(l,2),f=c[0],h=c[1];(0,eu.useEffect)((function(){var e=new Set;for(var r in t)if(t[r]!==n.result[r]){var i=g0[r];e.add(i)}h(e)}),[t,n.result]);var d=[{key:"general",label:"General",content:(0,i.jsxs)("fieldset",{children:[(0,i.jsx)(MQ,{name:"resetToSelect",component:fQ,options:gQ(null===S0||void 0===S0?void 0:S0.resetToSelect)}),(0,i.jsx)(MQ,{name:"rotationStep"}),(0,i.jsx)(MQ,{name:"showValenceWarnings"}),(0,i.jsx)(MQ,{name:"atomColoring"}),(0,i.jsx)(MQ,{name:"font",component:v0}),(0,i.jsx)(MQ,{name:"fontsz",component:ZQ,labelPos:!1}),(0,i.jsx)(MQ,{name:"fontszsub",component:ZQ,labelPos:!1})]})},{key:"stereo",label:"Stereochemistry",content:(0,i.jsxs)("fieldset",{children:[(0,i.jsx)(MQ,{name:"showStereoFlags"}),(0,i.jsx)(MQ,{name:"stereoLabelStyle",component:fQ,options:gQ(null===S0||void 0===S0?void 0:S0.stereoLabelStyle)}),(0,i.jsx)(MQ,{name:"colorOfAbsoluteCenters",component:jQ}),(0,i.jsx)(MQ,{name:"colorOfAndCenters",component:jQ}),(0,i.jsx)(MQ,{name:"colorOfOrCenters",component:jQ}),(0,i.jsx)(MQ,{name:"colorStereogenicCenters",component:fQ,options:gQ(null===S0||void 0===S0?void 0:S0.colorStereogenicCenters)}),(0,i.jsx)(MQ,{name:"autoFadeOfStereoLabels"}),(0,i.jsx)(MQ,{name:"absFlagLabel"}),(0,i.jsx)(MQ,{name:"andFlagLabel"}),(0,i.jsx)(MQ,{name:"orFlagLabel"}),(0,i.jsx)(MQ,{name:"mixedFlagLabel"})]})},{key:"atoms",label:"Atoms",content:(0,i.jsxs)("fieldset",{children:[(0,i.jsx)(MQ,{name:"carbonExplicitly"}),(0,i.jsx)(MQ,{name:"showCharge"}),(0,i.jsx)(MQ,{name:"showValence"}),(0,i.jsx)(MQ,{name:"showHydrogenLabels",component:fQ,options:gQ(null===S0||void 0===S0?void 0:S0.showHydrogenLabels)})]})},{key:"bonds",label:"Bonds",content:(0,i.jsxs)("fieldset",{children:[(0,i.jsx)(MQ,{name:"aromaticCircle"}),(0,i.jsx)(MQ,{name:"doubleBondWidth",component:ZQ,labelPos:!1}),(0,i.jsx)(MQ,{name:"bondThickness",component:ZQ,labelPos:!1}),(0,i.jsx)(MQ,{name:"stereoBondWidth",component:ZQ,labelPos:!1})]})},{key:"server",label:"Server",content:(0,i.jsxs)("fieldset",{disabled:!s.server,children:[(0,i.jsx)(MQ,{name:"smart-layout"}),(0,i.jsx)(MQ,{name:"ignore-stereochemistry-errors"}),(0,i.jsx)(MQ,{name:"mass-skip-error-on-pseudoatoms"}),(0,i.jsx)(MQ,{name:"gross-formula-add-rsites"}),(0,i.jsx)(MQ,{name:"gross-formula-add-isotopes"})]})},{key:"3dviewer",label:"3D Viewer",content:(0,i.jsxs)("fieldset",{className:m0.viewer,children:[(0,i.jsx)(MQ,{name:"miewMode",component:fQ,options:gQ(null===S0||void 0===S0?void 0:S0.miewMode)}),(0,i.jsx)(MQ,{name:"miewTheme",component:fQ,options:gQ(null===S0||void 0===S0?void 0:S0.miewTheme)}),(0,i.jsx)(MQ,{name:"miewAtomLabel",component:fQ,options:gQ(null===S0||void 0===S0?void 0:S0.miewAtomLabel)})]})},{key:"debugging",label:"Options for Debugging",content:(0,i.jsxs)("fieldset",{children:[(0,i.jsx)(MQ,{name:"showAtomIds"}),(0,i.jsx)(MQ,{name:"showBondIds"}),(0,i.jsx)(MQ,{name:"showHalfBondIds"}),(0,i.jsx)(MQ,{name:"showLoopIds"})]})}];return(0,i.jsx)(TX,{className:m0.settings,result:function(){return n.result},valid:function(){return n.valid},params:u,buttonsNameMap:{OK:"Apply"},buttons:["Cancel","OK"],withDivider:!0,needMargin:!1,headerContent:(0,i.jsx)(w0,{server:r,onOpenFile:o,onReset:a,formState:n,initState:t}),children:(0,i.jsx)(AQ,x0(x0({schema:dD,init:t},n),{},{children:(0,i.jsx)(d0,{tabs:d,className:m0.accordion,changedGroups:f})}))})}));function k0(e){var t=e.moleculeErrors,n=e.checkSchema,r=Object.keys(t),o=function(e){var t=n.properties.checkOptions.items,r=t.enum.indexOf(e);return t.enumNames[r]};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("fieldset",{children:0===r.length?(0,i.jsx)("div",{children:(0,i.jsx)("dd",{children:"No errors detected"})}):r.map((function(e,n){return(0,i.jsxs)("div",{children:[(0,i.jsxs)("dt",{children:[o(e)," warning:"]}),(0,i.jsx)("dd",{children:t[e]})]},n)}))})})}var O0="Check-module_dialog_body__wHZMM",A0="Check-module_buttons__cjuqO",C0="Check-module_buttonSecondary__2482r",M0="Check-module_buttonPrimary__1h5p1",T0="Check-module_buttonsRight__L1v9A",P0="Check-module_wrapper__27SOp",R0="Check-module_checkInfo__Iqq6t",I0="Check-module_settings__knuQF",L0="Check-module_warnings__b4ozd",N0="Check-module_centeredContainer__t61r8",j0="Check-module_warningsContainer__vSbyK",D0="Check-module_checkBoxesDisabled__EAdRo",B0=["formState","checkState","onCheck","onApply","onCancel"];function z0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z0(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z0(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V0={title:"Check",type:"object",properties:{checkOptions:{title:"Settings",type:"array",items:{type:"string",enum:["valence","radicals","pseudoatoms","stereo","query","overlapping_atoms","overlapping_bonds","rgroups","chiral","3d","chiral_flag"],enumNames:["Valence","Radical","Pseudoatom","Stereochemistry","Query","Overlapping Atoms","Overlapping Bonds","R-Groups","Chirality","3D Structure","Chiral flag"]}}}},U0=function(e){var t=function(e){return(e+"").padStart(2,0)};return"".concat(t(e.getHours()),":").concat(t(e.getMinutes()),":").concat(t(e.getSeconds()),"  ").concat(t(e.getDate()),".").concat(t(e.getMonth()+1),".").concat(t(e.getFullYear()))},Z0=function(e){var t=e.handleCheck,n=e.handleApply,r=e.onCancel,o=e.isStuctureChecking,a=e.isCheckedWithNewSettings;return(0,i.jsxs)("div",{className:A0,children:[(0,i.jsx)("div",{children:(0,i.jsx)("button",{className:a?C0:M0,onClick:t,disabled:!o,children:"Check"})}),(0,i.jsxs)("div",{className:T0,children:[(0,i.jsx)("button",{className:C0,onClick:r,children:"Cancel"}),(0,i.jsx)("button",{className:M0,onClick:n,disabled:!o,children:"Apply"})]})]})};var H0=(0,nu.$j)((function(e){return{formState:e.modal.form,checkState:e.options.check}}),(function(e,t){return{onCheck:function(n){return e(OB(n)).catch(t.onCancel)},onApply:function(n){e({type:"SAVE_CHECK_OPTS",data:n}),t.onOk(n)}}}))((function(e){var t=e.formState,n=e.checkState,r=e.onCheck,o=e.onApply,a=e.onCancel,s=(0,N.Z)(e,B0),u=t.result,l=void 0===u?n:u,c=t.moleculeErrors,f=(0,eu.useState)(!1),h=(0,M.Z)(f,2),d=h[0],p=h[1],v=(0,eu.useState)(null),m=(0,M.Z)(v,2),g=m[0],y=m[1],b=(0,eu.useState)(!1),x=(0,M.Z)(b,2),_=x[0],w=x[1],S=function(){p(!1),r(l.checkOptions).then((function(){p(!0),y(new Date),w(!0)}))};return(0,eu.useEffect)((function(){S()}),[]),(0,i.jsx)(TX,{title:"Structure Check",className:O0,params:F0(F0({},s),{},{onCancel:a}),buttons:[],footerContent:(0,i.jsx)(Z0,{handleCheck:S,handleApply:function(){return o(l)},onCancel:a,isStuctureChecking:d,isCheckedWithNewSettings:_}),withDivider:!0,children:(0,i.jsx)(AQ,F0(F0({schema:V0,init:n},t),{},{result:l,children:(0,i.jsxs)("div",{className:P0,children:[(0,i.jsxs)("div",{className:I0,children:[(0,i.jsx)("label",{children:"Settings"}),(0,i.jsx)("div",{className:d?"":D0,children:(0,i.jsx)(MQ,{name:"checkOptions",labelPos:!1,multiple:!0,type:"checkbox",disabled:!d,onChange:function(){return w(!1)}})})]}),(0,i.jsxs)("div",{className:R0,children:[(0,i.jsxs)("span",{children:["Last check:"," ",g&&U0(g)]}),(0,i.jsx)("div",{className:Object.keys(c).length&&d?L0:N0,children:d?(0,i.jsx)("div",{className:Object.keys(c).length?j0:N0,children:(0,i.jsx)(k0,{moleculeErrors:c,checkSchema:V0})}):(0,i.jsx)(RX,{})})]})]})}))})})),G0="FormulaInput-module_chem_input__oprB3",W0=/\b(\d*)([A-Z][a-z]{0,3}#?)(\d*)\s*\b/g,q0=/error:.*/g;function K0(e){var t=e.content,n=e.contentEditable;return(0,i.jsx)("div",{className:G0,onKeyPress:function(e){return e.preventDefault()},onPaste:function(e){return e.preventDefault()},onKeyDown:function(e){if(8===e.keyCode)return e.preventDefault(),!1},contentEditable:n,suppressContentEditableWarning:!0,children:t})}function Y0(e){var t=e.value,n=e.contentEditable;if(q0.test(t))return K0(t);for(var r,o=[],a=0;null!==(r=W0.exec(t));)r[1].length>0&&o.push((0,i.jsx)("sup",{children:r[1]},o.length)),o.push(t.substring(a,r.index)+r[2]),r[3].length>0&&o.push((0,i.jsx)("sub",{children:r[3]},o.length)),a=r.index+r[0].length;return 0===a?o.push(t):o.push(t.substring(a,t.length)),K0({content:o,contentEditable:n})}function X0(e){var t=e.value;return(0,i.jsx)("input",{type:"text",spellCheck:!1,value:t,readOnly:!0,onChange:function(e){return e.preventDefault()}})}var $0="Analyse-module_analyse__MR-Tu",J0="Analyse-module_inputWrapper__uR995",Q0="Analyse-module_contentWrapper__B4WCi",e1="Analyse-module_selectWrapper__xEkKL",t1="Analyse-module_select__c6hFt",n1=["values","round","loading","onAnalyse","onChangeRound"];function r1(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function i1(e,t){return"number"===typeof e?e.toFixed(t):e.replace(/[0-9]*\.[0-9]+/g,(function(e){return(+e).toFixed(t)}))}var o1=gQ({enum:(0,F.range)(0,8)}),a1=function(e){p(n,e);var t=r1(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"componentDidMount",value:function(){this.props.onAnalyse()}},{key:"render",value:function(){var e=this.props,t=e.values,n=e.round,r=e.loading;e.onAnalyse;var o=e.onChangeRound,a=(0,N.Z)(e,n1);return(0,i.jsx)(TX,{title:"Calculated Values",className:$0,withDivider:!0,needMargin:!0,valid:function(){return!0},buttons:["OK"],buttonsNameMap:{OK:"Close"},params:a,children:(0,i.jsx)("ul",{children:[{name:"Chemical Formula",key:"gross",withSelector:!1},{name:"Molecular Weight",key:"molecular-weight",round:"roundWeight",withSelector:!0},{name:"Exact Mass",key:"monoisotopic-mass",round:"roundMass",withSelector:!0},{name:"Elemental Analysis",key:"mass-composition",round:"roundElAnalysis",withSelector:!1}].map((function(e){return(0,i.jsxs)("li",{className:Q0,children:[(0,i.jsxs)("div",{className:J0,children:[(0,i.jsxs)("label",{children:[e.name,":"]}),"gross"===e.key?(0,i.jsx)(Y0,{value:t&&!r?t[e.key]:"",contentEditable:!1}):"mass-composition"===e.key?(0,i.jsx)("textarea",{readOnly:!0,value:t&&!r?i1(t[e.key],n[e.round]):0}):(0,i.jsx)(X0,{value:t&&!r?i1(t[e.key],n[e.round]):0})]}),e.withSelector?(0,i.jsxs)("div",{className:e1,children:[(0,i.jsx)("span",{children:"Decimal places"}),(0,i.jsx)(fQ,{options:o1,value:n[e.round],onChange:function(t){return o(e.round,t)},className:t1})]}):null]},e.key)}))})})}}]),n}(eu.Component);(0,r.Z)(a1,"contextType",Uj);var s1=(0,nu.$j)((function(e){return{values:e.options.analyse.values,loading:e.options.analyse.loading,round:{roundWeight:e.options.analyse.roundWeight,roundMass:e.options.analyse.roundMass,roundElAnalysis:e.options.analyse.roundElAnalysis}}}),(function(e){return{onAnalyse:function(){return e((function(e,t){e({type:"ANALYSE_LOADING"});var n=t(),r=n.editor,i=n.server,o=n.options.getServerSettings();return o.data={properties:["molecular-weight","most-abundant-mass","monoisotopic-mass","gross","mass-composition"]},CB(r,i,"calculate",o).then((function(t){return e({type:"CHANGE_ANALYSE",data:{values:t}})})).catch((function(e){r.errorHandler(e)}))}))},onChangeRound:function(t,n){return e(function(e,t){return{type:"CHANGE_ANALYSE",data:(0,r.Z)({},e,t)}}(t,n))}}}))(a1),u1=["struct","Tag"];function l1(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function c1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c1(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c1(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h1=function(e){p(n,e);var t=l1(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).tagRef=(0,eu.createRef)(),r}return(0,c.Z)(n,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentDidMount",value:function(){var e,t=this.tagRef.current,n=this.props,r=n.struct,i=n.options;if(r instanceof Be)e=r;else try{e=(new fn).deserialize(r)}catch(o){e=null}!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t){t.initHalfBonds(),t.initNeighbors(),t.setImplicitHydrogen(),t.markFragments();var r=new Di(e,f1({autoScale:!0},n));r.setMolecule(t),r.update()}}(t,e,i)}},{key:"render",value:function(){var e=this.props,t=e.struct,n=e.Tag,r=void 0===n?"div":n,o=(0,N.Z)(e,u1);return(0,i.jsx)(r,f1(f1({ref:this.tagRef},o),{},{children:t?null:"No molecule"}))}}]),n}(eu.Component),d1="Recognize-module_recognize__66jG2",p1="Recognize-module_footerContent__0MAC7",v1="Recognize-module_imagoVersion__nBIj6",m1="Recognize-module_openButton__H-j5I",g1="Recognize-module_imagesContainer__rXWWk",y1="Recognize-module_topBody__ZCCjN",b1="Recognize-module_output__WgRnP",x1="Recognize-module_picture__x2Y7S",_1="Recognize-module_filename__-1HIU",w1="Recognize-module_messageContainer__tMvyb",S1="Recognize-module_primaryButton__rzm03",E1="Recognize-module_secondaryButton__H1Q28",k1="Recognize-module_struct__W55TL",O1=function(e){var t=e.clickHandler,n=e.label,r=e.title,o=e.styles,a=e.disabled;return(0,i.jsx)("input",{type:"button",className:o,value:n,title:r||n,disabled:a,onClick:t},"Open")},A1=["file","structStr","fragment","version","imagoVersions","onOk"],C1=["onRecognize","isFragment","onImage","onChangeImago"];function M1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M1(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M1(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P1(e){var t;return null===e||void 0===e||null===(t=e.type)||void 0===t?void 0:t.includes("image")}function R1(e){var t=e.onImage,n=e.structStr,r=e.openHandler,o=e.copyHandler;return(0,i.jsxs)("div",{className:p1,children:[(0,i.jsxs)($Q,{onLoad:t,type:"image/*",className:m1,children:[(0,i.jsx)($W,{name:"open"}),(0,i.jsx)("span",{children:"Change image"})]},"choose"),(0,i.jsxs)("div",{children:[(0,i.jsx)(O1,{disabled:!n,clickHandler:r,styles:E1,label:"Open as new Project"},"openButton"),(0,i.jsx)(O1,{disabled:!n,clickHandler:o,styles:S1,label:"Add to Canvas",title:"Structure will be loaded as fragment and added to Clipboard"},"copyButton")]})]})}function I1(e){if(!e)return null;var t=window.URL||window.webkitURL;return t?t.createObjectURL(e):"No preview"}var L1=(0,nu.$j)((function(e){return{imagoVersions:e.options.app.imagoVersions,file:e.options.recognize.file,structStr:e.options.recognize.structStr,fragment:e.options.recognize.fragment,version:e.options.recognize.version||e.options.app.imagoVersions[1]}}),(function(e){return{isFragment:function(t){return e({type:"IS_FRAGMENT_RECOGNIZE",data:{fragment:t}})},onImage:function(t){return e(kD(t))},onRecognize:function(t,n){return e(function(e,t){return function(n,r){var i=r().server.recognize,o=r().editor,a=i(e,t).then((function(e){n(ED(e.struct))}),(function(e){n(ED(null)),o.errorHandler(e)}));n(ED(a))}}(t,n))},onChangeImago:function(t){return e({type:"CHANGE_IMAGO_VERSION",data:{version:t}})},onOk:function(t){e(kB(t.structStr,{rescale:!0,fragment:t.fragment}))}}}))((function(e){var t=e.file,n=e.structStr,r=e.fragment,o=e.version,a=e.imagoVersions,s=e.onOk,u=(0,N.Z)(e,A1),l=u.onRecognize;u.isFragment;var c=u.onImage,f=u.onChangeImago,h=(0,N.Z)(u,C1),d=(0,eu.useState)(!0),p=(0,M.Z)(d,2),v=p[0],m=p[1];(0,eu.useEffect)((function(){l(t,o)}),[t,o]);var g=(0,eu.useCallback)((function(){return c(null),!0}),[c]);return(0,i.jsxs)(TX,{title:"Import Structure from Image",className:d1,params:T1(T1({},h),{},{onOk:s}),result:function(){return!n||n instanceof Promise?null:{structStr:n,fragment:r}},withDivider:!0,needMargin:!1,footerContent:(0,i.jsx)(R1,{onImage:c,openHandler:function(){s({structStr:n,fragment:!1})},structStr:n,copyHandler:function(){s({structStr:n,fragment:!0})}}),buttons:[],children:[(0,i.jsxs)("div",{className:y1,children:[(0,i.jsxs)("label",{className:v1,children:["Imago version",(0,i.jsx)(uQ,{schema:{enum:a,enumNames:(0,F.range)(1,a.length+1).map((function(e){return"Version ".concat(e)}))},value:o,onChange:f})]}),(0,i.jsx)("span",{children:"Original image"}),(0,i.jsx)("span",{children:"Recognized structure preview"})]}),(0,i.jsxs)("div",{className:g1,children:[(0,i.jsxs)("div",{className:x1,children:[t&&P1(t)&&v&&(0,i.jsx)("img",{alt:"",id:"pic",src:I1(t)||"",onError:function(){m(!1)}}),(0,i.jsxs)("span",{className:_1,children:[" ",t?t.name:null," "]}),t&&P1(t)&&!v&&(0,i.jsx)("div",{className:w1,children:(0,i.jsxs)("p",{children:["Preview of '",t.type,"' MIME type is not supported by current browser"]})}),(!t||!P1(t)&&g())&&(0,i.jsx)("div",{className:w1,children:(0,i.jsx)("p",{children:"Please choose image"})})]}),(0,i.jsx)("div",{className:b1,children:n&&(n instanceof Promise||"string"!==typeof n?(0,i.jsx)("div",{className:w1,children:(0,i.jsx)(RX,{})}):(0,i.jsx)(h1,{className:k1,struct:n}))})]})]})})),N1="Miew-module_warning__IDl5F",j1="Miew-module_applyButton__ZDE-i",D1="Miew-module_miewDialog__gHvYc",B1="Miew-module_miewContainer__2SNw3",z1="Miew-module_miewDarkTheme__kMFzc",F1=["miewOpts","server","struct","onExportCML","miewTheme"],V1={dark:"0x202020",light:"0xcccccc"},U1={no:null,bright:{colorer:"EL"},blackAndWhite:{colorer:["UN",{color:16777215}],bg:"0x000"},black:{colorer:["UN",{color:0}]}};function Z1(e){var t={settings:{bg:{color:Number(V1[e.miewTheme])},autoPreset:!1,editing:!0,inversePanning:!0},reps:[{mode:e.miewMode}]},n=function(e){var t=e.miewAtomLabel;return null===U1[t]?null:{colorer:U1[t].colorer,selector:"not elem C",mode:["TX",{bg:U1[t].bg||V1[e.miewTheme],showBg:!0,template:"{{elem}}"}]}}(e);return n&&t.reps.push(n),t}var H1=function(){return(0,i.jsx)("div",{className:N1,children:"Stereocenters can be changed after the strong 3D rotation"})},G1=(0,nu.$j)((function(e){return{miewOpts:Z1((0,F.pick)(hD,e.options.settings)),server:e.options.app.server?e.server:null,struct:e.editor.struct(),miewTheme:e.options.settings.miewTheme}}),(function(e){return{onExportCML:function(t){e(kB(t))}}}))((function(e){var t=e.miewOpts,n=e.server,r=e.struct,o=e.onExportCML,a=e.miewTheme,s=void 0===a?"light":a,u=(0,N.Z)(e,F1),l=(0,eu.useRef)(),c=(0,eu.useCallback)((function(e){l.current=e,new cr(n).create("cml").getStructureFromStructAsync(r).then((function(t){return e.load(t,{sourceType:"immediate",fileType:"cml"})})).then((function(){return e.setOptions(t)})).catch((function(e){}))}),[t,n,r]),f=(0,eu.useCallback)((function(){var e,t=null===(e=l.current)||void 0===e?void 0:e.exportCML();t&&o(t)}),[o,l]);return(0,i.jsx)(TX,{title:"Miew",needMargin:!1,params:u,buttons:["Cancel",(0,i.jsx)("button",{onClick:f,className:j1,children:"Apply"},"apply")],footerContent:(0,i.jsx)(H1,{}),className:D1,children:(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"".concat(B1," ").concat("dark"===s?z1:""),children:(0,i.jsx)(YN,{onInit:c})})})})})),W1=function(e){var t,n=e.label,r=(null===(t=H((0,F.capitalize)(n)))||void 0===t?void 0:t.number)||"";return(0,i.jsxs)("label",{children:[(0,i.jsx)("span",{children:"Number"}),(0,i.jsx)("input",{type:"text",readOnly:!0,value:r})]})},q1="Atom-module_atomProps__pqBjY",K1="Atom-module_accordionWrapper__MSuU7",Y1="Atom-module_expandIcon__mPszC",X1="Atom-module_turnedIcon__0Kzwy",$1="Atom-module_accordionSummaryWrapper__MGqsq",J1="Atom-module_accordionSummary__HMKzl",Q1="Atom-module_accordionDetailsWrapper__p6EI7",e2="Atom-module_hiddenAccordion__pDNdM",t2="Atom-module_accordionDetails__-B3jK",n2="Atom-module_checkbox__Vup40",r2="Atom-module_reactionFlags__gdNb1",i2="Atom-module_querySpecific__7XxMr",o2=["formState","stereoParity"];function a2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a2(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u2=XD.properties;var l2=(0,nu.$j)((function(e){return{formState:e.modal.form}}))((function(e){var t=e.formState;e.stereoParity;var n=(0,N.Z)(e,o2),o=(0,eu.useState)(n.label),a=(0,M.Z)(o,2),s=a[0],u=a[1],l=(0,eu.useState)(["General"]),c=(0,M.Z)(l,2),f=c[0],h=c[1],d=(0,eu.useCallback)((function(e){u(e)}),[]),p=[{groupName:"General",component:(0,i.jsxs)("div",{children:[(0,i.jsx)(MQ,{name:"label",onChange:d,autoFocus:!0}),(0,i.jsx)(W1,{label:s}),(0,i.jsx)(MQ,{name:"alias"}),(0,i.jsx)(MQ,{name:"charge",maxLength:"5"}),(0,i.jsx)(MQ,{name:"isotope"}),(0,i.jsx)(MQ,{name:"explicitValence",component:fQ,options:gQ(u2.explicitValence)}),(0,i.jsx)(MQ,{name:"radical",component:fQ,options:gQ(u2.radical)})]})},{groupName:"Query specific",component:(0,i.jsxs)("div",{className:i2,children:[(0,i.jsx)(MQ,{name:"ringBondCount",component:fQ,options:gQ(u2.ringBondCount)}),(0,i.jsx)(MQ,{name:"hCount",component:fQ,options:gQ(u2.hCount)}),(0,i.jsx)(MQ,{name:"substitutionCount",component:fQ,options:gQ(u2.substitutionCount)}),(0,i.jsx)(MQ,{name:"unsaturatedAtom",labelPos:"before",className:n2})]})},{groupName:"Reaction flags",component:(0,i.jsxs)("div",{className:r2,children:[(0,i.jsx)(MQ,{name:"invRet",component:fQ,options:gQ(u2.invRet)}),(0,i.jsx)(MQ,{name:"exactChangeFlag",labelPos:"before",className:n2})]})}];return(0,i.jsx)(TX,{title:"Atom Properties",className:q1,result:function(){return t.result},valid:function(){return t.valid},params:n,buttonsNameMap:{OK:"Apply"},buttons:["Cancel","OK"],withDivider:!0,children:(0,i.jsx)(AQ,s2(s2({schema:XD,customValid:{label:function(e){return function(e){return e&&!!H((0,F.capitalize)(e))}(e)},charge:function(e){return function(e){var t=new RegExp(XD.properties.charge.pattern).exec(e);return t&&(""===t[1]||""===t[3])}(e)}},init:n},t),{},{children:(0,i.jsx)("div",{className:K1,children:p.map((function(e){var t,n,o,a=e.groupName,s=e.component,u=f.includes(a);return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{onClick:(o=a,function(){var e=!f.includes(o);h(e?[].concat(k(f),[o]):k(f).filter((function(e){return e!==o})))}),className:$1,children:(0,i.jsxs)("div",{className:J1,children:[(0,i.jsx)("span",{children:a}),(0,i.jsx)($W,{className:(0,tu.Z)((t={},(0,r.Z)(t,Y1,!0),(0,r.Z)(t,X1,!u),t)),name:"chevron"})]})}),(0,i.jsx)("div",{className:(0,tu.Z)((n={},(0,r.Z)(n,Q1,!0),(0,r.Z)(n,e2,!u),n)),children:(0,i.jsx)("div",{className:t2,children:s})})]},a)}))})}))})})),c2="Attach-module_attachPoints__5QEAv",f2=["formState"];function h2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h2(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p2=(0,nu.$j)((function(e){return{formState:e.modal.form}}))((function(e){var t=e.formState,n=(0,N.Z)(e,f2);return(0,i.jsx)(TX,{title:"Attachment Points",className:c2,result:function(){return t.result},valid:function(){return t.valid},params:n,buttonsNameMap:{OK:"Apply"},buttons:["Cancel","OK"],withDivider:!0,children:(0,i.jsxs)(AQ,d2(d2({schema:QD,init:n},t),{},{children:[(0,i.jsx)(MQ,{name:"primary"}),(0,i.jsx)(MQ,{name:"secondary"})]}))})})),v2="Automap-module_automap__531ko",m2=["formState"];function g2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g2(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b2={title:"Reaction Auto-Mapping",type:"object",required:["mode"],properties:{mode:{title:"Mode",enum:["discard","keep","alter","clear"],enumNames:["Discard","Keep","Alter","Clear"],default:"discard"}}},x2=(0,nu.$j)((function(e){return{formState:e.modal.form}}),(function(e,t){return{onOk:function(n){e(AB("automap",n)),t.onOk(n)}}}))((function(e){var t=e.formState,n=(0,N.Z)(e,m2);return(0,i.jsx)(TX,{title:"Reaction Auto-Mapping",className:v2,result:function(){return t.result},valid:function(){return t.valid},params:n,withDivider:!0,buttons:["Cancel","OK"],buttonsNameMap:{OK:"Apply"},children:(0,i.jsx)(AQ,y2(y2({schema:b2},t),{},{children:(0,i.jsx)(MQ,y2(y2({name:"mode",options:gQ(b2.properties.mode)},e),{},{component:fQ}))}))})})),_2="Bond-module_bond__EDfLY",w2=["formState"];function S2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S2(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k2=(0,nu.$j)((function(e){return{formState:e.modal.form}}))((function(e){var t=e.formState,n=(0,N.Z)(e,w2),r=eB.properties;return(0,i.jsx)(TX,{title:"Bond Properties",className:_2,result:function(){return t.result},valid:function(){return t.valid},params:n,buttonsNameMap:{OK:"Apply"},buttons:["Cancel","OK"],withDivider:!0,children:(0,i.jsxs)(AQ,E2(E2({schema:eB,init:n},t),{},{children:[(0,i.jsx)(MQ,{name:"type",component:fQ,options:gQ(r.type)}),(0,i.jsx)(MQ,{name:"topology",component:fQ,options:gQ(r.topology)}),(0,i.jsx)(MQ,{name:"center",component:fQ,options:gQ(r.center)})]}))})})),O2="IfThenSelect-module_field__9YaPA";function A2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A2(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M2=function(e){var t=e.rgroupLabels,n=e.label,r=e.name,o={title:AK().schema.properties[r].title,enum:[0],enumNames:["Always"]};return t.forEach((function(e){n!==e&&(o.enum.push(e),o.enumNames.push("IF R".concat(n," THEN R").concat(e)))})),(0,i.jsx)(MQ,C2(C2({schema:o,className:O2},e),{},{component:fQ,options:gQ(o)}))},T2="RgroupLogic-module_rgroupLogic__q4RTy",P2="RgroupLogic-module_resth__RL2qE",R2=["formState","label","rgroupLabels"];function I2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I2(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N2=(0,nu.$j)((function(e){return{formState:e.modal.form}}))((function(e){var t=e.formState,n=e.label,r=e.rgroupLabels,o=(0,N.Z)(e,R2);return(0,i.jsx)(TX,{title:"R-Group Logic Condition",className:T2,result:function(){return t.result},valid:function(){return t.valid},params:o,buttonsNameMap:{OK:"Apply"},buttons:["Cancel","OK"],withDivider:!0,children:(0,i.jsxs)(AQ,L2(L2({schema:nB,customValid:{range:function(e){return function(e){return e.replace(/\s*/g,"").replace(/,+/g,",").replace(/^,/,"").replace(/,$/,"").split(",").every((function(e){return e.match(/^[>,<=]?[0-9]+$/g)||e.match(/^[0-9]+-[0-9]+$/g)}))}(e)}},init:o},t),{},{children:[(0,i.jsx)(MQ,{name:"range"}),(0,i.jsx)(MQ,{name:"resth",labelPos:"after",className:P2}),(0,i.jsx)(M2,{name:"ifthen",label:n,rgroupLabels:r})]}))})})),j2="Open-module_open__m8V9g",D2="Open-module_textareaEditor__ZbEVj",B2="Open-module_footerContent__Q0hTw",z2="Open-module_buttonsContainer__L1HqU",F2="Open-module_openButton__cj3oU",V2="Open-module_cancelButton__0TQzA",U2="Open-module_copyButton__KlXKd",Z2="AnalyzingFile-module_analyzingFileWrapper__j0Ltf",H2="AnalyzingFile-module_fileBox__ywFIh",G2=function(e){var t=e.fileName;return(0,i.jsxs)("div",{className:Z2,children:[t&&(0,i.jsxs)("div",{className:H2,children:[(0,i.jsx)($W,{name:"file-thumbnail"}),(0,i.jsx)("p",{children:t})]}),(0,i.jsx)(RX,{})]})},W2="OpenOptions-module_optionsContainer__-WqT8",q2="OpenOptions-module_dropContainer__PL6Tg",K2="OpenOptions-module_buttonLabelWrapper__h2YsI",Y2="OpenOptions-module_buttonLabel__LiY--",X2="OpenOptions-module_textLabelWrapper__Vx8NF",$2="OpenOptions-module_textLabel__TlOfz",J2="OpenOptions-module_dropIconWrapper__ibBQx",Q2="FileDrop-module_isHovered__c-CDn",e3="FileDrop-module_isDisabled__Ejuyq",t3=["buttonLabel","textLabel","iconName","disabled","disabledText"];function n3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?n3(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i3=function(e){var t=e.buttonLabel,n=e.textLabel,r=e.iconName,o=e.disabled,a=e.disabledText,s=(0,N.Z)(e,t3),u=(0,XN.uI)(r3({multiple:!1,disabled:o},s)),l=u.getRootProps,c=u.getInputProps,f=u.isDragActive,h=u.open,d=(0,eu.useMemo)((function(){return[q2,f?Q2:null,o?e3:null].join(" ")}),[f]);return(0,i.jsxs)("div",r3(r3({onKeyDown:h},l({className:d})),{},{children:[(0,i.jsx)("input",r3({},c())),(0,i.jsx)("div",{className:J2,children:(0,i.jsx)($W,{name:r})}),o?(0,i.jsx)("p",{className:$2,children:a}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:X2,children:(0,i.jsx)("p",{className:$2,children:n})}),(0,i.jsx)("div",{className:K2,children:(0,i.jsx)("p",{className:Y2,children:t})})]})]}))},o3="open-window-paste-icon",a3="open-window-upload-icon",s3="image-frame",u3=function(e){var t=e.selectClipboard,n=e.fileLoadHandler,r=e.imageLoadHandler,o=e.isRecognizeDisabled,a=e.errorHandler;return(0,i.jsxs)("div",{className:W2,children:[(0,i.jsxs)("div",{onClick:t,className:q2,children:[(0,i.jsx)("div",{className:J2,children:(0,i.jsx)($W,{name:o3})}),(0,i.jsx)("div",{className:X2}),(0,i.jsx)("div",{className:K2,children:(0,i.jsx)("p",{className:Y2,children:"Paste from clipboard"})})]}),(0,i.jsx)(i3,{onDropAccepted:n,onDropRejected:function(e){return a("Unable to accept file(s). ".concat(e))},buttonLabel:"Open from file",textLabel:"or drag file here",iconName:a3}),(0,i.jsx)(i3,{accept:"image/*",disabled:o,disabledText:"Image Recognition service is not available",onDropAccepted:r,onDropRejected:function(){return a("Unable to accept file(s). Make sure you upload 1 image.")},buttonLabel:"Open from image",textLabel:"or drag file here",iconName:s3})]})},l3=function(e){var t=e.structStr,n=e.inputHandler;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("textarea",{className:D2,value:t,onChange:function(e){return n(e.target.value)}})})};function c3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c3(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h3=function(e){if(e.isAnalyzingFile)return(0,i.jsx)(G2,{fileName:e.fileName});switch(e.currentState){case e.states.idle:return(0,i.jsx)(u3,f3({},e));case e.states.textEditor:return(0,i.jsx)(l3,f3({},e));default:return null}},d3=["server","onImageUpload","errorHandler","isAnalyzingFile","isRecognizeDisabled"];function p3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var v3={idle:"idle",textEditor:"textEditor",imageRec:"imageRec"},m3=function(e){var t=e.structStr,n=e.openHandler,r=e.copyHandler,o=e.onCancel;return(0,i.jsxs)("div",{className:B2,children:[(0,i.jsx)("button",{onClick:o,className:V2,children:"Cancel"}),(0,i.jsxs)("div",{className:z2,children:[(0,i.jsx)(O1,{disabled:!t,clickHandler:n,styles:F2,label:"Open as New Project"},"openButton"),(0,i.jsx)(O1,{disabled:!t,clickHandler:r,styles:U2,label:"Add to Canvas",title:"Structure will be loaded as fragment and added to Clipboard"},"copyButton")]})]})},g3=(0,nu.$j)((function(e){var t;return{server:e.server,errorHandler:e.editor.errorHandler,isRecognizeDisabled:null===(t=e.actionState.recognize)||void 0===t?void 0:t.disabled,isAnalyzingFile:e.requestsStatuses.isAnalyzingFile}}),(function(e){return{onOk:function(t){t.fragment&&oD("copy"),e(kB(t.structStr,{badHeaderRecover:!0,fragment:t.fragment}))},onImageUpload:function(t){e(kD(t))}}}))((function(e){var t=e.server,n=e.onImageUpload,o=e.errorHandler,a=e.isAnalyzingFile,s=e.isRecognizeDisabled,u=(0,N.Z)(e,d3),l=(0,eu.useState)(""),c=(0,M.Z)(l,2),f=c[0],h=c[1],d=(0,eu.useState)(""),p=(0,M.Z)(d,2),v=p[0],m=p[1],g=(0,eu.useState)(),y=(0,M.Z)(g,2),b=y[0],x=y[1],_=(0,eu.useState)(v3.idle),w=(0,M.Z)(_,2),S=w[0],E=w[1];(0,eu.useEffect)((function(){t&&hQ(t).then((function(e){x({chosenOpener:e})}))}),[t]);var k=u.onOk,O=S===v3.textEditor&&!a;return S===v3.imageRec?(0,i.jsx)(L1,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p3(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u)):(0,i.jsx)(TX,{title:"Open structure",className:j2,params:u,result:function(){return null},footerContent:O?(0,i.jsx)(m3,{structStr:f,openHandler:function(){k({structStr:f,fragment:!1})},copyHandler:function(){k({structStr:f,fragment:!0})},onCancel:u.onCancel}):void 0,buttons:[],withDivider:!0,children:(0,i.jsx)(h3,{isAnalyzingFile:a,fileName:v,currentState:S,states:v3,selectClipboard:function(){return E(v3.textEditor)},fileLoadHandler:function(e){m(e[0].name),b.chosenOpener(e[0]).then((function(e){h(e),E(v3.textEditor)}),(function(){return o("Error processing file")}))},imageLoadHandler:function(e){n(e[0]),E(v3.imageRec)},errorHandler:o,isRecognizeDisabled:s,structStr:f,inputHandler:h})})}));var y3="Tabs-module_tabs__PuztJ",b3="Tabs-module_active__eeyNd";function x3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x3(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w3(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var S3=function(e){p(n,e);var t=w3(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).state={},r.state.tabIndex=e.tabIndex||0,r.props.changeTab(r.state.tabIndex),r}return(0,c.Z)(n,[{key:"changeTab",value:function(e,t){this.setState({tabIndex:t}),this.props.changeTab&&this.props.changeTab(t)}},{key:"componentDidUpdate",value:function(e){this.props.tabIndex!==e.tabIndex&&this.setState({tabIndex:this.props.tabIndex})}},{key:"render",value:function(){var e=this,t=this.props,n=t.tabs,o=t.contentClassName,a=t.className,s=t.tabIndex,u=n[this.state.tabIndex],l=null===u||void 0===u?void 0:u.component,c=null===u||void 0===u?void 0:u.props;return(0,i.jsxs)("div",{children:[(0,i.jsx)("ul",{className:a,tabIndex:s,children:(0,i.jsx)("li",{className:y3,children:n.map((function(t,n){return(0,i.jsx)("a",{className:(0,tu.Z)((0,r.Z)({},b3,e.state.tabIndex===n)),onClick:function(t){return e.changeTab(t,n)},children:t.caption},n)}))})}),u&&(0,i.jsx)("div",{className:o,children:(0,i.jsx)(l,_3({},c))})]})}}]),n}(eu.Component),E3="Save-module_dialog__of-0M",k3="Save-module_formContainer__v1pIq",O3="Save-module_tabs__TOB-R",A3="Save-module_warnings__1PxJT",C3="Save-module_warningsContainer__-3yVy",M3="Save-module_warningsArr__bKUFY",T3="Save-module_previewBackground__AbaUf",P3="Save-module_previewArea__-0SLb",R3="Save-module_loadingCirclesContainer__COUKN",I3="Save-module_imageContainer__gFELk",L3="Save-module_ok__SgeCM",N3="Save-module_cancel__SMkEV",j3="Save-module_saveTmpl__O-d0T";function D3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D3(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z3(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var F3={title:"Save",type:"object",properties:{filename:{title:"File name:",type:"string",maxLength:128,pattern:'^[^.<>:?"*\\\\|\\/][^<>:?"*\\\\|\\/]*$',invalidMessage:function(e){return e?e.length>128?"Filename is too long":"A filename cannot contain characters: \\ / : * ? \" < > | and cannot start with '.'":"Filename should contain at least one character"}},format:{title:"File format:",enum:Object.keys(Tn),enumNames:Object.keys(Tn).map((function(e){return Tn[e].name}))}}},V3=function(e){p(n,e);var t=z3(n);function n(e){var o;(0,l.Z)(this,n),o=t.call(this,e),(0,r.Z)(m(o),"isImageFormat",(function(e){return!!Rn(e)})),(0,r.Z)(m(o),"showStructWarningMessage",(function(e){var t=o.props.formState.errors;return"mol"!==e&&Object.keys(t).length>0})),(0,r.Z)(m(o),"changeType",(function(e){var t=o.props,n=t.struct,r=t.server,i=t.options,a=t.formState,s=o.context.errorHandler;if(o.isImageFormat(e)){var u=(new at).serialize(n);o.setState({disableControls:!0,tabIndex:0,imageFormat:e,structStr:u,isLoading:!0});var l={};return l.outputFormat=e,r.generateImageAsBase64(u,l).then((function(e){o.setState({disableControls:!1,tabIndex:0,imageSrc:e,isLoading:!1})})).catch((function(e){return s(e),o.props.onResetForm(a),e}))}return o.setState({disableControls:!0,isLoading:!0}),new cr(r).create(e,i).getStructureFromStructAsync(n).then((function(e){o.setState({tabIndex:0,structStr:e})}),(function(e){return s(e.message),o.props.onResetForm(a),e})).finally((function(){o.setState({disableControls:!1,tabIndex:0,isLoading:!1})}))})),(0,r.Z)(m(o),"changeTab",(function(e){o.setState({tabIndex:e})})),(0,r.Z)(m(o),"getWarnings",(function(e){var t=o.props,n=t.struct,r=t.moleculeErrors,i=[];if(!o.isImageFormat(e)){var a=function(e,t){var n=[],r=In(t).name,i=e.rxnArrows.size,o=e.hasRxnArrow();if("smiles"!==t&&"smarts"!==t||n.push("Structure contains query properties of atoms and bonds that are not supported in the ".concat(null===t||void 0===t?void 0:t.toUpperCase(),". Query properties will not be reflected in the file saved.")),"smiles"===t){var a=Array.from(e.atoms.values()).some((function(e){return e.pseudo}));a&&n.push("Structure contains generic atoms. They will be saved as any atom (*).")}if("ket"!==t){if(o){var s=Array.from(e.rxnArrows.values())[0].mode;s!==_e.OpenAngle&&n.push("The ".concat(r," format does not support drawn elements: the reaction ").concat(s," arrow will be replaced with the reaction arrow"))}i>1&&n.push("The ".concat(r," format does not support drawn elements: reaction arrows will be lost."))}if(["inChI","inChIAuxInfo","smiles","smilesExt"].includes(t)){0!==e.rgroups.size&&n.push("In ".concat(r," the structure will be saved without R-group fragments"));var u=(e=e.clone()).atoms.find((function(e,t){return"R#"===t.label}));null!==u&&n.push("In ".concat(r," the structure will be saved without R-group members")),null!==e.sgroups.find((function(e,t){return"MUL"!==t.type&&!/^INDIGO_.+_DESC$/i.test(t.data.fieldName)}))&&n.push("In ".concat(r," the structure will be saved without S-groups"))}if(["smiles","smilesExt","smarts","inChI","inChIAuxInfo","cml"].includes(t)){var l=e.atoms.find((function(e,t){return t.explicitValence>=0}));null!==l&&n.push("In ".concat(r," valence is not supported"))}return["mol","rxn"].includes(t)&&Array.from(e.frags.values()).some((function(e){return!(null===e||void 0===e||!e.enhancedStereoFlag)&&e.enhancedStereoFlag!==ie.Abs}))&&n.push("Structure contains enhanced stereochemistry features. Information will be partly lost."),["inChI","inChIAuxInfo","smiles","smilesExt"].includes(t)&&0!==e.functionalGroups.size&&n.push("In ".concat(r," the structure will be saved without functional groups.")),["cml"].includes(t)&&0!==e.functionalGroups.size&&n.push("Structure contains functional groups. In ".concat(r," information will be partly lost.")),0!==n.length?n.join("\n"):null}(n,e);o.showStructWarningMessage(e)&&i.push("Structure contains errors, please check the data, otherwise you can lose some properties or the whole structure after saving in this format."),a&&i.push(a)}return r&&i.push.apply(i,k(Object.values(r))),i})),(0,r.Z)(m(o),"renderForm",(function(){var e=Object.assign({},o.props.formState),t=e.result,n=t.filename,r=t.format,a=0===o.getWarnings(r).length?[{caption:"Preview",component:o.renderSaveFile,tabIndex:0}]:[{caption:"Preview",component:o.renderSaveFile,tabIndex:0},{caption:"Warnings",component:o.renderWarnings,tabIndex:1}];return(0,i.jsxs)("div",{className:k3,children:[(0,i.jsxs)(AQ,B3(B3({schema:o.saveSchema,init:{filename:n,format:o.isRxn?"rxn":"mol"}},e),{},{children:[(0,i.jsx)(MQ,{name:"filename"}),(0,i.jsx)(MQ,{name:"format",onChange:o.changeType,options:gQ(o.saveSchema.properties.format),component:fQ})]})),(0,i.jsx)(S3,{className:O3,captions:a,tabIndex:o.state.tabIndex,changeTab:o.changeTab,tabs:a})]})})),(0,r.Z)(m(o),"renderSaveFile",(function(){var e=Object.assign({},o.props.formState);delete e.moleculeErrors;var t=e.result;t.filename;var n=t.format,r=o.state,a=r.structStr,s=r.imageSrc,u=r.isLoading,l=o.props.struct.isBlank();return u?(0,i.jsx)("div",{className:R3,children:(0,i.jsx)(RX,{})}):o.isImageFormat(n)?(0,i.jsx)("div",{className:I3,children:!l&&(0,i.jsx)("img",{src:"data:image/".concat(n,"+xml;base64,").concat(s)})}):(0,i.jsx)("div",{className:T3,children:(0,i.jsx)("textarea",{value:a,className:P3,readOnly:!0,ref:o.textAreaRef})})})),(0,r.Z)(m(o),"renderWarnings",(function(){var e=Object.assign({},o.props.formState).result;e.filename;var t=e.format,n=o.getWarnings(t);return n.length?(0,i.jsx)("div",{className:A3,children:n.map((function(e){return(0,i.jsx)("div",{className:C3,children:(0,i.jsx)("span",{className:M3,children:e})})}))}):null})),(0,r.Z)(m(o),"getButtons",(function(){var e=o.state,t=e.disableControls,n=e.imageFormat,r=e.structStr,a=o.props.formState,s=a.result,u=s.filename,l=s.format,c=o.props.struct.isBlank(),f=o.props.struct.atoms.size&&o.props.struct.bonds.size,h=[(0,i.jsx)("button",{className:j3,disabled:t||c||!f,onClick:function(){return o.props.onTmplSave(o.props.struct)},children:"Save to Templates"},"save-tmpl")];return h.push((0,i.jsx)("button",{mode:"onCancel",className:N3,onClick:function(){return o.props.onOk({})},type:"button",children:"Cancel"},"cancel")),o.isImageFormat(l)?h.push((0,i.jsx)(e0,{mode:"saveImage",data:r,filename:u,outputFormat:n,type:"image/".concat(l,"+xml"),onSave:o.props.onOk,disabled:t||!a.valid||c||!o.props.server,className:L3,children:"Save"},"save-image-button")):h.push((0,i.jsx)(e0,{mode:"saveFile",data:r,filename:u+In(l).extensions[0],type:l.mime,server:o.props.server,onSave:o.props.onOk,disabled:t||!a.valid||c,className:L3,children:"Save"},"save-file-button")),h})),o.state={disableControls:!0,imageFormat:"svg",tabIndex:0,isLoading:!0},o.isRxn=o.props.struct.hasRxnArrow(),o.textAreaRef=(0,eu.createRef)();var a=[o.isRxn?"rxn":"mol","smiles","ket"];return o.props.server&&a.push(o.isRxn?"rxnV3000":"molV3000","smilesExt","smarts","inChI","inChIAuxInfo","cml","svg","png"),o.saveSchema=F3,o.saveSchema.properties.format=Object.assign(o.saveSchema.properties.format,{enum:a,enumNames:a.map((function(e){return(In(e)||Rn(e)).name}))}),o}return(0,c.Z)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.checkState.checkOptions;this.props.onCheck(t),this.changeType(this.isRxn?"rxn":"mol").then((function(t){return t instanceof Error&&e.setState({disableControls:!0})}))}},{key:"render",value:function(){return(0,i.jsx)(TX,{className:E3,title:"Save Structure",params:this.props,buttons:this.getButtons(),needMargin:!1,withDivider:!0,children:this.renderForm()})}}]),n}(eu.Component);(0,r.Z)(V3,"contextType",Uj);var U3=(0,nu.$j)((function(e){return{server:e.options.app.server?e.server:null,struct:e.editor.struct(),options:e.options.getServerSettings(),formState:e.modal.form,moleculeErrors:e.modal.form.moleculeErrors,checkState:e.options.check}}),(function(e){return{onCheck:function(t){return e(OB(t))},onTmplSave:function(t){return e(function(e){var t={struct:e.clone(),props:{}};return function(e,n){Cq(e,"attach",{tmpl:t}).then((function(r){var i=r.name,o=r.attach;t.struct.name=i.trim(),t.props=Tq(Tq({},o),{},{group:"User Templates"});var a=n().templates.lib.concat(t);e(_q(a)),Pq(a)})).catch((function(){return null}))}}(t))},onResetForm:function(t){return e(FD(t))}}}))(V3),Z3="enhancedStereo-module_enhancedStereo__8FLSY",H3="enhancedStereo-module_labelGroupSelect__K7TYC",G3=["struct","formState","init"];function W3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W3(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K3=(0,nu.$j)((function(e){return{formState:e.modal.form||{result:{},valid:!1},struct:e.editor.struct()}}))((function(e){var t=e.struct,n=e.formState,r=e.init,o=(0,N.Z)(e,G3),a=n.result,s=n.valid,u=function(e,t){return t.filter((function(t){return null!==e.atoms.get(t).stereoLabel})).map((function(t){return e.atoms.get(t).stereoLabel}))}(t,Array.from(t.atoms.keys())),l=function(e){var t=e.map((function(e){var t;return e.match(/&/)?+(null===(t=e.match(/\d+/))||void 0===t?void 0:t.join()):0}));return Math.max.apply(Math,k(t))}(u),c=function(e){var t=e.map((function(e){var t;return e.match(/or/)?+(null===(t=e.match(/\d+/))||void 0===t?void 0:t.join()):0}));return Math.max.apply(Math,k(t))}(u);return(0,i.jsx)(TX,{title:"Enhanced Stereochemistry",className:Z3,params:o,result:function(){return a},valid:function(){return s},withDivider:!0,buttons:["Cancel","OK"],buttonsNameMap:{OK:"Apply"},children:(0,i.jsx)(AQ,q3(q3({schema:{title:"Enhanced Stereo",type:"object",properties:{type:{type:"string"},andNumber:{type:"integer"},orNumber:{type:"integer"}}},init:r},n),{},{children:(0,i.jsxs)("fieldset",{children:[(0,i.jsxs)("label",{children:[(0,i.jsx)(MQ,{name:"type",labelPos:!1,type:"radio",value:Q.Abs,checked:a.type===Q.Abs}),"ABS"]}),0!==l&&(0,i.jsxs)("label",{children:[(0,i.jsx)(MQ,{name:"type",labelPos:!1,type:"radio",value:Q.And,checked:a.type===Q.And}),"Add to AND",(0,i.jsx)(MQ,{name:"andNumber",schema:(0,R.range)(1,l+1),type:"text",className:H3}),"Group"]}),0!==c&&(0,i.jsxs)("label",{children:[(0,i.jsx)(MQ,{name:"type",labelPos:!1,type:"radio",value:Q.Or,checked:a.type===Q.Or}),"Add to OR",(0,i.jsx)(MQ,{name:"orNumber",schema:(0,R.range)(1,c+1),type:"text",className:H3}),"Group"]}),(0,i.jsxs)("label",{children:[(0,i.jsx)(MQ,{name:"type",labelPos:!1,type:"radio",value:"&".concat(l+1)}),"Create new AND Group"]}),(0,i.jsxs)("label",{children:[(0,i.jsx)(MQ,{name:"type",labelPos:!1,type:"radio",value:"or".concat(c+1)}),"Create new OR Group"]})]})}))})})),Y3="labelEdit-module_labelEdit__9LnIH",X3="labelEdit-module_labelEditInputField__tb-J4",$3=["formState"];function J3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J3(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function e4(e){var t=Math.abs(e.charge),n=["",":",".","^^"][e.radical]||"",r="";return t&&(r=e.charge<0?"-":"+"),(e.isotope||"")+e.label+n+(t>1?t:"")+r}function t4(e){var t=e.match(/^(\d+)?([a-z*]{1,3})(\.|:|\^\^)?(\d+[-+]|[-+])?$/i);if(t){var n="*"===t[2]?"A":(0,F.capitalize)(t[2]),r=0,i=0,o=0;if(t[1]&&(i=parseInt(t[1])),t[3]&&(o={":":1,".":2,"^^":3}[t[3]]),t[4]&&(r=parseInt(t[4]),isNaN(r)&&(r=1),t[4].endsWith("-")&&(r=-r)),"A"===n||"Q"===n||"X"===n||"M"===n||H(n))return{label:n,charge:r,isotope:i,radical:o}}return null}var n4=(0,nu.$j)((function(e){return{formState:e.modal.form}}))((function(e){var t={label:e.letter||e4(e)},n=e.formState,r=(0,N.Z)(e,$3),o=n.result,a=n.valid;return(0,i.jsx)(TX,{title:"Label Edit",valid:function(){return a},withDivider:!0,result:function(){return t4(o.label)},className:Y3,buttons:["Cancel","OK"],buttonsNameMap:{OK:"Apply"},focusable:!1,params:r,children:(0,i.jsx)(AQ,Q3(Q3({schema:JD,customValid:{label:function(e){return t4(e)}},init:t},n),{},{children:(0,i.jsx)(MQ,{name:"label",maxLength:"20",size:"10",autoFocus:!0,className:X3})}))})})),r4="AtomInfo-module_ket_atom_info__GOuZ6",i4="AtomInfo-module_none__PRuzx";function o4(e){var t=e.el,n=e.isInfo,r={color:V[t.label]||"black",fontSize:"12px"},o={color:V[t.label]||"black",fontWeight:"bold",fontSize:"18px"};return(0,i.jsxs)("div",{className:(0,tu.Z)(r4,!n&&i4),children:[(0,i.jsx)("div",{style:r,children:t.number}),(0,i.jsx)("span",{style:o,children:t.label}),(0,i.jsx)("br",{}),t.title,(0,i.jsx)("br",{}),t.mass]})}function a4(){return(0,i.jsx)("tbody",{children:(0,i.jsx)("tr",{children:(0,F.range)(0,19).map((function(e){return(0,i.jsx)("th",{children:e||""},e)}))})})}function s4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s4(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s4(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l4(e){var t=e.row,n=e.caption,r=e.refer,o=e.onAtomSelect,a=e.onDoubleClick,s=e.currentEvents,u=e.atomClassNames,l=e.className;return(0,i.jsx)("tbody",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:n}),t.map((function(e,t){return"number"!==typeof e?(0,i.jsx)("td",{children:(0,i.jsx)(eY,u4({el:e,className:tu.Z.apply(void 0,k(u(e))),onClick:function(){return o(e.label)},onDoubleClick:function(){return a()}},s(e)))},t):r(e)?(0,i.jsx)("td",{className:l,children:r(e)},t):(0,i.jsx)("td",{colSpan:e},t)}))]})})}function c4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c4(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c4(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h4(e){var t=e.row,n=e.caption,r=e.onAtomSelect,o=e.onDoubleClick,a=e.currentEvents,s=e.atomClassNames,u=e.className;return(0,i.jsx)("tbody",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{colSpan:"3",className:u,children:n}),t.map((function(e){return(0,i.jsx)("td",{children:(0,i.jsx)(eY,f4({el:e,className:tu.Z.apply(void 0,k(s(e))),onClick:function(){return r(e.label)},onDoubleClick:function(){return o()}},a(e)))},e.label)})),(0,i.jsx)("td",{})]})})}var d4={"button-common-styles":"ElementsTable-module_button-common-styles__-6eHN",scrollbar:"ElementsTable-module_scrollbar__0R-HA",table:"ElementsTable-module_table__iNPVY",main_row:"ElementsTable-module_main_row__csN5a",outiner_row:"ElementsTable-module_outiner_row__fzfGL",noble:"ElementsTable-module_noble__65B92",alkali:"ElementsTable-module_alkali__sM9z9","alkaline-earth":"ElementsTable-module_alkaline-earth__t2h2s",metalloid:"ElementsTable-module_metalloid__Ui4Y8","other-nonmetal":"ElementsTable-module_other-nonmetal__mbkMN","post-transition":"ElementsTable-module_post-transition__k4C-G",transition:"ElementsTable-module_transition__GCnID",lanthanide:"ElementsTable-module_lanthanide__wVoLa",actinide:"ElementsTable-module_actinide__bVCBg",halogen:"ElementsTable-module_halogen__W6EjM","unknown-props":"ElementsTable-module_unknown-props__d9rq4","unknown-state":"ElementsTable-module_unknown-state__lRBCp",button:"ElementsTable-module_button__xCaL4",selected:"ElementsTable-module_selected__B9LGf"};function p4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p4(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p4(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m4(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var g4=["alkali","alkaline-earth","transition","post-transition"],y4="metal",b4="unknown-props",x4="unknown-state",_4="button",w4="selected",S4={He:16,B:10,Al:10,Hf:1,Rf:1},E4="actinide",k4="lanthanide",O4=G((function(e){return e&&e.type!==E4&&e.type!==k4&&89!==e.number&&57!==e.number})).reduce((function(e,t){var n=e[t.period-1];return n?(S4[t.label]&&n.push(S4[t.label]),n.push(t)):e.push([t]),e}),[]),A4=G((function(e){return e&&(e.type===k4||57===e.number)})),C4=G((function(e){return e&&(e.type===E4||89===e.number)}));var M4=function(e){p(n,e);var t=m4(n);function n(){var e;(0,l.Z)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(m(e),"getAtomClassNames",(function(t){var n=e.props.selected,r=g4.includes(t.type)?"".concat(t.type," ").concat(y4):t.type||b4;return[].concat(k(r.split(" ")),[t.state||x4,t.origin,_4,n(t.label)&&w4]).map((function(e){return d4[e]}))})),e}return(0,c.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return e.value!==this.props.value}},{key:"render",value:function(){var e=this,t=this.props,n={currentEvents:t.currentEvents,onAtomSelect:t.onAtomSelect,onDoubleClick:t.onDoubleClick};return(0,i.jsxs)("table",{className:d4.table,summary:"Periodic table of the chemical elements",children:[(0,i.jsx)(a4,{}),O4.map((function(t,r){return(0,i.jsx)(l4,v4({atomClassNames:e.getAtomClassNames,className:d4.main_row,row:t,caption:r+1,refer:function(e){return 1===e&&(5===r?"*":"**")}},n),r)})),(0,i.jsx)(h4,v4({atomClassNames:this.getAtomClassNames,className:d4.outiner_row,row:A4,caption:"*"},n)),(0,i.jsx)(h4,v4({atomClassNames:this.getAtomClassNames,className:d4.outiner_row,row:C4,caption:"**"},n))]})}}]),n}(eu.Component),T4=function(e){return["Acyclic","Cyclic","Acyclic Carbo","Cyclic Carbo","Acyclic Hetero","Cyclic Hetero"].includes(e)},P4={"button-common-styles":"GenSet-module_button-common-styles__0Ro-U",scrollbar:"GenSet-module_scrollbar__Ev8Uz",genGroupLegendBox:"GenSet-module_genGroupLegendBox__CSTQr",legendBox:"GenSet-module_legendBox__0zIAk",SpecialNodes:"GenSet-module_SpecialNodes__oFKp3",AtomGenerics:"GenSet-module_AtomGenerics__MoQCf",GroupGenerics:"GenSet-module_GroupGenerics__pFPtX",Cyclic:"GenSet-module_Cyclic__VJRtt",Acyclic:"GenSet-module_Acyclic__R97MM",CyclicCarbo:"GenSet-module_CyclicCarbo__Aanb0",AcyclicCarbo:"GenSet-module_AcyclicCarbo__nowGn",CyclicHetero:"GenSet-module_CyclicHetero__bbOnT",AcyclicHetero:"GenSet-module_AcyclicHetero__hnr4G",button:"GenSet-module_button__TCbeM",selected:"GenSet-module_selected__58d2u"};function R4(e){var t=e.labels,n=e.selected,o=e.onAtomSelect,a=e.className,s=e.group;return(0,i.jsx)(i.Fragment,{children:t.map((function(e,t){var u,l=e.items,c=e.displayName;return(0,i.jsxs)("fieldset",{className:a,children:[(0,i.jsx)("div",{className:P4[(u=s,u.replaceAll(" ",""))],children:l.map((function(e,t){return(0,i.jsx)("button",{onClick:function(){return o(e.label)},title:e.description||e.label,className:(0,tu.Z)((0,r.Z)({},P4.selected,n(e.label)),P4.button),children:e.label},t)}))}),!T4(s)&&c&&(0,i.jsx)("div",{className:P4.legendBox,children:(0,i.jsx)("legend",{children:c})}),T4(s)&&c&&(0,i.jsx)("div",{className:P4.genGroupLegendBox,children:(0,i.jsx)("legend",{className:P4.genGroupLegend,children:c})})]},t)}))})}var I4={fieldFlexWrapper:"GenGroup-module_fieldFlexWrapper__mBHRt",buttonContainer:"GenGroup-module_buttonContainer__7qTti",genButtonContainer:"GenGroup-module_genButtonContainer__6Bwe1",subGroup:"GenGroup-module_subGroup__afiEU",legendMain:"GenGroup-module_legendMain__h-Wl3",legend:"GenGroup-module_legend__JWafm",fieldset:"GenGroup-module_fieldset__JehYt"},L4=function(e){return["Atom Generics","Special Nodes","Group Generics","Acyclic","Cyclic"].includes(e)?"legendMain":"legend"},N4=function(e){var t=e.group,n=e.onAtomSelect,r=e.selected;return(0,i.jsx)("div",{className:I4.fieldFlexWrapper,children:(0,i.jsxs)("fieldset",{className:I4.fieldset,children:[(0,i.jsx)("legend",{className:I4[L4(t.title)],children:t.title}),(0,i.jsx)("div",{className:T4(t.title)?I4.genButtonContainer:I4.buttonContainer,children:t.itemSets&&(0,i.jsx)(R4,{labels:t.itemSets,selected:r,onAtomSelect:n,className:I4.subGroup,group:t.title})})]})})},j4="GenericGroups-module_genericGroups__z4EaG",D4="GenericGroups-module_topGroupsContainer__bMeoG",B4="GenericGroups-module_groupGenerics__6UpH6",z4="GenericGroups-module_subgroupContainer__xULxX",F4="BoxWithLines-module_horizintalNodeLines__QO-Su",V4="BoxWithLines-module_upperLines__8pL-R",U4="BoxWithLines-module_lowerLine__tBZJd",Z4="BoxWithLines-module_verticalNodeLines__wBgwS",H4=function(){return(0,i.jsxs)("div",{className:F4,children:[(0,i.jsx)("div",{className:V4}),(0,i.jsx)("div",{className:U4})]})},G4=function(){return(0,i.jsxs)("div",{className:Z4,children:[(0,i.jsx)("div",{className:V4}),(0,i.jsx)("div",{className:U4})]})};function W4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W4(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W4(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K4,Y4=function(e,t,n){return(0,i.jsx)(N4,{group:X4[e],selected:t,onAtomSelect:n})},X4=function e(t){for(var n={},r=0,i=Object.keys(t);r<i.length;r++){var o,a=i[r];n[a]=q4({},t[a]),null!==(o=n[a])&&void 0!==o&&o.subGroups&&(n=q4(q4({},n),e(n[a].subGroups)))}return n}({"atoms-gen":{title:"Atom Generics",itemSets:[{displayName:"any atom",items:[{label:"A",description:"Any atom except hydrogen"},{label:"AH",description:"Any atom, including hydrogen"}]},{displayName:"except C or H",items:[{label:"Q",description:"Any heteroatom (any atom except C or H)"},{label:"QH",description:"Any atom except C"}]},{displayName:"any metal",items:[{label:"M",description:"Any metal"},{label:"MH",description:"Any metal or hydrogen"}]},{displayName:"any halogen",items:[{label:"X",description:"Any halogen"},{label:"XH",description:"Any halogen or hydrogen"}]}]},"special-nodes":{title:"Special Nodes",itemSets:[{items:[{label:"H+",description:"Proton"},{label:"D",description:"Deuterium"},{label:"T",description:"Tritium"},{label:"R",description:"Pseudoatom"},{label:"Pol",description:"Polymer Bead"}]}]},"group-gen":{title:"Group Generics",itemSets:[{items:[{label:"G",description:"Any group"},{label:"GH",description:"Any group or hydrogen"}]},{items:[{label:"G*",description:"Any group with a ring closure"},{label:"GH*",description:"Any group of hydrogen with a ring closure"}]}],subGroups:{"group-acyclic":{title:"Acyclic",itemSets:[{items:[{label:"ACY",description:"Acyclic group"},{label:"ACH",description:"Acyclic group or hydrogen"}]}],subGroups:{"acyclic-carbo":{title:"Acyclic Carbo",itemSets:[{items:[{label:"ABC",description:"Carbocyclic"},{label:"ABH",description:"Carbocyclic of hydrogen"}]},{displayName:"alkynyl",items:[{label:"AYL",description:"Alkynyl"},{label:"AYH",description:"Alkynyl or hydrogen"}]},{displayName:"alkyl",items:[{label:"ALK",description:"Alkyl"},{label:"ALH",description:"Alkyl or hydrogen"}]},{displayName:"alkenyl",items:[{label:"AEL",description:"Alkenyl"},{label:"AEH",description:"Alkenyl or hydrogen"}]}]},"acyclic-hetero":{title:"Acyclic Hetero",itemSets:[{items:[{label:"AHC",description:"Heteroacyclic"},{label:"AHH",description:"Heterocyclic or hydrogen"}]},{items:[{label:"AOX",description:"Alkoxy"},{label:"AOH",description:"Alkoxy or hydrogen"}]}]}}},"group-cyclic":{title:"Cyclic",itemSets:[{items:[{label:"CYC",description:"Cyclic group"},{label:"CYH",description:"Cyclic group or hydrogen"}]},{displayName:"no carbon",items:[{label:"CXX",description:"Cyclic group with no Carbon atoms"},{label:"CXH",description:"Cyclic group with no Carbon atoms or hydrogen"}]}],subGroups:{"cyclic-carbo":{title:"Cyclic Carbo",itemSets:[{items:[{label:"CBC",description:"Carbocyclic derivatives"},{label:"CBH",description:"Carbocyclic derivatives or hydrogen"}]},{displayName:"atyl",items:[{label:"ARY",description:"Any aryl group"},{label:"ARH",description:"Any aryl group or hydrogen"}]},{displayName:"cycloalkyl",items:[{label:"CAL",description:"Any cycloalkyl group"},{label:"CAH",description:"Any cycloalkyl group or hydrogen"}]},{displayName:"cycloalkenyl",items:[{label:"CEL",description:"Any cyloalkenyl group"},{label:"CEH",description:"Any cyloalkenyl group or hydrogen"}]}]},"cyclic-hetero":{title:"Cyclic Hetero",itemSets:[{items:[{label:"CHC",description:"Heterocyclic group"},{label:"CHH",description:"Heterocyclic group or hydrogen"}]},{displayName:"hetero aryl",items:[{label:"HAR",description:"Heteroaryl group"},{label:"HAH",description:"Heteroaryl group or hydrogen"}]}]}}}}}});function $4(e){var t=e.selected,n=e.onAtomSelect;return(0,i.jsxs)("div",{className:j4,children:[(0,i.jsxs)("div",{className:D4,children:[Y4(K4.atomsGen,t,n),Y4(K4.specialNodes,t,n)]}),Y4(K4.groupGen,t,n),(0,i.jsx)(H4,{}),(0,i.jsxs)("div",{className:B4,children:[(0,i.jsxs)("div",{children:[Y4(K4.groupAcyclic,t,n),(0,i.jsxs)("div",{className:z4,children:[(0,i.jsx)(G4,{}),(0,i.jsxs)("div",{children:[Y4(K4.acyclicCarbo,t,n),Y4(K4.acyclicHetero,t,n)]})]})]}),(0,i.jsxs)("div",{children:[Y4(K4.groupCyclic,t,n),(0,i.jsxs)("div",{className:z4,children:[(0,i.jsx)(G4,{}),(0,i.jsxs)("div",{children:[Y4(K4.cyclicCarbo,t,n),Y4(K4.cyclicHetero,t,n)]})]})]})]})]})}!function(e){e.atomsGen="atoms-gen",e.specialNodes="special-nodes",e.groupGen="group-gen",e.groupAcyclic="group-acyclic",e.acyclicCarbo="acyclic-carbo",e.acyclicHetero="acyclic-hetero",e.groupCyclic="group-cyclic",e.cyclicHetero="cyclic-hetero",e.cyclicCarbo="cyclic-carbo"}(K4||(K4={}));var J4="TypeChoice-module_fieldset__yJqT7",Q4=["value","onChange"];function e5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e5(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e5(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var n5=[{title:"Single",value:"atom"},{title:"List",value:"list"},{title:"Not List",value:"not-list"}];function r5(e){var t=e.value,n=e.onChange,r=(0,N.Z)(e,Q4);return(0,i.jsx)("fieldset",{className:J4,children:n5.map((function(e){return(0,i.jsxs)("label",{children:[(0,i.jsx)(eQ,t5({type:"radio",value:e.value,checked:e.value===t,onChange:function(){return n(e.value)}},r)),e.title]},e.title)}))})}var i5="PeriodTable-module_elementsTable__Vcz12",o5="PeriodTable-module_dialogHeader__-Wgw4",a5="PeriodTable-module_periodTable__l-Uqx";function s5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u5(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var l5=function(e){p(n,e);var t=u5(n);function n(e){var o;(0,l.Z)(this,n),o=t.call(this,e),(0,r.Z)(m(o),"changeType",(function(e){("list"===o.state.type||"not-list"===o.state.type)&&("list"===e||"not-list"===e)?o.setState({type:e}):o.setState({type:e,value:"atom"===e||"gen"===e?null:[]})})),(0,r.Z)(m(o),"headerContent",(function(){return(0,i.jsxs)("div",{className:o5,children:[(0,i.jsx)($W,{name:"period-table"}),(0,i.jsx)("span",{children:"Periodic Table"})]})})),(0,r.Z)(m(o),"selected",(function(e){var t=o.state,n=t.type,r=t.value;return"atom"===n||"gen"===n?r===e:r.includes(e)})),(0,r.Z)(m(o),"onAtomSelect",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){var n=o.result(),r=o.state.type;n&&"atom"===r&&o.props.onOk(o.result())}else{var i=o.state,a=i.type,s=i.value;o.setState({value:"atom"===a||"gen"===a?e:(0,F.xor)([e],s)})}})),(0,r.Z)(m(o),"result",(function(){var e=o.state,t=e.type,n=e.value;return n&&n.length?"atom"===t?{label:n,pseudo:null}:"gen"===t?{type:t,label:n,pseudo:n}:{type:t,values:n}:null})),(0,r.Z)(m(o),"currentEvents",(function(e){return{onMouseEnter:function(){return o.setState({current:e,isInfo:!0})},onMouseLeave:function(){return o.setState({isInfo:!1})}}}));var a=o.props.pseudo?"gen":null;return o.state={type:e.type||a||"atom",value:e.values||e.label||null,current:H(2),isInfo:!1},o}return(0,c.Z)(n,[{key:"render",value:function(){var e=this,t=this.state;t.type;var n=t.value,r=this.headerContent;return(0,i.jsx)(TX,{headerContent:(0,i.jsx)(r,{}),className:i5,params:this.props,result:this.result,buttons:["Cancel","OK"],buttonsNameMap:{OK:"Add"},needMargin:!1,footerContent:(0,i.jsx)(r5,{value:this.state.type,onChange:this.changeType}),children:(0,i.jsxs)("div",{className:a5,children:[(0,i.jsx)(o4,{el:this.state.current,isInfo:this.state.isInfo}),(0,i.jsx)(M4,{value:n,currentEvents:this.currentEvents,selected:this.selected,onAtomSelect:function(t){return e.onAtomSelect(t)},onDoubleClick:function(t){return e.onAtomSelect(t,!0)}})]})})}}]),n}(eu.Component);function c5(e){var t=e.selection();return t&&1===Object.keys(t).length&&t.atoms&&1===Object.keys(t.atoms).length?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s5(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s5(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},sB(e.struct().atoms.get(t.atoms[0]))):{}}var f5=(0,nu.$j)((function(e,t){return t.values||t.label?{}:c5(e.editor)}),(function(e,t){return{onOk:function(n){n.type&&"atom"!==n.type||e({type:"ADD_ATOMS",data:n.label}),e(SB({tool:"atom",opts:uB(n)})),t.onOk(n)}}}))(l5),h5="ExtendedTable-module_extendedTable__2-hjV";function d5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p5(e){var t,n=e.selection();return 1===(null===n||void 0===n||null===(t=n.atoms)||void 0===t?void 0:t.length)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d5(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d5(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},sB(e.struct().atoms.get(n.atoms[0]))):{}}var v5=(0,nu.$j)((function(e,t){return t.values||t.label?{}:p5(e.editor)}),(function(e,t){return{onOk:function(n){e(SB({tool:"atom",opts:uB(n)})),t.onOk(n)}}}))((function(e){var t=(0,eu.useState)(null),n=(0,M.Z)(t,2),r=n[0],o=n[1];return(0,i.jsx)(TX,{title:"Extended Table",withDivider:!0,className:h5,params:e,result:function(){return r&&r.length?{type:"gen",label:r,pseudo:r}:null},buttons:["Cancel","OK"],buttonsNameMap:{OK:"Add"},needMargin:!1,children:(0,i.jsx)($4,{selected:function(e){return r===e},onAtomSelect:function(e){o(e)}})})})),m5="RemoveFG-module_window__6PHH4",g5="RemoveFG-module_question__J8Qzx",y5="RemoveFG-module_header__1hBAs",b5="RemoveFG-module_footer__8wImu",x5="RemoveFG-module_buttonOk__zR5x4",_5="RemoveFG-module_buttonCancel__xCaJt";function w5(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return S5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S5(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function S5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E5(e){var t,n=e.value,r=e.onChange,o=e.schema,a=e.disabledIds,s=e.multiple,u=e.classes.selected||"selected";return(0,i.jsx)("ul",{children:o.items.enum.map((function(e,l){return t=n.includes(e)?u:"",(0,i.jsx)("li",{children:(0,i.jsx)("button",{disabled:a.includes(e),type:"button",className:t,onClick:function(){return r(function(e,t,n){return e?(0,F.xor)(t,[n]):(0,F.xor)(t,t.concat([n]))}(s,n,e))},children:o.items.enumNames[l]})},e)}))})}var k5={"button-common-styles":"rgroup-module_button-common-styles__O66iR",scrollbar:"rgroup-module_scrollbar__GmU8o",rgroup:"rgroup-module_rgroup__Pm-uA",selected:"rgroup-module_selected__hP5cM"},O5=["disabledIds","values","formState","type"];function A5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A5(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A5(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M5=(0,nu.$j)((function(e){return{formState:e.modal.form}}))((function(e){var t=e.disabledIds,n=e.values,r=e.formState,o=e.type,a=(0,N.Z)(e,O5);return(0,i.jsx)(TX,{title:"R-Group",className:k5.rgroup,params:a,result:function(){return r.result},buttonsNameMap:{OK:"Apply"},buttons:["Cancel","OK"],withDivider:!0,children:(0,i.jsx)(AQ,C5(C5({schema:$D,init:{values:n}},r),{},{children:(0,i.jsx)(MQ,{name:"values",multiple:"atom"===o,labelPos:!1,component:E5,disabledIds:t,classes:k5})}))})})),T5={"button-common-styles":"sgroup-module_button-common-styles__MAeEP",scrollbar:"sgroup-module_scrollbar__T3fpf",sgroup:"sgroup-module_sgroup__Kh2Xj"},P5=["title","name","schema"],R5=["context","fieldName","fieldValue","type","radiobuttons","formState"];function I5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I5(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I5(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N5(e){var t=e.title,n=e.name,r=e.schema,o=(0,N.Z)(e,P5),a=Object.keys(r).reduce((function(e,t){return e.enum.push(t),e.enumNames.push(r[t].title||t),e}),{title:t,type:"string",default:"",minLength:1,enum:[],enumNames:[]});return(0,i.jsx)(MQ,L5({name:n,options:gQ(a),component:fQ},o))}var j5=function(e,t,n,r){return Object.keys(e.properties).filter((function(e){return"type"!==e&&"context"!==e&&"fieldName"!==e})).map((function(o){return"radiobuttons"===o?(0,i.jsx)(MQ,{name:o,checked:r,type:"radio",labelPos:!1},"".concat(t,"-").concat(n,"-").concat(o,"-radio")):"fieldValue"===o&&e.properties.fieldValue.enum?(0,i.jsx)(MQ,{options:gQ(e.properties.fieldValue),name:o,component:fQ},"".concat(t,"-").concat(n,"-").concat(o,"-select")):(0,i.jsx)(MQ,{name:o,type:"textarea"},"".concat(t,"-").concat(n,"-").concat(o,"-select"))}))},D5=(0,nu.$j)((function(e){return{formState:e.modal.form}}))((function(e){var t=e.context,n=e.fieldName,r=e.fieldValue,o=e.type,a=e.radiobuttons,s=e.formState,u=(0,N.Z)(e,R5),l=s.result,c=s.valid,f={context:t,fieldName:n||ID(t),type:o,radiobuttons:a};f.fieldValue=r||ID(t,f.fieldName);var h=PD[l.context][l.fieldName]||TD,d={context:l.context.trim(),fieldName:l.fieldName.trim(),fieldValue:"string"===typeof l.fieldValue?l.fieldValue.trim():l.fieldValue};return(0,i.jsx)(TX,{title:"S-Group Properties",className:T5.sgroup,result:function(){return l},valid:function(){return c},buttons:["Cancel","OK"],buttonsNameMap:{OK:"Apply"},withDivider:!0,needMargin:!1,params:u,children:(0,i.jsx)(AQ,L5(L5({serialize:d,schema:h,init:f},s),{},{children:(0,i.jsxs)("fieldset",{children:[(0,i.jsx)(TQ,{title:"Context",name:"context",schema:PD}),(0,i.jsx)(N5,{title:"Field name",name:"fieldName",schema:PD[l.context]}),j5(h,l.context,l.fieldName,a)]})}))})})),B5=["formState"];function z5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z5(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z5(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V5,U5,Z5,H5,G5,W5,q5,K5,Y5,X5,$5,J5=function(e){return Object.keys(tB[e].properties).filter((function(e){return"type"!==e})).map((function(t){var n={};return"name"===t&&(n.maxLength=15),"fieldName"===t&&(n.maxLength=30),"fieldValue"===t&&(n.type="textarea"),"radiobuttons"===t&&(n.type="radio"),"connectivity"===t?(0,i.jsx)(MQ,F5(F5({name:t},n),{},{component:fQ,options:gQ(tB[e].properties[t])}),"".concat(e,"-").concat(t)):(0,i.jsx)(MQ,F5({name:t},n),"".concat(e,"-").concat(t))}))},Q5=(0,nu.$j)((function(e){return{formState:e.modal.form}}))((function(e){var t=e.formState,n=(0,N.Z)(e,B5),r=t.result,o=t.valid,a=r.type;return(0,i.jsx)(TX,{title:"S-Group Properties",className:T5.sgroup,result:function(){return r},valid:function(){return o},buttons:["Cancel","OK"],buttonsNameMap:{OK:"Apply"},withDivider:!0,params:n,children:(0,i.jsxs)(AQ,F5(F5({schema:tB[a],init:n},t),{},{children:[(0,i.jsx)(TQ,{title:"Type",name:"type",schema:tB}),"GEN"!==a&&(0,i.jsx)("fieldset",{className:"DAT"===a?T5.data:"base",children:J5(a)})]}))})})),e6={"button-common-styles":"template-lib-module_button-common-styles__9adxB",scrollbar:"template-lib-module_scrollbar__ZFwCC",warning:"template-lib-module_warning__UqgEG",dialogHeader:"template-lib-module_dialogHeader__-AmwE",button:"template-lib-module_button__LKf1c",dialog_body:"template-lib-module_dialog_body__QtL0J",inputContainer:"template-lib-module_inputContainer__dxoHA",searchIcon:"template-lib-module_searchIcon__o7cAy",accordionSummary:"template-lib-module_accordionSummary__2hIop",groupIcon:"template-lib-module_groupIcon__LBIRH",expandIcon:"template-lib-module_expandIcon__Fb1EU",tabsContent:"template-lib-module_tabsContent__1QMnN",resultsContainer:"template-lib-module_resultsContainer__KnPBZ",saveButton:"template-lib-module_saveButton__8PE6t",tabs:"template-lib-module_tabs__YkpEG"},t6=["onInit"],n6=["name","onNameEdit","onAttachEdit"];function r6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r6(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r6(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o6(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var a6=(0,bu.Z)(TX)(V5||(V5=xu(["\n  background-color: #fff;\n\n  & header {\n    text-transform: none;\n    border-bottom: 1px solid #e1e5ea;\n    margin: 0;\n    padding: 12px;\n  }\n\n  & form {\n    display: flex;\n\n    & label::after {\n      top: 92px;\n      margin-right: 12px;\n    }\n  }\n"]))),s6=(0,bu.Z)("div")(U5||(U5=xu(["\n  border: 1px solid #b4b9d6;\n  background-color: #ffff;\n  border-radius: 5px;\n  position: relative;\n  height: 300px;\n  width: 330px;\n  overflow: hidden;\n\n  & .structEditor {\n    height: 100%;\n    width: 100%;\n    border: none;\n  }\n"]))),u6=(0,bu.Z)("div")(Z5||(Z5=xu(["\n  padding: 0 5px;\n"]))),l6=(0,bu.Z)("div")(H5||(H5=xu(["\n  padding: 12px;\n  border-radius: 0 0 0 8px;\n  background-color: #eff2f5;\n"]))),c6=(0,bu.Z)("div")(G5||(G5=xu(["\n  width: 40%;\n  min-width: 200px;\n  box-sizing: border-box;\n  padding: 12px;\n  display: flex;\n  flex-direction: column;\n"]))),f6=(0,bu.Z)(MQ)(W5||(W5=xu(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 12px;\n\n  & > input[type='text'] {\n    display: block;\n    width: 100%;\n    box-sizing: border-box;\n    padding: 4px 16px 4px 8px;\n    border: 1px solid #cad3dd;\n    border-radius: 4px;\n    line-height: 16px;\n    font-size: 14px;\n    margin-top: 2px;\n\n    &:hover {\n      border-color: #43b5c0;\n    }\n\n    &:hover,\n    :focus {\n      box-shadow: none;\n    }\n  }\n\n  & span {\n    display: block;\n    width: 100%;\n  }\n"]))),h6=(0,bu.Z)("span")(q5||(q5=xu(["\n  display: block;\n  width: 100%;\n  height: 24px;\n  box-sizing: border-box;\n  padding: 4px 8px;\n  border: 1px solid #cad3dd;\n  border-radius: 4px;\n  line-height: 14px;\n  font-size: 14px;\n  background-color: #eff2f5;\n  margin-top: 2px;\n"]))),d6=(0,bu.Z)("div")(K5||(K5=xu(["\n  display: flex;\n  flex-direction: row;\n  margin-top: auto;\n  justify-content: flex-end;\n  gap: 8px;\n"]))),p6=(0,$N.iv)(Y5||(Y5=xu(["\n  width: fit-content;\n  padding: 5px 8px;\n  text-transform: none;\n  font-size: 12px;\n  line-height: 14px;\n  box-shadow: none;\n"]))),v6=(0,bu.Z)(Eu.Z)(X5||(X5=xu(["\n  ","\n  background-color: #167782;\n\n  &:hover {\n    background-color: #43b5c0;\n    box-shadow: none;\n  }\n\n  &:disabled {\n    background-color: #e1e5ea;\n    color: #333333;\n  }\n"])),p6),m6=(0,bu.Z)(Eu.Z)($5||($5=xu(["\n  ","\n  border-color: #585858;\n  color: #585858;\n\n  &:hover {\n    border-color: #333333;\n    color: #333333;\n    box-shadow: none;\n  }\n"])),p6),g6={selectionStyle:{fill:"#167782","fill-opacity":"0.28",stroke:"#167782"},hoverStyle:{stroke:"#1a7090","stroke-width":1.2},hoverStyleSimpleObject:{"stroke-opacity":.3}},y6=function(e){p(n,e);var t=o6(n);function n(e){var r,i=e.onInit,o=(0,N.Z)(e,t6);return(0,l.Z)(this,n),(r=t.call(this)).tmpl=function(e){var t={struct:x6(e.struct),props:{atomid:+e.props.atomid||0,bondid:+e.props.bondid||0}};return t.struct.name=e.struct.name,t}(o.tmpl),i(r.tmpl.struct.name,r.tmpl.props),r.onResult=r.onResult.bind(m(r)),r}return(0,c.Z)(n,[{key:"onResult",value:function(){var e=this.props,t=e.name,n=e.atomid,r=e.bondid;return t&&(t!==this.tmpl.struct.name||n!==this.tmpl.props.atomid||r!==this.tmpl.props.bondid)&&t.trim().length?{name:t,attach:{atomid:n,bondid:r}}:null}},{key:"checkIsValidName",value:function(e){return!!e&&!this.props.templateLib.some((function(t){return t.struct.name===e&&"User Templates"===t.props.group}))&&e.length<=128}},{key:"render",value:function(){var e=this,t=this.props,n=t.name;t.onNameEdit;var r=t.onAttachEdit,o=(0,N.Z)(t,n6),a=this.tmpl.struct,s=a.atoms.get(this.props.atomid)&&a.bonds.get(this.props.bondid)?this.props:this.tmpl.props,u=s.atomid,l=s.bondid,c=Object.assign(g6,this.props.globalSettings,{scale:_6(a)});return(0,i.jsx)(a6,{title:"Template edit",result:this.onResult,valid:function(){return e.props.formState.valid&&n},params:o,buttons:[],needMargin:!1,children:(0,i.jsxs)(AQ,i6(i6({schema:rB,customValid:{name:function(t){return e.checkIsValidName(t)}}},this.props.formState),{},{children:[(0,i.jsxs)(l6,{children:[(0,i.jsx)(s6,{children:(0,i.jsx)(BJ,{className:"structEditor",struct:a,onAttachEdit:r,tool:"attach",toolOpts:{atomid:u,bondid:l},options:c,showAttachmentPoints:!1})}),mD()?null:(0,i.jsx)(u6,{children:vD})]}),(0,i.jsxs)(c6,{children:[(0,i.jsx)(f6,{name:"name",value:n,onChange:this.props.onNameEdit,placeholder:"template"}),(0,i.jsx)("span",{children:"Selected attachment points"}),(0,i.jsxs)(h6,{children:["Atom ID: ",(0,i.jsx)("strong",{children:u})," Bond ID:"," ",(0,i.jsx)("strong",{children:l})]}),(0,i.jsxs)(d6,{children:[(0,i.jsx)(m6,{variant:"outlined",onClick:this.props.onCancel,className:e6.button,children:"Cancel"}),(0,i.jsx)(v6,{variant:"contained",onClick:function(){return e.props.onOk(e.onResult())},className:e6.button,disabled:!this.checkIsValidName(n),children:"Apply"})]})]})]}))})}}]),n}(eu.Component),b6=(0,nu.$j)((function(e){return i6(i6({},e.templates.attach),{},{templateLib:e.templates.lib,formState:e.modal.form,globalSettings:e.options.settings})}),(function(e){return{onInit:function(t,n){return e(function(e,t){return{type:"INIT_ATTACH",data:{name:e,atomid:t.atomid,bondid:t.bondid}}}(t,n))},onAttachEdit:function(t){return e({type:"SET_ATTACH_POINTS",data:{atomid:(n=t).atomid,bondid:n.bondid}});var n},onNameEdit:function(t){return e(function(e){return{type:"SET_TMPL_NAME",data:{name:e}}}(t))}}}))(y6);function x6(e){var t=e.clone(),n=t.getCoordBoundingBox();return t.atoms.forEach((function(e){e.pp=e.pp.sub(n.min)})),t.sgroups.forEach((function(e){e.pp=e.pp?e.pp.sub(n.min):n.min})),t.rxnArrows.forEach((function(e){e.pos=e.pos.map((function(e){return e.sub(n.min)}))})),t.rxnPluses.forEach((function(e){e.pp=e.pp.sub(n.min)})),t.simpleObjects.forEach((function(e){e.pos=e.pos.map((function(e){return e.sub(n.min)}))})),t.texts.forEach((function(e){e.position=e.position.sub(n.min)})),t}function _6(e){var t=e.getCoordBoundingBox(),n=220/Math.max(t.max.y-t.min.y,t.max.x-t.min.x);return n<35?35:n>50?50:40}var w6="TemplateTable-module_tableContent__dnVKg",S6="TemplateTable-module_structTitle__2XUWI",E6="TemplateTable-module_twoRowsTitleTable__ZYwHq",k6="TemplateTable-module_oneRowTitleTable__N8Ibd",O6="TemplateTable-module_struct__lOLBI",A6="TemplateTable-module_selectedTitle__J-cte",C6="TemplateTable-module_td__6LIhx",M6="TemplateTable-module_selected__qZEF9",T6="TemplateTable-module_button__dpOF0",P6="TemplateTable-module_deleteButton__KfBpW",R6="TemplateTable-module_editButton__A0BoE",I6=["tmpl","options"];function L6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L6(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L6(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j6(e,t){return e.struct.name||"".concat(e.props.group," template ").concat(t+1)}var D6,B6=function(e){var t=e.tmpl,n=e.options,r=(0,N.Z)(e,I6);return(0,i.jsx)(h1,N6({struct:t.modifiedStruct||t.struct,options:N6(N6({},n),{},{autoScaleMargin:15})},r))},z6=function(e){var t=e.templates,n=e.selected,r=e.onSelect,o=e.onDelete,a=e.onAttach,s=e.onDoubleClick,u=e.titleRows,l=void 0===u?2:u,c=(0,nu.v9)((function(e){return function(e){return e.options.settings}(e)}));return(0,i.jsx)("div",{className:"".concat(w6," ").concat(1===l?k6:E6),children:t.map((function(e,t){return(0,i.jsxs)("div",{className:e.struct!==(null===n||void 0===n?void 0:n.struct)?C6:"".concat(C6," ").concat(M6),title:mQ(j6(e,t)),onClick:function(){return r(e)},onDoubleClick:function(){return s(e)},children:[(0,i.jsx)(B6,{tmpl:e,options:c,className:O6}),(0,i.jsx)("div",{className:"".concat(S6," ").concat((null===n||void 0===n?void 0:n.struct)===e.struct?A6:""),children:mQ(j6(e,t))}),"User Templates"===e.props.group&&(0,i.jsx)("button",{className:"".concat(T6," ").concat(P6),onClick:function(){return o(e)},children:(0,i.jsx)($W,{name:"delete"})}),"Functional Groups"!==e.props.group&&(0,i.jsx)("button",{className:"".concat(T6," ").concat(R6),onClick:function(){return a(e)},children:(0,i.jsx)($W,{name:"edit"})})]},e.struct.name!==(null===n||void 0===n?void 0:n.struct.name)?"".concat(e.struct.name,"_").concat(t):"".concat(e.struct.name,"_").concat(t,"_selected"))}))})},F6="emptySearchResult-module_emptySearch__aUSew",V6=function(e){var t=e.textInfo;return(0,i.jsxs)("div",{className:F6,children:[(0,i.jsx)("p",{children:t}),(0,i.jsx)($W,{name:"not-found"})]})},U6=["children","value","index"],Z6=["filter","onFilter","onChangeGroup","mode","initialTab","functionalGroups","lib"];function H6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H6(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H6(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W6(e){var t=e.children,n=e.value,r=e.index,o=(0,N.Z)(e,U6);return(0,i.jsx)("div",G6(G6({className:e6.tabPanel,component:"div",role:"tabpanel",id:"scrollable-auto-tabpanel-".concat(r),"aria-labelledby":"scrollable-auto-tab-".concat(r)},o),{},{children:n===r&&t}))}function q6(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}}!function(e){e[e.TemplateLibrary=0]="TemplateLibrary",e[e.FunctionalGroupLibrary=1]="FunctionalGroupLibrary"}(D6||(D6={}));var K6=Lj((function(e){return e.lib}),(function(e){return e.filter}),(function(e,t){var n=new RegExp((0,F.escapeRegExp)(mQ(t)),"i");return(0,F.flow)((0,F.filter)((function(e){return!t||n.test(mQ(e.struct.name))||n.test(mQ(e.props.group))})),(0,F.reduce)((function(e,t){return e[t.props.group]?e[t.props.group].push(t):e[t.props.group]=[t],e}),{}))(e)})),Y6="Functional Groups",X6=function(){return(0,i.jsxs)("div",{className:e6.dialogHeader,children:[(0,i.jsx)($W,{name:"template-dialog"}),(0,i.jsx)("span",{children:"Templates"})]})},$6=function(e){var t=e.data,n=e.tab;return(0,i.jsx)("div",{style:{flexGrow:1},children:(0,i.jsx)(e0,{data:t,className:e6.saveButton,filename:n===D6.TemplateLibrary?"ketcher-tmpls.sdf":"ketcher-fg-tmpls.sdf",children:n===D6.TemplateLibrary?"Save template library to SDF":"Save functional groups to SDF"},"save-to-SDF")})},J6=(0,nu.$j)((function(e){var t,n,r;return G6(G6({},(0,F.omit)(["attach"],e.templates)),{},{initialTab:null===(t=e.modal)||void 0===t||null===(n=t.prop)||void 0===n?void 0:n.tab,functionalGroups:(r=e,r.functionalGroups.lib).map((function(e){var t=e.struct.clone();return t.sgroups.delete(0),G6(G6({},e),{},{modifiedStruct:t})}))})}),(function(e,t){return{onFilter:function(t){return e(function(e){return{type:"TMPL_CHANGE_FILTER",data:{filter:e.trim(),selected:null}}}(t))},onSelect:function(t){return e(function(e){return{type:"TMPL_SELECT",data:{selected:e}}}(t))},onChangeGroup:function(t){return e(function(e){return{type:"TMPL_CHANGE_GROUP",data:{group:e,selected:null}}}(t))},onAttach:function(t){return e(function(e){return function(t,n){Cq(t,"attach",{tmpl:e}).then((function(t){e.struct.name=t?t.name.trim():e.struct.name,e.props=t?Object.assign({},e.props,t.attach):e.props,"User Templates"===e.props.group&&Pq(n().templates.lib)}),(function(){return null})).then((function(){return Cq(t,"templates").catch((function(){return null}))}))}}(t))},onDelete:function(t){return e(function(e){return function(t,n){var r=n().templates.lib.filter((function(t){return t!==e}));t(function(e){return{type:"TMPL_DELETE",data:{tmpl:e}}}(e)),Pq(r)}}(t))},onOk:function(n){e(SB({tool:"template",opts:n})),t.onOk(n)}}}))((function(e){var t=e.filter,n=e.onFilter,r=e.onChangeGroup,o=e.mode,a=e.initialTab,s=e.functionalGroups,u=e.lib,l=(0,N.Z)(e,Z6),c=(0,eu.useState)(null!==a&&void 0!==a?a:D6.TemplateLibrary),f=(0,M.Z)(c,2),h=f[0],d=f[1],p=(0,eu.useState)([e.group]),v=(0,M.Z)(p,2),m=v[0],g=v[1],y=(0,eu.useState)(s[Y6]),b=(0,M.Z)(y,2),x=b[0],_=b[1],w=K6(e);(0,eu.useEffect)((function(){_(function(e,t){var n=new RegExp((0,F.escapeRegExp)(mQ(t)),"i");return(0,F.flow)((0,F.filter)((function(e){return!t||n.test(mQ(e.struct.name))})),(0,F.reduce)((function(e,t){return e[t.props.group]?e[t.props.group].push(t):e[t.props.group]=[t],e}),{}))(e)}(s,t)[Y6])}),[s,t]);var S=function(){var t=e.selected;return t?{struct:t.struct,aid:parseInt(String(t.props.atomid))||null,bid:parseInt(String(t.props.bondid))||null,mode:o}:null},E=new Sn,O=h===D6.TemplateLibrary?E.serialize(u):E.serialize(s),A=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r(t.props.group),n?e.onOk(S()):e.onSelect(t)};return(0,i.jsxs)(TX,{headerContent:(0,i.jsx)(X6,{}),footerContent:(0,i.jsx)($6,{tab:h,data:O}),className:"".concat(e6.dialog_body),params:(0,F.omit)(["group"],l),result:function(){return S()},buttons:["OK"],buttonsNameMap:{OK:"Add to canvas"},needMargin:!1,children:[(0,i.jsxs)("div",{className:e6.inputContainer,children:[(0,i.jsx)(uQ,{className:e6.input,type:"search",value:t,onChange:function(e){return n(e)},placeholder:"Search by elements..."}),(0,i.jsx)($W,{name:"search",className:e6.searchIcon})]}),(0,i.jsxs)(Nj.Z,{value:h,onChange:function(t,n){d(n),e.onSelect(null)},className:e6.tabs,children:[(0,i.jsx)(jj.Z,G6({label:"Template Library"},q6(D6.TemplateLibrary))),(0,i.jsx)(jj.Z,G6({label:"Functional Groups"},q6(D6.FunctionalGroupLibrary)))]}),(0,i.jsxs)("div",{className:e6.tabsContent,children:[(0,i.jsx)(W6,{value:h,index:D6.TemplateLibrary,children:(0,i.jsx)("div",{children:Object.keys(w).length?Object.keys(w).map((function(t){var n,r=m.includes(t);return(0,i.jsxs)(pj,{square:!0,onChange:(n=t,function(e,t){g(t?[].concat(k(m),[n]):k(m).filter((function(e){return e!==n})))}),expanded:r,children:[(0,i.jsxs)(Sj,{className:e6.accordionSummary,expandIcon:(0,i.jsx)($W,{className:e6.expandIcon,name:"chevron"}),children:[(0,i.jsx)($W,{name:"elements-group",className:e6.groupIcon}),"".concat(mQ(t)," (").concat(w[t].length,")")]}),(0,i.jsx)(Cj,{children:(0,i.jsx)(z6,{templates:r?w[t]:[],onSelect:function(e){return A(e)},onDoubleClick:function(e){return A(e,!0)},selected:e.selected,onDelete:e.onDelete,onAttach:e.onAttach})})]},t)})):(0,i.jsx)("div",{className:e6.resultsContainer,children:(0,i.jsx)(V6,{textInfo:"No items found"})})})}),(0,i.jsx)(W6,{value:h,index:D6.FunctionalGroupLibrary,children:null!==x&&void 0!==x&&x.length?(0,i.jsx)("div",{className:e6.resultsContainer,children:(0,i.jsx)(z6,{titleRows:1,onDoubleClick:function(e){return A(e,!0)},templates:x,onSelect:function(e){return A(e)},selected:e.selected})}):(0,i.jsx)("div",{className:e6.resultsContainer,children:(0,i.jsx)(V6,{textInfo:"No items found"})})})]})]})})),Q6="FontControl-module_fontSizeMenu__4RvmP",e8="FontControl-module_fontSizeOption__eGz-q",t8="FontControl-module_fontBtn__zGgG3",n8=function(e){var t=e.editorState,n=e.setEditorState,r=e.styles,o="13px",a=(0,eu.useState)(!1),s=(0,M.Z)(a,2),u=s[0],l=s[1],c=(0,eu.useState)(o),f=(0,M.Z)(c,2),h=f[0],d=f[1],p=r.fontSize.current(t);(0,eu.useEffect)((function(){d(p||o)}),[p]);var v=(0,F.range)(4,145),m=(0,eu.useMemo)((function(){return v.map((function(e){return(0,i.jsx)("div",{className:e8,onMouseDown:function(i){return function(e,i){e.preventDefault(),d(i);var o=r.fontSize.remove(t);n(r.fontSize.add(o,i)),l(!1)}(i,"".concat(e,"px"))},children:e},e)}))}),[u]);return(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{className:t8,onMouseDown:function(e){e.preventDefault(),l(!u)},children:parseFloat(h)}),u?(0,i.jsx)("div",{className:Q6,children:m}):null]})},r8="SpecialSymbolsList-module_window__4tD1N",i8="SpecialSymbolsList-module_button__uCp6O",o8=function(e){var t=e.select;return(0,i.jsx)("div",{className:r8,children:["\u03b1","\u03b2","\u03b3","\u03b4","\u03b5","\u03b6","\u03b7","\u03b8","\u03b9","\u03ba","\u03bb","\u03bc","\u03bd","\u03be","\u03bf","\u03c0","\u03c1","\u03c3","\u03c4","\u03c5","\u03c6","\u03c7","\u03c8","\u03c9","\u2103","\u2109","\u212b","\xb0","\u0127","\xb1","\u2030","\u221a","\u2190","\u2192","\u2190/","/\u2192","\u2194","\u220f","\u2211","\u221e","\u2202","\u2206","\u222b","\u2248","=/","\u2264","\u2265"].map((function(e,n){return(0,i.jsx)("button",{className:i8,value:e,onMouseDown:function(n){t(n,e)},children:(0,i.jsx)($W,{name:e})},"symbol-".concat(n))}))})},a8="SpecialSymbolsButton-module_textButton__1gh-c",s8="SpecialSymbolsButton-module_activeTextButton__jbgHY",u8=function(e){var t=e.editorState,n=e.setEditorState,r=e.styles,o=(0,eu.useState)(!1),a=(0,M.Z)(o,2),s=a[0],u=a[1];return(0,i.jsxs)("div",{onBlur:function(e){e.currentTarget.contains(e.relatedTarget)||function(e){e.stopPropagation(),e.preventDefault(),u(!1)}(e)},children:[(0,i.jsx)("button",{title:"symbols",onMouseDown:function(e){e.preventDefault(),u(!s)},className:s?s8:a8,children:(0,i.jsx)($W,{name:"text-special-symbols"})}),s&&(0,i.jsx)(o8,{select:function(e,i){e.preventDefault();var o=t.getSelection(),a=t.getCurrentContent(),s=Dj.Modifier.replaceText(a,o,i,r),l=Dj.EditorState.push(t,s,"insert-characters");n(l),u(!1)}})]})},l8="TextButton-module_textButton__Ocny2",c8="TextButton-module_isActive__DQ-xh",f8=function(e){return(0,i.jsx)("button",{className:(0,tu.Z)(l8,(0,r.Z)({},c8,e.active)),title:e.button.command.toLowerCase(),onMouseDown:function(t){!function(t,n){t.preventDefault(),e.toggleStyle(n)}(t,e.button.command)},children:(0,i.jsx)($W,{name:e.button.name})})},h8="Text-module_textEditor__EFR54",d8="Text-module_controlPanel__agLDc",p8=(0,Bj.ZP)(["font-size"]),v8=p8.styles,m8=p8.customStyleFn,g8=[{command:De.Bold,name:"text-bold"},{command:De.Italic,name:"text-italic"},{command:De.Superscript,name:"text-superscript"},{command:De.Subscript,name:"text-subscript"}],y8=(0,nu.$j)((function(e){return{formState:e.modal}}))((function(e){var t=e.formState,n=e.position,r=e.id,o=e.content?JSON.parse(e.content):null,a=(0,eu.useState)(Dj.EditorState.moveFocusToEnd(Dj.EditorState.createWithContent((0,Dj.convertFromRaw)(o||{blocks:[],entityMap:{}})))),s=(0,M.Z)(a,2),u=s[0],l=s[1],c=u.getCurrentInlineStyle(),f=(0,eu.useCallback)((function(e){var t=u;switch(e){case De.Subscript:c.has(De.Superscript)&&(t=Dj.RichUtils.toggleInlineStyle(t,De.Superscript));break;case De.Superscript:c.has(De.Subscript)&&(t=Dj.RichUtils.toggleInlineStyle(t,De.Subscript))}t=Dj.RichUtils.toggleInlineStyle(t,e),l(t)}),[c,u]),h=(0,eu.useRef)(),d=(0,eu.useCallback)((function(){h.current.focus()}),[h]);return(0,eu.useEffect)((function(){d()}),[d]),(0,i.jsxs)(TX,{className:h8,title:"Text Editor",params:e,result:function(){var e=u.getCurrentContent();return{content:e.hasText()?JSON.stringify((0,Dj.convertToRaw)(e)):"",position:n,id:r}},valid:function(){return t.form.valid},buttonsNameMap:{OK:"Apply"},buttons:["Cancel","OK"],withDivider:!0,children:[(0,i.jsxs)("div",{className:d8,onClick:d,children:[g8.map((function(e){return(0,i.jsx)(f8,{button:e,active:c.has(e.command),toggleStyle:f},e.name)})),(0,i.jsx)(u8,{editorState:u,setEditorState:l,styles:c}),(0,i.jsx)("span",{children:"Font Size"}),(0,i.jsx)(n8,{editorState:u,setEditorState:l,styles:v8})]}),(0,i.jsx)("span",{children:"Text:"}),(0,i.jsx)(Dj.Editor,{keyBindingFn:function(e){return 13===e.keyCode&&e.stopPropagation(),(0,Dj.getDefaultKeyBinding)(e)},editorState:u,onChange:function(e){l(e)},customStyleMap:{SUBSCRIPT:{verticalAlign:"sub",transform:"scale(0.7)",transformOrigin:"left"},SUPERSCRIPT:{verticalAlign:"super",transform:"scale(0.7)",transformOrigin:"left",lineHeight:0}},customStyleFn:m8,ref:h})]})})),b8={open:g3,analyse:s1,recognize:L1,"period-table":f5,"extended-table":v5,rgroup:M5,attach:b6,templates:J6,about:UJ,miew:G1,atomProps:l2,attachmentPoints:p2,automap:x2,bondProps:k2,check:H0,enhancedStereo:K3,labelEdit:n4,rgroupLogic:N2,removeFG:function(e){var t=(0,CK().getKetcherInstance)().editor,n=e.fgIds,r=function(t,n){e[t](n)};return(0,i.jsxs)("div",{onSubmit:function(e){return e.preventDefault()},tabIndex:-1,className:m5,children:[(0,i.jsx)("header",{className:y5,children:"Edit Abbreviation"}),(0,i.jsx)("div",{className:g5,children:"A change was detected for the abbreviation. Do you want to remove the abbreviation information from the structure and continue work with separate atoms and bonds?"}),(0,i.jsxs)("footer",{className:b5,children:[(0,i.jsx)("input",{type:"button",value:"Cancel",className:_5,onClick:function(){return r("onOk",!1)}}),(0,i.jsx)("input",{type:"button",value:"Remove Abbreviation",className:x5,onClick:function(){return r("onOk",function(){if(n.length>0){var e,r=w5(n);try{for(r.s();!(e=r.n()).done;){var i=e.value;t.update(La(t.render.ctab,i))}}catch(o){r.e(o)}finally{r.f()}}return!0}())}})]})]})},save:U3,settings:E0,sgroup:Q5,sdata:D5,text:y8,confirm:function(e){var t=e.onOk,n=e.onCancel;return(0,i.jsxs)("div",{className:m5,children:[(0,i.jsx)("header",{className:y5,children:"Warning!"}),(0,i.jsx)("div",{className:g5,children:"Unsupported S-group type found. Would you like to import structure without it?"}),(0,i.jsxs)("footer",{className:b5,children:[(0,i.jsx)("input",{type:"button",value:"Cancel",className:_5,onClick:function(){return n()}}),(0,i.jsx)("input",{type:"button",value:"OK",className:x5,onClick:function(){return t()}})]})]})}},x8=["modal"];function _8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_8(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_8(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S8(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S8(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k8=(0,nu.$j)((function(e){return{modal:e.modal}}),(function(e){return{onOk:function(t){e({type:"MODAL_CLOSE"})},onCancel:function(){e({type:"MODAL_CLOSE"})}}}),(function(e,t){var n=e.modal&&e.modal.prop,r=n?(0,F.omit)(["onResult","onCancel"],n):{};return E8(E8({modal:e.modal},r),{},{onOk:function(e){n&&n.onResult&&n.onResult(e),t.onOk(e)},onCancel:function(){n&&n.onCancel&&n.onCancel(),t.onCancel()}})}))((function(e){var t=e.modal,n=(0,N.Z)(e,x8),o=(0,eu.useRef)(null),a=au()({ref:o}),s=a.height,u=a.width;if(!t)return null;var l=b8[t.name];if(!l)throw new Error("There is no modal window named ".concat(t.name));return(0,i.jsx)("div",{className:(0,tu.Z)(_X,SX.selectContainer),ref:o,children:(0,i.jsx)(l,w8({className:(0,tu.Z)((0,r.Z)({},wX,s&&s<=kX||u&&u<=EX))},n))})}));function O8(e,t){var r=(0,F.debounce)(100,(function(){return e({type:"UPDATE"})})),i=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function o(e){var t=n.g.currentState,i=t.actionState.activeTool.tool;if("select"!==i){var o=t.toolbar.visibleTools.select,a=t.options.settings.resetToSelect;!0===a||a===i?e({type:"ACTION",action:_Z[o].action}):r()}}return{onInit:function(t){e({type:"INIT",editor:t})},onChange:function(t){void 0===t?i(0).then((function(){return e(o)})):e(o)},onSelectionChange:function(){r()},onElementEdit:function(n){var r="text"===n.type?n:sB(n),i=null;if("text"===r.type)return Cq(e,"text",r);if(H(r.label))i=Cq(e,"atomProps",r);else if(1===Object.keys(r).length&&"ap"in r)i=Cq(e,"attachmentPoints",r.ap).then((function(e){return{ap:e}}));else if("list"===r.type||"not-list"===r.type)i=Cq(e,"period-table",r);else if("rlabel"===r.type){var o=t().editor.struct().rgroups,a={type:"atom",values:r.values,disabledIds:Array.from(o.entries()).reduce((function(e,t){var n=(0,M.Z)(t,2),i=n[0];return n[1].frags.has(r.fragId)&&e.push(i),e}),[])};i=Cq(e,"rgroup",a).then((function(e){return{values:e.values,type:"rlabel"}}))}else i=Cq(e,"period-table",r);return i.then(uB)},onEnhancedStereoEdit:function(t){var n=zj({},t);return i(0).then((function(){return n=function(e){if(null===e)return{type:null};var t=e.match(/\D+/g)[0],n=+e.replace(t,"");return t===Q.Abs?{type:e,orNumber:1,andNumber:1}:t===Q.And?{type:t,orNumber:1,andNumber:n}:t===Q.Or?{type:t,orNumber:n,andNumber:1}:void 0}(n.stereoLabel),Cq(e,"enhancedStereo",{init:n}).then((function(e){return function(e){switch(e.type){case Q.And:return"".concat(Q.And).concat(e.andNumber||1);case Q.Or:return"".concat(Q.Or).concat(e.orNumber||1);default:return e.type}}(e)}),(function(){return null}))}))},onQuickEdit:function(t){return Cq(e,"labelEdit",t)},onBondEdit:function(t){return Cq(e,"bondProps",(n=t,{type:pB(n.type,n.stereo),topology:n.topology||0,center:n.reactingCenterStatus||0})).then(hB);var n},onRgroupEdit:function(n){var r=t().editor.struct();if(Object.keys(n).length>2){var i=Array.from(r.rgroups.keys());return n.range||(n.range=">0"),Cq(e,"rgroupLogic",Object.assign({rgroupLabels:i},n))}var o=Array.from(r.atoms.values()).reduce((function(e,t){return t.fragment===n.fragId&&null!==t.rglabel?e.concat(sB(t).values):e}),[]),a={type:"fragment",values:[n.label],disabledIds:o};return Cq(e,"rgroup",a).then((function(e){return{label:e.values[0]}}))},onSgroupEdit:function(t){return i(0).then((function(){return Cq(e,"sgroup",mB(t))})).then(gB)},onRemoveFG:function(t){return i(0).then((function(){return Cq(e,"removeFG",t)}))},onSdataEdit:function(t){return i(0).then((function(){return Cq(e,"DAT"===t.type?"sdata":"sgroup",mB(t))})).then(gB)},onMessage:function(e){e.error},onAromatizeStruct:function(e){var n=t(),r=n.options.getServerSettings();return CB(n.editor,n.server,"aromatize",r,e).catch((function(e){return n.editor.errorHandler(e)}))},onDearomatizeStruct:function(e){var n=t(),r=n.options.getServerSettings();return CB(n.editor,n.server,"dearomatize",r,e).catch((function(e){return n.editor.errorHandler(e)}))},onMouseDown:function(){r()},onConfirm:function(){return Cq(e,"confirm")}}}var A8=(0,nu.$j)((function(e){return{options:e.options.settings,indigoVerification:e.requestsStatuses.indigoVerification}}),(function(e){return e(O8)}))(BJ),C8="App-module_app__8cgyF",M8="App-module_canvas__taJxn",T8="App-module_top__SBeSV",P8="App-module_left__2iz-i",R8="App-module_right__U7A5Q",I8="App-module_bottom__tQA2B",L8=(0,Ou.Z)({components:{MuiButtonBase:{defaultProps:{disableRipple:!0}}}}),N8={checkServer:function(){return function(e,t){var n=t(),r=n.editor;n.server.then((function(t){return e(wD({indigoVersion:null===t||void 0===t?void 0:t.indigoVersion,imagoVersions:null===t||void 0===t?void 0:t.imagoVersions,server:null===t||void 0===t?void 0:t.isAvailable}))}),(function(e){return r.errorHandler(e)}))}}},j8=(0,nu.$j)(null,N8)((function(e){var t=(0,nu.I0)(),n=e.checkServer,r=SK().staticResourcesUrl;return(0,eu.useEffect)((function(){var e;n(),t((e=r,function(){var t=a(u().mark((function t(n){var r,i,o,a,s,l;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(e,"/templates/").concat("fg.sdf"),i=de.getInstance(),o=new Sn,t.next=6,Eq(r);case 6:a=t.sent,s=o.deserialize(a),l=s.reduce((function(e,t){var n=t.struct;return[].concat(k(e),[n])}),[]),i.setFunctionalGroupsList(l),n({type:"FG_INIT",payload:{lib:s}}),n(wD({functionalGroups:!0}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[]),(0,i.jsx)(Nu,{theme:L8,children:(0,i.jsxs)("div",{className:C8,children:[(0,i.jsx)(xX,{}),(0,i.jsx)(A8,{className:M8}),(0,i.jsx)(aX,{className:T8}),(0,i.jsx)(YK,{className:P8}),(0,i.jsx)(iK,{className:I8}),(0,i.jsx)(TY,{className:R8}),(0,i.jsx)(bX,{}),(0,i.jsx)(k8,{})]})})}));function D8(t,n,r,o,a){var s=rK(r,o,a);s.dispatch(pX(t)),s.dispatch((function(e,t){var n=(0,F.throttle)(250,(function(){var n=t();n.editor.render.update(),e({type:"CLEAR_VISIBLE",data:n.actionState.activeTool})}));addEventListener("resize",n)})),e.render((0,i.jsx)(nu.zt,{store:s,children:(0,i.jsx)(Zj.Provider,{value:{staticResourcesUrl:n},children:(0,i.jsx)(Uj.Provider,{value:{errorHandler:r.errorHandler},children:(0,i.jsx)(Vj.Provider,{value:{getKetcherInstance:function(){return window.ketcher}},children:(0,i.jsx)(j8,{})})})})}),t)}var B8=function(){function e(){(0,l.Z)(this,e),this.structService=null,this.editor=null,this.serviceMode=null,this.formatterFactory=null}return(0,c.Z)(e,[{key:"appendApiAsync",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.structService=Fj(t,{"smart-layout":!0,"ignore-stereochemistry-errors":!0,"mass-skip-error-on-pseudoatoms":!1,"gross-formula-add-rsites":!0,"aromatize-skip-superatoms":!0});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"appendServiceMode",value:function(e){this.serviceMode=e}},{key:"appendUiAsync",value:function(){var e=a(u().mark((function e(t,n,r,i){var o,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.structService,e.next=3,new Promise((function(e){D8(t,n,{buttons:i||{},errorHandler:r||null,version:"2.5.0",buildDate:"2022-05-30T15:36:32",buildNumber:""},o,e)}));case 3:a=e.sent,this.editor=a,this.editor.errorHandler=r&&"function"===typeof r?r:function(){},this.formatterFactory=new cr(o);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"build",value:function(){if(!this.serviceMode)throw new Error("You should append ServiceMode before building");if(!this.structService)throw new Error("You should append Api before building");if(!this.formatterFactory)throw new Error("You should append StructureServiceFactory before building");var e=new Ks(this.editor,this.structService,this.formatterFactory);e[this.serviceMode]=!0;var t=new URLSearchParams(document.location.search).get("moll");return t&&e.setMolecule(t),e}}]),e}();function z8(){return z8=a(u().mark((function e(t){var n,r,i,o,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.element,r=t.staticResourcesUrl,i=t.structServiceProvider,o=t.buttons,a=t.errorHandler,s=new B8,e.next=4,s.appendApiAsync(i);case 4:return s.appendServiceMode(i.mode),e.next=7,s.appendUiAsync(n,r,a,o);case 7:return e.abrupt("return",s.build());case 8:case"end":return e.stop()}}),e)}))),z8.apply(this,arguments)}var F8="Editor-module_small__8cgEX",V8="Editor-module_editor__o0Gjz";function U8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U8(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U8(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H8=1040,G8=600;function W8(e){var t=(0,eu.useRef)(null),n=e.onInit,o=OK({ref:t}),a=o.height,s=o.width;return(0,eu.useEffect)((function(){(function(e){return z8.apply(this,arguments)})(Z8(Z8({},e),{},{element:t.current})).then((function(e){"function"===typeof n&&n(e)}))}),[]),(0,i.jsx)("div",{ref:t,className:(0,tu.Z)("Ketcher-root",V8,(0,r.Z)({},F8,a&&a<=G8||s&&s<=H8))})}var q8=function(e){var t=e.message,n=e.close;return(0,i.jsx)("div",{className:"modalOverlay",children:(0,i.jsxs)("div",{className:"modalWindow",children:[(0,i.jsx)("header",{children:"Error Message"}),(0,i.jsx)("div",{className:"modalBody",children:t}),(0,i.jsx)("footer",{children:(0,i.jsx)("button",{className:"ok",onClick:function(){n()},children:"Close"})})]})})},K8=function(e){var t=e.toggle;return(0,i.jsxs)("label",{className:"switch",children:[(0,i.jsx)("input",{type:"checkbox",onChange:function(e){return t(e.target.checked)}}),(0,i.jsx)("span",{className:"slider"})]})},Y8=new Cn("http://52.32.91.31/v2"),X8=function(){return null},$8=function(){var e=function(){var e=new URLSearchParams(window.location.search).get("hiddenControls");return e?e.split(",").reduce((function(e,t){return t&&(e[t]={hidden:!0}),e}),{}):{}}(),r=(0,eu.useState)(!1),o=(0,t.Z)(r,2),a=o[0],s=o[1],u=(0,eu.useState)(""),l=(0,t.Z)(u,2),c=l[0],f=l[1],h=(0,eu.useState)(!1),d=(0,t.Z)(h,2),p=d[0],v=d[1];return p?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(X8,{}),(0,i.jsx)(K8,{toggle:v})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(W8,{errorHandler:function(e){s(!0),f(e.toString())},buttons:e,staticResourcesUrl:".",structServiceProvider:Y8,onInit:function(e){n.g.ketcher=e,window.parent.postMessage({eventType:"init"},"*")}}),false,a&&(0,i.jsx)(q8,{message:c,close:function(){s(!1);var e=document.querySelector(".cliparea");null===e||void 0===e||e.focus()}})]})};e.render((0,i.jsx)($8,{}),document.getElementById("root"))}()}();